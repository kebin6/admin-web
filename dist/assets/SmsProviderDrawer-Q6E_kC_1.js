var D=Object.defineProperty;var v=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var g=(e,s,r)=>s in e?D(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,P=(e,s)=>{for(var r in s||(s={}))y.call(s,r)&&g(e,r,s[r]);if(v)for(var r of v(s))M.call(s,r)&&g(e,r,s[r]);return e};var f=(e,s,r)=>new Promise((m,c)=>{var u=o=>{try{n(r.next(o))}catch(i){c(i)}},l=o=>{try{n(r.throw(o))}catch(i){c(i)}},n=o=>o.done?m(o.value):Promise.resolve(o.value).then(u,l);n((r=r.apply(e,s)).next())});import{_ as I,a as B}from"./useForm-DGqLGoed.js";import{a as p,b as F,e as R,as as C,v as k,_ as $}from"./entry/index-DvPJ5Vzs-1718250502895.js";import{l as T,d as q,f as L,c as O,u as d,ab as b,_ as j,a7 as x,a8 as A,k as V,ac as G}from"./vue-BMCEF3Jf.js";import{Q as K}from"./antd-BPAr-OsJ.js";import{B as N,a as U}from"./index-BsqrLki-.js";const te=(e,s="notice")=>p.post({url:"/sys-api/sms_provider/list",params:e},{errorMessageMode:s}),z=(e,s="notice")=>p.post({url:"/sys-api/sms_provider/create",params:e},{errorMessageMode:s,successMessageMode:s}),h=(e,s="notice")=>p.post({url:"/sys-api/sms_provider/update",params:e},{errorMessageMode:s,successMessageMode:s}),oe=(e,s="notice")=>p.post({url:"/sys-api/sms_provider/delete",params:e},{errorMessageMode:s,successMessageMode:s}),{t}=F(),ae=[{title:t("mcms.smsProvider.name"),dataIndex:"name",width:50},{title:t("mcms.smsProvider.isDefault"),dataIndex:"isDefault",width:20,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),T(K,{checked:e.isDefault===!0,checkedChildren:t("common.yes"),unCheckedChildren:t("common.no"),loading:e.pendingStatus,onChange(s,r){e.pendingStatus=!0,h({id:e.id,isDefault:s}).then(()=>{e.isDefault=s,R()()}).finally(()=>{e.pendingStatus=!1})}}))},{title:t("common.createTime"),dataIndex:"createdAt",width:30,customRender:({record:e})=>C(e.createdAt)}],ne=[{field:"name",label:t("mcms.smsProvider.name"),component:"Select",colProps:{span:8},componentProps:{options:[{label:t("mcms.smsProvider.tencent"),value:"tencent"},{label:t("mcms.smsProvider.aliyun"),value:"aliyun"},{label:t("mcms.smsProvider.uni"),value:"uni"}]}}],H=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:t("mcms.smsProvider.name"),component:"Select",required:!0,componentProps:{options:[{label:t("mcms.smsProvider.tencent"),value:"tencent"},{label:t("mcms.smsProvider.aliyun"),value:"aliyun"},{label:t("mcms.smsProvider.uni"),value:"uni"}]}},{field:"secretId",label:t("mcms.smsProvider.secretId"),component:"Input",required:!0},{field:"secretKey",label:t("mcms.smsProvider.secretKey"),component:"Input",required:!0},{field:"region",label:t("mcms.smsProvider.region"),component:"Input",required:!0},{field:"isDefault",label:t("mcms.smsProvider.isDefault"),component:"RadioButtonGroup",required:!0,defaultValue:!1,componentProps:{options:[{label:t("common.yes"),value:!0},{label:t("common.no"),value:!1}]}}],Q=q({name:"SmsProviderDrawer",components:{BasicDrawer:N,BasicForm:I},emits:["success","register"],setup(e,{emit:s}){const r=L(!0),{t:m}=k.useI18n(),[c,{resetFields:u,setFieldsValue:l,validate:n}]=B({labelWidth:140,baseColProps:{span:24},layout:"vertical",schemas:H,showActionButtonGroup:!1}),[o,{setDrawerProps:i,closeDrawer:S}]=U(a=>f(this,null,function*(){u(),i({confirmLoading:!1}),r.value=!!(a!=null&&a.isUpdate),d(r)&&l(P({},a.record))})),_=O(()=>d(r)?m("mcms.smsProvider.editSmsProvider"):m("mcms.smsProvider.addSmsProvider"));function w(){return f(this,null,function*(){const a=yield n();i({confirmLoading:!0}),a.id=d(r)?Number(a.id):0,(d(r)?yield h(a):yield z(a)).code===0&&(S(),s("success")),i({confirmLoading:!1})})}return{registerDrawer:o,registerForm:c,getTitle:_,handleSubmit:w}}});function W(e,s,r,m,c,u){const l=b("BasicForm"),n=b("BasicDrawer");return j(),x(n,G(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"500px",onOk:e.handleSubmit}),{default:A(()=>[V(l,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const E=$(Q,[["render",W]]),ie=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"}));export{E as S,ie as a,ae as c,oe as d,te as g,ne as s};
