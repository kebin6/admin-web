var u=(e,p,t)=>new Promise((i,s)=>{var l=o=>{try{a(t.next(o))}catch(n){s(n)}},c=o=>{try{a(t.throw(o))}catch(n){s(n)}},a=o=>o.done?i(o.value):Promise.resolve(o.value).then(l,c);a((t=t.apply(e,p)).next())});import{B as h,u as C}from"./useTable-CCLOgsii.js";import{T as D}from"./useForm-5wnZKxWU.js";import{u as R}from"./index-DDf_l8hU.js";import{R as T,c as y}from"./RoleDrawer-BLOy0t2V.js";import{v as k,ar as S,_ as B}from"./entry/index-C41ZFr6n-1718602026943.js";import{g as A,d as v}from"./role-CcbQT4ih.js";import{P as I}from"./index-Dk0RLsSC.js";import{d as P,ab as m,_,a7 as w,a8 as d,k as f,G as W,a1 as $,aa as M}from"./vue-BMCEF3Jf.js";import"./index-oRM4bmDd.js";import"./antd-BPAr-OsJ.js";import"./isBoolean-Dou3jA6I.js";import"./index-G5Wa8967.js";import"./useWindowSizeFn-Cczi9si3.js";import"./isDeepEqual-CCjWtLPA.js";import"./isNumber-j3SIk7av.js";import"./index-CrgunjrK.js";import"./object-BY_VTB7H.js";import"./onMountedOrActivated-CPthIpwg.js";import"./sortable.esm-DFFrMEeC.js";import"./index-D93fFNl6.js";import"./copyTextToClipboard-Cxs8Y4LI.js";import"./useSortable-B_A9JW_B.js";import"./index-CqgpaEX_.js";import"./index-9koevRY3.js";import"./useContentViewHeight-3hiKmHsM.js";const N=P({name:"RoleManagement",components:{BasicTable:h,RoleDrawer:T,TableAction:D,PageWrapper:I},setup(){const{t:e}=k.useI18n(),{createMessage:p}=S(),[t,{openDrawer:i}]=R(),[s,{reload:l}]=C({title:e("sys.role.roleList"),api:A,columns:y,formConfig:{labelWidth:120},useSearchForm:!1,showTableSetting:!0,bordered:!0,showIndexColumn:!1,actionColumn:{width:80,title:e("common.action"),dataIndex:"action",fixed:void 0}});function c(){i(!0,{isUpdate:!1})}function a(r){i(!0,{record:r,isUpdate:!0})}function o(r){return u(this,null,function*(){if(r.id===1){p.warn(e("common.notAllowDeleteAdminData"));return}(yield v({ids:[r.id]})).code===0&&(yield l())})}function n(){return u(this,null,function*(){yield l()})}return{t:e,registerTable:s,registerDrawer:t,handleCreate:c,handleEdit:a,handleDelete:o,handleSuccess:n}}});function V(e,p,t,i,s,l){const c=m("a-button"),a=m("TableAction"),o=m("BasicTable"),n=m("RoleDrawer"),r=m("PageWrapper");return _(),w(r,null,{default:d(()=>[f(o,{onRegister:e.registerTable},{toolbar:d(()=>[f(c,{type:"primary",onClick:e.handleCreate},{default:d(()=>[W($(e.t("sys.role.addRole")),1)]),_:1},8,["onClick"])]),bodyCell:d(({column:g,record:b})=>[g.key==="action"?(_(),w(a,{key:0,actions:[{icon:"clarity:note-edit-line",onClick:e.handleEdit.bind(null,b)},{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:e.t("common.deleteConfirm"),placement:"left",confirm:e.handleDelete.bind(null,b)}}]},null,8,["actions"])):M("",!0)]),_:1},8,["onRegister"]),f(n,{onRegister:e.registerDrawer,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])]),_:1})}const ce=B(N,[["render",V]]);export{ce as default};
