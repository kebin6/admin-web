var me=Object.defineProperty,he=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var ee=(e,o,a)=>o in e?me(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,H=(e,o)=>{for(var a in o||(o={}))Ce.call(o,a)&&ee(e,a,o[a]);if(x)for(var a of x(o))Me.call(o,a)&&ee(e,a,o[a]);return e},E=(e,o)=>he(e,ye(o));var A=(e,o,a)=>new Promise((i,l)=>{var c=u=>{try{n(a.next(u))}catch(d){l(d)}},t=u=>{try{n(a.throw(u))}catch(d){l(d)}},n=u=>u.done?i(u.value):Promise.resolve(u.value).then(c,t);n((a=a.apply(e,o)).next())});import{b as se,m as be,b1 as He,x as Se,w as Fe,b2 as ke,_ as L,f as re,aD as X,t as ie,d as $e,aQ as ve,aR as ce,an as Be,am as Oe}from"./entry/index-DvPJ5Vzs-1718250502895.js";import{h as q,u as r,d as D,I as Pe,k as S,i as Te,f as g,c as F,w as ue,o as we,b as de,y as B,ab as y,n as De,_ as M,a7 as P,a8 as m,m as Re,$ as V,af as Ne,ae as O,F as We,aa as Y,a2 as Ee,G as U,a1 as G,ac as j,g as Q,z as je,ad as te,a9 as ne,ag as oe,ah as le,r as pe,J as z}from"./vue-BMCEF3Jf.js";import{M as Le,T as Ie,F as _e,y as Ae,as as ze}from"./antd-BPAr-OsJ.js";import{S as Ve,B as qe}from"./index-CU9epjG0.js";import{u as Xe}from"./useWindowSizeFn-DLNrSaDV.js";import{i as Ye}from"./isDeepEqual-DDA9_BTC.js";const{t:ae}=se(),Ue={open:{type:Boolean},scrollTop:{type:Boolean,default:!0},height:{type:Number},minHeight:{type:Number},draggable:{type:Boolean,default:!0},centered:{type:Boolean},cancelText:{type:String,default:ae("common.cancelText")},okText:{type:String,default:ae("common.okText")},closeFunc:Function},K=Object.assign({},Ue,{defaultFullscreen:{type:Boolean},canFullscreen:{type:Boolean,default:!0},wrapperFooterOffset:{type:Number,default:0},helpMessage:[String,Array],useWrapper:{type:Boolean,default:!0},loading:{type:Boolean},loadingTip:{type:String},showCancelBtn:{type:Boolean,default:!0},showOkBtn:{type:Boolean,default:!0},wrapperProps:Object,afterClose:Function,bodyStyle:Object,closable:{type:Boolean,default:!0},closeIcon:Object,confirmLoading:{type:Boolean},destroyOnClose:{type:Boolean},footer:Object,getContainer:Function,mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},maskStyle:Object,okType:{type:String,default:"primary"},okButtonProps:Object,cancelButtonProps:Object,title:{type:String},open:{type:Boolean},width:[String,Number],wrapClassName:{type:String},zIndex:{type:Number}});function Ge(e){const o=(l,c)=>getComputedStyle(l)[c],a=l=>{if(!l)return;l.setAttribute("data-drag",r(e.draggable));const c=l.querySelector(".ant-modal-header"),t=l.querySelector(".ant-modal");!c||!t||!r(e.draggable)||(c.style.cursor="move",c.onmousedown=n=>{if(!n)return;const u=n.clientX,d=n.clientY,p=document.body.clientWidth,f=document.documentElement.clientHeight,h=t.offsetWidth,b=t.offsetHeight,k=t.offsetLeft,$=p-t.offsetLeft-h,v=t.offsetTop,I=f-t.offsetTop-b,T=o(t,"left"),R=o(t,"top");let N=+T,W=+R;T.includes("%")?(N=+document.body.clientWidth*(+T.replace(/%/g,"")/100),W=+document.body.clientHeight*(+R.replace(/%/g,"")/100)):(N=+T.replace(/px/g,""),W=+R.replace(/px/g,"")),document.onmousemove=function(_){let s=_.clientX-u,C=_.clientY-d;-s>k?s=-k:s>$&&(s=$),-C>v?C=-v:C>I&&(C=I),t.style.cssText+=`;left:${s+N}px;top:${C+W}px;`},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}})},i=()=>{const l=document.querySelectorAll(".ant-modal-wrap");for(const c of Array.from(l)){if(!c)continue;const t=o(c,"display"),n=c.getAttribute("data-drag");t!=="none"&&(n===null||r(e.destroyOnClose))&&a(c)}};q(()=>{!r(e.open)||!r(e.draggable)||be(()=>{i()},30)})}function Je(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Te(e)}const Qe=D({name:"Modal",inheritAttrs:!1,props:K,emits:["cancel"],setup(e,{slots:o,emit:a,attrs:i}){const{open:l,draggable:c,destroyOnClose:t}=Pe(e);Ge({open:l,destroyOnClose:t,draggable:c});const n=u=>{a("cancel",u)};return()=>{let u;const d=E(H(H({},r(i)),e),{onCancel:n});return S(Le,d,Je(u=He(o))?u:{default:()=>[u]})}}}),fe=Symbol();function Ke(e){return Fe(e,fe)}function Ft(){return Se(fe)}const Ze={loading:{type:Boolean},useWrapper:{type:Boolean,default:!0},modalHeaderHeight:{type:Number,default:57},modalFooterHeight:{type:Number,default:74},minHeight:{type:Number,default:200},height:{type:Number},footerOffset:{type:Number,default:0},open:{type:Boolean},fullScreen:{type:Boolean},loadingTip:{type:String}},xe=D({name:"ModalWrapper",components:{ScrollContainer:Ve},inheritAttrs:!1,props:Ze,emits:["height-change","ext-height"],setup(e,{emit:o}){const a=g(null),i=g(null),l=g(0),c=g(0),t=g(0);Xe(d.bind(null)),ke(i,()=>{d()},{attributes:!0,subtree:!0}),Ke({redoModalHeight:d});const n=F(()=>({minHeight:`${e.minHeight}px`,[e.fullScreen?"height":"maxHeight"]:`${r(l)}px`}));q(()=>{e.useWrapper&&d()}),ue(()=>e.fullScreen,p=>{d(),p?c.value=l.value:l.value=c.value}),we(()=>{const{modalHeaderHeight:p,modalFooterHeight:f}=e;o("ext-height",p+f)}),de(()=>{});function u(){return A(this,null,function*(){B(()=>{var f;const p=r(a);p&&((f=p==null?void 0:p.scrollTo)==null||f.call(p,0))})})}function d(){return A(this,null,function*(){if(!e.open)return;const p=r(a);if(!p)return;const f=p.$el.parentElement;if(f){f.style.padding="0",yield B();try{const h=f.parentElement&&f.parentElement.parentElement;if(!h)return;const b=getComputedStyle(h).top,k=Number.parseInt(b);let $=window.innerHeight-k*2+(e.footerOffset||0)-e.modalFooterHeight-e.modalHeaderHeight;k<40&&($-=26),yield B();const v=r(i);if(!v)return;yield B(),t.value=v.scrollHeight,e.fullScreen?l.value=window.innerHeight-e.modalFooterHeight-e.modalHeaderHeight-28:l.value=e.height?e.height:t.value>$?$:t.value,o("height-change",r(l))}catch(h){}}})}return{wrapperRef:a,spinRef:i,spinStyle:n,scrollTop:u,setModalHeight:d,realHeight:t}}}),et=["loading-tip"];function tt(e,o,a,i,l,c){const t=y("ScrollContainer"),n=De("loading");return M(),P(t,{ref:"wrapperRef",scrollHeight:e.realHeight},{default:m(()=>[Re((M(),V("div",{ref:"spinRef",style:Ne(e.spinStyle),"loading-tip":e.loadingTip},[O(e.$slots,"default")],12,et)),[[n,e.loading]])]),_:3},8,["scrollHeight"])}const nt=L(xe,[["render",tt]]),ot=D({name:"ModalClose",components:{Tooltip:Ie,FullscreenExitOutlined:_e,FullscreenOutlined:Ae,CloseOutlined:ze},props:{canFullscreen:{type:Boolean,default:!0},fullScreen:{type:Boolean}},emits:["cancel","fullscreen"],setup(e,{emit:o}){const{prefixCls:a}=re("basic-modal-close"),{t:i}=se(),l=F(()=>[a,`${a}--custom`,{[`${a}--can-full`]:e.canFullscreen}]);function c(n){o("cancel",n)}function t(n){n==null||n.stopPropagation(),n==null||n.preventDefault(),o("fullscreen")}return{t:i,getClass:l,prefixCls:a,handleCancel:c,handleFullScreen:t}}});function lt(e,o,a,i,l,c){const t=y("FullscreenExitOutlined"),n=y("Tooltip"),u=y("FullscreenOutlined"),d=y("CloseOutlined");return M(),V("div",{class:Ee(e.getClass)},[e.canFullscreen?(M(),V(We,{key:0},[e.fullScreen?(M(),P(n,{key:0,title:e.t("component.modal.restore"),placement:"bottom"},{default:m(()=>[S(t,{role:"full",onClick:e.handleFullScreen},null,8,["onClick"])]),_:1},8,["title"])):(M(),P(n,{key:1,title:e.t("component.modal.maximize"),placement:"bottom"},{default:m(()=>[S(u,{role:"close",onClick:e.handleFullScreen},null,8,["onClick"])]),_:1},8,["title"]))],64)):Y("",!0),S(n,{title:e.t("component.modal.close"),placement:"bottom"},{default:m(()=>[S(d,{onClick:e.handleCancel},null,8,["onClick"])]),_:1},8,["title"])],2)}const at=L(ot,[["render",lt]]),st=D({name:"BasicModalFooter",props:K,emits:["ok","cancel"],setup(e,{emit:o}){function a(l){o("ok",l)}function i(l){o("cancel",l)}return{handleOk:a,handleCancel:i}}});function rt(e,o,a,i,l,c){const t=y("a-button");return M(),V("div",null,[O(e.$slots,"insertFooter"),e.showCancelBtn?(M(),P(t,j({key:0},e.cancelButtonProps,{onClick:e.handleCancel}),{default:m(()=>[U(G(e.cancelText),1)]),_:1},16,["onClick"])):Y("",!0),O(e.$slots,"centerFooter"),e.showOkBtn?(M(),P(t,j({key:1,type:e.okType,onClick:e.handleOk,loading:e.confirmLoading},e.okButtonProps),{default:m(()=>[U(G(e.okText),1)]),_:1},16,["type","onClick","loading"])):Y("",!0),O(e.$slots,"appendFooter")])}const it=L(st,[["render",rt]]),ct=D({name:"BasicModalHeader",components:{BasicTitle:qe},props:{helpMessage:{type:[String,Array]},title:{type:String}}});function ut(e,o,a,i,l,c){const t=y("BasicTitle");return M(),P(t,{helpMessage:e.helpMessage},{default:m(()=>[U(G(e.title),1)]),_:1},8,["helpMessage"])}const dt=L(ct,[["render",ut]]);function pt(e){const o=g(!1),a=F(()=>{const l=r(e.wrapClassName)||"";return r(o)?`fullscreen-modal ${l} `:r(l)});function i(l){l&&l.stopPropagation(),o.value=!r(o)}return{getWrapClassName:a,handleFullScreen:i,fullScreenRef:o}}const ft=D({name:"BasicModal",components:{Modal:Qe,ModalWrapper:nt,ModalClose:at,ModalFooter:it,ModalHeader:dt},inheritAttrs:!1,props:K,emits:["open-change","height-change","cancel","ok","register","update:open"],setup(e,{emit:o,attrs:a}){const i=g(!1),l=g(null),c=g(null),{prefixCls:t}=re("basic-modal"),n=g(0),u={setModalProps:T,emitOpen:void 0,redoModalHeight:()=>{B(()=>{r(c)&&r(c).setModalHeight()})}},d=Q();d&&o("register",u,d.uid);const p=F(()=>H(H({},e),r(l))),{handleFullScreen:f,getWrapClassName:h,fullScreenRef:b}=pt({modalWrapperRef:c,extHeightRef:n,wrapClassName:je(p.value,"wrapClassName")}),k=F(()=>{const s=E(H({},r(p)),{open:r(i),okButtonProps:void 0,cancelButtonProps:void 0,title:void 0});return E(H({},s),{wrapClassName:r(h)})}),$=F(()=>{const s=E(H(H({},a),r(p)),{open:r(i)});return s.wrapClassName=`${(s==null?void 0:s.wrapClassName)||""} ${r(h)}vben-basic-modal-wrap`,r(b)?X(s,["height","title"]):X(s,["title"])}),v=F(()=>{if(!r(b))return r(k).height});q(()=>{i.value=!!e.open,b.value=!!e.defaultFullscreen}),ue(()=>r(i),s=>{var C;o("open-change",s),o("update:open",s),d&&((C=u.emitOpen)==null||C.call(u,s,d.uid)),B(()=>{e.scrollTop&&s&&r(c)&&r(c).scrollTop()})},{immediate:!1});function I(s){return A(this,null,function*(){var C,Z;if(s==null||s.stopPropagation(),!((Z=(C=s.target)==null?void 0:C.classList)!=null&&Z.contains(t+"-close--custom"))){if(e.closeFunc&&ie(e.closeFunc)){const ge=yield e.closeFunc();i.value=!ge;return}i.value=!1,o("cancel",s)}})}function T(s){l.value=$e(r(l)||{},s),Reflect.has(s,"open")&&(i.value=!!s.open),Reflect.has(s,"defaultFullscreen")&&(b.value=!!s.defaultFullscreen)}function R(s){o("ok",s)}function N(s){o("height-change",s)}function W(s){n.value=s}function _(s){e.canFullscreen&&(s.stopPropagation(),f(s))}return{handleCancel:I,getBindValue:$,getProps:k,handleFullScreen:f,fullScreenRef:b,getMergeProps:p,handleOk:R,openRef:i,omit:X,modalWrapperRef:c,handleExtHeight:W,handleHeightChange:N,handleTitleDbClick:_,getWrapperHeight:v}}});function gt(e,o,a,i,l,c){const t=y("ModalClose"),n=y("ModalHeader"),u=y("ModalFooter"),d=y("ModalWrapper"),p=y("Modal");return M(),P(p,j(e.getBindValue,{onCancel:e.handleCancel}),te({default:m(()=>[S(d,j({useWrapper:e.getProps.useWrapper,footerOffset:e.wrapperFooterOffset,fullScreen:e.fullScreenRef,ref:"modalWrapperRef",loading:e.getProps.loading,"loading-tip":e.getProps.loadingTip,minHeight:e.getProps.minHeight,height:e.getWrapperHeight,open:e.openRef,modalFooterHeight:e.footer!==void 0&&!e.footer?0:void 0},e.getProps.wrapperProps?e.omit(e.getProps.wrapperProps,["open","height","modalFooterHeight"]):{},{onExtHeight:e.handleExtHeight,onHeightChange:e.handleHeightChange}),{default:m(()=>[O(e.$slots,"default")]),_:3},16,["useWrapper","footerOffset","fullScreen","loading","loading-tip","minHeight","height","open","modalFooterHeight","onExtHeight","onHeightChange"])]),_:2},[e.$slots.closeIcon?void 0:{name:"closeIcon",fn:m(()=>[S(t,{canFullscreen:e.getProps.canFullscreen,fullScreen:e.fullScreenRef,onCancel:e.handleCancel,onFullscreen:e.handleFullScreen},null,8,["canFullscreen","fullScreen","onCancel","onFullscreen"])]),key:"0"},e.$slots.title?void 0:{name:"title",fn:m(()=>[S(n,{helpMessage:e.getProps.helpMessage,title:e.getMergeProps.title,onDblclick:e.handleTitleDbClick},null,8,["helpMessage","title","onDblclick"])]),key:"1"},e.$slots.footer?void 0:{name:"footer",fn:m(()=>[S(u,j(e.getBindValue,{onOk:e.handleOk,onCancel:e.handleCancel}),te({_:2},[ne(Object.keys(e.$slots),f=>({name:f,fn:m(h=>[O(e.$slots,f,oe(le(h||{})))])}))]),1040,["onOk","onCancel"])]),key:"2"},ne(Object.keys(e.omit(e.$slots,["default"])),f=>({name:f,fn:m(h=>[O(e.$slots,f,oe(le(h||{})))])}))]),1040,["onCancel"])}const mt=L(ft,[["render",gt]]),w=pe({}),J=pe({});function kt(){const e=g(null),o=g(!1),a=g(0);function i(t,n){if(!Q())throw new Error("useModal() can only be used inside setup() or functional components!");a.value=n,de(()=>{e.value=null,o.value=!1,w[String(r(a))]=null}),!(r(o)&&ve()&&t===r(e))&&(e.value=t,o.value=!0,t.emitOpen=(u,d)=>{J[d]=u})}const l=()=>{const t=r(e);return t||ce("useModal instance is undefined!"),t},c={setModalProps:t=>{var n;(n=l())==null||n.setModalProps(t)},getOpen:F(()=>J[~~r(a)]),redoModalHeight:()=>{var t,n;(n=(t=l())==null?void 0:t.redoModalHeight)==null||n.call(t)},openModal:(t=!0,n,u=!0)=>{var f;if((f=l())==null||f.setModalProps({open:t}),!n)return;const d=r(a);if(u){w[d]=null,w[d]=z(n);return}Ye(z(w[d]),z(n))||(w[d]=z(n))},closeModal:()=>{var t;(t=l())==null||t.setModalProps({open:!1})}};return[i,c]}const $t=e=>{const o=g(null),a=Q(),i=g(0),l=()=>{const t=r(o);return t||ce("useModalInner instance is undefined!"),t},c=(t,n)=>{Be(()=>{o.value=null}),i.value=n,o.value=t,a==null||a.emit("register",t,n)};return q(()=>{const t=w[r(i)];t&&(!e||!ie(e)||B(()=>{e(t)}))}),[c,{changeLoading:(t=!0)=>{var n;(n=l())==null||n.setModalProps({loading:t})},getOpen:F(()=>J[~~r(i)]),changeOkLoading:(t=!0)=>{var n;(n=l())==null||n.setModalProps({confirmLoading:t})},closeModal:()=>{var t;(t=l())==null||t.setModalProps({open:!1})},setModalProps:t=>{var n;(n=l())==null||n.setModalProps(t)},redoModalHeight:()=>{var n;const t=(n=l())==null?void 0:n.redoModalHeight;t&&t()}}]},vt=Oe(mt);export{vt as B,$t as a,kt as b,Ft as u};
