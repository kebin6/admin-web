var u=(e,l,n)=>new Promise((c,r)=>{var m=t=>{try{a(n.next(t))}catch(o){r(o)}},i=t=>{try{a(n.throw(t))}catch(o){r(o)}},a=t=>t.done?c(t.value):Promise.resolve(t.value).then(m,i);a((n=n.apply(e,l)).next())});import{B as C,u as w}from"./useTable-DprHC9Xn.js";import{T}from"./useForm-Cq3McrEd.js";import{v as y,bl as D,bo as M,_ as k}from"./entry/index-DaEB-Y-8-1718870402071.js";import{u as S}from"./index-CL7BM-aX.js";import{M as B,c as R}from"./MenuDrawer-C9VCFGwk.js";import{P as v}from"./index-va7oxFJT.js";import{d as I,ab as s,_ as g,a7 as _,a8 as p,k as d,G as P,a1 as W,aa as $}from"./vue-BMCEF3Jf.js";import"./index-DxzXX1s5.js";import"./antd-BNMfrwLX.js";import"./isBoolean-Dou3jA6I.js";import"./index-CmerSBcF.js";import"./useWindowSizeFn-NWtUJjFU.js";import"./isDeepEqual-BYVIA4i9.js";import"./isNumber-j3SIk7av.js";import"./index-BQ8_-9UH.js";import"./object-BY_VTB7H.js";import"./onMountedOrActivated-CPthIpwg.js";import"./sortable.esm-DFFrMEeC.js";import"./index-BgDhUzJz.js";import"./copyTextToClipboard-Ke6QqFB6.js";import"./useSortable-nsvvptnY.js";import"./index-BdOZjJKO.js";import"./index-D-g43U_h.js";import"./useContentViewHeight-CtHro70F.js";const A=I({name:"MenuManagement",components:{BasicTable:C,MenuDrawer:B,TableAction:T,PageWrapper:v},setup(){const{t:e}=y.useI18n(),[l,{openDrawer:n}]=S(),[c,{reload:r}]=w({title:e("sys.menu.menuList"),api:D,columns:R,formConfig:{labelWidth:120},isTreeTable:!0,pagination:!1,striped:!1,useSearchForm:!1,showTableSetting:!0,bordered:!0,showIndexColumn:!1,canResize:!1,actionColumn:{width:80,title:e("common.action"),dataIndex:"action",fixed:void 0}});function m(){n(!0,{isUpdate:!1})}function i(o){n(!0,{record:o,isUpdate:!0})}function a(o){return u(this,null,function*(){(yield M({id:o.id},"notice")).code===0&&(yield r())})}function t(){return u(this,null,function*(){yield r()})}return{t:e,registerTable:c,registerDrawer:l,handleCreate:m,handleEdit:i,handleDelete:a,handleSuccess:t}}});function N(e,l,n,c,r,m){const i=s("a-button"),a=s("TableAction"),t=s("BasicTable"),o=s("MenuDrawer"),f=s("PageWrapper");return g(),_(f,null,{default:p(()=>[d(t,{onRegister:e.registerTable},{toolbar:p(()=>[d(i,{type:"primary",onClick:e.handleCreate},{default:p(()=>[P(W(e.t("sys.menu.addMenu")),1)]),_:1},8,["onClick"])]),bodyCell:p(({column:h,record:b})=>[h.key==="action"?(g(),_(a,{key:0,actions:[{icon:"clarity:note-edit-line",onClick:e.handleEdit.bind(null,b)},{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:e.t("common.deleteConfirm"),placement:"left",confirm:e.handleDelete.bind(null,b)}}]},null,8,["actions"])):$("",!0)]),_:1},8,["onRegister"]),d(o,{onRegister:e.registerDrawer,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])]),_:1})}const se=k(A,[["render",N]]);export{se as default};
