var g=Object.defineProperty;var f=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var h=(t,r,e)=>r in t?g(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,b=(t,r)=>{for(var e in r||(r={}))v.call(r,e)&&h(t,e,r[e]);if(f)for(var e of f(r))D.call(r,e)&&h(t,e,r[e]);return t};var p=(t,r,e)=>new Promise((u,l)=>{var m=o=>{try{n(e.next(o))}catch(i){l(i)}},c=o=>{try{n(e.throw(o))}catch(i){l(i)}},n=o=>o.done?u(o.value):Promise.resolve(o.value).then(m,c);n((e=e.apply(t,r)).next())});import{_ as x,a as B}from"./useForm-5wnZKxWU.js";import{b as O,as as S,v as U,_ as q}from"./entry/index-C41ZFr6n-1718602026943.js";import{B as F,a as P}from"./index-DDf_l8hU.js";import{u as R,c as k}from"./oauthProvider-BvWZvGeL.js";import{d as L,f as $,c as T,u as d,ab as w,_ as C,a7 as j,a8 as A,k as N,ac as V}from"./vue-BMCEF3Jf.js";const{t:a}=O(),Z=[{title:a("common.name"),dataIndex:"name",width:50},{title:a("sys.oauth.clientId"),dataIndex:"clientId",width:50},{title:a("common.createTime"),dataIndex:"createdAt",width:50,customRender:({record:t})=>S(t.createdAt)}],z=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:a("common.name"),required:!0,component:"Input",rules:[{max:30}]},{field:"clientId",label:a("sys.oauth.clientId"),required:!0,component:"Input",rules:[{max:80}]},{field:"clientSecret",label:a("sys.oauth.clientSecret"),required:!0,component:"Input",rules:[{max:100}]},{field:"redirectUrl",label:a("sys.oauth.redirectURL"),required:!0,component:"Input",rules:[{max:300}]},{field:"scopes",label:a("sys.oauth.scope"),required:!0,component:"Input",rules:[{max:50}]},{field:"authUrl",label:a("sys.oauth.authURL"),required:!0,component:"Input",rules:[{max:300}]},{field:"tokenUrl",label:a("sys.oauth.tokenURL"),required:!0,component:"Input",rules:[{max:300}]},{field:"infoUrl",label:a("sys.oauth.infoURL"),required:!0,component:"Input",rules:[{max:300}]},{field:"authStyle",label:a("sys.oauth.authStyle"),required:!0,component:"Select",componentProps:{options:[{label:a("sys.oauth.params"),value:1},{label:a("sys.oauth.header"),value:2}]}}],G=L({name:"OauthDrawer",components:{BasicDrawer:F,BasicForm:x},emits:["success","register"],setup(t,{emit:r}){const e=$(!0),{t:u}=U.useI18n(),[l,{resetFields:m,setFieldsValue:c,validate:n}]=B({labelWidth:160,baseColProps:{span:24},layout:"vertical",schemas:z,showActionButtonGroup:!1}),[o,{setDrawerProps:i,closeDrawer:I}]=P(s=>p(this,null,function*(){m(),i({confirmLoading:!1}),e.value=!!(s!=null&&s.isUpdate),d(e)&&c(b({},s.record))})),y=T(()=>d(e)?u("sys.oauth.editProvider"):u("sys.oauth.addProvider"));function _(){return p(this,null,function*(){const s=yield n();i({confirmLoading:!0}),s.id=d(e)?Number(s.id):0,(d(e)?yield R(s):yield k(s)).code===0&&(I(),r("success")),i({confirmLoading:!1})})}return{registerDrawer:o,registerForm:l,getTitle:y,handleSubmit:_}}});function M(t,r,e,u,l,m){const c=w("BasicForm"),n=w("BasicDrawer");return C(),j(n,V(t.$attrs,{onRegister:t.registerDrawer,showFooter:"",title:t.getTitle,width:"500px",onOk:t.handleSubmit}),{default:A(()=>[N(c,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const W=q(G,[["render",M]]),ee=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as O,ee as a,Z as c};
