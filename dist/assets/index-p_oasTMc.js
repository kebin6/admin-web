var c=(e,l,t)=>new Promise((u,s)=>{var p=o=>{try{n(t.next(o))}catch(i){s(i)}},r=o=>{try{n(t.throw(o))}catch(i){s(i)}},n=o=>o.done?u(o.value):Promise.resolve(o.value).then(p,r);n((t=t.apply(e,l)).next())});import{i as B}from"./index-D46PiUjU.js";import{B as D,u as T}from"./useTable-DUDBe34E.js";import{T as P}from"./useForm-DGqLGoed.js";import{aq as I,v as R,_ as $}from"./entry/index-DvPJ5Vzs-1718250502895.js";import{u as E}from"./index-BsqrLki-.js";import{S as A,c as M,s as N}from"./StorageProviderDrawer-ijXVvrSS.js";import{g as V,d as C}from"./storageProvider-D1alkqsT.js";import{M as F}from"./antd-BPAr-OsJ.js";import{d as L,f as v,k as f,ab as m,_ as b,$ as O,a8 as d,a7 as S,G as k,a1 as y,aa as _}from"./vue-BMCEF3Jf.js";import"./ExclamationCircleOutlined-s2Xy4hHc.js";import"./index-CU9epjG0.js";import"./isBoolean-Dou3jA6I.js";import"./index-3BhCtvAk.js";import"./useWindowSizeFn-DLNrSaDV.js";import"./isDeepEqual-DDA9_BTC.js";import"./isNumber-j3SIk7av.js";import"./index-Bji4O60f.js";import"./object-BY_VTB7H.js";import"./onMountedOrActivated-CPthIpwg.js";import"./sortable.esm-DFFrMEeC.js";import"./index-CBIPPzDl.js";import"./copyTextToClipboard-sKBLHCHY.js";import"./useSortable-DDWVM7pI.js";import"./index-DQkEJ5Ra.js";import"./index-DsLJPeYo.js";const U=L({name:"StorageProviderManagement",components:{BasicTable:D,StorageProviderDrawer:A,TableAction:P,Button:I},setup(){const{t:e}=R.useI18n(),l=v(),t=v(!1),[u,{openDrawer:s}]=E(),[p,{reload:r}]=T({title:e("fms.storageProvider.storageProviderList"),api:V,columns:M,formConfig:{labelWidth:120,schemas:N},useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,clickToRowSelect:!1,actionColumn:{width:30,title:e("common.action"),dataIndex:"action",fixed:void 0},rowKey:"id",rowSelection:{type:"checkbox",onChange:(a,w)=>{l.value=a,t.value=a.length>0}}});function n(){s(!0,{isUpdate:!1})}function o(a){s(!0,{record:a,isUpdate:!0})}function i(a){return c(this,null,function*(){(yield C({ids:[a.id]})).code===0&&(yield r())})}function g(){return c(this,null,function*(){F.confirm({title:e("common.deleteConfirm"),icon:f(B.ExclamationCircleOutlined),onOk(){return c(this,null,function*(){(yield C({ids:l.value})).code===0&&(t.value=!1,yield r())})},onCancel(){}})})}function h(){return c(this,null,function*(){yield r()})}return{t:e,registerTable:p,registerDrawer:u,handleCreate:n,handleEdit:o,handleDelete:i,handleSuccess:h,handleBatchDelete:g,showDeleteButton:t}}});function j(e,l,t,u,s,p){const r=m("Button"),n=m("a-button"),o=m("TableAction"),i=m("BasicTable"),g=m("StorageProviderDrawer");return b(),O("div",null,[f(i,{onRegister:e.registerTable},{tableTitle:d(()=>[e.showDeleteButton?(b(),S(r,{key:0,type:"primary",danger:"",preIcon:"ant-design:delete-outlined",onClick:e.handleBatchDelete},{default:d(()=>[k(y(e.t("common.delete")),1)]),_:1},8,["onClick"])):_("",!0)]),toolbar:d(()=>[f(n,{type:"primary",onClick:e.handleCreate},{default:d(()=>[k(y(e.t("fms.storageProvider.addStorageProvider")),1)]),_:1},8,["onClick"])]),bodyCell:d(({column:h,record:a})=>[h.key==="action"?(b(),S(o,{key:0,actions:[{icon:"clarity:note-edit-line",onClick:e.handleEdit.bind(null,a)},{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:e.t("common.deleteConfirm"),placement:"left",confirm:e.handleDelete.bind(null,a)}}]},null,8,["actions"])):_("",!0)]),_:1},8,["onRegister"]),f(g,{onRegister:e.registerDrawer,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}const fe=$(U,[["render",j]]);export{fe as default};
