var Nae=Object.defineProperty,Bae=Object.defineProperties;var Fae=Object.getOwnPropertyDescriptors;var a$=Object.getOwnPropertySymbols;var Ate=Object.prototype.hasOwnProperty,Ete=Object.prototype.propertyIsEnumerable;var kte=(u,o,i)=>o in u?Nae(u,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[o]=i,ie=(u,o)=>{for(var i in o||(o={}))Ate.call(o,i)&&kte(u,i,o[i]);if(a$)for(var i of a$(o))Ete.call(o,i)&&kte(u,i,o[i]);return u},Ot=(u,o)=>Bae(u,Fae(o));var Jv=(u,o)=>{var i={};for(var l in u)Ate.call(u,l)&&o.indexOf(l)<0&&(i[l]=u[l]);if(u!=null&&a$)for(var l of a$(u))o.indexOf(l)<0&&Ete.call(u,l)&&(i[l]=u[l]);return i};var Ko=(u,o,i)=>new Promise((l,d)=>{var m=x=>{try{v(i.next(x))}catch(k){d(k)}},p=x=>{try{v(i.throw(x))}catch(k){d(k)}},v=x=>x.done?l(x.value):Promise.resolve(x.value).then(m,p);v((i=i.apply(u,o)).next())});import{d as Ai,f as ko,c as Ss,u as gt,h as rM,w as rr,ab as Bs,_ as Io,a7 as dr,a8 as Yo,$ as ki,F as pf,a9 as yf,G as Wa,a1 as ja,ac as na,ad as Q1,ae as Gc,ag as e0,ah as my,k as Yn,a0 as gh,o as Cy,H as Iae,aa as sl,e as Toe,p as Lae,J as U_,a2 as cy,y as gy,r as rJ,I as oQ,K as Ooe,af as sQ,s as DX,j as Doe,l as $ae,L as Hae,Q as Vae,m as _oe,A as Moe,i as zae,g as Uae,ap as Wae,am as jae,b as Zae}from"./vue-BMCEF3Jf.js";import{u as a0,C as qae}from"./index-CBIPPzDl.js";import{az as Gae,p as to,aP as ky,aD as py,b as al,t as Dr,_ as Gl,aB as uy,aK as dy,aS as j$,I as Z$,aT as Kae,a4 as Yae,f as iM,aU as Xae,aV as Tte,ar as iJ,aW as Roe,D as Jae,z as jg,am as C6,aX as Ote,B as rQ,i as Poe,a0 as Qae,c as ele,S as tle,aG as Dte,aY as fy,aZ as nle,w as ole,x as sle,aq as rle,a_ as W1,ap as ile,a$ as ale,aR as N$,d as Noe,aQ as lle,b0 as cle}from"./entry/index-DvPJ5Vzs-1718250502895.js";import{g as Cd}from"./object-BY_VTB7H.js";import{a5 as s2,a6 as k6,a7 as f2,a8 as ule,a9 as Boe,aa as Foe,ab as Ioe,ac as aM,ad as iQ,ae as dle,f as xd,af as fle,n as aQ,ag as hle,T as Loe,O as mle,ah as gle,G as _X,c as ple,a as $oe,ai as q$,aj as ble,d as l$,ak as vle,al as yle,M as wle,i as x2,s as xle,am as Sle,an as Cle,_ as Hoe,ao as kle,ap as Ale,Q as Ele,Z as Voe,aq as Tle,ar as Ole,p as G$,U as K$,R as Dle}from"./antd-BPAr-OsJ.js";import{b as _le,_ as Mle,i as MX,p as aJ}from"./index-Bji4O60f.js";import{u as Rle,c as Ple}from"./copyTextToClipboard-sKBLHCHY.js";import{u as zoe,B as Uoe,a as Woe,b as _te}from"./index-3BhCtvAk.js";import{c as Nle,S as Ble,B as joe,a as Fle,i as j1,b as Ile}from"./index-CU9epjG0.js";import{i as ny}from"./isBoolean-Dou3jA6I.js";import{a as Lle,u as $le}from"./useSortable-DDWVM7pI.js";import{f as Hle,C as Vle}from"./index-DQkEJ5Ra.js";import{S as zle}from"./index-DsLJPeYo.js";import{i as lQ}from"./isNumber-j3SIk7av.js";import{o as Ule}from"./onMountedOrActivated-CPthIpwg.js";var Y$=function(){return Y$=Object.assign||function(u){for(var o,i=1,l=arguments.length;i<l;i++){o=arguments[i];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(u[d]=o[d])}return u},Y$.apply(this,arguments)};function X$(){return Gae(Wle,arguments)}function Wle(u,o,i){var l;return Y$(Y$({},u),(l={},l[o]=i,l))}function jle(u){return"slot"in u}function Zle(u){return!jle(u)}const qle=Ai({name:"ApiRadioGroup",components:{RadioGroup:s2.Group,RadioButton:s2.Button,Radio:s2},props:{api:{type:Function,default:null},params:{type:[Object,String],default:()=>({})},value:{type:[String,Number,Boolean]},isBtn:{type:[Boolean],default:!1},numberToString:to.bool,resultField:to.string.def(""),labelField:to.string.def("label"),valueField:to.string.def("value"),immediate:to.bool.def(!0)},emits:["options-change","change"],setup(u,{emit:o}){const i=ko([]),l=ko(!1),d=ko(!0),m=ko([]),p=ky(),{t:v}=al(),[x]=a0(u,"value","change",m),k=Ss(()=>{const{labelField:$,valueField:U,numberToString:X}=u;return gt(i).reduce((J,G)=>{if(G){const le=G[U];J.push(ie({label:G[$],value:X?`${le}`:le},py(G,[$,U])))}return J},[])});rM(()=>{u.immediate&&T()}),rr(()=>u.params,()=>{!gt(d)&&T()},{deep:!0});function T(){return Ko(this,null,function*(){const $=u.api;if(!(!$||!Dr($))){i.value=[];try{l.value=!0;const U=yield $(u.params);if(Array.isArray(U)){i.value=U,R();return}u.resultField&&(i.value=Cd(U,u.resultField)||[]),R()}catch(U){}finally{l.value=!1}}})}function R(){o("options-change",gt(k))}function N(...$){m.value=$}return{state:x,getOptions:k,attrs:p,loading:l,t:v,handleClick:N,props:u}}});function Gle(u,o,i,l,d,m){const p=Bs("RadioButton"),v=Bs("Radio"),x=Bs("RadioGroup");return Io(),dr(x,na(u.attrs,{value:u.state,"onUpdate:value":o[0]||(o[0]=k=>u.state=k),"button-style":"solid"}),{default:Yo(()=>[(Io(!0),ki(pf,null,yf(u.getOptions,k=>(Io(),ki(pf,{key:`${k.value}`},[u.props.isBtn?(Io(),dr(p,{key:0,value:k.value,disabled:k.disabled,onClick:T=>u.handleClick(k)},{default:Yo(()=>[Wa(ja(k.label),1)]),_:2},1032,["value","disabled","onClick"])):(Io(),dr(v,{key:1,value:k.value,disabled:k.disabled,onClick:T=>u.handleClick(k)},{default:Yo(()=>[Wa(ja(k.label),1)]),_:2},1032,["value","disabled","onClick"]))],64))),128))]),_:1},16,["value"])}const Kle=Gl(qle,[["render",Gle]]),Yle=Ai({name:"RadioButtonGroup",components:{RadioGroup:s2.Group,RadioButton:s2.Button},props:{value:{type:[String,Number,Boolean]},options:{type:Array,default:()=>[]}},emits:["change"],setup(u){const o=ky(),i=ko([]),[l]=a0(u,"value","change",i),d=Ss(()=>{const{options:p}=u;return!p||(p==null?void 0:p.length)===0?[]:p.some(x=>uy(x))?p.map(x=>({label:x,value:x})):p});function m(...p){i.value=p}return{state:l,getOptions:d,attrs:o,handleClick:m}}});function Xle(u,o,i,l,d,m){const p=Bs("RadioButton"),v=Bs("RadioGroup");return Io(),dr(v,na(u.attrs,{value:u.state,"onUpdate:value":o[0]||(o[0]=x=>u.state=x),"button-style":"solid"}),{default:Yo(()=>[(Io(!0),ki(pf,null,yf(u.getOptions,x=>(Io(),dr(p,{key:`${x.value}`,value:x.value,disabled:x.disabled,onClick:k=>u.handleClick(x)},{default:Yo(()=>[Wa(ja(x.label),1)]),_:2},1032,["value","disabled","onClick"]))),128))]),_:1},16,["value"])}const Jle=Gl(Yle,[["render",Xle]]),Qle=Ai({name:"ApiSelect",components:{Select:k6,LoadingOutlined:f2},inheritAttrs:!1,props:{value:{type:[Array,Object,String,Number]},numberToString:to.bool,api:{type:Function,default:null},params:to.any.def({}),resultField:to.string.def(""),labelField:to.string.def("label"),valueField:to.string.def("value"),immediate:to.bool.def(!0),alwaysLoad:to.bool.def(!1),options:{type:Array,default:[]},isSearch:to.bool.def(!1),searchField:to.string},emits:["options-change","change","update:value"],setup(u,{emit:o}){const i=ko([]),l=ko(!1),d=ko(!1),m=ko([]),p=ky(),{t:v}=al(),x=u.isSearch,k=ko();x&&(k.value=$);const[T]=a0(u,"value","change",m),R=Ss(()=>{const{labelField:G,valueField:le,numberToString:Z}=u;let be=gt(i).reduce((He,Re)=>{if(Re){const K=Cd(Re,le);He.push(Ot(ie({},py(Re,[G,le])),{label:Cd(Re,G),value:Z?`${K}`:K}))}return He},[]);return be.length>0?be:u.options});rr(()=>T.value,G=>{o("update:value",G)}),rr(()=>u.params,()=>{x==!1&&!gt(d)&&N()},{deep:!0,immediate:u.immediate});function N(){return Ko(this,null,function*(){const G=u.api;if(!(!G||!Dr(G)||l.value)){i.value=[];try{l.value=!0;const le=yield G(u.params);if(d.value=!0,Array.isArray(le)){i.value=le,X();return}u.resultField&&(i.value=Cd(le,u.resultField)||[]),X()}catch(le){d.value=!1}finally{l.value=!1}}})}function $(G){return Ko(this,null,function*(){const le=u.api;if(!(!le||!Dr(le)||l.value)){i.value=[];try{l.value=!0;let Z={};u.searchField!=null&&(Z[u.searchField]=G),Z.page=1,Z.pageSize=10;const be=yield le(Z);if(Array.isArray(be)){i.value=be,X();return}u.resultField&&(i.value=Cd(be,u.resultField)||[]),X()}catch(Z){}finally{l.value=!1}}})}function U(G){return Ko(this,null,function*(){G&&!x&&(u.alwaysLoad?yield N():!u.immediate&&!gt(d)&&(yield N()))})}function X(){o("options-change",gt(R))}function J(G,...le){m.value=le,o("change",le)}return{state:T,attrs:p,getOptions:R,loading:l,t:v,handleFetch:U,handleChange:J,useSearch:x,searchFun:k}}});function ece(u,o,i,l,d,m){const p=Bs("LoadingOutlined"),v=Bs("Select");return Io(),dr(v,na({onDropdownVisibleChange:u.handleFetch},u.$attrs,{onChange:u.handleChange,options:u.getOptions,value:u.state,"onUpdate:value":o[0]||(o[0]=x=>u.state=x),"show-search":u.useSearch,onSearch:u.searchFun,"show-arrow":!1,"filter-option":!1}),Q1({_:2},[yf(Object.keys(u.$slots),x=>({name:x,fn:Yo(k=>[Gc(u.$slots,x,e0(my(k||{})))])})),u.loading?{name:"suffixIcon",fn:Yo(()=>[Yn(p,{spin:""})]),key:"0"}:void 0,u.loading?{name:"notFoundContent",fn:Yo(()=>[gh("span",null,[Yn(p,{spin:"",class:"mr-1"}),Wa(" "+ja(u.t("component.form.apiSelectNotFound")),1)])]),key:"1"}:void 0]),1040,["onDropdownVisibleChange","onChange","options","value","show-search","onSearch"])}const tce=Gl(Qle,[["render",ece]]),nce=Ai({name:"ApiTree",components:{ATree:ule},props:{api:{type:Function},params:{type:Object},immediate:{type:Boolean,default:!0},resultField:to.string.def(""),afterFetch:{type:Function}},emits:["options-change","change"],setup(u,{attrs:o,emit:i}){const l=ko([]),d=ko(!1),m=ko(!1),p=Ss(()=>ie(ie({},u.api?{treeData:gt(l)}:{}),o));function v(...k){i("change",...k)}rr(()=>u.params,()=>{!gt(d)&&x()},{deep:!0}),rr(()=>u.immediate,k=>{k&&!d.value&&x()}),Cy(()=>{u.immediate&&x()});function x(){return Ko(this,null,function*(){const{api:k,afterFetch:T}=u;if(!k||!Dr(k))return;m.value=!0,l.value=[];let R;try{R=yield k(u.params)}catch(N){}T&&Dr(T)&&(R=T(R)),m.value=!1,R&&(dy(R)||(R=Cd(R,u.resultField)),l.value=R||[],d.value=!0,i("options-change",l.value))})}return{getAttrs:p,loading:m,handleChange:v}}});function oce(u,o,i,l,d,m){const p=Bs("ATree");return Io(),dr(p,na(u.getAttrs,{onChange:u.handleChange}),Q1({_:2},[yf(Object.keys(u.$slots),v=>({name:v,fn:Yo(x=>[Gc(u.$slots,v,e0(my(x||{})))])}))]),1040,["onChange"])}const sce=Gl(nce,[["render",oce]]),rce=Ai({name:"ApiTreeSelect",components:{ATreeSelect:Boe,LoadingOutlined:f2},props:{api:{type:Function},params:{type:Object},immediate:{type:Boolean,default:!0},resultField:to.string.def(""),labelField:to.string.def(""),valueField:to.string.def(""),idKeyField:to.string.def("id"),parentKeyField:to.string.def("parentId"),childrenKeyField:to.string.def("children"),defaultValue:{type:Object}},emits:["options-change","change"],setup(u,{attrs:o,emit:i}){const l=ko([]),d=ko(!1),m=ko(!1),p=Ss(()=>ie(ie({},u.api?{treeData:gt(l)}:{}),o));function v(...k){i("change",...k)}rr(()=>u.params,()=>{!gt(d)&&x()},{deep:!0}),rr(()=>u.immediate,k=>{k&&!d.value&&x()}),Cy(()=>{u.immediate&&x()});function x(){return Ko(this,null,function*(){const{api:k}=u;if(!k||!Dr(k))return;m.value=!0,l.value=[];let T;try{T=yield k(u.params)}catch(R){}m.value=!1,T&&(j$(T)||(T=Cd(T,u.resultField)),l.value=_le(T,{idKeyField:u.idKeyField,parentKeyField:u.parentKeyField,childrenKeyField:u.childrenKeyField,valueField:u.valueField,labelField:u.labelField,defaultValue:u.defaultValue}),d.value=!0,i("options-change",l.value))})}return{getAttrs:p,loading:m,handleChange:v,fetch:x}}});function ice(u,o,i,l,d,m){const p=Bs("LoadingOutlined"),v=Bs("a-tree-select");return Io(),dr(v,na(u.getAttrs,{onChange:u.handleChange,onDropdownVisibleChange:u.fetch}),Q1({_:2},[yf(Object.keys(u.$slots),x=>({name:x,fn:Yo(k=>[Gc(u.$slots,x,e0(my(k||{})))])})),u.loading?{name:"suffixIcon",fn:Yo(()=>[Yn(p,{spin:""})]),key:"0"}:void 0]),1040,["onChange","onDropdownVisibleChange"])}const ace=Gl(rce,[["render",ice]]),lce=Ai({name:"ApiCascader",__name:"ApiCascader",props:{value:{type:Array},api:{type:Function,default:null},numberToString:to.bool,resultField:to.string.def(""),labelField:to.string.def("label"),valueField:to.string.def("value"),childrenField:to.string.def("children"),apiParamKey:to.string.def("parentCode"),immediate:to.bool.def(!0),initFetchParams:{type:Object,default:()=>({})},isLeaf:{type:Function,default:null},displayRenderArray:{type:Array}},emits:["change","defaultChange"],setup(u,{emit:o}){const i=u,l=o,d=ko([]),m=ko([]),p=ko(!1),v=ko([]),x=ko(!0),{t:k}=al(),[T]=a0(i,"value","change",v);rr(d,J=>{const G=R(J);m.value=G},{deep:!0});function R(J){const{labelField:G,valueField:le,numberToString:Z,childrenField:be,isLeaf:He}=i;return J.reduce((Re,K)=>{if(K){const Ie=K[le],$e=Ot(ie({},py(K,[G,le])),{label:K[G],value:Z?`${Ie}`:Ie,isLeaf:He&&typeof He=="function"?He(K):!1}),Ue=Reflect.get(K,be);Ue&&Reflect.set($e,be,R(Ue)),Re.push($e)}return Re},[])}function N(){return Ko(this,null,function*(){const J=i.api;if(!(!J||!Dr(J))){d.value=[],p.value=!0;try{const G=yield J(i.initFetchParams);if(Array.isArray(G)){d.value=G;return}i.resultField&&(d.value=Cd(G,i.resultField)||[])}catch(G){}finally{p.value=!1}}})}const $=J=>Ko(this,null,function*(){const G=J[J.length-1];G.loading=!0;const le=i.api;if(!(!le||!Dr(le)))try{const Z=yield le({[i.apiParamKey]:Reflect.get(G,"value")});if(Array.isArray(Z)){const be=R(Z);G.children=be;return}if(i.resultField){const be=R(Cd(Z,i.resultField)||[]);G.children=be}}catch(Z){}finally{G.loading=!1}});rM(()=>{i.immediate&&N()}),rr(()=>i.initFetchParams,()=>{!gt(x)&&N()},{deep:!0});function U(J,G){v.value=G,l("defaultChange",J,G)}const X=({labels:J,selectedOptions:G})=>gt(v).length===(G==null?void 0:G.length)?J.join(" / "):i.displayRenderArray?i.displayRenderArray.join(" / "):"";return(J,G)=>(Io(),dr(gt(Foe),{value:gt(T),"onUpdate:value":G[0]||(G[0]=le=>Iae(T)?T.value=le:null),options:m.value,"load-data":$,"change-on-select":"",onChange:U,displayRender:X},Q1({_:2},[p.value?{name:"suffixIcon",fn:Yo(()=>[Yn(gt(f2),{spin:""})]),key:"0"}:void 0,p.value?{name:"notFoundContent",fn:Yo(()=>[gh("span",null,[Yn(gt(f2),{spin:"",class:"mr-1"}),Wa(" "+ja(gt(k)("component.form.apiSelectNotFound")),1)])]),key:"1"}:void 0]),1032,["value","options"]))}}),cce=Ai({name:"ApiTransfer",components:{Transfer:Ioe},props:{value:{type:Array},api:{type:Function,default:null},params:{type:Object},dataSource:{type:Array},immediate:to.bool.def(!0),afterFetch:{type:Function},resultField:to.string.def(""),labelField:to.string.def("title"),valueField:to.string.def("key"),showSearch:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},filterOption:{type:Function},selectedKeys:{type:Array},showSelectAll:{type:Boolean,default:!1},targetKeys:{type:Array}},emits:["options-change","change"],setup(u,{attrs:o,emit:i}){const l=ko([]),d=ko([]),{t:m}=al(),p=Ss(()=>ie(ie({},u.api?{}:{dataSource:gt(l)}),o)),v=Ss(()=>{const{labelField:N,valueField:$}=u;return gt(l).reduce((U,X)=>(X&&U.push(Ot(ie({},py(X,[N,$])),{title:X[N],key:X[$]})),U),[])}),x=Ss(()=>Array.isArray(u.value)?u.value:Array.isArray(u.targetKeys)?u.targetKeys:[]);function k(N,$,U){d.value=N,i("change",N)}Cy(()=>{u.immediate&&T()}),rr(()=>u.params,()=>{T()},{deep:!0});function T(){return Ko(this,null,function*(){const N=u.api;if(!N||!Dr(N)){Array.isArray(u.dataSource)&&(l.value=u.dataSource);return}l.value=[];try{const $=yield N(u.params);if(Array.isArray($)){l.value=$,R();return}u.resultField&&(l.value=Cd($,u.resultField)||[]),R()}catch($){}})}function R(){i("options-change",gt(v))}return{getTargetKeys:x,getdataSource:v,t:m,getAttrs:p,handleChange:k}}});function uce(u,o,i,l,d,m){const p=Bs("Transfer");return Io(),dr(p,{"data-source":u.getdataSource,"filter-option":u.filterOption,render:v=>v.title,showSelectAll:u.showSelectAll,selectedKeys:u.selectedKeys,targetKeys:u.getTargetKeys,showSearch:u.showSearch,disabled:u.disabled,onChange:u.handleChange},null,8,["data-source","filter-option","render","showSelectAll","selectedKeys","targetKeys","showSearch","disabled","onChange"])}const dce=Gl(cce,[["render",uce]]),fce=Ai({name:"SimpleTimePicker",components:{DatePicker:aM,TimePicker:iQ,FormItemRest:dle},inheritAttrs:!1,props:{timeMode:to.string.def("datetime"),valueFormat:to.string.def("unixmilli"),value:[Number]},emits:["options-change","change","update:value"],setup(u,{emit:o}){const i=ko([]),l=ky(),{t:d}=al(),m=ko(),p=ko(),v=ko();u.timeMode==="datetime"?v.value=!0:v.value=!1;const[x]=a0(u,"value","change",i);rr(()=>x.value,T=>{T!==null&&T!=null&&(u.valueFormat==="unixmilli"?(m.value=xd(T),p.value=xd(T)):T!==void 0&&(m.value=xd.unix(T),p.value=xd.unix(T))),o("update:value",T),o("change",T)});function k(T){var R;if(T!==null){let N=xd();m.value!=null&&(N=(R=m.value)==null?void 0:R.clone()),u.timeMode==="datetime"?p.value!=null&&(N=N.hour(p.value.hour()).minute(p.value.minute()).second(p.value.second()).millisecond(0)):N=N.hour(0).minute(0).second(0).millisecond(0),u.valueFormat==="unixmilli"?x.value=N.valueOf():x.value=N.unix()}else x.value=void 0}return{state:x,attrs:l,showTimePicker:v,t:d,handleChange:k,dateVal:m,timeVal:p}}});function hce(u,o,i,l,d,m){const p=Bs("DatePicker"),v=Bs("TimePicker"),x=Bs("FormItemRest");return Io(),ki(pf,null,[Yn(p,{"allow-clear":"",value:u.dateVal,"onUpdate:value":o[0]||(o[0]=k=>u.dateVal=k),onChange:u.handleChange},null,8,["value","onChange"]),Yn(x,null,{default:Yo(()=>[u.showTimePicker?(Io(),dr(v,{key:0,class:"ml-4",value:u.timeVal,"onUpdate:value":o[1]||(o[1]=k=>u.timeVal=k),onChange:u.handleChange,"allow-clear":""},null,8,["value","onChange"])):sl("",!0)]),_:1})],64)}const mce=Gl(fce,[["render",hce]]),gce=Ai({name:"SimpleRangePicker",components:{RangePicker:fle},inheritAttrs:!1,props:{timeMode:to.string.def("datetime"),valueFormat:to.string.def("unixmilli"),value:{type:Array,default:void 0}},emits:["options-change","change","update:value"],setup(u,{emit:o}){const i=ko([]),l=ky(),{t:d}=al(),m=ko(),p=ko();u.timeMode==="datetime"?p.value=!0:p.value=!1;const[v]=a0(u,"value","change",i);rr(()=>v.value,k=>{k!==null&&k!=null&&(u.valueFormat==="unixmilli"?m.value=[xd(k[0]),xd(k[1])]:k!==void 0&&(m.value=[xd.unix(k[0]),xd.unix(k[1])])),o("update:value",k),o("change",k)});function x(k){var T,R;if(k!==null){let N=[xd(),xd()];m.value!=null&&(N[0]=(T=m.value[0])==null?void 0:T.clone(),N[1]=(R=m.value[1])==null?void 0:R.clone()),u.timeMode!=="datetime"&&(N[0]=N[0].hour(0).minute(0).second(0).millisecond(0),N[1]=N[1].hour(0).minute(0).second(0).millisecond(0)),u.valueFormat==="unixmilli"?v.value=[N[0].valueOf(),N[1].valueOf()]:v.value=[N[0].unix(),N[1].unix()]}else v.value=[0,0]}return{state:v,attrs:l,showTimePicker:p,t:d,handleChange:x,dateVal:m}}});function pce(u,o,i,l,d,m){const p=Bs("RangePicker");return Io(),dr(p,{"allow-clear":"",value:u.dateVal,"onUpdate:value":o[0]||(o[0]=v=>u.dateVal=v),onChange:u.handleChange,"show-time":u.showTimePicker},null,8,["value","onChange","show-time"])}const bce=Gl(gce,[["render",pce]]),vce=Ai({name:"ApiMultipleSelect",components:{Select:k6,LoadingOutlined:f2},inheritAttrs:!1,props:{value:[Array,Object,String,Number],numberToString:to.bool,api:{type:Function,default:null},params:{type:Object,default:()=>({})},resultField:to.string.def(""),labelField:to.string.def("label"),valueField:to.string.def("value"),immediate:to.bool.def(!0),alwaysLoad:to.bool.def(!1)},emits:["options-change","change","update:value"],setup(u,{emit:o}){const i=ko([]),l=ko(!1),d=ko(!0),m=ko([]),p=ky(),{t:v}=al(),[x]=a0(u,"value","change",m),k=Ss(()=>{const{labelField:U,valueField:X,numberToString:J}=u;return gt(i).reduce((G,le)=>{if(le){const Z=le[X];G.push(Ot(ie({},py(le,[U,X])),{label:le[U],value:J?`${Z}`:Z}))}return G},[])});rM(()=>{u.immediate&&!u.alwaysLoad&&T()}),rr(()=>x.value,U=>{o("update:value",U)}),rr(()=>u.params,()=>{!gt(d)&&T()},{deep:!0});function T(){return Ko(this,null,function*(){const U=u.api;if(!(!U||!Dr(U))){i.value=[];try{l.value=!0;const X=yield U(u.params);if(Array.isArray(X)){i.value=X,N();return}u.resultField&&(i.value=Cd(X,u.resultField)||[]),N()}catch(X){}finally{l.value=!1}}})}function R(U){return Ko(this,null,function*(){U&&(u.alwaysLoad?yield T():!u.immediate&&gt(d)&&(yield T(),d.value=!1))})}function N(){o("options-change",gt(k))}function $(U,...X){m.value=X,o("change",X)}return{state:x,attrs:p,getOptions:k,loading:l,t:v,handleFetch:R,handleChange:$}}});function yce(u,o,i,l,d,m){const p=Bs("LoadingOutlined"),v=Bs("Select");return Io(),dr(v,na({onDropdownVisibleChange:u.handleFetch},u.$attrs,{onChange:u.handleChange,options:u.getOptions,mode:"multiple",value:u.state,"onUpdate:value":o[0]||(o[0]=x=>u.state=x)}),Q1({_:2},[yf(Object.keys(u.$slots),x=>({name:x,fn:Yo(k=>[Gc(u.$slots,x,e0(my(k||{})))])})),u.loading?{name:"suffixIcon",fn:Yo(()=>[Yn(p,{spin:""})]),key:"0"}:void 0,u.loading?{name:"notFoundContent",fn:Yo(()=>[gh("span",null,[Yn(p,{spin:"",class:"mr-1"}),Wa(" "+ja(u.t("component.form.apiSelectNotFound")),1)])]),key:"1"}:void 0]),1040,["onDropdownVisibleChange","onChange","options","value"])}const wce=Gl(vce,[["render",yce]]),xce=Ai({name:"DictionarySelect",components:{Select:k6,LoadingOutlined:f2},inheritAttrs:!1,props:{dictionaryName:to.string.def(""),value:[String,Number],cache:to.bool.def(!0)},emits:["options-change","change","update:value"],setup(u,{emit:o}){const i=ko(!1),l=ko([]),d=ky(),{t:m}=al(),p=ko(),[v]=a0(u,"value","change",l);Cy(()=>{x()}),rr(()=>v.value,T=>{o("update:value",T)});function x(){return Ko(this,null,function*(){i.value=!0;const R=yield Rle().getDictionary(u.dictionaryName,u.cache);R!=null&&(p.value=R.data),i.value=!1})}function k(T,...R){l.value=R,o("change",R)}return{state:v,attrs:d,loading:i,t:m,options:p,handleFetch:x,handleChange:k}}});function Sce(u,o,i,l,d,m){const p=Bs("LoadingOutlined"),v=Bs("Select");return Io(),dr(v,na(u.$attrs,{onChange:u.handleChange,options:u.options,value:u.state,"onUpdate:value":o[0]||(o[0]=x=>u.state=x)}),Q1({_:2},[yf(Object.keys(u.$slots),x=>({name:x,fn:Yo(k=>[Gc(u.$slots,x,e0(my(k||{})))])})),u.loading?{name:"suffixIcon",fn:Yo(()=>[Yn(p,{spin:""})]),key:"0"}:void 0,u.loading?{name:"notFoundContent",fn:Yo(()=>[gh("span",null,[Yn(p,{spin:"",class:"mr-1"}),Wa(" "+ja(u.t("component.form.apiSelectNotFound")),1)])]),key:"1"}:void 0]),1040,["onChange","options","value"])}const Cce=Gl(xce,[["render",Sce]]),Zoe={listType:{type:String,default:"picture-card"},helpText:{type:String,default:""},maxSize:{type:Number,default:2},maxNumber:{type:Number,default:1},accept:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},uploadParams:{type:Object,default:()=>({})},api:{type:Function,default:null,required:!0},name:{type:String,default:"file"},filename:{type:String,default:null},fileListOpenDrag:{type:Boolean,default:!0},fileListDragOptions:{type:Object,default:()=>({})},calculateMd5:{type:Boolean,default:!1}},qoe=Ot(ie({value:{type:Array,default:()=>[]}},Zoe),{showPreviewNumber:{type:Boolean,default:!0},emptyHidePreview:{type:Boolean,default:!1}}),kce={value:{type:Array,default:()=>[]}},Ace={columns:{type:Array,default:null},actionColumn:{type:Object,default:null},dataSource:{type:Array,default:null},openDrag:{type:Boolean,default:!1},dragOptions:{type:Object,default:()=>({})}},{t:RX}=al();function Goe({acceptRef:u,helpTextRef:o,maxNumberRef:i,maxSizeRef:l}){const d=Ss(()=>{const v=gt(u);return v&&v.length>0?v:[]}),m=Ss(()=>gt(d).map(v=>v.indexOf("/")>0||v.startsWith(".")?v:`.${v}`).join(",")),p=Ss(()=>{const v=gt(o);if(v)return v;const x=[],k=gt(u);k.length>0&&x.push(RX("component.upload.accept",[k.join(",")]));const T=gt(l);T&&x.push(RX("component.upload.maxSize",[T]));const R=gt(i);return R&&R!==1/0&&x.push(RX("component.upload.maxNumber",[R])),x.join("，")});return{getAccept:d,getStringAccept:m,getHelpText:p}}var zl=(u=>(u.DONE="done",u.SUCCESS="success",u.ERROR="error",u.UPLOADING="uploading",u))(zl||{});function Ece(u){return cQ(u.name)}function cQ(u){return/\.(jpg|jpeg|png|gif|webp)$/i.test(u)}function Tce(u){return new Promise((o,i)=>{const l=new FileReader;l.readAsDataURL(u),l.onload=()=>o({result:l.result,file:u}),l.onerror=d=>i(d)})}const Koe=Symbol("basic-table");function j0e(u){Lae(Koe,u)}function Oce(){return Toe(Koe)}const{table:Dce}=Nle,{pageSizeOptions:_ce,defaultPageSize:Mce,fetchSetting:Rce,defaultSize:Pce,defaultSortFn:Nce,defaultFilterFn:Bce}=Dce,Z0e="key",q0e=_ce,G0e=Mce,K0e=Rce,Y0e=Pce,X0e=Nce,J0e=Bce,Q0e="center",ebe="INDEX",Fce="ACTION",Ice=Ai({name:"TableAction",components:{Icon:Z$,PopConfirmButton:Kae,Divider:aQ,Dropdown:Yae,MoreOutlined:hle,Tooltip:Loe},props:{actions:{type:Array,default:null},dropDownActions:{type:Array,default:null},divider:to.bool.def(!0),outside:to.bool,stopButtonPropagation:to.bool.def(!1)},setup(u){const{prefixCls:o}=iM("basic-table-action");let i={};u.outside||(i=Oce());const{hasPermission:l}=Xae();function d(T){const R=T.ifShow;let N=!0;return ny(R)&&(N=R),Dr(R)&&(N=R(T)),N}const m=Ss(()=>(U_(u.actions)||[]).filter(T=>l(T.auth)&&d(T)).map(T=>{const{popConfirm:R}=T;return Ot(ie(ie({getPopupContainer:()=>{var N;return(N=gt(i==null?void 0:i.wrapRef))!=null?N:document.body},type:"link",size:"small"},T),R||{}),{onConfirm:R==null?void 0:R.confirm,onCancel:R==null?void 0:R.cancel,enable:!!R})})),p=Ss(()=>{const T=(U_(u.dropDownActions)||[]).filter(R=>l(R.auth)&&d(R));return T.map((R,N)=>{const{label:$,popConfirm:U}=R;return Ot(ie(ie({},R),U),{onConfirm:U==null?void 0:U.confirm,onCancel:U==null?void 0:U.cancel,text:$,divider:N<T.length-1?u.divider:!1})})}),v=Ss(()=>{var N,$;const R=(((N=i==null?void 0:i.getColumns)==null?void 0:N.call(i))||[]).find(U=>U.flag===Fce);return($=R==null?void 0:R.align)!=null?$:"left"});function x(T){return ie({getPopupContainer:()=>{var R;return(R=gt(i==null?void 0:i.wrapRef))!=null?R:document.body},placement:"bottom"},uy(T)?{title:T}:T)}function k(T){if(!u.stopButtonPropagation)return;T.composedPath().find($=>{var U;return((U=$.tagName)==null?void 0:U.toUpperCase())==="BUTTON"})&&T.stopPropagation()}return{prefixCls:o,getActions:m,getDropdownList:p,getAlign:v,onCellClick:k,getTooltip:x}}});function Lce(u,o,i,l,d,m){const p=Bs("Icon"),v=Bs("PopConfirmButton"),x=Bs("Tooltip"),k=Bs("Divider"),T=Bs("MoreOutlined"),R=Bs("a-button"),N=Bs("Dropdown");return Io(),ki("div",{class:cy([u.prefixCls,u.getAlign]),onClick:o[0]||(o[0]=(...$)=>u.onCellClick&&u.onCellClick(...$))},[(Io(!0),ki(pf,null,yf(u.getActions,($,U)=>(Io(),ki(pf,{key:`${U}-${$.label}`},[$.tooltip?(Io(),dr(x,na({key:0,ref_for:!0},u.getTooltip($.tooltip)),{default:Yo(()=>[Yn(v,na({ref_for:!0},$),{default:Yo(()=>[$.icon?(Io(),dr(p,{key:0,icon:$.icon,class:cy({"mr-1":!!$.label})},null,8,["icon","class"])):sl("",!0),$.label?(Io(),ki(pf,{key:1},[Wa(ja($.label),1)],64)):sl("",!0)]),_:2},1040)]),_:2},1040)):(Io(),dr(v,na({key:1,ref_for:!0},$),{default:Yo(()=>[$.icon?(Io(),dr(p,{key:0,icon:$.icon,class:cy({"mr-1":!!$.label})},null,8,["icon","class"])):sl("",!0),$.label?(Io(),ki(pf,{key:1},[Wa(ja($.label),1)],64)):sl("",!0)]),_:2},1040)),u.divider&&U<u.getActions.length-1?(Io(),dr(k,{key:2,type:"vertical",class:"action-divider"})):sl("",!0)],64))),128)),u.dropDownActions&&u.getDropdownList.length>0?(Io(),dr(N,{key:0,trigger:["hover"],dropMenuList:u.getDropdownList,popconfirm:""},{default:Yo(()=>[Gc(u.$slots,"more"),u.$slots.more?sl("",!0):(Io(),dr(R,{key:0,type:"link",size:"small"},{default:Yo(()=>[Yn(T,{class:"icon-more"})]),_:1}))]),_:3},8,["dropMenuList"])):sl("",!0)],2)}const Yoe=Gl(Ice,[["render",Lce]]),$ce=Ai({components:{Image:mle},props:{fileUrl:to.string.def(""),fileName:to.string.def("")}}),Hce={class:"thumb"};function Vce(u,o,i,l,d,m){const p=Bs("Image");return Io(),ki("span",Hce,[u.fileUrl?(Io(),dr(p,{key:0,src:u.fileUrl,width:104},null,8,["src"])):sl("",!0)])}const Xoe=Gl($ce,[["render",Vce]]),{t:Sc}=al();function zce(){return[{dataIndex:"thumbUrl",title:Sc("component.upload.legend"),width:100,customRender:({record:u})=>{const{thumbUrl:o}=u||{};return o&&Yn(Xoe,{fileUrl:o},null)}},{dataIndex:"name",title:Sc("component.upload.fileName"),align:"left",customRender:({text:u,record:o})=>{const{percent:i,status:l}=o||{};let d="normal";return l===zl.ERROR?d="exception":l===zl.UPLOADING?d="active":l===zl.SUCCESS&&(d="success"),Yn("div",null,[Yn("p",{class:"truncate mb-1 max-w-[280px]",title:u},[u]),Yn(gle,{percent:i,size:"small",status:d},null)])}},{dataIndex:"size",title:Sc("component.upload.fileSize"),width:100,customRender:({text:u=0})=>u&&(u/1024).toFixed(2)+"KB"},{dataIndex:"status",title:Sc("component.upload.fileStatue"),width:100,customRender:({text:u})=>u===zl.SUCCESS?Yn(_X,{color:"green"},{default:()=>Sc("component.upload.uploadSuccess")}):u===zl.ERROR?Yn(_X,{color:"red"},{default:()=>Sc("component.upload.uploadError")}):u===zl.UPLOADING?Yn(_X,{color:"blue"},{default:()=>Sc("component.upload.uploading")}):u||Sc("component.upload.pending")}]}function Uce(u,o){return{width:120,title:Sc("component.upload.operating"),dataIndex:"action",fixed:!1,customRender:({record:i})=>{const l=[{label:Sc("component.upload.del"),color:"error",onClick:u.bind(null,i)},{label:Sc("fms.file.copyURL"),color:"error",onClick:o.bind(null,i)}];return Yn(Yoe,{actions:l,outside:!0},null)}}}function Wce(){return[{dataIndex:"url",title:Sc("component.upload.legend"),width:100,customRender:({record:u})=>{const{url:o}=u||{};return cQ(o)&&Yn(Xoe,{fileUrl:o},null)}},{dataIndex:"name",title:Sc("component.upload.fileName"),align:"left"}]}function jce({handleRemove:u,handleDownload:o}){return{width:160,title:Sc("component.upload.operating"),dataIndex:"action",fixed:!1,customRender:({record:i})=>{const l=[{label:Sc("component.upload.del"),color:"error",onClick:u.bind(null,i)},{label:Sc("component.upload.download"),onClick:o.bind(null,i)}];return Yn(Yoe,{actions:l,outside:!0},null)}}}const lJ=[];for(let u=0;u<=15;u++)lJ[u]=u.toString(16);function Zce(){let u="";for(let o=1;o<=36;o++)o===9||o===14||o===19||o===24?u+="-":o===15?u+=4:o===20?u+=lJ[Math.random()*4|8]:u+=lJ[Math.random()*16|0];return u.replace(/-/g,"")}let Mte=0;function Rte(u=""){const o=Date.now(),i=Math.floor(Math.random()*1e9);return Mte++,u+"_"+i+Mte+String(o)}const Joe=Ai({name:"FileList",props:Ace,setup(u,{emit:o}){const i=zoe(),l=ko();return rr(()=>u.dataSource,()=>{gy(()=>{var d;(d=i==null?void 0:i.redoModalHeight)==null||d.call(i)})}),u.openDrag&&Cy(()=>Lle(l,Ot(ie({},u.dragOptions),{onEnd:({oldIndex:d,newIndex:m})=>{if(d===m)return;const{onAfterEnd:p}=u.dragOptions;if(Tte(d)&&Tte(m)){const v=[...u.dataSource],[x]=v.splice(d,1);v.splice(m,0,x),gy(()=>{o("update:dataSource",v),Dr(p)&&p(v)})}}})).initSortable()),()=>{const{columns:d,actionColumn:m,dataSource:p}=u,v=[...d,m];return Yn("div",{class:"overflow-x-auto"},[Yn("table",{class:"file-table"},[Yn("colgroup",null,[v.map(x=>{const{width:k=0,dataIndex:T}=x,R={width:`${k}px`,minWidth:`${k}px`};return Yn("col",{style:k?R:{},key:T},null)})]),Yn("thead",null,[Yn("tr",{class:"file-table-tr"},[v.map(x=>{const{title:k="",align:T="center",dataIndex:R}=x;return Yn("th",{class:["file-table-th",T],key:R},[k])})])]),Yn("tbody",{ref:l},[p.map((x={},k)=>Yn("tr",{class:"file-table-tr",key:`${k+x.name||""}`},[v.map(T=>{const{dataIndex:R="",customRender:N,align:$="center"}=T,U=N&&Dr(N);return Yn("td",{class:["file-table-td break-all",$],key:R},[U?N==null?void 0:N({text:x[R],record:x}):x[R]])})]))])])])}}});var Qoe={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(u,o){(function(l,d){u.exports=d()})(ple,function(){return function(){var i={686:function(m,p,v){v.d(p,{default:function(){return Pe}});var x=v(279),k=v.n(x),T=v(370),R=v.n(T),N=v(817),$=v.n(N);function U(We){try{return document.execCommand(We)}catch(yt){return!1}}var X=function(yt){var Be=$()(yt);return U("cut"),Be},J=X;function G(We){var yt=document.documentElement.getAttribute("dir")==="rtl",Be=document.createElement("textarea");Be.style.fontSize="12pt",Be.style.border="0",Be.style.padding="0",Be.style.margin="0",Be.style.position="absolute",Be.style[yt?"right":"left"]="-9999px";var wt=window.pageYOffset||document.documentElement.scrollTop;return Be.style.top="".concat(wt,"px"),Be.setAttribute("readonly",""),Be.value=We,Be}var le=function(yt,Be){var wt=G(yt);Be.container.appendChild(wt);var ce=$()(wt);return U("copy"),wt.remove(),ce},Z=function(yt){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},wt="";return typeof yt=="string"?wt=le(yt,Be):yt instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(yt==null?void 0:yt.type)?wt=le(yt.value,Be):(wt=$()(yt),U("copy")),wt},be=Z;function He(We){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?He=function(Be){return typeof Be}:He=function(Be){return Be&&typeof Symbol=="function"&&Be.constructor===Symbol&&Be!==Symbol.prototype?"symbol":typeof Be},He(We)}var Re=function(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Be=yt.action,wt=Be===void 0?"copy":Be,ce=yt.container,Ze=yt.target,V=yt.text;if(wt!=="copy"&&wt!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(Ze!==void 0)if(Ze&&He(Ze)==="object"&&Ze.nodeType===1){if(wt==="copy"&&Ze.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(wt==="cut"&&(Ze.hasAttribute("readonly")||Ze.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(V)return be(V,{container:ce});if(Ze)return wt==="cut"?J(Ze):be(Ze,{container:ce})},K=Re;function Ie(We){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ie=function(Be){return typeof Be}:Ie=function(Be){return Be&&typeof Symbol=="function"&&Be.constructor===Symbol&&Be!==Symbol.prototype?"symbol":typeof Be},Ie(We)}function $e(We,yt){if(!(We instanceof yt))throw new TypeError("Cannot call a class as a function")}function Ue(We,yt){for(var Be=0;Be<yt.length;Be++){var wt=yt[Be];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(We,wt.key,wt)}}function ae(We,yt,Be){return yt&&Ue(We.prototype,yt),Be&&Ue(We,Be),We}function Oe(We,yt){if(typeof yt!="function"&&yt!==null)throw new TypeError("Super expression must either be null or a function");We.prototype=Object.create(yt&&yt.prototype,{constructor:{value:We,writable:!0,configurable:!0}}),yt&&ht(We,yt)}function ht(We,yt){return ht=Object.setPrototypeOf||function(wt,ce){return wt.__proto__=ce,wt},ht(We,yt)}function ne(We){var yt=Ke();return function(){var wt=he(We),ce;if(yt){var Ze=he(this).constructor;ce=Reflect.construct(wt,arguments,Ze)}else ce=wt.apply(this,arguments);return ge(this,ce)}}function ge(We,yt){return yt&&(Ie(yt)==="object"||typeof yt=="function")?yt:O(We)}function O(We){if(We===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return We}function Ke(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(We){return!1}}function he(We){return he=Object.setPrototypeOf?Object.getPrototypeOf:function(Be){return Be.__proto__||Object.getPrototypeOf(Be)},he(We)}function at(We,yt){var Be="data-clipboard-".concat(We);if(yt.hasAttribute(Be))return yt.getAttribute(Be)}var qt=function(We){Oe(Be,We);var yt=ne(Be);function Be(wt,ce){var Ze;return $e(this,Be),Ze=yt.call(this),Ze.resolveOptions(ce),Ze.listenClick(wt),Ze}return ae(Be,[{key:"resolveOptions",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof ce.action=="function"?ce.action:this.defaultAction,this.target=typeof ce.target=="function"?ce.target:this.defaultTarget,this.text=typeof ce.text=="function"?ce.text:this.defaultText,this.container=Ie(ce.container)==="object"?ce.container:document.body}},{key:"listenClick",value:function(ce){var Ze=this;this.listener=R()(ce,"click",function(V){return Ze.onClick(V)})}},{key:"onClick",value:function(ce){var Ze=ce.delegateTarget||ce.currentTarget,V=this.action(Ze)||"copy",kn=K({action:V,container:this.container,target:this.target(Ze),text:this.text(Ze)});this.emit(kn?"success":"error",{action:V,text:kn,trigger:Ze,clearSelection:function(){Ze&&Ze.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(ce){return at("action",ce)}},{key:"defaultTarget",value:function(ce){var Ze=at("target",ce);if(Ze)return document.querySelector(Ze)}},{key:"defaultText",value:function(ce){return at("text",ce)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(ce){var Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return be(ce,Ze)}},{key:"cut",value:function(ce){return J(ce)}},{key:"isSupported",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],Ze=typeof ce=="string"?[ce]:ce,V=!!document.queryCommandSupported;return Ze.forEach(function(kn){V=V&&!!document.queryCommandSupported(kn)}),V}}]),Be}(k()),Pe=qt},828:function(m){var p=9;if(typeof Element!="undefined"&&!Element.prototype.matches){var v=Element.prototype;v.matches=v.matchesSelector||v.mozMatchesSelector||v.msMatchesSelector||v.oMatchesSelector||v.webkitMatchesSelector}function x(k,T){for(;k&&k.nodeType!==p;){if(typeof k.matches=="function"&&k.matches(T))return k;k=k.parentNode}}m.exports=x},438:function(m,p,v){var x=v(828);function k(N,$,U,X,J){var G=R.apply(this,arguments);return N.addEventListener(U,G,J),{destroy:function(){N.removeEventListener(U,G,J)}}}function T(N,$,U,X,J){return typeof N.addEventListener=="function"?k.apply(null,arguments):typeof U=="function"?k.bind(null,document).apply(null,arguments):(typeof N=="string"&&(N=document.querySelectorAll(N)),Array.prototype.map.call(N,function(G){return k(G,$,U,X,J)}))}function R(N,$,U,X){return function(J){J.delegateTarget=x(J.target,$),J.delegateTarget&&X.call(N,J)}}m.exports=T},879:function(m,p){p.node=function(v){return v!==void 0&&v instanceof HTMLElement&&v.nodeType===1},p.nodeList=function(v){var x=Object.prototype.toString.call(v);return v!==void 0&&(x==="[object NodeList]"||x==="[object HTMLCollection]")&&"length"in v&&(v.length===0||p.node(v[0]))},p.string=function(v){return typeof v=="string"||v instanceof String},p.fn=function(v){var x=Object.prototype.toString.call(v);return x==="[object Function]"}},370:function(m,p,v){var x=v(879),k=v(438);function T(U,X,J){if(!U&&!X&&!J)throw new Error("Missing required arguments");if(!x.string(X))throw new TypeError("Second argument must be a String");if(!x.fn(J))throw new TypeError("Third argument must be a Function");if(x.node(U))return R(U,X,J);if(x.nodeList(U))return N(U,X,J);if(x.string(U))return $(U,X,J);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function R(U,X,J){return U.addEventListener(X,J),{destroy:function(){U.removeEventListener(X,J)}}}function N(U,X,J){return Array.prototype.forEach.call(U,function(G){G.addEventListener(X,J)}),{destroy:function(){Array.prototype.forEach.call(U,function(G){G.removeEventListener(X,J)})}}}function $(U,X,J){return k(document.body,U,X,J)}m.exports=T},817:function(m){function p(v){var x;if(v.nodeName==="SELECT")v.focus(),x=v.value;else if(v.nodeName==="INPUT"||v.nodeName==="TEXTAREA"){var k=v.hasAttribute("readonly");k||v.setAttribute("readonly",""),v.select(),v.setSelectionRange(0,v.value.length),k||v.removeAttribute("readonly"),x=v.value}else{v.hasAttribute("contenteditable")&&v.focus();var T=window.getSelection(),R=document.createRange();R.selectNodeContents(v),T.removeAllRanges(),T.addRange(R),x=T.toString()}return x}m.exports=p},279:function(m){function p(){}p.prototype={on:function(v,x,k){var T=this.e||(this.e={});return(T[v]||(T[v]=[])).push({fn:x,ctx:k}),this},once:function(v,x,k){var T=this;function R(){T.off(v,R),x.apply(k,arguments)}return R._=x,this.on(v,R,k)},emit:function(v){var x=[].slice.call(arguments,1),k=((this.e||(this.e={}))[v]||[]).slice(),T=0,R=k.length;for(T;T<R;T++)k[T].fn.apply(k[T].ctx,x);return this},off:function(v,x){var k=this.e||(this.e={}),T=k[v],R=[];if(T&&x)for(var N=0,$=T.length;N<$;N++)T[N].fn!==x&&T[N].fn._!==x&&R.push(T[N]);return R.length?k[v]=R:delete k[v],this}},m.exports=p,m.exports.TinyEmitter=p}},l={};function d(m){if(l[m])return l[m].exports;var p=l[m]={exports:{}};return i[m](p,p.exports,d),p.exports}return function(){d.n=function(m){var p=m&&m.__esModule?function(){return m.default}:function(){return m};return d.d(p,{a:p}),p}}(),function(){d.d=function(m,p){for(var v in p)d.o(p,v)&&!d.o(m,v)&&Object.defineProperty(m,v,{enumerable:!0,get:p[v]})}}(),function(){d.o=function(m,p){return Object.prototype.hasOwnProperty.call(m,p)}}(),d(686)}().default})})(Qoe);var qce=Qoe.exports;const Gce=$oe(qce),Kce=u=>({toClipboard(o,i){return new Promise((l,d)=>{const m=document.createElement("button"),p=new Gce(m,{text:()=>o,action:()=>"copy",container:i!==void 0?i:document.body});p.on("success",v=>{p.destroy(),l(v)}),p.on("error",v=>{p.destroy(),d(v)}),document.body.appendChild(m),m.click(),document.body.removeChild(m)})}}),Yce=Ai({components:{BasicModal:Uoe,Upload:q$,Alert:ble,FileList:Joe},props:Ot(ie({},Zoe),{previewFileList:{type:Array,default:()=>[]}}),emits:["change","register","delete"],setup(u,{emit:o}){const i=rJ({fileList:[]}),{toClipboard:l}=Kce(),{createErrorModal:d}=iJ(),m=ko(!1),p=ko([]),{accept:v,helpText:x,maxNumber:k,maxSize:T}=oQ(u);let R={};const{t:N}=al(),[$,{closeModal:U}]=Woe(),{getStringAccept:X,getHelpText:J}=Goe({acceptRef:v,helpTextRef:x,maxNumberRef:k,maxSizeRef:T}),{createMessage:G}=iJ(),le=Ss(()=>p.value.length>0&&!p.value.every(Oe=>Oe.status===zl.SUCCESS)),Z=Ss(()=>{const Oe=p.value.some(ht=>ht.status===zl.SUCCESS);return{disabled:m.value||p.value.length===0||!Oe}}),be=Ss(()=>{const Oe=p.value.some(ht=>ht.status===zl.ERROR);return m.value?N("component.upload.uploading"):N(Oe?"component.upload.reUploadFailed":"component.upload.startUpload")});function He(Oe){return Ko(this,null,function*(){const{size:ht,name:ne}=Oe,{maxSize:ge}=u;if(ge&&Oe.size/1024/1024>=ge)return G.error(N("component.upload.maxSizeMultiple",[ge])),!1;const O={uuid:Zce(),file:Oe,size:ht,name:ne,percent:0,type:ne.split(".").pop()};return u.calculateMd5&&(l$.loading(N("fms.file.preprocessing")),Hle(Oe,{chunkSize:3*1024*1024}).then(Ke=>{l$.success(N("common.successful")),R[Oe.name]=Ke}).catch(()=>{l$.error(N("common.failed"))})),Ece(Oe)?Tce(Oe).then(({result:Ke})=>{p.value=[...gt(p),ie({thumbUrl:Ke},O)]}):p.value=[...gt(p),O],!1})}function Re(Oe){const ht=p.value.findIndex(ne=>ne.uuid===Oe.uuid);ht!==-1&&p.value.splice(ht,1),o("delete",Oe)}function K(Oe){return Ko(this,null,function*(){var ht,ne;try{Oe.responseData!==void 0?(yield l((ht=Oe.responseData)==null?void 0:ht.data.url),G.success(N("fms.file.copyURLSuccess"))):d({title:N("common.failed"),content:N("fms.file.uploadFirst")})}catch(ge){d({title:N("fms.file.copyURLFailed"),content:(ne=Oe.responseData)==null?void 0:ne.data.url})}})}function Ie(Oe){return Ko(this,null,function*(){var ne;const{api:ht}=u;if(!ht||!Dr(ht))return Roe();try{Oe.status=zl.UPLOADING;const ge=u.uploadParams;ge.md5=Oe.md5;const{data:O}=yield(ne=u.api)==null?void 0:ne.call(u,{data:ie({},ge||{}),file:Oe.file,name:u.name,filename:u.filename},function(he){const at=he.loaded/he.total*100|0;Oe.percent=at});return O.code!==0?(l$.error(O.msg),Oe.status=zl.ERROR,{success:!1,error:O.msg}):(Oe.status=zl.SUCCESS,Oe.responseData=O,{success:!0,error:null})}catch(ge){return Oe.status=zl.ERROR,{success:!1,error:ge}}})}function $e(){return Ko(this,null,function*(){var ht;const{maxNumber:Oe}=u;if(p.value.length+((ht=u.previewFileList)==null?void 0:ht.length)>Oe)return G.warning(N("component.upload.maxNumber",[Oe]));try{m.value=!0;const ne=p.value.filter(Ke=>Ke.status!==zl.SUCCESS)||[];for(let Ke=0;Ke<ne.length;Ke++)ne[Ke].md5=R[ne[Ke].name];const ge=yield Promise.all(ne.map(Ke=>Ie(Ke)));m.value=!1;const O=ge.filter(Ke=>!Ke.success);if(O.length>0)throw O}catch(ne){throw m.value=!1,ne}})}function Ue(){const{maxNumber:Oe}=u;if(p.value.length>Oe)return G.warning(N("component.upload.maxNumber",[Oe]));if(m.value)return G.warning(N("component.upload.saveWarn"));const ht=[];for(const ne of p.value){const{status:ge,responseData:O}=ne;ge===zl.SUCCESS&&O&&ht.push(O.data.url)}if(ht.length<=0)return G.warning(N("component.upload.saveError"));p.value=[],U(),o("change",ht)}function ae(){return Ko(this,null,function*(){return m.value?(G.warning(N("component.upload.uploadWait")),!1):(p.value=[],!0)})}return{columns:zce(),actionColumn:Uce(Re,K),register:$,closeModal:U,getHelpText:J,getStringAccept:X,getOkButtonProps:Z,beforeUpload:He,fileListRef:p,state:i,isUploadingRef:m,handleStartUpload:$e,handleOk:Ue,handleCloseFunc:ae,getIsSelectFile:le,getUploadBtnText:be,t:N}}}),Xce={class:"upload-modal-toolbar"};function Jce(u,o,i,l,d,m){const p=Bs("a-button"),v=Bs("Alert"),x=Bs("Upload"),k=Bs("FileList"),T=Bs("BasicModal");return Io(),dr(T,na({width:"800px",title:u.t("component.upload.upload"),okText:u.t("component.upload.save")},u.$attrs,{onRegister:u.register,onOk:u.handleOk,closeFunc:u.handleCloseFunc,maskClosable:!1,keyboard:!1,class:"upload-modal",okButtonProps:u.getOkButtonProps,cancelButtonProps:{disabled:u.isUploadingRef}}),{centerFooter:Yo(()=>[Yn(p,{onClick:u.handleStartUpload,color:"success",disabled:!u.getIsSelectFile,loading:u.isUploadingRef},{default:Yo(()=>[Wa(ja(u.getUploadBtnText),1)]),_:1},8,["onClick","disabled","loading"])]),default:Yo(()=>[gh("div",Xce,[Yn(v,{message:u.getHelpText,type:"info",banner:"",class:"upload-modal-toolbar__text"},null,8,["message"]),Yn(x,{accept:u.getStringAccept,multiple:u.multiple,"before-upload":u.beforeUpload,"show-upload-list":!1,class:"upload-modal-toolbar__btn"},{default:Yo(()=>[Yn(p,{type:"primary"},{default:Yo(()=>[Wa(ja(u.t("component.upload.choose")),1)]),_:1})]),_:1},8,["accept","multiple","before-upload"])]),Yn(k,{dataSource:u.fileListRef,"onUpdate:dataSource":o[0]||(o[0]=R=>u.fileListRef=R),columns:u.columns,actionColumn:u.actionColumn,openDrag:u.fileListOpenDrag,dragOptions:u.fileListDragOptions},null,8,["dataSource","columns","actionColumn","openDrag","dragOptions"])]),_:1},16,["title","okText","onRegister","onOk","closeFunc","okButtonProps","cancelButtonProps"])}const Qce=Gl(Yce,[["render",Jce]]);function eue({url:u,target:o="_blank",fileName:i}){const l=window.navigator.userAgent.toLowerCase().indexOf("chrome")>-1,d=window.navigator.userAgent.toLowerCase().indexOf("safari")>-1;if(/(iP)/g.test(window.navigator.userAgent))return!1;if(l||d){const m=document.createElement("a");if(m.href=u,m.target=o,m.download!==void 0&&(m.download=i||u.substring(u.lastIndexOf("/")+1,u.length)),document.createEvent){const p=document.createEvent("MouseEvents");return p.initEvent("click",!0,!0),m.dispatchEvent(p),!0}}return u.indexOf("?")===-1&&(u+="?download"),Jae(u,{target:o}),!0}const tue=Ai({components:{BasicModal:Uoe,FileList:Joe},props:kce,emits:["list-change","register","delete"],setup(u,{emit:o}){const[i,{closeModal:l}]=Woe(),{t:d}=al(),m=ko([]);rr(()=>u.value,x=>{dy(x)||(x=[]),m.value=x.filter(k=>!!k).map(k=>({url:k,type:k.split(".").pop()||"",name:k.split("/").pop()||""}))},{immediate:!0});function p(x){const k=m.value.findIndex(T=>T.url===x.url);if(k!==-1){const T=m.value.splice(k,1);o("delete",T[0].url),o("list-change",m.value.map(R=>R.url))}}function v(x){const{url:k=""}=x;eue({url:k})}return{t:d,register:i,closeModal:l,fileListRef:m,columns:Wce(),actionColumn:jce({handleRemove:p,handleDownload:v})}}});function nue(u,o,i,l,d,m){const p=Bs("FileList"),v=Bs("BasicModal");return Io(),dr(v,na({width:"800px",title:u.t("component.upload.preview"),class:"upload-preview-modal"},u.$attrs,{onRegister:u.register,showOkBtn:!1}),{default:Yo(()=>[Yn(p,{dataSource:u.fileListRef,columns:u.columns,actionColumn:u.actionColumn},null,8,["dataSource","columns","actionColumn"])]),_:1},16,["title","onRegister"])}const oue=Gl(tue,[["render",nue]]),sue=Ai({name:"BasicUpload",__name:"BasicUpload",props:qoe,emits:["change","delete","preview-delete","update:value"],setup(u,{emit:o}){const i=u,l=o,d=Ooe(),{t:m}=al(),[p,{openModal:v}]=_te(),[x,{openModal:k}]=_te(),T=ko([]),R=Ss(()=>{const{emptyHidePreview:G}=i;return G&&G?T.value.length>0:!0}),N=Ss(()=>ie(ie({},d),i));rr(()=>i.value,(G=[])=>{T.value=dy(G)?G:[]},{immediate:!0});function $(G){T.value=[...gt(T),...G||[]],l("update:value",T.value),l("change",T.value)}function U(G){T.value=[...G||[]],l("update:value",T.value),l("change",T.value)}function X(G){l("delete",G)}function J(G){l("preview-delete",G)}return(G,le)=>{const Z=Bs("a-button");return Io(),ki("div",null,[Yn(gt(vle),null,{default:Yo(()=>[Yn(Z,{type:"primary",onClick:gt(v),preIcon:"carbon:cloud-upload"},{default:Yo(()=>[Wa(ja(gt(m)("component.upload.upload")),1)]),_:1},8,["onClick"]),R.value?(Io(),dr(gt(Loe),{key:0,placement:"bottom"},{title:Yo(()=>[Wa(ja(gt(m)("component.upload.uploaded"))+" ",1),T.value.length?(Io(),ki(pf,{key:0},[Wa(ja(T.value.length),1)],64)):sl("",!0)]),default:Yo(()=>[Yn(Z,{onClick:gt(k)},{default:Yo(()=>[Yn(Z$,{icon:"bi:eye"}),T.value.length&&G.showPreviewNumber?(Io(),ki(pf,{key:0},[Wa(ja(T.value.length),1)],64)):sl("",!0)]),_:1},8,["onClick"])]),_:1})):sl("",!0)]),_:1}),Yn(Qce,na(N.value,{previewFileList:T.value,fileListOpenDrag:G.fileListOpenDrag,fileListDragOptions:G.fileListDragOptions,onRegister:gt(p),onChange:$,onDelete:X}),null,16,["previewFileList","fileListOpenDrag","fileListDragOptions","onRegister"]),Yn(oue,{value:T.value,onRegister:gt(x),onListChange:U,onDelete:J},null,8,["value","onRegister"])])}}}),rue={key:0},iue={style:{"margin-top":"8px"}},aue=["src"],lue=Ai({name:"ImageUpload",__name:"ImageUpload",props:ie({},qoe),emits:["change","update:value","delete"],setup(u,{emit:o}){const i=o,l=u,{t:d}=al(),{createMessage:m}=iJ(),{accept:p,helpText:v,maxNumber:x,maxSize:k}=oQ(l),T=ko(!1),{getStringAccept:R}=Goe({acceptRef:p,helpTextRef:v,maxNumberRef:x,maxSizeRef:k}),N=ko(!1),$=ko(""),U=ko(""),X=ko([]),J=ko(!0),G=ko(!0);rr(()=>l.value,$e=>{if(T.value){T.value=!1;return}if($e){let Ue=[];dy($e)?Ue=$e:Ue.push($e),X.value=Ue.map((ae,Oe)=>ae&&uy(ae)?{uid:-Oe+"",name:ae.substring(ae.lastIndexOf("/")+1),status:"done",url:ae}:ae&&jg(ae)?ae:void 0)}});function le(){const $e=(X.value||[]).filter(Ue=>(Ue==null?void 0:Ue.status)===zl.DONE).map(Ue=>{var ae;return(Ue==null?void 0:Ue.url)||((ae=Ue==null?void 0:Ue.response)==null?void 0:ae.url)});return l.multiple?$e:$e.length>0?$e[0]:""}function Z($e){return new Promise((Ue,ae)=>{const Oe=new FileReader;Oe.readAsDataURL($e),Oe.onload=()=>{Ue(Oe.result)},Oe.onerror=ht=>ae(ht)})}const be=$e=>Ko(this,null,function*(){!$e.url&&!$e.preview&&($e.preview=yield Z($e.originFileObj)),$.value=$e.url||$e.preview||"",N.value=!0,U.value=$e.name||$.value.substring($.value.lastIndexOf("/")+1)}),He=$e=>Ko(this,null,function*(){if(X.value){const Ue=X.value.findIndex(Oe=>Oe.uid===$e.uid);Ue!==-1&&X.value.splice(Ue,1);const ae=le();T.value=!0,i("change",ae),i("delete",$e)}}),Re=()=>{N.value=!1,U.value=""},K=$e=>{const{maxSize:Ue,accept:ae}=l,{name:Oe}=$e,ht=cQ(Oe);ht||(m.error(d("component.upload.acceptUpload",[ae])),G.value=!1,setTimeout(()=>G.value=!0,1e3));const ne=$e.size/1024/1024>Ue;return ne&&(m.error(d("component.upload.maxSizeMultiple",[Ue])),J.value=!1,setTimeout(()=>J.value=!0,1e3)),ht&&!ne||q$.LIST_IGNORE};function Ie($e){return Ko(this,null,function*(){var ae;const{api:Ue}=l;if(!Ue||!Dr(Ue))return Roe();try{const Oe=yield(ae=l.api)==null?void 0:ae.call(l,{data:ie({},l.uploadParams||{}),file:$e.file,name:l.name,filename:l.filename});$e.onSuccess(Oe.data.data);const ht=le();T.value=!0,i("change",ht)}catch(Oe){$e.onError(Oe)}})}return($e,Ue)=>(Io(),ki("div",null,[Yn(gt(q$),na($e.$attrs,{"file-list":X.value,"onUpdate:fileList":Ue[0]||(Ue[0]=ae=>X.value=ae),"list-type":$e.listType,accept:gt(R),multiple:$e.multiple,maxCount:gt(x),"before-upload":K,"custom-request":Ie,onPreview:be,onRemove:He}),{default:Yo(()=>[X.value&&X.value.length<gt(x)?(Io(),ki("div",rue,[Yn(gt(yle)),gh("div",iue,ja(gt(d)("component.upload.upload")),1)])):sl("",!0)]),_:1},16,["file-list","list-type","accept","multiple","maxCount"]),Yn(gt(wle),{open:N.value,title:U.value,footer:null,onCancel:Re},{default:Yo(()=>[gh("img",{alt:"",style:{width:"100%"},src:$.value},null,8,aue)]),_:1},8,["open","title"])]))}}),cue=C6(lue),uue=C6(sue),Pte={prefix:"ant-design",icons:["account-book-filled","account-book-outlined","account-book-twotone","aim-outlined","alert-filled","alert-outlined","alert-twotone","alibaba-outlined","align-center-outlined","align-left-outlined","align-right-outlined","alipay-circle-filled","alipay-circle-outlined","alipay-outlined","alipay-square-filled","aliwangwang-filled","aliwangwang-outlined","aliyun-outlined","amazon-circle-filled","amazon-outlined","amazon-square-filled","android-filled","android-outlined","ant-cloud-outlined","ant-design-outlined","apartment-outlined","api-filled","api-outlined","api-twotone","apple-filled","apple-outlined","appstore-add-outlined","appstore-filled","appstore-outlined","appstore-twotone","area-chart-outlined","arrow-down-outlined","arrow-left-outlined","arrow-right-outlined","arrow-up-outlined","arrows-alt-outlined","audio-filled","audio-muted-outlined","audio-outlined","audio-twotone","audit-outlined","backward-filled","backward-outlined","bank-filled","bank-outlined","bank-twotone","bar-chart-outlined","barcode-outlined","bars-outlined","behance-circle-filled","behance-outlined","behance-square-filled","behance-square-outlined","bell-filled","bell-outlined","bell-twotone","bg-colors-outlined","block-outlined","bold-outlined","book-filled","book-outlined","book-twotone","border-bottom-outlined","border-horizontal-outlined","border-inner-outlined","border-left-outlined","border-outer-outlined","border-outlined","border-right-outlined","border-top-outlined","border-verticle-outlined","borderless-table-outlined","box-plot-filled","box-plot-outlined","box-plot-twotone","branches-outlined","bug-filled","bug-outlined","bug-twotone","build-filled","build-outlined","build-twotone","bulb-filled","bulb-outlined","bulb-twotone","calculator-filled","calculator-outlined","calculator-twotone","calendar-filled","calendar-outlined","calendar-twotone","camera-filled","camera-outlined","camera-twotone","car-filled","car-outlined","car-twotone","caret-down-filled","caret-down-outlined","caret-left-filled","caret-left-outlined","caret-right-filled","caret-right-outlined","caret-up-filled","caret-up-outlined","carry-out-filled","carry-out-outlined","carry-out-twotone","check-circle-filled","check-circle-outlined","check-circle-twotone","check-outlined","check-square-filled","check-square-outlined","check-square-twotone","chrome-filled","chrome-outlined","ci-circle-filled","ci-circle-outlined","ci-circle-twotone","ci-outlined","ci-twotone","clear-outlined","clock-circle-filled","clock-circle-outlined","clock-circle-twotone","close-circle-filled","close-circle-outlined","close-circle-twotone","close-outlined","close-square-filled","close-square-outlined","close-square-twotone","cloud-download-outlined","cloud-filled","cloud-outlined","cloud-server-outlined","cloud-sync-outlined","cloud-twotone","cloud-upload-outlined","cluster-outlined","code-filled","code-outlined","code-sandbox-circle-filled","code-sandbox-outlined","code-sandbox-square-filled","code-twotone","codepen-circle-filled","codepen-circle-outlined","codepen-outlined","codepen-square-filled","coffee-outlined","column-height-outlined","column-width-outlined","comment-outlined","compass-filled","compass-outlined","compass-twotone","compress-outlined","console-sql-outlined","contacts-filled","contacts-outlined","contacts-twotone","container-filled","container-outlined","container-twotone","control-filled","control-outlined","control-twotone","copy-filled","copy-outlined","copy-twotone","copyright-circle-filled","copyright-circle-outlined","copyright-circle-twotone","copyright-outlined","copyright-twotone","credit-card-filled","credit-card-outlined","credit-card-twotone","crown-filled","crown-outlined","crown-twotone","customer-service-filled","customer-service-outlined","customer-service-twotone","dash-outlined","dashboard-filled","dashboard-outlined","dashboard-twotone","database-filled","database-outlined","database-twotone","delete-column-outlined","delete-filled","delete-outlined","delete-row-outlined","delete-twotone","delivered-procedure-outlined","deployment-unit-outlined","desktop-outlined","diff-filled","diff-outlined","diff-twotone","dingding-outlined","dingtalk-circle-filled","dingtalk-outlined","dingtalk-square-filled","disconnect-outlined","dislike-filled","dislike-outlined","dislike-twotone","dollar-circle-filled","dollar-circle-outlined","dollar-circle-twotone","dollar-outlined","dollar-twotone","dot-chart-outlined","double-left-outlined","double-right-outlined","down-circle-filled","down-circle-outlined","down-circle-twotone","down-outlined","down-square-filled","down-square-outlined","down-square-twotone","download-outlined","drag-outlined","dribbble-circle-filled","dribbble-outlined","dribbble-square-filled","dribbble-square-outlined","dropbox-circle-filled","dropbox-outlined","dropbox-square-filled","edit-filled","edit-outlined","edit-twotone","ellipsis-outlined","enter-outlined","environment-filled","environment-outlined","environment-twotone","euro-circle-filled","euro-circle-outlined","euro-circle-twotone","euro-outlined","euro-twotone","exception-outlined","exclamation-circle-filled","exclamation-circle-outlined","exclamation-circle-twotone","exclamation-outlined","expand-alt-outlined","expand-outlined","experiment-filled","experiment-outlined","experiment-twotone","export-outlined","eye-filled","eye-invisible-filled","eye-invisible-outlined","eye-invisible-twotone","eye-outlined","eye-twotone","facebook-filled","facebook-outlined","fall-outlined","fast-backward-filled","fast-backward-outlined","fast-forward-filled","fast-forward-outlined","field-binary-outlined","field-number-outlined","field-string-outlined","field-time-outlined","file-add-filled","file-add-outlined","file-add-twotone","file-done-outlined","file-excel-filled","file-excel-outlined","file-excel-twotone","file-exclamation-filled","file-exclamation-outlined","file-exclamation-twotone","file-filled","file-gif-outlined","file-image-filled","file-image-outlined","file-image-twotone","file-jpg-outlined","file-markdown-filled","file-markdown-outlined","file-markdown-twotone","file-outlined","file-pdf-filled","file-pdf-outlined","file-pdf-twotone","file-ppt-filled","file-ppt-outlined","file-ppt-twotone","file-protect-outlined","file-search-outlined","file-sync-outlined","file-text-filled","file-text-outlined","file-text-twotone","file-twotone","file-unknown-filled","file-unknown-outlined","file-unknown-twotone","file-word-filled","file-word-outlined","file-word-twotone","file-zip-filled","file-zip-outlined","file-zip-twotone","filter-filled","filter-outlined","filter-twotone","fire-filled","fire-outlined","fire-twotone","flag-filled","flag-outlined","flag-twotone","folder-add-filled","folder-add-outlined","folder-add-twotone","folder-filled","folder-open-filled","folder-open-outlined","folder-open-twotone","folder-outlined","folder-twotone","folder-view-outlined","font-colors-outlined","font-size-outlined","fork-outlined","form-outlined","format-painter-filled","format-painter-outlined","forward-filled","forward-outlined","frown-filled","frown-outlined","frown-twotone","fullscreen-exit-outlined","fullscreen-outlined","function-outlined","fund-filled","fund-outlined","fund-projection-screen-outlined","fund-twotone","fund-view-outlined","funnel-plot-filled","funnel-plot-outlined","funnel-plot-twotone","gateway-outlined","gif-outlined","gift-filled","gift-outlined","gift-twotone","github-filled","github-outlined","gitlab-filled","gitlab-outlined","global-outlined","gold-filled","gold-outlined","gold-twotone","golden-filled","google-circle-filled","google-outlined","google-plus-circle-filled","google-plus-outlined","google-plus-square-filled","google-square-filled","group-outlined","hdd-filled","hdd-outlined","hdd-twotone","heart-filled","heart-outlined","heart-twotone","heat-map-outlined","highlight-filled","highlight-outlined","highlight-twotone","history-outlined","home-filled","home-outlined","home-twotone","hourglass-filled","hourglass-outlined","hourglass-twotone","html5-filled","html5-outlined","html5-twotone","idcard-filled","idcard-outlined","idcard-twotone","ie-circle-filled","ie-outlined","ie-square-filled","import-outlined","inbox-outlined","info-circle-filled","info-circle-outlined","info-circle-twotone","info-outlined","insert-row-above-outlined","insert-row-below-outlined","insert-row-left-outlined","insert-row-right-outlined","instagram-filled","instagram-outlined","insurance-filled","insurance-outlined","insurance-twotone","interaction-filled","interaction-outlined","interaction-twotone","issues-close-outlined","italic-outlined","key-outlined","laptop-outlined","layout-filled","layout-outlined","layout-twotone","left-circle-filled","left-circle-outlined","left-circle-twotone","left-outlined","left-square-filled","left-square-outlined","left-square-twotone","like-filled","like-outlined","like-twotone","line-chart-outlined","line-height-outlined","line-outlined","link-outlined","linkedin-filled","linkedin-outlined","loading-3-quarters-outlined","loading-outlined","lock-filled","lock-outlined","lock-twotone","login-outlined","logout-outlined","mac-command-filled","mac-command-outlined","mail-filled","mail-outlined","mail-twotone","man-outlined","medicine-box-filled","medicine-box-outlined","medicine-box-twotone","medium-circle-filled","medium-outlined","medium-square-filled","medium-workmark-outlined","meh-filled","meh-outlined","meh-twotone","menu-fold-outlined","menu-outlined","menu-unfold-outlined","merge-cells-outlined","message-filled","message-outlined","message-twotone","minus-circle-filled","minus-circle-outlined","minus-circle-twotone","minus-outlined","minus-square-filled","minus-square-outlined","minus-square-twotone","mobile-filled","mobile-outlined","mobile-twotone","money-collect-filled","money-collect-outlined","money-collect-twotone","monitor-outlined","more-outlined","node-collapse-outlined","node-expand-outlined","node-index-outlined","notification-filled","notification-outlined","notification-twotone","number-outlined","one-to-one-outlined","ordered-list-outlined","paper-clip-outlined","partition-outlined","pause-circle-filled","pause-circle-outlined","pause-circle-twotone","pause-outlined","pay-circle-filled","pay-circle-outlined","percentage-outlined","phone-filled","phone-outlined","phone-twotone","pic-center-outlined","pic-left-outlined","pic-right-outlined","picture-filled","picture-outlined","picture-twotone","pie-chart-filled","pie-chart-outlined","pie-chart-twotone","play-circle-filled","play-circle-outlined","play-circle-twotone","play-square-filled","play-square-outlined","play-square-twotone","plus-circle-filled","plus-circle-outlined","plus-circle-twotone","plus-outlined","plus-square-filled","plus-square-outlined","plus-square-twotone","pound-circle-filled","pound-circle-outlined","pound-circle-twotone","pound-outlined","poweroff-outlined","printer-filled","printer-outlined","printer-twotone","profile-filled","profile-outlined","profile-twotone","project-filled","project-outlined","project-twotone","property-safety-filled","property-safety-outlined","property-safety-twotone","pull-request-outlined","pushpin-filled","pushpin-outlined","pushpin-twotone","qq-circle-filled","qq-outlined","qq-square-filled","qrcode-outlined","question-circle-filled","question-circle-outlined","question-circle-twotone","question-outlined","radar-chart-outlined","radius-bottomleft-outlined","radius-bottomright-outlined","radius-setting-outlined","radius-upleft-outlined","radius-upright-outlined","read-filled","read-outlined","reconciliation-filled","reconciliation-outlined","reconciliation-twotone","red-envelope-filled","red-envelope-outlined","red-envelope-twotone","reddit-circle-filled","reddit-outlined","reddit-square-filled","redo-outlined","reload-outlined","rest-filled","rest-outlined","rest-twotone","retweet-outlined","right-circle-filled","right-circle-outlined","right-circle-twotone","right-outlined","right-square-filled","right-square-outlined","right-square-twotone","rise-outlined","robot-filled","robot-outlined","rocket-filled","rocket-outlined","rocket-twotone","rollback-outlined","rotate-left-outlined","rotate-right-outlined","safety-certificate-filled","safety-certificate-outlined","safety-certificate-twotone","safety-outlined","save-filled","save-outlined","save-twotone","scan-outlined","schedule-filled","schedule-outlined","schedule-twotone","scissor-outlined","search-outlined","security-scan-filled","security-scan-outlined","security-scan-twotone","select-outlined","send-outlined","setting-filled","setting-outlined","setting-twotone","shake-outlined","share-alt-outlined","shop-filled","shop-outlined","shop-twotone","shopping-cart-outlined","shopping-filled","shopping-outlined","shopping-twotone","shrink-outlined","signal-filled","sisternode-outlined","sketch-circle-filled","sketch-outlined","sketch-square-filled","skin-filled","skin-outlined","skin-twotone","skype-filled","skype-outlined","slack-circle-filled","slack-outlined","slack-square-filled","slack-square-outlined","sliders-filled","sliders-outlined","sliders-twotone","small-dash-outlined","smile-filled","smile-outlined","smile-twotone","snippets-filled","snippets-outlined","snippets-twotone","solution-outlined","sort-ascending-outlined","sort-descending-outlined","sound-filled","sound-outlined","sound-twotone","split-cells-outlined","star-filled","star-outlined","star-twotone","step-backward-filled","step-backward-outlined","step-forward-filled","step-forward-outlined","stock-outlined","stop-filled","stop-outlined","stop-twotone","strikethrough-outlined","subnode-outlined","swap-left-outlined","swap-outlined","swap-right-outlined","switcher-filled","switcher-outlined","switcher-twotone","sync-outlined","table-outlined","tablet-filled","tablet-outlined","tablet-twotone","tag-filled","tag-outlined","tag-twotone","tags-filled","tags-outlined","tags-twotone","taobao-circle-filled","taobao-circle-outlined","taobao-outlined","taobao-square-filled","team-outlined","thunderbolt-filled","thunderbolt-outlined","thunderbolt-twotone","to-top-outlined","tool-filled","tool-outlined","tool-twotone","trademark-circle-filled","trademark-circle-outlined","trademark-circle-twotone","trademark-outlined","transaction-outlined","translation-outlined","trophy-filled","trophy-outlined","trophy-twotone","twitter-circle-filled","twitter-outlined","twitter-square-filled","underline-outlined","undo-outlined","ungroup-outlined","unlock-filled","unlock-outlined","unlock-twotone","unordered-list-outlined","up-circle-filled","up-circle-outlined","up-circle-twotone","up-outlined","up-square-filled","up-square-outlined","up-square-twotone","upload-outlined","usb-filled","usb-outlined","usb-twotone","user-add-outlined","user-delete-outlined","user-outlined","user-switch-outlined","usergroup-add-outlined","usergroup-delete-outlined","verified-outlined","vertical-align-bottom-outlined","vertical-align-middle-outlined","vertical-align-top-outlined","vertical-left-outlined","vertical-right-outlined","video-camera-add-outlined","video-camera-filled","video-camera-outlined","video-camera-twotone","wallet-filled","wallet-outlined","wallet-twotone","warning-filled","warning-outlined","warning-twotone","wechat-filled","wechat-outlined","weibo-circle-filled","weibo-circle-outlined","weibo-outlined","weibo-square-filled","weibo-square-outlined","whats-app-outlined","wifi-outlined","windows-filled","windows-outlined","woman-outlined","yahoo-filled","yahoo-outlined","youtube-filled","youtube-outlined","yuque-filled","yuque-outlined","zhihu-circle-filled","zhihu-outlined","zhihu-square-filled","zoom-in-outlined","zoom-out-outlined"]};function due(u,o,i){const l=(o-1)*Number(i);return l+Number(i)>=u.length?u.slice(l,u.length):u.slice(l,l+Number(i))}function fue(u,o){const i=ko(1),l=ko(o),d=Ss(()=>due(gt(u),gt(i),gt(l))),m=Ss(()=>gt(u).length);function p(x){i.value=x}function v(x){l.value=x}return{setCurrentPage:p,getTotal:m,setPageSize:v,getPaginationList:d}}const hue=["icon-download-count","icon-dynamic-avatar-1","icon-dynamic-avatar-2","icon-dynamic-avatar-3","icon-dynamic-avatar-4","icon-dynamic-avatar-5","icon-dynamic-avatar-6","icon-moon","icon-sun","icon-test","icon-total-sales","icon-transaction","icon-visit-count"],mue={class:"flex justify-between"},gue={key:0},pue={class:"flex flex-wrap px-2"},bue=["onClick","title"],vue={key:0,class:"flex py-2 items-center justify-center"},yue={key:1,class:"p-5"},wue={key:0,class:"cursor-pointer px-2 py-1 flex items-center"},xue=Ai({inheritAttrs:!1,__name:"IconPicker",props:{value:{default:""},width:{default:"100%"},pageSize:{default:140},copy:{type:Boolean,default:!1},mode:{default:"iconify"}},emits:["change","update:value"],setup(u,{emit:o}){const i=x2,l=xle,d=Sle,m=Cle;function p(){const Ue=Pte.prefix;return Pte.icons.map(ae=>`${Ue}:${ae}`)}function v(){return hue.map(Ue=>Ue.replace("icon-",""))}const x=u,k=o,T=x.mode==="svg",R=T?v():p(),N=ko(""),$=ko(!1),U=ko(R),X=ko(),J=()=>{X.value&&X.value.click()},{t:G}=al(),{prefixCls:le}=iM("icon-picker"),Z=rQ($e,100),{getPaginationList:be,getTotal:He,setCurrentPage:Re}=fue(U,x.pageSize);rM(()=>{N.value=x.value}),rr(()=>N.value,Ue=>{k("update:value",Ue),k("change",Ue)});function K(Ue){Re(Ue)}function Ie(Ue){N.value=Ue,x.copy&&Ple(Ue,G("component.icon.copy"))}function $e(Ue){const ae=Ue.target.value;if(!ae){Re(1),U.value=R;return}N.value=ae,U.value=R.filter(Oe=>Oe.includes(ae))}return(Ue,ae)=>(Io(),dr(gt(i),{readonly:"",style:sQ({width:Ue.width}),placeholder:gt(G)("component.icon.placeholder"),class:cy(gt(le)),value:N.value,"onUpdate:value":ae[1]||(ae[1]=Oe=>N.value=Oe),onClick:J},{addonAfter:Yo(()=>[Yn(gt(l),{placement:"bottomLeft",trigger:"click",modelValue:$.value,"onUpdate:modelValue":ae[0]||(ae[0]=Oe=>$.value=Oe),overlayClassName:`${gt(le)}-popover`},{title:Yo(()=>[gh("div",mue,[Yn(gt(i),{placeholder:gt(G)("component.icon.search"),onChange:gt(Z),allowClear:""},null,8,["placeholder","onChange"])])]),content:Yo(()=>[gt(be).length?(Io(),ki("div",gue,[Yn(gt(Ble),{class:"border border-solid border-t-0"},{default:Yo(()=>[gh("ul",pue,[(Io(!0),ki(pf,null,yf(gt(be),Oe=>(Io(),ki("li",{key:Oe,class:cy([N.value===Oe?"border border-primary":"","p-2 w-1/8 cursor-pointer mr-1 mt-1 flex justify-center items-center border border-solid hover:border-primary"]),onClick:ht=>Ie(Oe),title:Oe},[T?(Io(),dr(Ote,{key:0,name:Oe},null,8,["name"])):(Io(),dr(Z$,{key:1,icon:Oe},null,8,["icon"]))],10,bue))),128))])]),_:1}),gt(He)>=Ue.pageSize?(Io(),ki("div",vue,[Yn(gt(d),{showLessItems:"",size:"small",pageSize:Ue.pageSize,total:gt(He),onChange:K},null,8,["pageSize","total"])])):sl("",!0)])):(Io(),ki("div",yue,[Yn(gt(m))]))]),default:Yo(()=>[gh("div",{ref_key:"trigger",ref:X},[T&&N.value?(Io(),ki("span",wue,[Yn(Ote,{name:N.value},null,8,["name"])])):(Io(),dr(Z$,{key:1,icon:N.value||"ion:apps-outline",class:"cursor-pointer px-2 py-1"},null,8,["icon"]))],512)]),_:1},8,["modelValue","overlayClassName"])]),_:1},8,["style","placeholder","class","value"]))}});class Fr{lineAt(o){if(o<0||o>this.length)throw new RangeError(`Invalid position ${o} in document of length ${this.length}`);return this.lineInner(o,!1,1,0)}line(o){if(o<1||o>this.lines)throw new RangeError(`Invalid line number ${o} in ${this.lines}-line document`);return this.lineInner(o,!0,1,0)}replace(o,i,l){[o,i]=h2(this,o,i);let d=[];return this.decompose(0,o,d,2),l.length&&l.decompose(0,l.length,d,3),this.decompose(i,this.length,d,1),ym.from(d,this.length-(i-o)+l.length)}append(o){return this.replace(this.length,this.length,o)}slice(o,i=this.length){[o,i]=h2(this,o,i);let l=[];return this.decompose(o,i,l,0),ym.from(l,i-o)}eq(o){if(o==this)return!0;if(o.length!=this.length||o.lines!=this.lines)return!1;let i=this.scanIdentical(o,1),l=this.length-this.scanIdentical(o,-1),d=new I_(this),m=new I_(o);for(let p=i,v=i;;){if(d.next(p),m.next(p),p=0,d.lineBreak!=m.lineBreak||d.done!=m.done||d.value!=m.value)return!1;if(v+=d.value.length,d.done||v>=l)return!0}}iter(o=1){return new I_(this,o)}iterRange(o,i=this.length){return new ese(this,o,i)}iterLines(o,i){let l;if(o==null)l=this.iter();else{i==null&&(i=this.lines+1);let d=this.line(o).from;l=this.iterRange(d,Math.max(d,i==this.lines+1?this.length:i<=1?0:this.line(i-1).to))}return new tse(l)}toString(){return this.sliceString(0)}toJSON(){let o=[];return this.flatten(o),o}constructor(){}static of(o){if(o.length==0)throw new RangeError("A document must have at least one line");return o.length==1&&!o[0]?Fr.empty:o.length<=32?new Ea(o):ym.from(Ea.split(o,[]))}}class Ea extends Fr{constructor(o,i=Sue(o)){super(),this.text=o,this.length=i}get lines(){return this.text.length}get children(){return null}lineInner(o,i,l,d){for(let m=0;;m++){let p=this.text[m],v=d+p.length;if((i?l:v)>=o)return new Cue(d,v,l,p);d=v+1,l++}}decompose(o,i,l,d){let m=o<=0&&i>=this.length?this:new Ea(Nte(this.text,o,i),Math.min(i,this.length)-Math.max(0,o));if(d&1){let p=l.pop(),v=B$(m.text,p.text.slice(),0,m.length);if(v.length<=32)l.push(new Ea(v,p.length+m.length));else{let x=v.length>>1;l.push(new Ea(v.slice(0,x)),new Ea(v.slice(x)))}}else l.push(m)}replace(o,i,l){if(!(l instanceof Ea))return super.replace(o,i,l);[o,i]=h2(this,o,i);let d=B$(this.text,B$(l.text,Nte(this.text,0,o)),i),m=this.length+l.length-(i-o);return d.length<=32?new Ea(d,m):ym.from(Ea.split(d,[]),m)}sliceString(o,i=this.length,l=`
`){[o,i]=h2(this,o,i);let d="";for(let m=0,p=0;m<=i&&p<this.text.length;p++){let v=this.text[p],x=m+v.length;m>o&&p&&(d+=l),o<x&&i>m&&(d+=v.slice(Math.max(0,o-m),i-m)),m=x+1}return d}flatten(o){for(let i of this.text)o.push(i)}scanIdentical(){return 0}static split(o,i){let l=[],d=-1;for(let m of o)l.push(m),d+=m.length+1,l.length==32&&(i.push(new Ea(l,d)),l=[],d=-1);return d>-1&&i.push(new Ea(l,d)),i}}class ym extends Fr{constructor(o,i){super(),this.children=o,this.length=i,this.lines=0;for(let l of o)this.lines+=l.lines}lineInner(o,i,l,d){for(let m=0;;m++){let p=this.children[m],v=d+p.length,x=l+p.lines-1;if((i?x:v)>=o)return p.lineInner(o,i,l,d);d=v+1,l=x+1}}decompose(o,i,l,d){for(let m=0,p=0;p<=i&&m<this.children.length;m++){let v=this.children[m],x=p+v.length;if(o<=x&&i>=p){let k=d&((p<=o?1:0)|(x>=i?2:0));p>=o&&x<=i&&!k?l.push(v):v.decompose(o-p,i-p,l,k)}p=x+1}}replace(o,i,l){if([o,i]=h2(this,o,i),l.lines<this.lines)for(let d=0,m=0;d<this.children.length;d++){let p=this.children[d],v=m+p.length;if(o>=m&&i<=v){let x=p.replace(o-m,i-m,l),k=this.lines-p.lines+x.lines;if(x.lines<k>>4&&x.lines>k>>6){let T=this.children.slice();return T[d]=x,new ym(T,this.length-(i-o)+l.length)}return super.replace(m,v,x)}m=v+1}return super.replace(o,i,l)}sliceString(o,i=this.length,l=`
`){[o,i]=h2(this,o,i);let d="";for(let m=0,p=0;m<this.children.length&&p<=i;m++){let v=this.children[m],x=p+v.length;p>o&&m&&(d+=l),o<x&&i>p&&(d+=v.sliceString(o-p,i-p,l)),p=x+1}return d}flatten(o){for(let i of this.children)i.flatten(o)}scanIdentical(o,i){if(!(o instanceof ym))return 0;let l=0,[d,m,p,v]=i>0?[0,0,this.children.length,o.children.length]:[this.children.length-1,o.children.length-1,-1,-1];for(;;d+=i,m+=i){if(d==p||m==v)return l;let x=this.children[d],k=o.children[m];if(x!=k)return l+x.scanIdentical(k,i);l+=x.length+1}}static from(o,i=o.reduce((l,d)=>l+d.length+1,-1)){let l=0;for(let $ of o)l+=$.lines;if(l<32){let $=[];for(let U of o)U.flatten($);return new Ea($,i)}let d=Math.max(32,l>>5),m=d<<1,p=d>>1,v=[],x=0,k=-1,T=[];function R($){let U;if($.lines>m&&$ instanceof ym)for(let X of $.children)R(X);else $.lines>p&&(x>p||!x)?(N(),v.push($)):$ instanceof Ea&&x&&(U=T[T.length-1])instanceof Ea&&$.lines+U.lines<=32?(x+=$.lines,k+=$.length+1,T[T.length-1]=new Ea(U.text.concat($.text),U.length+1+$.length)):(x+$.lines>d&&N(),x+=$.lines,k+=$.length+1,T.push($))}function N(){x!=0&&(v.push(T.length==1?T[0]:ym.from(T,k)),k=-1,x=T.length=0)}for(let $ of o)R($);return N(),v.length==1?v[0]:new ym(v,i)}}Fr.empty=new Ea([""],0);function Sue(u){let o=-1;for(let i of u)o+=i.length+1;return o}function B$(u,o,i=0,l=1e9){for(let d=0,m=0,p=!0;m<u.length&&d<=l;m++){let v=u[m],x=d+v.length;x>=i&&(x>l&&(v=v.slice(0,l-d)),d<i&&(v=v.slice(i-d)),p?(o[o.length-1]+=v,p=!1):o.push(v)),d=x+1}return o}function Nte(u,o,i){return B$(u,[""],o,i)}class I_{constructor(o,i=1){this.dir=i,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[o],this.offsets=[i>0?1:(o instanceof Ea?o.text.length:o.children.length)<<1]}nextInner(o,i){for(this.done=this.lineBreak=!1;;){let l=this.nodes.length-1,d=this.nodes[l],m=this.offsets[l],p=m>>1,v=d instanceof Ea?d.text.length:d.children.length;if(p==(i>0?v:0)){if(l==0)return this.done=!0,this.value="",this;i>0&&this.offsets[l-1]++,this.nodes.pop(),this.offsets.pop()}else if((m&1)==(i>0?0:1)){if(this.offsets[l]+=i,o==0)return this.lineBreak=!0,this.value=`
`,this;o--}else if(d instanceof Ea){let x=d.text[p+(i<0?-1:0)];if(this.offsets[l]+=i,x.length>Math.max(0,o))return this.value=o==0?x:i>0?x.slice(o):x.slice(0,x.length-o),this;o-=x.length}else{let x=d.children[p+(i<0?-1:0)];o>x.length?(o-=x.length,this.offsets[l]+=i):(i<0&&this.offsets[l]--,this.nodes.push(x),this.offsets.push(i>0?1:(x instanceof Ea?x.text.length:x.children.length)<<1))}}}next(o=0){return o<0&&(this.nextInner(-o,-this.dir),o=this.value.length),this.nextInner(o,this.dir)}}class ese{constructor(o,i,l){this.value="",this.done=!1,this.cursor=new I_(o,i>l?-1:1),this.pos=i>l?o.length:0,this.from=Math.min(i,l),this.to=Math.max(i,l)}nextInner(o,i){if(i<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;o+=Math.max(0,i<0?this.pos-this.to:this.from-this.pos);let l=i<0?this.pos-this.from:this.to-this.pos;o>l&&(o=l),l-=o;let{value:d}=this.cursor.next(o);return this.pos+=(d.length+o)*i,this.value=d.length<=l?d:i<0?d.slice(d.length-l):d.slice(0,l),this.done=!this.value,this}next(o=0){return o<0?o=Math.max(o,this.from-this.pos):o>0&&(o=Math.min(o,this.to-this.pos)),this.nextInner(o,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class tse{constructor(o){this.inner=o,this.afterBreak=!0,this.value="",this.done=!1}next(o=0){let{done:i,lineBreak:l,value:d}=this.inner.next(o);return i&&this.afterBreak?(this.value="",this.afterBreak=!1):i?(this.done=!0,this.value=""):l?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=d,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(Fr.prototype[Symbol.iterator]=function(){return this.iter()},I_.prototype[Symbol.iterator]=ese.prototype[Symbol.iterator]=tse.prototype[Symbol.iterator]=function(){return this});class Cue{constructor(o,i,l,d){this.from=o,this.to=i,this.number=l,this.text=d}get length(){return this.to-this.from}}function h2(u,o,i){return o=Math.max(0,Math.min(u.length,o)),[o,Math.max(o,Math.min(u.length,i))]}let r2="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(u=>u?parseInt(u,36):1);for(let u=1;u<r2.length;u++)r2[u]+=r2[u-1];function kue(u){for(let o=1;o<r2.length;o+=2)if(r2[o]>u)return r2[o-1]<=u;return!1}function Bte(u){return u>=127462&&u<=127487}const Fte=8205;function Zl(u,o,i=!0,l=!0){return(i?nse:Aue)(u,o,l)}function nse(u,o,i){if(o==u.length)return o;o&&ose(u.charCodeAt(o))&&sse(u.charCodeAt(o-1))&&o--;let l=Ul(u,o);for(o+=gf(l);o<u.length;){let d=Ul(u,o);if(l==Fte||d==Fte||i&&kue(d))o+=gf(d),l=d;else if(Bte(d)){let m=0,p=o-2;for(;p>=0&&Bte(Ul(u,p));)m++,p-=2;if(m%2==0)break;o+=2}else break}return o}function Aue(u,o,i){for(;o>0;){let l=nse(u,o-2,i);if(l<o)return l;o--}return 0}function ose(u){return u>=56320&&u<57344}function sse(u){return u>=55296&&u<56320}function Ul(u,o){let i=u.charCodeAt(o);if(!sse(i)||o+1==u.length)return i;let l=u.charCodeAt(o+1);return ose(l)?(i-55296<<10)+(l-56320)+65536:i}function uQ(u){return u<=65535?String.fromCharCode(u):(u-=65536,String.fromCharCode((u>>10)+55296,(u&1023)+56320))}function gf(u){return u<65536?1:2}const cJ=/\r\n?|\n/;var qc=function(u){return u[u.Simple=0]="Simple",u[u.TrackDel=1]="TrackDel",u[u.TrackBefore=2]="TrackBefore",u[u.TrackAfter=3]="TrackAfter",u}(qc||(qc={}));class Cm{constructor(o){this.sections=o}get length(){let o=0;for(let i=0;i<this.sections.length;i+=2)o+=this.sections[i];return o}get newLength(){let o=0;for(let i=0;i<this.sections.length;i+=2){let l=this.sections[i+1];o+=l<0?this.sections[i]:l}return o}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(o){for(let i=0,l=0,d=0;i<this.sections.length;){let m=this.sections[i++],p=this.sections[i++];p<0?(o(l,d,m),d+=m):d+=p,l+=m}}iterChangedRanges(o,i=!1){uJ(this,o,i)}get invertedDesc(){let o=[];for(let i=0;i<this.sections.length;){let l=this.sections[i++],d=this.sections[i++];d<0?o.push(l,d):o.push(d,l)}return new Cm(o)}composeDesc(o){return this.empty?o:o.empty?this:rse(this,o)}mapDesc(o,i=!1){return o.empty?this:dJ(this,o,i)}mapPos(o,i=-1,l=qc.Simple){let d=0,m=0;for(let p=0;p<this.sections.length;){let v=this.sections[p++],x=this.sections[p++],k=d+v;if(x<0){if(k>o)return m+(o-d);m+=v}else{if(l!=qc.Simple&&k>=o&&(l==qc.TrackDel&&d<o&&k>o||l==qc.TrackBefore&&d<o||l==qc.TrackAfter&&k>o))return null;if(k>o||k==o&&i<0&&!v)return o==d||i<0?m:m+x;m+=x}d=k}if(o>d)throw new RangeError(`Position ${o} is out of range for changeset of length ${d}`);return m}touchesRange(o,i=o){for(let l=0,d=0;l<this.sections.length&&d<=i;){let m=this.sections[l++],p=this.sections[l++],v=d+m;if(p>=0&&d<=i&&v>=o)return d<o&&v>i?"cover":!0;d=v}return!1}toString(){let o="";for(let i=0;i<this.sections.length;){let l=this.sections[i++],d=this.sections[i++];o+=(o?" ":"")+l+(d>=0?":"+d:"")}return o}toJSON(){return this.sections}static fromJSON(o){if(!Array.isArray(o)||o.length%2||o.some(i=>typeof i!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Cm(o)}static create(o){return new Cm(o)}}class rl extends Cm{constructor(o,i){super(o),this.inserted=i}apply(o){if(this.length!=o.length)throw new RangeError("Applying change set to a document with the wrong length");return uJ(this,(i,l,d,m,p)=>o=o.replace(d,d+(l-i),p),!1),o}mapDesc(o,i=!1){return dJ(this,o,i,!0)}invert(o){let i=this.sections.slice(),l=[];for(let d=0,m=0;d<i.length;d+=2){let p=i[d],v=i[d+1];if(v>=0){i[d]=v,i[d+1]=p;let x=d>>1;for(;l.length<x;)l.push(Fr.empty);l.push(p?o.slice(m,m+p):Fr.empty)}m+=p}return new rl(i,l)}compose(o){return this.empty?o:o.empty?this:rse(this,o,!0)}map(o,i=!1){return o.empty?this:dJ(this,o,i,!0)}iterChanges(o,i=!1){uJ(this,o,i)}get desc(){return Cm.create(this.sections)}filter(o){let i=[],l=[],d=[],m=new W_(this);e:for(let p=0,v=0;;){let x=p==o.length?1e9:o[p++];for(;v<x||v==x&&m.len==0;){if(m.done)break e;let T=Math.min(m.len,x-v);Cc(d,T,-1);let R=m.ins==-1?-1:m.off==0?m.ins:0;Cc(i,T,R),R>0&&Z1(l,i,m.text),m.forward(T),v+=T}let k=o[p++];for(;v<k;){if(m.done)break e;let T=Math.min(m.len,k-v);Cc(i,T,-1),Cc(d,T,m.ins==-1?-1:m.off==0?m.ins:0),m.forward(T),v+=T}}return{changes:new rl(i,l),filtered:Cm.create(d)}}toJSON(){let o=[];for(let i=0;i<this.sections.length;i+=2){let l=this.sections[i],d=this.sections[i+1];d<0?o.push(l):d==0?o.push([l]):o.push([l].concat(this.inserted[i>>1].toJSON()))}return o}static of(o,i,l){let d=[],m=[],p=0,v=null;function x(T=!1){if(!T&&!d.length)return;p<i&&Cc(d,i-p,-1);let R=new rl(d,m);v=v?v.compose(R.map(v)):R,d=[],m=[],p=0}function k(T){if(Array.isArray(T))for(let R of T)k(R);else if(T instanceof rl){if(T.length!=i)throw new RangeError(`Mismatched change set length (got ${T.length}, expected ${i})`);x(),v=v?v.compose(T.map(v)):T}else{let{from:R,to:N=R,insert:$}=T;if(R>N||R<0||N>i)throw new RangeError(`Invalid change range ${R} to ${N} (in doc of length ${i})`);let U=$?typeof $=="string"?Fr.of($.split(l||cJ)):$:Fr.empty,X=U.length;if(R==N&&X==0)return;R<p&&x(),R>p&&Cc(d,R-p,-1),Cc(d,N-R,X),Z1(m,d,U),p=N}}return k(o),x(!v),v}static empty(o){return new rl(o?[o,-1]:[],[])}static fromJSON(o){if(!Array.isArray(o))throw new RangeError("Invalid JSON representation of ChangeSet");let i=[],l=[];for(let d=0;d<o.length;d++){let m=o[d];if(typeof m=="number")i.push(m,-1);else{if(!Array.isArray(m)||typeof m[0]!="number"||m.some((p,v)=>v&&typeof p!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(m.length==1)i.push(m[0],0);else{for(;l.length<d;)l.push(Fr.empty);l[d]=Fr.of(m.slice(1)),i.push(m[0],l[d].length)}}}return new rl(i,l)}static createSet(o,i){return new rl(o,i)}}function Cc(u,o,i,l=!1){if(o==0&&i<=0)return;let d=u.length-2;d>=0&&i<=0&&i==u[d+1]?u[d]+=o:o==0&&u[d]==0?u[d+1]+=i:l?(u[d]+=o,u[d+1]+=i):u.push(o,i)}function Z1(u,o,i){if(i.length==0)return;let l=o.length-2>>1;if(l<u.length)u[u.length-1]=u[u.length-1].append(i);else{for(;u.length<l;)u.push(Fr.empty);u.push(i)}}function uJ(u,o,i){let l=u.inserted;for(let d=0,m=0,p=0;p<u.sections.length;){let v=u.sections[p++],x=u.sections[p++];if(x<0)d+=v,m+=v;else{let k=d,T=m,R=Fr.empty;for(;k+=v,T+=x,x&&l&&(R=R.append(l[p-2>>1])),!(i||p==u.sections.length||u.sections[p+1]<0);)v=u.sections[p++],x=u.sections[p++];o(d,k,m,T,R),d=k,m=T}}}function dJ(u,o,i,l=!1){let d=[],m=l?[]:null,p=new W_(u),v=new W_(o);for(let x=-1;;)if(p.ins==-1&&v.ins==-1){let k=Math.min(p.len,v.len);Cc(d,k,-1),p.forward(k),v.forward(k)}else if(v.ins>=0&&(p.ins<0||x==p.i||p.off==0&&(v.len<p.len||v.len==p.len&&!i))){let k=v.len;for(Cc(d,v.ins,-1);k;){let T=Math.min(p.len,k);p.ins>=0&&x<p.i&&p.len<=T&&(Cc(d,0,p.ins),m&&Z1(m,d,p.text),x=p.i),p.forward(T),k-=T}v.next()}else if(p.ins>=0){let k=0,T=p.len;for(;T;)if(v.ins==-1){let R=Math.min(T,v.len);k+=R,T-=R,v.forward(R)}else if(v.ins==0&&v.len<T)T-=v.len,v.next();else break;Cc(d,k,x<p.i?p.ins:0),m&&x<p.i&&Z1(m,d,p.text),x=p.i,p.forward(p.len-T)}else{if(p.done&&v.done)return m?rl.createSet(d,m):Cm.create(d);throw new Error("Mismatched change set lengths")}}function rse(u,o,i=!1){let l=[],d=i?[]:null,m=new W_(u),p=new W_(o);for(let v=!1;;){if(m.done&&p.done)return d?rl.createSet(l,d):Cm.create(l);if(m.ins==0)Cc(l,m.len,0,v),m.next();else if(p.len==0&&!p.done)Cc(l,0,p.ins,v),d&&Z1(d,l,p.text),p.next();else{if(m.done||p.done)throw new Error("Mismatched change set lengths");{let x=Math.min(m.len2,p.len),k=l.length;if(m.ins==-1){let T=p.ins==-1?-1:p.off?0:p.ins;Cc(l,x,T,v),d&&T&&Z1(d,l,p.text)}else p.ins==-1?(Cc(l,m.off?0:m.len,x,v),d&&Z1(d,l,m.textBit(x))):(Cc(l,m.off?0:m.len,p.off?0:p.ins,v),d&&!p.off&&Z1(d,l,p.text));v=(m.ins>x||p.ins>=0&&p.len>x)&&(v||l.length>k),m.forward2(x),p.forward(x)}}}}class W_{constructor(o){this.set=o,this.i=0,this.next()}next(){let{sections:o}=this.set;this.i<o.length?(this.len=o[this.i++],this.ins=o[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:o}=this.set,i=this.i-2>>1;return i>=o.length?Fr.empty:o[i]}textBit(o){let{inserted:i}=this.set,l=this.i-2>>1;return l>=i.length&&!o?Fr.empty:i[l].slice(this.off,o==null?void 0:this.off+o)}forward(o){o==this.len?this.next():(this.len-=o,this.off+=o)}forward2(o){this.ins==-1?this.forward(o):o==this.ins?this.next():(this.ins-=o,this.off+=o)}}class iy{constructor(o,i,l){this.from=o,this.to=i,this.flags=l}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let o=this.flags&7;return o==7?null:o}get goalColumn(){let o=this.flags>>6;return o==16777215?void 0:o}map(o,i=-1){let l,d;return this.empty?l=d=o.mapPos(this.from,i):(l=o.mapPos(this.from,1),d=o.mapPos(this.to,-1)),l==this.from&&d==this.to?this:new iy(l,d,this.flags)}extend(o,i=o){if(o<=this.anchor&&i>=this.anchor)return rn.range(o,i);let l=Math.abs(o-this.anchor)>Math.abs(i-this.anchor)?o:i;return rn.range(this.anchor,l)}eq(o,i=!1){return this.anchor==o.anchor&&this.head==o.head&&(!i||!this.empty||this.assoc==o.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(o){if(!o||typeof o.anchor!="number"||typeof o.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return rn.range(o.anchor,o.head)}static create(o,i,l){return new iy(o,i,l)}}class rn{constructor(o,i){this.ranges=o,this.mainIndex=i}map(o,i=-1){return o.empty?this:rn.create(this.ranges.map(l=>l.map(o,i)),this.mainIndex)}eq(o,i=!1){if(this.ranges.length!=o.ranges.length||this.mainIndex!=o.mainIndex)return!1;for(let l=0;l<this.ranges.length;l++)if(!this.ranges[l].eq(o.ranges[l],i))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new rn([this.main],0)}addRange(o,i=!0){return rn.create([o].concat(this.ranges),i?0:this.mainIndex+1)}replaceRange(o,i=this.mainIndex){let l=this.ranges.slice();return l[i]=o,rn.create(l,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(o=>o.toJSON()),main:this.mainIndex}}static fromJSON(o){if(!o||!Array.isArray(o.ranges)||typeof o.main!="number"||o.main>=o.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new rn(o.ranges.map(i=>iy.fromJSON(i)),o.main)}static single(o,i=o){return new rn([rn.range(o,i)],0)}static create(o,i=0){if(o.length==0)throw new RangeError("A selection needs at least one range");for(let l=0,d=0;d<o.length;d++){let m=o[d];if(m.empty?m.from<=l:m.from<l)return rn.normalized(o.slice(),i);l=m.to}return new rn(o,i)}static cursor(o,i=0,l,d){return iy.create(o,o,(i==0?0:i<0?8:16)|(l==null?7:Math.min(6,l))|(d!=null?d:16777215)<<6)}static range(o,i,l,d){let m=(l!=null?l:16777215)<<6|(d==null?7:Math.min(6,d));return i<o?iy.create(i,o,48|m):iy.create(o,i,(i>o?8:0)|m)}static normalized(o,i=0){let l=o[i];o.sort((d,m)=>d.from-m.from),i=o.indexOf(l);for(let d=1;d<o.length;d++){let m=o[d],p=o[d-1];if(m.empty?m.from<=p.to:m.from<p.to){let v=p.from,x=Math.max(m.to,p.to);d<=i&&i--,o.splice(--d,2,m.anchor>m.head?rn.range(x,v):rn.range(v,x))}}return new rn(o,i)}}function ise(u,o){for(let i of u.ranges)if(i.to>o)throw new RangeError("Selection points outside of document")}let dQ=0;class Oo{constructor(o,i,l,d,m){this.combine=o,this.compareInput=i,this.compare=l,this.isStatic=d,this.id=dQ++,this.default=o([]),this.extensions=typeof m=="function"?m(this):m}get reader(){return this}static define(o={}){return new Oo(o.combine||(i=>i),o.compareInput||((i,l)=>i===l),o.compare||(o.combine?(i,l)=>i===l:fQ),!!o.static,o.enables)}of(o){return new F$([],this,0,o)}compute(o,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new F$(o,this,1,i)}computeN(o,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new F$(o,this,2,i)}from(o,i){return i||(i=l=>l),this.compute([o],l=>i(l.field(o)))}}function fQ(u,o){return u==o||u.length==o.length&&u.every((i,l)=>i===o[l])}class F${constructor(o,i,l,d){this.dependencies=o,this.facet=i,this.type=l,this.value=d,this.id=dQ++}dynamicSlot(o){var i;let l=this.value,d=this.facet.compareInput,m=this.id,p=o[m]>>1,v=this.type==2,x=!1,k=!1,T=[];for(let R of this.dependencies)R=="doc"?x=!0:R=="selection"?k=!0:((i=o[R.id])!==null&&i!==void 0?i:1)&1||T.push(o[R.id]);return{create(R){return R.values[p]=l(R),1},update(R,N){if(x&&N.docChanged||k&&(N.docChanged||N.selection)||fJ(R,T)){let $=l(R);if(v?!Ite($,R.values[p],d):!d($,R.values[p]))return R.values[p]=$,1}return 0},reconfigure:(R,N)=>{let $,U=N.config.address[m];if(U!=null){let X=Q$(N,U);if(this.dependencies.every(J=>J instanceof Oo?N.facet(J)===R.facet(J):J instanceof Kl?N.field(J,!1)==R.field(J,!1):!0)||(v?Ite($=l(R),X,d):d($=l(R),X)))return R.values[p]=X,0}else $=l(R);return R.values[p]=$,1}}}}function Ite(u,o,i){if(u.length!=o.length)return!1;for(let l=0;l<u.length;l++)if(!i(u[l],o[l]))return!1;return!0}function fJ(u,o){let i=!1;for(let l of o)L_(u,l)&1&&(i=!0);return i}function Eue(u,o,i){let l=i.map(x=>u[x.id]),d=i.map(x=>x.type),m=l.filter(x=>!(x&1)),p=u[o.id]>>1;function v(x){let k=[];for(let T=0;T<l.length;T++){let R=Q$(x,l[T]);if(d[T]==2)for(let N of R)k.push(N);else k.push(R)}return o.combine(k)}return{create(x){for(let k of l)L_(x,k);return x.values[p]=v(x),1},update(x,k){if(!fJ(x,m))return 0;let T=v(x);return o.compare(T,x.values[p])?0:(x.values[p]=T,1)},reconfigure(x,k){let T=fJ(x,l),R=k.config.facets[o.id],N=k.facet(o);if(R&&!T&&fQ(i,R))return x.values[p]=N,0;let $=v(x);return o.compare($,N)?(x.values[p]=N,0):(x.values[p]=$,1)}}}const Lte=Oo.define({static:!0});class Kl{constructor(o,i,l,d,m){this.id=o,this.createF=i,this.updateF=l,this.compareF=d,this.spec=m,this.provides=void 0}static define(o){let i=new Kl(dQ++,o.create,o.update,o.compare||((l,d)=>l===d),o);return o.provide&&(i.provides=o.provide(i)),i}create(o){let i=o.facet(Lte).find(l=>l.field==this);return((i==null?void 0:i.create)||this.createF)(o)}slot(o){let i=o[this.id]>>1;return{create:l=>(l.values[i]=this.create(l),1),update:(l,d)=>{let m=l.values[i],p=this.updateF(m,d);return this.compareF(m,p)?0:(l.values[i]=p,1)},reconfigure:(l,d)=>d.config.address[this.id]!=null?(l.values[i]=d.field(this),0):(l.values[i]=this.create(l),1)}}init(o){return[this,Lte.of({field:this,create:o})]}get extension(){return this}}const oy={lowest:4,low:3,default:2,high:1,highest:0};function E_(u){return o=>new ase(o,u)}const Ay={highest:E_(oy.highest),high:E_(oy.high),default:E_(oy.default),low:E_(oy.low),lowest:E_(oy.lowest)};class ase{constructor(o,i){this.inner=o,this.prec=i}}class lM{of(o){return new hJ(this,o)}reconfigure(o){return lM.reconfigure.of({compartment:this,extension:o})}get(o){return o.config.compartments.get(this)}}class hJ{constructor(o,i){this.compartment=o,this.inner=i}}class J${constructor(o,i,l,d,m,p){for(this.base=o,this.compartments=i,this.dynamicSlots=l,this.address=d,this.staticValues=m,this.facets=p,this.statusTemplate=[];this.statusTemplate.length<l.length;)this.statusTemplate.push(0)}staticFacet(o){let i=this.address[o.id];return i==null?o.default:this.staticValues[i>>1]}static resolve(o,i,l){let d=[],m=Object.create(null),p=new Map;for(let N of Tue(o,i,p))N instanceof Kl?d.push(N):(m[N.facet.id]||(m[N.facet.id]=[])).push(N);let v=Object.create(null),x=[],k=[];for(let N of d)v[N.id]=k.length<<1,k.push($=>N.slot($));let T=l==null?void 0:l.config.facets;for(let N in m){let $=m[N],U=$[0].facet,X=T&&T[N]||[];if($.every(J=>J.type==0))if(v[U.id]=x.length<<1|1,fQ(X,$))x.push(l.facet(U));else{let J=U.combine($.map(G=>G.value));x.push(l&&U.compare(J,l.facet(U))?l.facet(U):J)}else{for(let J of $)J.type==0?(v[J.id]=x.length<<1|1,x.push(J.value)):(v[J.id]=k.length<<1,k.push(G=>J.dynamicSlot(G)));v[U.id]=k.length<<1,k.push(J=>Eue(J,U,$))}}let R=k.map(N=>N(v));return new J$(o,p,R,v,x,m)}}function Tue(u,o,i){let l=[[],[],[],[],[]],d=new Map;function m(p,v){let x=d.get(p);if(x!=null){if(x<=v)return;let k=l[x].indexOf(p);k>-1&&l[x].splice(k,1),p instanceof hJ&&i.delete(p.compartment)}if(d.set(p,v),Array.isArray(p))for(let k of p)m(k,v);else if(p instanceof hJ){if(i.has(p.compartment))throw new RangeError("Duplicate use of compartment in extensions");let k=o.get(p.compartment)||p.inner;i.set(p.compartment,k),m(k,v)}else if(p instanceof ase)m(p.inner,p.prec);else if(p instanceof Kl)l[v].push(p),p.provides&&m(p.provides,v);else if(p instanceof F$)l[v].push(p),p.facet.extensions&&m(p.facet.extensions,oy.default);else{let k=p.extension;if(!k)throw new Error(`Unrecognized extension value in extension set (${p}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);m(k,v)}}return m(u,oy.default),l.reduce((p,v)=>p.concat(v))}function L_(u,o){if(o&1)return 2;let i=o>>1,l=u.status[i];if(l==4)throw new Error("Cyclic dependency between fields and/or facets");if(l&2)return l;u.status[i]=4;let d=u.computeSlot(u,u.config.dynamicSlots[i]);return u.status[i]=2|d}function Q$(u,o){return o&1?u.config.staticValues[o>>1]:u.values[o>>1]}const lse=Oo.define(),mJ=Oo.define({combine:u=>u.some(o=>o),static:!0}),cse=Oo.define({combine:u=>u.length?u[0]:void 0,static:!0}),use=Oo.define(),dse=Oo.define(),fse=Oo.define(),hse=Oo.define({combine:u=>u.length?u[0]:!1});class Kg{constructor(o,i){this.type=o,this.value=i}static define(){return new Oue}}class Oue{of(o){return new Kg(this,o)}}class Due{constructor(o){this.map=o}of(o){return new Us(this,o)}}class Us{constructor(o,i){this.type=o,this.value=i}map(o){let i=this.type.map(this.value,o);return i===void 0?void 0:i==this.value?this:new Us(this.type,i)}is(o){return this.type==o}static define(o={}){return new Due(o.map||(i=>i))}static mapEffects(o,i){if(!o.length)return o;let l=[];for(let d of o){let m=d.map(i);m&&l.push(m)}return l}}Us.reconfigure=Us.define();Us.appendConfig=Us.define();class il{constructor(o,i,l,d,m,p){this.startState=o,this.changes=i,this.selection=l,this.effects=d,this.annotations=m,this.scrollIntoView=p,this._doc=null,this._state=null,l&&ise(l,i.newLength),m.some(v=>v.type==il.time)||(this.annotations=m.concat(il.time.of(Date.now())))}static create(o,i,l,d,m,p){return new il(o,i,l,d,m,p)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(o){for(let i of this.annotations)if(i.type==o)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(o){let i=this.annotation(il.userEvent);return!!(i&&(i==o||i.length>o.length&&i.slice(0,o.length)==o&&i[o.length]=="."))}}il.time=Kg.define();il.userEvent=Kg.define();il.addToHistory=Kg.define();il.remote=Kg.define();function _ue(u,o){let i=[];for(let l=0,d=0;;){let m,p;if(l<u.length&&(d==o.length||o[d]>=u[l]))m=u[l++],p=u[l++];else if(d<o.length)m=o[d++],p=o[d++];else return i;!i.length||i[i.length-1]<m?i.push(m,p):i[i.length-1]<p&&(i[i.length-1]=p)}}function mse(u,o,i){var l;let d,m,p;return i?(d=o.changes,m=rl.empty(o.changes.length),p=u.changes.compose(o.changes)):(d=o.changes.map(u.changes),m=u.changes.mapDesc(o.changes,!0),p=u.changes.compose(d)),{changes:p,selection:o.selection?o.selection.map(m):(l=u.selection)===null||l===void 0?void 0:l.map(d),effects:Us.mapEffects(u.effects,d).concat(Us.mapEffects(o.effects,m)),annotations:u.annotations.length?u.annotations.concat(o.annotations):o.annotations,scrollIntoView:u.scrollIntoView||o.scrollIntoView}}function gJ(u,o,i){let l=o.selection,d=i2(o.annotations);return o.userEvent&&(d=d.concat(il.userEvent.of(o.userEvent))),{changes:o.changes instanceof rl?o.changes:rl.of(o.changes||[],i,u.facet(cse)),selection:l&&(l instanceof rn?l:rn.single(l.anchor,l.head)),effects:i2(o.effects),annotations:d,scrollIntoView:!!o.scrollIntoView}}function gse(u,o,i){let l=gJ(u,o.length?o[0]:{},u.doc.length);o.length&&o[0].filter===!1&&(i=!1);for(let m=1;m<o.length;m++){o[m].filter===!1&&(i=!1);let p=!!o[m].sequential;l=mse(l,gJ(u,o[m],p?l.changes.newLength:u.doc.length),p)}let d=il.create(u,l.changes,l.selection,l.effects,l.annotations,l.scrollIntoView);return Rue(i?Mue(d):d)}function Mue(u){let o=u.startState,i=!0;for(let d of o.facet(use)){let m=d(u);if(m===!1){i=!1;break}Array.isArray(m)&&(i=i===!0?m:_ue(i,m))}if(i!==!0){let d,m;if(i===!1)m=u.changes.invertedDesc,d=rl.empty(o.doc.length);else{let p=u.changes.filter(i);d=p.changes,m=p.filtered.mapDesc(p.changes).invertedDesc}u=il.create(o,d,u.selection&&u.selection.map(m),Us.mapEffects(u.effects,m),u.annotations,u.scrollIntoView)}let l=o.facet(dse);for(let d=l.length-1;d>=0;d--){let m=l[d](u);m instanceof il?u=m:Array.isArray(m)&&m.length==1&&m[0]instanceof il?u=m[0]:u=gse(o,i2(m),!1)}return u}function Rue(u){let o=u.startState,i=o.facet(fse),l=u;for(let d=i.length-1;d>=0;d--){let m=i[d](u);m&&Object.keys(m).length&&(l=mse(l,gJ(o,m,u.changes.newLength),!0))}return l==u?u:il.create(o,u.changes,u.selection,l.effects,l.annotations,l.scrollIntoView)}const Pue=[];function i2(u){return u==null?Pue:Array.isArray(u)?u:[u]}var Wi=function(u){return u[u.Word=0]="Word",u[u.Space=1]="Space",u[u.Other=2]="Other",u}(Wi||(Wi={}));const Nue=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let pJ;try{pJ=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(u){}function Bue(u){if(pJ)return pJ.test(u);for(let o=0;o<u.length;o++){let i=u[o];if(/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||Nue.test(i)))return!0}return!1}function Fue(u){return o=>{if(!/\S/.test(o))return Wi.Space;if(Bue(o))return Wi.Word;for(let i=0;i<u.length;i++)if(o.indexOf(u[i])>-1)return Wi.Word;return Wi.Other}}class ur{constructor(o,i,l,d,m,p){this.config=o,this.doc=i,this.selection=l,this.values=d,this.status=o.statusTemplate.slice(),this.computeSlot=m,p&&(p._state=this);for(let v=0;v<this.config.dynamicSlots.length;v++)L_(this,v<<1);this.computeSlot=null}field(o,i=!0){let l=this.config.address[o.id];if(l==null){if(i)throw new RangeError("Field is not present in this state");return}return L_(this,l),Q$(this,l)}update(...o){return gse(this,o,!0)}applyTransaction(o){let i=this.config,{base:l,compartments:d}=i;for(let v of o.effects)v.is(lM.reconfigure)?(i&&(d=new Map,i.compartments.forEach((x,k)=>d.set(k,x)),i=null),d.set(v.value.compartment,v.value.extension)):v.is(Us.reconfigure)?(i=null,l=v.value):v.is(Us.appendConfig)&&(i=null,l=i2(l).concat(v.value));let m;i?m=o.startState.values.slice():(i=J$.resolve(l,d,this),m=new ur(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(x,k)=>k.reconfigure(x,this),null).values);let p=o.startState.facet(mJ)?o.newSelection:o.newSelection.asSingle();new ur(i,o.newDoc,p,m,(v,x)=>x.update(v,o),o)}replaceSelection(o){return typeof o=="string"&&(o=this.toText(o)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:o},range:rn.cursor(i.from+o.length)}))}changeByRange(o){let i=this.selection,l=o(i.ranges[0]),d=this.changes(l.changes),m=[l.range],p=i2(l.effects);for(let v=1;v<i.ranges.length;v++){let x=o(i.ranges[v]),k=this.changes(x.changes),T=k.map(d);for(let N=0;N<v;N++)m[N]=m[N].map(T);let R=d.mapDesc(k,!0);m.push(x.range.map(R)),d=d.compose(T),p=Us.mapEffects(p,T).concat(Us.mapEffects(i2(x.effects),R))}return{changes:d,selection:rn.create(m,i.mainIndex),effects:p}}changes(o=[]){return o instanceof rl?o:rl.of(o,this.doc.length,this.facet(ur.lineSeparator))}toText(o){return Fr.of(o.split(this.facet(ur.lineSeparator)||cJ))}sliceDoc(o=0,i=this.doc.length){return this.doc.sliceString(o,i,this.lineBreak)}facet(o){let i=this.config.address[o.id];return i==null?o.default:(L_(this,i),Q$(this,i))}toJSON(o){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(o)for(let l in o){let d=o[l];d instanceof Kl&&this.config.address[d.id]!=null&&(i[l]=d.spec.toJSON(this.field(o[l]),this))}return i}static fromJSON(o,i={},l){if(!o||typeof o.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let d=[];if(l){for(let m in l)if(Object.prototype.hasOwnProperty.call(o,m)){let p=l[m],v=o[m];d.push(p.init(x=>p.spec.fromJSON(v,x)))}}return ur.create({doc:o.doc,selection:rn.fromJSON(o.selection),extensions:i.extensions?d.concat([i.extensions]):d})}static create(o={}){let i=J$.resolve(o.extensions||[],new Map),l=o.doc instanceof Fr?o.doc:Fr.of((o.doc||"").split(i.staticFacet(ur.lineSeparator)||cJ)),d=o.selection?o.selection instanceof rn?o.selection:rn.single(o.selection.anchor,o.selection.head):rn.single(0);return ise(d,l.length),i.staticFacet(mJ)||(d=d.asSingle()),new ur(i,l,d,i.dynamicSlots.map(()=>null),(m,p)=>p.create(m),null)}get tabSize(){return this.facet(ur.tabSize)}get lineBreak(){return this.facet(ur.lineSeparator)||`
`}get readOnly(){return this.facet(hse)}phrase(o,...i){for(let l of this.facet(ur.phrases))if(Object.prototype.hasOwnProperty.call(l,o)){o=l[o];break}return i.length&&(o=o.replace(/\$(\$|\d*)/g,(l,d)=>{if(d=="$")return"$";let m=+(d||1);return!m||m>i.length?l:i[m-1]})),o}languageDataAt(o,i,l=-1){let d=[];for(let m of this.facet(lse))for(let p of m(this,i,l))Object.prototype.hasOwnProperty.call(p,o)&&d.push(p[o]);return d}charCategorizer(o){return Fue(this.languageDataAt("wordChars",o).join(""))}wordAt(o){let{text:i,from:l,length:d}=this.doc.lineAt(o),m=this.charCategorizer(o),p=o-l,v=o-l;for(;p>0;){let x=Zl(i,p,!1);if(m(i.slice(x,p))!=Wi.Word)break;p=x}for(;v<d;){let x=Zl(i,v);if(m(i.slice(v,x))!=Wi.Word)break;v=x}return p==v?null:rn.range(p+l,v+l)}}ur.allowMultipleSelections=mJ;ur.tabSize=Oo.define({combine:u=>u.length?u[0]:4});ur.lineSeparator=cse;ur.readOnly=hse;ur.phrases=Oo.define({compare(u,o){let i=Object.keys(u),l=Object.keys(o);return i.length==l.length&&i.every(d=>u[d]==o[d])}});ur.languageData=lse;ur.changeFilter=use;ur.transactionFilter=dse;ur.transactionExtender=fse;lM.reconfigure=Us.define();function km(u,o,i={}){let l={};for(let d of u)for(let m of Object.keys(d)){let p=d[m],v=l[m];if(v===void 0)l[m]=p;else if(!(v===p||p===void 0))if(Object.hasOwnProperty.call(i,m))l[m]=i[m](v,p);else throw new Error("Config merge conflict for field "+m)}for(let d in o)l[d]===void 0&&(l[d]=o[d]);return l}class by{eq(o){return this==o}range(o,i=o){return bJ.create(o,i,this)}}by.prototype.startSide=by.prototype.endSide=0;by.prototype.point=!1;by.prototype.mapMode=qc.TrackDel;let bJ=class pse{constructor(o,i,l){this.from=o,this.to=i,this.value=l}static create(o,i,l){return new pse(o,i,l)}};function vJ(u,o){return u.from-o.from||u.value.startSide-o.value.startSide}class hQ{constructor(o,i,l,d){this.from=o,this.to=i,this.value=l,this.maxPoint=d}get length(){return this.to[this.to.length-1]}findIndex(o,i,l,d=0){let m=l?this.to:this.from;for(let p=d,v=m.length;;){if(p==v)return p;let x=p+v>>1,k=m[x]-o||(l?this.value[x].endSide:this.value[x].startSide)-i;if(x==p)return k>=0?p:v;k>=0?v=x:p=x+1}}between(o,i,l,d){for(let m=this.findIndex(i,-1e9,!0),p=this.findIndex(l,1e9,!1,m);m<p;m++)if(d(this.from[m]+o,this.to[m]+o,this.value[m])===!1)return!1}map(o,i){let l=[],d=[],m=[],p=-1,v=-1;for(let x=0;x<this.value.length;x++){let k=this.value[x],T=this.from[x]+o,R=this.to[x]+o,N,$;if(T==R){let U=i.mapPos(T,k.startSide,k.mapMode);if(U==null||(N=$=U,k.startSide!=k.endSide&&($=i.mapPos(T,k.endSide),$<N)))continue}else if(N=i.mapPos(T,k.startSide),$=i.mapPos(R,k.endSide),N>$||N==$&&k.startSide>0&&k.endSide<=0)continue;($-N||k.endSide-k.startSide)<0||(p<0&&(p=N),k.point&&(v=Math.max(v,$-N)),l.push(k),d.push(N-p),m.push($-p))}return{mapped:l.length?new hQ(d,m,l,v):null,pos:p}}}class xr{constructor(o,i,l,d){this.chunkPos=o,this.chunk=i,this.nextLayer=l,this.maxPoint=d}static create(o,i,l,d){return new xr(o,i,l,d)}get length(){let o=this.chunk.length-1;return o<0?0:Math.max(this.chunkEnd(o),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let o=this.nextLayer.size;for(let i of this.chunk)o+=i.value.length;return o}chunkEnd(o){return this.chunkPos[o]+this.chunk[o].length}update(o){let{add:i=[],sort:l=!1,filterFrom:d=0,filterTo:m=this.length}=o,p=o.filter;if(i.length==0&&!p)return this;if(l&&(i=i.slice().sort(vJ)),this.isEmpty)return i.length?xr.of(i):this;let v=new bse(this,null,-1).goto(0),x=0,k=[],T=new t0;for(;v.value||x<i.length;)if(x<i.length&&(v.from-i[x].from||v.startSide-i[x].value.startSide)>=0){let R=i[x++];T.addInner(R.from,R.to,R.value)||k.push(R)}else v.rangeIndex==1&&v.chunkIndex<this.chunk.length&&(x==i.length||this.chunkEnd(v.chunkIndex)<i[x].from)&&(!p||d>this.chunkEnd(v.chunkIndex)||m<this.chunkPos[v.chunkIndex])&&T.addChunk(this.chunkPos[v.chunkIndex],this.chunk[v.chunkIndex])?v.nextChunk():((!p||d>v.to||m<v.from||p(v.from,v.to,v.value))&&(T.addInner(v.from,v.to,v.value)||k.push(bJ.create(v.from,v.to,v.value))),v.next());return T.finishInner(this.nextLayer.isEmpty&&!k.length?xr.empty:this.nextLayer.update({add:k,filter:p,filterFrom:d,filterTo:m}))}map(o){if(o.empty||this.isEmpty)return this;let i=[],l=[],d=-1;for(let p=0;p<this.chunk.length;p++){let v=this.chunkPos[p],x=this.chunk[p],k=o.touchesRange(v,v+x.length);if(k===!1)d=Math.max(d,x.maxPoint),i.push(x),l.push(o.mapPos(v));else if(k===!0){let{mapped:T,pos:R}=x.map(v,o);T&&(d=Math.max(d,T.maxPoint),i.push(T),l.push(R))}}let m=this.nextLayer.map(o);return i.length==0?m:new xr(l,i,m||xr.empty,d)}between(o,i,l){if(!this.isEmpty){for(let d=0;d<this.chunk.length;d++){let m=this.chunkPos[d],p=this.chunk[d];if(i>=m&&o<=m+p.length&&p.between(m,o-m,i-m,l)===!1)return}this.nextLayer.between(o,i,l)}}iter(o=0){return j_.from([this]).goto(o)}get isEmpty(){return this.nextLayer==this}static iter(o,i=0){return j_.from(o).goto(i)}static compare(o,i,l,d,m=-1){let p=o.filter(R=>R.maxPoint>0||!R.isEmpty&&R.maxPoint>=m),v=i.filter(R=>R.maxPoint>0||!R.isEmpty&&R.maxPoint>=m),x=$te(p,v,l),k=new T_(p,x,m),T=new T_(v,x,m);l.iterGaps((R,N,$)=>Hte(k,R,T,N,$,d)),l.empty&&l.length==0&&Hte(k,0,T,0,0,d)}static eq(o,i,l=0,d){d==null&&(d=999999999);let m=o.filter(T=>!T.isEmpty&&i.indexOf(T)<0),p=i.filter(T=>!T.isEmpty&&o.indexOf(T)<0);if(m.length!=p.length)return!1;if(!m.length)return!0;let v=$te(m,p),x=new T_(m,v,0).goto(l),k=new T_(p,v,0).goto(l);for(;;){if(x.to!=k.to||!yJ(x.active,k.active)||x.point&&(!k.point||!x.point.eq(k.point)))return!1;if(x.to>d)return!0;x.next(),k.next()}}static spans(o,i,l,d,m=-1){let p=new T_(o,null,m).goto(i),v=i,x=p.openStart;for(;;){let k=Math.min(p.to,l);if(p.point){let T=p.activeForPoint(p.to),R=p.pointFrom<i?T.length+1:p.point.startSide<0?T.length:Math.min(T.length,x);d.point(v,k,p.point,T,R,p.pointRank),x=Math.min(p.openEnd(k),T.length)}else k>v&&(d.span(v,k,p.active,x),x=p.openEnd(k));if(p.to>l)return x+(p.point&&p.to>l?1:0);v=p.to,p.next()}}static of(o,i=!1){let l=new t0;for(let d of o instanceof bJ?[o]:i?Iue(o):o)l.add(d.from,d.to,d.value);return l.finish()}static join(o){if(!o.length)return xr.empty;let i=o[o.length-1];for(let l=o.length-2;l>=0;l--)for(let d=o[l];d!=xr.empty;d=d.nextLayer)i=new xr(d.chunkPos,d.chunk,i,Math.max(d.maxPoint,i.maxPoint));return i}}xr.empty=new xr([],[],null,-1);function Iue(u){if(u.length>1)for(let o=u[0],i=1;i<u.length;i++){let l=u[i];if(vJ(o,l)>0)return u.slice().sort(vJ);o=l}return u}xr.empty.nextLayer=xr.empty;class t0{finishChunk(o){this.chunks.push(new hQ(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,o&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(o,i,l){this.addInner(o,i,l)||(this.nextLayer||(this.nextLayer=new t0)).add(o,i,l)}addInner(o,i,l){let d=o-this.lastTo||l.startSide-this.last.endSide;if(d<=0&&(o-this.lastFrom||l.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return d<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=o),this.from.push(o-this.chunkStart),this.to.push(i-this.chunkStart),this.last=l,this.lastFrom=o,this.lastTo=i,this.value.push(l),l.point&&(this.maxPoint=Math.max(this.maxPoint,i-o)),!0)}addChunk(o,i){if((o-this.lastTo||i.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,i.maxPoint),this.chunks.push(i),this.chunkPos.push(o);let l=i.value.length-1;return this.last=i.value[l],this.lastFrom=i.from[l]+o,this.lastTo=i.to[l]+o,!0}finish(){return this.finishInner(xr.empty)}finishInner(o){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return o;let i=xr.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(o):o,this.setMaxPoint);return this.from=null,i}}function $te(u,o,i){let l=new Map;for(let m of u)for(let p=0;p<m.chunk.length;p++)m.chunk[p].maxPoint<=0&&l.set(m.chunk[p],m.chunkPos[p]);let d=new Set;for(let m of o)for(let p=0;p<m.chunk.length;p++){let v=l.get(m.chunk[p]);v!=null&&(i?i.mapPos(v):v)==m.chunkPos[p]&&!(i!=null&&i.touchesRange(v,v+m.chunk[p].length))&&d.add(m.chunk[p])}return d}class bse{constructor(o,i,l,d=0){this.layer=o,this.skip=i,this.minPoint=l,this.rank=d}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(o,i=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(o,i,!1),this}gotoInner(o,i,l){for(;this.chunkIndex<this.layer.chunk.length;){let d=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(d)||this.layer.chunkEnd(this.chunkIndex)<o||d.maxPoint<this.minPoint))break;this.chunkIndex++,l=!1}if(this.chunkIndex<this.layer.chunk.length){let d=this.layer.chunk[this.chunkIndex].findIndex(o-this.layer.chunkPos[this.chunkIndex],i,!0);(!l||this.rangeIndex<d)&&this.setRangeIndex(d)}this.next()}forward(o,i){(this.to-o||this.endSide-i)<0&&this.gotoInner(o,i,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let o=this.layer.chunkPos[this.chunkIndex],i=this.layer.chunk[this.chunkIndex],l=o+i.from[this.rangeIndex];if(this.from=l,this.to=o+i.to[this.rangeIndex],this.value=i.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(o){if(o==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=o}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(o){return this.from-o.from||this.startSide-o.startSide||this.rank-o.rank||this.to-o.to||this.endSide-o.endSide}}class j_{constructor(o){this.heap=o}static from(o,i=null,l=-1){let d=[];for(let m=0;m<o.length;m++)for(let p=o[m];!p.isEmpty;p=p.nextLayer)p.maxPoint>=l&&d.push(new bse(p,i,l,m));return d.length==1?d[0]:new j_(d)}get startSide(){return this.value?this.value.startSide:0}goto(o,i=-1e9){for(let l of this.heap)l.goto(o,i);for(let l=this.heap.length>>1;l>=0;l--)PX(this.heap,l);return this.next(),this}forward(o,i){for(let l of this.heap)l.forward(o,i);for(let l=this.heap.length>>1;l>=0;l--)PX(this.heap,l);(this.to-o||this.value.endSide-i)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let o=this.heap[0];this.from=o.from,this.to=o.to,this.value=o.value,this.rank=o.rank,o.value&&o.next(),PX(this.heap,0)}}}function PX(u,o){for(let i=u[o];;){let l=(o<<1)+1;if(l>=u.length)break;let d=u[l];if(l+1<u.length&&d.compare(u[l+1])>=0&&(d=u[l+1],l++),i.compare(d)<0)break;u[l]=i,u[o]=d,o=l}}class T_{constructor(o,i,l){this.minPoint=l,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=j_.from(o,i,l)}goto(o,i=-1e9){return this.cursor.goto(o,i),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=o,this.endSide=i,this.openStart=-1,this.next(),this}forward(o,i){for(;this.minActive>-1&&(this.activeTo[this.minActive]-o||this.active[this.minActive].endSide-i)<0;)this.removeActive(this.minActive);this.cursor.forward(o,i)}removeActive(o){c$(this.active,o),c$(this.activeTo,o),c$(this.activeRank,o),this.minActive=Vte(this.active,this.activeTo)}addActive(o){let i=0,{value:l,to:d,rank:m}=this.cursor;for(;i<this.activeRank.length&&(m-this.activeRank[i]||d-this.activeTo[i])>0;)i++;u$(this.active,i,l),u$(this.activeTo,i,d),u$(this.activeRank,i,m),o&&u$(o,i,this.cursor.from),this.minActive=Vte(this.active,this.activeTo)}next(){let o=this.to,i=this.point;this.point=null;let l=this.openStart<0?[]:null;for(;;){let d=this.minActive;if(d>-1&&(this.activeTo[d]-this.cursor.from||this.active[d].endSide-this.cursor.startSide)<0){if(this.activeTo[d]>o){this.to=this.activeTo[d],this.endSide=this.active[d].endSide;break}this.removeActive(d),l&&c$(l,d)}else if(this.cursor.value)if(this.cursor.from>o){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let m=this.cursor.value;if(!m.point)this.addActive(l),this.cursor.next();else if(i&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=m,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=m.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(l){this.openStart=0;for(let d=l.length-1;d>=0&&l[d]<o;d--)this.openStart++}}activeForPoint(o){if(!this.active.length)return this.active;let i=[];for(let l=this.active.length-1;l>=0&&!(this.activeRank[l]<this.pointRank);l--)(this.activeTo[l]>o||this.activeTo[l]==o&&this.active[l].endSide>=this.point.endSide)&&i.push(this.active[l]);return i.reverse()}openEnd(o){let i=0;for(let l=this.activeTo.length-1;l>=0&&this.activeTo[l]>o;l--)i++;return i}}function Hte(u,o,i,l,d,m){u.goto(o),i.goto(l);let p=l+d,v=l,x=l-o;for(;;){let k=u.to+x-i.to||u.endSide-i.endSide,T=k<0?u.to+x:i.to,R=Math.min(T,p);if(u.point||i.point?u.point&&i.point&&(u.point==i.point||u.point.eq(i.point))&&yJ(u.activeForPoint(u.to),i.activeForPoint(i.to))||m.comparePoint(v,R,u.point,i.point):R>v&&!yJ(u.active,i.active)&&m.compareRange(v,R,u.active,i.active),T>p)break;v=T,k<=0&&u.next(),k>=0&&i.next()}}function yJ(u,o){if(u.length!=o.length)return!1;for(let i=0;i<u.length;i++)if(u[i]!=o[i]&&!u[i].eq(o[i]))return!1;return!0}function c$(u,o){for(let i=o,l=u.length-1;i<l;i++)u[i]=u[i+1];u.pop()}function u$(u,o,i){for(let l=u.length-1;l>=o;l--)u[l+1]=u[l];u[o]=i}function Vte(u,o){let i=-1,l=1e9;for(let d=0;d<o.length;d++)(o[d]-l||u[d].endSide-u[i].endSide)<0&&(i=d,l=o[d]);return i}function S2(u,o,i=u.length){let l=0;for(let d=0;d<i;)u.charCodeAt(d)==9?(l+=o-l%o,d++):(l++,d=Zl(u,d));return l}function wJ(u,o,i,l){for(let d=0,m=0;;){if(m>=o)return d;if(d==u.length)break;m+=u.charCodeAt(d)==9?i-m%i:1,d=Zl(u,d)}return l===!0?-1:u.length}const xJ="ͼ",zte=typeof Symbol=="undefined"?"__"+xJ:Symbol.for(xJ),SJ=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Ute=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class n0{constructor(o,i){this.rules=[];let{finish:l}=i||{};function d(p){return/^@/.test(p)?[p]:p.split(/,\s*/)}function m(p,v,x,k){let T=[],R=/^@(\w+)\b/.exec(p[0]),N=R&&R[1]=="keyframes";if(R&&v==null)return x.push(p[0]+";");for(let $ in v){let U=v[$];if(/&/.test($))m($.split(/,\s*/).map(X=>p.map(J=>X.replace(/&/,J))).reduce((X,J)=>X.concat(J)),U,x);else if(U&&typeof U=="object"){if(!R)throw new RangeError("The value of a property ("+$+") should be a primitive value.");m(d($),U,T,N)}else U!=null&&T.push($.replace(/_.*/,"").replace(/[A-Z]/g,X=>"-"+X.toLowerCase())+": "+U+";")}(T.length||N)&&x.push((l&&!R&&!k?p.map(l):p).join(", ")+" {"+T.join(" ")+"}")}for(let p in o)m(d(p),o[p],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let o=Ute[zte]||1;return Ute[zte]=o+1,xJ+o.toString(36)}static mount(o,i,l){let d=o[SJ],m=l&&l.nonce;d?m&&d.setNonce(m):d=new Lue(o,m),d.mount(Array.isArray(i)?i:[i],o)}}let Wte=new Map;class Lue{constructor(o,i){let l=o.ownerDocument||o,d=l.defaultView;if(!o.head&&o.adoptedStyleSheets&&d.CSSStyleSheet){let m=Wte.get(l);if(m)return o[SJ]=m;this.sheet=new d.CSSStyleSheet,Wte.set(l,this)}else this.styleTag=l.createElement("style"),i&&this.styleTag.setAttribute("nonce",i);this.modules=[],o[SJ]=this}mount(o,i){let l=this.sheet,d=0,m=0;for(let p=0;p<o.length;p++){let v=o[p],x=this.modules.indexOf(v);if(x<m&&x>-1&&(this.modules.splice(x,1),m--,x=-1),x==-1){if(this.modules.splice(m++,0,v),l)for(let k=0;k<v.rules.length;k++)l.insertRule(v.rules[k],d++)}else{for(;m<x;)d+=this.modules[m++].rules.length;d+=v.rules.length,m++}}if(l)i.adoptedStyleSheets.indexOf(this.sheet)<0&&(i.adoptedStyleSheets=[this.sheet,...i.adoptedStyleSheets]);else{let p="";for(let x=0;x<this.modules.length;x++)p+=this.modules[x].getRules()+`
`;this.styleTag.textContent=p;let v=i.head||i;this.styleTag.parentNode!=v&&v.insertBefore(this.styleTag,v.firstChild)}}setNonce(o){this.styleTag&&this.styleTag.getAttribute("nonce")!=o&&this.styleTag.setAttribute("nonce",o)}}var o0={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Z_={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},$ue=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),Hue=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Wl=0;Wl<10;Wl++)o0[48+Wl]=o0[96+Wl]=String(Wl);for(var Wl=1;Wl<=24;Wl++)o0[Wl+111]="F"+Wl;for(var Wl=65;Wl<=90;Wl++)o0[Wl]=String.fromCharCode(Wl+32),Z_[Wl]=String.fromCharCode(Wl);for(var NX in o0)Z_.hasOwnProperty(NX)||(Z_[NX]=o0[NX]);function Vue(u){var o=$ue&&u.metaKey&&u.shiftKey&&!u.ctrlKey&&!u.altKey||Hue&&u.shiftKey&&u.key&&u.key.length==1||u.key=="Unidentified",i=!o&&u.key||(u.shiftKey?Z_:o0)[u.keyCode]||u.key||"Unidentified";return i=="Esc"&&(i="Escape"),i=="Del"&&(i="Delete"),i=="Left"&&(i="ArrowLeft"),i=="Up"&&(i="ArrowUp"),i=="Right"&&(i="ArrowRight"),i=="Down"&&(i="ArrowDown"),i}function e6(u){let o;return u.nodeType==11?o=u.getSelection?u:u.ownerDocument:o=u,o.getSelection()}function CJ(u,o){return o?u==o||u.contains(o.nodeType!=1?o.parentNode:o):!1}function zue(u){let o=u.activeElement;for(;o&&o.shadowRoot;)o=o.shadowRoot.activeElement;return o}function I$(u,o){if(!o.anchorNode)return!1;try{return CJ(u,o.anchorNode)}catch(i){return!1}}function m2(u){return u.nodeType==3?yy(u,0,u.nodeValue.length).getClientRects():u.nodeType==1?u.getClientRects():[]}function $_(u,o,i,l){return i?jte(u,o,i,l,-1)||jte(u,o,i,l,1):!1}function vy(u){for(var o=0;;o++)if(u=u.previousSibling,!u)return o}function t6(u){return u.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(u.nodeName)}function jte(u,o,i,l,d){for(;;){if(u==i&&o==l)return!0;if(o==(d<0?0:Zg(u))){if(u.nodeName=="DIV")return!1;let m=u.parentNode;if(!m||m.nodeType!=1)return!1;o=vy(u)+(d<0?0:1),u=m}else if(u.nodeType==1){if(u=u.childNodes[o+(d<0?-1:0)],u.nodeType==1&&u.contentEditable=="false")return!1;o=d<0?Zg(u):0}else return!1}}function Zg(u){return u.nodeType==3?u.nodeValue.length:u.childNodes.length}function A6(u,o){let i=o?u.left:u.right;return{left:i,right:i,top:u.top,bottom:u.bottom}}function Uue(u){let o=u.visualViewport;return o?{left:0,right:o.width,top:0,bottom:o.height}:{left:0,right:u.innerWidth,top:0,bottom:u.innerHeight}}function vse(u,o){let i=o.width/u.offsetWidth,l=o.height/u.offsetHeight;return(i>.995&&i<1.005||!isFinite(i)||Math.abs(o.width-u.offsetWidth)<1)&&(i=1),(l>.995&&l<1.005||!isFinite(l)||Math.abs(o.height-u.offsetHeight)<1)&&(l=1),{scaleX:i,scaleY:l}}function Wue(u,o,i,l,d,m,p,v){let x=u.ownerDocument,k=x.defaultView||window;for(let T=u,R=!1;T&&!R;)if(T.nodeType==1){let N,$=T==x.body,U=1,X=1;if($)N=Uue(k);else{if(/^(fixed|sticky)$/.test(getComputedStyle(T).position)&&(R=!0),T.scrollHeight<=T.clientHeight&&T.scrollWidth<=T.clientWidth){T=T.assignedSlot||T.parentNode;continue}let le=T.getBoundingClientRect();({scaleX:U,scaleY:X}=vse(T,le)),N={left:le.left,right:le.left+T.clientWidth*U,top:le.top,bottom:le.top+T.clientHeight*X}}let J=0,G=0;if(d=="nearest")o.top<N.top?(G=-(N.top-o.top+p),i>0&&o.bottom>N.bottom+G&&(G=o.bottom-N.bottom+G+p)):o.bottom>N.bottom&&(G=o.bottom-N.bottom+p,i<0&&o.top-G<N.top&&(G=-(N.top+G-o.top+p)));else{let le=o.bottom-o.top,Z=N.bottom-N.top;G=(d=="center"&&le<=Z?o.top+le/2-Z/2:d=="start"||d=="center"&&i<0?o.top-p:o.bottom-Z+p)-N.top}if(l=="nearest"?o.left<N.left?(J=-(N.left-o.left+m),i>0&&o.right>N.right+J&&(J=o.right-N.right+J+m)):o.right>N.right&&(J=o.right-N.right+m,i<0&&o.left<N.left+J&&(J=-(N.left+J-o.left+m))):J=(l=="center"?o.left+(o.right-o.left)/2-(N.right-N.left)/2:l=="start"==v?o.left-m:o.right-(N.right-N.left)+m)-N.left,J||G)if($)k.scrollBy(J,G);else{let le=0,Z=0;if(G){let be=T.scrollTop;T.scrollTop+=G/X,Z=(T.scrollTop-be)*X}if(J){let be=T.scrollLeft;T.scrollLeft+=J/U,le=(T.scrollLeft-be)*U}o={left:o.left-le,top:o.top-Z,right:o.right-le,bottom:o.bottom-Z},le&&Math.abs(le-J)<1&&(l="nearest"),Z&&Math.abs(Z-G)<1&&(d="nearest")}if($)break;T=T.assignedSlot||T.parentNode}else if(T.nodeType==11)T=T.host;else break}function jue(u){let o=u.ownerDocument;for(let i=u.parentNode;i&&i!=o.body;)if(i.nodeType==1){if(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth)return i;i=i.assignedSlot||i.parentNode}else if(i.nodeType==11)i=i.host;else break;return null}class Zue{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(o){return this.anchorNode==o.anchorNode&&this.anchorOffset==o.anchorOffset&&this.focusNode==o.focusNode&&this.focusOffset==o.focusOffset}setRange(o){let{anchorNode:i,focusNode:l}=o;this.set(i,Math.min(o.anchorOffset,i?Zg(i):0),l,Math.min(o.focusOffset,l?Zg(l):0))}set(o,i,l,d){this.anchorNode=o,this.anchorOffset=i,this.focusNode=l,this.focusOffset=d}}let XC=null;function yse(u){if(u.setActive)return u.setActive();if(XC)return u.focus(XC);let o=[];for(let i=u;i&&(o.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(u.focus(XC==null?{get preventScroll(){return XC={preventScroll:!0},!0}}:void 0),!XC){XC=!1;for(let i=0;i<o.length;){let l=o[i++],d=o[i++],m=o[i++];l.scrollTop!=d&&(l.scrollTop=d),l.scrollLeft!=m&&(l.scrollLeft=m)}}}let Zte;function yy(u,o,i=o){let l=Zte||(Zte=document.createRange());return l.setEnd(u,i),l.setStart(u,o),l}function a2(u,o,i,l){let d={key:o,code:o,keyCode:i,which:i,cancelable:!0};l&&({altKey:d.altKey,ctrlKey:d.ctrlKey,shiftKey:d.shiftKey,metaKey:d.metaKey}=l);let m=new KeyboardEvent("keydown",d);m.synthetic=!0,u.dispatchEvent(m);let p=new KeyboardEvent("keyup",d);return p.synthetic=!0,u.dispatchEvent(p),m.defaultPrevented||p.defaultPrevented}function que(u){for(;u;){if(u&&(u.nodeType==9||u.nodeType==11&&u.host))return u;u=u.assignedSlot||u.parentNode}return null}function wse(u){for(;u.attributes.length;)u.removeAttributeNode(u.attributes[0])}function Gue(u,o){let i=o.focusNode,l=o.focusOffset;if(!i||o.anchorNode!=i||o.anchorOffset!=l)return!1;for(l=Math.min(l,Zg(i));;)if(l){if(i.nodeType!=1)return!1;let d=i.childNodes[l-1];d.contentEditable=="false"?l--:(i=d,l=Zg(i))}else{if(i==u)return!0;l=vy(i),i=i.parentNode}}function xse(u){return u.scrollTop>Math.max(1,u.scrollHeight-u.clientHeight-4)}function Sse(u,o){for(let i=u,l=o;;){if(i.nodeType==3&&l>0)return{node:i,offset:l};if(i.nodeType==1&&l>0){if(i.contentEditable=="false")return null;i=i.childNodes[l-1],l=Zg(i)}else if(i.parentNode&&!t6(i))l=vy(i),i=i.parentNode;else return null}}function Cse(u,o){for(let i=u,l=o;;){if(i.nodeType==3&&l<i.nodeValue.length)return{node:i,offset:l};if(i.nodeType==1&&l<i.childNodes.length){if(i.contentEditable=="false")return null;i=i.childNodes[l],l=0}else if(i.parentNode&&!t6(i))l=vy(i)+1,i=i.parentNode;else return null}}class kc{constructor(o,i,l=!0){this.node=o,this.offset=i,this.precise=l}static before(o,i){return new kc(o.parentNode,vy(o),i)}static after(o,i){return new kc(o.parentNode,vy(o)+1,i)}}const mQ=[];class ci{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(o){let i=this.posAtStart;for(let l of this.children){if(l==o)return i;i+=l.length+l.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(o){return this.posBefore(o)+o.length}sync(o,i){if(this.flags&2){let l=this.dom,d=null,m;for(let p of this.children){if(p.flags&7){if(!p.dom&&(m=d?d.nextSibling:l.firstChild)){let v=ci.get(m);(!v||!v.parent&&v.canReuseDOM(p))&&p.reuseDOM(m)}p.sync(o,i),p.flags&=-8}if(m=d?d.nextSibling:l.firstChild,i&&!i.written&&i.node==l&&m!=p.dom&&(i.written=!0),p.dom.parentNode==l)for(;m&&m!=p.dom;)m=qte(m);else l.insertBefore(p.dom,m);d=p.dom}for(m=d?d.nextSibling:l.firstChild,m&&i&&i.node==l&&(i.written=!0);m;)m=qte(m)}else if(this.flags&1)for(let l of this.children)l.flags&7&&(l.sync(o,i),l.flags&=-8)}reuseDOM(o){}localPosFromDOM(o,i){let l;if(o==this.dom)l=this.dom.childNodes[i];else{let d=Zg(o)==0?0:i==0?-1:1;for(;;){let m=o.parentNode;if(m==this.dom)break;d==0&&m.firstChild!=m.lastChild&&(o==m.firstChild?d=-1:d=1),o=m}d<0?l=o:l=o.nextSibling}if(l==this.dom.firstChild)return 0;for(;l&&!ci.get(l);)l=l.nextSibling;if(!l)return this.length;for(let d=0,m=0;;d++){let p=this.children[d];if(p.dom==l)return m;m+=p.length+p.breakAfter}}domBoundsAround(o,i,l=0){let d=-1,m=-1,p=-1,v=-1;for(let x=0,k=l,T=l;x<this.children.length;x++){let R=this.children[x],N=k+R.length;if(k<o&&N>i)return R.domBoundsAround(o,i,k);if(N>=o&&d==-1&&(d=x,m=k),k>i&&R.dom.parentNode==this.dom){p=x,v=T;break}T=N,k=N+R.breakAfter}return{from:m,to:v<0?l+this.length:v,startDOM:(d?this.children[d-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:p<this.children.length&&p>=0?this.children[p].dom:null}}markDirty(o=!1){this.flags|=2,this.markParentsDirty(o)}markParentsDirty(o){for(let i=this.parent;i;i=i.parent){if(o&&(i.flags|=2),i.flags&1)return;i.flags|=1,o=!1}}setParent(o){this.parent!=o&&(this.parent=o,this.flags&7&&this.markParentsDirty(!0))}setDOM(o){this.dom!=o&&(this.dom&&(this.dom.cmView=null),this.dom=o,o.cmView=this)}get rootView(){for(let o=this;;){let i=o.parent;if(!i)return o;o=i}}replaceChildren(o,i,l=mQ){this.markDirty();for(let d=o;d<i;d++){let m=this.children[d];m.parent==this&&l.indexOf(m)<0&&m.destroy()}this.children.splice(o,i-o,...l);for(let d=0;d<l.length;d++)l[d].setParent(this)}ignoreMutation(o){return!1}ignoreEvent(o){return!1}childCursor(o=this.length){return new kse(this.children,o,this.children.length)}childPos(o,i=1){return this.childCursor().findPos(o,i)}toString(){let o=this.constructor.name.replace("View","");return o+(this.children.length?"("+this.children.join()+")":this.length?"["+(o=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(o){return o.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(o,i,l,d,m,p){return!1}become(o){return!1}canReuseDOM(o){return o.constructor==this.constructor&&!((this.flags|o.flags)&8)}getSide(){return 0}destroy(){for(let o of this.children)o.parent==this&&o.destroy();this.parent=null}}ci.prototype.breakAfter=0;function qte(u){let o=u.nextSibling;return u.parentNode.removeChild(u),o}class kse{constructor(o,i,l){this.children=o,this.pos=i,this.i=l,this.off=0}findPos(o,i=1){for(;;){if(o>this.pos||o==this.pos&&(i>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=o-this.pos,this;let l=this.children[--this.i];this.pos-=l.length+l.breakAfter}}}function Ase(u,o,i,l,d,m,p,v,x){let{children:k}=u,T=k.length?k[o]:null,R=m.length?m[m.length-1]:null,N=R?R.breakAfter:p;if(!(o==l&&T&&!p&&!N&&m.length<2&&T.merge(i,d,m.length?R:null,i==0,v,x))){if(l<k.length){let $=k[l];$&&(d<$.length||$.breakAfter&&(R!=null&&R.breakAfter))?(o==l&&($=$.split(d),d=0),!N&&R&&$.merge(0,d,R,!0,0,x)?m[m.length-1]=$:((d||$.children.length&&!$.children[0].length)&&$.merge(0,d,null,!1,0,x),m.push($))):$!=null&&$.breakAfter&&(R?R.breakAfter=1:p=1),l++}for(T&&(T.breakAfter=p,i>0&&(!p&&m.length&&T.merge(i,T.length,m[0],!1,v,0)?T.breakAfter=m.shift().breakAfter:(i<T.length||T.children.length&&T.children[T.children.length-1].length==0)&&T.merge(i,T.length,null,!1,v,0),o++));o<l&&m.length;)if(k[l-1].become(m[m.length-1]))l--,m.pop(),x=m.length?0:v;else if(k[o].become(m[0]))o++,m.shift(),v=m.length?0:x;else break;!m.length&&o&&l<k.length&&!k[o-1].breakAfter&&k[l].merge(0,0,k[o-1],!1,v,x)&&o--,(o<l||m.length)&&u.replaceChildren(o,l,m)}}function Ese(u,o,i,l,d,m){let p=u.childCursor(),{i:v,off:x}=p.findPos(i,1),{i:k,off:T}=p.findPos(o,-1),R=o-i;for(let N of l)R+=N.length;u.length+=R,Ase(u,k,T,v,x,l,0,d,m)}let Sd=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},kJ=typeof document!="undefined"?document:{documentElement:{style:{}}};const AJ=/Edge\/(\d+)/.exec(Sd.userAgent),Tse=/MSIE \d/.test(Sd.userAgent),EJ=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Sd.userAgent),E6=!!(Tse||EJ||AJ),Gte=!E6&&/gecko\/(\d+)/i.test(Sd.userAgent),BX=!E6&&/Chrome\/(\d+)/.exec(Sd.userAgent),Kte="webkitFontSmoothing"in kJ.documentElement.style,Ose=!E6&&/Apple Computer/.test(Sd.vendor),Yte=Ose&&(/Mobile\/\w+/.test(Sd.userAgent)||Sd.maxTouchPoints>2);var To={mac:Yte||/Mac/.test(Sd.platform),windows:/Win/.test(Sd.platform),linux:/Linux|X11/.test(Sd.platform),ie:E6,ie_version:Tse?kJ.documentMode||6:EJ?+EJ[1]:AJ?+AJ[1]:0,gecko:Gte,gecko_version:Gte?+(/Firefox\/(\d+)/.exec(Sd.userAgent)||[0,0])[1]:0,chrome:!!BX,chrome_version:BX?+BX[1]:0,ios:Yte,android:/Android\b/.test(Sd.userAgent),webkit:Kte,safari:Ose,webkit_version:Kte?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:kJ.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Kue=256;class ph extends ci{constructor(o){super(),this.text=o}get length(){return this.text.length}createDOM(o){this.setDOM(o||document.createTextNode(this.text))}sync(o,i){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(i&&i.node==this.dom&&(i.written=!0),this.dom.nodeValue=this.text)}reuseDOM(o){o.nodeType==3&&this.createDOM(o)}merge(o,i,l){return this.flags&8||l&&(!(l instanceof ph)||this.length-(i-o)+l.length>Kue||l.flags&8)?!1:(this.text=this.text.slice(0,o)+(l?l.text:"")+this.text.slice(i),this.markDirty(),!0)}split(o){let i=new ph(this.text.slice(o));return this.text=this.text.slice(0,o),this.markDirty(),i.flags|=this.flags&8,i}localPosFromDOM(o,i){return o==this.dom?i:i?this.text.length:0}domAtPos(o){return new kc(this.dom,o)}domBoundsAround(o,i,l){return{from:l,to:l+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(o,i){return Yue(this.dom,o,i)}}class qg extends ci{constructor(o,i=[],l=0){super(),this.mark=o,this.children=i,this.length=l;for(let d of i)d.setParent(this)}setAttrs(o){if(wse(o),this.mark.class&&(o.className=this.mark.class),this.mark.attrs)for(let i in this.mark.attrs)o.setAttribute(i,this.mark.attrs[i]);return o}canReuseDOM(o){return super.canReuseDOM(o)&&!((this.flags|o.flags)&8)}reuseDOM(o){o.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(o),this.flags|=6)}sync(o,i){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(o,i)}merge(o,i,l,d,m,p){return l&&(!(l instanceof qg&&l.mark.eq(this.mark))||o&&m<=0||i<this.length&&p<=0)?!1:(Ese(this,o,i,l?l.children.slice():[],m-1,p-1),this.markDirty(),!0)}split(o){let i=[],l=0,d=-1,m=0;for(let v of this.children){let x=l+v.length;x>o&&i.push(l<o?v.split(o-l):v),d<0&&l>=o&&(d=m),l=x,m++}let p=this.length-o;return this.length=o,d>-1&&(this.children.length=d,this.markDirty()),new qg(this.mark,i,p)}domAtPos(o){return Dse(this,o)}coordsAt(o,i){return Mse(this,o,i)}}function Yue(u,o,i){let l=u.nodeValue.length;o>l&&(o=l);let d=o,m=o,p=0;o==0&&i<0||o==l&&i>=0?To.chrome||To.gecko||(o?(d--,p=1):m<l&&(m++,p=-1)):i<0?d--:m<l&&m++;let v=yy(u,d,m).getClientRects();if(!v.length)return null;let x=v[(p?p<0:i>=0)?0:v.length-1];return To.safari&&!p&&x.width==0&&(x=Array.prototype.find.call(v,k=>k.width)||x),p?A6(x,p<0):x||null}class q1 extends ci{static create(o,i,l){return new q1(o,i,l)}constructor(o,i,l){super(),this.widget=o,this.length=i,this.side=l,this.prevWidget=null}split(o){let i=q1.create(this.widget,this.length-o,this.side);return this.length-=o,i}sync(o){(!this.dom||!this.widget.updateDOM(this.dom,o))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(o)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(o,i,l,d,m,p){return l&&(!(l instanceof q1)||!this.widget.compare(l.widget)||o>0&&m<=0||i<this.length&&p<=0)?!1:(this.length=o+(l?l.length:0)+(this.length-i),!0)}become(o){return o instanceof q1&&o.side==this.side&&this.widget.constructor==o.widget.constructor?(this.widget.compare(o.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=o.widget,this.length=o.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(o){return this.widget.ignoreEvent(o)}get overrideDOMText(){if(this.length==0)return Fr.empty;let o=this;for(;o.parent;)o=o.parent;let{view:i}=o,l=i&&i.state.doc,d=this.posAtStart;return l?l.slice(d,d+this.length):Fr.empty}domAtPos(o){return(this.length?o==0:this.side>0)?kc.before(this.dom):kc.after(this.dom,o==this.length)}domBoundsAround(){return null}coordsAt(o,i){let l=this.widget.coordsAt(this.dom,o,i);if(l)return l;let d=this.dom.getClientRects(),m=null;if(!d.length)return null;let p=this.side?this.side<0:o>0;for(let v=p?d.length-1:0;m=d[v],!(o>0?v==0:v==d.length-1||m.top<m.bottom);v+=p?-1:1);return A6(m,!p)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class g2 extends ci{constructor(o){super(),this.side=o}get length(){return 0}merge(){return!1}become(o){return o instanceof g2&&o.side==this.side}split(){return new g2(this.side)}sync(){if(!this.dom){let o=document.createElement("img");o.className="cm-widgetBuffer",o.setAttribute("aria-hidden","true"),this.setDOM(o)}}getSide(){return this.side}domAtPos(o){return this.side>0?kc.before(this.dom):kc.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(o){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Fr.empty}get isHidden(){return!0}}ph.prototype.children=q1.prototype.children=g2.prototype.children=mQ;function Dse(u,o){let i=u.dom,{children:l}=u,d=0;for(let m=0;d<l.length;d++){let p=l[d],v=m+p.length;if(!(v==m&&p.getSide()<=0)){if(o>m&&o<v&&p.dom.parentNode==i)return p.domAtPos(o-m);if(o<=m)break;m=v}}for(let m=d;m>0;m--){let p=l[m-1];if(p.dom.parentNode==i)return p.domAtPos(p.length)}for(let m=d;m<l.length;m++){let p=l[m];if(p.dom.parentNode==i)return p.domAtPos(0)}return new kc(i,0)}function _se(u,o,i){let l,{children:d}=u;i>0&&o instanceof qg&&d.length&&(l=d[d.length-1])instanceof qg&&l.mark.eq(o.mark)?_se(l,o.children[0],i-1):(d.push(o),o.setParent(u)),u.length+=o.length}function Mse(u,o,i){let l=null,d=-1,m=null,p=-1;function v(k,T){for(let R=0,N=0;R<k.children.length&&N<=T;R++){let $=k.children[R],U=N+$.length;U>=T&&($.children.length?v($,T-N):(!m||m.isHidden&&i>0)&&(U>T||N==U&&$.getSide()>0)?(m=$,p=T-N):(N<T||N==U&&$.getSide()<0&&!$.isHidden)&&(l=$,d=T-N)),N=U}}v(u,o);let x=(i<0?l:m)||l||m;return x?x.coordsAt(Math.max(0,x==l?d:p),i):Xue(u)}function Xue(u){let o=u.dom.lastChild;if(!o)return u.dom.getBoundingClientRect();let i=m2(o);return i[i.length-1]||null}function TJ(u,o){for(let i in u)i=="class"&&o.class?o.class+=" "+u.class:i=="style"&&o.style?o.style+=";"+u.style:o[i]=u[i];return o}const Xte=Object.create(null);function gQ(u,o,i){if(u==o)return!0;u||(u=Xte),o||(o=Xte);let l=Object.keys(u),d=Object.keys(o);if(l.length-(i&&l.indexOf(i)>-1?1:0)!=d.length-(i&&d.indexOf(i)>-1?1:0))return!1;for(let m of l)if(m!=i&&(d.indexOf(m)==-1||u[m]!==o[m]))return!1;return!0}function OJ(u,o,i){let l=!1;if(o)for(let d in o)i&&d in i||(l=!0,d=="style"?u.style.cssText="":u.removeAttribute(d));if(i)for(let d in i)o&&o[d]==i[d]||(l=!0,d=="style"?u.style.cssText=i[d]:u.setAttribute(d,i[d]));return l}function Jue(u){let o=Object.create(null);for(let i=0;i<u.attributes.length;i++){let l=u.attributes[i];o[l.name]=l.value}return o}class ol extends ci{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(o,i,l,d,m,p){if(l){if(!(l instanceof ol))return!1;this.dom||l.transferDOM(this)}return d&&this.setDeco(l?l.attrs:null),Ese(this,o,i,l?l.children.slice():[],m,p),!0}split(o){let i=new ol;if(i.breakAfter=this.breakAfter,this.length==0)return i;let{i:l,off:d}=this.childPos(o);d&&(i.append(this.children[l].split(d),0),this.children[l].merge(d,this.children[l].length,null,!1,0,0),l++);for(let m=l;m<this.children.length;m++)i.append(this.children[m],0);for(;l>0&&this.children[l-1].length==0;)this.children[--l].destroy();return this.children.length=l,this.markDirty(),this.length=o,i}transferDOM(o){this.dom&&(this.markDirty(),o.setDOM(this.dom),o.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(o){gQ(this.attrs,o)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=o)}append(o,i){_se(this,o,i)}addLineDeco(o){let i=o.spec.attributes,l=o.spec.class;i&&(this.attrs=TJ(i,this.attrs||{})),l&&(this.attrs=TJ({class:l},this.attrs||{}))}domAtPos(o){return Dse(this,o)}reuseDOM(o){o.nodeName=="DIV"&&(this.setDOM(o),this.flags|=6)}sync(o,i){var l;this.dom?this.flags&4&&(wse(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(OJ(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(o,i);let d=this.dom.lastChild;for(;d&&ci.get(d)instanceof qg;)d=d.lastChild;if(!d||!this.length||d.nodeName!="BR"&&((l=ci.get(d))===null||l===void 0?void 0:l.isEditable)==!1&&(!To.ios||!this.children.some(m=>m instanceof ph))){let m=document.createElement("BR");m.cmIgnore=!0,this.dom.appendChild(m)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let o=0,i;for(let l of this.children){if(!(l instanceof ph)||/[^ -~]/.test(l.text))return null;let d=m2(l.dom);if(d.length!=1)return null;o+=d[0].width,i=d[0].height}return o?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:o/this.length,textHeight:i}:null}coordsAt(o,i){let l=Mse(this,o,i);if(!this.children.length&&l&&this.parent){let{heightOracle:d}=this.parent.view.viewState,m=l.bottom-l.top;if(Math.abs(m-d.lineHeight)<2&&d.textHeight<m){let p=(m-d.textHeight)/2;return{top:l.top+p,bottom:l.bottom-p,left:l.left,right:l.left}}}return l}become(o){return!1}covers(){return!0}static find(o,i){for(let l=0,d=0;l<o.children.length;l++){let m=o.children[l],p=d+m.length;if(p>=i){if(m instanceof ol)return m;if(p>i)break}d=p+m.breakAfter}return null}}class Y1 extends ci{constructor(o,i,l){super(),this.widget=o,this.length=i,this.deco=l,this.breakAfter=0,this.prevWidget=null}merge(o,i,l,d,m,p){return l&&(!(l instanceof Y1)||!this.widget.compare(l.widget)||o>0&&m<=0||i<this.length&&p<=0)?!1:(this.length=o+(l?l.length:0)+(this.length-i),!0)}domAtPos(o){return o==0?kc.before(this.dom):kc.after(this.dom,o==this.length)}split(o){let i=this.length-o;this.length=o;let l=new Y1(this.widget,i,this.deco);return l.breakAfter=this.breakAfter,l}get children(){return mQ}sync(o){(!this.dom||!this.widget.updateDOM(this.dom,o))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(o)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Fr.empty}domBoundsAround(){return null}become(o){return o instanceof Y1&&o.widget.constructor==this.widget.constructor?(o.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=o.widget,this.length=o.length,this.deco=o.deco,this.breakAfter=o.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(o){return this.widget.ignoreEvent(o)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(o,i){return this.widget.coordsAt(this.dom,o,i)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(o){let{startSide:i,endSide:l}=this.deco;return i==l?!1:o<0?i<0:l>0}}class Yg{eq(o){return!1}updateDOM(o,i){return!1}compare(o){return this==o||this.constructor==o.constructor&&this.eq(o)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(o){return!0}coordsAt(o,i,l){return null}get isHidden(){return!1}get editable(){return!1}destroy(o){}}var Kc=function(u){return u[u.Text=0]="Text",u[u.WidgetBefore=1]="WidgetBefore",u[u.WidgetAfter=2]="WidgetAfter",u[u.WidgetRange=3]="WidgetRange",u}(Kc||(Kc={}));class as extends by{constructor(o,i,l,d){super(),this.startSide=o,this.endSide=i,this.widget=l,this.spec=d}get heightRelevant(){return!1}static mark(o){return new cM(o)}static widget(o){let i=Math.max(-1e4,Math.min(1e4,o.side||0)),l=!!o.block;return i+=l&&!o.inlineOrder?i>0?3e8:-4e8:i>0?1e8:-1e8,new s0(o,i,i,l,o.widget||null,!1)}static replace(o){let i=!!o.block,l,d;if(o.isBlockGap)l=-5e8,d=4e8;else{let{start:m,end:p}=Rse(o,i);l=(m?i?-3e8:-1:5e8)-1,d=(p?i?2e8:1:-6e8)+1}return new s0(o,l,d,i,o.widget||null,!0)}static line(o){return new uM(o)}static set(o,i=!1){return xr.of(o,i)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}as.none=xr.empty;class cM extends as{constructor(o){let{start:i,end:l}=Rse(o);super(i?-1:5e8,l?1:-6e8,null,o),this.tagName=o.tagName||"span",this.class=o.class||"",this.attrs=o.attributes||null}eq(o){var i,l;return this==o||o instanceof cM&&this.tagName==o.tagName&&(this.class||((i=this.attrs)===null||i===void 0?void 0:i.class))==(o.class||((l=o.attrs)===null||l===void 0?void 0:l.class))&&gQ(this.attrs,o.attrs,"class")}range(o,i=o){if(o>=i)throw new RangeError("Mark decorations may not be empty");return super.range(o,i)}}cM.prototype.point=!1;class uM extends as{constructor(o){super(-2e8,-2e8,null,o)}eq(o){return o instanceof uM&&this.spec.class==o.spec.class&&gQ(this.spec.attributes,o.spec.attributes)}range(o,i=o){if(i!=o)throw new RangeError("Line decoration ranges must be zero-length");return super.range(o,i)}}uM.prototype.mapMode=qc.TrackBefore;uM.prototype.point=!0;class s0 extends as{constructor(o,i,l,d,m,p){super(i,l,m,o),this.block=d,this.isReplace=p,this.mapMode=d?i<=0?qc.TrackBefore:qc.TrackAfter:qc.TrackDel}get type(){return this.startSide!=this.endSide?Kc.WidgetRange:this.startSide<=0?Kc.WidgetBefore:Kc.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(o){return o instanceof s0&&Que(this.widget,o.widget)&&this.block==o.block&&this.startSide==o.startSide&&this.endSide==o.endSide}range(o,i=o){if(this.isReplace&&(o>i||o==i&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&i!=o)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(o,i)}}s0.prototype.point=!0;function Rse(u,o=!1){let{inclusiveStart:i,inclusiveEnd:l}=u;return i==null&&(i=u.inclusive),l==null&&(l=u.inclusive),{start:i!=null?i:o,end:l!=null?l:o}}function Que(u,o){return u==o||!!(u&&o&&u.compare(o))}function DJ(u,o,i,l=0){let d=i.length-1;d>=0&&i[d]+l>=u?i[d]=Math.max(i[d],o):i.push(u,o)}class H_{constructor(o,i,l,d){this.doc=o,this.pos=i,this.end=l,this.disallowBlockEffectsFor=d,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=o.iter(),this.skip=i}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let o=this.content[this.content.length-1];return!(o.breakAfter||o instanceof Y1&&o.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ol),this.atCursorPos=!0),this.curLine}flushBuffer(o=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(d$(new g2(-1),o),o.length),this.pendingBuffer=0)}addBlockWidget(o){this.flushBuffer(),this.curLine=null,this.content.push(o)}finish(o){this.pendingBuffer&&o<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(o&&this.content.length&&this.content[this.content.length-1]instanceof Y1)&&this.getLine()}buildText(o,i,l){for(;o>0;){if(this.textOff==this.text.length){let{value:m,lineBreak:p,done:v}=this.cursor.next(this.skip);if(this.skip=0,v)throw new Error("Ran out of text content when drawing inline views");if(p){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,o--;continue}else this.text=m,this.textOff=0}let d=Math.min(this.text.length-this.textOff,o,512);this.flushBuffer(i.slice(i.length-l)),this.getLine().append(d$(new ph(this.text.slice(this.textOff,this.textOff+d)),i),l),this.atCursorPos=!0,this.textOff+=d,o-=d,l=0}}span(o,i,l,d){this.buildText(i-o,l,d),this.pos=i,this.openStart<0&&(this.openStart=d)}point(o,i,l,d,m,p){if(this.disallowBlockEffectsFor[p]&&l instanceof s0){if(l.block)throw new RangeError("Block decorations may not be specified via plugins");if(i>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let v=i-o;if(l instanceof s0)if(l.block)l.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Y1(l.widget||p2.block,v,l));else{let x=q1.create(l.widget||p2.inline,v,v?0:l.startSide),k=this.atCursorPos&&!x.isEditable&&m<=d.length&&(o<i||l.startSide>0),T=!x.isEditable&&(o<i||m>d.length||l.startSide<=0),R=this.getLine();this.pendingBuffer==2&&!k&&!x.isEditable&&(this.pendingBuffer=0),this.flushBuffer(d),k&&(R.append(d$(new g2(1),d),m),m=d.length+Math.max(0,m-d.length)),R.append(d$(x,d),m),this.atCursorPos=T,this.pendingBuffer=T?o<i||m>d.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=d.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(l);v&&(this.textOff+v<=this.text.length?this.textOff+=v:(this.skip+=v-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=i),this.openStart<0&&(this.openStart=m)}static build(o,i,l,d,m){let p=new H_(o,i,l,m);return p.openEnd=xr.spans(d,i,l,p),p.openStart<0&&(p.openStart=p.openEnd),p.finish(p.openEnd),p}}function d$(u,o){for(let i of o)u=new qg(i,[u],u.length);return u}class p2 extends Yg{constructor(o){super(),this.tag=o}eq(o){return o.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(o){return o.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}p2.inline=new p2("span");p2.block=new p2("div");var Fi=function(u){return u[u.LTR=0]="LTR",u[u.RTL=1]="RTL",u}(Fi||(Fi={}));const wy=Fi.LTR,pQ=Fi.RTL;function Pse(u){let o=[];for(let i=0;i<u.length;i++)o.push(1<<+u[i]);return o}const ede=Pse("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),tde=Pse("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),_J=Object.create(null),mm=[];for(let u of["()","[]","{}"]){let o=u.charCodeAt(0),i=u.charCodeAt(1);_J[o]=i,_J[i]=-o}function Nse(u){return u<=247?ede[u]:1424<=u&&u<=1524?2:1536<=u&&u<=1785?tde[u-1536]:1774<=u&&u<=2220?4:8192<=u&&u<=8204?256:64336<=u&&u<=65023?4:1}const nde=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class G1{get dir(){return this.level%2?pQ:wy}constructor(o,i,l){this.from=o,this.to=i,this.level=l}side(o,i){return this.dir==i==o?this.to:this.from}forward(o,i){return o==(this.dir==i)}static find(o,i,l,d){let m=-1;for(let p=0;p<o.length;p++){let v=o[p];if(v.from<=i&&v.to>=i){if(v.level==l)return p;(m<0||(d!=0?d<0?v.from<i:v.to>i:o[m].level>v.level))&&(m=p)}}if(m<0)throw new RangeError("Index out of range");return m}}function Bse(u,o){if(u.length!=o.length)return!1;for(let i=0;i<u.length;i++){let l=u[i],d=o[i];if(l.from!=d.from||l.to!=d.to||l.direction!=d.direction||!Bse(l.inner,d.inner))return!1}return!0}const li=[];function ode(u,o,i,l,d){for(let m=0;m<=l.length;m++){let p=m?l[m-1].to:o,v=m<l.length?l[m].from:i,x=m?256:d;for(let k=p,T=x,R=x;k<v;k++){let N=Nse(u.charCodeAt(k));N==512?N=T:N==8&&R==4&&(N=16),li[k]=N==4?2:N,N&7&&(R=N),T=N}for(let k=p,T=x,R=x;k<v;k++){let N=li[k];if(N==128)k<v-1&&T==li[k+1]&&T&24?N=li[k]=T:li[k]=256;else if(N==64){let $=k+1;for(;$<v&&li[$]==64;)$++;let U=k&&T==8||$<i&&li[$]==8?R==1?1:8:256;for(let X=k;X<$;X++)li[X]=U;k=$-1}else N==8&&R==1&&(li[k]=1);T=N,N&7&&(R=N)}}}function sde(u,o,i,l,d){let m=d==1?2:1;for(let p=0,v=0,x=0;p<=l.length;p++){let k=p?l[p-1].to:o,T=p<l.length?l[p].from:i;for(let R=k,N,$,U;R<T;R++)if($=_J[N=u.charCodeAt(R)])if($<0){for(let X=v-3;X>=0;X-=3)if(mm[X+1]==-$){let J=mm[X+2],G=J&2?d:J&4?J&1?m:d:0;G&&(li[R]=li[mm[X]]=G),v=X;break}}else{if(mm.length==189)break;mm[v++]=R,mm[v++]=N,mm[v++]=x}else if((U=li[R])==2||U==1){let X=U==d;x=X?0:1;for(let J=v-3;J>=0;J-=3){let G=mm[J+2];if(G&2)break;if(X)mm[J+2]|=2;else{if(G&4)break;mm[J+2]|=4}}}}}function rde(u,o,i,l){for(let d=0,m=l;d<=i.length;d++){let p=d?i[d-1].to:u,v=d<i.length?i[d].from:o;for(let x=p;x<v;){let k=li[x];if(k==256){let T=x+1;for(;;)if(T==v){if(d==i.length)break;T=i[d++].to,v=d<i.length?i[d].from:o}else if(li[T]==256)T++;else break;let R=m==1,N=(T<o?li[T]:l)==1,$=R==N?R?1:2:l;for(let U=T,X=d,J=X?i[X-1].to:u;U>x;)U==J&&(U=i[--X].from,J=X?i[X-1].to:u),li[--U]=$;x=T}else m=k,x++}}}function MJ(u,o,i,l,d,m,p){let v=l%2?2:1;if(l%2==d%2)for(let x=o,k=0;x<i;){let T=!0,R=!1;if(k==m.length||x<m[k].from){let X=li[x];X!=v&&(T=!1,R=X==16)}let N=!T&&v==1?[]:null,$=T?l:l+1,U=x;e:for(;;)if(k<m.length&&U==m[k].from){if(R)break e;let X=m[k];if(!T)for(let J=X.to,G=k+1;;){if(J==i)break e;if(G<m.length&&m[G].from==J)J=m[G++].to;else{if(li[J]==v)break e;break}}if(k++,N)N.push(X);else{X.from>x&&p.push(new G1(x,X.from,$));let J=X.direction==wy!=!($%2);RJ(u,J?l+1:l,d,X.inner,X.from,X.to,p),x=X.to}U=X.to}else{if(U==i||(T?li[U]!=v:li[U]==v))break;U++}N?MJ(u,x,U,l+1,d,N,p):x<U&&p.push(new G1(x,U,$)),x=U}else for(let x=i,k=m.length;x>o;){let T=!0,R=!1;if(!k||x>m[k-1].to){let X=li[x-1];X!=v&&(T=!1,R=X==16)}let N=!T&&v==1?[]:null,$=T?l:l+1,U=x;e:for(;;)if(k&&U==m[k-1].to){if(R)break e;let X=m[--k];if(!T)for(let J=X.from,G=k;;){if(J==o)break e;if(G&&m[G-1].to==J)J=m[--G].from;else{if(li[J-1]==v)break e;break}}if(N)N.push(X);else{X.to<x&&p.push(new G1(X.to,x,$));let J=X.direction==wy!=!($%2);RJ(u,J?l+1:l,d,X.inner,X.from,X.to,p),x=X.from}U=X.from}else{if(U==o||(T?li[U-1]!=v:li[U-1]==v))break;U--}N?MJ(u,U,x,l+1,d,N,p):U<x&&p.push(new G1(U,x,$)),x=U}}function RJ(u,o,i,l,d,m,p){let v=o%2?2:1;ode(u,d,m,l,v),sde(u,d,m,l,v),rde(d,m,l,v),MJ(u,d,m,o,i,l,p)}function ide(u,o,i){if(!u)return[new G1(0,0,o==pQ?1:0)];if(o==wy&&!i.length&&!nde.test(u))return Fse(u.length);if(i.length)for(;u.length>li.length;)li[li.length]=256;let l=[],d=o==wy?0:1;return RJ(u,d,d,i,0,u.length,l),l}function Fse(u){return[new G1(0,u,0)]}let Ise="";function ade(u,o,i,l,d){var m;let p=l.head-u.from,v=G1.find(o,p,(m=l.bidiLevel)!==null&&m!==void 0?m:-1,l.assoc),x=o[v],k=x.side(d,i);if(p==k){let N=v+=d?1:-1;if(N<0||N>=o.length)return null;x=o[v=N],p=x.side(!d,i),k=x.side(d,i)}let T=Zl(u.text,p,x.forward(d,i));(T<x.from||T>x.to)&&(T=k),Ise=u.text.slice(Math.min(p,T),Math.max(p,T));let R=v==(d?o.length-1:0)?null:o[v+(d?1:-1)];return R&&T==k&&R.level+(d?0:1)<x.level?rn.cursor(R.side(!d,i)+u.from,R.forward(d,i)?1:-1,R.level):rn.cursor(T+u.from,x.forward(d,i)?-1:1,x.level)}function lde(u,o,i){for(let l=o;l<i;l++){let d=Nse(u.charCodeAt(l));if(d==1)return wy;if(d==2||d==4)return pQ}return wy}const Lse=Oo.define(),$se=Oo.define(),Hse=Oo.define(),Vse=Oo.define(),PJ=Oo.define(),zse=Oo.define(),Use=Oo.define(),Wse=Oo.define({combine:u=>u.some(o=>o)}),jse=Oo.define({combine:u=>u.some(o=>o)}),Zse=Oo.define();class l2{constructor(o,i="nearest",l="nearest",d=5,m=5,p=!1){this.range=o,this.y=i,this.x=l,this.yMargin=d,this.xMargin=m,this.isSnapshot=p}map(o){return o.empty?this:new l2(this.range.map(o),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(o){return this.range.to<=o.doc.length?this:new l2(rn.cursor(o.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const f$=Us.define({map:(u,o)=>u.map(o)});function _u(u,o,i){let l=u.facet(Vse);l.length?l[0](o):window.onerror&&window.onerror(String(o),i,void 0,void 0,o)}const T6=Oo.define({combine:u=>u.length?u[0]:!0});let cde=0;const R_=Oo.define();class Ta{constructor(o,i,l,d,m){this.id=o,this.create=i,this.domEventHandlers=l,this.domEventObservers=d,this.extension=m(this)}static define(o,i){const{eventHandlers:l,eventObservers:d,provide:m,decorations:p}=i||{};return new Ta(cde++,o,l,d,v=>{let x=[R_.of(v)];return p&&x.push(q_.of(k=>{let T=k.plugin(v);return T?p(T):as.none})),m&&x.push(m(v)),x})}static fromClass(o,i){return Ta.define(l=>new o(l),i)}}class FX{constructor(o){this.spec=o,this.mustUpdate=null,this.value=null}update(o){if(this.value){if(this.mustUpdate){let i=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(i)}catch(l){if(_u(i.state,l,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(d){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(o)}catch(i){_u(o.state,i,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(o){var i;if(!((i=this.value)===null||i===void 0)&&i.destroy)try{this.value.destroy()}catch(l){_u(o.state,l,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const qse=Oo.define(),bQ=Oo.define(),q_=Oo.define(),Gse=Oo.define(),vQ=Oo.define(),Kse=Oo.define();function Jte(u,o){let i=u.state.facet(Kse);if(!i.length)return i;let l=i.map(m=>m instanceof Function?m(u):m),d=[];return xr.spans(l,o.from,o.to,{point(){},span(m,p,v,x){let k=m-o.from,T=p-o.from,R=d;for(let N=v.length-1;N>=0;N--,x--){let $=v[N].spec.bidiIsolate,U;if($==null&&($=lde(o.text,k,T)),x>0&&R.length&&(U=R[R.length-1]).to==k&&U.direction==$)U.to=T,R=U.inner;else{let X={from:k,to:T,direction:$,inner:[]};R.push(X),R=X.inner}}}}),d}const Yse=Oo.define();function Xse(u){let o=0,i=0,l=0,d=0;for(let m of u.state.facet(Yse)){let p=m(u);p&&(p.left!=null&&(o=Math.max(o,p.left)),p.right!=null&&(i=Math.max(i,p.right)),p.top!=null&&(l=Math.max(l,p.top)),p.bottom!=null&&(d=Math.max(d,p.bottom)))}return{left:o,right:i,top:l,bottom:d}}const P_=Oo.define();class wf{constructor(o,i,l,d){this.fromA=o,this.toA=i,this.fromB=l,this.toB=d}join(o){return new wf(Math.min(this.fromA,o.fromA),Math.max(this.toA,o.toA),Math.min(this.fromB,o.fromB),Math.max(this.toB,o.toB))}addToSet(o){let i=o.length,l=this;for(;i>0;i--){let d=o[i-1];if(!(d.fromA>l.toA)){if(d.toA<l.fromA)break;l=l.join(d),o.splice(i-1,1)}}return o.splice(i,0,l),o}static extendWithRanges(o,i){if(i.length==0)return o;let l=[];for(let d=0,m=0,p=0,v=0;;d++){let x=d==o.length?null:o[d],k=p-v,T=x?x.fromB:1e9;for(;m<i.length&&i[m]<T;){let R=i[m],N=i[m+1],$=Math.max(v,R),U=Math.min(T,N);if($<=U&&new wf($+k,U+k,$,U).addToSet(l),N>T)break;m+=2}if(!x)return l;new wf(x.fromA,x.toA,x.fromB,x.toB).addToSet(l),p=x.toA,v=x.toB}}}class n6{constructor(o,i,l){this.view=o,this.state=i,this.transactions=l,this.flags=0,this.startState=o.state,this.changes=rl.empty(this.startState.doc.length);for(let m of l)this.changes=this.changes.compose(m.changes);let d=[];this.changes.iterChangedRanges((m,p,v,x)=>d.push(new wf(m,p,v,x))),this.changedRanges=d}static create(o,i,l){return new n6(o,i,l)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(o=>o.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Qte extends ci{get length(){return this.view.state.doc.length}constructor(o){super(),this.view=o,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(o.contentDOM),this.children=[new ol],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new wf(0,0,0,o.state.doc.length)],0,null)}update(o){var i;let l=o.changedRanges;this.minWidth>0&&l.length&&(l.every(({fromA:k,toA:T})=>T<this.minWidthFrom||k>this.minWidthTo)?(this.minWidthFrom=o.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=o.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let d=-1;this.view.inputState.composing>=0&&(!((i=this.domChanged)===null||i===void 0)&&i.newSel?d=this.domChanged.newSel.head:!pde(o.changes,this.hasComposition)&&!o.selectionSet&&(d=o.state.selection.main.head));let m=d>-1?dde(this.view,o.changes,d):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:k,to:T}=this.hasComposition;l=new wf(k,T,o.changes.mapPos(k,-1),o.changes.mapPos(T,1)).addToSet(l.slice())}this.hasComposition=m?{from:m.range.fromB,to:m.range.toB}:null,(To.ie||To.chrome)&&!m&&o&&o.state.doc.lines!=o.startState.doc.lines&&(this.forceSelection=!0);let p=this.decorations,v=this.updateDeco(),x=mde(p,v,o.changes);return l=wf.extendWithRanges(l,x),!(this.flags&7)&&l.length==0?!1:(this.updateInner(l,o.startState.doc.length,m),o.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(o,i,l){this.view.viewState.mustMeasureContent=!0,this.updateChildren(o,i,l);let{observer:d}=this.view;d.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let p=To.chrome||To.ios?{node:d.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,p),this.flags&=-8,p&&(p.written||d.selectionRange.focusNode!=p.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(p=>p.flags&=-9);let m=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let p of this.children)p instanceof Y1&&p.widget instanceof ene&&m.push(p.dom);d.updateGaps(m)}updateChildren(o,i,l){let d=l?l.range.addToSet(o.slice()):o,m=this.childCursor(i);for(let p=d.length-1;;p--){let v=p>=0?d[p]:null;if(!v)break;let{fromA:x,toA:k,fromB:T,toB:R}=v,N,$,U,X;if(l&&l.range.fromB<R&&l.range.toB>T){let be=H_.build(this.view.state.doc,T,l.range.fromB,this.decorations,this.dynamicDecorationMap),He=H_.build(this.view.state.doc,l.range.toB,R,this.decorations,this.dynamicDecorationMap);$=be.breakAtStart,U=be.openStart,X=He.openEnd;let Re=this.compositionView(l);He.breakAtStart?Re.breakAfter=1:He.content.length&&Re.merge(Re.length,Re.length,He.content[0],!1,He.openStart,0)&&(Re.breakAfter=He.content[0].breakAfter,He.content.shift()),be.content.length&&Re.merge(0,0,be.content[be.content.length-1],!0,0,be.openEnd)&&be.content.pop(),N=be.content.concat(Re).concat(He.content)}else({content:N,breakAtStart:$,openStart:U,openEnd:X}=H_.build(this.view.state.doc,T,R,this.decorations,this.dynamicDecorationMap));let{i:J,off:G}=m.findPos(k,1),{i:le,off:Z}=m.findPos(x,-1);Ase(this,le,Z,J,G,N,$,U,X)}l&&this.fixCompositionDOM(l)}compositionView(o){let i=new ph(o.text.nodeValue);i.flags|=8;for(let{deco:d}of o.marks)i=new qg(d,[i],i.length);let l=new ol;return l.append(i,0),l}fixCompositionDOM(o){let i=(m,p)=>{p.flags|=8|(p.children.some(x=>x.flags&7)?1:0),this.markedForComposition.add(p);let v=ci.get(m);v&&v!=p&&(v.dom=null),p.setDOM(m)},l=this.childPos(o.range.fromB,1),d=this.children[l.i];i(o.line,d);for(let m=o.marks.length-1;m>=-1;m--)l=d.childPos(l.off,1),d=d.children[l.i],i(m>=0?o.marks[m].node:o.text,d)}updateSelection(o=!1,i=!1){(o||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let l=this.view.root.activeElement,d=l==this.dom,m=!d&&I$(this.dom,this.view.observer.selectionRange)&&!(l&&this.dom.contains(l));if(!(d||i||m))return;let p=this.forceSelection;this.forceSelection=!1;let v=this.view.state.selection.main,x=this.moveToLine(this.domAtPos(v.anchor)),k=v.empty?x:this.moveToLine(this.domAtPos(v.head));if(To.gecko&&v.empty&&!this.hasComposition&&ude(x)){let R=document.createTextNode("");this.view.observer.ignore(()=>x.node.insertBefore(R,x.node.childNodes[x.offset]||null)),x=k=new kc(R,0),p=!0}let T=this.view.observer.selectionRange;(p||!T.focusNode||(!$_(x.node,x.offset,T.anchorNode,T.anchorOffset)||!$_(k.node,k.offset,T.focusNode,T.focusOffset))&&!this.suppressWidgetCursorChange(T,v))&&(this.view.observer.ignore(()=>{To.android&&To.chrome&&this.dom.contains(T.focusNode)&&gde(T.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let R=e6(this.view.root);if(R)if(v.empty){if(To.gecko){let N=fde(x.node,x.offset);if(N&&N!=3){let $=(N==1?Sse:Cse)(x.node,x.offset);$&&(x=new kc($.node,$.offset))}}R.collapse(x.node,x.offset),v.bidiLevel!=null&&R.caretBidiLevel!==void 0&&(R.caretBidiLevel=v.bidiLevel)}else if(R.extend){R.collapse(x.node,x.offset);try{R.extend(k.node,k.offset)}catch(N){}}else{let N=document.createRange();v.anchor>v.head&&([x,k]=[k,x]),N.setEnd(k.node,k.offset),N.setStart(x.node,x.offset),R.removeAllRanges(),R.addRange(N)}m&&this.view.root.activeElement==this.dom&&(this.dom.blur(),l&&l.focus())}),this.view.observer.setSelectionRange(x,k)),this.impreciseAnchor=x.precise?null:new kc(T.anchorNode,T.anchorOffset),this.impreciseHead=k.precise?null:new kc(T.focusNode,T.focusOffset)}suppressWidgetCursorChange(o,i){return this.hasComposition&&i.empty&&$_(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)&&this.posFromDOM(o.focusNode,o.focusOffset)==i.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:o}=this,i=o.state.selection.main,l=e6(o.root),{anchorNode:d,anchorOffset:m}=o.observer.selectionRange;if(!l||!i.empty||!i.assoc||!l.modify)return;let p=ol.find(this,i.head);if(!p)return;let v=p.posAtStart;if(i.head==v||i.head==v+p.length)return;let x=this.coordsAt(i.head,-1),k=this.coordsAt(i.head,1);if(!x||!k||x.bottom>k.top)return;let T=this.domAtPos(i.head+i.assoc);l.collapse(T.node,T.offset),l.modify("move",i.assoc<0?"forward":"backward","lineboundary"),o.observer.readSelectionRange();let R=o.observer.selectionRange;o.docView.posFromDOM(R.anchorNode,R.anchorOffset)!=i.from&&l.collapse(d,m)}moveToLine(o){let i=this.dom,l;if(o.node!=i)return o;for(let d=o.offset;!l&&d<i.childNodes.length;d++){let m=ci.get(i.childNodes[d]);m instanceof ol&&(l=m.domAtPos(0))}for(let d=o.offset-1;!l&&d>=0;d--){let m=ci.get(i.childNodes[d]);m instanceof ol&&(l=m.domAtPos(m.length))}return l?new kc(l.node,l.offset,!0):o}nearest(o){for(let i=o;i;){let l=ci.get(i);if(l&&l.rootView==this)return l;i=i.parentNode}return null}posFromDOM(o,i){let l=this.nearest(o);if(!l)throw new RangeError("Trying to find position for a DOM position outside of the document");return l.localPosFromDOM(o,i)+l.posAtStart}domAtPos(o){let{i,off:l}=this.childCursor().findPos(o,-1);for(;i<this.children.length-1;){let d=this.children[i];if(l<d.length||d instanceof ol)break;i++,l=0}return this.children[i].domAtPos(l)}coordsAt(o,i){let l=null,d=0;for(let m=this.length,p=this.children.length-1;p>=0;p--){let v=this.children[p],x=m-v.breakAfter,k=x-v.length;if(x<o)break;k<=o&&(k<o||v.covers(-1))&&(x>o||v.covers(1))&&(!l||v instanceof ol&&!(l instanceof ol&&i>=0))&&(l=v,d=k),m=k}return l?l.coordsAt(o-d,i):null}coordsForChar(o){let{i,off:l}=this.childPos(o,1),d=this.children[i];if(!(d instanceof ol))return null;for(;d.children.length;){let{i:v,off:x}=d.childPos(l,1);for(;;v++){if(v==d.children.length)return null;if((d=d.children[v]).length)break}l=x}if(!(d instanceof ph))return null;let m=Zl(d.text,l);if(m==l)return null;let p=yy(d.dom,l,m).getClientRects();for(let v=0;v<p.length;v++){let x=p[v];if(v==p.length-1||x.top<x.bottom&&x.left<x.right)return x}return null}measureVisibleLineHeights(o){let i=[],{from:l,to:d}=o,m=this.view.contentDOM.clientWidth,p=m>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,v=-1,x=this.view.textDirection==Fi.LTR;for(let k=0,T=0;T<this.children.length;T++){let R=this.children[T],N=k+R.length;if(N>d)break;if(k>=l){let $=R.dom.getBoundingClientRect();if(i.push($.height),p){let U=R.dom.lastChild,X=U?m2(U):[];if(X.length){let J=X[X.length-1],G=x?J.right-$.left:$.right-J.left;G>v&&(v=G,this.minWidth=m,this.minWidthFrom=k,this.minWidthTo=N)}}}k=N+R.breakAfter}return i}textDirectionAt(o){let{i}=this.childPos(o,1);return getComputedStyle(this.children[i].dom).direction=="rtl"?Fi.RTL:Fi.LTR}measureTextSize(){for(let m of this.children)if(m instanceof ol){let p=m.measureTextSize();if(p)return p}let o=document.createElement("div"),i,l,d;return o.className="cm-line",o.style.width="99999px",o.style.position="absolute",o.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(o);let m=m2(o.firstChild)[0];i=o.getBoundingClientRect().height,l=m?m.width/27:7,d=m?m.height:i,o.remove()}),{lineHeight:i,charWidth:l,textHeight:d}}childCursor(o=this.length){let i=this.children.length;return i&&(o-=this.children[--i].length),new kse(this.children,o,i)}computeBlockGapDeco(){let o=[],i=this.view.viewState;for(let l=0,d=0;;d++){let m=d==i.viewports.length?null:i.viewports[d],p=m?m.from-1:this.length;if(p>l){let v=(i.lineBlockAt(p).bottom-i.lineBlockAt(l).top)/this.view.scaleY;o.push(as.replace({widget:new ene(v),block:!0,inclusive:!0,isBlockGap:!0}).range(l,p))}if(!m)break;l=m.to+1}return as.set(o)}updateDeco(){let o=0,i=this.view.state.facet(q_).map(m=>(this.dynamicDecorationMap[o++]=typeof m=="function")?m(this.view):m),l=!1,d=this.view.state.facet(Gse).map((m,p)=>{let v=typeof m=="function";return v&&(l=!0),v?m(this.view):m});for(d.length&&(this.dynamicDecorationMap[o++]=l,i.push(xr.join(d))),this.decorations=[...i,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];o<this.decorations.length;)this.dynamicDecorationMap[o++]=!1;return this.decorations}scrollIntoView(o){if(o.isSnapshot){let k=this.view.viewState.lineBlockAt(o.range.head);this.view.scrollDOM.scrollTop=k.top-o.yMargin,this.view.scrollDOM.scrollLeft=o.xMargin;return}for(let k of this.view.state.facet(Zse))try{if(k(this.view,o.range,o))return!0}catch(T){_u(this.view.state,T,"scroll handler")}let{range:i}=o,l=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1),d;if(!l)return;!i.empty&&(d=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(l={left:Math.min(l.left,d.left),top:Math.min(l.top,d.top),right:Math.max(l.right,d.right),bottom:Math.max(l.bottom,d.bottom)});let m=Xse(this.view),p={left:l.left-m.left,top:l.top-m.top,right:l.right+m.right,bottom:l.bottom+m.bottom},{offsetWidth:v,offsetHeight:x}=this.view.scrollDOM;Wue(this.view.scrollDOM,p,i.head<i.anchor?-1:1,o.x,o.y,Math.max(Math.min(o.xMargin,v),-v),Math.max(Math.min(o.yMargin,x),-x),this.view.textDirection==Fi.LTR)}}function ude(u){return u.node.nodeType==1&&u.node.firstChild&&(u.offset==0||u.node.childNodes[u.offset-1].contentEditable=="false")&&(u.offset==u.node.childNodes.length||u.node.childNodes[u.offset].contentEditable=="false")}class ene extends Yg{constructor(o){super(),this.height=o}toDOM(){let o=document.createElement("div");return o.className="cm-gap",this.updateDOM(o),o}eq(o){return o.height==this.height}updateDOM(o){return o.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function Jse(u,o){let i=u.observer.selectionRange;if(!i.focusNode)return null;let l=Sse(i.focusNode,i.focusOffset),d=Cse(i.focusNode,i.focusOffset),m=l||d;if(d&&l&&d.node!=l.node){let v=ci.get(d.node);if(!v||v instanceof ph&&v.text!=d.node.nodeValue)m=d;else if(u.docView.lastCompositionAfterCursor){let x=ci.get(l.node);!x||x instanceof ph&&x.text!=l.node.nodeValue||(m=d)}}if(u.docView.lastCompositionAfterCursor=m!=l,!m)return null;let p=o-m.offset;return{from:p,to:p+m.node.nodeValue.length,node:m.node}}function dde(u,o,i){let l=Jse(u,i);if(!l)return null;let{node:d,from:m,to:p}=l,v=d.nodeValue;if(/[\n\r]/.test(v)||u.state.doc.sliceString(l.from,l.to)!=v)return null;let x=o.invertedDesc,k=new wf(x.mapPos(m),x.mapPos(p),m,p),T=[];for(let R=d.parentNode;;R=R.parentNode){let N=ci.get(R);if(N instanceof qg)T.push({node:R,deco:N.mark});else{if(N instanceof ol||R.nodeName=="DIV"&&R.parentNode==u.contentDOM)return{range:k,text:d,marks:T,line:R};if(R!=u.contentDOM)T.push({node:R,deco:new cM({inclusive:!0,attributes:Jue(R),tagName:R.tagName.toLowerCase()})});else return null}}}function fde(u,o){return u.nodeType!=1?0:(o&&u.childNodes[o-1].contentEditable=="false"?1:0)|(o<u.childNodes.length&&u.childNodes[o].contentEditable=="false"?2:0)}let hde=class{constructor(){this.changes=[]}compareRange(o,i){DJ(o,i,this.changes)}comparePoint(o,i){DJ(o,i,this.changes)}};function mde(u,o,i){let l=new hde;return xr.compare(u,o,i,l),l.changes}function gde(u,o){for(let i=u;i&&i!=o;i=i.assignedSlot||i.parentNode)if(i.nodeType==1&&i.contentEditable=="false")return!0;return!1}function pde(u,o){let i=!1;return o&&u.iterChangedRanges((l,d)=>{l<o.to&&d>o.from&&(i=!0)}),i}function bde(u,o,i=1){let l=u.charCategorizer(o),d=u.doc.lineAt(o),m=o-d.from;if(d.length==0)return rn.cursor(o);m==0?i=1:m==d.length&&(i=-1);let p=m,v=m;i<0?p=Zl(d.text,m,!1):v=Zl(d.text,m);let x=l(d.text.slice(p,v));for(;p>0;){let k=Zl(d.text,p,!1);if(l(d.text.slice(k,p))!=x)break;p=k}for(;v<d.length;){let k=Zl(d.text,v);if(l(d.text.slice(v,k))!=x)break;v=k}return rn.range(p+d.from,v+d.from)}function vde(u,o){return o.left>u?o.left-u:Math.max(0,u-o.right)}function yde(u,o){return o.top>u?o.top-u:Math.max(0,u-o.bottom)}function IX(u,o){return u.top<o.bottom-1&&u.bottom>o.top+1}function tne(u,o){return o<u.top?{top:o,left:u.left,right:u.right,bottom:u.bottom}:u}function nne(u,o){return o>u.bottom?{top:u.top,left:u.left,right:u.right,bottom:o}:u}function NJ(u,o,i){let l,d,m,p,v=!1,x,k,T,R;for(let U=u.firstChild;U;U=U.nextSibling){let X=m2(U);for(let J=0;J<X.length;J++){let G=X[J];d&&IX(d,G)&&(G=tne(nne(G,d.bottom),d.top));let le=vde(o,G),Z=yde(i,G);if(le==0&&Z==0)return U.nodeType==3?one(U,o,i):NJ(U,o,i);if(!l||p>Z||p==Z&&m>le){l=U,d=G,m=le,p=Z;let be=Z?i<G.top?-1:1:le?o<G.left?-1:1:0;v=!be||(be>0?J<X.length-1:J>0)}le==0?i>G.bottom&&(!T||T.bottom<G.bottom)?(x=U,T=G):i<G.top&&(!R||R.top>G.top)&&(k=U,R=G):T&&IX(T,G)?T=nne(T,G.bottom):R&&IX(R,G)&&(R=tne(R,G.top))}}if(T&&T.bottom>=i?(l=x,d=T):R&&R.top<=i&&(l=k,d=R),!l)return{node:u,offset:0};let N=Math.max(d.left,Math.min(d.right,o));if(l.nodeType==3)return one(l,N,i);if(v&&l.contentEditable!="false")return NJ(l,N,i);let $=Array.prototype.indexOf.call(u.childNodes,l)+(o>=(d.left+d.right)/2?1:0);return{node:u,offset:$}}function one(u,o,i){let l=u.nodeValue.length,d=-1,m=1e9,p=0;for(let v=0;v<l;v++){let x=yy(u,v,v+1).getClientRects();for(let k=0;k<x.length;k++){let T=x[k];if(T.top==T.bottom)continue;p||(p=o-T.left);let R=(T.top>i?T.top-i:i-T.bottom)-1;if(T.left-1<=o&&T.right+1>=o&&R<m){let N=o>=(T.left+T.right)/2,$=N;if((To.chrome||To.gecko)&&yy(u,v).getBoundingClientRect().left==T.right&&($=!N),R<=0)return{node:u,offset:v+($?1:0)};d=v+($?1:0),m=R}}}return{node:u,offset:d>-1?d:p>0?u.nodeValue.length:0}}function Qse(u,o,i,l=-1){var d,m;let p=u.contentDOM.getBoundingClientRect(),v=p.top+u.viewState.paddingTop,x,{docHeight:k}=u.viewState,{x:T,y:R}=o,N=R-v;if(N<0)return 0;if(N>k)return u.state.doc.length;for(let be=u.viewState.heightOracle.textHeight/2,He=!1;x=u.elementAtHeight(N),x.type!=Kc.Text;)for(;N=l>0?x.bottom+be:x.top-be,!(N>=0&&N<=k);){if(He)return i?null:0;He=!0,l=-l}R=v+N;let $=x.from;if($<u.viewport.from)return u.viewport.from==0?0:i?null:sne(u,p,x,T,R);if($>u.viewport.to)return u.viewport.to==u.state.doc.length?u.state.doc.length:i?null:sne(u,p,x,T,R);let U=u.dom.ownerDocument,X=u.root.elementFromPoint?u.root:U,J=X.elementFromPoint(T,R);J&&!u.contentDOM.contains(J)&&(J=null),J||(T=Math.max(p.left+1,Math.min(p.right-1,T)),J=X.elementFromPoint(T,R),J&&!u.contentDOM.contains(J)&&(J=null));let G,le=-1;if(J&&((d=u.docView.nearest(J))===null||d===void 0?void 0:d.isEditable)!=!1){if(U.caretPositionFromPoint){let be=U.caretPositionFromPoint(T,R);be&&({offsetNode:G,offset:le}=be)}else if(U.caretRangeFromPoint){let be=U.caretRangeFromPoint(T,R);be&&({startContainer:G,startOffset:le}=be,(!u.contentDOM.contains(G)||To.safari&&wde(G,le,T)||To.chrome&&xde(G,le,T))&&(G=void 0))}}if(!G||!u.docView.dom.contains(G)){let be=ol.find(u.docView,$);if(!be)return N>x.top+x.height/2?x.to:x.from;({node:G,offset:le}=NJ(be.dom,T,R))}let Z=u.docView.nearest(G);if(!Z)return null;if(Z.isWidget&&((m=Z.dom)===null||m===void 0?void 0:m.nodeType)==1){let be=Z.dom.getBoundingClientRect();return o.y<be.top||o.y<=be.bottom&&o.x<=(be.left+be.right)/2?Z.posAtStart:Z.posAtEnd}else return Z.localPosFromDOM(G,le)+Z.posAtStart}function sne(u,o,i,l,d){let m=Math.round((l-o.left)*u.defaultCharacterWidth);if(u.lineWrapping&&i.height>u.defaultLineHeight*1.5){let v=u.viewState.heightOracle.textHeight,x=Math.floor((d-i.top-(u.defaultLineHeight-v)*.5)/v);m+=x*u.viewState.heightOracle.lineLength}let p=u.state.sliceDoc(i.from,i.to);return i.from+wJ(p,m,u.state.tabSize)}function wde(u,o,i){let l;if(u.nodeType!=3||o!=(l=u.nodeValue.length))return!1;for(let d=u.nextSibling;d;d=d.nextSibling)if(d.nodeType!=1||d.nodeName!="BR")return!1;return yy(u,l-1,l).getBoundingClientRect().left>i}function xde(u,o,i){if(o!=0)return!1;for(let d=u;;){let m=d.parentNode;if(!m||m.nodeType!=1||m.firstChild!=d)return!1;if(m.classList.contains("cm-line"))break;d=m}let l=u.nodeType==1?u.getBoundingClientRect():yy(u,0,Math.max(u.nodeValue.length,1)).getBoundingClientRect();return i-l.left>5}function BJ(u,o){let i=u.lineBlockAt(o);if(Array.isArray(i.type)){for(let l of i.type)if(l.to>o||l.to==o&&(l.to==i.to||l.type==Kc.Text))return l}return i}function Sde(u,o,i,l){let d=BJ(u,o.head),m=!l||d.type!=Kc.Text||!(u.lineWrapping||d.widgetLineBreaks)?null:u.coordsAtPos(o.assoc<0&&o.head>d.from?o.head-1:o.head);if(m){let p=u.dom.getBoundingClientRect(),v=u.textDirectionAt(d.from),x=u.posAtCoords({x:i==(v==Fi.LTR)?p.right-1:p.left+1,y:(m.top+m.bottom)/2});if(x!=null)return rn.cursor(x,i?-1:1)}return rn.cursor(i?d.to:d.from,i?-1:1)}function rne(u,o,i,l){let d=u.state.doc.lineAt(o.head),m=u.bidiSpans(d),p=u.textDirectionAt(d.from);for(let v=o,x=null;;){let k=ade(d,m,p,v,i),T=Ise;if(!k){if(d.number==(i?u.state.doc.lines:1))return v;T=`
`,d=u.state.doc.line(d.number+(i?1:-1)),m=u.bidiSpans(d),k=u.visualLineSide(d,!i)}if(x){if(!x(T))return v}else{if(!l)return k;x=l(T)}v=k}}function Cde(u,o,i){let l=u.state.charCategorizer(o),d=l(i);return m=>{let p=l(m);return d==Wi.Space&&(d=p),d==p}}function kde(u,o,i,l){let d=o.head,m=i?1:-1;if(d==(i?u.state.doc.length:0))return rn.cursor(d,o.assoc);let p=o.goalColumn,v,x=u.contentDOM.getBoundingClientRect(),k=u.coordsAtPos(d,o.assoc||-1),T=u.documentTop;if(k)p==null&&(p=k.left-x.left),v=m<0?k.top:k.bottom;else{let $=u.viewState.lineBlockAt(d);p==null&&(p=Math.min(x.right-x.left,u.defaultCharacterWidth*(d-$.from))),v=(m<0?$.top:$.bottom)+T}let R=x.left+p,N=l!=null?l:u.viewState.heightOracle.textHeight>>1;for(let $=0;;$+=10){let U=v+(N+$)*m,X=Qse(u,{x:R,y:U},!1,m);if(U<x.top||U>x.bottom||(m<0?X<d:X>d)){let J=u.docView.coordsForChar(X),G=!J||U<J.top?-1:1;return rn.cursor(X,G,void 0,p)}}}function L$(u,o,i){for(;;){let l=0;for(let d of u)d.between(o-1,o+1,(m,p,v)=>{if(o>m&&o<p){let x=l||i||(o-m<p-o?-1:1);o=x<0?m:p,l=x}});if(!l)return o}}function LX(u,o,i){let l=L$(u.state.facet(vQ).map(d=>d(u)),i.from,o.head>i.from?-1:1);return l==i.from?i:rn.cursor(l,l<i.from?1:-1)}class Ade{setSelectionOrigin(o){this.lastSelectionOrigin=o,this.lastSelectionTime=Date.now()}constructor(o){this.view=o,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=o.hasFocus,To.safari&&o.contentDOM.addEventListener("input",()=>null),To.gecko&&Vde(o.contentDOM.ownerDocument)}handleEvent(o){!Pde(this.view,o)||this.ignoreDuringComposition(o)||o.type=="keydown"&&this.keydown(o)||this.runHandlers(o.type,o)}runHandlers(o,i){let l=this.handlers[o];if(l){for(let d of l.observers)d(this.view,i);for(let d of l.handlers){if(i.defaultPrevented)break;if(d(this.view,i)){i.preventDefault();break}}}}ensureHandlers(o){let i=Ede(o),l=this.handlers,d=this.view.contentDOM;for(let m in i)if(m!="scroll"){let p=!i[m].handlers.length,v=l[m];v&&p!=!v.handlers.length&&(d.removeEventListener(m,this.handleEvent),v=null),v||d.addEventListener(m,this.handleEvent,{passive:p})}for(let m in l)m!="scroll"&&!i[m]&&d.removeEventListener(m,this.handleEvent);this.handlers=i}keydown(o){if(this.lastKeyCode=o.keyCode,this.lastKeyTime=Date.now(),o.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(o.keyCode!=27&&tre.indexOf(o.keyCode)<0&&(this.view.inputState.lastEscPress=0),To.android&&To.chrome&&!o.synthetic&&(o.keyCode==13||o.keyCode==8))return this.view.observer.delayAndroidKey(o.key,o.keyCode),!0;let i;return To.ios&&!o.synthetic&&!o.altKey&&!o.metaKey&&((i=ere.find(l=>l.keyCode==o.keyCode))&&!o.ctrlKey||Tde.indexOf(o.key)>-1&&o.ctrlKey&&!o.shiftKey)?(this.pendingIOSKey=i||o,setTimeout(()=>this.flushIOSKey(),250),!0):(o.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(o){let i=this.pendingIOSKey;return!i||i.key=="Enter"&&o&&o.from<o.to&&/^\S+$/.test(o.insert.toString())?!1:(this.pendingIOSKey=void 0,a2(this.view.contentDOM,i.key,i.keyCode,i instanceof KeyboardEvent?i:void 0))}ignoreDuringComposition(o){return/^key/.test(o.type)?this.composing>0?!0:To.safari&&!To.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(o){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=o}update(o){this.mouseSelection&&this.mouseSelection.update(o),this.draggedContent&&o.docChanged&&(this.draggedContent=this.draggedContent.map(o.changes)),o.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function ine(u,o){return(i,l)=>{try{return o.call(u,l,i)}catch(d){_u(i.state,d)}}}function Ede(u){let o=Object.create(null);function i(l){return o[l]||(o[l]={observers:[],handlers:[]})}for(let l of u){let d=l.spec;if(d&&d.domEventHandlers)for(let m in d.domEventHandlers){let p=d.domEventHandlers[m];p&&i(m).handlers.push(ine(l.value,p))}if(d&&d.domEventObservers)for(let m in d.domEventObservers){let p=d.domEventObservers[m];p&&i(m).observers.push(ine(l.value,p))}}for(let l in bh)i(l).handlers.push(bh[l]);for(let l in Sf)i(l).observers.push(Sf[l]);return o}const ere=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Tde="dthko",tre=[16,17,18,20,91,92,224,225],h$=6;function m$(u){return Math.max(0,u)*.7+8}function Ode(u,o){return Math.max(Math.abs(u.clientX-o.clientX),Math.abs(u.clientY-o.clientY))}class Dde{constructor(o,i,l,d){this.view=o,this.startEvent=i,this.style=l,this.mustSelect=d,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=i,this.scrollParent=jue(o.contentDOM),this.atoms=o.state.facet(vQ).map(p=>p(o));let m=o.contentDOM.ownerDocument;m.addEventListener("mousemove",this.move=this.move.bind(this)),m.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=o.state.facet(ur.allowMultipleSelections)&&_de(o,i),this.dragging=Rde(o,i)&&rre(i)==1?null:!1}start(o){this.dragging===!1&&this.select(o)}move(o){var i;if(o.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Ode(this.startEvent,o)<10)return;this.select(this.lastEvent=o);let l=0,d=0,m=((i=this.scrollParent)===null||i===void 0?void 0:i.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},p=Xse(this.view);o.clientX-p.left<=m.left+h$?l=-m$(m.left-o.clientX):o.clientX+p.right>=m.right-h$&&(l=m$(o.clientX-m.right)),o.clientY-p.top<=m.top+h$?d=-m$(m.top-o.clientY):o.clientY+p.bottom>=m.bottom-h$&&(d=m$(o.clientY-m.bottom)),this.setScrollSpeed(l,d)}up(o){this.dragging==null&&this.select(this.lastEvent),this.dragging||o.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let o=this.view.contentDOM.ownerDocument;o.removeEventListener("mousemove",this.move),o.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(o,i){this.scrollSpeed={x:o,y:i},o||i?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(o){let i=null;for(let l=0;l<o.ranges.length;l++){let d=o.ranges[l],m=null;if(d.empty){let p=L$(this.atoms,d.from,0);p!=d.from&&(m=rn.cursor(p,-1))}else{let p=L$(this.atoms,d.from,-1),v=L$(this.atoms,d.to,1);(p!=d.from||v!=d.to)&&(m=rn.range(d.from==d.anchor?p:v,d.from==d.head?p:v))}m&&(i||(i=o.ranges.slice()),i[l]=m)}return i?rn.create(i,o.mainIndex):o}select(o){let{view:i}=this,l=this.skipAtoms(this.style.get(o,this.extend,this.multiple));(this.mustSelect||!l.eq(i.state.selection,this.dragging===!1))&&this.view.dispatch({selection:l,userEvent:"select.pointer"}),this.mustSelect=!1}update(o){this.style.update(o)&&setTimeout(()=>this.select(this.lastEvent),20)}}function _de(u,o){let i=u.state.facet(Lse);return i.length?i[0](o):To.mac?o.metaKey:o.ctrlKey}function Mde(u,o){let i=u.state.facet($se);return i.length?i[0](o):To.mac?!o.altKey:!o.ctrlKey}function Rde(u,o){let{main:i}=u.state.selection;if(i.empty)return!1;let l=e6(u.root);if(!l||l.rangeCount==0)return!0;let d=l.getRangeAt(0).getClientRects();for(let m=0;m<d.length;m++){let p=d[m];if(p.left<=o.clientX&&p.right>=o.clientX&&p.top<=o.clientY&&p.bottom>=o.clientY)return!0}return!1}function Pde(u,o){if(!o.bubbles)return!0;if(o.defaultPrevented)return!1;for(let i=o.target,l;i!=u.contentDOM;i=i.parentNode)if(!i||i.nodeType==11||(l=ci.get(i))&&l.ignoreEvent(o))return!1;return!0}const bh=Object.create(null),Sf=Object.create(null),nre=To.ie&&To.ie_version<15||To.ios&&To.webkit_version<604;function Nde(u){let o=u.dom.parentNode;if(!o)return;let i=o.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{u.focus(),i.remove(),ore(u,i.value)},50)}function ore(u,o){let{state:i}=u,l,d=1,m=i.toText(o),p=m.lines==i.selection.ranges.length;if(FJ!=null&&i.selection.ranges.every(x=>x.empty)&&FJ==m.toString()){let x=-1;l=i.changeByRange(k=>{let T=i.doc.lineAt(k.from);if(T.from==x)return{range:k};x=T.from;let R=i.toText((p?m.line(d++).text:o)+i.lineBreak);return{changes:{from:T.from,insert:R},range:rn.cursor(k.from+R.length)}})}else p?l=i.changeByRange(x=>{let k=m.line(d++);return{changes:{from:x.from,to:x.to,insert:k.text},range:rn.cursor(x.from+k.length)}}):l=i.replaceSelection(m);u.dispatch(l,{userEvent:"input.paste",scrollIntoView:!0})}Sf.scroll=u=>{u.inputState.lastScrollTop=u.scrollDOM.scrollTop,u.inputState.lastScrollLeft=u.scrollDOM.scrollLeft};bh.keydown=(u,o)=>(u.inputState.setSelectionOrigin("select"),o.keyCode==27&&(u.inputState.lastEscPress=Date.now()),!1);Sf.touchstart=(u,o)=>{u.inputState.lastTouchTime=Date.now(),u.inputState.setSelectionOrigin("select.pointer")};Sf.touchmove=u=>{u.inputState.setSelectionOrigin("select.pointer")};bh.mousedown=(u,o)=>{if(u.observer.flush(),u.inputState.lastTouchTime>Date.now()-2e3)return!1;let i=null;for(let l of u.state.facet(Hse))if(i=l(u,o),i)break;if(!i&&o.button==0&&(i=Ide(u,o)),i){let l=!u.hasFocus;u.inputState.startMouseSelection(new Dde(u,o,i,l)),l&&u.observer.ignore(()=>yse(u.contentDOM));let d=u.inputState.mouseSelection;if(d)return d.start(o),d.dragging===!1}return!1};function ane(u,o,i,l){if(l==1)return rn.cursor(o,i);if(l==2)return bde(u.state,o,i);{let d=ol.find(u.docView,o),m=u.state.doc.lineAt(d?d.posAtEnd:o),p=d?d.posAtStart:m.from,v=d?d.posAtEnd:m.to;return v<u.state.doc.length&&v==m.to&&v++,rn.range(p,v)}}let sre=(u,o)=>u>=o.top&&u<=o.bottom,lne=(u,o,i)=>sre(o,i)&&u>=i.left&&u<=i.right;function Bde(u,o,i,l){let d=ol.find(u.docView,o);if(!d)return 1;let m=o-d.posAtStart;if(m==0)return 1;if(m==d.length)return-1;let p=d.coordsAt(m,-1);if(p&&lne(i,l,p))return-1;let v=d.coordsAt(m,1);return v&&lne(i,l,v)?1:p&&sre(l,p)?-1:1}function cne(u,o){let i=u.posAtCoords({x:o.clientX,y:o.clientY},!1);return{pos:i,bias:Bde(u,i,o.clientX,o.clientY)}}const Fde=To.ie&&To.ie_version<=11;let une=null,dne=0,fne=0;function rre(u){if(!Fde)return u.detail;let o=une,i=fne;return une=u,fne=Date.now(),dne=!o||i>Date.now()-400&&Math.abs(o.clientX-u.clientX)<2&&Math.abs(o.clientY-u.clientY)<2?(dne+1)%3:1}function Ide(u,o){let i=cne(u,o),l=rre(o),d=u.state.selection;return{update(m){m.docChanged&&(i.pos=m.changes.mapPos(i.pos),d=d.map(m.changes))},get(m,p,v){let x=cne(u,m),k,T=ane(u,x.pos,x.bias,l);if(i.pos!=x.pos&&!p){let R=ane(u,i.pos,i.bias,l),N=Math.min(R.from,T.from),$=Math.max(R.to,T.to);T=N<T.from?rn.range(N,$):rn.range($,N)}return p?d.replaceRange(d.main.extend(T.from,T.to)):v&&l==1&&d.ranges.length>1&&(k=Lde(d,x.pos))?k:v?d.addRange(T):rn.create([T])}}}function Lde(u,o){for(let i=0;i<u.ranges.length;i++){let{from:l,to:d}=u.ranges[i];if(l<=o&&d>=o)return rn.create(u.ranges.slice(0,i).concat(u.ranges.slice(i+1)),u.mainIndex==i?0:u.mainIndex-(u.mainIndex>i?1:0))}return null}bh.dragstart=(u,o)=>{let{selection:{main:i}}=u.state;if(o.target.draggable){let d=u.docView.nearest(o.target);if(d&&d.isWidget){let m=d.posAtStart,p=m+d.length;(m>=i.to||p<=i.from)&&(i=rn.range(m,p))}}let{inputState:l}=u;return l.mouseSelection&&(l.mouseSelection.dragging=!0),l.draggedContent=i,o.dataTransfer&&(o.dataTransfer.setData("Text",u.state.sliceDoc(i.from,i.to)),o.dataTransfer.effectAllowed="copyMove"),!1};bh.dragend=u=>(u.inputState.draggedContent=null,!1);function hne(u,o,i,l){if(!i)return;let d=u.posAtCoords({x:o.clientX,y:o.clientY},!1),{draggedContent:m}=u.inputState,p=l&&m&&Mde(u,o)?{from:m.from,to:m.to}:null,v={from:d,insert:i},x=u.state.changes(p?[p,v]:v);u.focus(),u.dispatch({changes:x,selection:{anchor:x.mapPos(d,-1),head:x.mapPos(d,1)},userEvent:p?"move.drop":"input.drop"}),u.inputState.draggedContent=null}bh.drop=(u,o)=>{if(!o.dataTransfer)return!1;if(u.state.readOnly)return!0;let i=o.dataTransfer.files;if(i&&i.length){let l=Array(i.length),d=0,m=()=>{++d==i.length&&hne(u,o,l.filter(p=>p!=null).join(u.state.lineBreak),!1)};for(let p=0;p<i.length;p++){let v=new FileReader;v.onerror=m,v.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(v.result)||(l[p]=v.result),m()},v.readAsText(i[p])}return!0}else{let l=o.dataTransfer.getData("Text");if(l)return hne(u,o,l,!0),!0}return!1};bh.paste=(u,o)=>{if(u.state.readOnly)return!0;u.observer.flush();let i=nre?null:o.clipboardData;return i?(ore(u,i.getData("text/plain")||i.getData("text/uri-list")),!0):(Nde(u),!1)};function $de(u,o){let i=u.dom.parentNode;if(!i)return;let l=i.appendChild(document.createElement("textarea"));l.style.cssText="position: fixed; left: -10000px; top: 10px",l.value=o,l.focus(),l.selectionEnd=o.length,l.selectionStart=0,setTimeout(()=>{l.remove(),u.focus()},50)}function Hde(u){let o=[],i=[],l=!1;for(let d of u.selection.ranges)d.empty||(o.push(u.sliceDoc(d.from,d.to)),i.push(d));if(!o.length){let d=-1;for(let{from:m}of u.selection.ranges){let p=u.doc.lineAt(m);p.number>d&&(o.push(p.text),i.push({from:p.from,to:Math.min(u.doc.length,p.to+1)})),d=p.number}l=!0}return{text:o.join(u.lineBreak),ranges:i,linewise:l}}let FJ=null;bh.copy=bh.cut=(u,o)=>{let{text:i,ranges:l,linewise:d}=Hde(u.state);if(!i&&!d)return!1;FJ=d?i:null,o.type=="cut"&&!u.state.readOnly&&u.dispatch({changes:l,scrollIntoView:!0,userEvent:"delete.cut"});let m=nre?null:o.clipboardData;return m?(m.clearData(),m.setData("text/plain",i),!0):($de(u,i),!1)};const ire=Kg.define();function are(u,o){let i=[];for(let l of u.facet(Use)){let d=l(u,o);d&&i.push(d)}return i?u.update({effects:i,annotations:ire.of(!0)}):null}function lre(u){setTimeout(()=>{let o=u.hasFocus;if(o!=u.inputState.notifiedFocused){let i=are(u.state,o);i?u.dispatch(i):u.update([])}},10)}Sf.focus=u=>{u.inputState.lastFocusTime=Date.now(),!u.scrollDOM.scrollTop&&(u.inputState.lastScrollTop||u.inputState.lastScrollLeft)&&(u.scrollDOM.scrollTop=u.inputState.lastScrollTop,u.scrollDOM.scrollLeft=u.inputState.lastScrollLeft),lre(u)};Sf.blur=u=>{u.observer.clearSelectionRange(),lre(u)};Sf.compositionstart=Sf.compositionupdate=u=>{u.inputState.compositionFirstChange==null&&(u.inputState.compositionFirstChange=!0),u.inputState.composing<0&&(u.inputState.composing=0)};Sf.compositionend=u=>{u.inputState.composing=-1,u.inputState.compositionEndedAt=Date.now(),u.inputState.compositionPendingKey=!0,u.inputState.compositionPendingChange=u.observer.pendingRecords().length>0,u.inputState.compositionFirstChange=null,To.chrome&&To.android?u.observer.flushSoon():u.inputState.compositionPendingChange?Promise.resolve().then(()=>u.observer.flush()):setTimeout(()=>{u.inputState.composing<0&&u.docView.hasComposition&&u.update([])},50)};Sf.contextmenu=u=>{u.inputState.lastContextMenu=Date.now()};bh.beforeinput=(u,o)=>{var i;let l;if(To.chrome&&To.android&&(l=ere.find(d=>d.inputType==o.inputType))&&(u.observer.delayAndroidKey(l.key,l.keyCode),l.key=="Backspace"||l.key=="Delete")){let d=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var m;(((m=window.visualViewport)===null||m===void 0?void 0:m.height)||0)>d+10&&u.hasFocus&&(u.contentDOM.blur(),u.focus())},100)}return To.ios&&o.inputType=="deleteContentForward"&&u.observer.flushSoon(),To.safari&&o.inputType=="insertText"&&u.inputState.composing>=0&&setTimeout(()=>Sf.compositionend(u,o),20),!1};const mne=new Set;function Vde(u){mne.has(u)||(mne.add(u),u.addEventListener("copy",()=>{}),u.addEventListener("cut",()=>{}))}const gne=["pre-wrap","normal","pre-line","break-spaces"];class zde{constructor(o){this.lineWrapping=o,this.doc=Fr.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(o,i){let l=this.doc.lineAt(i).number-this.doc.lineAt(o).number+1;return this.lineWrapping&&(l+=Math.max(0,Math.ceil((i-o-l*this.lineLength*.5)/this.lineLength))),this.lineHeight*l}heightForLine(o){return this.lineWrapping?(1+Math.max(0,Math.ceil((o-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(o){return this.doc=o,this}mustRefreshForWrapping(o){return gne.indexOf(o)>-1!=this.lineWrapping}mustRefreshForHeights(o){let i=!1;for(let l=0;l<o.length;l++){let d=o[l];d<0?l++:this.heightSamples[Math.floor(d*10)]||(i=!0,this.heightSamples[Math.floor(d*10)]=!0)}return i}refresh(o,i,l,d,m,p){let v=gne.indexOf(o)>-1,x=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=v;if(this.lineWrapping=v,this.lineHeight=i,this.charWidth=l,this.textHeight=d,this.lineLength=m,x){this.heightSamples={};for(let k=0;k<p.length;k++){let T=p[k];T<0?k++:this.heightSamples[Math.floor(T*10)]=!0}}return x}}class Ude{constructor(o,i){this.from=o,this.heights=i,this.index=0}get more(){return this.index<this.heights.length}}class wm{constructor(o,i,l,d,m){this.from=o,this.length=i,this.top=l,this.height=d,this._content=m}get type(){return typeof this._content=="number"?Kc.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof s0?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(o){let i=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(o._content)?o._content:[o]);return new wm(this.from,this.length+o.length,this.top,this.height+o.height,i)}}var Bi=function(u){return u[u.ByPos=0]="ByPos",u[u.ByHeight=1]="ByHeight",u[u.ByPosNoHeight=2]="ByPosNoHeight",u}(Bi||(Bi={}));const $$=.001;class Yc{constructor(o,i,l=2){this.length=o,this.height=i,this.flags=l}get outdated(){return(this.flags&2)>0}set outdated(o){this.flags=(o?2:0)|this.flags&-3}setHeight(o,i){this.height!=i&&(Math.abs(this.height-i)>$$&&(o.heightChanged=!0),this.height=i)}replace(o,i,l){return Yc.of(l)}decomposeLeft(o,i){i.push(this)}decomposeRight(o,i){i.push(this)}applyChanges(o,i,l,d){let m=this,p=l.doc;for(let v=d.length-1;v>=0;v--){let{fromA:x,toA:k,fromB:T,toB:R}=d[v],N=m.lineAt(x,Bi.ByPosNoHeight,l.setDoc(i),0,0),$=N.to>=k?N:m.lineAt(k,Bi.ByPosNoHeight,l,0,0);for(R+=$.to-k,k=$.to;v>0&&N.from<=d[v-1].toA;)x=d[v-1].fromA,T=d[v-1].fromB,v--,x<N.from&&(N=m.lineAt(x,Bi.ByPosNoHeight,l,0,0));T+=N.from-x,x=N.from;let U=yQ.build(l.setDoc(p),o,T,R);m=m.replace(x,k,U)}return m.updateHeight(l,0)}static empty(){return new wd(0,0)}static of(o){if(o.length==1)return o[0];let i=0,l=o.length,d=0,m=0;for(;;)if(i==l)if(d>m*2){let v=o[i-1];v.break?o.splice(--i,1,v.left,null,v.right):o.splice(--i,1,v.left,v.right),l+=1+v.break,d-=v.size}else if(m>d*2){let v=o[l];v.break?o.splice(l,1,v.left,null,v.right):o.splice(l,1,v.left,v.right),l+=2+v.break,m-=v.size}else break;else if(d<m){let v=o[i++];v&&(d+=v.size)}else{let v=o[--l];v&&(m+=v.size)}let p=0;return o[i-1]==null?(p=1,i--):o[i]==null&&(p=1,l++),new Wde(Yc.of(o.slice(0,i)),p,Yc.of(o.slice(l)))}}Yc.prototype.size=1;class cre extends Yc{constructor(o,i,l){super(o,i),this.deco=l}blockAt(o,i,l,d){return new wm(d,this.length,l,this.height,this.deco||0)}lineAt(o,i,l,d,m){return this.blockAt(0,l,d,m)}forEachLine(o,i,l,d,m,p){o<=m+this.length&&i>=m&&p(this.blockAt(0,l,d,m))}updateHeight(o,i=0,l=!1,d){return d&&d.from<=i&&d.more&&this.setHeight(o,d.heights[d.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class wd extends cre{constructor(o,i){super(o,i,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(o,i,l,d){return new wm(d,this.length,l,this.height,this.breaks)}replace(o,i,l){let d=l[0];return l.length==1&&(d instanceof wd||d instanceof Vl&&d.flags&4)&&Math.abs(this.length-d.length)<10?(d instanceof Vl?d=new wd(d.length,this.height):d.height=this.height,this.outdated||(d.outdated=!1),d):Yc.of(l)}updateHeight(o,i=0,l=!1,d){return d&&d.from<=i&&d.more?this.setHeight(o,d.heights[d.index++]):(l||this.outdated)&&this.setHeight(o,Math.max(this.widgetHeight,o.heightForLine(this.length-this.collapsed))+this.breaks*o.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Vl extends Yc{constructor(o){super(o,0)}heightMetrics(o,i){let l=o.doc.lineAt(i).number,d=o.doc.lineAt(i+this.length).number,m=d-l+1,p,v=0;if(o.lineWrapping){let x=Math.min(this.height,o.lineHeight*m);p=x/m,this.length>m+1&&(v=(this.height-x)/(this.length-m-1))}else p=this.height/m;return{firstLine:l,lastLine:d,perLine:p,perChar:v}}blockAt(o,i,l,d){let{firstLine:m,lastLine:p,perLine:v,perChar:x}=this.heightMetrics(i,d);if(i.lineWrapping){let k=d+(o<i.lineHeight?0:Math.round(Math.max(0,Math.min(1,(o-l)/this.height))*this.length)),T=i.doc.lineAt(k),R=v+T.length*x,N=Math.max(l,o-R/2);return new wm(T.from,T.length,N,R,0)}else{let k=Math.max(0,Math.min(p-m,Math.floor((o-l)/v))),{from:T,length:R}=i.doc.line(m+k);return new wm(T,R,l+v*k,v,0)}}lineAt(o,i,l,d,m){if(i==Bi.ByHeight)return this.blockAt(o,l,d,m);if(i==Bi.ByPosNoHeight){let{from:$,to:U}=l.doc.lineAt(o);return new wm($,U-$,0,0,0)}let{firstLine:p,perLine:v,perChar:x}=this.heightMetrics(l,m),k=l.doc.lineAt(o),T=v+k.length*x,R=k.number-p,N=d+v*R+x*(k.from-m-R);return new wm(k.from,k.length,Math.max(d,Math.min(N,d+this.height-T)),T,0)}forEachLine(o,i,l,d,m,p){o=Math.max(o,m),i=Math.min(i,m+this.length);let{firstLine:v,perLine:x,perChar:k}=this.heightMetrics(l,m);for(let T=o,R=d;T<=i;){let N=l.doc.lineAt(T);if(T==o){let U=N.number-v;R+=x*U+k*(o-m-U)}let $=x+k*N.length;p(new wm(N.from,N.length,R,$,0)),R+=$,T=N.to+1}}replace(o,i,l){let d=this.length-i;if(d>0){let m=l[l.length-1];m instanceof Vl?l[l.length-1]=new Vl(m.length+d):l.push(null,new Vl(d-1))}if(o>0){let m=l[0];m instanceof Vl?l[0]=new Vl(o+m.length):l.unshift(new Vl(o-1),null)}return Yc.of(l)}decomposeLeft(o,i){i.push(new Vl(o-1),null)}decomposeRight(o,i){i.push(null,new Vl(this.length-o-1))}updateHeight(o,i=0,l=!1,d){let m=i+this.length;if(d&&d.from<=i+this.length&&d.more){let p=[],v=Math.max(i,d.from),x=-1;for(d.from>i&&p.push(new Vl(d.from-i-1).updateHeight(o,i));v<=m&&d.more;){let T=o.doc.lineAt(v).length;p.length&&p.push(null);let R=d.heights[d.index++];x==-1?x=R:Math.abs(R-x)>=$$&&(x=-2);let N=new wd(T,R);N.outdated=!1,p.push(N),v+=T+1}v<=m&&p.push(null,new Vl(m-v).updateHeight(o,v));let k=Yc.of(p);return(x<0||Math.abs(k.height-this.height)>=$$||Math.abs(x-this.heightMetrics(o,i).perLine)>=$$)&&(o.heightChanged=!0),k}else(l||this.outdated)&&(this.setHeight(o,o.heightForGap(i,i+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Wde extends Yc{constructor(o,i,l){super(o.length+i+l.length,o.height+l.height,i|(o.outdated||l.outdated?2:0)),this.left=o,this.right=l,this.size=o.size+l.size}get break(){return this.flags&1}blockAt(o,i,l,d){let m=l+this.left.height;return o<m?this.left.blockAt(o,i,l,d):this.right.blockAt(o,i,m,d+this.left.length+this.break)}lineAt(o,i,l,d,m){let p=d+this.left.height,v=m+this.left.length+this.break,x=i==Bi.ByHeight?o<p:o<v,k=x?this.left.lineAt(o,i,l,d,m):this.right.lineAt(o,i,l,p,v);if(this.break||(x?k.to<v:k.from>v))return k;let T=i==Bi.ByPosNoHeight?Bi.ByPosNoHeight:Bi.ByPos;return x?k.join(this.right.lineAt(v,T,l,p,v)):this.left.lineAt(v,T,l,d,m).join(k)}forEachLine(o,i,l,d,m,p){let v=d+this.left.height,x=m+this.left.length+this.break;if(this.break)o<x&&this.left.forEachLine(o,i,l,d,m,p),i>=x&&this.right.forEachLine(o,i,l,v,x,p);else{let k=this.lineAt(x,Bi.ByPos,l,d,m);o<k.from&&this.left.forEachLine(o,k.from-1,l,d,m,p),k.to>=o&&k.from<=i&&p(k),i>k.to&&this.right.forEachLine(k.to+1,i,l,v,x,p)}}replace(o,i,l){let d=this.left.length+this.break;if(i<d)return this.balanced(this.left.replace(o,i,l),this.right);if(o>this.left.length)return this.balanced(this.left,this.right.replace(o-d,i-d,l));let m=[];o>0&&this.decomposeLeft(o,m);let p=m.length;for(let v of l)m.push(v);if(o>0&&pne(m,p-1),i<this.length){let v=m.length;this.decomposeRight(i,m),pne(m,v)}return Yc.of(m)}decomposeLeft(o,i){let l=this.left.length;if(o<=l)return this.left.decomposeLeft(o,i);i.push(this.left),this.break&&(l++,o>=l&&i.push(null)),o>l&&this.right.decomposeLeft(o-l,i)}decomposeRight(o,i){let l=this.left.length,d=l+this.break;if(o>=d)return this.right.decomposeRight(o-d,i);o<l&&this.left.decomposeRight(o,i),this.break&&o<d&&i.push(null),i.push(this.right)}balanced(o,i){return o.size>2*i.size||i.size>2*o.size?Yc.of(this.break?[o,null,i]:[o,i]):(this.left=o,this.right=i,this.height=o.height+i.height,this.outdated=o.outdated||i.outdated,this.size=o.size+i.size,this.length=o.length+this.break+i.length,this)}updateHeight(o,i=0,l=!1,d){let{left:m,right:p}=this,v=i+m.length+this.break,x=null;return d&&d.from<=i+m.length&&d.more?x=m=m.updateHeight(o,i,l,d):m.updateHeight(o,i,l),d&&d.from<=v+p.length&&d.more?x=p=p.updateHeight(o,v,l,d):p.updateHeight(o,v,l),x?this.balanced(m,p):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function pne(u,o){let i,l;u[o]==null&&(i=u[o-1])instanceof Vl&&(l=u[o+1])instanceof Vl&&u.splice(o-1,3,new Vl(i.length+1+l.length))}const jde=5;class yQ{constructor(o,i){this.pos=o,this.oracle=i,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=o}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(o,i){if(this.lineStart>-1){let l=Math.min(i,this.lineEnd),d=this.nodes[this.nodes.length-1];d instanceof wd?d.length+=l-this.pos:(l>this.pos||!this.isCovered)&&this.nodes.push(new wd(l-this.pos,-1)),this.writtenTo=l,i>l&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=i}point(o,i,l){if(o<i||l.heightRelevant){let d=l.widget?l.widget.estimatedHeight:0,m=l.widget?l.widget.lineBreaks:0;d<0&&(d=this.oracle.lineHeight);let p=i-o;l.block?this.addBlock(new cre(p,d,l)):(p||m||d>=jde)&&this.addLineDeco(d,m,p)}else i>o&&this.span(o,i);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:o,to:i}=this.oracle.doc.lineAt(this.pos);this.lineStart=o,this.lineEnd=i,this.writtenTo<o&&((this.writtenTo<o-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,o-1)),this.nodes.push(null)),this.pos>o&&this.nodes.push(new wd(this.pos-o,-1)),this.writtenTo=this.pos}blankContent(o,i){let l=new Vl(i-o);return this.oracle.doc.lineAt(o).to==i&&(l.flags|=4),l}ensureLine(){this.enterLine();let o=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(o instanceof wd)return o;let i=new wd(0,-1);return this.nodes.push(i),i}addBlock(o){this.enterLine();let i=o.deco;i&&i.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(o),this.writtenTo=this.pos=this.pos+o.length,i&&i.endSide>0&&(this.covering=o)}addLineDeco(o,i,l){let d=this.ensureLine();d.length+=l,d.collapsed+=l,d.widgetHeight=Math.max(d.widgetHeight,o),d.breaks+=i,this.writtenTo=this.pos=this.pos+l}finish(o){let i=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(i instanceof wd)&&!this.isCovered?this.nodes.push(new wd(0,-1)):(this.writtenTo<this.pos||i==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let l=o;for(let d of this.nodes)d instanceof wd&&d.updateHeight(this.oracle,l),l+=d?d.length:1;return this.nodes}static build(o,i,l,d){let m=new yQ(l,o);return xr.spans(i,l,d,m,0),m.finish(l)}}function Zde(u,o,i){let l=new qde;return xr.compare(u,o,i,l,0),l.changes}class qde{constructor(){this.changes=[]}compareRange(){}comparePoint(o,i,l,d){(o<i||l&&l.heightRelevant||d&&d.heightRelevant)&&DJ(o,i,this.changes,5)}}function Gde(u,o){let i=u.getBoundingClientRect(),l=u.ownerDocument,d=l.defaultView||window,m=Math.max(0,i.left),p=Math.min(d.innerWidth,i.right),v=Math.max(0,i.top),x=Math.min(d.innerHeight,i.bottom);for(let k=u.parentNode;k&&k!=l.body;)if(k.nodeType==1){let T=k,R=window.getComputedStyle(T);if((T.scrollHeight>T.clientHeight||T.scrollWidth>T.clientWidth)&&R.overflow!="visible"){let N=T.getBoundingClientRect();m=Math.max(m,N.left),p=Math.min(p,N.right),v=Math.max(v,N.top),x=k==u.parentNode?N.bottom:Math.min(x,N.bottom)}k=R.position=="absolute"||R.position=="fixed"?T.offsetParent:T.parentNode}else if(k.nodeType==11)k=k.host;else break;return{left:m-i.left,right:Math.max(m,p)-i.left,top:v-(i.top+o),bottom:Math.max(v,x)-(i.top+o)}}function Kde(u,o){let i=u.getBoundingClientRect();return{left:0,right:i.right-i.left,top:o,bottom:i.bottom-(i.top+o)}}class $X{constructor(o,i,l){this.from=o,this.to=i,this.size=l}static same(o,i){if(o.length!=i.length)return!1;for(let l=0;l<o.length;l++){let d=o[l],m=i[l];if(d.from!=m.from||d.to!=m.to||d.size!=m.size)return!1}return!0}draw(o,i){return as.replace({widget:new Yde(this.size*(i?o.scaleY:o.scaleX),i)}).range(this.from,this.to)}}class Yde extends Yg{constructor(o,i){super(),this.size=o,this.vertical=i}eq(o){return o.size==this.size&&o.vertical==this.vertical}toDOM(){let o=document.createElement("div");return this.vertical?o.style.height=this.size+"px":(o.style.width=this.size+"px",o.style.height="2px",o.style.display="inline-block"),o}get estimatedHeight(){return this.vertical?this.size:-1}}class bne{constructor(o){this.state=o,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=vne,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Fi.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let i=o.facet(bQ).some(l=>typeof l!="function"&&l.class=="cm-lineWrapping");this.heightOracle=new zde(i),this.stateDeco=o.facet(q_).filter(l=>typeof l!="function"),this.heightMap=Yc.empty().applyChanges(this.stateDeco,Fr.empty,this.heightOracle.setDoc(o.doc),[new wf(0,0,0,o.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=as.set(this.lineGaps.map(l=>l.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let o=[this.viewport],{main:i}=this.state.selection;for(let l=0;l<=1;l++){let d=l?i.head:i.anchor;if(!o.some(({from:m,to:p})=>d>=m&&d<=p)){let{from:m,to:p}=this.lineBlockAt(d);o.push(new g$(m,p))}}this.viewports=o.sort((l,d)=>l.from-d.from),this.scaler=this.heightMap.height<=7e6?vne:new Qde(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,o=>{this.viewportLines.push(this.scaler.scale==1?o:N_(o,this.scaler))})}update(o,i=null){this.state=o.state;let l=this.stateDeco;this.stateDeco=this.state.facet(q_).filter(T=>typeof T!="function");let d=o.changedRanges,m=wf.extendWithRanges(d,Zde(l,this.stateDeco,o?o.changes:rl.empty(this.state.doc.length))),p=this.heightMap.height,v=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,o.startState.doc,this.heightOracle.setDoc(this.state.doc),m),this.heightMap.height!=p&&(o.flags|=2),v?(this.scrollAnchorPos=o.changes.mapPos(v.from,-1),this.scrollAnchorHeight=v.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let x=m.length?this.mapViewport(this.viewport,o.changes):this.viewport;(i&&(i.range.head<x.from||i.range.head>x.to)||!this.viewportIsAppropriate(x))&&(x=this.getViewport(0,i));let k=!o.changes.empty||o.flags&2||x.from!=this.viewport.from||x.to!=this.viewport.to;this.viewport=x,this.updateForViewport(),k&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,o.changes))),o.flags|=this.computeVisibleRanges(),i&&(this.scrollTarget=i),!this.mustEnforceCursorAssoc&&o.selectionSet&&o.view.lineWrapping&&o.state.selection.main.empty&&o.state.selection.main.assoc&&!o.state.facet(jse)&&(this.mustEnforceCursorAssoc=!0)}measure(o){let i=o.contentDOM,l=window.getComputedStyle(i),d=this.heightOracle,m=l.whiteSpace;this.defaultTextDirection=l.direction=="rtl"?Fi.RTL:Fi.LTR;let p=this.heightOracle.mustRefreshForWrapping(m),v=i.getBoundingClientRect(),x=p||this.mustMeasureContent||this.contentDOMHeight!=v.height;this.contentDOMHeight=v.height,this.mustMeasureContent=!1;let k=0,T=0;if(v.width&&v.height){let{scaleX:be,scaleY:He}=vse(i,v);(be>.005&&Math.abs(this.scaleX-be)>.005||He>.005&&Math.abs(this.scaleY-He)>.005)&&(this.scaleX=be,this.scaleY=He,k|=8,p=x=!0)}let R=(parseInt(l.paddingTop)||0)*this.scaleY,N=(parseInt(l.paddingBottom)||0)*this.scaleY;(this.paddingTop!=R||this.paddingBottom!=N)&&(this.paddingTop=R,this.paddingBottom=N,k|=10),this.editorWidth!=o.scrollDOM.clientWidth&&(d.lineWrapping&&(x=!0),this.editorWidth=o.scrollDOM.clientWidth,k|=8);let $=o.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=$&&(this.scrollAnchorHeight=-1,this.scrollTop=$),this.scrolledToBottom=xse(o.scrollDOM);let U=(this.printing?Kde:Gde)(i,this.paddingTop),X=U.top-this.pixelViewport.top,J=U.bottom-this.pixelViewport.bottom;this.pixelViewport=U;let G=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(G!=this.inView&&(this.inView=G,G&&(x=!0)),!this.inView&&!this.scrollTarget)return 0;let le=v.width;if((this.contentDOMWidth!=le||this.editorHeight!=o.scrollDOM.clientHeight)&&(this.contentDOMWidth=v.width,this.editorHeight=o.scrollDOM.clientHeight,k|=8),x){let be=o.docView.measureVisibleLineHeights(this.viewport);if(d.mustRefreshForHeights(be)&&(p=!0),p||d.lineWrapping&&Math.abs(le-this.contentDOMWidth)>d.charWidth){let{lineHeight:He,charWidth:Re,textHeight:K}=o.docView.measureTextSize();p=He>0&&d.refresh(m,He,Re,K,le/Re,be),p&&(o.docView.minWidth=0,k|=8)}X>0&&J>0?T=Math.max(X,J):X<0&&J<0&&(T=Math.min(X,J)),d.heightChanged=!1;for(let He of this.viewports){let Re=He.from==this.viewport.from?be:o.docView.measureVisibleLineHeights(He);this.heightMap=(p?Yc.empty().applyChanges(this.stateDeco,Fr.empty,this.heightOracle,[new wf(0,0,0,o.state.doc.length)]):this.heightMap).updateHeight(d,0,p,new Ude(He.from,Re))}d.heightChanged&&(k|=2)}let Z=!this.viewportIsAppropriate(this.viewport,T)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Z&&(this.viewport=this.getViewport(T,this.scrollTarget)),this.updateForViewport(),(k&2||Z)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(p?[]:this.lineGaps,o)),k|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,o.docView.enforceCursorAssoc()),k}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(o,i){let l=.5-Math.max(-.5,Math.min(.5,o/1e3/2)),d=this.heightMap,m=this.heightOracle,{visibleTop:p,visibleBottom:v}=this,x=new g$(d.lineAt(p-l*1e3,Bi.ByHeight,m,0,0).from,d.lineAt(v+(1-l)*1e3,Bi.ByHeight,m,0,0).to);if(i){let{head:k}=i.range;if(k<x.from||k>x.to){let T=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),R=d.lineAt(k,Bi.ByPos,m,0,0),N;i.y=="center"?N=(R.top+R.bottom)/2-T/2:i.y=="start"||i.y=="nearest"&&k<x.from?N=R.top:N=R.bottom-T,x=new g$(d.lineAt(N-1e3/2,Bi.ByHeight,m,0,0).from,d.lineAt(N+T+1e3/2,Bi.ByHeight,m,0,0).to)}}return x}mapViewport(o,i){let l=i.mapPos(o.from,-1),d=i.mapPos(o.to,1);return new g$(this.heightMap.lineAt(l,Bi.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(d,Bi.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:o,to:i},l=0){if(!this.inView)return!0;let{top:d}=this.heightMap.lineAt(o,Bi.ByPos,this.heightOracle,0,0),{bottom:m}=this.heightMap.lineAt(i,Bi.ByPos,this.heightOracle,0,0),{visibleTop:p,visibleBottom:v}=this;return(o==0||d<=p-Math.max(10,Math.min(-l,250)))&&(i==this.state.doc.length||m>=v+Math.max(10,Math.min(l,250)))&&d>p-2*1e3&&m<v+2*1e3}mapLineGaps(o,i){if(!o.length||i.empty)return o;let l=[];for(let d of o)i.touchesRange(d.from,d.to)||l.push(new $X(i.mapPos(d.from),i.mapPos(d.to),d.size));return l}ensureLineGaps(o,i){let l=this.heightOracle.lineWrapping,d=l?1e4:2e3,m=d>>1,p=d<<1;if(this.defaultTextDirection!=Fi.LTR&&!l)return[];let v=[],x=(k,T,R,N)=>{if(T-k<m)return;let $=this.state.selection.main,U=[$.from];$.empty||U.push($.to);for(let J of U)if(J>k&&J<T){x(k,J-10,R,N),x(J+10,T,R,N);return}let X=Jde(o,J=>J.from>=R.from&&J.to<=R.to&&Math.abs(J.from-k)<m&&Math.abs(J.to-T)<m&&!U.some(G=>J.from<G&&J.to>G));if(!X){if(T<R.to&&i&&l&&i.visibleRanges.some(J=>J.from<=T&&J.to>=T)){let J=i.moveToLineBoundary(rn.cursor(T),!1,!0).head;J>k&&(T=J)}X=new $X(k,T,this.gapSize(R,k,T,N))}v.push(X)};for(let k of this.viewportLines){if(k.length<p)continue;let T=Xde(k.from,k.to,this.stateDeco);if(T.total<p)continue;let R=this.scrollTarget?this.scrollTarget.range.head:null,N,$;if(l){let U=d/this.heightOracle.lineLength*this.heightOracle.lineHeight,X,J;if(R!=null){let G=b$(T,R),le=((this.visibleBottom-this.visibleTop)/2+U)/k.height;X=G-le,J=G+le}else X=(this.visibleTop-k.top-U)/k.height,J=(this.visibleBottom-k.top+U)/k.height;N=p$(T,X),$=p$(T,J)}else{let U=T.total*this.heightOracle.charWidth,X=d*this.heightOracle.charWidth,J,G;if(R!=null){let le=b$(T,R),Z=((this.pixelViewport.right-this.pixelViewport.left)/2+X)/U;J=le-Z,G=le+Z}else J=(this.pixelViewport.left-X)/U,G=(this.pixelViewport.right+X)/U;N=p$(T,J),$=p$(T,G)}N>k.from&&x(k.from,N,k,T),$<k.to&&x($,k.to,k,T)}return v}gapSize(o,i,l,d){let m=b$(d,l)-b$(d,i);return this.heightOracle.lineWrapping?o.height*m:d.total*this.heightOracle.charWidth*m}updateLineGaps(o){$X.same(o,this.lineGaps)||(this.lineGaps=o,this.lineGapDeco=as.set(o.map(i=>i.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let o=this.stateDeco;this.lineGaps.length&&(o=o.concat(this.lineGapDeco));let i=[];xr.spans(o,this.viewport.from,this.viewport.to,{span(d,m){i.push({from:d,to:m})},point(){}},20);let l=i.length!=this.visibleRanges.length||this.visibleRanges.some((d,m)=>d.from!=i[m].from||d.to!=i[m].to);return this.visibleRanges=i,l?4:0}lineBlockAt(o){return o>=this.viewport.from&&o<=this.viewport.to&&this.viewportLines.find(i=>i.from<=o&&i.to>=o)||N_(this.heightMap.lineAt(o,Bi.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(o){return N_(this.heightMap.lineAt(this.scaler.fromDOM(o),Bi.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(o){let i=this.lineBlockAtHeight(o+8);return i.from>=this.viewport.from||this.viewportLines[0].top-o>200?i:this.viewportLines[0]}elementAtHeight(o){return N_(this.heightMap.blockAt(this.scaler.fromDOM(o),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class g${constructor(o,i){this.from=o,this.to=i}}function Xde(u,o,i){let l=[],d=u,m=0;return xr.spans(i,u,o,{span(){},point(p,v){p>d&&(l.push({from:d,to:p}),m+=p-d),d=v}},20),d<o&&(l.push({from:d,to:o}),m+=o-d),{total:m,ranges:l}}function p$({total:u,ranges:o},i){if(i<=0)return o[0].from;if(i>=1)return o[o.length-1].to;let l=Math.floor(u*i);for(let d=0;;d++){let{from:m,to:p}=o[d],v=p-m;if(l<=v)return m+l;l-=v}}function b$(u,o){let i=0;for(let{from:l,to:d}of u.ranges){if(o<=d){i+=o-l;break}i+=d-l}return i/u.total}function Jde(u,o){for(let i of u)if(o(i))return i}const vne={toDOM(u){return u},fromDOM(u){return u},scale:1};class Qde{constructor(o,i,l){let d=0,m=0,p=0;this.viewports=l.map(({from:v,to:x})=>{let k=i.lineAt(v,Bi.ByPos,o,0,0).top,T=i.lineAt(x,Bi.ByPos,o,0,0).bottom;return d+=T-k,{from:v,to:x,top:k,bottom:T,domTop:0,domBottom:0}}),this.scale=(7e6-d)/(i.height-d);for(let v of this.viewports)v.domTop=p+(v.top-m)*this.scale,p=v.domBottom=v.domTop+(v.bottom-v.top),m=v.bottom}toDOM(o){for(let i=0,l=0,d=0;;i++){let m=i<this.viewports.length?this.viewports[i]:null;if(!m||o<m.top)return d+(o-l)*this.scale;if(o<=m.bottom)return m.domTop+(o-m.top);l=m.bottom,d=m.domBottom}}fromDOM(o){for(let i=0,l=0,d=0;;i++){let m=i<this.viewports.length?this.viewports[i]:null;if(!m||o<m.domTop)return l+(o-d)/this.scale;if(o<=m.domBottom)return m.top+(o-m.domTop);l=m.bottom,d=m.domBottom}}}function N_(u,o){if(o.scale==1)return u;let i=o.toDOM(u.top),l=o.toDOM(u.bottom);return new wm(u.from,u.length,i,l-i,Array.isArray(u._content)?u._content.map(d=>N_(d,o)):u._content)}const v$=Oo.define({combine:u=>u.join(" ")}),IJ=Oo.define({combine:u=>u.indexOf(!0)>-1}),LJ=n0.newName(),ure=n0.newName(),dre=n0.newName(),fre={"&light":"."+ure,"&dark":"."+dre};function $J(u,o,i){return new n0(o,{finish(l){return/&/.test(l)?l.replace(/&\w*/,d=>{if(d=="&")return u;if(!i||!i[d])throw new RangeError(`Unsupported selector: ${d}`);return i[d]}):u+" "+l}})}const efe=$J("."+LJ,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},fre),B_="￿";class tfe{constructor(o,i){this.points=o,this.text="",this.lineSeparator=i.facet(ur.lineSeparator)}append(o){this.text+=o}lineBreak(){this.text+=B_}readRange(o,i){if(!o)return this;let l=o.parentNode;for(let d=o;;){this.findPointBefore(l,d);let m=this.text.length;this.readNode(d);let p=d.nextSibling;if(p==i)break;let v=ci.get(d),x=ci.get(p);(v&&x?v.breakAfter:(v?v.breakAfter:t6(d))||t6(p)&&(d.nodeName!="BR"||d.cmIgnore)&&this.text.length>m)&&this.lineBreak(),d=p}return this.findPointBefore(l,i),this}readTextNode(o){let i=o.nodeValue;for(let l of this.points)l.node==o&&(l.pos=this.text.length+Math.min(l.offset,i.length));for(let l=0,d=this.lineSeparator?null:/\r\n?|\n/g;;){let m=-1,p=1,v;if(this.lineSeparator?(m=i.indexOf(this.lineSeparator,l),p=this.lineSeparator.length):(v=d.exec(i))&&(m=v.index,p=v[0].length),this.append(i.slice(l,m<0?i.length:m)),m<0)break;if(this.lineBreak(),p>1)for(let x of this.points)x.node==o&&x.pos>this.text.length&&(x.pos-=p-1);l=m+p}}readNode(o){if(o.cmIgnore)return;let i=ci.get(o),l=i&&i.overrideDOMText;if(l!=null){this.findPointInside(o,l.length);for(let d=l.iter();!d.next().done;)d.lineBreak?this.lineBreak():this.append(d.value)}else o.nodeType==3?this.readTextNode(o):o.nodeName=="BR"?o.nextSibling&&this.lineBreak():o.nodeType==1&&this.readRange(o.firstChild,null)}findPointBefore(o,i){for(let l of this.points)l.node==o&&o.childNodes[l.offset]==i&&(l.pos=this.text.length)}findPointInside(o,i){for(let l of this.points)(o.nodeType==3?l.node==o:o.contains(l.node))&&(l.pos=this.text.length+(nfe(o,l.node,l.offset)?i:0))}}function nfe(u,o,i){for(;;){if(!o||i<Zg(o))return!1;if(o==u)return!0;i=vy(o)+1,o=o.parentNode}}class yne{constructor(o,i){this.node=o,this.offset=i,this.pos=-1}}class ofe{constructor(o,i,l,d){this.typeOver=d,this.bounds=null,this.text="";let{impreciseHead:m,impreciseAnchor:p}=o.docView;if(o.state.readOnly&&i>-1)this.newSel=null;else if(i>-1&&(this.bounds=o.docView.domBoundsAround(i,l,0))){let v=m||p?[]:ife(o),x=new tfe(v,o.state);x.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=x.text,this.newSel=afe(v,this.bounds.from)}else{let v=o.observer.selectionRange,x=m&&m.node==v.focusNode&&m.offset==v.focusOffset||!CJ(o.contentDOM,v.focusNode)?o.state.selection.main.head:o.docView.posFromDOM(v.focusNode,v.focusOffset),k=p&&p.node==v.anchorNode&&p.offset==v.anchorOffset||!CJ(o.contentDOM,v.anchorNode)?o.state.selection.main.anchor:o.docView.posFromDOM(v.anchorNode,v.anchorOffset),T=o.viewport;if((To.ios||To.chrome)&&o.state.selection.main.empty&&x!=k&&(T.from>0||T.to<o.state.doc.length)){let R=Math.min(x,k),N=Math.max(x,k),$=T.from-R,U=T.to-N;($==0||$==1||R==0)&&(U==0||U==-1||N==o.state.doc.length)&&(x=0,k=o.state.doc.length)}this.newSel=rn.single(k,x)}}}function hre(u,o){let i,{newSel:l}=o,d=u.state.selection.main,m=u.inputState.lastKeyTime>Date.now()-100?u.inputState.lastKeyCode:-1;if(o.bounds){let{from:p,to:v}=o.bounds,x=d.from,k=null;(m===8||To.android&&o.text.length<v-p)&&(x=d.to,k="end");let T=rfe(u.state.doc.sliceString(p,v,B_),o.text,x-p,k);T&&(To.chrome&&m==13&&T.toB==T.from+2&&o.text.slice(T.from,T.toB)==B_+B_&&T.toB--,i={from:p+T.from,to:p+T.toA,insert:Fr.of(o.text.slice(T.from,T.toB).split(B_))})}else l&&(!u.hasFocus&&u.state.facet(T6)||l.main.eq(d))&&(l=null);if(!i&&!l)return!1;if(!i&&o.typeOver&&!d.empty&&l&&l.main.empty?i={from:d.from,to:d.to,insert:u.state.doc.slice(d.from,d.to)}:i&&i.from>=d.from&&i.to<=d.to&&(i.from!=d.from||i.to!=d.to)&&d.to-d.from-(i.to-i.from)<=4?i={from:d.from,to:d.to,insert:u.state.doc.slice(d.from,i.from).append(i.insert).append(u.state.doc.slice(i.to,d.to))}:(To.mac||To.android)&&i&&i.from==i.to&&i.from==d.head-1&&/^\. ?$/.test(i.insert.toString())&&u.contentDOM.getAttribute("autocorrect")=="off"?(l&&i.insert.length==2&&(l=rn.single(l.main.anchor-1,l.main.head-1)),i={from:d.from,to:d.to,insert:Fr.of([" "])}):To.chrome&&i&&i.from==i.to&&i.from==d.head&&i.insert.toString()==`
 `&&u.lineWrapping&&(l&&(l=rn.single(l.main.anchor-1,l.main.head-1)),i={from:d.from,to:d.to,insert:Fr.of([" "])}),i){if(To.ios&&u.inputState.flushIOSKey(i)||To.android&&(i.to==d.to&&(i.from==d.from||i.from==d.from-1&&u.state.sliceDoc(i.from,d.from)==" ")&&i.insert.length==1&&i.insert.lines==2&&a2(u.contentDOM,"Enter",13)||(i.from==d.from-1&&i.to==d.to&&i.insert.length==0||m==8&&i.insert.length<i.to-i.from&&i.to>d.head)&&a2(u.contentDOM,"Backspace",8)||i.from==d.from&&i.to==d.to+1&&i.insert.length==0&&a2(u.contentDOM,"Delete",46)))return!0;let p=i.insert.toString();u.inputState.composing>=0&&u.inputState.composing++;let v,x=()=>v||(v=sfe(u,i,l));return u.state.facet(zse).some(k=>k(u,i.from,i.to,p,x))||u.dispatch(x()),!0}else if(l&&!l.main.eq(d)){let p=!1,v="select";return u.inputState.lastSelectionTime>Date.now()-50&&(u.inputState.lastSelectionOrigin=="select"&&(p=!0),v=u.inputState.lastSelectionOrigin),u.dispatch({selection:l,scrollIntoView:p,userEvent:v}),!0}else return!1}function sfe(u,o,i){let l,d=u.state,m=d.selection.main;if(o.from>=m.from&&o.to<=m.to&&o.to-o.from>=(m.to-m.from)/3&&(!i||i.main.empty&&i.main.from==o.from+o.insert.length)&&u.inputState.composing<0){let v=m.from<o.from?d.sliceDoc(m.from,o.from):"",x=m.to>o.to?d.sliceDoc(o.to,m.to):"";l=d.replaceSelection(u.state.toText(v+o.insert.sliceString(0,void 0,u.state.lineBreak)+x))}else{let v=d.changes(o),x=i&&i.main.to<=v.newLength?i.main:void 0;if(d.selection.ranges.length>1&&u.inputState.composing>=0&&o.to<=m.to&&o.to>=m.to-10){let k=u.state.sliceDoc(o.from,o.to),T,R=i&&Jse(u,i.main.head);if(R){let U=o.insert.length-(o.to-o.from);T={from:R.from,to:R.to-U}}else T=u.state.doc.lineAt(m.head);let N=m.to-o.to,$=m.to-m.from;l=d.changeByRange(U=>{if(U.from==m.from&&U.to==m.to)return{changes:v,range:x||U.map(v)};let X=U.to-N,J=X-k.length;if(U.to-U.from!=$||u.state.sliceDoc(J,X)!=k||U.to>=T.from&&U.from<=T.to)return{range:U};let G=d.changes({from:J,to:X,insert:o.insert}),le=U.to-m.to;return{changes:G,range:x?rn.range(Math.max(0,x.anchor+le),Math.max(0,x.head+le)):U.map(G)}})}else l={changes:v,selection:x&&d.selection.replaceRange(x)}}let p="input.type";return(u.composing||u.inputState.compositionPendingChange&&u.inputState.compositionEndedAt>Date.now()-50)&&(u.inputState.compositionPendingChange=!1,p+=".compose",u.inputState.compositionFirstChange&&(p+=".start",u.inputState.compositionFirstChange=!1)),d.update(l,{userEvent:p,scrollIntoView:!0})}function rfe(u,o,i,l){let d=Math.min(u.length,o.length),m=0;for(;m<d&&u.charCodeAt(m)==o.charCodeAt(m);)m++;if(m==d&&u.length==o.length)return null;let p=u.length,v=o.length;for(;p>0&&v>0&&u.charCodeAt(p-1)==o.charCodeAt(v-1);)p--,v--;if(l=="end"){let x=Math.max(0,m-Math.min(p,v));i-=p+x-m}if(p<m&&u.length<o.length){let x=i<=m&&i>=p?m-i:0;m-=x,v=m+(v-p),p=m}else if(v<m){let x=i<=m&&i>=v?m-i:0;m-=x,p=m+(p-v),v=m}return{from:m,toA:p,toB:v}}function ife(u){let o=[];if(u.root.activeElement!=u.contentDOM)return o;let{anchorNode:i,anchorOffset:l,focusNode:d,focusOffset:m}=u.observer.selectionRange;return i&&(o.push(new yne(i,l)),(d!=i||m!=l)&&o.push(new yne(d,m))),o}function afe(u,o){if(u.length==0)return null;let i=u[0].pos,l=u.length==2?u[1].pos:i;return i>-1&&l>-1?rn.single(i+o,l+o):null}const lfe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},HX=To.ie&&To.ie_version<=11;class cfe{constructor(o){this.view=o,this.active=!1,this.selectionRange=new Zue,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=o.contentDOM,this.observer=new MutationObserver(i=>{for(let l of i)this.queue.push(l);(To.ie&&To.ie_version<=11||To.ios&&o.composing)&&i.some(l=>l.type=="childList"&&l.removedNodes.length||l.type=="characterData"&&l.oldValue.length>l.target.nodeValue.length)?this.flushSoon():this.flush()}),HX&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var i;((i=this.view.docView)===null||i===void 0?void 0:i.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(o.scrollDOM)),this.addWindowListeners(this.win=o.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(i=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),i.length>0&&i[i.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(i=>{i.length>0&&i[i.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(o){this.view.inputState.runHandlers("scroll",o),this.intersecting&&this.view.measure()}onScroll(o){this.intersecting&&this.flush(!1),this.onScrollChanged(o)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(o){o.type=="change"&&!o.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(o){if(this.gapIntersection&&(o.length!=this.gaps.length||this.gaps.some((i,l)=>i!=o[l]))){this.gapIntersection.disconnect();for(let i of o)this.gapIntersection.observe(i);this.gaps=o}}onSelectionChange(o){let i=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:l}=this,d=this.selectionRange;if(l.state.facet(T6)?l.root.activeElement!=this.dom:!I$(l.dom,d))return;let m=d.anchorNode&&l.docView.nearest(d.anchorNode);if(m&&m.ignoreEvent(o)){i||(this.selectionChanged=!1);return}(To.ie&&To.ie_version<=11||To.android&&To.chrome)&&!l.state.selection.main.empty&&d.focusNode&&$_(d.focusNode,d.focusOffset,d.anchorNode,d.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:o}=this,i=e6(o.root);if(!i)return!1;let l=To.safari&&o.root.nodeType==11&&zue(this.dom.ownerDocument)==this.dom&&ufe(this.view,i)||i;if(!l||this.selectionRange.eq(l))return!1;let d=I$(this.dom,l);return d&&!this.selectionChanged&&o.inputState.lastFocusTime>Date.now()-200&&o.inputState.lastTouchTime<Date.now()-300&&Gue(this.dom,l)?(this.view.inputState.lastFocusTime=0,o.docView.updateSelection(),!1):(this.selectionRange.setRange(l),d&&(this.selectionChanged=!0),!0)}setSelectionRange(o,i){this.selectionRange.set(o.node,o.offset,i.node,i.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let o=0,i=null;for(let l=this.dom;l;)if(l.nodeType==1)!i&&o<this.scrollTargets.length&&this.scrollTargets[o]==l?o++:i||(i=this.scrollTargets.slice(0,o)),i&&i.push(l),l=l.assignedSlot||l.parentNode;else if(l.nodeType==11)l=l.host;else break;if(o<this.scrollTargets.length&&!i&&(i=this.scrollTargets.slice(0,o)),i){for(let l of this.scrollTargets)l.removeEventListener("scroll",this.onScroll);for(let l of this.scrollTargets=i)l.addEventListener("scroll",this.onScroll)}}ignore(o){if(!this.active)return o();try{return this.stop(),o()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,lfe),HX&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),HX&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(o,i){var l;if(!this.delayedAndroidKey){let d=()=>{let m=this.delayedAndroidKey;m&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=m.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&m.force&&a2(this.dom,m.key,m.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(d)}(!this.delayedAndroidKey||o=="Enter")&&(this.delayedAndroidKey={key:o,keyCode:i,force:this.lastChange<Date.now()-50||!!(!((l=this.delayedAndroidKey)===null||l===void 0)&&l.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let o of this.observer.takeRecords())this.queue.push(o);return this.queue}processRecords(){let o=this.pendingRecords();o.length&&(this.queue=[]);let i=-1,l=-1,d=!1;for(let m of o){let p=this.readMutation(m);p&&(p.typeOver&&(d=!0),i==-1?{from:i,to:l}=p:(i=Math.min(p.from,i),l=Math.max(p.to,l)))}return{from:i,to:l,typeOver:d}}readChange(){let{from:o,to:i,typeOver:l}=this.processRecords(),d=this.selectionChanged&&I$(this.dom,this.selectionRange);if(o<0&&!d)return null;o>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let m=new ofe(this.view,o,i,l);return this.view.docView.domChanged={newSel:m.newSel?m.newSel.main:null},m}flush(o=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;o&&this.readSelectionRange();let i=this.readChange();if(!i)return this.view.requestMeasure(),!1;let l=this.view.state,d=hre(this.view,i);return this.view.state==l&&this.view.update([]),d}readMutation(o){let i=this.view.docView.nearest(o.target);if(!i||i.ignoreMutation(o))return null;if(i.markDirty(o.type=="attributes"),o.type=="attributes"&&(i.flags|=4),o.type=="childList"){let l=wne(i,o.previousSibling||o.target.previousSibling,-1),d=wne(i,o.nextSibling||o.target.nextSibling,1);return{from:l?i.posAfter(l):i.posAtStart,to:d?i.posBefore(d):i.posAtEnd,typeOver:!1}}else return o.type=="characterData"?{from:i.posAtStart,to:i.posAtEnd,typeOver:o.target.nodeValue==o.oldValue}:null}setWindow(o){o!=this.win&&(this.removeWindowListeners(this.win),this.win=o,this.addWindowListeners(this.win))}addWindowListeners(o){o.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):o.addEventListener("beforeprint",this.onPrint),o.addEventListener("scroll",this.onScroll),o.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(o){o.removeEventListener("scroll",this.onScroll),o.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):o.removeEventListener("beforeprint",this.onPrint),o.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var o,i,l;this.stop(),(o=this.intersection)===null||o===void 0||o.disconnect(),(i=this.gapIntersection)===null||i===void 0||i.disconnect(),(l=this.resizeScroll)===null||l===void 0||l.disconnect();for(let d of this.scrollTargets)d.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function wne(u,o,i){for(;o;){let l=ci.get(o);if(l&&l.parent==u)return l;let d=o.parentNode;o=d!=u.dom?d:i>0?o.nextSibling:o.previousSibling}return null}function xne(u,o){let i=o.startContainer,l=o.startOffset,d=o.endContainer,m=o.endOffset,p=u.docView.domAtPos(u.state.selection.main.anchor);return $_(p.node,p.offset,d,m)&&([i,l,d,m]=[d,m,i,l]),{anchorNode:i,anchorOffset:l,focusNode:d,focusOffset:m}}function ufe(u,o){if(o.getComposedRanges){let d=o.getComposedRanges(u.root)[0];if(d)return xne(u,d)}let i=null;function l(d){d.preventDefault(),d.stopImmediatePropagation(),i=d.getTargetRanges()[0]}return u.contentDOM.addEventListener("beforeinput",l,!0),u.dom.ownerDocument.execCommand("indent"),u.contentDOM.removeEventListener("beforeinput",l,!0),i?xne(u,i):null}class wo{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(o={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),o.parent&&o.parent.appendChild(this.dom);let{dispatch:i}=o;this.dispatchTransactions=o.dispatchTransactions||i&&(l=>l.forEach(d=>i(d,this)))||(l=>this.update(l)),this.dispatch=this.dispatch.bind(this),this._root=o.root||que(o.parent)||document,this.viewState=new bne(o.state||ur.create(o)),o.scrollTo&&o.scrollTo.is(f$)&&(this.viewState.scrollTarget=o.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(R_).map(l=>new FX(l));for(let l of this.plugins)l.update(this);this.observer=new cfe(this),this.inputState=new Ade(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Qte(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...o){let i=o.length==1&&o[0]instanceof il?o:o.length==1&&Array.isArray(o[0])?o[0]:[this.state.update(...o)];this.dispatchTransactions(i,this)}update(o){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let i=!1,l=!1,d,m=this.state;for(let N of o){if(N.startState!=m)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");m=N.state}if(this.destroyed){this.viewState.state=m;return}let p=this.hasFocus,v=0,x=null;o.some(N=>N.annotation(ire))?(this.inputState.notifiedFocused=p,v=1):p!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=p,x=are(m,p),x||(v=1));let k=this.observer.delayedAndroidKey,T=null;if(k?(this.observer.clearDelayedAndroidKey(),T=this.observer.readChange(),(T&&!this.state.doc.eq(m.doc)||!this.state.selection.eq(m.selection))&&(T=null)):this.observer.clear(),m.facet(ur.phrases)!=this.state.facet(ur.phrases))return this.setState(m);d=n6.create(this,m,o),d.flags|=v;let R=this.viewState.scrollTarget;try{this.updateState=2;for(let N of o){if(R&&(R=R.map(N.changes)),N.scrollIntoView){let{main:$}=N.state.selection;R=new l2($.empty?$:rn.cursor($.head,$.head>$.anchor?-1:1))}for(let $ of N.effects)$.is(f$)&&(R=$.value.clip(this.state))}this.viewState.update(d,R),this.bidiCache=o6.update(this.bidiCache,d.changes),d.empty||(this.updatePlugins(d),this.inputState.update(d)),i=this.docView.update(d),this.state.facet(P_)!=this.styleModules&&this.mountStyles(),l=this.updateAttrs(),this.showAnnouncements(o),this.docView.updateSelection(i,o.some(N=>N.isUserEvent("select.pointer")))}finally{this.updateState=0}if(d.startState.facet(v$)!=d.state.facet(v$)&&(this.viewState.mustMeasureContent=!0),(i||l||R||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),i&&this.docViewUpdate(),!d.empty)for(let N of this.state.facet(PJ))try{N(d)}catch($){_u(this.state,$,"update listener")}(x||T)&&Promise.resolve().then(()=>{x&&this.state==x.startState&&this.dispatch(x),T&&!hre(this,T)&&k.force&&a2(this.contentDOM,k.key,k.keyCode)})}setState(o){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=o;return}this.updateState=2;let i=this.hasFocus;try{for(let l of this.plugins)l.destroy(this);this.viewState=new bne(o),this.plugins=o.facet(R_).map(l=>new FX(l)),this.pluginMap.clear();for(let l of this.plugins)l.update(this);this.docView.destroy(),this.docView=new Qte(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(o){let i=o.startState.facet(R_),l=o.state.facet(R_);if(i!=l){let d=[];for(let m of l){let p=i.indexOf(m);if(p<0)d.push(new FX(m));else{let v=this.plugins[p];v.mustUpdate=o,d.push(v)}}for(let m of this.plugins)m.mustUpdate!=o&&m.destroy(this);this.plugins=d,this.pluginMap.clear()}else for(let d of this.plugins)d.mustUpdate=o;for(let d=0;d<this.plugins.length;d++)this.plugins[d].update(this);i!=l&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let o of this.plugins){let i=o.value;if(i&&i.docViewUpdate)try{i.docViewUpdate(this)}catch(l){_u(this.state,l,"doc view update listener")}}}measure(o=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,o&&this.observer.forceFlush();let i=null,l=this.scrollDOM,d=l.scrollTop*this.scaleY,{scrollAnchorPos:m,scrollAnchorHeight:p}=this.viewState;Math.abs(d-this.viewState.scrollTop)>1&&(p=-1),this.viewState.scrollAnchorHeight=-1;try{for(let v=0;;v++){if(p<0)if(xse(l))m=-1,p=this.viewState.heightMap.height;else{let $=this.viewState.scrollAnchorAt(d);m=$.from,p=$.top}this.updateState=1;let x=this.viewState.measure(this);if(!x&&!this.measureRequests.length&&this.viewState.scrollTarget==null||v>5)break;let k=[];x&4||([this.measureRequests,k]=[k,this.measureRequests]);let T=k.map($=>{try{return $.read(this)}catch(U){return _u(this.state,U),Sne}}),R=n6.create(this,this.state,[]),N=!1;R.flags|=x,i?i.flags|=x:i=R,this.updateState=2,R.empty||(this.updatePlugins(R),this.inputState.update(R),this.updateAttrs(),N=this.docView.update(R),N&&this.docViewUpdate());for(let $=0;$<k.length;$++)if(T[$]!=Sne)try{let U=k[$];U.write&&U.write(T[$],this)}catch(U){_u(this.state,U)}if(N&&this.docView.updateSelection(!0),!R.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,p=-1;continue}else{let U=(m<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(m).top)-p;if(U>1||U<-1){d=d+U,l.scrollTop=d/this.scaleY,p=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let v of this.state.facet(PJ))v(i)}get themeClasses(){return LJ+" "+(this.state.facet(IJ)?dre:ure)+" "+this.state.facet(v$)}updateAttrs(){let o=Cne(this,qse,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(T6)?"true":"false",class:"cm-content",style:`${To.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),Cne(this,bQ,i);let l=this.observer.ignore(()=>{let d=OJ(this.contentDOM,this.contentAttrs,i),m=OJ(this.dom,this.editorAttrs,o);return d||m});return this.editorAttrs=o,this.contentAttrs=i,l}showAnnouncements(o){let i=!0;for(let l of o)for(let d of l.effects)if(d.is(wo.announce)){i&&(this.announceDOM.textContent=""),i=!1;let m=this.announceDOM.appendChild(document.createElement("div"));m.textContent=d.value}}mountStyles(){this.styleModules=this.state.facet(P_);let o=this.state.facet(wo.cspNonce);n0.mount(this.root,this.styleModules.concat(efe).reverse(),o?{nonce:o}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(o){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),o){if(this.measureRequests.indexOf(o)>-1)return;if(o.key!=null){for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===o.key){this.measureRequests[i]=o;return}}this.measureRequests.push(o)}}plugin(o){let i=this.pluginMap.get(o);return(i===void 0||i&&i.spec!=o)&&this.pluginMap.set(o,i=this.plugins.find(l=>l.spec==o)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(o){return this.readMeasured(),this.viewState.elementAtHeight(o)}lineBlockAtHeight(o){return this.readMeasured(),this.viewState.lineBlockAtHeight(o)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(o){return this.viewState.lineBlockAt(o)}get contentHeight(){return this.viewState.contentHeight}moveByChar(o,i,l){return LX(this,o,rne(this,o,i,l))}moveByGroup(o,i){return LX(this,o,rne(this,o,i,l=>Cde(this,o.head,l)))}visualLineSide(o,i){let l=this.bidiSpans(o),d=this.textDirectionAt(o.from),m=l[i?l.length-1:0];return rn.cursor(m.side(i,d)+o.from,m.forward(!i,d)?1:-1)}moveToLineBoundary(o,i,l=!0){return Sde(this,o,i,l)}moveVertically(o,i,l){return LX(this,o,kde(this,o,i,l))}domAtPos(o){return this.docView.domAtPos(o)}posAtDOM(o,i=0){return this.docView.posFromDOM(o,i)}posAtCoords(o,i=!0){return this.readMeasured(),Qse(this,o,i)}coordsAtPos(o,i=1){this.readMeasured();let l=this.docView.coordsAt(o,i);if(!l||l.left==l.right)return l;let d=this.state.doc.lineAt(o),m=this.bidiSpans(d),p=m[G1.find(m,o-d.from,-1,i)];return A6(l,p.dir==Fi.LTR==i>0)}coordsForChar(o){return this.readMeasured(),this.docView.coordsForChar(o)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(o){return!this.state.facet(Wse)||o<this.viewport.from||o>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(o))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(o){if(o.length>dfe)return Fse(o.length);let i=this.textDirectionAt(o.from),l;for(let m of this.bidiCache)if(m.from==o.from&&m.dir==i&&(m.fresh||Bse(m.isolates,l=Jte(this,o))))return m.order;l||(l=Jte(this,o));let d=ide(o.text,i,l);return this.bidiCache.push(new o6(o.from,o.to,i,l,!0,d)),d}get hasFocus(){var o;return(this.dom.ownerDocument.hasFocus()||To.safari&&((o=this.inputState)===null||o===void 0?void 0:o.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{yse(this.contentDOM),this.docView.updateSelection()})}setRoot(o){this._root!=o&&(this._root=o,this.observer.setWindow((o.nodeType==9?o:o.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let o of this.plugins)o.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(o,i={}){return f$.of(new l2(typeof o=="number"?rn.cursor(o):o,i.y,i.x,i.yMargin,i.xMargin))}scrollSnapshot(){let{scrollTop:o,scrollLeft:i}=this.scrollDOM,l=this.viewState.scrollAnchorAt(o);return f$.of(new l2(rn.cursor(l.from),"start","start",l.top-o,i,!0))}static domEventHandlers(o){return Ta.define(()=>({}),{eventHandlers:o})}static domEventObservers(o){return Ta.define(()=>({}),{eventObservers:o})}static theme(o,i){let l=n0.newName(),d=[v$.of(l),P_.of($J(`.${l}`,o))];return i&&i.dark&&d.push(IJ.of(!0)),d}static baseTheme(o){return Ay.lowest(P_.of($J("."+LJ,o,fre)))}static findFromDOM(o){var i;let l=o.querySelector(".cm-content"),d=l&&ci.get(l)||ci.get(o);return((i=d==null?void 0:d.rootView)===null||i===void 0?void 0:i.view)||null}}wo.styleModule=P_;wo.inputHandler=zse;wo.scrollHandler=Zse;wo.focusChangeEffect=Use;wo.perLineTextDirection=Wse;wo.exceptionSink=Vse;wo.updateListener=PJ;wo.editable=T6;wo.mouseSelectionStyle=Hse;wo.dragMovesSelection=$se;wo.clickAddsSelectionRange=Lse;wo.decorations=q_;wo.outerDecorations=Gse;wo.atomicRanges=vQ;wo.bidiIsolatedRanges=Kse;wo.scrollMargins=Yse;wo.darkTheme=IJ;wo.cspNonce=Oo.define({combine:u=>u.length?u[0]:""});wo.contentAttributes=bQ;wo.editorAttributes=qse;wo.lineWrapping=wo.contentAttributes.of({class:"cm-lineWrapping"});wo.announce=Us.define();const dfe=4096,Sne={};class o6{constructor(o,i,l,d,m,p){this.from=o,this.to=i,this.dir=l,this.isolates=d,this.fresh=m,this.order=p}static update(o,i){if(i.empty&&!o.some(m=>m.fresh))return o;let l=[],d=o.length?o[o.length-1].dir:Fi.LTR;for(let m=Math.max(0,o.length-10);m<o.length;m++){let p=o[m];p.dir==d&&!i.touchesRange(p.from,p.to)&&l.push(new o6(i.mapPos(p.from,1),i.mapPos(p.to,-1),p.dir,p.isolates,!1,p.order))}return l}}function Cne(u,o,i){for(let l=u.state.facet(o),d=l.length-1;d>=0;d--){let m=l[d],p=typeof m=="function"?m(u):m;p&&TJ(p,i)}return i}const ffe=To.mac?"mac":To.windows?"win":To.linux?"linux":"key";function hfe(u,o){const i=u.split(/-(?!$)/);let l=i[i.length-1];l=="Space"&&(l=" ");let d,m,p,v;for(let x=0;x<i.length-1;++x){const k=i[x];if(/^(cmd|meta|m)$/i.test(k))v=!0;else if(/^a(lt)?$/i.test(k))d=!0;else if(/^(c|ctrl|control)$/i.test(k))m=!0;else if(/^s(hift)?$/i.test(k))p=!0;else if(/^mod$/i.test(k))o=="mac"?v=!0:m=!0;else throw new Error("Unrecognized modifier name: "+k)}return d&&(l="Alt-"+l),m&&(l="Ctrl-"+l),v&&(l="Meta-"+l),p&&(l="Shift-"+l),l}function y$(u,o,i){return o.altKey&&(u="Alt-"+u),o.ctrlKey&&(u="Ctrl-"+u),o.metaKey&&(u="Meta-"+u),i!==!1&&o.shiftKey&&(u="Shift-"+u),u}const mfe=Ay.default(wo.domEventHandlers({keydown(u,o){return gre(mre(o.state),u,o,"editor")}})),O6=Oo.define({enables:mfe}),kne=new WeakMap;function mre(u){let o=u.facet(O6),i=kne.get(o);return i||kne.set(o,i=bfe(o.reduce((l,d)=>l.concat(d),[]))),i}function gfe(u,o,i){return gre(mre(u.state),o,u,i)}let U1=null;const pfe=4e3;function bfe(u,o=ffe){let i=Object.create(null),l=Object.create(null),d=(p,v)=>{let x=l[p];if(x==null)l[p]=v;else if(x!=v)throw new Error("Key binding "+p+" is used both as a regular binding and as a multi-stroke prefix")},m=(p,v,x,k,T)=>{var R,N;let $=i[p]||(i[p]=Object.create(null)),U=v.split(/ (?!$)/).map(G=>hfe(G,o));for(let G=1;G<U.length;G++){let le=U.slice(0,G).join(" ");d(le,!0),$[le]||($[le]={preventDefault:!0,stopPropagation:!1,run:[Z=>{let be=U1={view:Z,prefix:le,scope:p};return setTimeout(()=>{U1==be&&(U1=null)},pfe),!0}]})}let X=U.join(" ");d(X,!1);let J=$[X]||($[X]={preventDefault:!1,stopPropagation:!1,run:((N=(R=$._any)===null||R===void 0?void 0:R.run)===null||N===void 0?void 0:N.slice())||[]});x&&J.run.push(x),k&&(J.preventDefault=!0),T&&(J.stopPropagation=!0)};for(let p of u){let v=p.scope?p.scope.split(" "):["editor"];if(p.any)for(let k of v){let T=i[k]||(i[k]=Object.create(null));T._any||(T._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let R in T)T[R].run.push(p.any)}let x=p[o]||p.key;if(x)for(let k of v)m(k,x,p.run,p.preventDefault,p.stopPropagation),p.shift&&m(k,"Shift-"+x,p.shift,p.preventDefault,p.stopPropagation)}return i}function gre(u,o,i,l){let d=Vue(o),m=Ul(d,0),p=gf(m)==d.length&&d!=" ",v="",x=!1,k=!1,T=!1;U1&&U1.view==i&&U1.scope==l&&(v=U1.prefix+" ",tre.indexOf(o.keyCode)<0&&(k=!0,U1=null));let R=new Set,N=J=>{if(J){for(let G of J.run)if(!R.has(G)&&(R.add(G),G(i,o)))return J.stopPropagation&&(T=!0),!0;J.preventDefault&&(J.stopPropagation&&(T=!0),k=!0)}return!1},$=u[l],U,X;return $&&(N($[v+y$(d,o,!p)])?x=!0:p&&(o.altKey||o.metaKey||o.ctrlKey)&&!(To.windows&&o.ctrlKey&&o.altKey)&&(U=o0[o.keyCode])&&U!=d?(N($[v+y$(U,o,!0)])||o.shiftKey&&(X=Z_[o.keyCode])!=d&&X!=U&&N($[v+y$(X,o,!1)]))&&(x=!0):p&&o.shiftKey&&N($[v+y$(d,o,!0)])&&(x=!0),!x&&N($._any)&&(x=!0)),k&&(x=!0),x&&T&&o.stopPropagation(),x}class dM{constructor(o,i,l,d,m){this.className=o,this.left=i,this.top=l,this.width=d,this.height=m}draw(){let o=document.createElement("div");return o.className=this.className,this.adjust(o),o}update(o,i){return i.className!=this.className?!1:(this.adjust(o),!0)}adjust(o){o.style.left=this.left+"px",o.style.top=this.top+"px",this.width!=null&&(o.style.width=this.width+"px"),o.style.height=this.height+"px"}eq(o){return this.left==o.left&&this.top==o.top&&this.width==o.width&&this.height==o.height&&this.className==o.className}static forRange(o,i,l){if(l.empty){let d=o.coordsAtPos(l.head,l.assoc||1);if(!d)return[];let m=pre(o);return[new dM(i,d.left-m.left,d.top-m.top,null,d.bottom-d.top)]}else return vfe(o,i,l)}}function pre(u){let o=u.scrollDOM.getBoundingClientRect();return{left:(u.textDirection==Fi.LTR?o.left:o.right-u.scrollDOM.clientWidth*u.scaleX)-u.scrollDOM.scrollLeft*u.scaleX,top:o.top-u.scrollDOM.scrollTop*u.scaleY}}function Ane(u,o,i){let l=rn.cursor(o);return{from:Math.max(i.from,u.moveToLineBoundary(l,!1,!0).from),to:Math.min(i.to,u.moveToLineBoundary(l,!0,!0).from),type:Kc.Text}}function vfe(u,o,i){if(i.to<=u.viewport.from||i.from>=u.viewport.to)return[];let l=Math.max(i.from,u.viewport.from),d=Math.min(i.to,u.viewport.to),m=u.textDirection==Fi.LTR,p=u.contentDOM,v=p.getBoundingClientRect(),x=pre(u),k=p.querySelector(".cm-line"),T=k&&window.getComputedStyle(k),R=v.left+(T?parseInt(T.paddingLeft)+Math.min(0,parseInt(T.textIndent)):0),N=v.right-(T?parseInt(T.paddingRight):0),$=BJ(u,l),U=BJ(u,d),X=$.type==Kc.Text?$:null,J=U.type==Kc.Text?U:null;if(X&&(u.lineWrapping||$.widgetLineBreaks)&&(X=Ane(u,l,X)),J&&(u.lineWrapping||U.widgetLineBreaks)&&(J=Ane(u,d,J)),X&&J&&X.from==J.from)return le(Z(i.from,i.to,X));{let He=X?Z(i.from,null,X):be($,!1),Re=J?Z(null,i.to,J):be(U,!0),K=[];return(X||$).to<(J||U).from-(X&&J?1:0)||$.widgetLineBreaks>1&&He.bottom+u.defaultLineHeight/2<Re.top?K.push(G(R,He.bottom,N,Re.top)):He.bottom<Re.top&&u.elementAtHeight((He.bottom+Re.top)/2).type==Kc.Text&&(He.bottom=Re.top=(He.bottom+Re.top)/2),le(He).concat(K).concat(le(Re))}function G(He,Re,K,Ie){return new dM(o,He-x.left,Re-x.top-.01,K-He,Ie-Re+.01)}function le({top:He,bottom:Re,horizontal:K}){let Ie=[];for(let $e=0;$e<K.length;$e+=2)Ie.push(G(K[$e],He,K[$e+1],Re));return Ie}function Z(He,Re,K){let Ie=1e9,$e=-1e9,Ue=[];function ae(ne,ge,O,Ke,he){let at=u.coordsAtPos(ne,ne==K.to?-2:2),qt=u.coordsAtPos(O,O==K.from?2:-2);!at||!qt||(Ie=Math.min(at.top,qt.top,Ie),$e=Math.max(at.bottom,qt.bottom,$e),he==Fi.LTR?Ue.push(m&&ge?R:at.left,m&&Ke?N:qt.right):Ue.push(!m&&Ke?R:qt.left,!m&&ge?N:at.right))}let Oe=He!=null?He:K.from,ht=Re!=null?Re:K.to;for(let ne of u.visibleRanges)if(ne.to>Oe&&ne.from<ht)for(let ge=Math.max(ne.from,Oe),O=Math.min(ne.to,ht);;){let Ke=u.state.doc.lineAt(ge);for(let he of u.bidiSpans(Ke)){let at=he.from+Ke.from,qt=he.to+Ke.from;if(at>=O)break;qt>ge&&ae(Math.max(at,ge),He==null&&at<=Oe,Math.min(qt,O),Re==null&&qt>=ht,he.dir)}if(ge=Ke.to+1,ge>=O)break}return Ue.length==0&&ae(Oe,He==null,ht,Re==null,u.textDirection),{top:Ie,bottom:$e,horizontal:Ue}}function be(He,Re){let K=v.top+(Re?He.top:He.bottom);return{top:K,bottom:K,horizontal:[]}}}function yfe(u,o){return u.constructor==o.constructor&&u.eq(o)}class wfe{constructor(o,i){this.view=o,this.layer=i,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=o.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),i.above&&this.dom.classList.add("cm-layer-above"),i.class&&this.dom.classList.add(i.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(o.state),o.requestMeasure(this.measureReq),i.mount&&i.mount(this.dom,o)}update(o){o.startState.facet(H$)!=o.state.facet(H$)&&this.setOrder(o.state),(this.layer.update(o,this.dom)||o.geometryChanged)&&(this.scale(),o.view.requestMeasure(this.measureReq))}docViewUpdate(o){this.layer.updateOnDocViewUpdate!==!1&&o.requestMeasure(this.measureReq)}setOrder(o){let i=0,l=o.facet(H$);for(;i<l.length&&l[i]!=this.layer;)i++;this.dom.style.zIndex=String((this.layer.above?150:-1)-i)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:o,scaleY:i}=this.view;(o!=this.scaleX||i!=this.scaleY)&&(this.scaleX=o,this.scaleY=i,this.dom.style.transform=`scale(${1/o}, ${1/i})`)}draw(o){if(o.length!=this.drawn.length||o.some((i,l)=>!yfe(i,this.drawn[l]))){let i=this.dom.firstChild,l=0;for(let d of o)d.update&&i&&d.constructor&&this.drawn[l].constructor&&d.update(i,this.drawn[l])?(i=i.nextSibling,l++):this.dom.insertBefore(d.draw(),i);for(;i;){let d=i.nextSibling;i.remove(),i=d}this.drawn=o}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const H$=Oo.define();function bre(u){return[Ta.define(o=>new wfe(o,u)),H$.of(u)]}const vre=!To.ios,G_=Oo.define({combine(u){return km(u,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(o,i)=>Math.min(o,i),drawRangeCursor:(o,i)=>o||i})}});function xfe(u={}){return[G_.of(u),Sfe,Cfe,kfe,jse.of(!0)]}function yre(u){return u.startState.facet(G_)!=u.state.facet(G_)}const Sfe=bre({above:!0,markers(u){let{state:o}=u,i=o.facet(G_),l=[];for(let d of o.selection.ranges){let m=d==o.selection.main;if(d.empty?!m||vre:i.drawRangeCursor){let p=m?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",v=d.empty?d:rn.cursor(d.head,d.head>d.anchor?-1:1);for(let x of dM.forRange(u,p,v))l.push(x)}}return l},update(u,o){u.transactions.some(l=>l.selection)&&(o.style.animationName=o.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let i=yre(u);return i&&Ene(u.state,o),u.docChanged||u.selectionSet||i},mount(u,o){Ene(o.state,u)},class:"cm-cursorLayer"});function Ene(u,o){o.style.animationDuration=u.facet(G_).cursorBlinkRate+"ms"}const Cfe=bre({above:!1,markers(u){return u.state.selection.ranges.map(o=>o.empty?[]:dM.forRange(u,"cm-selectionBackground",o)).reduce((o,i)=>o.concat(i))},update(u,o){return u.docChanged||u.selectionSet||u.viewportChanged||yre(u)},class:"cm-selectionLayer"}),HJ={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};vre&&(HJ[".cm-line"].caretColor="transparent !important",HJ[".cm-content"]={caretColor:"transparent !important"});const kfe=Ay.highest(wo.theme(HJ)),wre=Us.define({map(u,o){return u==null?null:o.mapPos(u)}}),F_=Kl.define({create(){return null},update(u,o){return u!=null&&(u=o.changes.mapPos(u)),o.effects.reduce((i,l)=>l.is(wre)?l.value:i,u)}}),Afe=Ta.fromClass(class{constructor(u){this.view=u,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(u){var o;let i=u.state.field(F_);i==null?this.cursor!=null&&((o=this.cursor)===null||o===void 0||o.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(u.startState.field(F_)!=i||u.docChanged||u.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:u}=this,o=u.state.field(F_),i=o!=null&&u.coordsAtPos(o);if(!i)return null;let l=u.scrollDOM.getBoundingClientRect();return{left:i.left-l.left+u.scrollDOM.scrollLeft*u.scaleX,top:i.top-l.top+u.scrollDOM.scrollTop*u.scaleY,height:i.bottom-i.top}}drawCursor(u){if(this.cursor){let{scaleX:o,scaleY:i}=this.view;u?(this.cursor.style.left=u.left/o+"px",this.cursor.style.top=u.top/i+"px",this.cursor.style.height=u.height/i+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(u){this.view.state.field(F_)!=u&&this.view.dispatch({effects:wre.of(u)})}},{eventObservers:{dragover(u){this.setDropPos(this.view.posAtCoords({x:u.clientX,y:u.clientY}))},dragleave(u){(u.target==this.view.contentDOM||!this.view.contentDOM.contains(u.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Efe(){return[F_,Afe]}function Tne(u,o,i,l,d){o.lastIndex=0;for(let m=u.iterRange(i,l),p=i,v;!m.next().done;p+=m.value.length)if(!m.lineBreak)for(;v=o.exec(m.value);)d(p+v.index,v)}function Tfe(u,o){let i=u.visibleRanges;if(i.length==1&&i[0].from==u.viewport.from&&i[0].to==u.viewport.to)return i;let l=[];for(let{from:d,to:m}of i)d=Math.max(u.state.doc.lineAt(d).from,d-o),m=Math.min(u.state.doc.lineAt(m).to,m+o),l.length&&l[l.length-1].to>=d?l[l.length-1].to=m:l.push({from:d,to:m});return l}class Ofe{constructor(o){const{regexp:i,decoration:l,decorate:d,boundary:m,maxLength:p=1e3}=o;if(!i.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=i,d)this.addMatch=(v,x,k,T)=>d(T,k,k+v[0].length,v,x);else if(typeof l=="function")this.addMatch=(v,x,k,T)=>{let R=l(v,x,k);R&&T(k,k+v[0].length,R)};else if(l)this.addMatch=(v,x,k,T)=>T(k,k+v[0].length,l);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=m,this.maxLength=p}createDeco(o){let i=new t0,l=i.add.bind(i);for(let{from:d,to:m}of Tfe(o,this.maxLength))Tne(o.state.doc,this.regexp,d,m,(p,v)=>this.addMatch(v,o,p,l));return i.finish()}updateDeco(o,i){let l=1e9,d=-1;return o.docChanged&&o.changes.iterChanges((m,p,v,x)=>{x>o.view.viewport.from&&v<o.view.viewport.to&&(l=Math.min(v,l),d=Math.max(x,d))}),o.viewportChanged||d-l>1e3?this.createDeco(o.view):d>-1?this.updateRange(o.view,i.map(o.changes),l,d):i}updateRange(o,i,l,d){for(let m of o.visibleRanges){let p=Math.max(m.from,l),v=Math.min(m.to,d);if(v>p){let x=o.state.doc.lineAt(p),k=x.to<v?o.state.doc.lineAt(v):x,T=Math.max(m.from,x.from),R=Math.min(m.to,k.to);if(this.boundary){for(;p>x.from;p--)if(this.boundary.test(x.text[p-1-x.from])){T=p;break}for(;v<k.to;v++)if(this.boundary.test(k.text[v-k.from])){R=v;break}}let N=[],$,U=(X,J,G)=>N.push(G.range(X,J));if(x==k)for(this.regexp.lastIndex=T-x.from;($=this.regexp.exec(x.text))&&$.index<R-x.from;)this.addMatch($,o,$.index+x.from,U);else Tne(o.state.doc,this.regexp,T,R,(X,J)=>this.addMatch(J,o,X,U));i=i.update({filterFrom:T,filterTo:R,filter:(X,J)=>X<T||J>R,add:N})}}return i}}const VJ=/x/.unicode!=null?"gu":"g",Dfe=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,VJ),_fe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let VX=null;function Mfe(){var u;if(VX==null&&typeof document!="undefined"&&document.body){let o=document.body.style;VX=((u=o.tabSize)!==null&&u!==void 0?u:o.MozTabSize)!=null}return VX||!1}const V$=Oo.define({combine(u){let o=km(u,{render:null,specialChars:Dfe,addSpecialChars:null});return(o.replaceTabs=!Mfe())&&(o.specialChars=new RegExp("	|"+o.specialChars.source,VJ)),o.addSpecialChars&&(o.specialChars=new RegExp(o.specialChars.source+"|"+o.addSpecialChars.source,VJ)),o}});function Rfe(u={}){return[V$.of(u),Pfe()]}let One=null;function Pfe(){return One||(One=Ta.fromClass(class{constructor(u){this.view=u,this.decorations=as.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(u.state.facet(V$)),this.decorations=this.decorator.createDeco(u)}makeDecorator(u){return new Ofe({regexp:u.specialChars,decoration:(o,i,l)=>{let{doc:d}=i.state,m=Ul(o[0],0);if(m==9){let p=d.lineAt(l),v=i.state.tabSize,x=S2(p.text,v,l-p.from);return as.replace({widget:new Ife((v-x%v)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[m]||(this.decorationCache[m]=as.replace({widget:new Ffe(u,m)}))},boundary:u.replaceTabs?void 0:/[^]/})}update(u){let o=u.state.facet(V$);u.startState.facet(V$)!=o?(this.decorator=this.makeDecorator(o),this.decorations=this.decorator.createDeco(u.view)):this.decorations=this.decorator.updateDeco(u,this.decorations)}},{decorations:u=>u.decorations}))}const Nfe="•";function Bfe(u){return u>=32?Nfe:u==10?"␤":String.fromCharCode(9216+u)}class Ffe extends Yg{constructor(o,i){super(),this.options=o,this.code=i}eq(o){return o.code==this.code}toDOM(o){let i=Bfe(this.code),l=o.state.phrase("Control character")+" "+(_fe[this.code]||"0x"+this.code.toString(16)),d=this.options.render&&this.options.render(this.code,l,i);if(d)return d;let m=document.createElement("span");return m.textContent=i,m.title=l,m.setAttribute("aria-label",l),m.className="cm-specialChar",m}ignoreEvent(){return!1}}class Ife extends Yg{constructor(o){super(),this.width=o}eq(o){return o.width==this.width}toDOM(){let o=document.createElement("span");return o.textContent="	",o.className="cm-tab",o.style.width=this.width+"px",o}ignoreEvent(){return!1}}function Lfe(){return Hfe}const $fe=as.line({class:"cm-activeLine"}),Hfe=Ta.fromClass(class{constructor(u){this.decorations=this.getDeco(u)}update(u){(u.docChanged||u.selectionSet)&&(this.decorations=this.getDeco(u.view))}getDeco(u){let o=-1,i=[];for(let l of u.state.selection.ranges){let d=u.lineBlockAt(l.head);d.from>o&&(i.push($fe.range(d.from)),o=d.from)}return as.set(i)}},{decorations:u=>u.decorations});class Vfe extends Yg{constructor(o){super(),this.content=o}toDOM(){let o=document.createElement("span");return o.className="cm-placeholder",o.style.pointerEvents="none",o.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?o.setAttribute("aria-label","placeholder "+this.content):o.setAttribute("aria-hidden","true"),o}coordsAt(o){let i=o.firstChild?m2(o.firstChild):[];if(!i.length)return null;let l=window.getComputedStyle(o.parentNode),d=A6(i[0],l.direction!="rtl"),m=parseInt(l.lineHeight);return d.bottom-d.top>m*1.5?{left:d.left,right:d.right,top:d.top,bottom:d.top+m}:d}ignoreEvent(){return!1}}function zfe(u){return Ta.fromClass(class{constructor(o){this.view=o,this.placeholder=u?as.set([as.widget({widget:new Vfe(u),side:1}).range(0)]):as.none}get decorations(){return this.view.state.doc.length?as.none:this.placeholder}},{decorations:o=>o.decorations})}const zJ=2e3;function Ufe(u,o,i){let l=Math.min(o.line,i.line),d=Math.max(o.line,i.line),m=[];if(o.off>zJ||i.off>zJ||o.col<0||i.col<0){let p=Math.min(o.off,i.off),v=Math.max(o.off,i.off);for(let x=l;x<=d;x++){let k=u.doc.line(x);k.length<=v&&m.push(rn.range(k.from+p,k.to+v))}}else{let p=Math.min(o.col,i.col),v=Math.max(o.col,i.col);for(let x=l;x<=d;x++){let k=u.doc.line(x),T=wJ(k.text,p,u.tabSize,!0);if(T<0)m.push(rn.cursor(k.to));else{let R=wJ(k.text,v,u.tabSize);m.push(rn.range(k.from+T,k.from+R))}}}return m}function Wfe(u,o){let i=u.coordsAtPos(u.viewport.from);return i?Math.round(Math.abs((i.left-o)/u.defaultCharacterWidth)):-1}function Dne(u,o){let i=u.posAtCoords({x:o.clientX,y:o.clientY},!1),l=u.state.doc.lineAt(i),d=i-l.from,m=d>zJ?-1:d==l.length?Wfe(u,o.clientX):S2(l.text,u.state.tabSize,i-l.from);return{line:l.number,col:m,off:d}}function jfe(u,o){let i=Dne(u,o),l=u.state.selection;return i?{update(d){if(d.docChanged){let m=d.changes.mapPos(d.startState.doc.line(i.line).from),p=d.state.doc.lineAt(m);i={line:p.number,col:i.col,off:Math.min(i.off,p.length)},l=l.map(d.changes)}},get(d,m,p){let v=Dne(u,d);if(!v)return l;let x=Ufe(u.state,i,v);return x.length?p?rn.create(x.concat(l.ranges)):rn.create(x):l}}:null}function Zfe(u){let o=i=>i.altKey&&i.button==0;return wo.mouseSelectionStyle.of((i,l)=>o(l)?jfe(i,l):null)}const qfe={Alt:[18,u=>!!u.altKey],Control:[17,u=>!!u.ctrlKey],Shift:[16,u=>!!u.shiftKey],Meta:[91,u=>!!u.metaKey]},Gfe={style:"cursor: crosshair"};function Kfe(u={}){let[o,i]=qfe[u.key||"Alt"],l=Ta.fromClass(class{constructor(d){this.view=d,this.isDown=!1}set(d){this.isDown!=d&&(this.isDown=d,this.view.update([]))}},{eventObservers:{keydown(d){this.set(d.keyCode==o||i(d))},keyup(d){(d.keyCode==o||!i(d))&&this.set(!1)},mousemove(d){this.set(i(d))}}});return[l,wo.contentAttributes.of(d=>{var m;return!((m=d.plugin(l))===null||m===void 0)&&m.isDown?Gfe:null})]}const O_="-10000px";class xre{constructor(o,i,l,d){this.facet=i,this.createTooltipView=l,this.removeTooltipView=d,this.input=o.state.facet(i),this.tooltips=this.input.filter(p=>p);let m=null;this.tooltipViews=this.tooltips.map(p=>m=l(p,m))}update(o,i){var l;let d=o.state.facet(this.facet),m=d.filter(x=>x);if(d===this.input){for(let x of this.tooltipViews)x.update&&x.update(o);return!1}let p=[],v=i?[]:null;for(let x=0;x<m.length;x++){let k=m[x],T=-1;if(k){for(let R=0;R<this.tooltips.length;R++){let N=this.tooltips[R];N&&N.create==k.create&&(T=R)}if(T<0)p[x]=this.createTooltipView(k,x?p[x-1]:null),v&&(v[x]=!!k.above);else{let R=p[x]=this.tooltipViews[T];v&&(v[x]=i[T]),R.update&&R.update(o)}}}for(let x of this.tooltipViews)p.indexOf(x)<0&&(this.removeTooltipView(x),(l=x.destroy)===null||l===void 0||l.call(x));return i&&(v.forEach((x,k)=>i[k]=x),i.length=v.length),this.input=d,this.tooltips=m,this.tooltipViews=p,!0}}function Yfe(u){let{win:o}=u;return{top:0,left:0,bottom:o.innerHeight,right:o.innerWidth}}const zX=Oo.define({combine:u=>{var o,i,l;return{position:To.ios?"absolute":((o=u.find(d=>d.position))===null||o===void 0?void 0:o.position)||"fixed",parent:((i=u.find(d=>d.parent))===null||i===void 0?void 0:i.parent)||null,tooltipSpace:((l=u.find(d=>d.tooltipSpace))===null||l===void 0?void 0:l.tooltipSpace)||Yfe}}}),_ne=new WeakMap,wQ=Ta.fromClass(class{constructor(u){this.view=u,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let o=u.state.facet(zX);this.position=o.position,this.parent=o.parent,this.classes=u.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new xre(u,xQ,(i,l)=>this.createTooltip(i,l),i=>{this.resizeObserver&&this.resizeObserver.unobserve(i.dom),i.dom.remove()}),this.above=this.manager.tooltips.map(i=>!!i.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),u.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let u of this.manager.tooltipViews)this.intersectionObserver.observe(u.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(u){u.transactions.length&&(this.lastTransaction=Date.now());let o=this.manager.update(u,this.above);o&&this.observeIntersection();let i=o||u.geometryChanged,l=u.state.facet(zX);if(l.position!=this.position&&!this.madeAbsolute){this.position=l.position;for(let d of this.manager.tooltipViews)d.dom.style.position=this.position;i=!0}if(l.parent!=this.parent){this.parent&&this.container.remove(),this.parent=l.parent,this.createContainer();for(let d of this.manager.tooltipViews)this.container.appendChild(d.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(u,o){let i=u.create(this.view),l=o?o.dom:null;if(i.dom.classList.add("cm-tooltip"),u.arrow&&!i.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let d=document.createElement("div");d.className="cm-tooltip-arrow",i.dom.appendChild(d)}return i.dom.style.position=this.position,i.dom.style.top=O_,i.dom.style.left="0px",this.container.insertBefore(i.dom,l),i.mount&&i.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(i.dom),i}destroy(){var u,o,i;this.view.win.removeEventListener("resize",this.measureSoon);for(let l of this.manager.tooltipViews)l.dom.remove(),(u=l.destroy)===null||u===void 0||u.call(l);this.parent&&this.container.remove(),(o=this.resizeObserver)===null||o===void 0||o.disconnect(),(i=this.intersectionObserver)===null||i===void 0||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let u=this.view.dom.getBoundingClientRect(),o=1,i=1,l=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:d}=this.manager.tooltipViews[0];if(To.gecko)l=d.offsetParent!=this.container.ownerDocument.body;else if(d.style.top==O_&&d.style.left=="0px"){let m=d.getBoundingClientRect();l=Math.abs(m.top+1e4)>1||Math.abs(m.left)>1}}if(l||this.position=="absolute")if(this.parent){let d=this.parent.getBoundingClientRect();d.width&&d.height&&(o=d.width/this.parent.offsetWidth,i=d.height/this.parent.offsetHeight)}else({scaleX:o,scaleY:i}=this.view.viewState);return{editor:u,parent:this.parent?this.container.getBoundingClientRect():u,pos:this.manager.tooltips.map((d,m)=>{let p=this.manager.tooltipViews[m];return p.getCoords?p.getCoords(d.pos):this.view.coordsAtPos(d.pos)}),size:this.manager.tooltipViews.map(({dom:d})=>d.getBoundingClientRect()),space:this.view.state.facet(zX).tooltipSpace(this.view),scaleX:o,scaleY:i,makeAbsolute:l}}writeMeasure(u){var o;if(u.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let v of this.manager.tooltipViews)v.dom.style.position="absolute"}let{editor:i,space:l,scaleX:d,scaleY:m}=u,p=[];for(let v=0;v<this.manager.tooltips.length;v++){let x=this.manager.tooltips[v],k=this.manager.tooltipViews[v],{dom:T}=k,R=u.pos[v],N=u.size[v];if(!R||R.bottom<=Math.max(i.top,l.top)||R.top>=Math.min(i.bottom,l.bottom)||R.right<Math.max(i.left,l.left)-.1||R.left>Math.min(i.right,l.right)+.1){T.style.top=O_;continue}let $=x.arrow?k.dom.querySelector(".cm-tooltip-arrow"):null,U=$?7:0,X=N.right-N.left,J=(o=_ne.get(k))!==null&&o!==void 0?o:N.bottom-N.top,G=k.offset||Jfe,le=this.view.textDirection==Fi.LTR,Z=N.width>l.right-l.left?le?l.left:l.right-N.width:le?Math.min(R.left-($?14:0)+G.x,l.right-X):Math.max(l.left,R.left-X+($?14:0)-G.x),be=this.above[v];!x.strictSide&&(be?R.top-(N.bottom-N.top)-G.y<l.top:R.bottom+(N.bottom-N.top)+G.y>l.bottom)&&be==l.bottom-R.bottom>R.top-l.top&&(be=this.above[v]=!be);let He=(be?R.top-l.top:l.bottom-R.bottom)-U;if(He<J&&k.resize!==!1){if(He<this.view.defaultLineHeight){T.style.top=O_;continue}_ne.set(k,J),T.style.height=(J=He)/m+"px"}else T.style.height&&(T.style.height="");let Re=be?R.top-J-U-G.y:R.bottom+U+G.y,K=Z+X;if(k.overlap!==!0)for(let Ie of p)Ie.left<K&&Ie.right>Z&&Ie.top<Re+J&&Ie.bottom>Re&&(Re=be?Ie.top-J-2-U:Ie.bottom+U+2);if(this.position=="absolute"?(T.style.top=(Re-u.parent.top)/m+"px",T.style.left=(Z-u.parent.left)/d+"px"):(T.style.top=Re/m+"px",T.style.left=Z/d+"px"),$){let Ie=R.left+(le?G.x:-G.x)-(Z+14-7);$.style.left=Ie/d+"px"}k.overlap!==!0&&p.push({left:Z,top:Re,right:K,bottom:Re+J}),T.classList.toggle("cm-tooltip-above",be),T.classList.toggle("cm-tooltip-below",!be),k.positioned&&k.positioned(u.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let u of this.manager.tooltipViews)u.dom.style.top=O_}},{eventObservers:{scroll(){this.maybeMeasure()}}}),Xfe=wo.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Jfe={x:0,y:0},xQ=Oo.define({enables:[wQ,Xfe]}),s6=Oo.define({combine:u=>u.reduce((o,i)=>o.concat(i),[])});class D6{static create(o){return new D6(o)}constructor(o){this.view=o,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new xre(o,s6,(i,l)=>this.createHostedView(i,l),i=>i.dom.remove())}createHostedView(o,i){let l=o.create(this.view);return l.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(l.dom,i?i.dom.nextSibling:this.dom.firstChild),this.mounted&&l.mount&&l.mount(this.view),l}mount(o){for(let i of this.manager.tooltipViews)i.mount&&i.mount(o);this.mounted=!0}positioned(o){for(let i of this.manager.tooltipViews)i.positioned&&i.positioned(o)}update(o){this.manager.update(o)}destroy(){var o;for(let i of this.manager.tooltipViews)(o=i.destroy)===null||o===void 0||o.call(i)}passProp(o){let i;for(let l of this.manager.tooltipViews){let d=l[o];if(d!==void 0){if(i===void 0)i=d;else if(i!==d)return}}return i}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Qfe=xQ.compute([s6],u=>{let o=u.facet(s6);return o.length===0?null:{pos:Math.min(...o.map(i=>i.pos)),end:Math.max(...o.map(i=>{var l;return(l=i.end)!==null&&l!==void 0?l:i.pos})),create:D6.create,above:o[0].above,arrow:o.some(i=>i.arrow)}});class ehe{constructor(o,i,l,d,m){this.view=o,this.source=i,this.field=l,this.setHover=d,this.hoverTime=m,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:o.dom,time:0},this.checkHover=this.checkHover.bind(this),o.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),o.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let o=Date.now()-this.lastMove.time;o<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-o):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:o,lastMove:i}=this,l=o.docView.nearest(i.target);if(!l)return;let d,m=1;if(l instanceof q1)d=l.posAtStart;else{if(d=o.posAtCoords(i),d==null)return;let v=o.coordsAtPos(d);if(!v||i.y<v.top||i.y>v.bottom||i.x<v.left-o.defaultCharacterWidth||i.x>v.right+o.defaultCharacterWidth)return;let x=o.bidiSpans(o.state.doc.lineAt(d)).find(T=>T.from<=d&&T.to>=d),k=x&&x.dir==Fi.RTL?-1:1;m=i.x<v.left?-k:k}let p=this.source(o,d,m);if(p!=null&&p.then){let v=this.pending={pos:d};p.then(x=>{this.pending==v&&(this.pending=null,x&&!(Array.isArray(x)&&!x.length)&&o.dispatch({effects:this.setHover.of(Array.isArray(x)?x:[x])}))},x=>_u(o.state,x,"hover tooltip"))}else p&&!(Array.isArray(p)&&!p.length)&&o.dispatch({effects:this.setHover.of(Array.isArray(p)?p:[p])})}get tooltip(){let o=this.view.plugin(wQ),i=o?o.manager.tooltips.findIndex(l=>l.create==D6.create):-1;return i>-1?o.manager.tooltipViews[i]:null}mousemove(o){var i,l;this.lastMove={x:o.clientX,y:o.clientY,target:o.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:d,tooltip:m}=this;if(d.length&&m&&!the(m.dom,o)||this.pending){let{pos:p}=d[0]||this.pending,v=(l=(i=d[0])===null||i===void 0?void 0:i.end)!==null&&l!==void 0?l:p;(p==v?this.view.posAtCoords(this.lastMove)!=p:!nhe(this.view,p,v,o.clientX,o.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(o){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:i}=this;if(i.length){let{tooltip:l}=this;l&&l.dom.contains(o.relatedTarget)?this.watchTooltipLeave(l.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(o){let i=l=>{o.removeEventListener("mouseleave",i),this.active.length&&!this.view.dom.contains(l.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};o.addEventListener("mouseleave",i)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const w$=4;function the(u,o){let i=u.getBoundingClientRect();return o.clientX>=i.left-w$&&o.clientX<=i.right+w$&&o.clientY>=i.top-w$&&o.clientY<=i.bottom+w$}function nhe(u,o,i,l,d,m){let p=u.scrollDOM.getBoundingClientRect(),v=u.documentTop+u.documentPadding.top+u.contentHeight;if(p.left>l||p.right<l||p.top>d||Math.min(p.bottom,v)<d)return!1;let x=u.posAtCoords({x:l,y:d},!1);return x>=o&&x<=i}function ohe(u,o={}){let i=Us.define(),l=Kl.define({create(){return[]},update(d,m){if(d.length&&(o.hideOnChange&&(m.docChanged||m.selection)?d=[]:o.hideOn&&(d=d.filter(p=>!o.hideOn(m,p))),m.docChanged)){let p=[];for(let v of d){let x=m.changes.mapPos(v.pos,-1,qc.TrackDel);if(x!=null){let k=Object.assign(Object.create(null),v);k.pos=x,k.end!=null&&(k.end=m.changes.mapPos(k.end)),p.push(k)}}d=p}for(let p of m.effects)p.is(i)&&(d=p.value),p.is(she)&&(d=[]);return d},provide:d=>s6.from(d)});return[l,Ta.define(d=>new ehe(d,u,l,i,o.hoverTime||300)),Qfe]}function Sre(u,o){let i=u.plugin(wQ);if(!i)return null;let l=i.manager.tooltips.indexOf(o);return l<0?null:i.manager.tooltipViews[l]}const she=Us.define(),Mne=Oo.define({combine(u){let o,i;for(let l of u)o=o||l.topContainer,i=i||l.bottomContainer;return{topContainer:o,bottomContainer:i}}});function K_(u,o){let i=u.plugin(Cre),l=i?i.specs.indexOf(o):-1;return l>-1?i.panels[l]:null}const Cre=Ta.fromClass(class{constructor(u){this.input=u.state.facet(Y_),this.specs=this.input.filter(i=>i),this.panels=this.specs.map(i=>i(u));let o=u.state.facet(Mne);this.top=new x$(u,!0,o.topContainer),this.bottom=new x$(u,!1,o.bottomContainer),this.top.sync(this.panels.filter(i=>i.top)),this.bottom.sync(this.panels.filter(i=>!i.top));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(u){let o=u.state.facet(Mne);this.top.container!=o.topContainer&&(this.top.sync([]),this.top=new x$(u.view,!0,o.topContainer)),this.bottom.container!=o.bottomContainer&&(this.bottom.sync([]),this.bottom=new x$(u.view,!1,o.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=u.state.facet(Y_);if(i!=this.input){let l=i.filter(x=>x),d=[],m=[],p=[],v=[];for(let x of l){let k=this.specs.indexOf(x),T;k<0?(T=x(u.view),v.push(T)):(T=this.panels[k],T.update&&T.update(u)),d.push(T),(T.top?m:p).push(T)}this.specs=l,this.panels=d,this.top.sync(m),this.bottom.sync(p);for(let x of v)x.dom.classList.add("cm-panel"),x.mount&&x.mount()}else for(let l of this.panels)l.update&&l.update(u)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:u=>wo.scrollMargins.of(o=>{let i=o.plugin(u);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class x${constructor(o,i,l){this.view=o,this.top=i,this.container=l,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(o){for(let i of this.panels)i.destroy&&o.indexOf(i)<0&&i.destroy();this.panels=o,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let i=this.container||this.view.dom;i.insertBefore(this.dom,this.top?i.firstChild:null)}let o=this.dom.firstChild;for(let i of this.panels)if(i.dom.parentNode==this.dom){for(;o!=i.dom;)o=Rne(o);o=o.nextSibling}else this.dom.insertBefore(i.dom,o);for(;o;)o=Rne(o)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let o of this.classes.split(" "))o&&this.container.classList.remove(o);for(let o of(this.classes=this.view.themeClasses).split(" "))o&&this.container.classList.add(o)}}}function Rne(u){let o=u.nextSibling;return u.remove(),o}const Y_=Oo.define({enables:Cre});class Gg extends by{compare(o){return this==o||this.constructor==o.constructor&&this.eq(o)}eq(o){return!1}destroy(o){}}Gg.prototype.elementClass="";Gg.prototype.toDOM=void 0;Gg.prototype.mapMode=qc.TrackBefore;Gg.prototype.startSide=Gg.prototype.endSide=-1;Gg.prototype.point=!0;const z$=Oo.define(),rhe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>xr.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},V_=Oo.define();function ihe(u){return[kre(),V_.of(Object.assign(Object.assign({},rhe),u))]}const Pne=Oo.define({combine:u=>u.some(o=>o)});function kre(u){return[ahe]}const ahe=Ta.fromClass(class{constructor(u){this.view=u,this.prevViewport=u.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=u.state.facet(V_).map(o=>new Bne(u,o));for(let o of this.gutters)this.dom.appendChild(o.dom);this.fixed=!u.state.facet(Pne),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),u.scrollDOM.insertBefore(this.dom,u.contentDOM)}update(u){if(this.updateGutters(u)){let o=this.prevViewport,i=u.view.viewport,l=Math.min(o.to,i.to)-Math.max(o.from,i.from);this.syncGutters(l<(i.to-i.from)*.8)}u.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Pne)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=u.view.viewport}syncGutters(u){let o=this.dom.nextSibling;u&&this.dom.remove();let i=xr.iter(this.view.state.facet(z$),this.view.viewport.from),l=[],d=this.gutters.map(m=>new lhe(m,this.view.viewport,-this.view.documentPadding.top));for(let m of this.view.viewportLineBlocks)if(l.length&&(l=[]),Array.isArray(m.type)){let p=!0;for(let v of m.type)if(v.type==Kc.Text&&p){UJ(i,l,v.from);for(let x of d)x.line(this.view,v,l);p=!1}else if(v.widget)for(let x of d)x.widget(this.view,v)}else if(m.type==Kc.Text){UJ(i,l,m.from);for(let p of d)p.line(this.view,m,l)}else if(m.widget)for(let p of d)p.widget(this.view,m);for(let m of d)m.finish();u&&this.view.scrollDOM.insertBefore(this.dom,o)}updateGutters(u){let o=u.startState.facet(V_),i=u.state.facet(V_),l=u.docChanged||u.heightChanged||u.viewportChanged||!xr.eq(u.startState.facet(z$),u.state.facet(z$),u.view.viewport.from,u.view.viewport.to);if(o==i)for(let d of this.gutters)d.update(u)&&(l=!0);else{l=!0;let d=[];for(let m of i){let p=o.indexOf(m);p<0?d.push(new Bne(this.view,m)):(this.gutters[p].update(u),d.push(this.gutters[p]))}for(let m of this.gutters)m.dom.remove(),d.indexOf(m)<0&&m.destroy();for(let m of d)this.dom.appendChild(m.dom);this.gutters=d}return l}destroy(){for(let u of this.gutters)u.destroy();this.dom.remove()}},{provide:u=>wo.scrollMargins.of(o=>{let i=o.plugin(u);return!i||i.gutters.length==0||!i.fixed?null:o.textDirection==Fi.LTR?{left:i.dom.offsetWidth*o.scaleX}:{right:i.dom.offsetWidth*o.scaleX}})});function Nne(u){return Array.isArray(u)?u:[u]}function UJ(u,o,i){for(;u.value&&u.from<=i;)u.from==i&&o.push(u.value),u.next()}class lhe{constructor(o,i,l){this.gutter=o,this.height=l,this.i=0,this.cursor=xr.iter(o.markers,i.from)}addElement(o,i,l){let{gutter:d}=this,m=(i.top-this.height)/o.scaleY,p=i.height/o.scaleY;if(this.i==d.elements.length){let v=new Are(o,p,m,l);d.elements.push(v),d.dom.appendChild(v.dom)}else d.elements[this.i].update(o,p,m,l);this.height=i.bottom,this.i++}line(o,i,l){let d=[];UJ(this.cursor,d,i.from),l.length&&(d=d.concat(l));let m=this.gutter.config.lineMarker(o,i,d);m&&d.unshift(m);let p=this.gutter;d.length==0&&!p.config.renderEmptyElements||this.addElement(o,i,d)}widget(o,i){let l=this.gutter.config.widgetMarker(o,i.widget,i);l&&this.addElement(o,i,[l])}finish(){let o=this.gutter;for(;o.elements.length>this.i;){let i=o.elements.pop();o.dom.removeChild(i.dom),i.destroy()}}}class Bne{constructor(o,i){this.view=o,this.config=i,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let l in i.domEventHandlers)this.dom.addEventListener(l,d=>{let m=d.target,p;if(m!=this.dom&&this.dom.contains(m)){for(;m.parentNode!=this.dom;)m=m.parentNode;let x=m.getBoundingClientRect();p=(x.top+x.bottom)/2}else p=d.clientY;let v=o.lineBlockAtHeight(p-o.documentTop);i.domEventHandlers[l](o,v,d)&&d.preventDefault()});this.markers=Nne(i.markers(o)),i.initialSpacer&&(this.spacer=new Are(o,0,0,[i.initialSpacer(o)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(o){let i=this.markers;if(this.markers=Nne(this.config.markers(o.view)),this.spacer&&this.config.updateSpacer){let d=this.config.updateSpacer(this.spacer.markers[0],o);d!=this.spacer.markers[0]&&this.spacer.update(o.view,0,0,[d])}let l=o.view.viewport;return!xr.eq(this.markers,i,l.from,l.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(o):!1)}destroy(){for(let o of this.elements)o.destroy()}}class Are{constructor(o,i,l,d){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(o,i,l,d)}update(o,i,l,d){this.height!=i&&(this.height=i,this.dom.style.height=i+"px"),this.above!=l&&(this.dom.style.marginTop=(this.above=l)?l+"px":""),che(this.markers,d)||this.setMarkers(o,d)}setMarkers(o,i){let l="cm-gutterElement",d=this.dom.firstChild;for(let m=0,p=0;;){let v=p,x=m<i.length?i[m++]:null,k=!1;if(x){let T=x.elementClass;T&&(l+=" "+T);for(let R=p;R<this.markers.length;R++)if(this.markers[R].compare(x)){v=R,k=!0;break}}else v=this.markers.length;for(;p<v;){let T=this.markers[p++];if(T.toDOM){T.destroy(d);let R=d.nextSibling;d.remove(),d=R}}if(!x)break;x.toDOM&&(k?d=d.nextSibling:this.dom.insertBefore(x.toDOM(o),d)),k&&p++}this.dom.className=l,this.markers=i}destroy(){this.setMarkers(null,[])}}function che(u,o){if(u.length!=o.length)return!1;for(let i=0;i<u.length;i++)if(!u[i].compare(o[i]))return!1;return!0}const uhe=Oo.define(),n2=Oo.define({combine(u){return km(u,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(o,i){let l=Object.assign({},o);for(let d in i){let m=l[d],p=i[d];l[d]=m?(v,x,k)=>m(v,x,k)||p(v,x,k):p}return l}})}});class UX extends Gg{constructor(o){super(),this.number=o}eq(o){return this.number==o.number}toDOM(){return document.createTextNode(this.number)}}function WX(u,o){return u.state.facet(n2).formatNumber(o,u.state)}const dhe=V_.compute([n2],u=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(o){return o.state.facet(uhe)},lineMarker(o,i,l){return l.some(d=>d.toDOM)?null:new UX(WX(o,o.state.doc.lineAt(i.from).number))},widgetMarker:()=>null,lineMarkerChange:o=>o.startState.facet(n2)!=o.state.facet(n2),initialSpacer(o){return new UX(WX(o,Fne(o.state.doc.lines)))},updateSpacer(o,i){let l=WX(i.view,Fne(i.view.state.doc.lines));return l==o.number?o:new UX(l)},domEventHandlers:u.facet(n2).domEventHandlers}));function fhe(u={}){return[n2.of(u),kre(),dhe]}function Fne(u){let o=9;for(;o<u;)o=o*10+9;return o}const hhe=new class extends Gg{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},mhe=z$.compute(["selection"],u=>{let o=[],i=-1;for(let l of u.selection.ranges){let d=u.doc.lineAt(l.head).from;d>i&&(i=d,o.push(hhe.range(d)))}return xr.of(o)});function ghe(){return mhe}const Ere=1024;let phe=0,jX=class{constructor(o,i){this.from=o,this.to=i}};class Ks{constructor(o={}){this.id=phe++,this.perNode=!!o.perNode,this.deserialize=o.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(o){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof o!="function"&&(o=Xc.match(o)),i=>{let l=o(i);return l===void 0?null:[this,l]}}}Ks.closedBy=new Ks({deserialize:u=>u.split(" ")});Ks.openedBy=new Ks({deserialize:u=>u.split(" ")});Ks.group=new Ks({deserialize:u=>u.split(" ")});Ks.isolate=new Ks({deserialize:u=>{if(u&&u!="rtl"&&u!="ltr"&&u!="auto")throw new RangeError("Invalid value for isolate: "+u);return u||"auto"}});Ks.contextHash=new Ks({perNode:!0});Ks.lookAhead=new Ks({perNode:!0});Ks.mounted=new Ks({perNode:!0});class r6{constructor(o,i,l){this.tree=o,this.overlay=i,this.parser=l}static get(o){return o&&o.props&&o.props[Ks.mounted.id]}}const bhe=Object.create(null);class Xc{constructor(o,i,l,d=0){this.name=o,this.props=i,this.id=l,this.flags=d}static define(o){let i=o.props&&o.props.length?Object.create(null):bhe,l=(o.top?1:0)|(o.skipped?2:0)|(o.error?4:0)|(o.name==null?8:0),d=new Xc(o.name||"",i,o.id,l);if(o.props){for(let m of o.props)if(Array.isArray(m)||(m=m(d)),m){if(m[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");i[m[0].id]=m[1]}}return d}prop(o){return this.props[o.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(o){if(typeof o=="string"){if(this.name==o)return!0;let i=this.prop(Ks.group);return i?i.indexOf(o)>-1:!1}return this.id==o}static match(o){let i=Object.create(null);for(let l in o)for(let d of l.split(" "))i[d]=o[l];return l=>{for(let d=l.prop(Ks.group),m=-1;m<(d?d.length:0);m++){let p=i[m<0?l.name:d[m]];if(p)return p}}}}Xc.none=new Xc("",Object.create(null),0,8);class _6{constructor(o){this.types=o;for(let i=0;i<o.length;i++)if(o[i].id!=i)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...o){let i=[];for(let l of this.types){let d=null;for(let m of o){let p=m(l);p&&(d||(d=Object.assign({},l.props)),d[p[0].id]=p[1])}i.push(d?new Xc(l.name,d,l.id,l.flags):l)}return new _6(i)}}const S$=new WeakMap,Ine=new WeakMap;var Tl;(function(u){u[u.ExcludeBuffers=1]="ExcludeBuffers",u[u.IncludeAnonymous=2]="IncludeAnonymous",u[u.IgnoreMounts=4]="IgnoreMounts",u[u.IgnoreOverlays=8]="IgnoreOverlays"})(Tl||(Tl={}));class ui{constructor(o,i,l,d,m){if(this.type=o,this.children=i,this.positions=l,this.length=d,this.props=null,m&&m.length){this.props=Object.create(null);for(let[p,v]of m)this.props[typeof p=="number"?p:p.id]=v}}toString(){let o=r6.get(this);if(o&&!o.overlay)return o.tree.toString();let i="";for(let l of this.children){let d=l.toString();d&&(i&&(i+=","),i+=d)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(i.length?"("+i+")":""):i}cursor(o=0){return new jJ(this.topNode,o)}cursorAt(o,i=0,l=0){let d=S$.get(this)||this.topNode,m=new jJ(d);return m.moveTo(o,i),S$.set(this,m._tree),m}get topNode(){return new xf(this,0,0,null)}resolve(o,i=0){let l=X_(S$.get(this)||this.topNode,o,i,!1);return S$.set(this,l),l}resolveInner(o,i=0){let l=X_(Ine.get(this)||this.topNode,o,i,!0);return Ine.set(this,l),l}resolveStack(o,i=0){return whe(this,o,i)}iterate(o){let{enter:i,leave:l,from:d=0,to:m=this.length}=o,p=o.mode||0,v=(p&Tl.IncludeAnonymous)>0;for(let x=this.cursor(p|Tl.IncludeAnonymous);;){let k=!1;if(x.from<=m&&x.to>=d&&(!v&&x.type.isAnonymous||i(x)!==!1)){if(x.firstChild())continue;k=!0}for(;k&&l&&(v||!x.type.isAnonymous)&&l(x),!x.nextSibling();){if(!x.parent())return;k=!0}}}prop(o){return o.perNode?this.props?this.props[o.id]:void 0:this.type.prop(o)}get propValues(){let o=[];if(this.props)for(let i in this.props)o.push([+i,this.props[i]]);return o}balance(o={}){return this.children.length<=8?this:kQ(Xc.none,this.children,this.positions,0,this.children.length,0,this.length,(i,l,d)=>new ui(this.type,i,l,d,this.propValues),o.makeTree||((i,l,d)=>new ui(Xc.none,i,l,d)))}static build(o){return xhe(o)}}ui.empty=new ui(Xc.none,[],[],0);class SQ{constructor(o,i){this.buffer=o,this.index=i}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new SQ(this.buffer,this.index)}}class r0{constructor(o,i,l){this.buffer=o,this.length=i,this.set=l}get type(){return Xc.none}toString(){let o=[];for(let i=0;i<this.buffer.length;)o.push(this.childString(i)),i=this.buffer[i+3];return o.join(",")}childString(o){let i=this.buffer[o],l=this.buffer[o+3],d=this.set.types[i],m=d.name;if(/\W/.test(m)&&!d.isError&&(m=JSON.stringify(m)),o+=4,l==o)return m;let p=[];for(;o<l;)p.push(this.childString(o)),o=this.buffer[o+3];return m+"("+p.join(",")+")"}findChild(o,i,l,d,m){let{buffer:p}=this,v=-1;for(let x=o;x!=i&&!(Tre(m,d,p[x+1],p[x+2])&&(v=x,l>0));x=p[x+3]);return v}slice(o,i,l){let d=this.buffer,m=new Uint16Array(i-o),p=0;for(let v=o,x=0;v<i;){m[x++]=d[v++],m[x++]=d[v++]-l;let k=m[x++]=d[v++]-l;m[x++]=d[v++]-o,p=Math.max(p,k)}return new r0(m,p,this.set)}}function Tre(u,o,i,l){switch(u){case-2:return i<o;case-1:return l>=o&&i<o;case 0:return i<o&&l>o;case 1:return i<=o&&l>o;case 2:return l>o;case 4:return!0}}function X_(u,o,i,l){for(var d;u.from==u.to||(i<1?u.from>=o:u.from>o)||(i>-1?u.to<=o:u.to<o);){let p=!l&&u instanceof xf&&u.index<0?null:u.parent;if(!p)return u;u=p}let m=l?0:Tl.IgnoreOverlays;if(l)for(let p=u,v=p.parent;v;p=v,v=p.parent)p instanceof xf&&p.index<0&&((d=v.enter(o,i,m))===null||d===void 0?void 0:d.from)!=p.from&&(u=v);for(;;){let p=u.enter(o,i,m);if(!p)return u;u=p}}class Ore{cursor(o=0){return new jJ(this,o)}getChild(o,i=null,l=null){let d=Lne(this,o,i,l);return d.length?d[0]:null}getChildren(o,i=null,l=null){return Lne(this,o,i,l)}resolve(o,i=0){return X_(this,o,i,!1)}resolveInner(o,i=0){return X_(this,o,i,!0)}matchContext(o){return WJ(this,o)}enterUnfinishedNodesBefore(o){let i=this.childBefore(o),l=this;for(;i;){let d=i.lastChild;if(!d||d.to!=i.to)break;d.type.isError&&d.from==d.to?(l=i,i=d.prevSibling):i=d}return l}get node(){return this}get next(){return this.parent}}class xf extends Ore{constructor(o,i,l,d){super(),this._tree=o,this.from=i,this.index=l,this._parent=d}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(o,i,l,d,m=0){for(let p=this;;){for(let{children:v,positions:x}=p._tree,k=i>0?v.length:-1;o!=k;o+=i){let T=v[o],R=x[o]+p.from;if(Tre(d,l,R,R+T.length)){if(T instanceof r0){if(m&Tl.ExcludeBuffers)continue;let N=T.findChild(0,T.buffer.length,i,l-R,d);if(N>-1)return new K1(new vhe(p,T,o,R),null,N)}else if(m&Tl.IncludeAnonymous||!T.type.isAnonymous||CQ(T)){let N;if(!(m&Tl.IgnoreMounts)&&(N=r6.get(T))&&!N.overlay)return new xf(N.tree,R,o,p);let $=new xf(T,R,o,p);return m&Tl.IncludeAnonymous||!$.type.isAnonymous?$:$.nextChild(i<0?T.children.length-1:0,i,l,d)}}}if(m&Tl.IncludeAnonymous||!p.type.isAnonymous||(p.index>=0?o=p.index+i:o=i<0?-1:p._parent._tree.children.length,p=p._parent,!p))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(o){return this.nextChild(0,1,o,2)}childBefore(o){return this.nextChild(this._tree.children.length-1,-1,o,-2)}enter(o,i,l=0){let d;if(!(l&Tl.IgnoreOverlays)&&(d=r6.get(this._tree))&&d.overlay){let m=o-this.from;for(let{from:p,to:v}of d.overlay)if((i>0?p<=m:p<m)&&(i<0?v>=m:v>m))return new xf(d.tree,d.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,o,i,l)}nextSignificantParent(){let o=this;for(;o.type.isAnonymous&&o._parent;)o=o._parent;return o}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Lne(u,o,i,l){let d=u.cursor(),m=[];if(!d.firstChild())return m;if(i!=null){for(let p=!1;!p;)if(p=d.type.is(i),!d.nextSibling())return m}for(;;){if(l!=null&&d.type.is(l))return m;if(d.type.is(o)&&m.push(d.node),!d.nextSibling())return l==null?m:[]}}function WJ(u,o,i=o.length-1){for(let l=u.parent;i>=0;l=l.parent){if(!l)return!1;if(!l.type.isAnonymous){if(o[i]&&o[i]!=l.name)return!1;i--}}return!0}class vhe{constructor(o,i,l,d){this.parent=o,this.buffer=i,this.index=l,this.start=d}}class K1 extends Ore{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(o,i,l){super(),this.context=o,this._parent=i,this.index=l,this.type=o.buffer.set.types[o.buffer.buffer[l]]}child(o,i,l){let{buffer:d}=this.context,m=d.findChild(this.index+4,d.buffer[this.index+3],o,i-this.context.start,l);return m<0?null:new K1(this.context,this,m)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(o){return this.child(1,o,2)}childBefore(o){return this.child(-1,o,-2)}enter(o,i,l=0){if(l&Tl.ExcludeBuffers)return null;let{buffer:d}=this.context,m=d.findChild(this.index+4,d.buffer[this.index+3],i>0?1:-1,o-this.context.start,i);return m<0?null:new K1(this.context,this,m)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(o){return this._parent?null:this.context.parent.nextChild(this.context.index+o,o,0,4)}get nextSibling(){let{buffer:o}=this.context,i=o.buffer[this.index+3];return i<(this._parent?o.buffer[this._parent.index+3]:o.buffer.length)?new K1(this.context,this._parent,i):this.externalSibling(1)}get prevSibling(){let{buffer:o}=this.context,i=this._parent?this._parent.index+4:0;return this.index==i?this.externalSibling(-1):new K1(this.context,this._parent,o.findChild(i,this.index,-1,0,4))}get tree(){return null}toTree(){let o=[],i=[],{buffer:l}=this.context,d=this.index+4,m=l.buffer[this.index+3];if(m>d){let p=l.buffer[this.index+1];o.push(l.slice(d,m,p)),i.push(0)}return new ui(this.type,o,i,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Dre(u){if(!u.length)return null;let o=0,i=u[0];for(let m=1;m<u.length;m++){let p=u[m];(p.from>i.from||p.to<i.to)&&(i=p,o=m)}let l=i instanceof xf&&i.index<0?null:i.parent,d=u.slice();return l?d[o]=l:d.splice(o,1),new yhe(d,i)}class yhe{constructor(o,i){this.heads=o,this.node=i}get next(){return Dre(this.heads)}}function whe(u,o,i){let l=u.resolveInner(o,i),d=null;for(let m=l instanceof xf?l:l.context.parent;m;m=m.parent)if(m.index<0){let p=m.parent;(d||(d=[l])).push(p.resolve(o,i)),m=p}else{let p=r6.get(m.tree);if(p&&p.overlay&&p.overlay[0].from<=o&&p.overlay[p.overlay.length-1].to>=o){let v=new xf(p.tree,p.overlay[0].from+m.from,-1,m);(d||(d=[l])).push(X_(v,o,i,!1))}}return d?Dre(d):l}class jJ{get name(){return this.type.name}constructor(o,i=0){if(this.mode=i,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,o instanceof xf)this.yieldNode(o);else{this._tree=o.context.parent,this.buffer=o.context;for(let l=o._parent;l;l=l._parent)this.stack.unshift(l.index);this.bufferNode=o,this.yieldBuf(o.index)}}yieldNode(o){return o?(this._tree=o,this.type=o.type,this.from=o.from,this.to=o.to,!0):!1}yieldBuf(o,i){this.index=o;let{start:l,buffer:d}=this.buffer;return this.type=i||d.set.types[d.buffer[o]],this.from=l+d.buffer[o+1],this.to=l+d.buffer[o+2],!0}yield(o){return o?o instanceof xf?(this.buffer=null,this.yieldNode(o)):(this.buffer=o.context,this.yieldBuf(o.index,o.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(o,i,l){if(!this.buffer)return this.yield(this._tree.nextChild(o<0?this._tree._tree.children.length-1:0,o,i,l,this.mode));let{buffer:d}=this.buffer,m=d.findChild(this.index+4,d.buffer[this.index+3],o,i-this.buffer.start,l);return m<0?!1:(this.stack.push(this.index),this.yieldBuf(m))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(o){return this.enterChild(1,o,2)}childBefore(o){return this.enterChild(-1,o,-2)}enter(o,i,l=this.mode){return this.buffer?l&Tl.ExcludeBuffers?!1:this.enterChild(1,o,i):this.yield(this._tree.enter(o,i,l))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Tl.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let o=this.mode&Tl.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(o)}sibling(o){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+o,o,0,4,this.mode)):!1;let{buffer:i}=this.buffer,l=this.stack.length-1;if(o<0){let d=l<0?0:this.stack[l]+4;if(this.index!=d)return this.yieldBuf(i.findChild(d,this.index,-1,0,4))}else{let d=i.buffer[this.index+3];if(d<(l<0?i.buffer.length:i.buffer[this.stack[l]+3]))return this.yieldBuf(d)}return l<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+o,o,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(o){let i,l,{buffer:d}=this;if(d){if(o>0){if(this.index<d.buffer.buffer.length)return!1}else for(let m=0;m<this.index;m++)if(d.buffer.buffer[m+3]<this.index)return!1;({index:i,parent:l}=d)}else({index:i,_parent:l}=this._tree);for(;l;{index:i,_parent:l}=l)if(i>-1)for(let m=i+o,p=o<0?-1:l._tree.children.length;m!=p;m+=o){let v=l._tree.children[m];if(this.mode&Tl.IncludeAnonymous||v instanceof r0||!v.type.isAnonymous||CQ(v))return!1}return!0}move(o,i){if(i&&this.enterChild(o,0,4))return!0;for(;;){if(this.sibling(o))return!0;if(this.atLastNode(o)||!this.parent())return!1}}next(o=!0){return this.move(1,o)}prev(o=!0){return this.move(-1,o)}moveTo(o,i=0){for(;(this.from==this.to||(i<1?this.from>=o:this.from>o)||(i>-1?this.to<=o:this.to<o))&&this.parent(););for(;this.enterChild(1,o,i););return this}get node(){if(!this.buffer)return this._tree;let o=this.bufferNode,i=null,l=0;if(o&&o.context==this.buffer)e:for(let d=this.index,m=this.stack.length;m>=0;){for(let p=o;p;p=p._parent)if(p.index==d){if(d==this.index)return p;i=p,l=m+1;break e}d=this.stack[--m]}for(let d=l;d<this.stack.length;d++)i=new K1(this.buffer,i,this.stack[d]);return this.bufferNode=new K1(this.buffer,i,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(o,i){for(let l=0;;){let d=!1;if(this.type.isAnonymous||o(this)!==!1){if(this.firstChild()){l++;continue}this.type.isAnonymous||(d=!0)}for(;d&&i&&i(this),d=this.type.isAnonymous,!this.nextSibling();){if(!l)return;this.parent(),l--,d=!0}}}matchContext(o){if(!this.buffer)return WJ(this.node,o);let{buffer:i}=this.buffer,{types:l}=i.set;for(let d=o.length-1,m=this.stack.length-1;d>=0;m--){if(m<0)return WJ(this.node,o,d);let p=l[i.buffer[this.stack[m]]];if(!p.isAnonymous){if(o[d]&&o[d]!=p.name)return!1;d--}}return!0}}function CQ(u){return u.children.some(o=>o instanceof r0||!o.type.isAnonymous||CQ(o))}function xhe(u){var o;let{buffer:i,nodeSet:l,maxBufferLength:d=Ere,reused:m=[],minRepeatType:p=l.types.length}=u,v=Array.isArray(i)?new SQ(i,i.length):i,x=l.types,k=0,T=0;function R(He,Re,K,Ie,$e,Ue){let{id:ae,start:Oe,end:ht,size:ne}=v,ge=T;for(;ne<0;)if(v.next(),ne==-1){let qt=m[ae];K.push(qt),Ie.push(Oe-He);return}else if(ne==-3){k=ae;return}else if(ne==-4){T=ae;return}else throw new RangeError(`Unrecognized record size: ${ne}`);let O=x[ae],Ke,he,at=Oe-He;if(ht-Oe<=d&&(he=J(v.pos-Re,$e))){let qt=new Uint16Array(he.size-he.skip),Pe=v.pos-he.size,We=qt.length;for(;v.pos>Pe;)We=G(he.start,qt,We);Ke=new r0(qt,ht-he.start,l),at=he.start-He}else{let qt=v.pos-ne;v.next();let Pe=[],We=[],yt=ae>=p?ae:-1,Be=0,wt=ht;for(;v.pos>qt;)yt>=0&&v.id==yt&&v.size>=0?(v.end<=wt-d&&(U(Pe,We,Oe,Be,v.end,wt,yt,ge),Be=Pe.length,wt=v.end),v.next()):Ue>2500?N(Oe,qt,Pe,We):R(Oe,qt,Pe,We,yt,Ue+1);if(yt>=0&&Be>0&&Be<Pe.length&&U(Pe,We,Oe,Be,Oe,wt,yt,ge),Pe.reverse(),We.reverse(),yt>-1&&Be>0){let ce=$(O);Ke=kQ(O,Pe,We,0,Pe.length,0,ht-Oe,ce,ce)}else Ke=X(O,Pe,We,ht-Oe,ge-ht)}K.push(Ke),Ie.push(at)}function N(He,Re,K,Ie){let $e=[],Ue=0,ae=-1;for(;v.pos>Re;){let{id:Oe,start:ht,end:ne,size:ge}=v;if(ge>4)v.next();else{if(ae>-1&&ht<ae)break;ae<0&&(ae=ne-d),$e.push(Oe,ht,ne),Ue++,v.next()}}if(Ue){let Oe=new Uint16Array(Ue*4),ht=$e[$e.length-2];for(let ne=$e.length-3,ge=0;ne>=0;ne-=3)Oe[ge++]=$e[ne],Oe[ge++]=$e[ne+1]-ht,Oe[ge++]=$e[ne+2]-ht,Oe[ge++]=ge;K.push(new r0(Oe,$e[2]-ht,l)),Ie.push(ht-He)}}function $(He){return(Re,K,Ie)=>{let $e=0,Ue=Re.length-1,ae,Oe;if(Ue>=0&&(ae=Re[Ue])instanceof ui){if(!Ue&&ae.type==He&&ae.length==Ie)return ae;(Oe=ae.prop(Ks.lookAhead))&&($e=K[Ue]+ae.length+Oe)}return X(He,Re,K,Ie,$e)}}function U(He,Re,K,Ie,$e,Ue,ae,Oe){let ht=[],ne=[];for(;He.length>Ie;)ht.push(He.pop()),ne.push(Re.pop()+K-$e);He.push(X(l.types[ae],ht,ne,Ue-$e,Oe-Ue)),Re.push($e-K)}function X(He,Re,K,Ie,$e=0,Ue){if(k){let ae=[Ks.contextHash,k];Ue=Ue?[ae].concat(Ue):[ae]}if($e>25){let ae=[Ks.lookAhead,$e];Ue=Ue?[ae].concat(Ue):[ae]}return new ui(He,Re,K,Ie,Ue)}function J(He,Re){let K=v.fork(),Ie=0,$e=0,Ue=0,ae=K.end-d,Oe={size:0,start:0,skip:0};e:for(let ht=K.pos-He;K.pos>ht;){let ne=K.size;if(K.id==Re&&ne>=0){Oe.size=Ie,Oe.start=$e,Oe.skip=Ue,Ue+=4,Ie+=4,K.next();continue}let ge=K.pos-ne;if(ne<0||ge<ht||K.start<ae)break;let O=K.id>=p?4:0,Ke=K.start;for(K.next();K.pos>ge;){if(K.size<0)if(K.size==-3)O+=4;else break e;else K.id>=p&&(O+=4);K.next()}$e=Ke,Ie+=ne,Ue+=O}return(Re<0||Ie==He)&&(Oe.size=Ie,Oe.start=$e,Oe.skip=Ue),Oe.size>4?Oe:void 0}function G(He,Re,K){let{id:Ie,start:$e,end:Ue,size:ae}=v;if(v.next(),ae>=0&&Ie<p){let Oe=K;if(ae>4){let ht=v.pos-(ae-4);for(;v.pos>ht;)K=G(He,Re,K)}Re[--K]=Oe,Re[--K]=Ue-He,Re[--K]=$e-He,Re[--K]=Ie}else ae==-3?k=Ie:ae==-4&&(T=Ie);return K}let le=[],Z=[];for(;v.pos>0;)R(u.start||0,u.bufferStart||0,le,Z,-1,0);let be=(o=u.length)!==null&&o!==void 0?o:le.length?Z[0]+le[0].length:0;return new ui(x[u.topID],le.reverse(),Z.reverse(),be)}const $ne=new WeakMap;function U$(u,o){if(!u.isAnonymous||o instanceof r0||o.type!=u)return 1;let i=$ne.get(o);if(i==null){i=1;for(let l of o.children){if(l.type!=u||!(l instanceof ui)){i=1;break}i+=U$(u,l)}$ne.set(o,i)}return i}function kQ(u,o,i,l,d,m,p,v,x){let k=0;for(let U=l;U<d;U++)k+=U$(u,o[U]);let T=Math.ceil(k*1.5/8),R=[],N=[];function $(U,X,J,G,le){for(let Z=J;Z<G;){let be=Z,He=X[Z],Re=U$(u,U[Z]);for(Z++;Z<G;Z++){let K=U$(u,U[Z]);if(Re+K>=T)break;Re+=K}if(Z==be+1){if(Re>T){let K=U[be];$(K.children,K.positions,0,K.children.length,X[be]+le);continue}R.push(U[be])}else{let K=X[Z-1]+U[Z-1].length-He;R.push(kQ(u,U,X,be,Z,He,K,null,x))}N.push(He+le-m)}}return $(o,i,l,d,0),(v||x)(R,N,p)}class hy{constructor(o,i,l,d,m=!1,p=!1){this.from=o,this.to=i,this.tree=l,this.offset=d,this.open=(m?1:0)|(p?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(o,i=[],l=!1){let d=[new hy(0,o.length,o,0,!1,l)];for(let m of i)m.to>o.length&&d.push(m);return d}static applyChanges(o,i,l=128){if(!i.length)return o;let d=[],m=1,p=o.length?o[0]:null;for(let v=0,x=0,k=0;;v++){let T=v<i.length?i[v]:null,R=T?T.fromA:1e9;if(R-x>=l)for(;p&&p.from<R;){let N=p;if(x>=N.from||R<=N.to||k){let $=Math.max(N.from,x)-k,U=Math.min(N.to,R)-k;N=$>=U?null:new hy($,U,N.tree,N.offset+k,v>0,!!T)}if(N&&d.push(N),p.to>R)break;p=m<o.length?o[m++]:null}if(!T)break;x=T.toA,k=T.toA-T.toB}return d}}class AQ{startParse(o,i,l){return typeof o=="string"&&(o=new She(o)),l=l?l.length?l.map(d=>new jX(d.from,d.to)):[new jX(0,0)]:[new jX(0,o.length)],this.createParse(o,i||[],l)}parse(o,i,l){let d=this.startParse(o,i,l);for(;;){let m=d.advance();if(m)return m}}}class She{constructor(o){this.string=o}get length(){return this.string.length}chunk(o){return this.string.slice(o)}get lineChunks(){return!1}read(o,i){return this.string.slice(o,i)}}new Ks({perNode:!0});let Che=0;class vm{constructor(o,i,l){this.set=o,this.base=i,this.modified=l,this.id=Che++}static define(o){if(o!=null&&o.base)throw new Error("Can not derive from a modified tag");let i=new vm([],null,[]);if(i.set.push(i),o)for(let l of o.set)i.set.push(l);return i}static defineModifier(){let o=new i6;return i=>i.modified.indexOf(o)>-1?i:i6.get(i.base||i,i.modified.concat(o).sort((l,d)=>l.id-d.id))}}let khe=0;class i6{constructor(){this.instances=[],this.id=khe++}static get(o,i){if(!i.length)return o;let l=i[0].instances.find(v=>v.base==o&&Ahe(i,v.modified));if(l)return l;let d=[],m=new vm(d,o,i);for(let v of i)v.instances.push(m);let p=Ehe(i);for(let v of o.set)if(!v.modified.length)for(let x of p)d.push(i6.get(v,x));return m}}function Ahe(u,o){return u.length==o.length&&u.every((i,l)=>i==o[l])}function Ehe(u){let o=[[]];for(let i=0;i<u.length;i++)for(let l=0,d=o.length;l<d;l++)o.push(o[l].concat(u[i]));return o.sort((i,l)=>l.length-i.length)}function _re(u){let o=Object.create(null);for(let i in u){let l=u[i];Array.isArray(l)||(l=[l]);for(let d of i.split(" "))if(d){let m=[],p=2,v=d;for(let R=0;;){if(v=="..."&&R>0&&R+3==d.length){p=1;break}let N=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(v);if(!N)throw new RangeError("Invalid path: "+d);if(m.push(N[0]=="*"?"":N[0][0]=='"'?JSON.parse(N[0]):N[0]),R+=N[0].length,R==d.length)break;let $=d[R++];if(R==d.length&&$=="!"){p=0;break}if($!="/")throw new RangeError("Invalid path: "+d);v=d.slice(R)}let x=m.length-1,k=m[x];if(!k)throw new RangeError("Invalid path: "+d);let T=new a6(l,p,x>0?m.slice(0,x):null);o[k]=T.sort(o[k])}}return Mre.add(o)}const Mre=new Ks;class a6{constructor(o,i,l,d){this.tags=o,this.mode=i,this.context=l,this.next=d}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(o){return!o||o.depth<this.depth?(this.next=o,this):(o.next=this.sort(o.next),o)}get depth(){return this.context?this.context.length:0}}a6.empty=new a6([],2,null);function Rre(u,o){let i=Object.create(null);for(let m of u)if(!Array.isArray(m.tag))i[m.tag.id]=m.class;else for(let p of m.tag)i[p.id]=m.class;let{scope:l,all:d=null}=o||{};return{style:m=>{let p=d;for(let v of m)for(let x of v.set){let k=i[x.id];if(k){p=p?p+" "+k:k;break}}return p},scope:l}}function The(u,o){let i=null;for(let l of u){let d=l.style(o);d&&(i=i?i+" "+d:d)}return i}function Ohe(u,o,i,l=0,d=u.length){let m=new Dhe(l,Array.isArray(o)?o:[o],i);m.highlightRange(u.cursor(),l,d,"",m.highlighters),m.flush(d)}class Dhe{constructor(o,i,l){this.at=o,this.highlighters=i,this.span=l,this.class=""}startSpan(o,i){i!=this.class&&(this.flush(o),o>this.at&&(this.at=o),this.class=i)}flush(o){o>this.at&&this.class&&this.span(this.at,o,this.class)}highlightRange(o,i,l,d,m){let{type:p,from:v,to:x}=o;if(v>=l||x<=i)return;p.isTop&&(m=this.highlighters.filter($=>!$.scope||$.scope(p)));let k=d,T=_he(o)||a6.empty,R=The(m,T.tags);if(R&&(k&&(k+=" "),k+=R,T.mode==1&&(d+=(d?" ":"")+R)),this.startSpan(Math.max(i,v),k),T.opaque)return;let N=o.tree&&o.tree.prop(Ks.mounted);if(N&&N.overlay){let $=o.node.enter(N.overlay[0].from+v,1),U=this.highlighters.filter(J=>!J.scope||J.scope(N.tree.type)),X=o.firstChild();for(let J=0,G=v;;J++){let le=J<N.overlay.length?N.overlay[J]:null,Z=le?le.from+v:x,be=Math.max(i,G),He=Math.min(l,Z);if(be<He&&X)for(;o.from<He&&(this.highlightRange(o,be,He,d,m),this.startSpan(Math.min(He,o.to),k),!(o.to>=Z||!o.nextSibling())););if(!le||Z>l)break;G=le.to+v,G>i&&(this.highlightRange($.cursor(),Math.max(i,le.from+v),Math.min(l,G),"",U),this.startSpan(Math.min(l,G),k))}X&&o.parent()}else if(o.firstChild()){N&&(d="");do if(!(o.to<=i)){if(o.from>=l)break;this.highlightRange(o,i,l,d,m),this.startSpan(Math.min(l,o.to),k)}while(o.nextSibling());o.parent()}}}function _he(u){let o=u.type.prop(Mre);for(;o&&o.context&&!u.matchContext(o.context);)o=o.next;return o||null}const Gn=vm.define,C$=Gn(),V1=Gn(),Hne=Gn(V1),Vne=Gn(V1),z1=Gn(),k$=Gn(z1),ZX=Gn(z1),bm=Gn(),Qv=Gn(bm),gm=Gn(),pm=Gn(),ZJ=Gn(),D_=Gn(ZJ),A$=Gn(),It={comment:C$,lineComment:Gn(C$),blockComment:Gn(C$),docComment:Gn(C$),name:V1,variableName:Gn(V1),typeName:Hne,tagName:Gn(Hne),propertyName:Vne,attributeName:Gn(Vne),className:Gn(V1),labelName:Gn(V1),namespace:Gn(V1),macroName:Gn(V1),literal:z1,string:k$,docString:Gn(k$),character:Gn(k$),attributeValue:Gn(k$),number:ZX,integer:Gn(ZX),float:Gn(ZX),bool:Gn(z1),regexp:Gn(z1),escape:Gn(z1),color:Gn(z1),url:Gn(z1),keyword:gm,self:Gn(gm),null:Gn(gm),atom:Gn(gm),unit:Gn(gm),modifier:Gn(gm),operatorKeyword:Gn(gm),controlKeyword:Gn(gm),definitionKeyword:Gn(gm),moduleKeyword:Gn(gm),operator:pm,derefOperator:Gn(pm),arithmeticOperator:Gn(pm),logicOperator:Gn(pm),bitwiseOperator:Gn(pm),compareOperator:Gn(pm),updateOperator:Gn(pm),definitionOperator:Gn(pm),typeOperator:Gn(pm),controlOperator:Gn(pm),punctuation:ZJ,separator:Gn(ZJ),bracket:D_,angleBracket:Gn(D_),squareBracket:Gn(D_),paren:Gn(D_),brace:Gn(D_),content:bm,heading:Qv,heading1:Gn(Qv),heading2:Gn(Qv),heading3:Gn(Qv),heading4:Gn(Qv),heading5:Gn(Qv),heading6:Gn(Qv),contentSeparator:Gn(bm),list:Gn(bm),quote:Gn(bm),emphasis:Gn(bm),strong:Gn(bm),link:Gn(bm),monospace:Gn(bm),strikethrough:Gn(bm),inserted:Gn(),deleted:Gn(),changed:Gn(),invalid:Gn(),meta:A$,documentMeta:Gn(A$),annotation:Gn(A$),processingInstruction:Gn(A$),definition:vm.defineModifier(),constant:vm.defineModifier(),function:vm.defineModifier(),standard:vm.defineModifier(),local:vm.defineModifier(),special:vm.defineModifier()};Rre([{tag:It.link,class:"tok-link"},{tag:It.heading,class:"tok-heading"},{tag:It.emphasis,class:"tok-emphasis"},{tag:It.strong,class:"tok-strong"},{tag:It.keyword,class:"tok-keyword"},{tag:It.atom,class:"tok-atom"},{tag:It.bool,class:"tok-bool"},{tag:It.url,class:"tok-url"},{tag:It.labelName,class:"tok-labelName"},{tag:It.inserted,class:"tok-inserted"},{tag:It.deleted,class:"tok-deleted"},{tag:It.literal,class:"tok-literal"},{tag:It.string,class:"tok-string"},{tag:It.number,class:"tok-number"},{tag:[It.regexp,It.escape,It.special(It.string)],class:"tok-string2"},{tag:It.variableName,class:"tok-variableName"},{tag:It.local(It.variableName),class:"tok-variableName tok-local"},{tag:It.definition(It.variableName),class:"tok-variableName tok-definition"},{tag:It.special(It.variableName),class:"tok-variableName2"},{tag:It.definition(It.propertyName),class:"tok-propertyName tok-definition"},{tag:It.typeName,class:"tok-typeName"},{tag:It.namespace,class:"tok-namespace"},{tag:It.className,class:"tok-className"},{tag:It.macroName,class:"tok-macroName"},{tag:It.propertyName,class:"tok-propertyName"},{tag:It.operator,class:"tok-operator"},{tag:It.comment,class:"tok-comment"},{tag:It.meta,class:"tok-meta"},{tag:It.invalid,class:"tok-invalid"},{tag:It.punctuation,class:"tok-punctuation"}]);var qX;const ay=new Ks;function Pre(u){return Oo.define({combine:u?o=>o.concat(u):void 0})}const Mhe=new Ks;class bf{constructor(o,i,l=[],d=""){this.data=o,this.name=d,ur.prototype.hasOwnProperty("tree")||Object.defineProperty(ur.prototype,"tree",{get(){return ql(this)}}),this.parser=i,this.extension=[i0.of(this),ur.languageData.of((m,p,v)=>{let x=zne(m,p,v),k=x.type.prop(ay);if(!k)return[];let T=m.facet(k),R=x.type.prop(Mhe);if(R){let N=x.resolve(p-x.from,v);for(let $ of R)if($.test(N,m)){let U=m.facet($.facet);return $.type=="replace"?U:U.concat(T)}}return T})].concat(l)}isActiveAt(o,i,l=-1){return zne(o,i,l).type.prop(ay)==this.data}findRegions(o){let i=o.facet(i0);if((i==null?void 0:i.data)==this.data)return[{from:0,to:o.doc.length}];if(!i||!i.allowsNesting)return[];let l=[],d=(m,p)=>{if(m.prop(ay)==this.data){l.push({from:p,to:p+m.length});return}let v=m.prop(Ks.mounted);if(v){if(v.tree.prop(ay)==this.data){if(v.overlay)for(let x of v.overlay)l.push({from:x.from+p,to:x.to+p});else l.push({from:p,to:p+m.length});return}else if(v.overlay){let x=l.length;if(d(v.tree,v.overlay[0].from+p),l.length>x)return}}for(let x=0;x<m.children.length;x++){let k=m.children[x];k instanceof ui&&d(k,m.positions[x]+p)}};return d(ql(o),0),l}get allowsNesting(){return!0}}bf.setState=Us.define();function zne(u,o,i){let l=u.facet(i0),d=ql(u).topNode;if(!l||l.allowsNesting)for(let m=d;m;m=m.enter(o,i,Tl.ExcludeBuffers))m.type.isTop&&(d=m);return d}class l6 extends bf{constructor(o,i,l){super(o,i,[],l),this.parser=i}static define(o){let i=Pre(o.languageData);return new l6(i,o.parser.configure({props:[ay.add(l=>l.isTop?i:void 0)]}),o.name)}configure(o,i){return new l6(this.data,this.parser.configure(o),i||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ql(u){let o=u.field(bf.state,!1);return o?o.tree:ui.empty}class Rhe{constructor(o){this.doc=o,this.cursorPos=0,this.string="",this.cursor=o.iter()}get length(){return this.doc.length}syncTo(o){return this.string=this.cursor.next(o-this.cursorPos).value,this.cursorPos=o+this.string.length,this.cursorPos-this.string.length}chunk(o){return this.syncTo(o),this.string}get lineChunks(){return!0}read(o,i){let l=this.cursorPos-this.string.length;return o<l||i>=this.cursorPos?this.doc.sliceString(o,i):this.string.slice(o-l,i-l)}}let __=null;class b2{constructor(o,i,l=[],d,m,p,v,x){this.parser=o,this.state=i,this.fragments=l,this.tree=d,this.treeLen=m,this.viewport=p,this.skipped=v,this.scheduleOn=x,this.parse=null,this.tempSkipped=[]}static create(o,i,l){return new b2(o,i,[],ui.empty,0,l,[],null)}startParse(){return this.parser.startParse(new Rhe(this.state.doc),this.fragments)}work(o,i){return i!=null&&i>=this.state.doc.length&&(i=void 0),this.tree!=ui.empty&&this.isDone(i!=null?i:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var l;if(typeof o=="number"){let d=Date.now()+o;o=()=>Date.now()>d}for(this.parse||(this.parse=this.startParse()),i!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>i)&&i<this.state.doc.length&&this.parse.stopAt(i);;){let d=this.parse.advance();if(d)if(this.fragments=this.withoutTempSkipped(hy.addTree(d,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(l=this.parse.stoppedAt)!==null&&l!==void 0?l:this.state.doc.length,this.tree=d,this.parse=null,this.treeLen<(i!=null?i:this.state.doc.length))this.parse=this.startParse();else return!0;if(o())return!1}})}takeTree(){let o,i;this.parse&&(o=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>o)&&this.parse.stopAt(o),this.withContext(()=>{for(;!(i=this.parse.advance()););}),this.treeLen=o,this.tree=i,this.fragments=this.withoutTempSkipped(hy.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(o){let i=__;__=this;try{return o()}finally{__=i}}withoutTempSkipped(o){for(let i;i=this.tempSkipped.pop();)o=Une(o,i.from,i.to);return o}changes(o,i){let{fragments:l,tree:d,treeLen:m,viewport:p,skipped:v}=this;if(this.takeTree(),!o.empty){let x=[];if(o.iterChangedRanges((k,T,R,N)=>x.push({fromA:k,toA:T,fromB:R,toB:N})),l=hy.applyChanges(l,x),d=ui.empty,m=0,p={from:o.mapPos(p.from,-1),to:o.mapPos(p.to,1)},this.skipped.length){v=[];for(let k of this.skipped){let T=o.mapPos(k.from,1),R=o.mapPos(k.to,-1);T<R&&v.push({from:T,to:R})}}}return new b2(this.parser,i,l,d,m,p,v,this.scheduleOn)}updateViewport(o){if(this.viewport.from==o.from&&this.viewport.to==o.to)return!1;this.viewport=o;let i=this.skipped.length;for(let l=0;l<this.skipped.length;l++){let{from:d,to:m}=this.skipped[l];d<o.to&&m>o.from&&(this.fragments=Une(this.fragments,d,m),this.skipped.splice(l--,1))}return this.skipped.length>=i?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(o,i){this.skipped.push({from:o,to:i})}static getSkippingParser(o){return new class extends AQ{createParse(i,l,d){let m=d[0].from,p=d[d.length-1].to;return{parsedPos:m,advance(){let x=__;if(x){for(let k of d)x.tempSkipped.push(k);o&&(x.scheduleOn=x.scheduleOn?Promise.all([x.scheduleOn,o]):o)}return this.parsedPos=p,new ui(Xc.none,[],[],p-m)},stoppedAt:null,stopAt(){}}}}}isDone(o){o=Math.min(o,this.state.doc.length);let i=this.fragments;return this.treeLen>=o&&i.length&&i[0].from==0&&i[0].to>=o}static get(){return __}}function Une(u,o,i){return hy.applyChanges(u,[{fromA:o,toA:i,fromB:o,toB:i}])}class v2{constructor(o){this.context=o,this.tree=o.tree}apply(o){if(!o.docChanged&&this.tree==this.context.tree)return this;let i=this.context.changes(o.changes,o.state),l=this.context.treeLen==o.startState.doc.length?void 0:Math.max(o.changes.mapPos(this.context.treeLen),i.viewport.to);return i.work(20,l)||i.takeTree(),new v2(i)}static init(o){let i=Math.min(3e3,o.doc.length),l=b2.create(o.facet(i0).parser,o,{from:0,to:i});return l.work(20,i)||l.takeTree(),new v2(l)}}bf.state=Kl.define({create:v2.init,update(u,o){for(let i of o.effects)if(i.is(bf.setState))return i.value;return o.startState.facet(i0)!=o.state.facet(i0)?v2.init(o.state):u.apply(o)}});let Nre=u=>{let o=setTimeout(()=>u(),500);return()=>clearTimeout(o)};typeof requestIdleCallback!="undefined"&&(Nre=u=>{let o=-1,i=setTimeout(()=>{o=requestIdleCallback(u,{timeout:400})},100);return()=>o<0?clearTimeout(i):cancelIdleCallback(o)});const GX=typeof navigator!="undefined"&&(!((qX=navigator.scheduling)===null||qX===void 0)&&qX.isInputPending)?()=>navigator.scheduling.isInputPending():null,Phe=Ta.fromClass(class{constructor(o){this.view=o,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(o){let i=this.view.state.field(bf.state).context;(i.updateViewport(o.view.viewport)||this.view.viewport.to>i.treeLen)&&this.scheduleWork(),(o.docChanged||o.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(i)}scheduleWork(){if(this.working)return;let{state:o}=this.view,i=o.field(bf.state);(i.tree!=i.context.tree||!i.context.isDone(o.doc.length))&&(this.working=Nre(this.work))}work(o){this.working=null;let i=Date.now();if(this.chunkEnd<i&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=i+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:l,viewport:{to:d}}=this.view,m=l.field(bf.state);if(m.tree==m.context.tree&&m.context.isDone(d+1e5))return;let p=Date.now()+Math.min(this.chunkBudget,100,o&&!GX?Math.max(25,o.timeRemaining()-5):1e9),v=m.context.treeLen<d&&l.doc.length>d+1e3,x=m.context.work(()=>GX&&GX()||Date.now()>p,d+(v?0:1e5));this.chunkBudget-=Date.now()-i,(x||this.chunkBudget<=0)&&(m.context.takeTree(),this.view.dispatch({effects:bf.setState.of(new v2(m.context))})),this.chunkBudget>0&&!(x&&!v)&&this.scheduleWork(),this.checkAsyncSchedule(m.context)}checkAsyncSchedule(o){o.scheduleOn&&(this.workScheduled++,o.scheduleOn.then(()=>this.scheduleWork()).catch(i=>_u(this.view.state,i)).then(()=>this.workScheduled--),o.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),i0=Oo.define({combine(u){return u.length?u[0]:null},enables:u=>[bf.state,Phe,wo.contentAttributes.compute([u],o=>{let i=o.facet(u);return i&&i.name?{"data-language":i.name}:{}})]});class Nhe{constructor(o,i=[]){this.language=o,this.support=i,this.extension=[o,i]}}const Bre=Oo.define(),M6=Oo.define({combine:u=>{if(!u.length)return"  ";let o=u[0];if(!o||/\S/.test(o)||Array.from(o).some(i=>i!=o[0]))throw new Error("Invalid indent unit: "+JSON.stringify(u[0]));return o}});function xy(u){let o=u.facet(M6);return o.charCodeAt(0)==9?u.tabSize*o.length:o.length}function J_(u,o){let i="",l=u.tabSize,d=u.facet(M6)[0];if(d=="	"){for(;o>=l;)i+="	",o-=l;d=" "}for(let m=0;m<o;m++)i+=d;return i}function EQ(u,o){u instanceof ur&&(u=new R6(u));for(let l of u.state.facet(Bre)){let d=l(u,o);if(d!==void 0)return d}let i=ql(u.state);return i.length>=o?Bhe(u,i,o):null}class R6{constructor(o,i={}){this.state=o,this.options=i,this.unit=xy(o)}lineAt(o,i=1){let l=this.state.doc.lineAt(o),{simulateBreak:d,simulateDoubleBreak:m}=this.options;return d!=null&&d>=l.from&&d<=l.to?m&&d==o?{text:"",from:o}:(i<0?d<o:d<=o)?{text:l.text.slice(d-l.from),from:d}:{text:l.text.slice(0,d-l.from),from:l.from}:l}textAfterPos(o,i=1){if(this.options.simulateDoubleBreak&&o==this.options.simulateBreak)return"";let{text:l,from:d}=this.lineAt(o,i);return l.slice(o-d,Math.min(l.length,o+100-d))}column(o,i=1){let{text:l,from:d}=this.lineAt(o,i),m=this.countColumn(l,o-d),p=this.options.overrideIndentation?this.options.overrideIndentation(d):-1;return p>-1&&(m+=p-this.countColumn(l,l.search(/\S|$/))),m}countColumn(o,i=o.length){return S2(o,this.state.tabSize,i)}lineIndent(o,i=1){let{text:l,from:d}=this.lineAt(o,i),m=this.options.overrideIndentation;if(m){let p=m(d);if(p>-1)return p}return this.countColumn(l,l.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Fre=new Ks;function Bhe(u,o,i){let l=o.resolveStack(i),d=l.node.enterUnfinishedNodesBefore(i);if(d!=l.node){let m=[];for(let p=d;p!=l.node;p=p.parent)m.push(p);for(let p=m.length-1;p>=0;p--)l={node:m[p],next:l}}return Ire(l,u,i)}function Ire(u,o,i){for(let l=u;l;l=l.next){let d=Ihe(l.node);if(d)return d(TQ.create(o,i,l))}return 0}function Fhe(u){return u.pos==u.options.simulateBreak&&u.options.simulateDoubleBreak}function Ihe(u){let o=u.type.prop(Fre);if(o)return o;let i=u.firstChild,l;if(i&&(l=i.type.prop(Ks.closedBy))){let d=u.lastChild,m=d&&l.indexOf(d.name)>-1;return p=>Vhe(p,!0,1,void 0,m&&!Fhe(p)?d.from:void 0)}return u.parent==null?Lhe:null}function Lhe(){return 0}class TQ extends R6{constructor(o,i,l){super(o.state,o.options),this.base=o,this.pos=i,this.context=l}get node(){return this.context.node}static create(o,i,l){return new TQ(o,i,l)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(o){let i=this.state.doc.lineAt(o.from);for(;;){let l=o.resolve(i.from);for(;l.parent&&l.parent.from==l.from;)l=l.parent;if($he(l,o))break;i=this.state.doc.lineAt(l.from)}return this.lineIndent(i.from)}continue(){return Ire(this.context.next,this.base,this.pos)}}function $he(u,o){for(let i=o;i;i=i.parent)if(u==i)return!0;return!1}function Hhe(u){let o=u.node,i=o.childAfter(o.from),l=o.lastChild;if(!i)return null;let d=u.options.simulateBreak,m=u.state.doc.lineAt(i.from),p=d==null||d<=m.from?m.to:Math.min(m.to,d);for(let v=i.to;;){let x=o.childAfter(v);if(!x||x==l)return null;if(!x.type.isSkipped)return x.from<p?i:null;v=x.to}}function Vhe(u,o,i,l,d){let m=u.textAfter,p=m.match(/^\s*/)[0].length,v=d==u.pos+p,x=Hhe(u);return x?v?u.column(x.from):u.column(x.to):u.baseIndent+(v?0:u.unit*i)}function Wne({except:u,units:o=1}={}){return i=>{let l=u&&u.test(i.textAfter);return i.baseIndent+(l?0:o*i.unit)}}const zhe=200;function Uhe(){return ur.transactionFilter.of(u=>{if(!u.docChanged||!u.isUserEvent("input.type")&&!u.isUserEvent("input.complete"))return u;let o=u.startState.languageDataAt("indentOnInput",u.startState.selection.main.head);if(!o.length)return u;let i=u.newDoc,{head:l}=u.newSelection.main,d=i.lineAt(l);if(l>d.from+zhe)return u;let m=i.sliceString(d.from,l);if(!o.some(k=>k.test(m)))return u;let{state:p}=u,v=-1,x=[];for(let{head:k}of p.selection.ranges){let T=p.doc.lineAt(k);if(T.from==v)continue;v=T.from;let R=EQ(p,T.from);if(R==null)continue;let N=/^\s*/.exec(T.text)[0],$=J_(p,R);N!=$&&x.push({from:T.from,to:T.from+N.length,insert:$})}return x.length?[u,{changes:x,sequential:!0}]:u})}const Whe=Oo.define(),Lre=new Ks;function jhe(u){let o=u.firstChild,i=u.lastChild;return o&&o.to<i.from?{from:o.to,to:i.type.isError?u.to:i.from}:null}function Zhe(u,o,i){let l=ql(u);if(l.length<i)return null;let d=l.resolveStack(i,1),m=null;for(let p=d;p;p=p.next){let v=p.node;if(v.to<=i||v.from>i)continue;if(m&&v.from<o)break;let x=v.type.prop(Lre);if(x&&(v.to<l.length-50||l.length==u.doc.length||!qhe(v))){let k=x(v,u);k&&k.from<=i&&k.from>=o&&k.to>i&&(m=k)}}return m}function qhe(u){let o=u.lastChild;return o&&o.to==u.to&&o.type.isError}function c6(u,o,i){for(let l of u.facet(Whe)){let d=l(u,o,i);if(d)return d}return Zhe(u,o,i)}function $re(u,o){let i=o.mapPos(u.from,1),l=o.mapPos(u.to,-1);return i>=l?void 0:{from:i,to:l}}const P6=Us.define({map:$re}),fM=Us.define({map:$re});function Hre(u){let o=[];for(let{head:i}of u.state.selection.ranges)o.some(l=>l.from<=i&&l.to>=i)||o.push(u.lineBlockAt(i));return o}const Sy=Kl.define({create(){return as.none},update(u,o){u=u.map(o.changes);for(let i of o.effects)if(i.is(P6)&&!Ghe(u,i.value.from,i.value.to)){let{preparePlaceholder:l}=o.state.facet(Ure),d=l?as.replace({widget:new tme(l(o.state,i.value))}):jne;u=u.update({add:[d.range(i.value.from,i.value.to)]})}else i.is(fM)&&(u=u.update({filter:(l,d)=>i.value.from!=l||i.value.to!=d,filterFrom:i.value.from,filterTo:i.value.to}));if(o.selection){let i=!1,{head:l}=o.selection.main;u.between(l,l,(d,m)=>{d<l&&m>l&&(i=!0)}),i&&(u=u.update({filterFrom:l,filterTo:l,filter:(d,m)=>m<=l||d>=l}))}return u},provide:u=>wo.decorations.from(u),toJSON(u,o){let i=[];return u.between(0,o.doc.length,(l,d)=>{i.push(l,d)}),i},fromJSON(u){if(!Array.isArray(u)||u.length%2)throw new RangeError("Invalid JSON for fold state");let o=[];for(let i=0;i<u.length;){let l=u[i++],d=u[i++];if(typeof l!="number"||typeof d!="number")throw new RangeError("Invalid JSON for fold state");o.push(jne.range(l,d))}return as.set(o,!0)}});function u6(u,o,i){var l;let d=null;return(l=u.field(Sy,!1))===null||l===void 0||l.between(o,i,(m,p)=>{(!d||d.from>m)&&(d={from:m,to:p})}),d}function Ghe(u,o,i){let l=!1;return u.between(o,o,(d,m)=>{d==o&&m==i&&(l=!0)}),l}function Vre(u,o){return u.field(Sy,!1)?o:o.concat(Us.appendConfig.of(Wre()))}const Khe=u=>{for(let o of Hre(u)){let i=c6(u.state,o.from,o.to);if(i)return u.dispatch({effects:Vre(u.state,[P6.of(i),zre(u,i)])}),!0}return!1},Yhe=u=>{if(!u.state.field(Sy,!1))return!1;let o=[];for(let i of Hre(u)){let l=u6(u.state,i.from,i.to);l&&o.push(fM.of(l),zre(u,l,!1))}return o.length&&u.dispatch({effects:o}),o.length>0};function zre(u,o,i=!0){let l=u.state.doc.lineAt(o.from).number,d=u.state.doc.lineAt(o.to).number;return wo.announce.of(`${u.state.phrase(i?"Folded lines":"Unfolded lines")} ${l} ${u.state.phrase("to")} ${d}.`)}const Xhe=u=>{let{state:o}=u,i=[];for(let l=0;l<o.doc.length;){let d=u.lineBlockAt(l),m=c6(o,d.from,d.to);m&&i.push(P6.of(m)),l=(m?u.lineBlockAt(m.to):d).to+1}return i.length&&u.dispatch({effects:Vre(u.state,i)}),!!i.length},Jhe=u=>{let o=u.state.field(Sy,!1);if(!o||!o.size)return!1;let i=[];return o.between(0,u.state.doc.length,(l,d)=>{i.push(fM.of({from:l,to:d}))}),u.dispatch({effects:i}),!0},Qhe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Khe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Yhe},{key:"Ctrl-Alt-[",run:Xhe},{key:"Ctrl-Alt-]",run:Jhe}],eme={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Ure=Oo.define({combine(u){return km(u,eme)}});function Wre(u){return[Sy,sme]}function jre(u,o){let{state:i}=u,l=i.facet(Ure),d=p=>{let v=u.lineBlockAt(u.posAtDOM(p.target)),x=u6(u.state,v.from,v.to);x&&u.dispatch({effects:fM.of(x)}),p.preventDefault()};if(l.placeholderDOM)return l.placeholderDOM(u,d,o);let m=document.createElement("span");return m.textContent=l.placeholderText,m.setAttribute("aria-label",i.phrase("folded code")),m.title=i.phrase("unfold"),m.className="cm-foldPlaceholder",m.onclick=d,m}const jne=as.replace({widget:new class extends Yg{toDOM(u){return jre(u,null)}}});class tme extends Yg{constructor(o){super(),this.value=o}eq(o){return this.value==o.value}toDOM(o){return jre(o,this.value)}}const nme={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class KX extends Gg{constructor(o,i){super(),this.config=o,this.open=i}eq(o){return this.config==o.config&&this.open==o.open}toDOM(o){if(this.config.markerDOM)return this.config.markerDOM(this.open);let i=document.createElement("span");return i.textContent=this.open?this.config.openText:this.config.closedText,i.title=o.state.phrase(this.open?"Fold line":"Unfold line"),i}}function ome(u={}){let o=Object.assign(Object.assign({},nme),u),i=new KX(o,!0),l=new KX(o,!1),d=Ta.fromClass(class{constructor(p){this.from=p.viewport.from,this.markers=this.buildMarkers(p)}update(p){(p.docChanged||p.viewportChanged||p.startState.facet(i0)!=p.state.facet(i0)||p.startState.field(Sy,!1)!=p.state.field(Sy,!1)||ql(p.startState)!=ql(p.state)||o.foldingChanged(p))&&(this.markers=this.buildMarkers(p.view))}buildMarkers(p){let v=new t0;for(let x of p.viewportLineBlocks){let k=u6(p.state,x.from,x.to)?l:c6(p.state,x.from,x.to)?i:null;k&&v.add(x.from,x.from,k)}return v.finish()}}),{domEventHandlers:m}=o;return[d,ihe({class:"cm-foldGutter",markers(p){var v;return((v=p.plugin(d))===null||v===void 0?void 0:v.markers)||xr.empty},initialSpacer(){return new KX(o,!1)},domEventHandlers:Object.assign(Object.assign({},m),{click:(p,v,x)=>{if(m.click&&m.click(p,v,x))return!0;let k=u6(p.state,v.from,v.to);if(k)return p.dispatch({effects:fM.of(k)}),!0;let T=c6(p.state,v.from,v.to);return T?(p.dispatch({effects:P6.of(T)}),!0):!1}})}),Wre()]}const sme=wo.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class hM{constructor(o,i){this.specs=o;let l;function d(v){let x=n0.newName();return(l||(l=Object.create(null)))["."+x]=v,x}const m=typeof i.all=="string"?i.all:i.all?d(i.all):void 0,p=i.scope;this.scope=p instanceof bf?v=>v.prop(ay)==p.data:p?v=>v==p:void 0,this.style=Rre(o.map(v=>({tag:v.tag,class:v.class||d(Object.assign({},v,{tag:null}))})),{all:m}).style,this.module=l?new n0(l):null,this.themeType=i.themeType}static define(o,i){return new hM(o,i||{})}}const qJ=Oo.define(),Zre=Oo.define({combine(u){return u.length?[u[0]]:null}});function YX(u){let o=u.facet(qJ);return o.length?o:u.facet(Zre)}function qre(u,o){let i=[ime],l;return u instanceof hM&&(u.module&&i.push(wo.styleModule.of(u.module)),l=u.themeType),o!=null&&o.fallback?i.push(Zre.of(u)):l?i.push(qJ.computeN([wo.darkTheme],d=>d.facet(wo.darkTheme)==(l=="dark")?[u]:[])):i.push(qJ.of(u)),i}class rme{constructor(o){this.markCache=Object.create(null),this.tree=ql(o.state),this.decorations=this.buildDeco(o,YX(o.state)),this.decoratedTo=o.viewport.to}update(o){let i=ql(o.state),l=YX(o.state),d=l!=YX(o.startState),{viewport:m}=o.view,p=o.changes.mapPos(this.decoratedTo,1);i.length<m.to&&!d&&i.type==this.tree.type&&p>=m.to?(this.decorations=this.decorations.map(o.changes),this.decoratedTo=p):(i!=this.tree||o.viewportChanged||d)&&(this.tree=i,this.decorations=this.buildDeco(o.view,l),this.decoratedTo=m.to)}buildDeco(o,i){if(!i||!this.tree.length)return as.none;let l=new t0;for(let{from:d,to:m}of o.visibleRanges)Ohe(this.tree,i,(p,v,x)=>{l.add(p,v,this.markCache[x]||(this.markCache[x]=as.mark({class:x})))},d,m);return l.finish()}}const ime=Ay.high(Ta.fromClass(rme,{decorations:u=>u.decorations})),ame=hM.define([{tag:It.meta,color:"#404740"},{tag:It.link,textDecoration:"underline"},{tag:It.heading,textDecoration:"underline",fontWeight:"bold"},{tag:It.emphasis,fontStyle:"italic"},{tag:It.strong,fontWeight:"bold"},{tag:It.strikethrough,textDecoration:"line-through"},{tag:It.keyword,color:"#708"},{tag:[It.atom,It.bool,It.url,It.contentSeparator,It.labelName],color:"#219"},{tag:[It.literal,It.inserted],color:"#164"},{tag:[It.string,It.deleted],color:"#a11"},{tag:[It.regexp,It.escape,It.special(It.string)],color:"#e40"},{tag:It.definition(It.variableName),color:"#00f"},{tag:It.local(It.variableName),color:"#30a"},{tag:[It.typeName,It.namespace],color:"#085"},{tag:It.className,color:"#167"},{tag:[It.special(It.variableName),It.macroName],color:"#256"},{tag:It.definition(It.propertyName),color:"#00c"},{tag:It.comment,color:"#940"},{tag:It.invalid,color:"#f00"}]),lme=wo.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Gre=1e4,Kre="()[]{}",Yre=Oo.define({combine(u){return km(u,{afterCursor:!0,brackets:Kre,maxScanDistance:Gre,renderMatch:dme})}}),cme=as.mark({class:"cm-matchingBracket"}),ume=as.mark({class:"cm-nonmatchingBracket"});function dme(u){let o=[],i=u.matched?cme:ume;return o.push(i.range(u.start.from,u.start.to)),u.end&&o.push(i.range(u.end.from,u.end.to)),o}const fme=Kl.define({create(){return as.none},update(u,o){if(!o.docChanged&&!o.selection)return u;let i=[],l=o.state.facet(Yre);for(let d of o.state.selection.ranges){if(!d.empty)continue;let m=xm(o.state,d.head,-1,l)||d.head>0&&xm(o.state,d.head-1,1,l)||l.afterCursor&&(xm(o.state,d.head,1,l)||d.head<o.state.doc.length&&xm(o.state,d.head+1,-1,l));m&&(i=i.concat(l.renderMatch(m,o.state)))}return as.set(i,!0)},provide:u=>wo.decorations.from(u)}),hme=[fme,lme];function mme(u={}){return[Yre.of(u),hme]}const gme=new Ks;function GJ(u,o,i){let l=u.prop(o<0?Ks.openedBy:Ks.closedBy);if(l)return l;if(u.name.length==1){let d=i.indexOf(u.name);if(d>-1&&d%2==(o<0?1:0))return[i[d+o]]}return null}function KJ(u){let o=u.type.prop(gme);return o?o(u.node):u}function xm(u,o,i,l={}){let d=l.maxScanDistance||Gre,m=l.brackets||Kre,p=ql(u),v=p.resolveInner(o,i);for(let x=v;x;x=x.parent){let k=GJ(x.type,i,m);if(k&&x.from<x.to){let T=KJ(x);if(T&&(i>0?o>=T.from&&o<T.to:o>T.from&&o<=T.to))return pme(u,o,i,x,T,k,m)}}return bme(u,o,i,p,v.type,d,m)}function pme(u,o,i,l,d,m,p){let v=l.parent,x={from:d.from,to:d.to},k=0,T=v==null?void 0:v.cursor();if(T&&(i<0?T.childBefore(l.from):T.childAfter(l.to)))do if(i<0?T.to<=l.from:T.from>=l.to){if(k==0&&m.indexOf(T.type.name)>-1&&T.from<T.to){let R=KJ(T);return{start:x,end:R?{from:R.from,to:R.to}:void 0,matched:!0}}else if(GJ(T.type,i,p))k++;else if(GJ(T.type,-i,p)){if(k==0){let R=KJ(T);return{start:x,end:R&&R.from<R.to?{from:R.from,to:R.to}:void 0,matched:!1}}k--}}while(i<0?T.prevSibling():T.nextSibling());return{start:x,matched:!1}}function bme(u,o,i,l,d,m,p){let v=i<0?u.sliceDoc(o-1,o):u.sliceDoc(o,o+1),x=p.indexOf(v);if(x<0||x%2==0!=i>0)return null;let k={from:i<0?o-1:o,to:i>0?o+1:o},T=u.doc.iterRange(o,i>0?u.doc.length:0),R=0;for(let N=0;!T.next().done&&N<=m;){let $=T.value;i<0&&(N+=$.length);let U=o+N*i;for(let X=i>0?0:$.length-1,J=i>0?$.length:-1;X!=J;X+=i){let G=p.indexOf($[X]);if(!(G<0||l.resolveInner(U+X,1).type!=d))if(G%2==0==i>0)R++;else{if(R==1)return{start:k,end:{from:U+X,to:U+X+1},matched:G>>1==x>>1};R--}}i>0&&(N+=$.length)}return T.done?{start:k,matched:!1}:null}function Zne(u,o,i,l=0,d=0){o==null&&(o=u.search(/[^\s\u00a0]/),o==-1&&(o=u.length));let m=d;for(let p=l;p<o;p++)u.charCodeAt(p)==9?m+=i-m%i:m++;return m}class Xre{constructor(o,i,l,d){this.string=o,this.tabSize=i,this.indentUnit=l,this.overrideIndent=d,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(o){let i=this.string.charAt(this.pos),l;if(typeof o=="string"?l=i==o:l=i&&(o instanceof RegExp?o.test(i):o(i)),l)return++this.pos,i}eatWhile(o){let i=this.pos;for(;this.eat(o););return this.pos>i}eatSpace(){let o=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>o}skipToEnd(){this.pos=this.string.length}skipTo(o){let i=this.string.indexOf(o,this.pos);if(i>-1)return this.pos=i,!0}backUp(o){this.pos-=o}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Zne(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var o;return(o=this.overrideIndent)!==null&&o!==void 0?o:Zne(this.string,null,this.tabSize)}match(o,i,l){if(typeof o=="string"){let d=p=>l?p.toLowerCase():p,m=this.string.substr(this.pos,o.length);return d(m)==d(o)?(i!==!1&&(this.pos+=o.length),!0):null}else{let d=this.string.slice(this.pos).match(o);return d&&d.index>0?null:(d&&i!==!1&&(this.pos+=d[0].length),d)}}current(){return this.string.slice(this.start,this.pos)}}function vme(u){return{name:u.name||"",token:u.token,blankLine:u.blankLine||(()=>{}),startState:u.startState||(()=>!0),copyState:u.copyState||yme,indent:u.indent||(()=>null),languageData:u.languageData||{},tokenTable:u.tokenTable||_Q}}function yme(u){if(typeof u!="object")return u;let o={};for(let i in u){let l=u[i];o[i]=l instanceof Array?l.slice():l}return o}const qne=new WeakMap;class OQ extends bf{constructor(o){let i=Pre(o.languageData),l=vme(o),d,m=new class extends AQ{createParse(p,v,x){return new xme(d,p,v,x)}};super(i,m,[Bre.of((p,v)=>this.getIndent(p,v))],o.name),this.topNode=kme(i),d=this,this.streamParser=l,this.stateAfter=new Ks({perNode:!0}),this.tokenTable=o.tokenTable?new tie(l.tokenTable):Cme}static define(o){return new OQ(o)}getIndent(o,i){let l=ql(o.state),d=l.resolve(i);for(;d&&d.type!=this.topNode;)d=d.parent;if(!d)return null;let m,{overrideIndentation:p}=o.options;p&&(m=qne.get(o.state),m!=null&&m<i-1e4&&(m=void 0));let v=DQ(this,l,0,d.from,m!=null?m:i),x,k;if(v?(k=v.state,x=v.pos+1):(k=this.streamParser.startState(o.unit),x=0),i-x>1e4)return null;for(;x<i;){let R=o.state.doc.lineAt(x),N=Math.min(i,R.to);if(R.length){let $=p?p(R.from):-1,U=new Xre(R.text,o.state.tabSize,o.unit,$<0?void 0:$);for(;U.pos<N-R.from;)Qre(this.streamParser.token,U,k)}else this.streamParser.blankLine(k,o.unit);if(N==i)break;x=R.to+1}let T=o.lineAt(i);return p&&m==null&&qne.set(o.state,T.from),this.streamParser.indent(k,/^\s*(.*)/.exec(T.text)[1],o)}get allowsNesting(){return!1}}function DQ(u,o,i,l,d){let m=i>=l&&i+o.length<=d&&o.prop(u.stateAfter);if(m)return{state:u.streamParser.copyState(m),pos:i+o.length};for(let p=o.children.length-1;p>=0;p--){let v=o.children[p],x=i+o.positions[p],k=v instanceof ui&&x<d&&DQ(u,v,x,l,d);if(k)return k}return null}function Jre(u,o,i,l,d){if(d&&i<=0&&l>=o.length)return o;!d&&o.type==u.topNode&&(d=!0);for(let m=o.children.length-1;m>=0;m--){let p=o.positions[m],v=o.children[m],x;if(p<l&&v instanceof ui){if(!(x=Jre(u,v,i-p,l-p,d)))break;return d?new ui(o.type,o.children.slice(0,m).concat(x),o.positions.slice(0,m+1),p+x.length):x}}return null}function wme(u,o,i,l){for(let d of o){let m=d.from+(d.openStart?25:0),p=d.to-(d.openEnd?25:0),v=m<=i&&p>i&&DQ(u,d.tree,0-d.offset,i,p),x;if(v&&(x=Jre(u,d.tree,i+d.offset,v.pos+d.offset,!1)))return{state:v.state,tree:x}}return{state:u.streamParser.startState(l?xy(l):4),tree:ui.empty}}let xme=class{constructor(o,i,l,d){this.lang=o,this.input=i,this.fragments=l,this.ranges=d,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=d[d.length-1].to;let m=b2.get(),p=d[0].from,{state:v,tree:x}=wme(o,l,p,m==null?void 0:m.state);this.state=v,this.parsedPos=this.chunkStart=p+x.length;for(let k=0;k<x.children.length;k++)this.chunks.push(x.children[k]),this.chunkPos.push(x.positions[k]);m&&this.parsedPos<m.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(xy(m.state)),m.skipUntilInView(this.parsedPos,m.viewport.from),this.parsedPos=m.viewport.from),this.moveRangeIndex()}advance(){let o=b2.get(),i=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),l=Math.min(i,this.chunkStart+2048);for(o&&(l=Math.min(l,o.viewport.to));this.parsedPos<l;)this.parseLine(o);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=i?this.finish():o&&this.parsedPos>=o.viewport.to?(o.skipUntilInView(this.parsedPos,i),this.finish()):null}stopAt(o){this.stoppedAt=o}lineAfter(o){let i=this.input.chunk(o);if(this.input.lineChunks)i==`
`&&(i="");else{let l=i.indexOf(`
`);l>-1&&(i=i.slice(0,l))}return o+i.length<=this.to?i:i.slice(0,this.to-o)}nextLine(){let o=this.parsedPos,i=this.lineAfter(o),l=o+i.length;for(let d=this.rangeIndex;;){let m=this.ranges[d].to;if(m>=l||(i=i.slice(0,m-(l-i.length)),d++,d==this.ranges.length))break;let p=this.ranges[d].from,v=this.lineAfter(p);i+=v,l=p+v.length}return{line:i,end:l}}skipGapsTo(o,i,l){for(;;){let d=this.ranges[this.rangeIndex].to,m=o+i;if(l>0?d>m:d>=m)break;let p=this.ranges[++this.rangeIndex].from;i+=p-d}return i}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(o,i,l,d,m){if(this.ranges.length>1){m=this.skipGapsTo(i,m,1),i+=m;let p=this.chunk.length;m=this.skipGapsTo(l,m,-1),l+=m,d+=this.chunk.length-p}return this.chunk.push(o,i,l,d),m}parseLine(o){let{line:i,end:l}=this.nextLine(),d=0,{streamParser:m}=this.lang,p=new Xre(i,o?o.state.tabSize:4,o?xy(o.state):2);if(p.eol())m.blankLine(this.state,p.indentUnit);else for(;!p.eol();){let v=Qre(m.token,p,this.state);if(v&&(d=this.emitToken(this.lang.tokenTable.resolve(v),this.parsedPos+p.start,this.parsedPos+p.pos,4,d)),p.start>1e4)break}this.parsedPos=l,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let o=ui.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Sme,topID:0,maxBufferLength:2048,reused:this.chunkReused});o=new ui(o.type,o.children,o.positions,o.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(o),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new ui(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}};function Qre(u,o,i){o.start=o.pos;for(let l=0;l<10;l++){let d=u(o,i);if(o.pos>o.start)return d}throw new Error("Stream parser failed to advance stream.")}const _Q=Object.create(null),Q_=[Xc.none],Sme=new _6(Q_),Gne=[],Kne=Object.create(null),eie=Object.create(null);for(let[u,o]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])eie[u]=nie(_Q,o);class tie{constructor(o){this.extra=o,this.table=Object.assign(Object.create(null),eie)}resolve(o){return o?this.table[o]||(this.table[o]=nie(this.extra,o)):0}}const Cme=new tie(_Q);function XX(u,o){Gne.indexOf(u)>-1||Gne.push(u)}function nie(u,o){let i=[];for(let v of o.split(" ")){let x=[];for(let k of v.split(".")){let T=u[k]||It[k];T?typeof T=="function"?x.length?x=x.map(T):XX(k,`Modifier ${k} used at start of tag`):x.length?XX(k,`Tag ${k} used as modifier`):x=Array.isArray(T)?T:[T]:XX(k,`Unknown highlighting tag ${k}`)}for(let k of x)i.push(k)}if(!i.length)return 0;let l=o.replace(/ /g,"_"),d=l+" "+i.map(v=>v.id),m=Kne[d];if(m)return m.id;let p=Kne[d]=Xc.define({id:Q_.length,name:l,props:[_re({[l]:i})]});return Q_.push(p),p.id}function kme(u){let o=Xc.define({id:Q_.length,name:"Document",props:[ay.add(()=>u)],top:!0});return Q_.push(o),o}Fi.RTL,Fi.LTR;const Ame=u=>{let{state:o}=u,i=o.doc.lineAt(o.selection.main.from),l=RQ(u.state,i.from);return l.line?Eme(u):l.block?Ome(u):!1};function MQ(u,o){return({state:i,dispatch:l})=>{if(i.readOnly)return!1;let d=u(o,i);return d?(l(i.update(d)),!0):!1}}const Eme=MQ(Mme,0),Tme=MQ(oie,0),Ome=MQ((u,o)=>oie(u,o,_me(o)),0);function RQ(u,o){let i=u.languageDataAt("commentTokens",o);return i.length?i[0]:{}}const M_=50;function Dme(u,{open:o,close:i},l,d){let m=u.sliceDoc(l-M_,l),p=u.sliceDoc(d,d+M_),v=/\s*$/.exec(m)[0].length,x=/^\s*/.exec(p)[0].length,k=m.length-v;if(m.slice(k-o.length,k)==o&&p.slice(x,x+i.length)==i)return{open:{pos:l-v,margin:v&&1},close:{pos:d+x,margin:x&&1}};let T,R;d-l<=2*M_?T=R=u.sliceDoc(l,d):(T=u.sliceDoc(l,l+M_),R=u.sliceDoc(d-M_,d));let N=/^\s*/.exec(T)[0].length,$=/\s*$/.exec(R)[0].length,U=R.length-$-i.length;return T.slice(N,N+o.length)==o&&R.slice(U,U+i.length)==i?{open:{pos:l+N+o.length,margin:/\s/.test(T.charAt(N+o.length))?1:0},close:{pos:d-$-i.length,margin:/\s/.test(R.charAt(U-1))?1:0}}:null}function _me(u){let o=[];for(let i of u.selection.ranges){let l=u.doc.lineAt(i.from),d=i.to<=l.to?l:u.doc.lineAt(i.to),m=o.length-1;m>=0&&o[m].to>l.from?o[m].to=d.to:o.push({from:l.from+/^\s*/.exec(l.text)[0].length,to:d.to})}return o}function oie(u,o,i=o.selection.ranges){let l=i.map(m=>RQ(o,m.from).block);if(!l.every(m=>m))return null;let d=i.map((m,p)=>Dme(o,l[p],m.from,m.to));if(u!=2&&!d.every(m=>m))return{changes:o.changes(i.map((m,p)=>d[p]?[]:[{from:m.from,insert:l[p].open+" "},{from:m.to,insert:" "+l[p].close}]))};if(u!=1&&d.some(m=>m)){let m=[];for(let p=0,v;p<d.length;p++)if(v=d[p]){let x=l[p],{open:k,close:T}=v;m.push({from:k.pos-x.open.length,to:k.pos+k.margin},{from:T.pos-T.margin,to:T.pos+x.close.length})}return{changes:m}}return null}function Mme(u,o,i=o.selection.ranges){let l=[],d=-1;for(let{from:m,to:p}of i){let v=l.length,x=1e9,k=RQ(o,m).line;if(k){for(let T=m;T<=p;){let R=o.doc.lineAt(T);if(R.from>d&&(m==p||p>R.from)){d=R.from;let N=/^\s*/.exec(R.text)[0].length,$=N==R.length,U=R.text.slice(N,N+k.length)==k?N:-1;N<R.text.length&&N<x&&(x=N),l.push({line:R,comment:U,token:k,indent:N,empty:$,single:!1})}T=R.to+1}if(x<1e9)for(let T=v;T<l.length;T++)l[T].indent<l[T].line.text.length&&(l[T].indent=x);l.length==v+1&&(l[v].single=!0)}}if(u!=2&&l.some(m=>m.comment<0&&(!m.empty||m.single))){let m=[];for(let{line:v,token:x,indent:k,empty:T,single:R}of l)(R||!T)&&m.push({from:v.from+k,insert:x+" "});let p=o.changes(m);return{changes:p,selection:o.selection.map(p,1)}}else if(u!=1&&l.some(m=>m.comment>=0)){let m=[];for(let{line:p,comment:v,token:x}of l)if(v>=0){let k=p.from+v,T=k+x.length;p.text[T-p.from]==" "&&T++,m.push({from:k,to:T})}return{changes:m}}return null}const YJ=Kg.define(),Rme=Kg.define(),Pme=Oo.define(),sie=Oo.define({combine(u){return km(u,{minDepth:100,newGroupDelay:500,joinToEvent:(o,i)=>i},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(o,i)=>(l,d)=>o(l,d)||i(l,d)})}}),rie=Kl.define({create(){return Sm.empty},update(u,o){let i=o.state.facet(sie),l=o.annotation(YJ);if(l){let x=Mu.fromTransaction(o,l.selection),k=l.side,T=k==0?u.undone:u.done;return x?T=d6(T,T.length,i.minDepth,x):T=lie(T,o.startState.selection),new Sm(k==0?l.rest:T,k==0?T:l.rest)}let d=o.annotation(Rme);if((d=="full"||d=="before")&&(u=u.isolate()),o.annotation(il.addToHistory)===!1)return o.changes.empty?u:u.addMapping(o.changes.desc);let m=Mu.fromTransaction(o),p=o.annotation(il.time),v=o.annotation(il.userEvent);return m?u=u.addChanges(m,p,v,i,o):o.selection&&(u=u.addSelection(o.startState.selection,p,v,i.newGroupDelay)),(d=="full"||d=="after")&&(u=u.isolate()),u},toJSON(u){return{done:u.done.map(o=>o.toJSON()),undone:u.undone.map(o=>o.toJSON())}},fromJSON(u){return new Sm(u.done.map(Mu.fromJSON),u.undone.map(Mu.fromJSON))}});function Nme(u={}){return[rie,sie.of(u),wo.domEventHandlers({beforeinput(o,i){let l=o.inputType=="historyUndo"?iie:o.inputType=="historyRedo"?XJ:null;return l?(o.preventDefault(),l(i)):!1}})]}function N6(u,o){return function({state:i,dispatch:l}){if(!o&&i.readOnly)return!1;let d=i.field(rie,!1);if(!d)return!1;let m=d.pop(u,i,o);return m?(l(m),!0):!1}}const iie=N6(0,!1),XJ=N6(1,!1),Bme=N6(0,!0),Fme=N6(1,!0);class Mu{constructor(o,i,l,d,m){this.changes=o,this.effects=i,this.mapped=l,this.startSelection=d,this.selectionsAfter=m}setSelAfter(o){return new Mu(this.changes,this.effects,this.mapped,this.startSelection,o)}toJSON(){var o,i,l;return{changes:(o=this.changes)===null||o===void 0?void 0:o.toJSON(),mapped:(i=this.mapped)===null||i===void 0?void 0:i.toJSON(),startSelection:(l=this.startSelection)===null||l===void 0?void 0:l.toJSON(),selectionsAfter:this.selectionsAfter.map(d=>d.toJSON())}}static fromJSON(o){return new Mu(o.changes&&rl.fromJSON(o.changes),[],o.mapped&&Cm.fromJSON(o.mapped),o.startSelection&&rn.fromJSON(o.startSelection),o.selectionsAfter.map(rn.fromJSON))}static fromTransaction(o,i){let l=vf;for(let d of o.startState.facet(Pme)){let m=d(o);m.length&&(l=l.concat(m))}return!l.length&&o.changes.empty?null:new Mu(o.changes.invert(o.startState.doc),l,void 0,i||o.startState.selection,vf)}static selection(o){return new Mu(void 0,vf,void 0,void 0,o)}}function d6(u,o,i,l){let d=o+1>i+20?o-i-1:0,m=u.slice(d,o);return m.push(l),m}function Ime(u,o){let i=[],l=!1;return u.iterChangedRanges((d,m)=>i.push(d,m)),o.iterChangedRanges((d,m,p,v)=>{for(let x=0;x<i.length;){let k=i[x++],T=i[x++];v>=k&&p<=T&&(l=!0)}}),l}function Lme(u,o){return u.ranges.length==o.ranges.length&&u.ranges.filter((i,l)=>i.empty!=o.ranges[l].empty).length===0}function aie(u,o){return u.length?o.length?u.concat(o):u:o}const vf=[],$me=200;function lie(u,o){if(u.length){let i=u[u.length-1],l=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-$me));return l.length&&l[l.length-1].eq(o)?u:(l.push(o),d6(u,u.length-1,1e9,i.setSelAfter(l)))}else return[Mu.selection([o])]}function Hme(u){let o=u[u.length-1],i=u.slice();return i[u.length-1]=o.setSelAfter(o.selectionsAfter.slice(0,o.selectionsAfter.length-1)),i}function JX(u,o){if(!u.length)return u;let i=u.length,l=vf;for(;i;){let d=Vme(u[i-1],o,l);if(d.changes&&!d.changes.empty||d.effects.length){let m=u.slice(0,i);return m[i-1]=d,m}else o=d.mapped,i--,l=d.selectionsAfter}return l.length?[Mu.selection(l)]:vf}function Vme(u,o,i){let l=aie(u.selectionsAfter.length?u.selectionsAfter.map(v=>v.map(o)):vf,i);if(!u.changes)return Mu.selection(l);let d=u.changes.map(o),m=o.mapDesc(u.changes,!0),p=u.mapped?u.mapped.composeDesc(m):m;return new Mu(d,Us.mapEffects(u.effects,o),p,u.startSelection.map(m),l)}const zme=/^(input\.type|delete)($|\.)/;class Sm{constructor(o,i,l=0,d=void 0){this.done=o,this.undone=i,this.prevTime=l,this.prevUserEvent=d}isolate(){return this.prevTime?new Sm(this.done,this.undone):this}addChanges(o,i,l,d,m){let p=this.done,v=p[p.length-1];return v&&v.changes&&!v.changes.empty&&o.changes&&(!l||zme.test(l))&&(!v.selectionsAfter.length&&i-this.prevTime<d.newGroupDelay&&d.joinToEvent(m,Ime(v.changes,o.changes))||l=="input.type.compose")?p=d6(p,p.length-1,d.minDepth,new Mu(o.changes.compose(v.changes),aie(o.effects,v.effects),v.mapped,v.startSelection,vf)):p=d6(p,p.length,d.minDepth,o),new Sm(p,vf,i,l)}addSelection(o,i,l,d){let m=this.done.length?this.done[this.done.length-1].selectionsAfter:vf;return m.length>0&&i-this.prevTime<d&&l==this.prevUserEvent&&l&&/^select($|\.)/.test(l)&&Lme(m[m.length-1],o)?this:new Sm(lie(this.done,o),this.undone,i,l)}addMapping(o){return new Sm(JX(this.done,o),JX(this.undone,o),this.prevTime,this.prevUserEvent)}pop(o,i,l){let d=o==0?this.done:this.undone;if(d.length==0)return null;let m=d[d.length-1],p=m.selectionsAfter[0]||i.selection;if(l&&m.selectionsAfter.length)return i.update({selection:m.selectionsAfter[m.selectionsAfter.length-1],annotations:YJ.of({side:o,rest:Hme(d),selection:p}),userEvent:o==0?"select.undo":"select.redo",scrollIntoView:!0});if(m.changes){let v=d.length==1?vf:d.slice(0,d.length-1);return m.mapped&&(v=JX(v,m.mapped)),i.update({changes:m.changes,selection:m.startSelection,effects:m.effects,annotations:YJ.of({side:o,rest:v,selection:p}),filter:!1,userEvent:o==0?"undo":"redo",scrollIntoView:!0})}else return null}}Sm.empty=new Sm(vf,vf);const Ume=[{key:"Mod-z",run:iie,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:XJ,preventDefault:!0},{linux:"Ctrl-Shift-z",run:XJ,preventDefault:!0},{key:"Mod-u",run:Bme,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Fme,preventDefault:!0}];function C2(u,o){return rn.create(u.ranges.map(o),u.mainIndex)}function Am(u,o){return u.update({selection:o,scrollIntoView:!0,userEvent:"select"})}function vh({state:u,dispatch:o},i){let l=C2(u.selection,i);return l.eq(u.selection,!0)?!1:(o(Am(u,l)),!0)}function B6(u,o){return rn.cursor(o?u.to:u.from)}function cie(u,o){return vh(u,i=>i.empty?u.moveByChar(i,o):B6(i,o))}function Ac(u){return u.textDirectionAt(u.state.selection.main.head)==Fi.LTR}const uie=u=>cie(u,!Ac(u)),die=u=>cie(u,Ac(u));function fie(u,o){return vh(u,i=>i.empty?u.moveByGroup(i,o):B6(i,o))}const Wme=u=>fie(u,!Ac(u)),jme=u=>fie(u,Ac(u));function Zme(u,o,i){if(o.type.prop(i))return!0;let l=o.to-o.from;return l&&(l>2||/[^\s,.;:]/.test(u.sliceDoc(o.from,o.to)))||o.firstChild}function F6(u,o,i){let l=ql(u).resolveInner(o.head),d=i?Ks.closedBy:Ks.openedBy;for(let x=o.head;;){let k=i?l.childAfter(x):l.childBefore(x);if(!k)break;Zme(u,k,d)?l=k:x=i?k.to:k.from}let m=l.type.prop(d),p,v;return m&&(p=i?xm(u,l.from,1):xm(u,l.to,-1))&&p.matched?v=i?p.end.to:p.end.from:v=i?l.to:l.from,rn.cursor(v,i?-1:1)}const qme=u=>vh(u,o=>F6(u.state,o,!Ac(u))),Gme=u=>vh(u,o=>F6(u.state,o,Ac(u)));function hie(u,o){return vh(u,i=>{if(!i.empty)return B6(i,o);let l=u.moveVertically(i,o);return l.head!=i.head?l:u.moveToLineBoundary(i,o)})}const mie=u=>hie(u,!1),gie=u=>hie(u,!0);function pie(u){let o=u.scrollDOM.clientHeight<u.scrollDOM.scrollHeight-2,i=0,l=0,d;if(o){for(let m of u.state.facet(wo.scrollMargins)){let p=m(u);p!=null&&p.top&&(i=Math.max(p==null?void 0:p.top,i)),p!=null&&p.bottom&&(l=Math.max(p==null?void 0:p.bottom,l))}d=u.scrollDOM.clientHeight-i-l}else d=(u.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:l,selfScroll:o,height:Math.max(u.defaultLineHeight,d-5)}}function bie(u,o){let i=pie(u),{state:l}=u,d=C2(l.selection,p=>p.empty?u.moveVertically(p,o,i.height):B6(p,o));if(d.eq(l.selection))return!1;let m;if(i.selfScroll){let p=u.coordsAtPos(l.selection.main.head),v=u.scrollDOM.getBoundingClientRect(),x=v.top+i.marginTop,k=v.bottom-i.marginBottom;p&&p.top>x&&p.bottom<k&&(m=wo.scrollIntoView(d.main.head,{y:"start",yMargin:p.top-x}))}return u.dispatch(Am(l,d),{effects:m}),!0}const Yne=u=>bie(u,!1),JJ=u=>bie(u,!0);function l0(u,o,i){let l=u.lineBlockAt(o.head),d=u.moveToLineBoundary(o,i);if(d.head==o.head&&d.head!=(i?l.to:l.from)&&(d=u.moveToLineBoundary(o,i,!1)),!i&&d.head==l.from&&l.length){let m=/^\s*/.exec(u.state.sliceDoc(l.from,Math.min(l.from+100,l.to)))[0].length;m&&o.head!=l.from+m&&(d=rn.cursor(l.from+m))}return d}const Kme=u=>vh(u,o=>l0(u,o,!0)),Yme=u=>vh(u,o=>l0(u,o,!1)),Xme=u=>vh(u,o=>l0(u,o,!Ac(u))),Jme=u=>vh(u,o=>l0(u,o,Ac(u))),Qme=u=>vh(u,o=>rn.cursor(u.lineBlockAt(o.head).from,1)),ege=u=>vh(u,o=>rn.cursor(u.lineBlockAt(o.head).to,-1));function tge(u,o,i){let l=!1,d=C2(u.selection,m=>{let p=xm(u,m.head,-1)||xm(u,m.head,1)||m.head>0&&xm(u,m.head-1,1)||m.head<u.doc.length&&xm(u,m.head+1,-1);if(!p||!p.end)return m;l=!0;let v=p.start.from==m.head?p.end.to:p.end.from;return rn.cursor(v)});return l?(o(Am(u,d)),!0):!1}const nge=({state:u,dispatch:o})=>tge(u,o);function Cf(u,o){let i=C2(u.state.selection,l=>{let d=o(l);return rn.range(l.anchor,d.head,d.goalColumn,d.bidiLevel||void 0)});return i.eq(u.state.selection)?!1:(u.dispatch(Am(u.state,i)),!0)}function vie(u,o){return Cf(u,i=>u.moveByChar(i,o))}const yie=u=>vie(u,!Ac(u)),wie=u=>vie(u,Ac(u));function xie(u,o){return Cf(u,i=>u.moveByGroup(i,o))}const oge=u=>xie(u,!Ac(u)),sge=u=>xie(u,Ac(u)),rge=u=>Cf(u,o=>F6(u.state,o,!Ac(u))),ige=u=>Cf(u,o=>F6(u.state,o,Ac(u)));function Sie(u,o){return Cf(u,i=>u.moveVertically(i,o))}const Cie=u=>Sie(u,!1),kie=u=>Sie(u,!0);function Aie(u,o){return Cf(u,i=>u.moveVertically(i,o,pie(u).height))}const Xne=u=>Aie(u,!1),Jne=u=>Aie(u,!0),age=u=>Cf(u,o=>l0(u,o,!0)),lge=u=>Cf(u,o=>l0(u,o,!1)),cge=u=>Cf(u,o=>l0(u,o,!Ac(u))),uge=u=>Cf(u,o=>l0(u,o,Ac(u))),dge=u=>Cf(u,o=>rn.cursor(u.lineBlockAt(o.head).from)),fge=u=>Cf(u,o=>rn.cursor(u.lineBlockAt(o.head).to)),Qne=({state:u,dispatch:o})=>(o(Am(u,{anchor:0})),!0),eoe=({state:u,dispatch:o})=>(o(Am(u,{anchor:u.doc.length})),!0),toe=({state:u,dispatch:o})=>(o(Am(u,{anchor:u.selection.main.anchor,head:0})),!0),noe=({state:u,dispatch:o})=>(o(Am(u,{anchor:u.selection.main.anchor,head:u.doc.length})),!0),hge=({state:u,dispatch:o})=>(o(u.update({selection:{anchor:0,head:u.doc.length},userEvent:"select"})),!0),mge=({state:u,dispatch:o})=>{let i=I6(u).map(({from:l,to:d})=>rn.range(l,Math.min(d+1,u.doc.length)));return o(u.update({selection:rn.create(i),userEvent:"select"})),!0},gge=({state:u,dispatch:o})=>{let i=C2(u.selection,l=>{var d;let m=ql(u).resolveStack(l.from,1);for(let p=m;p;p=p.next){let{node:v}=p;if((v.from<l.from&&v.to>=l.to||v.to>l.to&&v.from<=l.from)&&(!((d=v.parent)===null||d===void 0)&&d.parent))return rn.range(v.to,v.from)}return l});return o(Am(u,i)),!0},pge=({state:u,dispatch:o})=>{let i=u.selection,l=null;return i.ranges.length>1?l=rn.create([i.main]):i.main.empty||(l=rn.create([rn.cursor(i.main.head)])),l?(o(Am(u,l)),!0):!1};function mM(u,o){if(u.state.readOnly)return!1;let i="delete.selection",{state:l}=u,d=l.changeByRange(m=>{let{from:p,to:v}=m;if(p==v){let x=o(m);x<p?(i="delete.backward",x=E$(u,x,!1)):x>p&&(i="delete.forward",x=E$(u,x,!0)),p=Math.min(p,x),v=Math.max(v,x)}else p=E$(u,p,!1),v=E$(u,v,!0);return p==v?{range:m}:{changes:{from:p,to:v},range:rn.cursor(p,p<m.head?-1:1)}});return d.changes.empty?!1:(u.dispatch(l.update(d,{scrollIntoView:!0,userEvent:i,effects:i=="delete.selection"?wo.announce.of(l.phrase("Selection deleted")):void 0})),!0)}function E$(u,o,i){if(u instanceof wo)for(let l of u.state.facet(wo.atomicRanges).map(d=>d(u)))l.between(o,o,(d,m)=>{d<o&&m>o&&(o=i?m:d)});return o}const Eie=(u,o,i)=>mM(u,l=>{let d=l.from,{state:m}=u,p=m.doc.lineAt(d),v,x;if(i&&!o&&d>p.from&&d<p.from+200&&!/[^ \t]/.test(v=p.text.slice(0,d-p.from))){if(v[v.length-1]=="	")return d-1;let k=S2(v,m.tabSize),T=k%xy(m)||xy(m);for(let R=0;R<T&&v[v.length-1-R]==" ";R++)d--;x=d}else x=Zl(p.text,d-p.from,o,o)+p.from,x==d&&p.number!=(o?m.doc.lines:1)?x+=o?1:-1:!o&&/[\ufe00-\ufe0f]/.test(p.text.slice(x-p.from,d-p.from))&&(x=Zl(p.text,x-p.from,!1,!1)+p.from);return x}),QJ=u=>Eie(u,!1,!0),Tie=u=>Eie(u,!0,!1),Oie=(u,o)=>mM(u,i=>{let l=i.head,{state:d}=u,m=d.doc.lineAt(l),p=d.charCategorizer(l);for(let v=null;;){if(l==(o?m.to:m.from)){l==i.head&&m.number!=(o?d.doc.lines:1)&&(l+=o?1:-1);break}let x=Zl(m.text,l-m.from,o)+m.from,k=m.text.slice(Math.min(l,x)-m.from,Math.max(l,x)-m.from),T=p(k);if(v!=null&&T!=v)break;(k!=" "||l!=i.head)&&(v=T),l=x}return l}),Die=u=>Oie(u,!1),bge=u=>Oie(u,!0),vge=u=>mM(u,o=>{let i=u.lineBlockAt(o.head).to;return o.head<i?i:Math.min(u.state.doc.length,o.head+1)}),yge=u=>mM(u,o=>{let i=u.moveToLineBoundary(o,!1).head;return o.head>i?i:Math.max(0,o.head-1)}),wge=u=>mM(u,o=>{let i=u.moveToLineBoundary(o,!0).head;return o.head<i?i:Math.min(u.state.doc.length,o.head+1)}),xge=({state:u,dispatch:o})=>{if(u.readOnly)return!1;let i=u.changeByRange(l=>({changes:{from:l.from,to:l.to,insert:Fr.of(["",""])},range:rn.cursor(l.from)}));return o(u.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},Sge=({state:u,dispatch:o})=>{if(u.readOnly)return!1;let i=u.changeByRange(l=>{if(!l.empty||l.from==0||l.from==u.doc.length)return{range:l};let d=l.from,m=u.doc.lineAt(d),p=d==m.from?d-1:Zl(m.text,d-m.from,!1)+m.from,v=d==m.to?d+1:Zl(m.text,d-m.from,!0)+m.from;return{changes:{from:p,to:v,insert:u.doc.slice(d,v).append(u.doc.slice(p,d))},range:rn.cursor(v)}});return i.changes.empty?!1:(o(u.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function I6(u){let o=[],i=-1;for(let l of u.selection.ranges){let d=u.doc.lineAt(l.from),m=u.doc.lineAt(l.to);if(!l.empty&&l.to==m.from&&(m=u.doc.lineAt(l.to-1)),i>=d.number){let p=o[o.length-1];p.to=m.to,p.ranges.push(l)}else o.push({from:d.from,to:m.to,ranges:[l]});i=m.number+1}return o}function _ie(u,o,i){if(u.readOnly)return!1;let l=[],d=[];for(let m of I6(u)){if(i?m.to==u.doc.length:m.from==0)continue;let p=u.doc.lineAt(i?m.to+1:m.from-1),v=p.length+1;if(i){l.push({from:m.to,to:p.to},{from:m.from,insert:p.text+u.lineBreak});for(let x of m.ranges)d.push(rn.range(Math.min(u.doc.length,x.anchor+v),Math.min(u.doc.length,x.head+v)))}else{l.push({from:p.from,to:m.from},{from:m.to,insert:u.lineBreak+p.text});for(let x of m.ranges)d.push(rn.range(x.anchor-v,x.head-v))}}return l.length?(o(u.update({changes:l,scrollIntoView:!0,selection:rn.create(d,u.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Cge=({state:u,dispatch:o})=>_ie(u,o,!1),kge=({state:u,dispatch:o})=>_ie(u,o,!0);function Mie(u,o,i){if(u.readOnly)return!1;let l=[];for(let d of I6(u))i?l.push({from:d.from,insert:u.doc.slice(d.from,d.to)+u.lineBreak}):l.push({from:d.to,insert:u.lineBreak+u.doc.slice(d.from,d.to)});return o(u.update({changes:l,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Age=({state:u,dispatch:o})=>Mie(u,o,!1),Ege=({state:u,dispatch:o})=>Mie(u,o,!0),Tge=u=>{if(u.state.readOnly)return!1;let{state:o}=u,i=o.changes(I6(o).map(({from:d,to:m})=>(d>0?d--:m<o.doc.length&&m++,{from:d,to:m}))),l=C2(o.selection,d=>{let m;if(u.lineWrapping){let p=u.lineBlockAt(d.head),v=u.coordsAtPos(d.head,d.assoc||1);v&&(m=p.bottom+u.documentTop-v.bottom+u.defaultLineHeight/2)}return u.moveVertically(d,!0,m)}).map(i);return u.dispatch({changes:i,selection:l,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Oge(u,o){if(/\(\)|\[\]|\{\}/.test(u.sliceDoc(o-1,o+1)))return{from:o,to:o};let i=ql(u).resolveInner(o),l=i.childBefore(o),d=i.childAfter(o),m;return l&&d&&l.to<=o&&d.from>=o&&(m=l.type.prop(Ks.closedBy))&&m.indexOf(d.name)>-1&&u.doc.lineAt(l.to).from==u.doc.lineAt(d.from).from&&!/\S/.test(u.sliceDoc(l.to,d.from))?{from:l.to,to:d.from}:null}const Dge=Rie(!1),_ge=Rie(!0);function Rie(u){return({state:o,dispatch:i})=>{if(o.readOnly)return!1;let l=o.changeByRange(d=>{let{from:m,to:p}=d,v=o.doc.lineAt(m),x=!u&&m==p&&Oge(o,m);u&&(m=p=(p<=v.to?v:o.doc.lineAt(p)).to);let k=new R6(o,{simulateBreak:m,simulateDoubleBreak:!!x}),T=EQ(k,m);for(T==null&&(T=S2(/^\s*/.exec(o.doc.lineAt(m).text)[0],o.tabSize));p<v.to&&/\s/.test(v.text[p-v.from]);)p++;x?{from:m,to:p}=x:m>v.from&&m<v.from+100&&!/\S/.test(v.text.slice(0,m))&&(m=v.from);let R=["",J_(o,T)];return x&&R.push(J_(o,k.lineIndent(v.from,-1))),{changes:{from:m,to:p,insert:Fr.of(R)},range:rn.cursor(m+1+R[1].length)}});return i(o.update(l,{scrollIntoView:!0,userEvent:"input"})),!0}}function PQ(u,o){let i=-1;return u.changeByRange(l=>{let d=[];for(let p=l.from;p<=l.to;){let v=u.doc.lineAt(p);v.number>i&&(l.empty||l.to>v.from)&&(o(v,d,l),i=v.number),p=v.to+1}let m=u.changes(d);return{changes:d,range:rn.range(m.mapPos(l.anchor,1),m.mapPos(l.head,1))}})}const Mge=({state:u,dispatch:o})=>{if(u.readOnly)return!1;let i=Object.create(null),l=new R6(u,{overrideIndentation:m=>{let p=i[m];return p==null?-1:p}}),d=PQ(u,(m,p,v)=>{let x=EQ(l,m.from);if(x==null)return;/\S/.test(m.text)||(x=0);let k=/^\s*/.exec(m.text)[0],T=J_(u,x);(k!=T||v.from<m.from+k.length)&&(i[m.from]=x,p.push({from:m.from,to:m.from+k.length,insert:T}))});return d.changes.empty||o(u.update(d,{userEvent:"indent"})),!0},Pie=({state:u,dispatch:o})=>u.readOnly?!1:(o(u.update(PQ(u,(i,l)=>{l.push({from:i.from,insert:u.facet(M6)})}),{userEvent:"input.indent"})),!0),Nie=({state:u,dispatch:o})=>u.readOnly?!1:(o(u.update(PQ(u,(i,l)=>{let d=/^\s*/.exec(i.text)[0];if(!d)return;let m=S2(d,u.tabSize),p=0,v=J_(u,Math.max(0,m-xy(u)));for(;p<d.length&&p<v.length&&d.charCodeAt(p)==v.charCodeAt(p);)p++;l.push({from:i.from+p,to:i.from+d.length,insert:v.slice(p)})}),{userEvent:"delete.dedent"})),!0),Rge=[{key:"Ctrl-b",run:uie,shift:yie,preventDefault:!0},{key:"Ctrl-f",run:die,shift:wie},{key:"Ctrl-p",run:mie,shift:Cie},{key:"Ctrl-n",run:gie,shift:kie},{key:"Ctrl-a",run:Qme,shift:dge},{key:"Ctrl-e",run:ege,shift:fge},{key:"Ctrl-d",run:Tie},{key:"Ctrl-h",run:QJ},{key:"Ctrl-k",run:vge},{key:"Ctrl-Alt-h",run:Die},{key:"Ctrl-o",run:xge},{key:"Ctrl-t",run:Sge},{key:"Ctrl-v",run:JJ}],Pge=[{key:"ArrowLeft",run:uie,shift:yie,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Wme,shift:oge,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Xme,shift:cge,preventDefault:!0},{key:"ArrowRight",run:die,shift:wie,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:jme,shift:sge,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Jme,shift:uge,preventDefault:!0},{key:"ArrowUp",run:mie,shift:Cie,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Qne,shift:toe},{mac:"Ctrl-ArrowUp",run:Yne,shift:Xne},{key:"ArrowDown",run:gie,shift:kie,preventDefault:!0},{mac:"Cmd-ArrowDown",run:eoe,shift:noe},{mac:"Ctrl-ArrowDown",run:JJ,shift:Jne},{key:"PageUp",run:Yne,shift:Xne},{key:"PageDown",run:JJ,shift:Jne},{key:"Home",run:Yme,shift:lge,preventDefault:!0},{key:"Mod-Home",run:Qne,shift:toe},{key:"End",run:Kme,shift:age,preventDefault:!0},{key:"Mod-End",run:eoe,shift:noe},{key:"Enter",run:Dge},{key:"Mod-a",run:hge},{key:"Backspace",run:QJ,shift:QJ},{key:"Delete",run:Tie},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Die},{key:"Mod-Delete",mac:"Alt-Delete",run:bge},{mac:"Mod-Backspace",run:yge},{mac:"Mod-Delete",run:wge}].concat(Rge.map(u=>({mac:u.key,run:u.run,shift:u.shift}))),Nge=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:qme,shift:rge},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Gme,shift:ige},{key:"Alt-ArrowUp",run:Cge},{key:"Shift-Alt-ArrowUp",run:Age},{key:"Alt-ArrowDown",run:kge},{key:"Shift-Alt-ArrowDown",run:Ege},{key:"Escape",run:pge},{key:"Mod-Enter",run:_ge},{key:"Alt-l",mac:"Ctrl-l",run:mge},{key:"Mod-i",run:gge,preventDefault:!0},{key:"Mod-[",run:Nie},{key:"Mod-]",run:Pie},{key:"Mod-Alt-\\",run:Mge},{key:"Shift-Mod-k",run:Tge},{key:"Shift-Mod-\\",run:nge},{key:"Mod-/",run:Ame},{key:"Alt-A",run:Tme}].concat(Pge),Bge={key:"Tab",run:Pie,shift:Nie};function Ci(){var u=arguments[0];typeof u=="string"&&(u=document.createElement(u));var o=1,i=arguments[1];if(i&&typeof i=="object"&&i.nodeType==null&&!Array.isArray(i)){for(var l in i)if(Object.prototype.hasOwnProperty.call(i,l)){var d=i[l];typeof d=="string"?u.setAttribute(l,d):d!=null&&(u[l]=d)}o++}for(;o<arguments.length;o++)Bie(u,arguments[o]);return u}function Bie(u,o){if(typeof o=="string")u.appendChild(document.createTextNode(o));else if(o!=null)if(o.nodeType!=null)u.appendChild(o);else if(Array.isArray(o))for(var i=0;i<o.length;i++)Bie(u,o[i]);else throw new RangeError("Unsupported child node: "+o)}const ooe=typeof String.prototype.normalize=="function"?u=>u.normalize("NFKD"):u=>u;class y2{constructor(o,i,l=0,d=o.length,m,p){this.test=p,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=o.iterRange(l,d),this.bufferStart=l,this.normalize=m?v=>m(ooe(v)):ooe,this.query=this.normalize(i)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ul(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let o=this.peek();if(o<0)return this.done=!0,this;let i=uQ(o),l=this.bufferStart+this.bufferPos;this.bufferPos+=gf(o);let d=this.normalize(i);for(let m=0,p=l;;m++){let v=d.charCodeAt(m),x=this.match(v,p,this.bufferPos+this.bufferStart);if(m==d.length-1){if(x)return this.value=x,this;break}p==l&&m<i.length&&i.charCodeAt(m)==v&&p++}}}match(o,i,l){let d=null;for(let m=0;m<this.matches.length;m+=2){let p=this.matches[m],v=!1;this.query.charCodeAt(p)==o&&(p==this.query.length-1?d={from:this.matches[m+1],to:l}:(this.matches[m]++,v=!0)),v||(this.matches.splice(m,2),m-=2)}return this.query.charCodeAt(0)==o&&(this.query.length==1?d={from:i,to:l}:this.matches.push(1,i)),d&&this.test&&!this.test(d.from,d.to,this.buffer,this.bufferStart)&&(d=null),d}}typeof Symbol!="undefined"&&(y2.prototype[Symbol.iterator]=function(){return this});const Fie={from:-1,to:-1,match:/.*/.exec("")},NQ="gm"+(/x/.unicode==null?"":"u");class Iie{constructor(o,i,l,d=0,m=o.length){if(this.text=o,this.to=m,this.curLine="",this.done=!1,this.value=Fie,/\\[sWDnr]|\n|\r|\[\^/.test(i))return new Lie(o,i,l,d,m);this.re=new RegExp(i,NQ+(l!=null&&l.ignoreCase?"i":"")),this.test=l==null?void 0:l.test,this.iter=o.iter();let p=o.lineAt(d);this.curLineStart=p.from,this.matchPos=f6(o,d),this.getLine(this.curLineStart)}getLine(o){this.iter.next(o),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let o=this.matchPos-this.curLineStart;;){this.re.lastIndex=o;let i=this.matchPos<=this.to&&this.re.exec(this.curLine);if(i){let l=this.curLineStart+i.index,d=l+i[0].length;if(this.matchPos=f6(this.text,d+(l==d?1:0)),l==this.curLineStart+this.curLine.length&&this.nextLine(),(l<d||l>this.value.to)&&(!this.test||this.test(l,d,i)))return this.value={from:l,to:d,match:i},this;o=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),o=0;else return this.done=!0,this}}}const QX=new WeakMap;class c2{constructor(o,i){this.from=o,this.text=i}get to(){return this.from+this.text.length}static get(o,i,l){let d=QX.get(o);if(!d||d.from>=l||d.to<=i){let v=new c2(i,o.sliceString(i,l));return QX.set(o,v),v}if(d.from==i&&d.to==l)return d;let{text:m,from:p}=d;return p>i&&(m=o.sliceString(i,p)+m,p=i),d.to<l&&(m+=o.sliceString(d.to,l)),QX.set(o,new c2(p,m)),new c2(i,m.slice(i-p,l-p))}}class Lie{constructor(o,i,l,d,m){this.text=o,this.to=m,this.done=!1,this.value=Fie,this.matchPos=f6(o,d),this.re=new RegExp(i,NQ+(l!=null&&l.ignoreCase?"i":"")),this.test=l==null?void 0:l.test,this.flat=c2.get(o,d,this.chunkEnd(d+5e3))}chunkEnd(o){return o>=this.to?this.to:this.text.lineAt(o).to}next(){for(;;){let o=this.re.lastIndex=this.matchPos-this.flat.from,i=this.re.exec(this.flat.text);if(i&&!i[0]&&i.index==o&&(this.re.lastIndex=o+1,i=this.re.exec(this.flat.text)),i){let l=this.flat.from+i.index,d=l+i[0].length;if((this.flat.to>=this.to||i.index+i[0].length<=this.flat.text.length-10)&&(!this.test||this.test(l,d,i)))return this.value={from:l,to:d,match:i},this.matchPos=f6(this.text,d+(l==d?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=c2.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol!="undefined"&&(Iie.prototype[Symbol.iterator]=Lie.prototype[Symbol.iterator]=function(){return this});function Fge(u){try{return new RegExp(u,NQ),!0}catch(o){return!1}}function f6(u,o){if(o>=u.length)return o;let i=u.lineAt(o),l;for(;o<i.to&&(l=i.text.charCodeAt(o-i.from))>=56320&&l<57344;)o++;return o}function eQ(u){let o=String(u.state.doc.lineAt(u.state.selection.main.head).number),i=Ci("input",{class:"cm-textfield",name:"line",value:o}),l=Ci("form",{class:"cm-gotoLine",onkeydown:m=>{m.keyCode==27?(m.preventDefault(),u.dispatch({effects:h6.of(!1)}),u.focus()):m.keyCode==13&&(m.preventDefault(),d())},onsubmit:m=>{m.preventDefault(),d()}},Ci("label",u.state.phrase("Go to line"),": ",i)," ",Ci("button",{class:"cm-button",type:"submit"},u.state.phrase("go")));function d(){let m=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(i.value);if(!m)return;let{state:p}=u,v=p.doc.lineAt(p.selection.main.head),[,x,k,T,R]=m,N=T?+T.slice(1):0,$=k?+k:v.number;if(k&&R){let J=$/100;x&&(J=J*(x=="-"?-1:1)+v.number/p.doc.lines),$=Math.round(p.doc.lines*J)}else k&&x&&($=$*(x=="-"?-1:1)+v.number);let U=p.doc.line(Math.max(1,Math.min(p.doc.lines,$))),X=rn.cursor(U.from+Math.max(0,Math.min(N,U.length)));u.dispatch({effects:[h6.of(!1),wo.scrollIntoView(X.from,{y:"center"})],selection:X}),u.focus()}return{dom:l}}const h6=Us.define(),soe=Kl.define({create(){return!0},update(u,o){for(let i of o.effects)i.is(h6)&&(u=i.value);return u},provide:u=>Y_.from(u,o=>o?eQ:null)}),Ige=u=>{let o=K_(u,eQ);if(!o){let i=[h6.of(!0)];u.state.field(soe,!1)==null&&i.push(Us.appendConfig.of([soe,Lge])),u.dispatch({effects:i}),o=K_(u,eQ)}return o&&o.dom.querySelector("input").select(),!0},Lge=wo.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),$ge={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Hge=Oo.define({combine(u){return km(u,$ge,{highlightWordAroundCursor:(o,i)=>o||i,minSelectionLength:Math.min,maxMatches:Math.min})}});function Vge(u){return[Zge,jge]}const zge=as.mark({class:"cm-selectionMatch"}),Uge=as.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function roe(u,o,i,l){return(i==0||u(o.sliceDoc(i-1,i))!=Wi.Word)&&(l==o.doc.length||u(o.sliceDoc(l,l+1))!=Wi.Word)}function Wge(u,o,i,l){return u(o.sliceDoc(i,i+1))==Wi.Word&&u(o.sliceDoc(l-1,l))==Wi.Word}const jge=Ta.fromClass(class{constructor(u){this.decorations=this.getDeco(u)}update(u){(u.selectionSet||u.docChanged||u.viewportChanged)&&(this.decorations=this.getDeco(u.view))}getDeco(u){let o=u.state.facet(Hge),{state:i}=u,l=i.selection;if(l.ranges.length>1)return as.none;let d=l.main,m,p=null;if(d.empty){if(!o.highlightWordAroundCursor)return as.none;let x=i.wordAt(d.head);if(!x)return as.none;p=i.charCategorizer(d.head),m=i.sliceDoc(x.from,x.to)}else{let x=d.to-d.from;if(x<o.minSelectionLength||x>200)return as.none;if(o.wholeWords){if(m=i.sliceDoc(d.from,d.to),p=i.charCategorizer(d.head),!(roe(p,i,d.from,d.to)&&Wge(p,i,d.from,d.to)))return as.none}else if(m=i.sliceDoc(d.from,d.to),!m)return as.none}let v=[];for(let x of u.visibleRanges){let k=new y2(i.doc,m,x.from,x.to);for(;!k.next().done;){let{from:T,to:R}=k.value;if((!p||roe(p,i,T,R))&&(d.empty&&T<=d.from&&R>=d.to?v.push(Uge.range(T,R)):(T>=d.to||R<=d.from)&&v.push(zge.range(T,R)),v.length>o.maxMatches))return as.none}}return as.set(v)}},{decorations:u=>u.decorations}),Zge=wo.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),qge=({state:u,dispatch:o})=>{let{selection:i}=u,l=rn.create(i.ranges.map(d=>u.wordAt(d.head)||rn.cursor(d.head)),i.mainIndex);return l.eq(i)?!1:(o(u.update({selection:l})),!0)};function Gge(u,o){let{main:i,ranges:l}=u.selection,d=u.wordAt(i.head),m=d&&d.from==i.from&&d.to==i.to;for(let p=!1,v=new y2(u.doc,o,l[l.length-1].to);;)if(v.next(),v.done){if(p)return null;v=new y2(u.doc,o,0,Math.max(0,l[l.length-1].from-1)),p=!0}else{if(p&&l.some(x=>x.from==v.value.from))continue;if(m){let x=u.wordAt(v.value.from);if(!x||x.from!=v.value.from||x.to!=v.value.to)continue}return v.value}}const Kge=({state:u,dispatch:o})=>{let{ranges:i}=u.selection;if(i.some(m=>m.from===m.to))return qge({state:u,dispatch:o});let l=u.sliceDoc(i[0].from,i[0].to);if(u.selection.ranges.some(m=>u.sliceDoc(m.from,m.to)!=l))return!1;let d=Gge(u,l);return d?(o(u.update({selection:u.selection.addRange(rn.range(d.from,d.to),!1),effects:wo.scrollIntoView(d.to)})),!0):!1},k2=Oo.define({combine(u){return km(u,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:o=>new ape(o),scrollToMatch:o=>wo.scrollIntoView(o)})}});class $ie{constructor(o){this.search=o.search,this.caseSensitive=!!o.caseSensitive,this.literal=!!o.literal,this.regexp=!!o.regexp,this.replace=o.replace||"",this.valid=!!this.search&&(!this.regexp||Fge(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!o.wholeWord}unquote(o){return this.literal?o:o.replace(/\\([nrt\\])/g,(i,l)=>l=="n"?`
`:l=="r"?"\r":l=="t"?"	":"\\")}eq(o){return this.search==o.search&&this.replace==o.replace&&this.caseSensitive==o.caseSensitive&&this.regexp==o.regexp&&this.wholeWord==o.wholeWord}create(){return this.regexp?new Qge(this):new Xge(this)}getCursor(o,i=0,l){let d=o.doc?o:ur.create({doc:o});return l==null&&(l=d.doc.length),this.regexp?QC(this,d,i,l):JC(this,d,i,l)}}class Hie{constructor(o){this.spec=o}}function JC(u,o,i,l){return new y2(o.doc,u.unquoted,i,l,u.caseSensitive?void 0:d=>d.toLowerCase(),u.wholeWord?Yge(o.doc,o.charCategorizer(o.selection.main.head)):void 0)}function Yge(u,o){return(i,l,d,m)=>((m>i||m+d.length<l)&&(m=Math.max(0,i-2),d=u.sliceString(m,Math.min(u.length,l+2))),(o(m6(d,i-m))!=Wi.Word||o(g6(d,i-m))!=Wi.Word)&&(o(g6(d,l-m))!=Wi.Word||o(m6(d,l-m))!=Wi.Word))}class Xge extends Hie{constructor(o){super(o)}nextMatch(o,i,l){let d=JC(this.spec,o,l,o.doc.length).nextOverlapping();return d.done&&(d=JC(this.spec,o,0,i).nextOverlapping()),d.done?null:d.value}prevMatchInRange(o,i,l){for(let d=l;;){let m=Math.max(i,d-1e4-this.spec.unquoted.length),p=JC(this.spec,o,m,d),v=null;for(;!p.nextOverlapping().done;)v=p.value;if(v)return v;if(m==i)return null;d-=1e4}}prevMatch(o,i,l){return this.prevMatchInRange(o,0,i)||this.prevMatchInRange(o,l,o.doc.length)}getReplacement(o){return this.spec.unquote(this.spec.replace)}matchAll(o,i){let l=JC(this.spec,o,0,o.doc.length),d=[];for(;!l.next().done;){if(d.length>=i)return null;d.push(l.value)}return d}highlight(o,i,l,d){let m=JC(this.spec,o,Math.max(0,i-this.spec.unquoted.length),Math.min(l+this.spec.unquoted.length,o.doc.length));for(;!m.next().done;)d(m.value.from,m.value.to)}}function QC(u,o,i,l){return new Iie(o.doc,u.search,{ignoreCase:!u.caseSensitive,test:u.wholeWord?Jge(o.charCategorizer(o.selection.main.head)):void 0},i,l)}function m6(u,o){return u.slice(Zl(u,o,!1),o)}function g6(u,o){return u.slice(o,Zl(u,o))}function Jge(u){return(o,i,l)=>!l[0].length||(u(m6(l.input,l.index))!=Wi.Word||u(g6(l.input,l.index))!=Wi.Word)&&(u(g6(l.input,l.index+l[0].length))!=Wi.Word||u(m6(l.input,l.index+l[0].length))!=Wi.Word)}class Qge extends Hie{nextMatch(o,i,l){let d=QC(this.spec,o,l,o.doc.length).next();return d.done&&(d=QC(this.spec,o,0,i).next()),d.done?null:d.value}prevMatchInRange(o,i,l){for(let d=1;;d++){let m=Math.max(i,l-d*1e4),p=QC(this.spec,o,m,l),v=null;for(;!p.next().done;)v=p.value;if(v&&(m==i||v.from>m+10))return v;if(m==i)return null}}prevMatch(o,i,l){return this.prevMatchInRange(o,0,i)||this.prevMatchInRange(o,l,o.doc.length)}getReplacement(o){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(i,l)=>l=="$"?"$":l=="&"?o.match[0]:l!="0"&&+l<o.match.length?o.match[l]:i)}matchAll(o,i){let l=QC(this.spec,o,0,o.doc.length),d=[];for(;!l.next().done;){if(d.length>=i)return null;d.push(l.value)}return d}highlight(o,i,l,d){let m=QC(this.spec,o,Math.max(0,i-250),Math.min(l+250,o.doc.length));for(;!m.next().done;)d(m.value.from,m.value.to)}}const eM=Us.define(),BQ=Us.define(),X1=Kl.define({create(u){return new eJ(tQ(u).create(),null)},update(u,o){for(let i of o.effects)i.is(eM)?u=new eJ(i.value.create(),u.panel):i.is(BQ)&&(u=new eJ(u.query,i.value?FQ:null));return u},provide:u=>Y_.from(u,o=>o.panel)});class eJ{constructor(o,i){this.query=o,this.panel=i}}const epe=as.mark({class:"cm-searchMatch"}),tpe=as.mark({class:"cm-searchMatch cm-searchMatch-selected"}),npe=Ta.fromClass(class{constructor(u){this.view=u,this.decorations=this.highlight(u.state.field(X1))}update(u){let o=u.state.field(X1);(o!=u.startState.field(X1)||u.docChanged||u.selectionSet||u.viewportChanged)&&(this.decorations=this.highlight(o))}highlight({query:u,panel:o}){if(!o||!u.spec.valid)return as.none;let{view:i}=this,l=new t0;for(let d=0,m=i.visibleRanges,p=m.length;d<p;d++){let{from:v,to:x}=m[d];for(;d<p-1&&x>m[d+1].from-2*250;)x=m[++d].to;u.highlight(i.state,v,x,(k,T)=>{let R=i.state.selection.ranges.some(N=>N.from==k&&N.to==T);l.add(k,T,R?tpe:epe)})}return l.finish()}},{decorations:u=>u.decorations});function gM(u){return o=>{let i=o.state.field(X1,!1);return i&&i.query.spec.valid?u(o,i):Uie(o)}}const p6=gM((u,{query:o})=>{let{to:i}=u.state.selection.main,l=o.nextMatch(u.state,i,i);if(!l)return!1;let d=rn.single(l.from,l.to),m=u.state.facet(k2);return u.dispatch({selection:d,effects:[IQ(u,l),m.scrollToMatch(d.main,u)],userEvent:"select.search"}),zie(u),!0}),b6=gM((u,{query:o})=>{let{state:i}=u,{from:l}=i.selection.main,d=o.prevMatch(i,l,l);if(!d)return!1;let m=rn.single(d.from,d.to),p=u.state.facet(k2);return u.dispatch({selection:m,effects:[IQ(u,d),p.scrollToMatch(m.main,u)],userEvent:"select.search"}),zie(u),!0}),ope=gM((u,{query:o})=>{let i=o.matchAll(u.state,1e3);return!i||!i.length?!1:(u.dispatch({selection:rn.create(i.map(l=>rn.range(l.from,l.to))),userEvent:"select.search.matches"}),!0)}),spe=({state:u,dispatch:o})=>{let i=u.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:l,to:d}=i.main,m=[],p=0;for(let v=new y2(u.doc,u.sliceDoc(l,d));!v.next().done;){if(m.length>1e3)return!1;v.value.from==l&&(p=m.length),m.push(rn.range(v.value.from,v.value.to))}return o(u.update({selection:rn.create(m,p),userEvent:"select.search.matches"})),!0},ioe=gM((u,{query:o})=>{let{state:i}=u,{from:l,to:d}=i.selection.main;if(i.readOnly)return!1;let m=o.nextMatch(i,l,l);if(!m)return!1;let p=[],v,x,k=[];if(m.from==l&&m.to==d&&(x=i.toText(o.getReplacement(m)),p.push({from:m.from,to:m.to,insert:x}),m=o.nextMatch(i,m.from,m.to),k.push(wo.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(l).number)+"."))),m){let T=p.length==0||p[0].from>=m.to?0:m.to-m.from-x.length;v=rn.single(m.from-T,m.to-T),k.push(IQ(u,m)),k.push(i.facet(k2).scrollToMatch(v.main,u))}return u.dispatch({changes:p,selection:v,effects:k,userEvent:"input.replace"}),!0}),rpe=gM((u,{query:o})=>{if(u.state.readOnly)return!1;let i=o.matchAll(u.state,1e9).map(d=>{let{from:m,to:p}=d;return{from:m,to:p,insert:o.getReplacement(d)}});if(!i.length)return!1;let l=u.state.phrase("replaced $ matches",i.length)+".";return u.dispatch({changes:i,effects:wo.announce.of(l),userEvent:"input.replace.all"}),!0});function FQ(u){return u.state.facet(k2).createPanel(u)}function tQ(u,o){var i,l,d,m,p;let v=u.selection.main,x=v.empty||v.to>v.from+100?"":u.sliceDoc(v.from,v.to);if(o&&!x)return o;let k=u.facet(k2);return new $ie({search:((i=o==null?void 0:o.literal)!==null&&i!==void 0?i:k.literal)?x:x.replace(/\n/g,"\\n"),caseSensitive:(l=o==null?void 0:o.caseSensitive)!==null&&l!==void 0?l:k.caseSensitive,literal:(d=o==null?void 0:o.literal)!==null&&d!==void 0?d:k.literal,regexp:(m=o==null?void 0:o.regexp)!==null&&m!==void 0?m:k.regexp,wholeWord:(p=o==null?void 0:o.wholeWord)!==null&&p!==void 0?p:k.wholeWord})}function Vie(u){let o=K_(u,FQ);return o&&o.dom.querySelector("[main-field]")}function zie(u){let o=Vie(u);o&&o==u.root.activeElement&&o.select()}const Uie=u=>{let o=u.state.field(X1,!1);if(o&&o.panel){let i=Vie(u);if(i&&i!=u.root.activeElement){let l=tQ(u.state,o.query.spec);l.valid&&u.dispatch({effects:eM.of(l)}),i.focus(),i.select()}}else u.dispatch({effects:[BQ.of(!0),o?eM.of(tQ(u.state,o.query.spec)):Us.appendConfig.of(cpe)]});return!0},Wie=u=>{let o=u.state.field(X1,!1);if(!o||!o.panel)return!1;let i=K_(u,FQ);return i&&i.dom.contains(u.root.activeElement)&&u.focus(),u.dispatch({effects:BQ.of(!1)}),!0},ipe=[{key:"Mod-f",run:Uie,scope:"editor search-panel"},{key:"F3",run:p6,shift:b6,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:p6,shift:b6,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Wie,scope:"editor search-panel"},{key:"Mod-Shift-l",run:spe},{key:"Mod-Alt-g",run:Ige},{key:"Mod-d",run:Kge,preventDefault:!0}];class ape{constructor(o){this.view=o;let i=this.query=o.state.field(X1).query.spec;this.commit=this.commit.bind(this),this.searchField=Ci("input",{value:i.search,placeholder:vd(o,"Find"),"aria-label":vd(o,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ci("input",{value:i.replace,placeholder:vd(o,"Replace"),"aria-label":vd(o,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ci("input",{type:"checkbox",name:"case",form:"",checked:i.caseSensitive,onchange:this.commit}),this.reField=Ci("input",{type:"checkbox",name:"re",form:"",checked:i.regexp,onchange:this.commit}),this.wordField=Ci("input",{type:"checkbox",name:"word",form:"",checked:i.wholeWord,onchange:this.commit});function l(d,m,p){return Ci("button",{class:"cm-button",name:d,onclick:m,type:"button"},p)}this.dom=Ci("div",{onkeydown:d=>this.keydown(d),class:"cm-search"},[this.searchField,l("next",()=>p6(o),[vd(o,"next")]),l("prev",()=>b6(o),[vd(o,"previous")]),l("select",()=>ope(o),[vd(o,"all")]),Ci("label",null,[this.caseField,vd(o,"match case")]),Ci("label",null,[this.reField,vd(o,"regexp")]),Ci("label",null,[this.wordField,vd(o,"by word")]),...o.state.readOnly?[]:[Ci("br"),this.replaceField,l("replace",()=>ioe(o),[vd(o,"replace")]),l("replaceAll",()=>rpe(o),[vd(o,"replace all")])],Ci("button",{name:"close",onclick:()=>Wie(o),"aria-label":vd(o,"close"),type:"button"},["×"])])}commit(){let o=new $ie({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});o.eq(this.query)||(this.query=o,this.view.dispatch({effects:eM.of(o)}))}keydown(o){gfe(this.view,o,"search-panel")?o.preventDefault():o.keyCode==13&&o.target==this.searchField?(o.preventDefault(),(o.shiftKey?b6:p6)(this.view)):o.keyCode==13&&o.target==this.replaceField&&(o.preventDefault(),ioe(this.view))}update(o){for(let i of o.transactions)for(let l of i.effects)l.is(eM)&&!l.value.eq(this.query)&&this.setQuery(l.value)}setQuery(o){this.query=o,this.searchField.value=o.search,this.replaceField.value=o.replace,this.caseField.checked=o.caseSensitive,this.reField.checked=o.regexp,this.wordField.checked=o.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(k2).top}}function vd(u,o){return u.state.phrase(o)}const T$=30,O$=/[\s\.,:;?!]/;function IQ(u,{from:o,to:i}){let l=u.state.doc.lineAt(o),d=u.state.doc.lineAt(i).to,m=Math.max(l.from,o-T$),p=Math.min(d,i+T$),v=u.state.sliceDoc(m,p);if(m!=l.from){for(let x=0;x<T$;x++)if(!O$.test(v[x+1])&&O$.test(v[x])){v=v.slice(x);break}}if(p!=d){for(let x=v.length-1;x>v.length-T$;x--)if(!O$.test(v[x-1])&&O$.test(v[x])){v=v.slice(0,x);break}}return wo.announce.of(`${u.state.phrase("current match")}. ${v} ${u.state.phrase("on line")} ${l.number}.`)}const lpe=wo.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),cpe=[X1,Ay.low(npe),lpe];class jie{constructor(o,i,l){this.state=o,this.pos=i,this.explicit=l,this.abortListeners=[]}tokenBefore(o){let i=ql(this.state).resolveInner(this.pos,-1);for(;i&&o.indexOf(i.name)<0;)i=i.parent;return i?{from:i.from,to:this.pos,text:this.state.sliceDoc(i.from,this.pos),type:i.type}:null}matchBefore(o){let i=this.state.doc.lineAt(this.pos),l=Math.max(i.from,this.pos-250),d=i.text.slice(l-i.from,this.pos-i.from),m=d.search(Zie(o,!1));return m<0?null:{from:l+m,to:this.pos,text:d.slice(m)}}get aborted(){return this.abortListeners==null}addEventListener(o,i){o=="abort"&&this.abortListeners&&this.abortListeners.push(i)}}function aoe(u){let o=Object.keys(u).join(""),i=/\w/.test(o);return i&&(o=o.replace(/\w/g,"")),`[${i?"\\w":""}${o.replace(/[^\w\s]/g,"\\$&")}]`}function upe(u){let o=Object.create(null),i=Object.create(null);for(let{label:d}of u){o[d[0]]=!0;for(let m=1;m<d.length;m++)i[d[m]]=!0}let l=aoe(o)+aoe(i)+"*$";return[new RegExp("^"+l),new RegExp(l)]}function dpe(u){let o=u.map(d=>typeof d=="string"?{label:d}:d),[i,l]=o.every(d=>/^\w+$/.test(d.label))?[/\w*$/,/\w+$/]:upe(o);return d=>{let m=d.matchBefore(l);return m||d.explicit?{from:m?m.from:d.pos,options:o,validFor:i}:null}}class loe{constructor(o,i,l,d){this.completion=o,this.source=i,this.match=l,this.score=d}}function J1(u){return u.selection.main.from}function Zie(u,o){var i;let{source:l}=u,d=o&&l[0]!="^",m=l[l.length-1]!="$";return!d&&!m?u:new RegExp(`${d?"^":""}(?:${l})${m?"$":""}`,(i=u.flags)!==null&&i!==void 0?i:u.ignoreCase?"i":"")}const qie=Kg.define();function fpe(u,o,i,l){let{main:d}=u.selection,m=i-d.from,p=l-d.from;return Object.assign(Object.assign({},u.changeByRange(v=>v!=d&&i!=l&&u.sliceDoc(v.from+m,v.from+p)!=u.sliceDoc(i,l)?{range:v}:{changes:{from:v.from+m,to:l==d.from?v.to:v.from+p,insert:o},range:rn.cursor(v.from+m+o.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const coe=new WeakMap;function hpe(u){if(!Array.isArray(u))return u;let o=coe.get(u);return o||coe.set(u,o=dpe(u)),o}const v6=Us.define(),tM=Us.define();class mpe{constructor(o){this.pattern=o,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let i=0;i<o.length;){let l=Ul(o,i),d=gf(l);this.chars.push(l);let m=o.slice(i,i+d),p=m.toUpperCase();this.folded.push(Ul(p==m?m.toLowerCase():p,0)),i+=d}this.astral=o.length!=this.chars.length}ret(o,i){return this.score=o,this.matched=i,this}match(o){if(this.pattern.length==0)return this.ret(-100,[]);if(o.length<this.pattern.length)return null;let{chars:i,folded:l,any:d,precise:m,byWord:p}=this;if(i.length==1){let le=Ul(o,0),Z=gf(le),be=Z==o.length?0:-100;if(le!=i[0])if(le==l[0])be+=-200;else return null;return this.ret(be,[0,Z])}let v=o.indexOf(this.pattern);if(v==0)return this.ret(o.length==this.pattern.length?0:-100,[0,this.pattern.length]);let x=i.length,k=0;if(v<0){for(let le=0,Z=Math.min(o.length,200);le<Z&&k<x;){let be=Ul(o,le);(be==i[k]||be==l[k])&&(d[k++]=le),le+=gf(be)}if(k<x)return null}let T=0,R=0,N=!1,$=0,U=-1,X=-1,J=/[a-z]/.test(o),G=!0;for(let le=0,Z=Math.min(o.length,200),be=0;le<Z&&R<x;){let He=Ul(o,le);v<0&&(T<x&&He==i[T]&&(m[T++]=le),$<x&&(He==i[$]||He==l[$]?($==0&&(U=le),X=le+1,$++):$=0));let Re,K=He<255?He>=48&&He<=57||He>=97&&He<=122?2:He>=65&&He<=90?1:0:(Re=uQ(He))!=Re.toLowerCase()?1:Re!=Re.toUpperCase()?2:0;(!le||K==1&&J||be==0&&K!=0)&&(i[R]==He||l[R]==He&&(N=!0)?p[R++]=le:p.length&&(G=!1)),be=K,le+=gf(He)}return R==x&&p[0]==0&&G?this.result(-100+(N?-200:0),p,o):$==x&&U==0?this.ret(-200-o.length+(X==o.length?0:-100),[0,X]):v>-1?this.ret(-700-o.length,[v,v+this.pattern.length]):$==x?this.ret(-900-o.length,[U,X]):R==x?this.result(-100+(N?-200:0)+-700+(G?0:-1100),p,o):i.length==2?null:this.result((d[0]?-700:0)+-200+-1100,d,o)}result(o,i,l){let d=[],m=0;for(let p of i){let v=p+(this.astral?gf(Ul(l,p)):1);m&&d[m-1]==p?d[m-1]=v:(d[m++]=p,d[m++]=v)}return this.ret(o-l.length,d)}}class gpe{constructor(o){this.pattern=o,this.matched=[],this.score=0,this.folded=o.toLowerCase()}match(o){if(o.length<this.pattern.length)return null;let i=o.slice(0,this.pattern.length),l=i==this.pattern?0:i.toLowerCase()==this.folded?-200:null;return l==null?null:(this.matched=[0,i.length],this.score=l+(o.length==this.pattern.length?0:-100),this)}}const jl=Oo.define({combine(u){return km(u,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:ppe,filterStrict:!1,compareCompletions:(o,i)=>o.label.localeCompare(i.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(o,i)=>o&&i,closeOnBlur:(o,i)=>o&&i,icons:(o,i)=>o&&i,tooltipClass:(o,i)=>l=>uoe(o(l),i(l)),optionClass:(o,i)=>l=>uoe(o(l),i(l)),addToOptions:(o,i)=>o.concat(i),filterStrict:(o,i)=>o||i})}});function uoe(u,o){return u?o?u+" "+o:u:o}function ppe(u,o,i,l,d,m){let p=u.textDirection==Fi.RTL,v=p,x=!1,k="top",T,R,N=o.left-d.left,$=d.right-o.right,U=l.right-l.left,X=l.bottom-l.top;if(v&&N<Math.min(U,$)?v=!1:!v&&$<Math.min(U,N)&&(v=!0),U<=(v?N:$))T=Math.max(d.top,Math.min(i.top,d.bottom-X))-o.top,R=Math.min(400,v?N:$);else{x=!0,R=Math.min(400,(p?o.right:d.right-o.left)-30);let le=d.bottom-o.bottom;le>=X||le>o.top?T=i.bottom-o.top:(k="bottom",T=o.bottom-i.top)}let J=(o.bottom-o.top)/m.offsetHeight,G=(o.right-o.left)/m.offsetWidth;return{style:`${k}: ${T/J}px; max-width: ${R/G}px`,class:"cm-completionInfo-"+(x?p?"left-narrow":"right-narrow":v?"left":"right")}}function bpe(u){let o=u.addToOptions.slice();return u.icons&&o.push({render(i){let l=document.createElement("div");return l.classList.add("cm-completionIcon"),i.type&&l.classList.add(...i.type.split(/\s+/g).map(d=>"cm-completionIcon-"+d)),l.setAttribute("aria-hidden","true"),l},position:20}),o.push({render(i,l,d,m){let p=document.createElement("span");p.className="cm-completionLabel";let v=i.displayLabel||i.label,x=0;for(let k=0;k<m.length;){let T=m[k++],R=m[k++];T>x&&p.appendChild(document.createTextNode(v.slice(x,T)));let N=p.appendChild(document.createElement("span"));N.appendChild(document.createTextNode(v.slice(T,R))),N.className="cm-completionMatchedText",x=R}return x<v.length&&p.appendChild(document.createTextNode(v.slice(x))),p},position:50},{render(i){if(!i.detail)return null;let l=document.createElement("span");return l.className="cm-completionDetail",l.textContent=i.detail,l},position:80}),o.sort((i,l)=>i.position-l.position).map(i=>i.render)}function tJ(u,o,i){if(u<=i)return{from:0,to:u};if(o<0&&(o=0),o<=u>>1){let d=Math.floor(o/i);return{from:d*i,to:(d+1)*i}}let l=Math.floor((u-o)/i);return{from:u-(l+1)*i,to:u-l*i}}class vpe{constructor(o,i,l){this.view=o,this.stateField=i,this.applyCompletion=l,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:x=>this.placeInfo(x),key:this},this.space=null,this.currentClass="";let d=o.state.field(i),{options:m,selected:p}=d.open,v=o.state.facet(jl);this.optionContent=bpe(v),this.optionClass=v.optionClass,this.tooltipClass=v.tooltipClass,this.range=tJ(m.length,p,v.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(o.state),this.dom.addEventListener("mousedown",x=>{let{options:k}=o.state.field(i).open;for(let T=x.target,R;T&&T!=this.dom;T=T.parentNode)if(T.nodeName=="LI"&&(R=/-(\d+)$/.exec(T.id))&&+R[1]<k.length){this.applyCompletion(o,k[+R[1]]),x.preventDefault();return}}),this.dom.addEventListener("focusout",x=>{let k=o.state.field(this.stateField,!1);k&&k.tooltip&&o.state.facet(jl).closeOnBlur&&x.relatedTarget!=o.contentDOM&&o.dispatch({effects:tM.of(null)})}),this.showOptions(m,d.id)}mount(){this.updateSel()}showOptions(o,i){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(o,i,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(o){var i;let l=o.state.field(this.stateField),d=o.startState.field(this.stateField);if(this.updateTooltipClass(o.state),l!=d){let{options:m,selected:p,disabled:v}=l.open;(!d.open||d.open.options!=m)&&(this.range=tJ(m.length,p,o.state.facet(jl).maxRenderedOptions),this.showOptions(m,l.id)),this.updateSel(),v!=((i=d.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!v)}}updateTooltipClass(o){let i=this.tooltipClass(o);if(i!=this.currentClass){for(let l of this.currentClass.split(" "))l&&this.dom.classList.remove(l);for(let l of i.split(" "))l&&this.dom.classList.add(l);this.currentClass=i}}positioned(o){this.space=o,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let o=this.view.state.field(this.stateField),i=o.open;if((i.selected>-1&&i.selected<this.range.from||i.selected>=this.range.to)&&(this.range=tJ(i.options.length,i.selected,this.view.state.facet(jl).maxRenderedOptions),this.showOptions(i.options,o.id)),this.updateSelectedOption(i.selected)){this.destroyInfo();let{completion:l}=i.options[i.selected],{info:d}=l;if(!d)return;let m=typeof d=="string"?document.createTextNode(d):d(l);if(!m)return;"then"in m?m.then(p=>{p&&this.view.state.field(this.stateField,!1)==o&&this.addInfoPane(p,l)}).catch(p=>_u(this.view.state,p,"completion info")):this.addInfoPane(m,l)}}addInfoPane(o,i){this.destroyInfo();let l=this.info=document.createElement("div");if(l.className="cm-tooltip cm-completionInfo",o.nodeType!=null)l.appendChild(o),this.infoDestroy=null;else{let{dom:d,destroy:m}=o;l.appendChild(d),this.infoDestroy=m||null}this.dom.appendChild(l),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(o){let i=null;for(let l=this.list.firstChild,d=this.range.from;l;l=l.nextSibling,d++)l.nodeName!="LI"||!l.id?d--:d==o?l.hasAttribute("aria-selected")||(l.setAttribute("aria-selected","true"),i=l):l.hasAttribute("aria-selected")&&l.removeAttribute("aria-selected");return i&&wpe(this.list,i),i}measureInfo(){let o=this.dom.querySelector("[aria-selected]");if(!o||!this.info)return null;let i=this.dom.getBoundingClientRect(),l=this.info.getBoundingClientRect(),d=o.getBoundingClientRect(),m=this.space;if(!m){let p=this.dom.ownerDocument.defaultView||window;m={left:0,top:0,right:p.innerWidth,bottom:p.innerHeight}}return d.top>Math.min(m.bottom,i.bottom)-10||d.bottom<Math.max(m.top,i.top)+10?null:this.view.state.facet(jl).positionInfo(this.view,i,d,l,m,this.dom)}placeInfo(o){this.info&&(o?(o.style&&(this.info.style.cssText=o.style),this.info.className="cm-tooltip cm-completionInfo "+(o.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(o,i,l){const d=document.createElement("ul");d.id=i,d.setAttribute("role","listbox"),d.setAttribute("aria-expanded","true"),d.setAttribute("aria-label",this.view.state.phrase("Completions"));let m=null;for(let p=l.from;p<l.to;p++){let{completion:v,match:x}=o[p],{section:k}=v;if(k){let N=typeof k=="string"?k:k.name;if(N!=m&&(p>l.from||l.from==0))if(m=N,typeof k!="string"&&k.header)d.appendChild(k.header(k));else{let $=d.appendChild(document.createElement("completion-section"));$.textContent=N}}const T=d.appendChild(document.createElement("li"));T.id=i+"-"+p,T.setAttribute("role","option");let R=this.optionClass(v);R&&(T.className=R);for(let N of this.optionContent){let $=N(v,this.view.state,this.view,x);$&&T.appendChild($)}}return l.from&&d.classList.add("cm-completionListIncompleteTop"),l.to<o.length&&d.classList.add("cm-completionListIncompleteBottom"),d}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function ype(u,o){return i=>new vpe(i,u,o)}function wpe(u,o){let i=u.getBoundingClientRect(),l=o.getBoundingClientRect(),d=i.height/u.offsetHeight;l.top<i.top?u.scrollTop-=(i.top-l.top)/d:l.bottom>i.bottom&&(u.scrollTop+=(l.bottom-i.bottom)/d)}function doe(u){return(u.boost||0)*100+(u.apply?10:0)+(u.info?5:0)+(u.type?1:0)}function xpe(u,o){let i=[],l=null,d=k=>{i.push(k);let{section:T}=k.completion;if(T){l||(l=[]);let R=typeof T=="string"?T:T.name;l.some(N=>N.name==R)||l.push(typeof T=="string"?{name:R}:T)}},m=o.facet(jl);for(let k of u)if(k.hasResult()){let T=k.result.getMatch;if(k.result.filter===!1)for(let R of k.result.options)d(new loe(R,k.source,T?T(R):[],1e9-i.length));else{let R=o.sliceDoc(k.from,k.to),N,$=m.filterStrict?new gpe(R):new mpe(R);for(let U of k.result.options)if(N=$.match(U.label)){let X=U.displayLabel?T?T(U,N.matched):[]:N.matched;d(new loe(U,k.source,X,N.score+(U.boost||0)))}}}if(l){let k=Object.create(null),T=0,R=(N,$)=>{var U,X;return((U=N.rank)!==null&&U!==void 0?U:1e9)-((X=$.rank)!==null&&X!==void 0?X:1e9)||(N.name<$.name?-1:1)};for(let N of l.sort(R))T-=1e5,k[N.name]=T;for(let N of i){let{section:$}=N.completion;$&&(N.score+=k[typeof $=="string"?$:$.name])}}let p=[],v=null,x=m.compareCompletions;for(let k of i.sort((T,R)=>R.score-T.score||x(T.completion,R.completion))){let T=k.completion;!v||v.label!=T.label||v.detail!=T.detail||v.type!=null&&T.type!=null&&v.type!=T.type||v.apply!=T.apply||v.boost!=T.boost?p.push(k):doe(k.completion)>doe(v)&&(p[p.length-1]=k),v=k.completion}return p}class o2{constructor(o,i,l,d,m,p){this.options=o,this.attrs=i,this.tooltip=l,this.timestamp=d,this.selected=m,this.disabled=p}setSelected(o,i){return o==this.selected||o>=this.options.length?this:new o2(this.options,foe(i,o),this.tooltip,this.timestamp,o,this.disabled)}static build(o,i,l,d,m){let p=xpe(o,i);if(!p.length)return d&&o.some(x=>x.state==1)?new o2(d.options,d.attrs,d.tooltip,d.timestamp,d.selected,!0):null;let v=i.facet(jl).selectOnOpen?0:-1;if(d&&d.selected!=v&&d.selected!=-1){let x=d.options[d.selected].completion;for(let k=0;k<p.length;k++)if(p[k].completion==x){v=k;break}}return new o2(p,foe(l,v),{pos:o.reduce((x,k)=>k.hasResult()?Math.min(x,k.from):x,1e8),create:Epe,above:m.aboveCursor},d?d.timestamp:Date.now(),v,!1)}map(o){return new o2(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:o.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class y6{constructor(o,i,l){this.active=o,this.id=i,this.open=l}static start(){return new y6(kpe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(o){let{state:i}=o,l=i.facet(jl),m=(l.override||i.languageDataAt("autocomplete",J1(i)).map(hpe)).map(v=>(this.active.find(k=>k.source==v)||new jc(v,this.active.some(k=>k.state!=0)?1:0)).update(o,l));m.length==this.active.length&&m.every((v,x)=>v==this.active[x])&&(m=this.active);let p=this.open;p&&o.docChanged&&(p=p.map(o.changes)),o.selection||m.some(v=>v.hasResult()&&o.changes.touchesRange(v.from,v.to))||!Spe(m,this.active)?p=o2.build(m,i,this.id,p,l):p&&p.disabled&&!m.some(v=>v.state==1)&&(p=null),!p&&m.every(v=>v.state!=1)&&m.some(v=>v.hasResult())&&(m=m.map(v=>v.hasResult()?new jc(v.source,0):v));for(let v of o.effects)v.is(Kie)&&(p=p&&p.setSelected(v.value,this.id));return m==this.active&&p==this.open?this:new y6(m,this.id,p)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Cpe}}function Spe(u,o){if(u==o)return!0;for(let i=0,l=0;;){for(;i<u.length&&!u[i].hasResult;)i++;for(;l<o.length&&!o[l].hasResult;)l++;let d=i==u.length,m=l==o.length;if(d||m)return d==m;if(u[i++].result!=o[l++].result)return!1}}const Cpe={"aria-autocomplete":"list"};function foe(u,o){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":u};return o>-1&&(i["aria-activedescendant"]=u+"-"+o),i}const kpe=[];function nQ(u,o){if(u.isUserEvent("input.complete")){let i=u.annotation(qie);if(i&&o.activateOnCompletion(i))return"input"}return u.isUserEvent("input.type")?"input":u.isUserEvent("delete.backward")?"delete":null}class jc{constructor(o,i,l=-1){this.source=o,this.state=i,this.explicitPos=l}hasResult(){return!1}update(o,i){let l=nQ(o,i),d=this;l?d=d.handleUserEvent(o,l,i):o.docChanged?d=d.handleChange(o):o.selection&&d.state!=0&&(d=new jc(d.source,0));for(let m of o.effects)if(m.is(v6))d=new jc(d.source,1,m.value?J1(o.state):-1);else if(m.is(tM))d=new jc(d.source,0);else if(m.is(Gie))for(let p of m.value)p.source==d.source&&(d=p);return d}handleUserEvent(o,i,l){return i=="delete"||!l.activateOnTyping?this.map(o.changes):new jc(this.source,1)}handleChange(o){return o.changes.touchesRange(J1(o.startState))?new jc(this.source,0):this.map(o.changes)}map(o){return o.empty||this.explicitPos<0?this:new jc(this.source,this.state,o.mapPos(this.explicitPos))}}class u2 extends jc{constructor(o,i,l,d,m){super(o,2,i),this.result=l,this.from=d,this.to=m}hasResult(){return!0}handleUserEvent(o,i,l){var d;let m=this.result;m.map&&!o.changes.empty&&(m=m.map(m,o.changes));let p=o.changes.mapPos(this.from),v=o.changes.mapPos(this.to,1),x=J1(o.state);if((this.explicitPos<0?x<=p:x<this.from)||x>v||!m||i=="delete"&&J1(o.startState)==this.from)return new jc(this.source,i=="input"&&l.activateOnTyping?1:0);let k=this.explicitPos<0?-1:o.changes.mapPos(this.explicitPos);return Ape(m.validFor,o.state,p,v)?new u2(this.source,k,m,p,v):m.update&&(m=m.update(m,p,v,new jie(o.state,x,k>=0)))?new u2(this.source,k,m,m.from,(d=m.to)!==null&&d!==void 0?d:J1(o.state)):new jc(this.source,1,k)}handleChange(o){return o.changes.touchesRange(this.from,this.to)?new jc(this.source,0):this.map(o.changes)}map(o){return o.empty?this:(this.result.map?this.result.map(this.result,o):this.result)?new u2(this.source,this.explicitPos<0?-1:o.mapPos(this.explicitPos),this.result,o.mapPos(this.from),o.mapPos(this.to,1)):new jc(this.source,0)}}function Ape(u,o,i,l){if(!u)return!1;let d=o.sliceDoc(i,l);return typeof u=="function"?u(d,i,l,o):Zie(u,!0).test(d)}const Gie=Us.define({map(u,o){return u.map(i=>i.map(o))}}),Kie=Us.define(),Du=Kl.define({create(){return y6.start()},update(u,o){return u.update(o)},provide:u=>[xQ.from(u,o=>o.tooltip),wo.contentAttributes.from(u,o=>o.attrs)]});function LQ(u,o){const i=o.completion.apply||o.completion.label;let l=u.state.field(Du).active.find(d=>d.source==o.source);return l instanceof u2?(typeof i=="string"?u.dispatch(Object.assign(Object.assign({},fpe(u.state,i,l.from,l.to)),{annotations:qie.of(o.completion)})):i(u,o.completion,l.from,l.to),!0):!1}const Epe=ype(Du,LQ);function D$(u,o="option"){return i=>{let l=i.state.field(Du,!1);if(!l||!l.open||l.open.disabled||Date.now()-l.open.timestamp<i.state.facet(jl).interactionDelay)return!1;let d=1,m;o=="page"&&(m=Sre(i,l.open.tooltip))&&(d=Math.max(2,Math.floor(m.dom.offsetHeight/m.dom.querySelector("li").offsetHeight)-1));let{length:p}=l.open.options,v=l.open.selected>-1?l.open.selected+d*(u?1:-1):u?0:p-1;return v<0?v=o=="page"?0:p-1:v>=p&&(v=o=="page"?p-1:0),i.dispatch({effects:Kie.of(v)}),!0}}const Tpe=u=>{let o=u.state.field(Du,!1);return u.state.readOnly||!o||!o.open||o.open.selected<0||o.open.disabled||Date.now()-o.open.timestamp<u.state.facet(jl).interactionDelay?!1:LQ(u,o.open.options[o.open.selected])},Ope=u=>u.state.field(Du,!1)?(u.dispatch({effects:v6.of(!0)}),!0):!1,Dpe=u=>{let o=u.state.field(Du,!1);return!o||!o.active.some(i=>i.state!=0)?!1:(u.dispatch({effects:tM.of(null)}),!0)};class _pe{constructor(o,i){this.active=o,this.context=i,this.time=Date.now(),this.updates=[],this.done=void 0}}const Mpe=50,Rpe=1e3,Ppe=Ta.fromClass(class{constructor(u){this.view=u,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let o of u.state.field(Du).active)o.state==1&&this.startQuery(o)}update(u){let o=u.state.field(Du),i=u.state.facet(jl);if(!u.selectionSet&&!u.docChanged&&u.startState.field(Du)==o)return;let l=u.transactions.some(m=>(m.selection||m.docChanged)&&!nQ(m,i));for(let m=0;m<this.running.length;m++){let p=this.running[m];if(l||p.updates.length+u.transactions.length>Mpe&&Date.now()-p.time>Rpe){for(let v of p.context.abortListeners)try{v()}catch(x){_u(this.view.state,x)}p.context.abortListeners=null,this.running.splice(m--,1)}else p.updates.push(...u.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),u.transactions.some(m=>m.effects.some(p=>p.is(v6)))&&(this.pendingStart=!0);let d=this.pendingStart?50:i.activateOnTypingDelay;if(this.debounceUpdate=o.active.some(m=>m.state==1&&!this.running.some(p=>p.active.source==m.source))?setTimeout(()=>this.startUpdate(),d):-1,this.composing!=0)for(let m of u.transactions)nQ(m,i)=="input"?this.composing=2:this.composing==2&&m.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:u}=this.view,o=u.field(Du);for(let i of o.active)i.state==1&&!this.running.some(l=>l.active.source==i.source)&&this.startQuery(i)}startQuery(u){let{state:o}=this.view,i=J1(o),l=new jie(o,i,u.explicitPos==i),d=new _pe(u,l);this.running.push(d),Promise.resolve(u.source(l)).then(m=>{d.context.aborted||(d.done=m||null,this.scheduleAccept())},m=>{this.view.dispatch({effects:tM.of(null)}),_u(this.view.state,m)})}scheduleAccept(){this.running.every(u=>u.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(jl).updateSyncTime))}accept(){var u;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let o=[],i=this.view.state.facet(jl);for(let l=0;l<this.running.length;l++){let d=this.running[l];if(d.done===void 0)continue;if(this.running.splice(l--,1),d.done){let p=new u2(d.active.source,d.active.explicitPos,d.done,d.done.from,(u=d.done.to)!==null&&u!==void 0?u:J1(d.updates.length?d.updates[0].startState:this.view.state));for(let v of d.updates)p=p.update(v,i);if(p.hasResult()){o.push(p);continue}}let m=this.view.state.field(Du).active.find(p=>p.source==d.active.source);if(m&&m.state==1)if(d.done==null){let p=new jc(d.active.source,0);for(let v of d.updates)p=p.update(v,i);p.state!=1&&o.push(p)}else this.startQuery(m)}o.length&&this.view.dispatch({effects:Gie.of(o)})}},{eventHandlers:{blur(u){let o=this.view.state.field(Du,!1);if(o&&o.tooltip&&this.view.state.facet(jl).closeOnBlur){let i=o.open&&Sre(this.view,o.open.tooltip);(!i||!i.dom.contains(u.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:tM.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:v6.of(!1)}),20),this.composing=0}}}),Npe=typeof navigator=="object"&&/Win/.test(navigator.platform),Bpe=Ay.highest(wo.domEventHandlers({keydown(u,o){let i=o.state.field(Du,!1);if(!i||!i.open||i.open.disabled||i.open.selected<0||u.key.length>1||u.ctrlKey&&!(Npe&&u.altKey)||u.metaKey)return!1;let l=i.open.options[i.open.selected],d=i.active.find(p=>p.source==l.source),m=l.completion.commitCharacters||d.result.commitCharacters;return m&&m.indexOf(u.key)>-1&&LQ(o,l),!1}})),Fpe=wo.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),nM={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},ly=Us.define({map(u,o){let i=o.mapPos(u,-1,qc.TrackAfter);return i==null?void 0:i}}),$Q=new class extends by{};$Q.startSide=1;$Q.endSide=-1;const Yie=Kl.define({create(){return xr.empty},update(u,o){if(u=u.map(o.changes),o.selection){let i=o.state.doc.lineAt(o.selection.main.head);u=u.update({filter:l=>l>=i.from&&l<=i.to})}for(let i of o.effects)i.is(ly)&&(u=u.update({add:[$Q.range(i.value,i.value+1)]}));return u}});function Ipe(){return[$pe,Yie]}const nJ="()[]{}<>";function Xie(u){for(let o=0;o<nJ.length;o+=2)if(nJ.charCodeAt(o)==u)return nJ.charAt(o+1);return uQ(u<128?u:u+1)}function Jie(u,o){return u.languageDataAt("closeBrackets",o)[0]||nM}const Lpe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),$pe=wo.inputHandler.of((u,o,i,l)=>{if((Lpe?u.composing:u.compositionStarted)||u.state.readOnly)return!1;let d=u.state.selection.main;if(l.length>2||l.length==2&&gf(Ul(l,0))==1||o!=d.from||i!=d.to)return!1;let m=zpe(u.state,l);return m?(u.dispatch(m),!0):!1}),Hpe=({state:u,dispatch:o})=>{if(u.readOnly)return!1;let l=Jie(u,u.selection.main.head).brackets||nM.brackets,d=null,m=u.changeByRange(p=>{if(p.empty){let v=Upe(u.doc,p.head);for(let x of l)if(x==v&&L6(u.doc,p.head)==Xie(Ul(x,0)))return{changes:{from:p.head-x.length,to:p.head+x.length},range:rn.cursor(p.head-x.length)}}return{range:d=p}});return d||o(u.update(m,{scrollIntoView:!0,userEvent:"delete.backward"})),!d},Vpe=[{key:"Backspace",run:Hpe}];function zpe(u,o){let i=Jie(u,u.selection.main.head),l=i.brackets||nM.brackets;for(let d of l){let m=Xie(Ul(d,0));if(o==d)return m==d?Zpe(u,d,l.indexOf(d+d+d)>-1,i):Wpe(u,d,m,i.before||nM.before);if(o==m&&Qie(u,u.selection.main.from))return jpe(u,d,m)}return null}function Qie(u,o){let i=!1;return u.field(Yie).between(0,u.doc.length,l=>{l==o&&(i=!0)}),i}function L6(u,o){let i=u.sliceString(o,o+2);return i.slice(0,gf(Ul(i,0)))}function Upe(u,o){let i=u.sliceString(o-2,o);return gf(Ul(i,0))==i.length?i:i.slice(1)}function Wpe(u,o,i,l){let d=null,m=u.changeByRange(p=>{if(!p.empty)return{changes:[{insert:o,from:p.from},{insert:i,from:p.to}],effects:ly.of(p.to+o.length),range:rn.range(p.anchor+o.length,p.head+o.length)};let v=L6(u.doc,p.head);return!v||/\s/.test(v)||l.indexOf(v)>-1?{changes:{insert:o+i,from:p.head},effects:ly.of(p.head+o.length),range:rn.cursor(p.head+o.length)}:{range:d=p}});return d?null:u.update(m,{scrollIntoView:!0,userEvent:"input.type"})}function jpe(u,o,i){let l=null,d=u.changeByRange(m=>m.empty&&L6(u.doc,m.head)==i?{changes:{from:m.head,to:m.head+i.length,insert:i},range:rn.cursor(m.head+i.length)}:l={range:m});return l?null:u.update(d,{scrollIntoView:!0,userEvent:"input.type"})}function Zpe(u,o,i,l){let d=l.stringPrefixes||nM.stringPrefixes,m=null,p=u.changeByRange(v=>{if(!v.empty)return{changes:[{insert:o,from:v.from},{insert:o,from:v.to}],effects:ly.of(v.to+o.length),range:rn.range(v.anchor+o.length,v.head+o.length)};let x=v.head,k=L6(u.doc,x),T;if(k==o){if(hoe(u,x))return{changes:{insert:o+o,from:x},effects:ly.of(x+o.length),range:rn.cursor(x+o.length)};if(Qie(u,x)){let N=i&&u.sliceDoc(x,x+o.length*3)==o+o+o?o+o+o:o;return{changes:{from:x,to:x+N.length,insert:N},range:rn.cursor(x+N.length)}}}else{if(i&&u.sliceDoc(x-2*o.length,x)==o+o&&(T=moe(u,x-2*o.length,d))>-1&&hoe(u,T))return{changes:{insert:o+o+o+o,from:x},effects:ly.of(x+o.length),range:rn.cursor(x+o.length)};if(u.charCategorizer(x)(k)!=Wi.Word&&moe(u,x,d)>-1&&!qpe(u,x,o,d))return{changes:{insert:o+o,from:x},effects:ly.of(x+o.length),range:rn.cursor(x+o.length)}}return{range:m=v}});return m?null:u.update(p,{scrollIntoView:!0,userEvent:"input.type"})}function hoe(u,o){let i=ql(u).resolveInner(o+1);return i.parent&&i.from==o}function qpe(u,o,i,l){let d=ql(u).resolveInner(o,-1),m=l.reduce((p,v)=>Math.max(p,v.length),0);for(let p=0;p<5;p++){let v=u.sliceDoc(d.from,Math.min(d.to,d.from+i.length+m)),x=v.indexOf(i);if(!x||x>-1&&l.indexOf(v.slice(0,x))>-1){let T=d.firstChild;for(;T&&T.from==d.from&&T.to-T.from>i.length+x;){if(u.sliceDoc(T.to-i.length,T.to)==i)return!1;T=T.firstChild}return!0}let k=d.to==o&&d.parent;if(!k)break;d=k}return!1}function moe(u,o,i){let l=u.charCategorizer(o);if(l(u.sliceDoc(o-1,o))!=Wi.Word)return o;for(let d of i){let m=o-d.length;if(u.sliceDoc(m,o)==d&&l(u.sliceDoc(m-1,m))!=Wi.Word)return m}return-1}function Gpe(u={}){return[Bpe,Du,jl.of(u),Ppe,Kpe,Fpe]}const eae=[{key:"Ctrl-Space",run:Ope},{key:"Escape",run:Dpe},{key:"ArrowDown",run:D$(!0)},{key:"ArrowUp",run:D$(!1)},{key:"PageDown",run:D$(!0,"page")},{key:"PageUp",run:D$(!1,"page")},{key:"Enter",run:Tpe}],Kpe=Ay.highest(O6.computeN([jl],u=>u.facet(jl).defaultKeymap?[eae]:[]));class Ype{constructor(o,i,l){this.from=o,this.to=i,this.diagnostic=l}}class sy{constructor(o,i,l){this.diagnostics=o,this.panel=i,this.selected=l}static init(o,i,l){let d=o,m=l.facet(oM).markerFilter;m&&(d=m(d,l));let p=as.set(d.map(v=>v.from==v.to||v.from==v.to-1&&l.doc.lineAt(v.from).to==v.from?as.widget({widget:new r1e(v),diagnostic:v}).range(v.from):as.mark({attributes:{class:"cm-lintRange cm-lintRange-"+v.severity+(v.markClass?" "+v.markClass:"")},diagnostic:v,inclusive:!0}).range(v.from,v.to)),!0);return new sy(p,i,w2(p))}}function w2(u,o=null,i=0){let l=null;return u.between(i,1e9,(d,m,{spec:p})=>{if(!(o&&p.diagnostic!=o))return l=new Ype(d,m,p.diagnostic),!1}),l}function Xpe(u,o){let i=o.pos,l=o.end||i,d=u.state.facet(oM).hideOn(u,i,l);if(d!=null)return d;let m=u.startState.doc.lineAt(o.pos);return!!(u.effects.some(p=>p.is(tae))||u.changes.touchesRange(m.from,Math.max(m.to,l)))}function Jpe(u,o){return u.field(kd,!1)?o:o.concat(Us.appendConfig.of(l1e))}const tae=Us.define(),HQ=Us.define(),nae=Us.define(),kd=Kl.define({create(){return new sy(as.none,null,null)},update(u,o){if(o.docChanged&&u.diagnostics.size){let i=u.diagnostics.map(o.changes),l=null,d=u.panel;if(u.selected){let m=o.changes.mapPos(u.selected.from,1);l=w2(i,u.selected.diagnostic,m)||w2(i,null,m)}!i.size&&d&&o.state.facet(oM).autoPanel&&(d=null),u=new sy(i,d,l)}for(let i of o.effects)if(i.is(tae)){let l=o.state.facet(oM).autoPanel?i.value.length?sM.open:null:u.panel;u=sy.init(i.value,l,o.state)}else i.is(HQ)?u=new sy(u.diagnostics,i.value?sM.open:null,u.selected):i.is(nae)&&(u=new sy(u.diagnostics,u.panel,i.value));return u},provide:u=>[Y_.from(u,o=>o.panel),wo.decorations.from(u,o=>o.diagnostics)]}),Qpe=as.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function e1e(u,o,i){let{diagnostics:l}=u.state.field(kd),d=[],m=2e8,p=0;l.between(o-(i<0?1:0),o+(i>0?1:0),(x,k,{spec:T})=>{o>=x&&o<=k&&(x==k||(o>x||i>0)&&(o<k||i<0))&&(d.push(T.diagnostic),m=Math.min(x,m),p=Math.max(k,p))});let v=u.state.facet(oM).tooltipFilter;return v&&(d=v(d,u.state)),d.length?{pos:m,end:p,above:u.state.doc.lineAt(m).to<p,create(){return{dom:t1e(u,d)}}}:null}function t1e(u,o){return Ci("ul",{class:"cm-tooltip-lint"},o.map(i=>sae(u,i,!1)))}const n1e=u=>{let o=u.state.field(kd,!1);(!o||!o.panel)&&u.dispatch({effects:Jpe(u.state,[HQ.of(!0)])});let i=K_(u,sM.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},goe=u=>{let o=u.state.field(kd,!1);return!o||!o.panel?!1:(u.dispatch({effects:HQ.of(!1)}),!0)},o1e=u=>{let o=u.state.field(kd,!1);if(!o)return!1;let i=u.state.selection.main,l=o.diagnostics.iter(i.to+1);return!l.value&&(l=o.diagnostics.iter(0),!l.value||l.from==i.from&&l.to==i.to)?!1:(u.dispatch({selection:{anchor:l.from,head:l.to},scrollIntoView:!0}),!0)},s1e=[{key:"Mod-Shift-m",run:n1e,preventDefault:!0},{key:"F8",run:o1e}],oM=Oo.define({combine(u){return Object.assign({sources:u.map(o=>o.source).filter(o=>o!=null)},km(u.map(o=>o.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(o,i)=>o?i?l=>o(l)||i(l):o:i}))}});function oae(u){let o=[];if(u)e:for(let{name:i}of u){for(let l=0;l<i.length;l++){let d=i[l];if(/[a-zA-Z]/.test(d)&&!o.some(m=>m.toLowerCase()==d.toLowerCase())){o.push(d);continue e}}o.push("")}return o}function sae(u,o,i){var l;let d=i?oae(o.actions):[];return Ci("li",{class:"cm-diagnostic cm-diagnostic-"+o.severity},Ci("span",{class:"cm-diagnosticText"},o.renderMessage?o.renderMessage(u):o.message),(l=o.actions)===null||l===void 0?void 0:l.map((m,p)=>{let v=!1,x=N=>{if(N.preventDefault(),v)return;v=!0;let $=w2(u.state.field(kd).diagnostics,o);$&&m.apply(u,$.from,$.to)},{name:k}=m,T=d[p]?k.indexOf(d[p]):-1,R=T<0?k:[k.slice(0,T),Ci("u",k.slice(T,T+1)),k.slice(T+1)];return Ci("button",{type:"button",class:"cm-diagnosticAction",onclick:x,onmousedown:x,"aria-label":` Action: ${k}${T<0?"":` (access key "${d[p]})"`}.`},R)}),o.source&&Ci("div",{class:"cm-diagnosticSource"},o.source))}class r1e extends Yg{constructor(o){super(),this.diagnostic=o}eq(o){return o.diagnostic==this.diagnostic}toDOM(){return Ci("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class poe{constructor(o,i){this.diagnostic=i,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=sae(o,i,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class sM{constructor(o){this.view=o,this.items=[];let i=d=>{if(d.keyCode==27)goe(this.view),this.view.focus();else if(d.keyCode==38||d.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(d.keyCode==40||d.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(d.keyCode==36)this.moveSelection(0);else if(d.keyCode==35)this.moveSelection(this.items.length-1);else if(d.keyCode==13)this.view.focus();else if(d.keyCode>=65&&d.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:m}=this.items[this.selectedIndex],p=oae(m.actions);for(let v=0;v<p.length;v++)if(p[v].toUpperCase().charCodeAt(0)==d.keyCode){let x=w2(this.view.state.field(kd).diagnostics,m);x&&m.actions[v].apply(o,x.from,x.to)}}else return;d.preventDefault()},l=d=>{for(let m=0;m<this.items.length;m++)this.items[m].dom.contains(d.target)&&this.moveSelection(m)};this.list=Ci("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i,onclick:l}),this.dom=Ci("div",{class:"cm-panel-lint"},this.list,Ci("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>goe(this.view)},"×")),this.update()}get selectedIndex(){let o=this.view.state.field(kd).selected;if(!o)return-1;for(let i=0;i<this.items.length;i++)if(this.items[i].diagnostic==o.diagnostic)return i;return-1}update(){let{diagnostics:o,selected:i}=this.view.state.field(kd),l=0,d=!1,m=null;for(o.between(0,this.view.state.doc.length,(p,v,{spec:x})=>{let k=-1,T;for(let R=l;R<this.items.length;R++)if(this.items[R].diagnostic==x.diagnostic){k=R;break}k<0?(T=new poe(this.view,x.diagnostic),this.items.splice(l,0,T),d=!0):(T=this.items[k],k>l&&(this.items.splice(l,k-l),d=!0)),i&&T.diagnostic==i.diagnostic?T.dom.hasAttribute("aria-selected")||(T.dom.setAttribute("aria-selected","true"),m=T):T.dom.hasAttribute("aria-selected")&&T.dom.removeAttribute("aria-selected"),l++});l<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)d=!0,this.items.pop();this.items.length==0&&(this.items.push(new poe(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),d=!0),m?(this.list.setAttribute("aria-activedescendant",m.id),this.view.requestMeasure({key:this,read:()=>({sel:m.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:p,panel:v})=>{let x=v.height/this.list.offsetHeight;p.top<v.top?this.list.scrollTop-=(v.top-p.top)/x:p.bottom>v.bottom&&(this.list.scrollTop+=(p.bottom-v.bottom)/x)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),d&&this.sync()}sync(){let o=this.list.firstChild;function i(){let l=o;o=l.nextSibling,l.remove()}for(let l of this.items)if(l.dom.parentNode==this.list){for(;o!=l.dom;)i();o=l.dom.nextSibling}else this.list.insertBefore(l.dom,o);for(;o;)i()}moveSelection(o){if(this.selectedIndex<0)return;let i=this.view.state.field(kd),l=w2(i.diagnostics,this.items[o].diagnostic);l&&this.view.dispatch({selection:{anchor:l.from,head:l.to},scrollIntoView:!0,effects:nae.of(l)})}static open(o){return new sM(o)}}function i1e(u,o='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${o}>${encodeURIComponent(u)}</svg>')`}function _$(u){return i1e(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${u}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const a1e=wo.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:_$("#d11")},".cm-lintRange-warning":{backgroundImage:_$("orange")},".cm-lintRange-info":{backgroundImage:_$("#999")},".cm-lintRange-hint":{backgroundImage:_$("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),l1e=[kd,wo.decorations.compute([kd],u=>{let{selected:o,panel:i}=u.field(kd);return!o||!i||o.from==o.to?as.none:as.set([Qpe.range(o.from,o.to)])}),ohe(e1e,{hideOn:Xpe}),a1e],c1e=[fhe(),ghe(),Rfe(),Nme(),ome(),xfe(),Efe(),ur.allowMultipleSelections.of(!0),Uhe(),qre(ame,{fallback:!0}),mme(),Ipe(),Gpe(),Zfe(),Kfe(),Lfe(),Vge(),O6.of([...Vpe,...Nge,...ipe,...Ume,...Qhe,...eae,...s1e])];/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var u1e=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[c1e]}),d1e=Symbol("vue-codemirror-global-config"),Zc,f1e=function(u){var o=u.onUpdate,i=u.onChange,l=u.onFocus,d=u.onBlur,m=function(p,v){var x={};for(var k in p)Object.prototype.hasOwnProperty.call(p,k)&&v.indexOf(k)<0&&(x[k]=p[k]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function"){var T=0;for(k=Object.getOwnPropertySymbols(p);T<k.length;T++)v.indexOf(k[T])<0&&Object.prototype.propertyIsEnumerable.call(p,k[T])&&(x[k[T]]=p[k[T]])}return x}(u,["onUpdate","onChange","onFocus","onBlur"]);return ur.create({doc:m.doc,selection:m.selection,extensions:(Array.isArray(m.extensions)?m.extensions:[m.extensions]).concat([wo.updateListener.of(function(p){o(p),p.docChanged&&i(p.state.doc.toString(),p),p.focusChanged&&(p.view.hasFocus?l(p):d(p))})])})},e2=function(u){var o=new lM;return{compartment:o,run:function(i){o.get(u.state)?u.dispatch({effects:o.reconfigure(i)}):u.dispatch({effects:Us.appendConfig.of(o.of(i))})}}},boe=function(u,o){var i=e2(u),l=i.compartment,d=i.run;return function(m){var p=l.get(u.state);d((m!=null?m:p!==o)?o:[])}},M$={type:Boolean,default:void 0},h1e={autofocus:M$,disabled:M$,indentWithTab:M$,tabSize:Number,placeholder:String,style:Object,autoDestroy:M$,phrases:Object,root:Object,extensions:Array,selection:Object},m1e={modelValue:{type:String,default:""}},g1e=Object.assign(Object.assign({},h1e),m1e);(function(u){u.Change="change",u.Update="update",u.Focus="focus",u.Blur="blur",u.Ready="ready",u.ModelUpdate="update:modelValue"})(Zc||(Zc={}));var ry={};ry[Zc.Change]=function(u,o){return!0},ry[Zc.Update]=function(u){return!0},ry[Zc.Focus]=function(u){return!0},ry[Zc.Blur]=function(u){return!0},ry[Zc.Ready]=function(u){return!0};var rae={};rae[Zc.ModelUpdate]=ry[Zc.Change];var p1e=Object.assign(Object.assign({},ry),rae),b1e=Ai({name:"VueCodemirror",props:Object.assign({},g1e),emits:Object.assign({},p1e),setup:function(u,o){var i=DX(),l=DX(),d=DX(),m=Object.assign(Object.assign({},u1e),Toe(d1e,{})),p=Ss(function(){var v={};return Object.keys(U_(u)).forEach(function(x){var k;x!=="modelValue"&&(v[x]=(k=u[x])!==null&&k!==void 0?k:m[x])}),v});return Cy(function(){var v;l.value=f1e({doc:u.modelValue,selection:p.value.selection,extensions:(v=m.extensions)!==null&&v!==void 0?v:[],onFocus:function(k){return o.emit(Zc.Focus,k)},onBlur:function(k){return o.emit(Zc.Blur,k)},onUpdate:function(k){return o.emit(Zc.Update,k)},onChange:function(k,T){k!==u.modelValue&&(o.emit(Zc.Change,k,T),o.emit(Zc.ModelUpdate,k,T))}}),d.value=function(k){return new wo(Object.assign({},k))}({state:l.value,parent:i.value,root:p.value.root});var x=function(k){var T=function(){return k.state.doc.toString()},R=e2(k).run,N=boe(k,[wo.editable.of(!1),ur.readOnly.of(!0)]),$=boe(k,O6.of([Bge])),U=e2(k).run,X=e2(k).run,J=e2(k).run,G=e2(k).run;return{focus:function(){return k.focus()},getDoc:T,setDoc:function(le){le!==T()&&k.dispatch({changes:{from:0,to:k.state.doc.length,insert:le}})},reExtensions:R,toggleDisabled:N,toggleIndentWithTab:$,setTabSize:function(le){U([ur.tabSize.of(le),M6.of(" ".repeat(le))])},setPhrases:function(le){X([ur.phrases.of(le)])},setPlaceholder:function(le){J(zfe(le))},setStyle:function(le){le===void 0&&(le={}),G(wo.theme({"&":Object.assign({},le)}))}}}(d.value);rr(function(){return u.modelValue},function(k){k!==x.getDoc()&&x.setDoc(k)}),rr(function(){return u.extensions},function(k){return x.reExtensions(k||[])},{immediate:!0}),rr(function(){return p.value.disabled},function(k){return x.toggleDisabled(k)},{immediate:!0}),rr(function(){return p.value.indentWithTab},function(k){return x.toggleIndentWithTab(k)},{immediate:!0}),rr(function(){return p.value.tabSize},function(k){return x.setTabSize(k)},{immediate:!0}),rr(function(){return p.value.phrases},function(k){return x.setPhrases(k||{})},{immediate:!0}),rr(function(){return p.value.placeholder},function(k){return x.setPlaceholder(k)},{immediate:!0}),rr(function(){return p.value.style},function(k){return x.setStyle(k)},{immediate:!0}),p.value.autofocus&&x.focus(),o.emit(Zc.Ready,{state:l.value,view:d.value,container:i.value})}),Doe(function(){p.value.autoDestroy&&d.value&&function(v){v.destroy()}(d.value)}),function(){return $ae("div",{class:"v-codemirror",style:{display:"contents"},ref:i})}}}),v1e=b1e,t2=(u=>(u.JSON="json",u.YAML="yaml",u))(t2||{}),iae=u=>{var{theme:o,settings:i={},styles:l=[]}=u,d={".cm-gutters":{}},m={};i.background&&(m.backgroundColor=i.background),i.backgroundImage&&(m.backgroundImage=i.backgroundImage),i.foreground&&(m.color=i.foreground),i.fontSize&&(m.fontSize=i.fontSize),(i.background||i.foreground)&&(d["&"]=m),i.fontFamily&&(d["&.cm-editor .cm-scroller"]={fontFamily:i.fontFamily}),i.gutterBackground&&(d[".cm-gutters"].backgroundColor=i.gutterBackground),i.gutterForeground&&(d[".cm-gutters"].color=i.gutterForeground),i.gutterBorder&&(d[".cm-gutters"].borderRightColor=i.gutterBorder),i.caret&&(d[".cm-content"]={caretColor:i.caret},d[".cm-cursor, .cm-dropCursor"]={borderLeftColor:i.caret});var p={};i.gutterActiveForeground&&(p.color=i.gutterActiveForeground),i.lineHighlight&&(d[".cm-activeLine"]={backgroundColor:i.lineHighlight},p.backgroundColor=i.lineHighlight),d[".cm-activeLineGutter"]=p,i.selection&&(d["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:i.selection+" !important"}),i.selectionMatch&&(d["& .cm-selectionMatch"]={backgroundColor:i.selectionMatch});var v=wo.theme(d,{dark:o==="dark"}),x=hM.define(l),k=[v,qre(x)];return k},y1e={background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},w1e=u=>{var{theme:o="light",settings:i={},styles:l=[]}={};return iae({theme:o,settings:Hoe({},y1e,i),styles:[{tag:[It.standard(It.tagName),It.tagName],color:"#116329"},{tag:[It.comment,It.bracket],color:"#6a737d"},{tag:[It.className,It.propertyName],color:"#6f42c1"},{tag:[It.variableName,It.attributeName,It.number,It.operator],color:"#005cc5"},{tag:[It.keyword,It.typeName,It.typeOperator,It.typeName],color:"#d73a49"},{tag:[It.string,It.meta,It.regexp],color:"#032f62"},{tag:[It.name,It.quote],color:"#22863a"},{tag:[It.heading,It.strong],color:"#24292e",fontWeight:"bold"},{tag:[It.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[It.deleted],color:"#b31d28",backgroundColor:"ffeef0"},{tag:[It.atom,It.bool,It.special(It.variableName)],color:"#e36209"},{tag:[It.url,It.escape,It.regexp,It.link],color:"#032f62"},{tag:It.link,textDecoration:"underline"},{tag:It.strikethrough,textDecoration:"line-through"},{tag:It.invalid,color:"#cb2431"},...l]})},x1e=w1e(),S1e={background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},C1e=u=>{var{theme:o="dark",settings:i={},styles:l=[]}={};return iae({theme:o,settings:Hoe({},S1e,i),styles:[{tag:[It.standard(It.tagName),It.tagName],color:"#7ee787"},{tag:[It.comment,It.bracket],color:"#8b949e"},{tag:[It.className,It.propertyName],color:"#d2a8ff"},{tag:[It.variableName,It.attributeName,It.number,It.operator],color:"#79c0ff"},{tag:[It.keyword,It.typeName,It.typeOperator,It.typeName],color:"#ff7b72"},{tag:[It.string,It.meta,It.regexp],color:"#a5d6ff"},{tag:[It.name,It.quote],color:"#7ee787"},{tag:[It.heading,It.strong],color:"#d2a8ff",fontWeight:"bold"},{tag:[It.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[It.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"},{tag:[It.atom,It.bool,It.special(It.variableName)],color:"#ffab70"},{tag:It.link,textDecoration:"underline"},{tag:It.strikethrough,textDecoration:"line-through"},{tag:It.invalid,color:"#f97583"},...l]})},k1e=C1e(),A1e=["true","false","on","off","yes","no"],E1e=new RegExp("\\b(("+A1e.join(")|(")+"))$","i");const T1e={name:"yaml",token:function(u,o){var i=u.peek(),l=o.escaped;if(o.escaped=!1,i=="#"&&(u.pos==0||/\s/.test(u.string.charAt(u.pos-1))))return u.skipToEnd(),"comment";if(u.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(o.literal&&u.indentation()>o.keyCol)return u.skipToEnd(),"string";if(o.literal&&(o.literal=!1),u.sol()){if(o.keyCol=0,o.pair=!1,o.pairStart=!1,u.match("---")||u.match("..."))return"def";if(u.match(/^\s*-\s+/))return"meta"}if(u.match(/^(\{|\}|\[|\])/))return i=="{"?o.inlinePairs++:i=="}"?o.inlinePairs--:i=="["?o.inlineList++:o.inlineList--,"meta";if(o.inlineList>0&&!l&&i==",")return u.next(),"meta";if(o.inlinePairs>0&&!l&&i==",")return o.keyCol=0,o.pair=!1,o.pairStart=!1,u.next(),"meta";if(o.pairStart){if(u.match(/^\s*(\||\>)\s*/))return o.literal=!0,"meta";if(u.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable";if(o.inlinePairs==0&&u.match(/^\s*-?[0-9\.\,]+\s?$/)||o.inlinePairs>0&&u.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(u.match(E1e))return"keyword"}return!o.pair&&u.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(o.pair=!0,o.keyCol=u.indentation(),"atom"):o.pair&&u.match(/^:\s*/)?(o.pairStart=!0,"meta"):(o.pairStart=!1,o.escaped=i=="\\",u.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},languageData:{commentTokens:{line:"#"}}};var voe={};class w6{constructor(o,i,l,d,m,p,v,x,k,T=0,R){this.p=o,this.stack=i,this.state=l,this.reducePos=d,this.pos=m,this.score=p,this.buffer=v,this.bufferBase=x,this.curContext=k,this.lookAhead=T,this.parent=R}toString(){return`[${this.stack.filter((o,i)=>i%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(o,i,l=0){let d=o.parser.context;return new w6(o,[],i,l,l,0,[],0,d?new yoe(d,d.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(o,i){this.stack.push(this.state,i,this.bufferBase+this.buffer.length),this.state=o}reduce(o){var i;let l=o>>19,d=o&65535,{parser:m}=this.p,p=m.dynamicPrecedence(d);if(p&&(this.score+=p),l==0){this.pushState(m.getGoto(this.state,d,!0),this.reducePos),d<m.minRepeatTerm&&this.storeNode(d,this.reducePos,this.reducePos,4,!0),this.reduceContext(d,this.reducePos);return}let v=this.stack.length-(l-1)*3-(o&262144?6:0),x=v?this.stack[v-2]:this.p.ranges[0].from,k=this.reducePos-x;k>=2e3&&!(!((i=this.p.parser.nodeSet.types[d])===null||i===void 0)&&i.isAnonymous)&&(x==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=k):this.p.lastBigReductionSize<k&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=x,this.p.lastBigReductionSize=k));let T=v?this.stack[v-1]:0,R=this.bufferBase+this.buffer.length-T;if(d<m.minRepeatTerm||o&131072){let N=m.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(d,x,N,R+4,!0)}if(o&262144)this.state=this.stack[v];else{let N=this.stack[v-3];this.state=m.getGoto(N,d,!0)}for(;this.stack.length>v;)this.stack.pop();this.reduceContext(d,x)}storeNode(o,i,l,d=4,m=!1){if(o==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let p=this,v=this.buffer.length;if(v==0&&p.parent&&(v=p.bufferBase-p.parent.bufferBase,p=p.parent),v>0&&p.buffer[v-4]==0&&p.buffer[v-1]>-1){if(i==l)return;if(p.buffer[v-2]>=i){p.buffer[v-2]=l;return}}}if(!m||this.pos==l)this.buffer.push(o,i,l,d);else{let p=this.buffer.length;if(p>0&&this.buffer[p-4]!=0)for(;p>0&&this.buffer[p-2]>l;)this.buffer[p]=this.buffer[p-4],this.buffer[p+1]=this.buffer[p-3],this.buffer[p+2]=this.buffer[p-2],this.buffer[p+3]=this.buffer[p-1],p-=4,d>4&&(d-=4);this.buffer[p]=o,this.buffer[p+1]=i,this.buffer[p+2]=l,this.buffer[p+3]=d}}shift(o,i,l,d){if(o&131072)this.pushState(o&65535,this.pos);else if(o&262144)this.pos=d,this.shiftContext(i,l),i<=this.p.parser.maxNode&&this.buffer.push(i,l,d,4);else{let m=o,{parser:p}=this.p;(d>this.pos||i<=p.maxNode)&&(this.pos=d,p.stateFlag(m,1)||(this.reducePos=d)),this.pushState(m,l),this.shiftContext(i,l),i<=p.maxNode&&this.buffer.push(i,l,d,4)}}apply(o,i,l,d){o&65536?this.reduce(o):this.shift(o,i,l,d)}useNode(o,i){let l=this.p.reused.length-1;(l<0||this.p.reused[l]!=o)&&(this.p.reused.push(o),l++);let d=this.pos;this.reducePos=this.pos=d+o.length,this.pushState(i,d),this.buffer.push(l,d,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,o,this,this.p.stream.reset(this.pos-o.length)))}split(){let o=this,i=o.buffer.length;for(;i>0&&o.buffer[i-2]>o.reducePos;)i-=4;let l=o.buffer.slice(i),d=o.bufferBase+i;for(;o&&d==o.bufferBase;)o=o.parent;return new w6(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,l,d,this.curContext,this.lookAhead,o)}recoverByDelete(o,i){let l=o<=this.p.parser.maxNode;l&&this.storeNode(o,this.pos,i,4),this.storeNode(0,this.pos,i,l?8:4),this.pos=this.reducePos=i,this.score-=190}canShift(o){for(let i=new O1e(this);;){let l=this.p.parser.stateSlot(i.state,4)||this.p.parser.hasAction(i.state,o);if(l==0)return!1;if(!(l&65536))return!0;i.reduce(l)}}recoverByInsert(o){if(this.stack.length>=300)return[];let i=this.p.parser.nextStates(this.state);if(i.length>8||this.stack.length>=120){let d=[];for(let m=0,p;m<i.length;m+=2)(p=i[m+1])!=this.state&&this.p.parser.hasAction(p,o)&&d.push(i[m],p);if(this.stack.length<120)for(let m=0;d.length<8&&m<i.length;m+=2){let p=i[m+1];d.some((v,x)=>x&1&&v==p)||d.push(i[m],p)}i=d}let l=[];for(let d=0;d<i.length&&l.length<4;d+=2){let m=i[d+1];if(m==this.state)continue;let p=this.split();p.pushState(m,this.pos),p.storeNode(0,p.pos,p.pos,4,!0),p.shiftContext(i[d],this.pos),p.reducePos=this.pos,p.score-=200,l.push(p)}return l}forceReduce(){let{parser:o}=this.p,i=o.stateSlot(this.state,5);if(!(i&65536))return!1;if(!o.validAction(this.state,i)){let l=i>>19,d=i&65535,m=this.stack.length-l*3;if(m<0||o.getGoto(this.stack[m],d,!1)<0){let p=this.findForcedReduction();if(p==null)return!1;i=p}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(i),!0}findForcedReduction(){let{parser:o}=this.p,i=[],l=(d,m)=>{if(!i.includes(d))return i.push(d),o.allActions(d,p=>{if(!(p&393216))if(p&65536){let v=(p>>19)-m;if(v>1){let x=p&65535,k=this.stack.length-v*3;if(k>=0&&o.getGoto(this.stack[k],x,!1)>=0)return v<<19|65536|x}}else{let v=l(p,m+1);if(v!=null)return v}})};return l(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:o}=this.p;return o.data[o.stateSlot(this.state,1)]==65535&&!o.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(o){if(this.state!=o.state||this.stack.length!=o.stack.length)return!1;for(let i=0;i<this.stack.length;i+=3)if(this.stack[i]!=o.stack[i])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(o){return this.p.parser.dialect.flags[o]}shiftContext(o,i){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,o,this,this.p.stream.reset(i)))}reduceContext(o,i){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,o,this,this.p.stream.reset(i)))}emitContext(){let o=this.buffer.length-1;(o<0||this.buffer[o]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let o=this.buffer.length-1;(o<0||this.buffer[o]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(o){if(o!=this.curContext.context){let i=new yoe(this.curContext.tracker,o);i.hash!=this.curContext.hash&&this.emitContext(),this.curContext=i}}setLookAhead(o){o>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=o)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class yoe{constructor(o,i){this.tracker=o,this.context=i,this.hash=o.strict?o.hash(i):0}}class O1e{constructor(o){this.start=o,this.state=o.state,this.stack=o.stack,this.base=this.stack.length}reduce(o){let i=o&65535,l=o>>19;l==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(l-1)*3;let d=this.start.p.parser.getGoto(this.stack[this.base-3],i,!0);this.state=d}}class x6{constructor(o,i,l){this.stack=o,this.pos=i,this.index=l,this.buffer=o.buffer,this.index==0&&this.maybeNext()}static create(o,i=o.bufferBase+o.buffer.length){return new x6(o,i,i-o.bufferBase)}maybeNext(){let o=this.stack.parent;o!=null&&(this.index=this.stack.bufferBase-o.bufferBase,this.stack=o,this.buffer=o.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new x6(this.stack,this.pos,this.index)}}function R$(u,o=Uint16Array){if(typeof u!="string")return u;let i=null;for(let l=0,d=0;l<u.length;){let m=0;for(;;){let p=u.charCodeAt(l++),v=!1;if(p==126){m=65535;break}p>=92&&p--,p>=34&&p--;let x=p-32;if(x>=46&&(x-=46,v=!0),m+=x,v)break;m*=46}i?i[d++]=m:i=new o(m)}return i}class W${constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const woe=new W$;class D1e{constructor(o,i){this.input=o,this.ranges=i,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=woe,this.rangeIndex=0,this.pos=this.chunkPos=i[0].from,this.range=i[0],this.end=i[i.length-1].to,this.readNext()}resolveOffset(o,i){let l=this.range,d=this.rangeIndex,m=this.pos+o;for(;m<l.from;){if(!d)return null;let p=this.ranges[--d];m-=l.from-p.to,l=p}for(;i<0?m>l.to:m>=l.to;){if(d==this.ranges.length-1)return null;let p=this.ranges[++d];m+=p.from-l.to,l=p}return m}clipPos(o){if(o>=this.range.from&&o<this.range.to)return o;for(let i of this.ranges)if(i.to>o)return Math.max(o,i.from);return this.end}peek(o){let i=this.chunkOff+o,l,d;if(i>=0&&i<this.chunk.length)l=this.pos+o,d=this.chunk.charCodeAt(i);else{let m=this.resolveOffset(o,1);if(m==null)return-1;if(l=m,l>=this.chunk2Pos&&l<this.chunk2Pos+this.chunk2.length)d=this.chunk2.charCodeAt(l-this.chunk2Pos);else{let p=this.rangeIndex,v=this.range;for(;v.to<=l;)v=this.ranges[++p];this.chunk2=this.input.chunk(this.chunk2Pos=l),l+this.chunk2.length>v.to&&(this.chunk2=this.chunk2.slice(0,v.to-l)),d=this.chunk2.charCodeAt(0)}}return l>=this.token.lookAhead&&(this.token.lookAhead=l+1),d}acceptToken(o,i=0){let l=i?this.resolveOffset(i,-1):this.pos;if(l==null||l<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=o,this.token.end=l}acceptTokenTo(o,i){this.token.value=o,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:o,chunkPos:i}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=o,this.chunk2Pos=i,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let o=this.input.chunk(this.pos),i=this.pos+o.length;this.chunk=i>this.range.to?o.slice(0,this.range.to-this.pos):o,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(o=1){for(this.chunkOff+=o;this.pos+o>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();o-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=o,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(o,i){if(i?(this.token=i,i.start=o,i.lookAhead=o+1,i.value=i.extended=-1):this.token=woe,this.pos!=o){if(this.pos=o,o==this.end)return this.setDone(),this;for(;o<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;o>=this.range.to;)this.range=this.ranges[++this.rangeIndex];o>=this.chunkPos&&o<this.chunkPos+this.chunk.length?this.chunkOff=o-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(o,i){if(o>=this.chunkPos&&i<=this.chunkPos+this.chunk.length)return this.chunk.slice(o-this.chunkPos,i-this.chunkPos);if(o>=this.chunk2Pos&&i<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(o-this.chunk2Pos,i-this.chunk2Pos);if(o>=this.range.from&&i<=this.range.to)return this.input.read(o,i);let l="";for(let d of this.ranges){if(d.from>=i)break;d.to>o&&(l+=this.input.read(Math.max(d.from,o),Math.min(d.to,i)))}return l}}class d2{constructor(o,i){this.data=o,this.id=i}token(o,i){let{parser:l}=i.p;_1e(this.data,o,i,this.id,l.data,l.tokenPrecTable)}}d2.prototype.contextual=d2.prototype.fallback=d2.prototype.extend=!1;d2.prototype.fallback=d2.prototype.extend=!1;function _1e(u,o,i,l,d,m){let p=0,v=1<<l,{dialect:x}=i.p.parser;e:for(;v&u[p];){let k=u[p+1];for(let $=p+3;$<k;$+=2)if((u[$+1]&v)>0){let U=u[$];if(x.allows(U)&&(o.token.value==-1||o.token.value==U||M1e(U,o.token.value,d,m))){o.acceptToken(U);break}}let T=o.next,R=0,N=u[p+2];if(o.next<0&&N>R&&u[k+N*3-3]==65535){p=u[k+N*3-1];continue e}for(;R<N;){let $=R+N>>1,U=k+$+($<<1),X=u[U],J=u[U+1]||65536;if(T<X)N=$;else if(T>=J)R=$+1;else{p=u[U+2],o.advance();continue e}}break}}function xoe(u,o,i){for(let l=o,d;(d=u[l])!=65535;l++)if(d==i)return l-o;return-1}function M1e(u,o,i,l){let d=xoe(i,l,o);return d<0||xoe(i,l,u)<d}const yd=typeof process!="undefined"&&voe&&/\bparse\b/.test(voe.LOG);let oJ=null;function Soe(u,o,i){let l=u.cursor(Tl.IncludeAnonymous);for(l.moveTo(o);;)if(!(i<0?l.childBefore(o):l.childAfter(o)))for(;;){if((i<0?l.to<o:l.from>o)&&!l.type.isError)return i<0?Math.max(0,Math.min(l.to-1,o-25)):Math.min(u.length,Math.max(l.from+1,o+25));if(i<0?l.prevSibling():l.nextSibling())break;if(!l.parent())return i<0?0:u.length}}class R1e{constructor(o,i){this.fragments=o,this.nodeSet=i,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let o=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(o){for(this.safeFrom=o.openStart?Soe(o.tree,o.from+o.offset,1)-o.offset:o.from,this.safeTo=o.openEnd?Soe(o.tree,o.to+o.offset,-1)-o.offset:o.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(o.tree),this.start.push(-o.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(o){if(o<this.nextStart)return null;for(;this.fragment&&this.safeTo<=o;)this.nextFragment();if(!this.fragment)return null;for(;;){let i=this.trees.length-1;if(i<0)return this.nextFragment(),null;let l=this.trees[i],d=this.index[i];if(d==l.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let m=l.children[d],p=this.start[i]+l.positions[d];if(p>o)return this.nextStart=p,null;if(m instanceof ui){if(p==o){if(p<this.safeFrom)return null;let v=p+m.length;if(v<=this.safeTo){let x=m.prop(Ks.lookAhead);if(!x||v+x<this.fragment.to)return m}}this.index[i]++,p+m.length>=Math.max(this.safeFrom,o)&&(this.trees.push(m),this.start.push(p),this.index.push(0))}else this.index[i]++,this.nextStart=p+m.length}}}class P1e{constructor(o,i){this.stream=i,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=o.tokenizers.map(l=>new W$)}getActions(o){let i=0,l=null,{parser:d}=o.p,{tokenizers:m}=d,p=d.stateSlot(o.state,3),v=o.curContext?o.curContext.hash:0,x=0;for(let k=0;k<m.length;k++){if(!(1<<k&p))continue;let T=m[k],R=this.tokens[k];if(!(l&&!T.fallback)&&((T.contextual||R.start!=o.pos||R.mask!=p||R.context!=v)&&(this.updateCachedToken(R,T,o),R.mask=p,R.context=v),R.lookAhead>R.end+25&&(x=Math.max(R.lookAhead,x)),R.value!=0)){let N=i;if(R.extended>-1&&(i=this.addActions(o,R.extended,R.end,i)),i=this.addActions(o,R.value,R.end,i),!T.extend&&(l=R,i>N))break}}for(;this.actions.length>i;)this.actions.pop();return x&&o.setLookAhead(x),!l&&o.pos==this.stream.end&&(l=new W$,l.value=o.p.parser.eofTerm,l.start=l.end=o.pos,i=this.addActions(o,l.value,l.end,i)),this.mainToken=l,this.actions}getMainToken(o){if(this.mainToken)return this.mainToken;let i=new W$,{pos:l,p:d}=o;return i.start=l,i.end=Math.min(l+1,d.stream.end),i.value=l==d.stream.end?d.parser.eofTerm:0,i}updateCachedToken(o,i,l){let d=this.stream.clipPos(l.pos);if(i.token(this.stream.reset(d,o),l),o.value>-1){let{parser:m}=l.p;for(let p=0;p<m.specialized.length;p++)if(m.specialized[p]==o.value){let v=m.specializers[p](this.stream.read(o.start,o.end),l);if(v>=0&&l.p.parser.dialect.allows(v>>1)){v&1?o.extended=v>>1:o.value=v>>1;break}}}else o.value=0,o.end=this.stream.clipPos(d+1)}putAction(o,i,l,d){for(let m=0;m<d;m+=3)if(this.actions[m]==o)return d;return this.actions[d++]=o,this.actions[d++]=i,this.actions[d++]=l,d}addActions(o,i,l,d){let{state:m}=o,{parser:p}=o.p,{data:v}=p;for(let x=0;x<2;x++)for(let k=p.stateSlot(m,x?2:1);;k+=3){if(v[k]==65535)if(v[k+1]==1)k=Wg(v,k+2);else{d==0&&v[k+1]==2&&(d=this.putAction(Wg(v,k+2),i,l,d));break}v[k]==i&&(d=this.putAction(Wg(v,k+1),i,l,d))}return d}}class N1e{constructor(o,i,l,d){this.parser=o,this.input=i,this.ranges=d,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new D1e(i,d),this.tokens=new P1e(o,this.stream),this.topTerm=o.top[1];let{from:m}=d[0];this.stacks=[w6.start(this,o.top[0],m)],this.fragments=l.length&&this.stream.end-m>o.bufferLength*4?new R1e(l,o.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let o=this.stacks,i=this.minStackPos,l=this.stacks=[],d,m;if(this.bigReductionCount>300&&o.length==1){let[p]=o;for(;p.forceReduce()&&p.stack.length&&p.stack[p.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let p=0;p<o.length;p++){let v=o[p];for(;;){if(this.tokens.mainToken=null,v.pos>i)l.push(v);else{if(this.advanceStack(v,l,o))continue;{d||(d=[],m=[]),d.push(v);let x=this.tokens.getMainToken(v);m.push(x.value,x.end)}}break}}if(!l.length){let p=d&&F1e(d);if(p)return this.stackToTree(p);if(this.parser.strict)throw new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&d){let p=this.stoppedAt!=null&&d[0].pos>this.stoppedAt?d[0]:this.runRecovery(d,m,l);if(p)return this.stackToTree(p.forceAll())}if(this.recovering){let p=this.recovering==1?1:this.recovering*3;if(l.length>p)for(l.sort((v,x)=>x.score-v.score);l.length>p;)l.pop();l.some(v=>v.reducePos>i)&&this.recovering--}else if(l.length>1){e:for(let p=0;p<l.length-1;p++){let v=l[p];for(let x=p+1;x<l.length;x++){let k=l[x];if(v.sameState(k)||v.buffer.length>500&&k.buffer.length>500)if((v.score-k.score||v.buffer.length-k.buffer.length)>0)l.splice(x--,1);else{l.splice(p--,1);continue e}}}l.length>12&&l.splice(12,l.length-12)}this.minStackPos=l[0].pos;for(let p=1;p<l.length;p++)l[p].pos<this.minStackPos&&(this.minStackPos=l[p].pos);return null}stopAt(o){if(this.stoppedAt!=null&&this.stoppedAt<o)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=o}advanceStack(o,i,l){let d=o.pos,{parser:m}=this,p=yd?this.stackID(o)+" -> ":"";if(this.stoppedAt!=null&&d>this.stoppedAt)return o.forceReduce()?o:null;if(this.fragments){let k=o.curContext&&o.curContext.tracker.strict,T=k?o.curContext.hash:0;for(let R=this.fragments.nodeAt(d);R;){let N=this.parser.nodeSet.types[R.type.id]==R.type?m.getGoto(o.state,R.type.id):-1;if(N>-1&&R.length&&(!k||(R.prop(Ks.contextHash)||0)==T))return o.useNode(R,N),!0;if(!(R instanceof ui)||R.children.length==0||R.positions[0]>0)break;let $=R.children[0];if($ instanceof ui&&R.positions[0]==0)R=$;else break}}let v=m.stateSlot(o.state,4);if(v>0)return o.reduce(v),!0;if(o.stack.length>=8400)for(;o.stack.length>6e3&&o.forceReduce(););let x=this.tokens.getActions(o);for(let k=0;k<x.length;){let T=x[k++],R=x[k++],N=x[k++],$=k==x.length||!l,U=$?o:o.split(),X=this.tokens.mainToken;if(U.apply(T,R,X?X.start:U.pos,N),$)return!0;U.pos>d?i.push(U):l.push(U)}return!1}advanceFully(o,i){let l=o.pos;for(;;){if(!this.advanceStack(o,null,null))return!1;if(o.pos>l)return Coe(o,i),!0}}runRecovery(o,i,l){let d=null,m=!1;for(let p=0;p<o.length;p++){let v=o[p],x=i[p<<1],k=i[(p<<1)+1],T=yd?this.stackID(v)+" -> ":"";if(v.deadEnd&&(m||(m=!0,v.restart(),this.advanceFully(v,l))))continue;let R=v.split(),N=T;for(let $=0;R.forceReduce()&&$<10&&!this.advanceFully(R,l);$++)yd&&(N=this.stackID(R)+" -> ");for(let $ of v.recoverByInsert(x))this.advanceFully($,l);this.stream.end>v.pos?(k==v.pos&&(k++,x=0),v.recoverByDelete(x,k),Coe(v,l)):(!d||d.score<v.score)&&(d=v)}return d}stackToTree(o){return o.close(),ui.build({buffer:x6.create(o),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:o.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(o){let i=(oJ||(oJ=new WeakMap)).get(o);return i||oJ.set(o,i=String.fromCodePoint(this.nextStackID++)),i+o}}function Coe(u,o){for(let i=0;i<o.length;i++){let l=o[i];if(l.pos==u.pos&&l.sameState(u)){o[i].score<u.score&&(o[i]=u);return}}o.push(u)}class B1e{constructor(o,i,l){this.source=o,this.flags=i,this.disabled=l}allows(o){return!this.disabled||this.disabled[o]==0}}class S6 extends AQ{constructor(o){if(super(),this.wrappers=[],o.version!=14)throw new RangeError(`Parser version (${o.version}) doesn't match runtime version (14)`);let i=o.nodeNames.split(" ");this.minRepeatTerm=i.length;for(let v=0;v<o.repeatNodeCount;v++)i.push("");let l=Object.keys(o.topRules).map(v=>o.topRules[v][1]),d=[];for(let v=0;v<i.length;v++)d.push([]);function m(v,x,k){d[v].push([x,x.deserialize(String(k))])}if(o.nodeProps)for(let v of o.nodeProps){let x=v[0];typeof x=="string"&&(x=Ks[x]);for(let k=1;k<v.length;){let T=v[k++];if(T>=0)m(T,x,v[k++]);else{let R=v[k+-T];for(let N=-T;N>0;N--)m(v[k++],x,R);k++}}}this.nodeSet=new _6(i.map((v,x)=>Xc.define({name:x>=this.minRepeatTerm?void 0:v,id:x,props:d[x],top:l.indexOf(x)>-1,error:x==0,skipped:o.skippedNodes&&o.skippedNodes.indexOf(x)>-1}))),o.propSources&&(this.nodeSet=this.nodeSet.extend(...o.propSources)),this.strict=!1,this.bufferLength=Ere;let p=R$(o.tokenData);this.context=o.context,this.specializerSpecs=o.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let v=0;v<this.specializerSpecs.length;v++)this.specialized[v]=this.specializerSpecs[v].term;this.specializers=this.specializerSpecs.map(koe),this.states=R$(o.states,Uint32Array),this.data=R$(o.stateData),this.goto=R$(o.goto),this.maxTerm=o.maxTerm,this.tokenizers=o.tokenizers.map(v=>typeof v=="number"?new d2(p,v):v),this.topRules=o.topRules,this.dialects=o.dialects||{},this.dynamicPrecedences=o.dynamicPrecedences||null,this.tokenPrecTable=o.tokenPrec,this.termNames=o.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(o,i,l){let d=new N1e(this,o,i,l);for(let m of this.wrappers)d=m(d,o,i,l);return d}getGoto(o,i,l=!1){let d=this.goto;if(i>=d[0])return-1;for(let m=d[i+1];;){let p=d[m++],v=p&1,x=d[m++];if(v&&l)return x;for(let k=m+(p>>1);m<k;m++)if(d[m]==o)return x;if(v)return-1}}hasAction(o,i){let l=this.data;for(let d=0;d<2;d++)for(let m=this.stateSlot(o,d?2:1),p;;m+=3){if((p=l[m])==65535)if(l[m+1]==1)p=l[m=Wg(l,m+2)];else{if(l[m+1]==2)return Wg(l,m+2);break}if(p==i||p==0)return Wg(l,m+1)}return 0}stateSlot(o,i){return this.states[o*6+i]}stateFlag(o,i){return(this.stateSlot(o,0)&i)>0}validAction(o,i){return!!this.allActions(o,l=>l==i?!0:null)}allActions(o,i){let l=this.stateSlot(o,4),d=l?i(l):void 0;for(let m=this.stateSlot(o,1);d==null;m+=3){if(this.data[m]==65535)if(this.data[m+1]==1)m=Wg(this.data,m+2);else break;d=i(Wg(this.data,m+1))}return d}nextStates(o){let i=[];for(let l=this.stateSlot(o,1);;l+=3){if(this.data[l]==65535)if(this.data[l+1]==1)l=Wg(this.data,l+2);else break;if(!(this.data[l+2]&1)){let d=this.data[l+1];i.some((m,p)=>p&1&&m==d)||i.push(this.data[l],d)}}return i}configure(o){let i=Object.assign(Object.create(S6.prototype),this);if(o.props&&(i.nodeSet=this.nodeSet.extend(...o.props)),o.top){let l=this.topRules[o.top];if(!l)throw new RangeError(`Invalid top rule name ${o.top}`);i.top=l}return o.tokenizers&&(i.tokenizers=this.tokenizers.map(l=>{let d=o.tokenizers.find(m=>m.from==l);return d?d.to:l})),o.specializers&&(i.specializers=this.specializers.slice(),i.specializerSpecs=this.specializerSpecs.map((l,d)=>{let m=o.specializers.find(v=>v.from==l.external);if(!m)return l;let p=Object.assign(Object.assign({},l),{external:m.to});return i.specializers[d]=koe(p),p})),o.contextTracker&&(i.context=o.contextTracker),o.dialect&&(i.dialect=this.parseDialect(o.dialect)),o.strict!=null&&(i.strict=o.strict),o.wrap&&(i.wrappers=i.wrappers.concat(o.wrap)),o.bufferLength!=null&&(i.bufferLength=o.bufferLength),i}hasWrappers(){return this.wrappers.length>0}getName(o){return this.termNames?this.termNames[o]:String(o<=this.maxNode&&this.nodeSet.types[o].name||o)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(o){let i=this.dynamicPrecedences;return i==null?0:i[o]||0}parseDialect(o){let i=Object.keys(this.dialects),l=i.map(()=>!1);if(o)for(let m of o.split(" ")){let p=i.indexOf(m);p>=0&&(l[p]=!0)}let d=null;for(let m=0;m<i.length;m++)if(!l[m])for(let p=this.dialects[i[m]],v;(v=this.data[p++])!=65535;)(d||(d=new Uint8Array(this.maxTerm+1)))[v]=1;return new B1e(o,l,d)}static deserialize(o){return new S6(o)}}function Wg(u,o){return u[o]|u[o+1]<<16}function F1e(u){let o=null;for(let i of u){let l=i.p.stoppedAt;(i.pos==i.p.stream.end||l!=null&&i.pos>l)&&i.p.parser.stateFlag(i.state,2)&&(!o||o.score<i.score)&&(o=i)}return o}function koe(u){if(u.external){let o=u.extend?1:0;return(i,l)=>u.external(i,l)<<1|o}return u.get}const I1e=_re({String:It.string,Number:It.number,"True False":It.bool,PropertyName:It.propertyName,Null:It.null,",":It.separator,"[ ]":It.squareBracket,"{ }":It.brace}),L1e=S6.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[I1e],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),$1e=l6.define({name:"json",parser:L1e.configure({props:[Fre.add({Object:Wne({except:/^\s*\}/}),Array:Wne({except:/^\s*\]/})}),Lre.add({"Object Array":jhe})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function H1e(){return new Nhe($1e)}const V1e={class:"h-full"},z1e=Ai({__name:"CodeEditor",props:{value:{type:[Object,String]},mode:{type:String,default:t2.JSON,validator(u){return Object.values(t2).includes(u)}},autoFormat:{type:Boolean,default:!0}},emits:["change","update:value","format-error"],setup(u,{emit:o}){const i=u,l=ko("");Hae(()=>{l.value=i.value});const d=o,p=Poe().getDarkMode;let v=[];switch(p==="dark"?v.push(k1e):v.push(x1e),i.mode){case t2.YAML:{v.push(OQ.define(T1e));break}case t2.JSON:v.push(H1e())}function x(k){i.mode==t2.JSON&&(k=k.replace(/(\r\n|\n|\r)/gm,"")),d("update:value",k),d("change",k)}return(k,T)=>(Io(),ki("div",V1e,[Yn(gt(v1e),{"model-value":l.value,"onUpdate:modelValue":T[0]||(T[0]=R=>l.value=R),onChange:x,extensions:gt(v),autofocus:!0,"indent-with-tab":!0,"tab-size":2},null,8,["model-value","extensions"])]))}}),U1e=C6(z1e);var aae={exports:{}};(function(u){(function(){var o=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},i=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},l=function(e,n){var s=Array.prototype.slice.call(e);return s.sort(n)},d=function(e,n){return m(function(s,a){return e.eq(n(s),n(a))})},m=function(e){return{eq:e}},p=m(function(e,n){return e===n}),v=p,x=function(e){return m(function(n,s){if(n.length!==s.length)return!1;for(var a=n.length,f=0;f<a;f++)if(!e.eq(n[f],s[f]))return!1;return!0})},k=function(e,n){return d(x(e),function(s){return l(s,n)})},T=function(e){return m(function(n,s){var a=Object.keys(n),f=Object.keys(s);if(!k(v).eq(a,f))return!1;for(var g=a.length,y=0;y<g;y++){var C=a[y];if(!e.eq(n[C],s[C]))return!1}return!0})},R=m(function(e,n){if(e===n)return!0;var s=o(e),a=o(n);return s!==a?!1:i(s)?e===n:s==="array"?x(R).eq(e,n):s==="object"?T(R).eq(e,n):!1});const N=Object.getPrototypeOf,$=(e,n,s)=>{var a;return s(e,n.prototype)?!0:((a=e.constructor)===null||a===void 0?void 0:a.name)===n.name},U=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&$(e,String,(s,a)=>a.isPrototypeOf(s))?"string":n},X=e=>n=>U(n)===e,J=e=>n=>typeof n===e,G=e=>n=>e===n,le=(e,n)=>be(e)&&$(e,n,(s,a)=>N(s)===a),Z=X("string"),be=X("object"),He=e=>le(e,Object),Re=X("array"),K=G(null),Ie=J("boolean"),$e=G(void 0),Ue=e=>e==null,ae=e=>!Ue(e),Oe=J("function"),ht=J("number"),ne=(e,n)=>{if(Re(e)){for(let s=0,a=e.length;s<a;++s)if(!n(e[s]))return!1;return!0}return!1},ge=()=>{},O=(e,n)=>(...s)=>e(n.apply(null,s)),Ke=(e,n)=>s=>e(n(s)),he=e=>()=>e,at=e=>e,qt=(e,n)=>e===n;function Pe(e,...n){return(...s)=>{const a=n.concat(s);return e.apply(null,a)}}const We=e=>n=>!e(n),yt=e=>()=>{throw new Error(e)},Be=e=>e(),wt=e=>{e()},ce=he(!1),Ze=he(!0);class V{constructor(n,s){this.tag=n,this.value=s}static some(n){return new V(!0,n)}static none(){return V.singletonNone}fold(n,s){return this.tag?s(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?V.some(n(this.value)):V.none()}bind(n){return this.tag?n(this.value):V.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:V.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n!=null?n:"Called getOrDie on None")}static from(n){return ae(n)?V.some(n):V.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}V.singletonNone=new V(!1);const kn=Array.prototype.slice,cn=Array.prototype.indexOf,no=Array.prototype.push,Do=(e,n)=>cn.call(e,n),Cs=(e,n)=>{const s=Do(e,n);return s===-1?V.none():V.some(s)},Je=(e,n)=>Do(e,n)>-1,Bt=(e,n)=>{for(let s=0,a=e.length;s<a;s++){const f=e[s];if(n(f,s))return!0}return!1},tt=(e,n)=>{const s=e.length,a=new Array(s);for(let f=0;f<s;f++){const g=e[f];a[f]=n(g,f)}return a},ue=(e,n)=>{for(let s=0,a=e.length;s<a;s++){const f=e[s];n(f,s)}},xe=(e,n)=>{for(let s=e.length-1;s>=0;s--){const a=e[s];n(a,s)}},Ne=(e,n)=>{const s=[],a=[];for(let f=0,g=e.length;f<g;f++){const y=e[f];(n(y,f)?s:a).push(y)}return{pass:s,fail:a}},Me=(e,n)=>{const s=[];for(let a=0,f=e.length;a<f;a++){const g=e[a];n(g,a)&&s.push(g)}return s},kt=(e,n,s)=>(xe(e,(a,f)=>{s=n(s,a,f)}),s),ve=(e,n,s)=>(ue(e,(a,f)=>{s=n(s,a,f)}),s),je=(e,n,s)=>{for(let a=0,f=e.length;a<f;a++){const g=e[a];if(n(g,a))return V.some(g);if(s(g,a))break}return V.none()},ot=(e,n)=>je(e,n,ce),en=(e,n)=>{for(let s=0,a=e.length;s<a;s++){const f=e[s];if(n(f,s))return V.some(s)}return V.none()},Wn=e=>{const n=[];for(let s=0,a=e.length;s<a;++s){if(!Re(e[s]))throw new Error("Arr.flatten item "+s+" was not an array, input: "+e);no.apply(n,e[s])}return n},On=(e,n)=>Wn(tt(e,n)),ho=(e,n)=>{for(let s=0,a=e.length;s<a;++s){const f=e[s];if(n(f,s)!==!0)return!1}return!0},Kn=e=>{const n=kn.call(e,0);return n.reverse(),n},ls=(e,n)=>Me(e,s=>!Je(n,s)),Ye=(e,n)=>{const s={};for(let a=0,f=e.length;a<f;a++){const g=e[a];s[String(g)]=n(g,a)}return s},pt=(e,n)=>{const s=kn.call(e,0);return s.sort(n),s},Rt=(e,n)=>n>=0&&n<e.length?V.some(e[n]):V.none(),Wt=e=>Rt(e,0),bn=e=>Rt(e,e.length-1),oo=Oe(Array.from)?Array.from:e=>kn.call(e),ao=(e,n)=>{for(let s=0;s<e.length;s++){const a=n(e[s],s);if(a.isSome())return a}return V.none()},Qo=(e,n)=>{const s=[],a=Oe(n)?f=>Bt(s,g=>n(g,f)):f=>Je(s,f);for(let f=0,g=e.length;f<g;f++){const y=e[f];a(y)||s.push(y)}return s},Fo=Object.keys,cs=Object.hasOwnProperty,$t=(e,n)=>{const s=Fo(e);for(let a=0,f=s.length;a<f;a++){const g=s[a],y=e[g];n(y,g)}},xo=(e,n)=>Qs(e,(s,a)=>({k:a,v:n(s,a)})),Qs=(e,n)=>{const s={};return $t(e,(a,f)=>{const g=n(a,f);s[g.k]=g.v}),s},Sr=e=>(n,s)=>{e[s]=n},Gr=(e,n,s,a)=>{$t(e,(f,g)=>{(n(f,g)?s:a)(f,g)})},pr=(e,n)=>{const s={},a={};return Gr(e,n,Sr(s),Sr(a)),{t:s,f:a}},di=(e,n)=>{const s={};return Gr(e,n,Sr(s),ge),s},Cr=(e,n)=>{const s=[];return $t(e,(a,f)=>{s.push(n(a,f))}),s},fi=e=>Cr(e,at),us=(e,n)=>Bn(e,n)?V.from(e[n]):V.none(),Bn=(e,n)=>cs.call(e,n),hi=(e,n)=>Bn(e,n)&&e[n]!==void 0&&e[n]!==null,Ge=(e,n,s=R)=>T(s).eq(e,n),dt=e=>{const n={};return ue(e,s=>{n[s]={}}),Fo(n)},tn=e=>e.length!==void 0,In=Array.isArray,go=e=>{if(In(e))return e;{const n=[];for(let s=0,a=e.length;s<a;s++)n[s]=e[s];return n}},Ys=(e,n,s)=>{if(!e)return!1;if(s=s||e,tn(e)){for(let a=0,f=e.length;a<f;a++)if(n.call(s,e[a],a,e)===!1)return!1}else for(const a in e)if(Bn(e,a)&&n.call(s,e[a],a,e)===!1)return!1;return!0},Hr=(e,n)=>{const s=[];return Ys(e,(a,f)=>{s.push(n(a,f,e))}),s},br=(e,n)=>{const s=[];return Ys(e,(a,f)=>{(!n||n(a,f,e))&&s.push(a)}),s},_r=(e,n)=>{if(e){for(let s=0,a=e.length;s<a;s++)if(e[s]===n)return s}return-1},ke=(e,n,s,a)=>{let f=$e(s)?e[0]:s;for(let g=0;g<e.length;g++)f=n.call(a,f,e[g],g);return f},Ae=(e,n,s)=>{for(let a=0,f=e.length;a<f;a++)if(n.call(s,e[a],a,e))return a;return-1},ct=e=>e[e.length-1],xt=e=>{let n=!1,s;return(...a)=>(n||(n=!0,s=e.apply(null,a)),s)},An=(e,n,s,a)=>{const f=e.isiOS()&&/ipad/i.test(s)===!0,g=e.isiOS()&&!f,y=e.isiOS()||e.isAndroid(),C=y||a("(pointer:coarse)"),A=f||!g&&y&&a("(min-device-width:768px)"),M=g||y&&!A,I=n.isSafari()&&e.isiOS()&&/safari/i.test(s)===!1,L=!M&&!A&&!I;return{isiPad:he(f),isiPhone:he(g),isTablet:he(A),isPhone:he(M),isTouch:he(C),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:he(I),isDesktop:he(L)}},Pn=(e,n)=>{for(let s=0;s<e.length;s++){const a=e[s];if(a.test(n))return a}},_o=(e,n)=>{const s=Pn(e,n);if(!s)return{major:0,minor:0};const a=f=>Number(n.replace(s,"$"+f));return Lo(a(1),a(2))},Ws=(e,n)=>{const s=String(n).toLowerCase();return e.length===0?Tt():_o(e,s)},Tt=()=>Lo(0,0),Lo=(e,n)=>({major:e,minor:n}),Se={nu:Lo,detect:Ws,unknown:Tt},Ee=(e,n)=>ao(n.brands,s=>{const a=s.brand.toLowerCase();return ot(e,f=>{var g;return a===((g=f.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(f=>({current:f.name,version:Se.nu(parseInt(s.version,10),0)}))}),Dt=(e,n)=>{const s=String(n).toLowerCase();return ot(e,a=>a.search(s))},nn=(e,n)=>Dt(e,n).map(s=>{const a=Se.detect(s.versionRegexes,n);return{current:s.name,version:a}}),an=(e,n)=>Dt(e,n).map(s=>{const a=Se.detect(s.versionRegexes,n);return{current:s.name,version:a}}),Dn=(e,n)=>e.substring(n),Mn=(e,n,s)=>n===""||e.length>=n.length&&e.substr(s,s+n.length)===n,En=(e,n)=>Vn(e,n)?Dn(e,n.length):e,$n=(e,n,s=0,a)=>{const f=e.indexOf(n,s);return f!==-1?$e(a)?!0:f+n.length<=a:!1},Vn=(e,n)=>Mn(e,n,0),Xo=(e,n)=>Mn(e,n,e.length-n.length),Ts=e=>n=>n.replace(e,""),Ii=Ts(/^\s+|\s+$/g),Oa=Ts(/^\s+/g),Yl=Ts(/\s+$/g),Po=e=>e.length>0,Ho=e=>!Po(e),ds=(e,n)=>n<=0?"":new Array(n+1).join(e),ji=(e,n=10)=>{const s=parseInt(e,n);return isNaN(s)?V.none():V.some(s)},Li=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Mr=e=>n=>$n(n,e),ll=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>$n(e,"edge/")&&$n(e,"chrome")&&$n(e,"safari")&&$n(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Li],search:e=>$n(e,"chrome")&&!$n(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>$n(e,"msie")||$n(e,"trident")},{name:"Opera",versionRegexes:[Li,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Mr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Mr("firefox")},{name:"Safari",versionRegexes:[Li,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>($n(e,"safari")||$n(e,"mobile/"))&&$n(e,"applewebkit")}],Ei=[{name:"Windows",search:Mr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>$n(e,"iphone")||$n(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Mr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Mr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Mr("linux"),versionRegexes:[]},{name:"Solaris",search:Mr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Mr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Mr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ec={browsers:he(ll),oses:he(Ei)},bs="Edge",ma="Chromium",Zi="IE",Za="Opera",oa="Firefox",Da="Safari",mi=()=>Tc({current:void 0,version:Se.unknown()}),Tc=e=>{const n=e.current,s=e.version,a=f=>()=>n===f;return{current:n,version:s,isEdge:a(bs),isChromium:a(ma),isIE:a(Zi),isOpera:a(Za),isFirefox:a(oa),isSafari:a(Da)}},ga={unknown:mi,nu:Tc,edge:he(bs),chromium:he(ma),ie:he(Zi),opera:he(Za),firefox:he(oa),safari:he(Da)},Jc="Windows",pa="iOS",Xl="Android",$i="Linux",cl="macOS",Oc="Solaris",Qc="FreeBSD",Ad="ChromeOS",Q=()=>Te({current:void 0,version:Se.unknown()}),Te=e=>{const n=e.current,s=e.version,a=f=>()=>n===f;return{current:n,version:s,isWindows:a(Jc),isiOS:a(pa),isAndroid:a(Xl),isMacOS:a(cl),isLinux:a($i),isSolaris:a(Oc),isFreeBSD:a(Qc),isChromeOS:a(Ad)}},qe={unknown:Q,nu:Te,windows:he(Jc),ios:he(pa),android:he(Xl),linux:he($i),macos:he(cl),solaris:he(Oc),freebsd:he(Qc),chromeos:he(Ad)},Ut={detect:(e,n,s)=>{const a=Ec.browsers(),f=Ec.oses(),g=n.bind(A=>Ee(a,A)).orThunk(()=>nn(a,e)).fold(ga.unknown,ga.nu),y=an(f,e).fold(qe.unknown,qe.nu),C=An(y,g,e,s);return{browser:g,os:y,deviceType:C}}},jn=e=>window.matchMedia(e).matches;let Os=xt(()=>Ut.detect(navigator.userAgent,V.from(navigator.userAgentData),jn));const Ms=()=>Os(),vs=navigator.userAgent,Xs=Ms(),jo=Xs.browser,fr=Xs.os,Ti=Xs.deviceType,Ru=vs.indexOf("Windows Phone")!==-1,sn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:jo.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!jo.isIE(),windowsPhone:Ru,browser:{current:jo.current,version:jo.version,isChromium:jo.isChromium,isEdge:jo.isEdge,isFirefox:jo.isFirefox,isIE:jo.isIE,isOpera:jo.isOpera,isSafari:jo.isSafari},os:{current:fr.current,version:fr.version,isAndroid:fr.isAndroid,isChromeOS:fr.isChromeOS,isFreeBSD:fr.isFreeBSD,isiOS:fr.isiOS,isLinux:fr.isLinux,isMacOS:fr.isMacOS,isSolaris:fr.isSolaris,isWindows:fr.isWindows},deviceType:{isDesktop:Ti.isDesktop,isiPad:Ti.isiPad,isiPhone:Ti.isiPhone,isPhone:Ti.isPhone,isTablet:Ti.isTablet,isTouch:Ti.isTouch,isWebView:Ti.isWebView}},Pu=/^\s*|\s*$/g,Vr=e=>Ue(e)?"":(""+e).replace(Pu,""),z=(e,n)=>n?n==="array"&&In(e)?!0:typeof e===n:e!==void 0,se=(e,n,s={})=>{const a=Z(e)?e.split(n||","):e||[];let f=a.length;for(;f--;)s[a[f]]={};return s},pe=Bn,lt=(e,...n)=>{for(let s=0;s<n.length;s++){const a=n[s];for(const f in a)if(Bn(a,f)){const g=a[f];g!==void 0&&(e[f]=g)}}return e},un=function(e,n,s,a){a=a||this,e&&(s&&(e=e[s]),Ys(e,(f,g)=>n.call(a,f,g,s)===!1?!1:(un(f,n,s,a),!0)))},Lt={trim:Vr,isArray:In,is:z,toArray:go,makeMap:se,each:Ys,map:Hr,grep:br,inArray:_r,hasOwn:pe,extend:lt,walk:un,resolve:(e,n=window)=>{const s=e.split(".");for(let a=0,f=s.length;a<f&&(n=n[s[a]],!!n);a++);return n},explode:(e,n)=>Re(e)?e:e===""?[]:Hr(e.split(n||","),Vr),_addCacheSuffix:e=>{const n=sn.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},er=(e,n,s=qt)=>e.exists(a=>s(a,n)),ba=(e,n,s=qt)=>Kr(e,n,s).getOr(e.isNone()&&n.isNone()),js=e=>{const n=[],s=a=>{n.push(a)};for(let a=0;a<e.length;a++)e[a].each(s);return n},Kr=(e,n,s)=>e.isSome()&&n.isSome()?V.some(s(e.getOrDie(),n.getOrDie())):V.none(),Ed=(e,n,s,a)=>e.isSome()&&n.isSome()&&s.isSome()?V.some(a(e.getOrDie(),n.getOrDie(),s.getOrDie())):V.none(),es=(e,n)=>e?V.some(n):V.none(),ul=typeof window!="undefined"?window:Function("return this;")(),qa=(e,n)=>{let s=n!=null?n:ul;for(let a=0;a<e.length&&s!==void 0&&s!==null;++a)s=s[e[a]];return s},Nu=(e,n)=>{const s=e.split(".");return qa(s,n)},ir=(e,n)=>Nu(e,n),Bu=(e,n)=>{const s=ir(e,n);if(s==null)throw new Error(e+" not available on this browser");return s},Xg=Object.getPrototypeOf,Jg=e=>Bu("HTMLElement",e),hr=e=>{const n=Nu("ownerDocument.defaultView",e);return be(e)&&(Jg(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Xg(e).constructor.name))},Em=8,Td=9,Ga=11,dl=1,kf=3,ts=e=>e.dom.nodeName.toLowerCase(),ee=e=>e.dom.nodeType,me=e=>n=>ee(n)===e,st=e=>ee(e)===Em||ts(e)==="#comment",At=e=>gn(e)&&hr(e.dom),gn=me(dl),Ao=me(kf),kr=me(Td),va=me(Ga),zr=e=>n=>gn(n)&&ts(n)===e,sa=(e,n,s)=>{if(Z(s)||Ie(s)||ht(s))e.setAttribute(n,s+"");else throw new Error("Attribute value was not simple")},Js=(e,n,s)=>{sa(e.dom,n,s)},Ur=(e,n)=>{const s=e.dom;$t(n,(a,f)=>{sa(s,f,a)})},gi=(e,n)=>{const s=e.dom.getAttribute(n);return s===null?void 0:s},_a=(e,n)=>V.from(gi(e,n)),Od=(e,n)=>{const s=e.dom;return s&&s.hasAttribute?s.hasAttribute(n):!1},Ir=(e,n)=>{e.dom.removeAttribute(n)},Yr=e=>{const n=e.dom.attributes;return n==null||n.length===0},Jl=e=>ve(e.dom.attributes,(n,s)=>(n[s.name]=s.value,n),{}),Dd=(e,n)=>{const s=gi(e,n);return s===void 0||s===""?[]:s.split(" ")},Ey=(e,n,s)=>{const f=Dd(e,n).concat([s]);return Js(e,n,f.join(" ")),!0},Ty=(e,n,s)=>{const a=Me(Dd(e,n),f=>f!==s);return a.length>0?Js(e,n,a.join(" ")):Ir(e,n),!1},yh=e=>e.dom.classList!==void 0,c0=e=>Dd(e,"class"),u0=(e,n)=>Ey(e,"class",n),Qg=(e,n)=>Ty(e,"class",n),Oy=(e,n)=>Je(c0(e),n)?Qg(e,n):u0(e,n),Af=(e,n)=>{yh(e)?e.dom.classList.add(n):u0(e,n)},d0=e=>{(yh(e)?e.dom.classList:c0(e)).length===0&&Ir(e,"class")},Fu=(e,n)=>{yh(e)?e.dom.classList.remove(n):Qg(e,n),d0(e)},Dy=(e,n)=>{const s=yh(e)?e.dom.classList.toggle(n):Oy(e,n);return d0(e),s},ep=(e,n)=>yh(e)&&e.dom.classList.contains(n),_y=(e,n)=>{const a=(n||document).createElement("div");if(a.innerHTML=e,!a.hasChildNodes()||a.childNodes.length>1){const f="HTML does not have a single root node";throw new Error(f)}return wh(a.childNodes[0])},My=(e,n)=>{const a=(n||document).createElement(e);return wh(a)},Ry=(e,n)=>{const a=(n||document).createTextNode(e);return wh(a)},wh=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ye={fromHtml:_y,fromTag:My,fromText:Ry,fromDom:wh,fromPoint:(e,n,s)=>V.from(e.dom.elementFromPoint(n,s)).map(wh)},tp=(e,n)=>{const s=[],a=g=>(s.push(g),n(g));let f=n(e);do f=f.bind(a);while(f.isSome());return s},Ol=(e,n)=>{const s=e.dom;if(s.nodeType!==dl)return!1;{const a=s;if(a.matches!==void 0)return a.matches(n);if(a.msMatchesSelector!==void 0)return a.msMatchesSelector(n);if(a.webkitMatchesSelector!==void 0)return a.webkitMatchesSelector(n);if(a.mozMatchesSelector!==void 0)return a.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Tm=e=>e.nodeType!==dl&&e.nodeType!==Td&&e.nodeType!==Ga||e.childElementCount===0,f0=(e,n)=>{const s=n===void 0?document:n.dom;return Tm(s)?[]:tt(s.querySelectorAll(e),ye.fromDom)},E2=(e,n)=>{const s=n===void 0?document:n.dom;return Tm(s)?V.none():V.from(s.querySelector(e)).map(ye.fromDom)},ys=(e,n)=>e.dom===n.dom,Iu=(e,n)=>{const s=e.dom,a=n.dom;return s===a?!1:s.contains(a)},eu=e=>ye.fromDom(e.dom.ownerDocument),Lu=e=>kr(e)?e:eu(e),Ef=e=>ye.fromDom(Lu(e).dom.documentElement),tu=e=>ye.fromDom(Lu(e).dom.defaultView),ra=e=>V.from(e.dom.parentNode).map(ye.fromDom),$u=e=>V.from(e.dom.parentElement).map(ye.fromDom),Py=(e,n)=>{const s=Oe(n)?n:ce;let a=e.dom;const f=[];for(;a.parentNode!==null&&a.parentNode!==void 0;){const g=a.parentNode,y=ye.fromDom(g);if(f.push(y),s(y)===!0)break;a=g}return f},Ny=e=>{const n=s=>Me(s,a=>!ys(e,a));return ra(e).map(pi).map(n).getOr([])},Dc=e=>V.from(e.dom.previousSibling).map(ye.fromDom),nu=e=>V.from(e.dom.nextSibling).map(ye.fromDom),By=e=>Kn(tp(e,Dc)),Ma=e=>tp(e,nu),pi=e=>tt(e.dom.childNodes,ye.fromDom),Tf=(e,n)=>{const s=e.dom.childNodes;return V.from(s[n]).map(ye.fromDom)},Om=e=>Tf(e,0),_c=e=>Tf(e,e.dom.childNodes.length-1),Ra=e=>e.dom.childNodes.length,Fy=e=>e.dom.hasChildNodes(),T2=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return ye.fromDom(n)},np=e=>va(e)&&ae(e.dom.host),op=Oe(Element.prototype.attachShadow)&&Oe(Node.prototype.getRootNode),Dm=he(op),Hu=op?e=>ye.fromDom(e.dom.getRootNode()):Lu,h0=e=>np(e)?e:T2(Lu(e)),pM=e=>np(e)?e:ye.fromDom(Lu(e).dom.body),O2=e=>{const n=Hu(e);return np(n)?V.some(n):V.none()},D2=e=>ye.fromDom(e.dom.host),xh=e=>{if(Dm()&&ae(e.target)){const n=ye.fromDom(e.target);if(gn(n)&&Iy(n)&&e.composed&&e.composedPath){const s=e.composedPath();if(s)return Wt(s)}}return V.from(e.target)},Iy=e=>ae(e.dom.shadowRoot),Sh=e=>{const n=Ao(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const s=n.ownerDocument;return O2(ye.fromDom(n)).fold(()=>s.body.contains(n),Ke(Sh,D2))};var Xr=(e,n,s,a,f)=>e(s,a)?V.some(s):Oe(f)&&f(s)?V.none():n(s,a,f);const Ar=(e,n,s)=>{let a=e.dom;const f=Oe(s)?s:ce;for(;a.parentNode;){a=a.parentNode;const g=ye.fromDom(a);if(n(g))return V.some(g);if(f(g))break}return V.none()},fl=(e,n,s)=>Xr((f,g)=>g(f),Ar,e,n,s),m0=(e,n)=>{const s=e.dom;return s.parentNode?_2(ye.fromDom(s.parentNode),a=>!ys(e,a)&&n(a)):V.none()},_2=(e,n)=>{const s=f=>n(ye.fromDom(f));return ot(e.dom.childNodes,s).map(ye.fromDom)},qi=(e,n)=>{const s=a=>{for(let f=0;f<a.childNodes.length;f++){const g=ye.fromDom(a.childNodes[f]);if(n(g))return V.some(g);const y=s(a.childNodes[f]);if(y.isSome())return y}return V.none()};return s(e.dom)},Of=(e,n,s)=>Ar(e,a=>Ol(a,n),s),Ch=(e,n)=>E2(n,e),_d=(e,n,s)=>Xr((f,g)=>Ol(f,g),Of,e,n,s),bM=e=>_d(e,"[contenteditable]"),Eo=(e,n=!1)=>Sh(e)?e.dom.isContentEditable:bM(e).fold(he(n),s=>Dl(s)==="true"),Dl=e=>e.dom.contentEditable,Df=e=>e.style!==void 0&&Oe(e.style.getPropertyValue),Ly=(e,n,s)=>{if(!Z(s))throw new Error("CSS value must be a string: "+s);Df(e)&&e.style.setProperty(n,s)},$y=(e,n)=>{Df(e)&&e.style.removeProperty(n)},Hy=(e,n,s)=>{const a=e.dom;Ly(a,n,s)},kh=(e,n)=>{const s=e.dom;$t(n,(a,f)=>{Ly(s,f,a)})},ou=(e,n)=>{const s=e.dom,f=window.getComputedStyle(s).getPropertyValue(n);return f===""&&!Sh(e)?g0(s,n):f},g0=(e,n)=>Df(e)?e.style.getPropertyValue(n):"",_m=(e,n)=>{const s=e.dom,a=g0(s,n);return V.from(a).filter(f=>f.length>0)},p0=e=>{const n={},s=e.dom;if(Df(s))for(let a=0;a<s.style.length;a++){const f=s.style.item(a);n[f]=s.style[f]}return n},b0=(e,n)=>{const s=e.dom;$y(s,n),er(_a(e,"style").map(Ii),"")&&Ir(e,"style")},Wr=e=>e.dom.offsetWidth,Pa=(e,n)=>{ra(e).each(a=>{a.dom.insertBefore(n.dom,e.dom)})},Vu=(e,n)=>{nu(e).fold(()=>{ra(e).each(f=>{Jr(f,n)})},a=>{Pa(a,n)})},Mm=(e,n)=>{Om(e).fold(()=>{Jr(e,n)},a=>{e.dom.insertBefore(n.dom,a.dom)})},Jr=(e,n)=>{e.dom.appendChild(n.dom)},Vy=(e,n)=>{Pa(e,n),Jr(n,e)},zy=(e,n)=>{ue(n,(s,a)=>{const f=a===0?e:n[a-1];Vu(f,s)})},Ls=(e,n)=>{ue(n,s=>{Jr(e,s)})},Md=e=>{e.dom.textContent="",ue(pi(e),n=>{ks(n)})},ks=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Ql=e=>{const n=pi(e);n.length>0&&zy(e,n),ks(e)},Rm=(e,n)=>{const a=(n||document).createElement("div");return a.innerHTML=e,pi(ye.fromDom(a))},Ah=e=>tt(e,ye.fromDom),sp=e=>e.dom.innerHTML,rp=(e,n)=>{const a=eu(e).dom,f=ye.fromDom(a.createDocumentFragment()),g=Rm(n,a);Ls(f,g),Md(e),Jr(e,f)},M2=e=>{const n=ye.fromTag("div"),s=ye.fromDom(e.dom.cloneNode(!0));return Jr(n,s),sp(n)},Uy=(e,n,s,a,f,g,y)=>({target:e,x:n,y:s,stop:a,prevent:f,kill:g,raw:y}),R2=e=>{const n=ye.fromDom(xh(e).getOr(e.target)),s=()=>e.stopPropagation(),a=()=>e.preventDefault(),f=O(a,s);return Uy(n,e.clientX,e.clientY,s,a,f,e)},vM=(e,n)=>s=>{e(s)&&n(R2(s))},Wy=(e,n,s,a,f)=>{const g=vM(s,a);return e.dom.addEventListener(n,g,f),{unbind:Pe(P2,e,n,g,f)}},v0=(e,n,s,a)=>Wy(e,n,s,a,!1),P2=(e,n,s,a)=>{e.dom.removeEventListener(n,s,a)},_=(e,n)=>({left:e,top:n,translate:(a,f)=>_(e+a,n+f)}),F=_,q=e=>{const n=e.getBoundingClientRect();return F(n.left,n.top)},we=(e,n)=>e!==void 0?e:n!==void 0?n:0,De=e=>{const n=e.dom.ownerDocument,s=n.body,a=n.defaultView,f=n.documentElement;if(s===e.dom)return F(s.offsetLeft,s.offsetTop);const g=we(a==null?void 0:a.pageYOffset,f.scrollTop),y=we(a==null?void 0:a.pageXOffset,f.scrollLeft),C=we(f.clientTop,s.clientTop),A=we(f.clientLeft,s.clientLeft);return Ht(e).translate(y-A,g-C)},Ht=e=>{const n=e.dom,a=n.ownerDocument.body;return a===n?F(a.offsetLeft,a.offsetTop):Sh(e)?q(n):F(0,0)},Nn=e=>{const n=e!==void 0?e.dom:document,s=n.body.scrollLeft||n.documentElement.scrollLeft,a=n.body.scrollTop||n.documentElement.scrollTop;return F(s,a)},vo=(e,n,s)=>{const f=(s!==void 0?s.dom:document).defaultView;f&&f.scrollTo(e,n)},yo=(e,n)=>{Ms().browser.isSafari()&&Oe(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Qn=e=>{const n=e===void 0?window:e;return Ms().browser.isFirefox()?V.none():V.from(n.visualViewport)},Er=(e,n,s,a)=>({x:e,y:n,width:s,height:a,right:e+s,bottom:n+a}),Gi=e=>{const n=e===void 0?window:e,s=n.document,a=Nn(ye.fromDom(s));return Qn(n).fold(()=>{const f=n.document.documentElement,g=f.clientWidth,y=f.clientHeight;return Er(a.left,a.top,g,y)},f=>Er(Math.max(f.pageLeft,a.left),Math.max(f.pageTop,a.top),f.width,f.height))},ec=(e,n)=>Me(pi(e),n),Rd=(e,n)=>{let s=[];return ue(pi(e),a=>{n(a)&&(s=s.concat([a])),s=s.concat(Rd(a,n))}),s},ya=(e,n)=>f0(n,e),yM=(e,n,s)=>Of(e,n,s).isSome();class tr{constructor(n,s){this.node=n,this.rootNode=s,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,s,a,f){if(n){if(!f&&n[s])return n[s];if(n!==this.rootNode){let g=n[a];if(g)return g;for(let y=n.parentNode;y&&y!==this.rootNode;y=y.parentNode)if(g=y[a],g)return g}}}findPreviousNode(n,s){if(n){const a=n.previousSibling;if(this.rootNode&&a===this.rootNode)return;if(a){if(!s){for(let g=a.lastChild;g;g=g.lastChild)if(!g.lastChild)return g}return a}const f=n.parentNode;if(f&&f!==this.rootNode)return f}}}const Ln=e=>n=>!!n&&n.nodeType===e,zu=e=>!!e&&!Object.getPrototypeOf(e),wn=Ln(1),_f=e=>wn(e)&&At(ye.fromDom(e)),$6=e=>wn(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Pm=e=>{const n=e.toLowerCase();return s=>ae(s)&&s.nodeName.toLowerCase()===n},Ki=e=>{const n=e.map(s=>s.toLowerCase());return s=>{if(s&&s.nodeName){const a=s.nodeName.toLowerCase();return Je(n,a)}return!1}},Nm=(e,n)=>{const s=n.toLowerCase().split(" ");return a=>{if(wn(a)){const f=a.ownerDocument.defaultView;if(f)for(let g=0;g<s.length;g++){const y=f.getComputedStyle(a,null);if((y?y.getPropertyValue(e):null)===s[g])return!0}}return!1}},y0=e=>n=>wn(n)&&n.hasAttribute(e),Yi=(e,n)=>s=>wn(s)&&s.getAttribute(e)===n,Uu=e=>wn(e)&&e.hasAttribute("data-mce-bogus"),N2=e=>wn(e)&&e.getAttribute("data-mce-bogus")==="all",Pd=e=>wn(e)&&e.tagName==="TABLE",wM=e=>n=>!!(_f(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),B2=Ki(["textarea","input"]),Vt=Ln(3),H6=Ln(4),w0=Ln(7),Mf=Ln(8),x0=Ln(9),Tr=Ln(11),Zs=Pm("br"),Ka=Pm("img"),hl=wM("true"),ms=wM("false"),S0=Ki(["td","th"]),ia=Ki(["td","th","caption"]),Qr=Ki(["video","audio","object","embed"]),F2=Pm("li"),Pt=Pm("details"),tc=Pm("summary"),C0="\uFEFF",ws=" ",Wu=e=>e===C0,V6=e=>e.replace(/\uFEFF/g,""),I2=((e,n)=>{const s=g=>{if(!e(g))throw new Error("Can only get "+n+" value of a "+n+" node");return a(g).getOr("")},a=g=>e(g)?V.from(g.dom.nodeValue):V.none();return{get:s,getOption:a,set:(g,y)=>{if(!e(g))throw new Error("Can only set raw "+n+" value of a "+n+" node");g.dom.nodeValue=y}}})(Ao,"text"),Zu=e=>I2.get(e),L2=e=>I2.getOption(e),nc=(e,n)=>I2.set(e,n),Ds=["td","th"],Nd=["thead","tbody","tfoot"],k0=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Na=["li","dd","dt"],xM=["ul","ol","dl"],Bm=["pre","script","textarea","style"],Fm=e=>{let n;return s=>(n=n||Ye(e,Ze),Bn(n,ts(s)))},oc=e=>ts(e)==="table",Im=e=>gn(e)&&ts(e)==="br",et=Fm(k0),_l=Fm(xM),Lm=Fm(Na),Rf=Fm(Nd),sc=Fm(Ds),Hi=Fm(Bm),Vi=e=>{const n=[];let s=e.dom;for(;s;)n.push(ye.fromDom(s)),s=s.lastChild;return n},z6=e=>{const n=ya(e,"br"),s=Me(Vi(e).slice(-1),Im);n.length===s.length&&ue(s,ks)},qu=()=>{const e=ye.fromTag("br");return Js(e,"data-mce-bogus","1"),e},Bd=e=>{Md(e),Jr(e,qu())},Zn=(e,n)=>{_c(e).each(s=>{Dc(s).each(a=>{n.isBlock(ts(e))&&Im(s)&&n.isBlock(ts(a))&&ks(s)})})},Xi=C0,Ml=Wu,rc=V6,U6=e=>e.insertContent(Xi,{preserve_zwsp:!0}),W6=wn,ip=Vt,ap=e=>(ip(e)&&(e=e.parentNode),W6(e)&&e.hasAttribute("data-mce-caret")),ic=e=>ip(e)&&Ml(e.data),Ba=e=>ap(e)||ic(e),SM=e=>e.firstChild!==e.lastChild||!Zs(e.firstChild),j6=(e,n)=>{var s;const f=((s=e.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(Xi),g=e.parentNode;if(n){const y=e.previousSibling;if(ip(y)){if(Ba(y))return y;if(A0(y))return y.splitText(y.data.length-1)}g==null||g.insertBefore(f,e)}else{const y=e.nextSibling;if(ip(y)){if(Ba(y))return y;if($m(y))return y.splitText(1),y}e.nextSibling?g==null||g.insertBefore(f,e.nextSibling):g==null||g.appendChild(f)}return f},$2=e=>{const n=e.container();return Vt(n)?n.data.charAt(e.offset())===Xi||e.isAtStart()&&ic(n.previousSibling):!1},jy=e=>{const n=e.container();return Vt(n)?n.data.charAt(e.offset()-1)===Xi||e.isAtEnd()&&ic(n.nextSibling):!1},CM=(e,n,s)=>{var a;const g=((a=n.ownerDocument)!==null&&a!==void 0?a:document).createElement(e);g.setAttribute("data-mce-caret",s?"before":"after"),g.setAttribute("data-mce-bogus","all"),g.appendChild(qu().dom);const y=n.parentNode;return s?y==null||y.insertBefore(g,n):n.nextSibling?y==null||y.insertBefore(g,n.nextSibling):y==null||y.appendChild(g),g},$m=e=>ip(e)&&e.data[0]===Xi,A0=e=>ip(e)&&e.data[e.data.length-1]===Xi,Z6=e=>{var n;const s=e.getElementsByTagName("br"),a=s[s.length-1];Uu(a)&&((n=a.parentNode)===null||n===void 0||n.removeChild(a))},Eh=e=>e&&e.hasAttribute("data-mce-caret")?(Z6(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,kM=e=>ap(e.startContainer),AM=hl,q6=ms,G6=Zs,aa=Vt,Pf=Ki(["script","style","textarea"]),lp=Ki(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Hm=Ki(["table"]),EM=Ba,bi=e=>EM(e)?!1:aa(e)?!Pf(e.parentNode):lp(e)||G6(e)||Hm(e)||E0(e),Zy=e=>wn(e)&&e.getAttribute("unselectable")==="true",E0=e=>!Zy(e)&&q6(e),H2=(e,n)=>{for(let s=e.parentNode;s&&s!==n;s=s.parentNode){if(E0(s))return!1;if(AM(s))return!0}return!0},Nf=e=>E0(e)?!ve(oo(e.getElementsByTagName("*")),(n,s)=>n||AM(s),!1):!1,Bf=e=>lp(e)||Nf(e),V2=(e,n)=>bi(e)&&H2(e,n),Gu=/^[ \t\r\n]*$/,Th=e=>Gu.test(e),Vm=e=>{for(const n of e)if(!Wu(n))return!1;return!0},cp=e=>" \f	\v".indexOf(e)!==-1,Oh=e=>e===`
`||e==="\r",K6=(e,n)=>n<e.length&&n>=0?Oh(e[n]):!1,up=(e,n=4,s=!0,a=!0)=>{const f=ds(" ",n),g=e.replace(/\t/g,f);return ve(g,(C,A)=>cp(A)||A===ws?C.pcIsSpace||C.str===""&&s||C.str.length===g.length-1&&a||K6(g,C.str.length+1)?{pcIsSpace:!1,str:C.str+ws}:{pcIsSpace:!0,str:C.str+" "}:{pcIsSpace:Oh(A),str:C.str+A},{pcIsSpace:!1,str:""}).str},Y6=(e,n)=>{const s=ye.fromDom(n),a=ye.fromDom(e);return yM(a,"pre,code",Pe(ys,s))},X6=(e,n)=>Vt(e)&&Th(e.data)&&!Y6(e,n),ei=e=>wn(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),qy=(e,n)=>bi(e)&&!X6(e,n)||ei(e)||dp(e),dp=y0("data-mce-bookmark"),z2=y0("data-mce-bogus"),U2=Yi("data-mce-bogus","all"),zm=e=>$u(ye.fromDom(e)).exists(n=>!Eo(n)),ac=(e,n)=>{let s=0;if(qy(e,e))return!1;{let a=e.firstChild;if(!a)return!0;const f=new tr(a,e);do{if(n){if(U2(a)){a=f.next(!0);continue}if(z2(a)){a=f.next();continue}}if(hl(a)&&zm(a))return!1;if(Zs(a)){s++,a=f.next();continue}if(qy(a,e))return!1;a=f.next()}while(a);return s<=1}},Rr=(e,n=!0)=>ac(e.dom,n),Ku=e=>e.toLowerCase()==="svg",W2=e=>Ku(e.nodeName),T0=e=>(e==null?void 0:e.nodeName)==="svg"?"svg":"html",j2=["svg"],Gy=()=>{let e=[];const n=()=>e[e.length-1];return{track:g=>{W2(g)&&e.push(g);let y=n();return y&&!y.contains(g)&&(e.pop(),y=n()),T0(y)},current:()=>T0(n()),reset:()=>{e=[]}}},Ky="data-mce-block",J6=e=>Me(Fo(e),n=>!/[A-Z]/.test(n)),O0=e=>tt(J6(e),n=>`${n}:`+tt(j2,s=>`not(${s} ${n})`).join(":")).join(","),D0=(e,n)=>ae(n.querySelector(e))?(n.setAttribute(Ky,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Ky),!1),Yu=(e,n)=>{const s=O0(e.getTransparentElements()),a=O0(e.getBlockElements());return Me(n.querySelectorAll(s),f=>D0(a,f))},Um=(e,n)=>{var s;const a=n?"lastChild":"firstChild";for(let f=e[a];f;f=f[a])if(Rr(ye.fromDom(f))){(s=f.parentNode)===null||s===void 0||s.removeChild(f);return}},Wm=(e,n)=>{const s=document.createRange(),a=e.parentNode;if(a){s.setStartBefore(e),s.setEndBefore(n);const f=s.extractContents();Um(f,!0),s.setStartAfter(n),s.setEndAfter(e);const g=s.extractContents();Um(g,!1),Rr(ye.fromDom(f))||a.insertBefore(f,e),Rr(ye.fromDom(n))||a.insertBefore(n,e),Rr(ye.fromDom(g))||a.insertBefore(g,e),a.removeChild(e)}},TM=(e,n,s)=>{const a=e.getBlockElements(),f=ye.fromDom(n),g=C=>ts(C)in a,y=C=>ys(C,f);ue(Ah(s),C=>{Ar(C,g,y).each(A=>{const M=ec(C,I=>g(I)&&!e.isValidChild(ts(A),ts(I)));if(M.length>0){const I=$u(A);ue(M,L=>{Ar(L,g,y).each(W=>{Wm(W.dom,L.dom)})}),I.each(L=>Yu(e,L.dom))}})})},Yy=(e,n,s)=>{ue([...s,...ns(e,n)?[n]:[]],a=>ue(ya(ye.fromDom(a),a.nodeName.toLowerCase()),f=>{Hn(e,f.dom)&&Ql(f)}))},_0=(e,n)=>{const s=Yu(e,n);TM(e,n,s),Yy(e,n,s)},OM=(e,n)=>{if(R0(e,n)){const s=O0(e.getBlockElements());D0(s,n)}},DM=(e,n,s)=>{const a=g=>ys(g,ye.fromDom(n)),f=Py(ye.fromDom(s),a);Rt(f,f.length-2).filter(gn).fold(()=>_0(e,n),g=>_0(e,g.dom))},Xy=e=>e.hasAttribute(Ky),M0=(e,n)=>Bn(e.getTransparentElements(),n),R0=(e,n)=>wn(n)&&M0(e,n.nodeName),ns=(e,n)=>R0(e,n)&&Xy(n),Hn=(e,n)=>R0(e,n)&&!Xy(n),Ff=(e,n)=>n.type===1&&M0(e,n.name)&&Z(n.attr(Ky)),Z2=Ms().browser,Jy=e=>ot(e,gn),Q6=e=>Z2.isFirefox()&&ts(e)==="table"?Jy(pi(e)).filter(n=>ts(n)==="caption").bind(n=>Jy(Ma(n)).map(s=>{const a=s.dom.offsetTop,f=n.dom.offsetTop,g=n.dom.offsetHeight;return a<=f?-g:0})).getOr(0):0,q2=(e,n)=>e.children&&Je(e.children,n),ar=(e,n,s)=>{let a=0,f=0;const g=e.ownerDocument;if(s=s||e,n){if(s===e&&n.getBoundingClientRect&&ou(ye.fromDom(e),"position")==="static"){const C=n.getBoundingClientRect();return a=C.left+(g.documentElement.scrollLeft||e.scrollLeft)-g.documentElement.clientLeft,f=C.top+(g.documentElement.scrollTop||e.scrollTop)-g.documentElement.clientTop,{x:a,y:f}}let y=n;for(;y&&y!==s&&y.nodeType&&!q2(y,s);){const C=y;a+=C.offsetLeft||0,f+=C.offsetTop||0,y=C.offsetParent}for(y=n.parentNode;y&&y!==s&&y.nodeType&&!q2(y,s);)a-=y.scrollLeft||0,f-=y.scrollTop||0,y=y.parentNode;f+=Q6(ye.fromDom(n))}return{x:a,y:f}},G2=(e,n={})=>{let s=0;const a={},f=ye.fromDom(e),g=Lu(f),y=Fe=>{n.referrerPolicy=Fe},C=Fe=>{n.contentCssCors=Fe},A=Fe=>{Jr(h0(f),Fe)},M=Fe=>{const ze=h0(f);Ch(ze,"#"+Fe).each(ks)},I=Fe=>us(a,Fe).getOrThunk(()=>({id:"mce-u"+s++,passed:[],failed:[],count:0})),L=Fe=>new Promise((ze,Ve)=>{let nt;const Nt=Lt._addCacheSuffix(Fe),Zt=I(Nt);a[Nt]=Zt,Zt.count++;const on=(mn,Rn)=>{ue(mn,wt),Zt.status=Rn,Zt.passed=[],Zt.failed=[],nt&&(nt.onload=null,nt.onerror=null,nt=null)},vt=()=>on(Zt.passed,2),ut=()=>on(Zt.failed,3);if(ze&&Zt.passed.push(ze),Ve&&Zt.failed.push(Ve),Zt.status===1)return;if(Zt.status===2){vt();return}if(Zt.status===3){ut();return}Zt.status=1;const Mt=ye.fromTag("link",g.dom);Ur(Mt,{rel:"stylesheet",type:"text/css",id:Zt.id}),n.contentCssCors&&Js(Mt,"crossOrigin","anonymous"),n.referrerPolicy&&Js(Mt,"referrerpolicy",n.referrerPolicy),nt=Mt.dom,nt.onload=vt,nt.onerror=ut,A(Mt),Js(Mt,"href",Nt)}),W=(Fe,ze)=>{const Ve=I(Fe);a[Fe]=Ve,Ve.count++;const nt=ye.fromTag("style",g.dom);Ur(nt,{rel:"stylesheet",type:"text/css",id:Ve.id}),nt.dom.innerHTML=ze,A(nt)},re=Fe=>Promise.allSettled(tt(Fe,Ve=>L(Ve).then(he(Ve)))).then(Ve=>{const nt=Ne(Ve,Nt=>Nt.status==="fulfilled");return nt.fail.length>0?Promise.reject(tt(nt.fail,Nt=>Nt.reason)):tt(nt.pass,Nt=>Nt.value)}),de=Fe=>{const ze=Lt._addCacheSuffix(Fe);us(a,ze).each(Ve=>{--Ve.count===0&&(delete a[ze],M(Ve.id))})};return{load:L,loadRawCss:W,loadAll:re,unload:de,unloadRawCss:Fe=>{us(a,Fe).each(ze=>{--ze.count===0&&(delete a[Fe],M(ze.id))})},unloadAll:Fe=>{ue(Fe,ze=>{de(ze)})},_setReferrerPolicy:y,_setContentCssCors:C}},K2=(()=>{const e=new WeakMap;return{forElement:(s,a)=>{const g=Hu(s).dom;return V.from(e.get(g)).getOrThunk(()=>{const y=G2(g,a);return e.set(g,y),y})}}})(),_t=e=>e.nodeName.toLowerCase()==="span",Qy=(e,n,s)=>ae(e)&&(qy(e,n)||s.isInline(e.nodeName.toLowerCase())),e8=(e,n,s)=>{const a=new tr(e,n).prev(!1),f=new tr(e,n).next(!1),g=$e(a)||Qy(a,n,s),y=$e(f)||Qy(f,n,s);return g&&y},P0=e=>_t(e)&&e.getAttribute("data-mce-type")==="bookmark",t8=(e,n,s)=>Vt(e)&&e.data.length>0&&e8(e,n,s),fp=e=>wn(e)?e.childNodes.length>0:!1,Y2=e=>Tr(e)||x0(e),If=(e,n,s,a)=>{var f;const g=a||n;if(wn(n)&&P0(n))return n;const y=n.childNodes;for(let C=y.length-1;C>=0;C--)If(e,y[C],s,g);if(wn(n)){const C=n.childNodes;C.length===1&&P0(C[0])&&((f=n.parentNode)===null||f===void 0||f.insertBefore(C[0],n))}return!Y2(n)&&!qy(n,g)&&!fp(n)&&!t8(n,g,s)&&e.remove(n),n},n8=Lt.makeMap,Lf=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nr=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fd=/[<>&\"\']/g,o8=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,$f={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},jm={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},X2={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},hp=e=>{const n=ye.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},_M=(e,n)=>{const s={};if(e){const a=e.split(",");n=n||10;for(let f=0;f<a.length;f+=2){const g=String.fromCharCode(parseInt(a[f],n));if(!jm[g]){const y="&"+a[f+1]+";";s[g]=y,s[y]=g}}return s}else return},ew=_M("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),MM=(e,n)=>e.replace(n?Lf:nr,s=>jm[s]||s),s8=e=>(""+e).replace(Fd,n=>jm[n]||n),RM=(e,n)=>e.replace(n?Lf:nr,s=>s.length>1?"&#"+((s.charCodeAt(0)-55296)*1024+(s.charCodeAt(1)-56320)+65536)+";":jm[s]||"&#"+s.charCodeAt(0)+";"),Zm=(e,n,s)=>{const a=s||ew;return e.replace(n?Lf:nr,f=>jm[f]||a[f]||f)},Dh={encodeRaw:MM,encodeAllRaw:s8,encodeNumeric:RM,encodeNamed:Zm,getEncodeFunc:(e,n)=>{const s=_M(n)||ew,a=(y,C)=>y.replace(C?Lf:nr,A=>jm[A]!==void 0?jm[A]:s[A]!==void 0?s[A]:A.length>1?"&#"+((A.charCodeAt(0)-55296)*1024+(A.charCodeAt(1)-56320)+65536)+";":"&#"+A.charCodeAt(0)+";"),f=(y,C)=>Zm(y,C,s),g=n8(e.replace(/\+/g,","));return g.named&&g.numeric?a:g.named?n?f:Zm:g.numeric?RM:MM},decode:e=>e.replace(o8,(n,s)=>s?(s.charAt(0).toLowerCase()==="x"?s=parseInt(s.substr(1),16):s=parseInt(s,10),s>65535?(s-=65536,String.fromCharCode(55296+(s>>10),56320+(s&1023))):$f[s]||String.fromCharCode(s)):X2[n]||ew[n]||hp(n))},la=(e,n)=>(e=Lt.trim(e),e?e.split(n||" "):[]),pn=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),r8=e=>{const n=/^(~)?(.+)$/;return On(la(e,","),s=>{const a=n.exec(s);if(a){const f=a[1]==="~",g=f?"span":"div",y=a[2];return[{inline:f,cloneName:g,name:y}]}else return[]})},i8=e=>{let n,s,a;if(n="id accesskey class dir lang style tabindex title role",s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",a="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const g="a ins del canvas map";n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",s+=" article aside details dialog figure main header footer hgroup section nav "+g,a+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"}e!=="html5-strict"&&(n+=" xml:lang",a=[a,"acronym applet basefont big font strike tt"].join(" "),s=[s,"center dir isindex noframes"].join(" "));const f=[s,a].join(" ");return{globalAttributes:n,blockContent:s,phrasingContent:a,flowContent:f}},a8=e=>{const{globalAttributes:n,phrasingContent:s,flowContent:a}=i8(e),f={},g=(A,M,I)=>{f[A]={attributes:Ye(M,he({})),attributesOrder:M,children:Ye(I,he({}))}},y=(A,M="",I="")=>{const L=la(I),W=la(A);let re=W.length;const de=la([n,M].join(" "));for(;re--;)g(W[re],de.slice(),L)},C=(A,M)=>{const I=la(A),L=la(M);let W=I.length;for(;W--;){const re=f[I[W]];for(let de=0,te=L.length;de<te;de++)re.attributes[L[de]]={},re.attributesOrder.push(L[de])}};return e!=="html5-strict"&&(ue(la("acronym applet basefont big font strike tt"),I=>{y(I,"",s)}),ue(la("center dir isindex noframes"),I=>{y(I,"",a)})),y("html","manifest","head body"),y("head","","base command link meta noscript script style title"),y("title hr noscript br"),y("base","href target"),y("link","href rel media hreflang type sizes hreflang"),y("meta","name http-equiv content charset"),y("style","media type scoped"),y("script","src async defer type charset"),y("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",a),y("dd div","",a),y("address dt caption","",e==="html4"?s:a),y("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",s),y("blockquote","cite",a),y("ol","reversed start type","li"),y("ul","","li"),y("li","value",a),y("dl","","dt dd"),y("a","href target rel media hreflang type",e==="html4"?s:a),y("q","cite",s),y("ins del","cite datetime",a),y("img","src sizes srcset alt usemap ismap width height"),y("iframe","src name width height",a),y("embed","src type width height"),y("object","data type typemustmatch name usemap form width height",[a,"param"].join(" ")),y("param","name value"),y("map","name",[a,"area"].join(" ")),y("area","alt coords shape href target rel media hreflang type"),y("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),y("colgroup","span","col"),y("col","span"),y("tbody thead tfoot","","tr"),y("tr","","td th"),y("td","colspan rowspan headers",a),y("th","colspan rowspan headers scope abbr",a),y("form","accept-charset action autocomplete enctype method name novalidate target",a),y("fieldset","disabled form name",[a,"legend"].join(" ")),y("label","form for",s),y("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),y("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?a:s),y("select","disabled form multiple name required size","option optgroup"),y("optgroup","disabled label","option"),y("option","disabled label selected value"),y("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),y("menu","type label",[a,"li"].join(" ")),y("noscript","",a),e!=="html4"&&(y("wbr"),y("ruby","",[s,"rt rp"].join(" ")),y("figcaption","",a),y("mark rt rp bdi","",s),y("summary","",[s,"h1 h2 h3 h4 h5 h6"].join(" ")),y("canvas","width height",a),y("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[a,"track source"].join(" ")),y("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[a,"track source"].join(" ")),y("picture","","img source"),y("source","src srcset type media sizes"),y("track","kind src srclang label default"),y("datalist","",[s,"option"].join(" ")),y("article section nav aside main header footer","",a),y("hgroup","","h1 h2 h3 h4 h5 h6"),y("figure","",[a,"figcaption"].join(" ")),y("time","datetime",s),y("dialog","open",a),y("command","type label icon disabled checked radiogroup command"),y("output","for form name",s),y("progress","value max",s),y("meter","value min max low high optimum",s),y("details","open",[a,"summary"].join(" ")),y("keygen","autofocus challenge disabled form keytype name"),g("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(C("script","language xml:space"),C("style","xml:space"),C("object","declare classid code codebase codetype archive standby align border hspace vspace"),C("embed","align name hspace vspace"),C("param","valuetype type"),C("a","charset name rev shape coords"),C("br","clear"),C("applet","codebase archive code object alt name width height align hspace vspace"),C("img","name longdesc align border hspace vspace"),C("iframe","longdesc frameborder marginwidth marginheight scrolling align"),C("font basefont","size color face"),C("input","usemap align"),C("select"),C("textarea"),C("h1 h2 h3 h4 h5 h6 div p legend caption","align"),C("ul","type compact"),C("li","type"),C("ol dl menu dir","compact"),C("pre","width xml:space"),C("hr","align noshade size width"),C("isindex","prompt"),C("table","summary width frame rules cellspacing cellpadding align bgcolor"),C("col","width align char charoff valign"),C("colgroup","width align char charoff valign"),C("thead","align char charoff valign"),C("tr","align char charoff valign bgcolor"),C("th","axis align char charoff valign nowrap bgcolor width height"),C("form","accept"),C("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),C("tfoot","align char charoff valign"),C("tbody","align char charoff valign"),C("area","nohref"),C("body","background bgcolor text link vlink alink")),e!=="html4"&&(C("input button select textarea","autofocus"),C("input textarea","placeholder"),C("a","download"),C("link script img","crossorigin"),C("img","loading"),C("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&ue([f.video,f.audio],A=>{delete A.children.audio,delete A.children.video}),ue(la("a form meter progress dfn"),A=>{f[A]&&delete f[A].children[A]}),delete f.caption.children.table,delete f.script,f},PM=e=>e==="-"?"remove":"add",l8=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return On(la(e,","),s=>{const a=n.exec(s);if(a){const f=a[1],g=f?PM(f):"replace",y=a[2],C=la(a[3],"|");return[{operation:g,name:y,validChildren:C}]}else return[]})},J2=(e,n)=>{const s=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,a=/[*?+]/,{attributes:f,attributesOrder:g}=n;return ue(la(e,"|"),y=>{const C=s.exec(y);if(C){const A={},M=C[1],I=C[2].replace(/[\\:]:/g,":"),L=C[3],W=C[4];if(M==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(I),A.required=!0),M==="-"){delete f[I],g.splice(Lt.inArray(g,I),1);return}if(L&&(L==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:I,value:W}),A.defaultValue=W):L==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:I,value:W}),A.forcedValue=W):L==="<"&&(A.validValues=Lt.makeMap(W,"?"))),a.test(I)){const re=A;n.attributePatterns=n.attributePatterns||[],re.pattern=pn(I),n.attributePatterns.push(re)}else f[I]||g.push(I),f[I]=A}})},N0=(e,n)=>{$t(e.attributes,(s,a)=>{n.attributes[a]=s}),n.attributesOrder.push(...e.attributesOrder)},mp=(e,n)=>{const s=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return On(la(n,","),a=>{const f=s.exec(a);if(f){const g=f[1],y=f[2],C=f[3],A=f[4],M=f[5],I={attributes:{},attributesOrder:[]};if(e.each(L=>N0(L,I)),g==="#"?I.paddEmpty=!0:g==="-"&&(I.removeEmpty=!0),A==="!"&&(I.removeEmptyAttrs=!0),M&&J2(M,I),C&&(I.outputName=y),y==="@")if(e.isNone())e=V.some(I);else return[];return[C?{name:y,element:I,aliasName:C}:{name:y,element:I}]}else return[]})},tw={},_h=Lt.makeMap,Xu=Lt.each,Q2=Lt.extend,nw=Lt.explode,ow=(e,n={})=>{const s=_h(e," ",_h(e.toUpperCase()," "));return Q2(s,n)},NM=e=>ow("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),gp=(e,n)=>{if(e){const s={};return Z(e)&&(e={"*":e}),Xu(e,(a,f)=>{s[f]=s[f.toUpperCase()]=n==="map"?_h(a,/[, ]/):nw(a,/[, ]/)}),s}else return},Hf=(e={})=>{var n;const s={},a={};let f=[];const g={},y={},C=(mo,hs,zs)=>{const cr=e[mo];if(cr)return _h(cr,/[, ]/,_h(cr.toUpperCase(),/[, ]/));{let yr=tw[mo];return yr||(yr=ow(hs,zs),tw[mo]=yr),yr}},A=(n=e.schema)!==null&&n!==void 0?n:"html5",M=a8(A);e.verify_html===!1&&(e.valid_elements="*[*]");const I=gp(e.valid_styles),L=gp(e.invalid_styles,"map"),W=gp(e.valid_classes,"map"),re=C("whitespace_elements","pre script noscript style textarea video audio iframe object code"),de=C("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),te=C("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),fe=C("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),Fe="td th iframe video audio object script code",ze=C("non_empty_elements",Fe+" pre svg",te),Ve=C("move_caret_before_on_enter_elements",Fe+" table",te),nt="h1 h2 h3 h4 h5 h6",Nt=C("text_block_elements",nt+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Zt=C("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Nt),on=C("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),vt=C("transparent_elements","a ins del canvas map"),ut=C("wrap_block_elements","pre "+nt);Xu("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),mo=>{y[mo]=new RegExp("</"+mo+"[^>]*>","gi")});const Mt=mo=>{const hs=V.from(s["@"]),zs=/[*?+]/;ue(mp(hs,mo!=null?mo:""),({name:cr,element:yr,aliasName:Cl})=>{if(Cl&&(s[Cl]=yr),zs.test(cr)){const pd=yr;pd.pattern=pn(cr),f.push(pd)}else s[cr]=yr})},mn=mo=>{f=[],ue(Fo(s),hs=>{delete s[hs]}),Mt(mo)},Rn=mo=>{delete tw.text_block_elements,delete tw.block_elements,ue(r8(mo!=null?mo:""),({inline:hs,name:zs,cloneName:cr})=>{if(a[zs]=a[cr],g[zs]=cr,ze[zs.toUpperCase()]={},ze[zs]={},hs||(Zt[zs.toUpperCase()]={},Zt[zs]={}),!s[zs]){let yr=s[cr];yr=Q2({},yr),delete yr.removeEmptyAttrs,delete yr.removeEmpty,s[zs]=yr}$t(a,(yr,Cl)=>{yr[cr]&&(a[Cl]=yr=Q2({},a[Cl]),yr[zs]=yr[cr])})})},Bo=mo=>{ue(l8(mo!=null?mo:""),({operation:hs,name:zs,validChildren:cr})=>{const yr=hs==="replace"?{"#comment":{}}:a[zs];ue(cr,Cl=>{hs==="remove"?delete yr[Cl]:yr[Cl]={}}),a[zs]=yr})},Mo=mo=>{const hs=s[mo];if(hs)return hs;let zs=f.length;for(;zs--;){const cr=f[zs];if(cr.pattern.test(mo))return cr}};e.valid_elements?(mn(e.valid_elements),Xu(M,(mo,hs)=>{a[hs]=mo.children})):(Xu(M,(mo,hs)=>{s[hs]={attributes:mo.attributes,attributesOrder:mo.attributesOrder},a[hs]=mo.children}),Xu(la("strong/b em/i"),mo=>{const hs=la(mo,"/");s[hs[1]].outputName=hs[0]}),Xu(on,(mo,hs)=>{s[hs]&&(e.padd_empty_block_inline_children&&(s[hs].paddInEmptyBlock=!0),s[hs].removeEmpty=!0)}),Xu(la("ol ul blockquote a table tbody"),mo=>{s[mo]&&(s[mo].removeEmpty=!0)}),Xu(la("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),mo=>{s[mo]&&(s[mo].paddEmpty=!0)}),Xu(la("span"),mo=>{s[mo].removeEmptyAttrs=!0})),delete s.svg,Rn(e.custom_elements),Bo(e.valid_children),Mt(e.extended_valid_elements),Bo("+ol[ul|ol],+ul[ul|ol]"),Xu({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(mo,hs)=>{s[hs]&&(s[hs].parentsRequired=la(mo))}),e.invalid_elements&&Xu(nw(e.invalid_elements),mo=>{s[mo]&&delete s[mo]}),Mo("span")||Mt("span[!data-mce-type|*]");const Ps=he(I),Vs=he(L),Nr=he(W),ea=he(fe),_s=he(Zt),Xt=he(Nt),Cn=he(on),Ro=he(Object.seal(te)),Vo=he(de),vn=he(ze),lo=he(Ve),Gt=he(re),co=he(vt),Go=he(ut),Fs=he(Object.seal(y)),Ns=(mo,hs)=>{const zs=a[mo.toLowerCase()];return!!(zs&&zs[hs.toLowerCase()])},xi=(mo,hs)=>{const zs=Mo(mo);if(zs)if(hs){if(zs.attributes[hs])return!0;const cr=zs.attributePatterns;if(cr){let yr=cr.length;for(;yr--;)if(cr[yr].pattern.test(hs))return!0}}else return!0;return!1},Au=mo=>Bn(_s(),mo),cf=mo=>!Vn(mo,"#")&&xi(mo)&&!Au(mo),tl=mo=>Bn(Go(),mo)||cf(mo),Vc=he(g);return{type:A,children:a,elements:s,getValidStyles:Ps,getValidClasses:Nr,getBlockElements:_s,getInvalidStyles:Vs,getVoidElements:Ro,getTextBlockElements:Xt,getTextInlineElements:Cn,getBoolAttrs:ea,getElementRule:Mo,getSelfClosingElements:Vo,getNonEmptyElements:vn,getMoveCaretBeforeOnEnterElements:lo,getWhitespaceElements:Gt,getTransparentElements:co,getSpecialElements:Fs,isValidChild:Ns,isValid:xi,isBlock:Au,isInline:cf,isWrapper:tl,getCustomElements:Vc,addValidElements:Mt,setValidElements:mn,addCustomElements:Rn,addValidChildren:Bo}},c8=e=>({value:BM(e)}),BM=e=>En(e,"#").toUpperCase(),pp=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Ju=e=>{const n=pp(e.red)+pp(e.green)+pp(e.blue);return c8(n)},lc=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,u8=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,FM=(e,n,s,a)=>({red:e,green:n,blue:s,alpha:a}),IM=(e,n,s,a)=>{const f=parseInt(e,10),g=parseInt(n,10),y=parseInt(s,10),C=parseFloat(a);return FM(f,g,y,C)},ek=e=>{if(e==="transparent")return V.some(FM(0,0,0,0));const n=lc.exec(e);if(n!==null)return V.some(IM(n[1],n[2],n[3],"1"));const s=u8.exec(e);return s!==null?V.some(IM(s[1],s[2],s[3],s[4])):V.none()},su=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,B0=e=>ek(e).map(Ju).map(n=>"#"+n.value).getOr(e),tk=(e={},n)=>{const s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,f=/\s+$/,g={};let y,C;const A=C0;n&&(y=n.getValidStyles(),C=n.getInvalidStyles());const M=(`\\" \\' \\; \\: ; : `+A).split(" ");for(let L=0;L<M.length;L++)g[M[L]]=A+L,g[A+L]=M[L];const I={parse:L=>{const W={};let re=!1;const de=e.url_converter,te=e.url_converter_scope||I,fe=(vt,ut,Mt)=>{const mn=W[vt+"-top"+ut];if(!mn)return;const Rn=W[vt+"-right"+ut];if(!Rn)return;const Bo=W[vt+"-bottom"+ut];if(!Bo)return;const Mo=W[vt+"-left"+ut];if(!Mo)return;const Ps=[mn,Rn,Bo,Mo];let Vs=Ps.length-1;for(;Vs--&&Ps[Vs]===Ps[Vs+1];);Vs>-1&&Mt||(W[vt+ut]=Vs===-1?Ps[0]:Ps.join(" "),delete W[vt+"-top"+ut],delete W[vt+"-right"+ut],delete W[vt+"-bottom"+ut],delete W[vt+"-left"+ut])},Fe=vt=>{const ut=W[vt];if(!ut)return;const Mt=ut.indexOf(",")>-1?[ut]:ut.split(" ");let mn=Mt.length;for(;mn--;)if(Mt[mn]!==Mt[0])return!1;return W[vt]=Mt[0],!0},ze=(vt,ut,Mt,mn)=>{Fe(ut)&&Fe(Mt)&&Fe(mn)&&(W[vt]=W[ut]+" "+W[Mt]+" "+W[mn],delete W[ut],delete W[Mt],delete W[mn])},Ve=vt=>(re=!0,g[vt]),nt=(vt,ut)=>(re&&(vt=vt.replace(/\uFEFF[0-9]/g,Mt=>g[Mt])),ut||(vt=vt.replace(/\\([\'\";:])/g,"$1")),vt),Nt=vt=>String.fromCharCode(parseInt(vt.slice(1),16)),Zt=vt=>vt.replace(/\\[0-9a-f]+/gi,Nt),on=(vt,ut,Mt,mn,Rn,Bo)=>{if(Rn=Rn||Bo,Rn)return Rn=nt(Rn),"'"+Rn.replace(/\'/g,"\\'")+"'";if(ut=nt(ut||Mt||mn||""),!e.allow_script_urls){const Mo=ut.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Mo)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Mo))return""}return de&&(ut=de.call(te,ut,"style")),"url('"+ut.replace(/\'/g,"\\'")+"')"};if(L){L=L.replace(/[\u0000-\u001F]/g,""),L=L.replace(/\\[\"\';:\uFEFF]/g,Ve).replace(/\"[^\"]+\"|\'[^\']+\'/g,ut=>ut.replace(/[;:]/g,Ve));let vt;for(;vt=a.exec(L);){a.lastIndex=vt.index+vt[0].length;let ut=vt[1].replace(f,"").toLowerCase(),Mt=vt[2].replace(f,"");if(ut&&Mt){if(ut=Zt(ut),Mt=Zt(Mt),ut.indexOf(A)!==-1||ut.indexOf('"')!==-1||!e.allow_script_urls&&(ut==="behavior"||/expression\s*\(|\/\*|\*\//.test(Mt)))continue;ut==="font-weight"&&Mt==="700"?Mt="bold":(ut==="color"||ut==="background-color")&&(Mt=Mt.toLowerCase()),Z(e.force_hex_color)&&e.force_hex_color!=="off"&&ek(Mt).each(mn=>{(e.force_hex_color==="always"||mn.alpha===1)&&(Mt=B0(su(mn)))}),Mt=Mt.replace(s,on),W[ut]=re?nt(Mt,!0):Mt}}fe("border","",!0),fe("border","-width"),fe("border","-color"),fe("border","-style"),fe("padding",""),fe("margin",""),ze("border","border-width","border-style","border-color"),W.border==="medium none"&&delete W.border,W["border-image"]==="none"&&delete W["border-image"]}return W},serialize:(L,W)=>{let re="";const de=(fe,Fe)=>{const ze=Fe[fe];if(ze)for(let Ve=0,nt=ze.length;Ve<nt;Ve++){const Nt=ze[Ve],Zt=L[Nt];Zt&&(re+=(re.length>0?" ":"")+Nt+": "+Zt+";")}},te=(fe,Fe)=>{if(!C||!Fe)return!0;let ze=C["*"];return ze&&ze[fe]?!1:(ze=C[Fe],!(ze&&ze[fe]))};return W&&y?(de("*",y),de(W,y)):$t(L,(fe,Fe)=>{fe&&te(Fe,W)&&(re+=(re.length>0?" ":"")+Fe+": "+fe+";")}),re}};return I},d8={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},f8=e=>e instanceof Event||Oe(e.initEvent),h8=e=>e.isDefaultPrevented===Ze||e.isDefaultPrevented===ce,m8=e=>Ue(e.preventDefault)||f8(e),sw=(e,n)=>{const s=n!=null?n:{};for(const a in e)Bn(d8,a)||(s[a]=e[a]);return ae(e.composedPath)&&(s.composedPath=()=>e.composedPath()),ae(e.getModifierState)&&(s.getModifierState=a=>e.getModifierState(a)),ae(e.getTargetRanges)&&(s.getTargetRanges=()=>e.getTargetRanges()),s},nk=(e,n,s,a)=>{var f;const g=sw(n,a);return g.type=e,Ue(g.target)&&(g.target=(f=g.srcElement)!==null&&f!==void 0?f:s),m8(n)&&(g.preventDefault=()=>{g.defaultPrevented=!0,g.isDefaultPrevented=Ze,Oe(n.preventDefault)&&n.preventDefault()},g.stopPropagation=()=>{g.cancelBubble=!0,g.isPropagationStopped=Ze,Oe(n.stopPropagation)&&n.stopPropagation()},g.stopImmediatePropagation=()=>{g.isImmediatePropagationStopped=Ze,g.stopPropagation()},h8(g)||(g.isDefaultPrevented=g.defaultPrevented===!0?Ze:ce,g.isPropagationStopped=g.cancelBubble===!0?Ze:ce,g.isImmediatePropagationStopped=ce)),g},g8="mce-data-",p8=/^(?:mouse|contextmenu)|click/,ok=(e,n,s,a)=>{e.addEventListener(n,s,a||!1)},rw=(e,n,s,a)=>{e.removeEventListener(n,s,a||!1)},b8=e=>ae(e)&&p8.test(e.type),F0=(e,n)=>{const s=nk(e.type,e,document,n);if(b8(e)&&$e(e.pageX)&&!$e(e.clientX)){const a=s.target.ownerDocument||document,f=a.documentElement,g=a.body,y=s;y.pageX=e.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),y.pageY=e.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}return s},v8=(e,n,s)=>{const a=e.document,f={type:"ready"};if(s.domLoaded){n(f);return}const g=()=>a.readyState==="complete"||a.readyState==="interactive"&&a.body,y=()=>{rw(e,"DOMContentLoaded",y),rw(e,"load",y),s.domLoaded||(s.domLoaded=!0,n(f)),e=null};g()?y():ok(e,"DOMContentLoaded",y),s.domLoaded||ok(e,"load",y)};class Mc{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=g8+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,s,a,f){const g=this;let y;const C=window,A=W=>{g.executeHandlers(F0(W||C.event),M)};if(!n||Vt(n)||Mf(n))return a;let M;n[g.expando]?M=n[g.expando]:(M=g.count++,n[g.expando]=M,g.events[M]={}),f=f||n;const I=s.split(" ");let L=I.length;for(;L--;){let W=I[L],re=A,de=!1,te=!1;if(W==="DOMContentLoaded"&&(W="ready"),g.domLoaded&&W==="ready"&&n.readyState==="complete"){a.call(f,F0({type:W}));continue}!g.hasFocusIn&&(W==="focusin"||W==="focusout")&&(de=!0,te=W==="focusin"?"focus":"blur",re=fe=>{const Fe=F0(fe||C.event);Fe.type=Fe.type==="focus"?"focusin":"focusout",g.executeHandlers(Fe,M)}),y=g.events[M][W],y?W==="ready"&&g.domLoaded?a(F0({type:W})):y.push({func:a,scope:f}):(g.events[M][W]=y=[{func:a,scope:f}],y.fakeName=te,y.capture=de,y.nativeHandler=re,W==="ready"?v8(n,re,g):ok(n,te||W,re,de))}return n=y=null,a}unbind(n,s,a){if(!n||Vt(n)||Mf(n))return this;const f=n[this.expando];if(f){let g=this.events[f];if(s){const y=s.split(" ");let C=y.length;for(;C--;){const A=y[C],M=g[A];if(M){if(a){let I=M.length;for(;I--;)if(M[I].func===a){const L=M.nativeHandler,W=M.fakeName,re=M.capture,de=M.slice(0,I).concat(M.slice(I+1));de.nativeHandler=L,de.fakeName=W,de.capture=re,g[A]=de}}(!a||M.length===0)&&(delete g[A],rw(n,M.fakeName||A,M.nativeHandler,M.capture))}}}else $t(g,(y,C)=>{rw(n,y.fakeName||C,y.nativeHandler,y.capture)}),g={};for(const y in g)if(Bn(g,y))return this;delete this.events[f];try{delete n[this.expando]}catch(y){n[this.expando]=null}}return this}fire(n,s,a){return this.dispatch(n,s,a)}dispatch(n,s,a){if(!n||Vt(n)||Mf(n))return this;const f=F0({type:s,target:n},a);do{const g=n[this.expando];g&&this.executeHandlers(f,g),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!f.isPropagationStopped());return this}clean(n){if(!n||Vt(n)||Mf(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const s=n.getElementsByTagName("*");let a=s.length;for(;a--;)n=s[a],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,s){const a=this.events[s],f=a&&a[n.type];if(f)for(let g=0,y=f.length;g<y;g++){const C=f[g];if(C&&C.func.call(C.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Mc.Event=new Mc;const sk=Lt.each,y8=Lt.grep,rk="data-mce-style",w8=Lt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),I0=(e,n,s)=>{Ue(s)||s===""?Ir(e,n):Js(e,n,s)},iw=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),bp=(e,n)=>{let s=0;if(e)for(let a=e.nodeType,f=e.previousSibling;f;f=f.previousSibling){const g=f.nodeType;n&&Vt(f)&&(g===a||!f.data.length)||(s++,a=g)}return s},LM=(e,n)=>{const s=gi(n,"style"),a=e.serialize(e.parse(s),ts(n));I0(n,rk,a)},vp=(e,n)=>ht(e)?Bn(w8,n)?e+"":e+"px":e,aw=(e,n,s)=>{const a=iw(n);Ue(s)||s===""?b0(e,a):Hy(e,a,vp(s,a))},$M=(e,n,s)=>{const a=n.keep_values,f={set:(y,C,A)=>{const M=ye.fromDom(y);Oe(n.url_converter)&&ae(C)&&(C=n.url_converter.call(n.url_converter_scope||s(),String(C),A,y));const I="data-mce-"+A;I0(M,I,C),I0(M,A,C)},get:(y,C)=>{const A=ye.fromDom(y);return gi(A,"data-mce-"+C)||gi(A,C)}},g={style:{set:(y,C)=>{const A=ye.fromDom(y);a&&I0(A,rk,C),Ir(A,"style"),Z(C)&&kh(A,e.parse(C))},get:y=>{const C=ye.fromDom(y),A=gi(C,rk)||gi(C,"style");return e.serialize(e.parse(A),ts(C))}}};return a&&(g.href=g.src=f),g},or=(e,n={})=>{const s={},a=window,f={};let g=0;const y=!0,C=!0,A=K2.forElement(ye.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),M=[],I=n.schema?n.schema:Hf({}),L=tk({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope,force_hex_color:n.force_hex_color},n.schema),W=n.ownEvents?new Mc:Mc.Event,re=I.getBlockElements(),de=rt=>Z(rt)?Bn(re,rt):wn(rt)&&(Bn(re,rt.nodeName)||ns(I,rt)),te=rt=>rt&&e&&Z(rt)?e.getElementById(rt):rt,fe=rt=>{const it=te(rt);return ae(it)?ye.fromDom(it):null},Fe=(rt,it,Yt="")=>{let zt;const _n=fe(rt);if(ae(_n)&&gn(_n)){const zo=$1[it];zo&&zo.get?zt=zo.get(_n.dom,it):zt=gi(_n,it)}return ae(zt)?zt:Yt},ze=rt=>{const it=te(rt);return Ue(it)?[]:it.attributes},Ve=(rt,it,Yt)=>{Cn(rt,zt=>{if(wn(zt)){const _n=ye.fromDom(zt),zo=Yt===""?null:Yt,gr=gi(_n,it),nl=$1[it];nl&&nl.set?nl.set(_n.dom,zo,it):I0(_n,it,zo),gr!==zo&&n.onSetAttrib&&n.onSetAttrib({attrElm:_n.dom,attrName:it,attrValue:zo})}})},nt=(rt,it)=>rt.cloneNode(it),Nt=()=>n.root_element||e.body,Zt=rt=>{const it=Gi(rt);return{x:it.x,y:it.y,w:it.width,h:it.height}},on=(rt,it)=>ar(e.body,te(rt),it),vt=(rt,it,Yt)=>{Cn(rt,zt=>{const _n=ye.fromDom(zt);aw(_n,it,Yt),n.update_styles&&LM(L,_n)})},ut=(rt,it)=>{Cn(rt,Yt=>{const zt=ye.fromDom(Yt);$t(it,(_n,zo)=>{aw(zt,zo,_n)}),n.update_styles&&LM(L,zt)})},Mt=(rt,it,Yt)=>{const zt=te(rt);if(!(Ue(zt)||!_f(zt)&&!$6(zt)))return Yt?ou(ye.fromDom(zt),iw(it)):(it=it.replace(/-(\D)/g,(_n,zo)=>zo.toUpperCase()),it==="float"&&(it="cssFloat"),zt.style?zt.style[it]:void 0)},mn=rt=>{const it=te(rt);if(!it)return{w:0,h:0};let Yt=Mt(it,"width"),zt=Mt(it,"height");return(!Yt||Yt.indexOf("px")===-1)&&(Yt="0"),(!zt||zt.indexOf("px")===-1)&&(zt="0"),{w:parseInt(Yt,10)||it.offsetWidth||it.clientWidth,h:parseInt(zt,10)||it.offsetHeight||it.clientHeight}},Rn=rt=>{const it=te(rt),Yt=on(it),zt=mn(it);return{x:Yt.x,y:Yt.y,w:zt.w,h:zt.h}},Bo=(rt,it)=>{if(!rt)return!1;const Yt=Re(rt)?rt:[rt];return Bt(Yt,zt=>Ol(ye.fromDom(zt),it))},Mo=(rt,it,Yt,zt)=>{const _n=[];let zo=te(rt);zt=zt===void 0;const gr=Yt||(Nt().nodeName!=="BODY"?Nt().parentNode:null);if(Z(it))if(it==="*")it=wn;else{const nl=it;it=Ni=>Bo(Ni,nl)}for(;zo&&!(zo===gr||Ue(zo.nodeType)||x0(zo)||Tr(zo));){if(!it||it(zo))if(zt)_n.push(zo);else return[zo];zo=zo.parentNode}return zt?_n:null},Ps=(rt,it,Yt)=>{const zt=Mo(rt,it,Yt,!1);return zt&&zt.length>0?zt[0]:null},Vs=(rt,it,Yt)=>{let zt=it;if(rt){Z(it)&&(zt=_n=>Bo(_n,it));for(let _n=rt[Yt];_n;_n=_n[Yt])if(Oe(zt)&&zt(_n))return _n}return null},Nr=(rt,it)=>Vs(rt,it,"nextSibling"),ea=(rt,it)=>Vs(rt,it,"previousSibling"),_s=rt=>Oe(rt.querySelectorAll),Xt=(rt,it)=>{var Yt,zt;const _n=(zt=(Yt=te(it))!==null&&Yt!==void 0?Yt:n.root_element)!==null&&zt!==void 0?zt:e;return _s(_n)?oo(_n.querySelectorAll(rt)):[]},Cn=function(rt,it,Yt){const zt=Yt!=null?Yt:this;if(Re(rt)){const _n=[];return sk(rt,(zo,gr)=>{const nl=te(zo);nl&&_n.push(it.call(zt,nl,gr))}),_n}else{const _n=te(rt);return _n?it.call(zt,_n):!1}},Ro=(rt,it)=>{Cn(rt,Yt=>{$t(it,(zt,_n)=>{Ve(Yt,_n,zt)})})},Vo=(rt,it)=>{Cn(rt,Yt=>{const zt=ye.fromDom(Yt);rp(zt,it)})},vn=(rt,it,Yt,zt,_n)=>Cn(rt,zo=>{const gr=Z(it)?e.createElement(it):it;return ae(Yt)&&Ro(gr,Yt),zt&&(!Z(zt)&&zt.nodeType?gr.appendChild(zt):Z(zt)&&Vo(gr,zt)),_n?gr:zo.appendChild(gr)}),lo=(rt,it,Yt)=>vn(e.createElement(rt),rt,it,Yt,!0),Gt=Dh.decode,co=Dh.encodeAllRaw,Go=(rt,it,Yt="")=>{let zt="<"+rt;for(const _n in it)hi(it,_n)&&(zt+=" "+_n+'="'+co(it[_n])+'"');return Ho(Yt)&&Bn(I.getVoidElements(),rt)?zt+" />":zt+">"+Yt+"</"+rt+">"},Fs=rt=>{const it=e.createElement("div"),Yt=e.createDocumentFragment();Yt.appendChild(it),rt&&(it.innerHTML=rt);let zt;for(;zt=it.firstChild;)Yt.appendChild(zt);return Yt.removeChild(it),Yt},Ns=(rt,it)=>Cn(rt,Yt=>{const zt=ye.fromDom(Yt);return it&&ue(pi(zt),_n=>{Ao(_n)&&_n.dom.length===0?ks(_n):Pa(zt,_n)}),ks(zt),zt.dom}),xi=rt=>Cn(rt,it=>{const Yt=it.attributes;for(let zt=Yt.length-1;zt>=0;zt--)it.removeAttributeNode(Yt.item(zt))}),Au=rt=>L.parse(rt),cf=(rt,it)=>L.serialize(rt,it),tl=rt=>{if(ff!==or.DOM&&e===document){if(s[rt])return;s[rt]=!0}let it=e.getElementById("mceDefaultStyles");if(!it){it=e.createElement("style"),it.id="mceDefaultStyles",it.type="text/css";const Yt=e.head;Yt.firstChild?Yt.insertBefore(it,Yt.firstChild):Yt.appendChild(it)}it.styleSheet?it.styleSheet.cssText+=rt:it.appendChild(e.createTextNode(rt))},Vc=rt=>{rt||(rt=""),ue(rt.split(","),it=>{f[it]=!0,A.load(it).catch(ge)})},mo=(rt,it,Yt)=>{Cn(rt,zt=>{if(wn(zt)){const _n=ye.fromDom(zt),zo=it.split(" ");ue(zo,gr=>{ae(Yt)?(Yt?Af:Fu)(_n,gr):Dy(_n,gr)})}})},hs=(rt,it)=>{mo(rt,it,!0)},zs=(rt,it)=>{mo(rt,it,!1)},cr=(rt,it)=>{const Yt=fe(rt),zt=it.split(" ");return ae(Yt)&&ho(zt,_n=>ep(Yt,_n))},yr=rt=>{Cn(rt,it=>b0(ye.fromDom(it),"display"))},Cl=rt=>{Cn(rt,it=>Hy(ye.fromDom(it),"display","none"))},pd=rt=>{const it=fe(rt);return ae(it)&&er(_m(it,"display"),"none")},um=rt=>(rt||"mce_")+g++,Uv=rt=>{const it=fe(rt);return ae(it)?wn(it.dom)?it.dom.outerHTML:M2(it):""},Lg=(rt,it)=>{Cn(rt,Yt=>{wn(Yt)&&(Yt.outerHTML=it)})},F1=(rt,it)=>{const Yt=te(it);return Cn(rt,zt=>{const _n=Yt==null?void 0:Yt.parentNode,zo=Yt==null?void 0:Yt.nextSibling;return _n&&(zo?_n.insertBefore(zt,zo):_n.appendChild(zt)),zt})},I1=(rt,it,Yt)=>Cn(it,zt=>{var _n;const zo=Re(it)?rt.cloneNode(!0):rt;return Yt&&sk(y8(zt.childNodes),gr=>{zo.appendChild(gr)}),(_n=zt.parentNode)===null||_n===void 0||_n.replaceChild(zo,zt),zt}),Wv=(rt,it)=>{if(rt.nodeName!==it.toUpperCase()){const Yt=lo(it);return sk(ze(rt),zt=>{Ve(Yt,zt.nodeName,Fe(rt,zt.nodeName))}),I1(Yt,rt,!0),Yt}else return rt},$g=(rt,it)=>{let Yt=rt;for(;Yt;){let zt=it;for(;zt&&Yt!==zt;)zt=zt.parentNode;if(Yt===zt)break;Yt=Yt.parentNode}return!Yt&&rt.ownerDocument?rt.ownerDocument.documentElement:Yt},Hg=rt=>{if(wn(rt)){const it=rt.nodeName.toLowerCase()==="a"&&!Fe(rt,"href")&&Fe(rt,"id");if(Fe(rt,"name")||Fe(rt,"data-mce-bookmark")||it)return!0}return!1},Eu=(rt,it,Yt)=>{let zt=0;if(Hg(rt))return!1;const _n=rt.firstChild;if(_n){const zo=new tr(_n,rt),gr=I?I.getWhitespaceElements():{},nl=it||(I?I.getNonEmptyElements():null);let Ni=_n;do{if(wn(Ni)){const fm=Ni.getAttribute("data-mce-bogus");if(fm){Ni=zo.next(fm==="all");continue}const zc=Ni.nodeName.toLowerCase();if(nl&&nl[zc]){if(zc==="br"){zt++,Ni=zo.next();continue}return!1}if(Hg(Ni))return!1}if(Mf(Ni)||Vt(Ni)&&!Th(Ni.data)&&(!(Yt!=null&&Yt.includeZwsp)||!Vm(Ni.data))||Vt(Ni)&&Ni.parentNode&&gr[Ni.parentNode.nodeName]&&Th(Ni.data))return!1;Ni=zo.next()}while(Ni)}return zt<=1},uf=()=>e.createRange(),jv=(rt,it,Yt)=>{let zt=uf(),_n,zo;if(rt&&it&&rt.parentNode&&it.parentNode){const gr=rt.parentNode;return zt.setStart(gr,bp(rt)),zt.setEnd(it.parentNode,bp(it)),_n=zt.extractContents(),zt=uf(),zt.setStart(it.parentNode,bp(it)+1),zt.setEnd(gr,bp(rt)+1),zo=zt.extractContents(),gr.insertBefore(If(ff,_n,I),rt),Yt?gr.insertBefore(Yt,rt):gr.insertBefore(it,rt),gr.insertBefore(If(ff,zo,I),rt),Ns(rt),Yt||it}else return},L1=(rt,it,Yt,zt)=>{if(Re(rt)){let _n=rt.length;const zo=[];for(;_n--;)zo[_n]=L1(rt[_n],it,Yt,zt);return zo}else return n.collect&&(rt===e||rt===a)&&M.push([rt,it,Yt,zt]),W.bind(rt,it,Yt,zt||ff)},zC=(rt,it,Yt)=>{if(Re(rt)){let zt=rt.length;const _n=[];for(;zt--;)_n[zt]=zC(rt[zt],it,Yt);return _n}else{if(M.length>0&&(rt===e||rt===a)){let zt=M.length;for(;zt--;){const[_n,zo,gr]=M[zt];rt===_n&&(!it||it===zo)&&(!Yt||Yt===gr)&&W.unbind(_n,zo,gr)}}return W.unbind(rt,it,Yt)}},df=(rt,it,Yt)=>W.dispatch(rt,it,Yt),UC=(rt,it,Yt)=>W.dispatch(rt,it,Yt),Zv=rt=>{if(rt&&_f(rt)){const it=rt.getAttribute("data-mce-contenteditable");return it&&it!=="inherit"?it:rt.contentEditable!=="inherit"?rt.contentEditable:null}else return null},ff={doc:e,settings:n,win:a,files:f,stdMode:y,boxModel:C,styleSheetLoader:A,boundEvents:M,styles:L,schema:I,events:W,isBlock:de,root:null,clone:nt,getRoot:Nt,getViewPort:Zt,getRect:Rn,getSize:mn,getParent:Ps,getParents:Mo,get:te,getNext:Nr,getPrev:ea,select:Xt,is:Bo,add:vn,create:lo,createHTML:Go,createFragment:Fs,remove:Ns,setStyle:vt,getStyle:Mt,setStyles:ut,removeAllAttribs:xi,setAttrib:Ve,setAttribs:Ro,getAttrib:Fe,getPos:on,parseStyle:Au,serializeStyle:cf,addStyle:tl,loadCSS:Vc,addClass:hs,removeClass:zs,hasClass:cr,toggleClass:mo,show:yr,hide:Cl,isHidden:pd,uniqueId:um,setHTML:Vo,getOuterHTML:Uv,setOuterHTML:Lg,decode:Gt,encode:co,insertAfter:F1,replace:I1,rename:Wv,findCommonAncestor:$g,run:Cn,getAttribs:ze,isEmpty:Eu,createRng:uf,nodeIndex:bp,split:jv,bind:L1,unbind:zC,fire:UC,dispatch:df,getContentEditable:Zv,getContentEditableParent:rt=>{const it=Nt();let Yt=null;for(let zt=rt;zt&&zt!==it&&(Yt=Zv(zt),Yt===null);zt=zt.parentNode);return Yt},isEditable:rt=>{if(ae(rt)){const it=wn(rt)?rt:rt.parentElement;return ae(it)&&_f(it)&&Eo(ye.fromDom(it))}else return!1},destroy:()=>{if(M.length>0){let rt=M.length;for(;rt--;){const[it,Yt,zt]=M[rt];W.unbind(it,Yt,zt)}}$t(f,(rt,it)=>{A.unload(it),delete f[it]})},isChildOf:(rt,it)=>rt===it||it.contains(rt),dumpRng:rt=>"startContainer: "+rt.startContainer.nodeName+", startOffset: "+rt.startOffset+", endContainer: "+rt.endContainer.nodeName+", endOffset: "+rt.endOffset},$1=$M(L,n,he(ff));return ff};or.DOM=or(document),or.nodeIndex=bp;const x8=or.DOM,ti=0,HM=1,wr=2,VM=3;class vi{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((s,a)=>{const f=x8;let g;const y=()=>{f.remove(M),g&&(g.onerror=g.onload=g=null)},C=()=>{y(),s()},A=()=>{y(),a("Failed to load script: "+n)},M=f.uniqueId();g=document.createElement("script"),g.id=M,g.type="text/javascript",g.src=Lt._addCacheSuffix(n),this.settings.referrerPolicy&&f.setAttrib(g,"referrerpolicy",this.settings.referrerPolicy),g.onload=C,g.onerror=A,(document.getElementsByTagName("head")[0]||document.body).appendChild(g)})}isDone(n){return this.states[n]===wr}markDone(n){this.states[n]=wr}add(n){const s=this;return s.queue.push(n),s.states[n]===void 0&&(s.states[n]=ti),new Promise((f,g)=>{s.scriptLoadedCallbacks[n]||(s.scriptLoadedCallbacks[n]=[]),s.scriptLoadedCallbacks[n].push({resolve:f,reject:g})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const s=this,a=(A,M)=>{us(s.scriptLoadedCallbacks,M).each(I=>{ue(I,L=>L[A](M))}),delete s.scriptLoadedCallbacks[M]},f=A=>{const M=Me(A,I=>I.status==="rejected");return M.length>0?Promise.reject(On(M,({reason:I})=>Re(I)?I:[I])):Promise.resolve()},g=A=>Promise.allSettled(tt(A,M=>s.states[M]===wr?(a("resolve",M),Promise.resolve()):s.states[M]===VM?(a("reject",M),Promise.reject(M)):(s.states[M]=HM,s.loadScript(M).then(()=>{s.states[M]=wr,a("resolve",M);const I=s.queue;return I.length>0?(s.queue=[],g(I).then(f)):Promise.resolve()},()=>(s.states[M]=VM,a("reject",M),Promise.reject(M)))))),y=A=>(s.loading=!0,g(A).then(M=>{s.loading=!1;const I=s.queueLoadedCallbacks.shift();return V.from(I).each(wt),f(M)})),C=dt(n);return s.loading?new Promise((A,M)=>{s.queueLoadedCallbacks.push(()=>{y(C).then(A,M)})}):y(C)}}vi.ScriptLoader=new vi;const jr=e=>{let n=e;return{get:()=>n,set:f=>{n=f}}},ru=(e,n)=>{const s=e.indexOf(n);return s!==-1&&e.indexOf(n,s+1)>s},S8=e=>be(e)&&Bn(e,"raw"),C8=e=>Re(e)&&e.length>1,L0={},lw=jr("en"),Id=()=>us(L0,lw.get()),iu={getData:()=>xo(L0,e=>ie({},e)),setCode:e=>{e&&lw.set(e)},getCode:()=>lw.get(),add:(e,n)=>{let s=L0[e];s||(L0[e]=s={});const a=tt(Fo(n),f=>f.toLowerCase());$t(n,(f,g)=>{const y=g.toLowerCase();y!==g&&ru(a,y)?(Bn(n,y)||(s[y]=f),s[g]=f):s[y]=f})},translate:e=>{const n=Id().getOr({}),s=y=>Oe(y)?Object.prototype.toString.call(y):a(y)?"":""+y,a=y=>y===""||y===null||y===void 0,f=y=>{const C=s(y);return Bn(n,C)?s(n[C]):us(n,C.toLowerCase()).map(s).getOr(C)},g=y=>y.replace(/{context:\w+}$/,"");if(a(e))return"";if(S8(e))return s(e.raw);if(C8(e)){const y=e.slice(1),C=f(e[0]).replace(/\{([0-9]+)\}/g,(A,M)=>Bn(y,M)?s(y[M]):A);return g(C)}return g(f(e))},isRtl:()=>Id().bind(e=>us(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Bn(L0,e)},Ya=()=>{const e=[],n={},s={},a=[],f=(te,fe)=>{const Fe=Me(a,ze=>ze.name===te&&ze.state===fe);ue(Fe,ze=>ze.resolve())},g=te=>Bn(n,te),y=te=>Bn(s,te),C=te=>{if(s[te])return s[te].instance},A=(te,fe)=>{const Fe=iu.getCode(),ze=","+(fe||"")+",";!Fe||fe&&ze.indexOf(","+Fe+",")===-1||vi.ScriptLoader.add(n[te]+"/langs/"+Fe+".js")},M=(te,fe)=>{Ya.languageLoad!==!1&&(g(te)?A(te,fe):de(te,"loaded").then(()=>A(te,fe)))},I=(te,fe)=>(e.push(fe),s[te]={instance:fe},f(te,"added"),fe),L=te=>{delete n[te],delete s[te]},W=(te,fe)=>Z(fe)?Z(te)?{prefix:"",resource:fe,suffix:""}:{prefix:te.prefix,resource:fe,suffix:te.suffix}:fe,re=(te,fe)=>{if(n[te])return Promise.resolve();let Fe=Z(fe)?fe:fe.prefix+fe.resource+fe.suffix;Fe.indexOf("/")!==0&&Fe.indexOf("://")===-1&&(Fe=Ya.baseURL+"/"+Fe),n[te]=Fe.substring(0,Fe.lastIndexOf("/"));const ze=()=>(f(te,"loaded"),Promise.resolve());return s[te]?ze():vi.ScriptLoader.add(Fe).then(ze)},de=(te,fe="added")=>fe==="added"&&y(te)||fe==="loaded"&&g(te)?Promise.resolve():new Promise(Fe=>{a.push({name:te,state:fe,resolve:Fe})});return{items:e,urls:n,lookup:s,get:C,requireLangPack:M,add:I,remove:L,createUrl:W,load:re,waitFor:de}};Ya.languageLoad=!0,Ya.baseURL="",Ya.PluginManager=Ya(),Ya.ThemeManager=Ya(),Ya.ModelManager=Ya();const T8=e=>{const n=jr(V.none()),s=()=>n.get().each(e);return{clear:()=>{s(),n.set(V.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:C=>{s(),n.set(V.some(C))}}},O8=e=>{const n=jr(V.none()),s=()=>n.get().each(C=>clearInterval(C));return{clear:()=>{s(),n.set(V.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:C=>{s(),n.set(V.some(setInterval(C,e)))}}},Mh=()=>{const e=T8(ge),n=s=>e.get().each(s);return Ot(ie({},e),{on:n})},cw=(e,n)=>{let s=null;return{cancel:()=>{K(s)||(clearTimeout(s),s=null)},throttle:(...g)=>{K(s)&&(s=setTimeout(()=>{s=null,e.apply(null,g)},n))}}},ik=(e,n)=>{let s=null;const a=()=>{K(s)||(clearTimeout(s),s=null)};return{cancel:a,throttle:(...g)=>{a(),s=setTimeout(()=>{s=null,e.apply(null,g)},n)}}},$0=he("mce-annotation"),qm=he("data-mce-annotation"),wp=he("data-mce-annotation-uid"),H0=he("data-mce-annotation-active"),V0=he("data-mce-annotation-classes"),z0=he("data-mce-annotation-attrs"),zM=e=>n=>ys(n,e),Lr=(e,n)=>{const s=e.selection.getRng(),a=ye.fromDom(s.startContainer),f=ye.fromDom(e.getBody()),g=n.fold(()=>"."+$0(),A=>`[${qm()}="${A}"]`),y=Tf(a,s.startOffset).getOr(a);return _d(y,g,zM(f)).bind(A=>_a(A,`${wp()}`).bind(M=>_a(A,`${qm()}`).map(I=>{const L=jM(e,M);return{uid:M,name:I,elements:L}})))},UM=e=>gn(e)&&ep(e,$0()),WM=(e,n)=>Od(e,"data-mce-bogus")||yM(e,'[data-mce-bogus="all"]',zM(n)),jM=(e,n)=>{const s=ye.fromDom(e.getBody()),a=ya(s,`[${wp()}="${n}"]`);return Me(a,f=>!WM(f,s))},uw=(e,n)=>{const s=ye.fromDom(e.getBody()),a=ya(s,`[${qm()}="${n}"]`),f={};return ue(a,g=>{if(!WM(g,s)){const y=gi(g,wp()),C=us(f,y).getOr([]);f[y]=C.concat([g])}}),f},wa=(e,n)=>{const s=jr({}),a=()=>({listeners:[],previous:Mh()}),f=(L,W)=>{g(L,re=>(W(re),re))},g=(L,W)=>{const re=s.get(),de=us(re,L).getOrThunk(a),te=W(de);re[L]=te,s.set(re)},y=(L,W,re)=>{f(L,de=>{ue(de.listeners,te=>te(!0,L,{uid:W,nodes:tt(re,fe=>fe.dom)}))})},C=L=>{f(L,W=>{ue(W.listeners,re=>re(!1,L))})},A=(L,W)=>{ue(jM(e,L),re=>{W?Js(re,H0(),"true"):Ir(re,H0())})},M=ik(()=>{const L=pt(n.getNames());ue(L,W=>{g(W,re=>{const de=re.previous.get();return Lr(e,V.some(W)).fold(()=>{de.each(te=>{C(W),re.previous.clear(),A(te,!1)})},({uid:te,name:fe,elements:Fe})=>{er(de,te)||(de.each(ze=>A(ze,!1)),y(fe,te,Fe),re.previous.set(te),A(te,!0))}),{previous:re.previous,listeners:re.listeners}})})},30);return e.on("remove",()=>{M.cancel()}),e.on("NodeChange",()=>{M.throttle()}),{addListener:(L,W)=>{g(L,re=>({previous:re.previous,listeners:re.listeners.concat([W])}))}}},Rc=(e,n)=>{const s=qm(),a=g=>V.from(g.attr(s)).bind(n.lookup),f=g=>{var y,C;g.attr(wp(),null),g.attr(qm(),null),g.attr(H0(),null);const A=V.from(g.attr(z0())).map(W=>W.split(",")).getOr([]),M=V.from(g.attr(V0())).map(W=>W.split(",")).getOr([]);ue(A,W=>g.attr(W,null));const I=(C=(y=g.attr("class"))===null||y===void 0?void 0:y.split(" "))!==null&&C!==void 0?C:[],L=ls(I,[$0()].concat(M));g.attr("class",L.length>0?L.join(" "):null),g.attr(V0(),null),g.attr(z0(),null)};e.serializer.addTempAttr(H0()),e.serializer.addAttributeFilter(s,g=>{for(const y of g)a(y).each(C=>{C.persistent===!1&&(y.name==="span"?y.unwrap():f(y))})})},ZM=()=>{const e={};return{register:(f,g)=>{e[f]={name:f,settings:g}},lookup:f=>us(e,f).map(g=>g.settings),getNames:()=>Fo(e)}};let ak=0;const xp=e=>{const s=new Date().getTime(),a=Math.floor(Math.random()*1e9);return ak++,e+"_"+a+ak+String(s)},D8=(e,n)=>{ue(n,s=>{Af(e,s)})},_8=(e,n)=>{ue(n,s=>{Fu(e,s)})},lk=(e,n)=>ye.fromDom(e.dom.cloneNode(n)),cc=e=>lk(e,!1),dw=e=>lk(e,!0),Zr=(e,n)=>{const s=ye.fromTag(n),a=Jl(e);return Ur(s,a),s},Qu=(e,n)=>{const s=Zr(e,n);Vu(e,s);const a=pi(e);return Ls(s,a),ks(e),s},Sp=(e,n,s=ce)=>{const a=new tr(e,n),f=g=>{let y;do y=a[g]();while(y&&!Vt(y)&&!s(y));return V.from(y).filter(Vt)};return{current:()=>V.from(a.current()).filter(Vt),next:()=>f("next"),prev:()=>f("prev"),prev2:()=>f("prev2")}},Gm=(e,n)=>{const s=n||(y=>e.isBlock(y)||Zs(y)||ms(y)),a=(y,C,A,M)=>{if(Vt(y)){const I=M(y,C,y.data);if(I!==-1)return V.some({container:y,offset:I})}return A().bind(I=>a(I.container,I.offset,A,M))};return{backwards:(y,C,A,M)=>{const I=Sp(y,M!=null?M:e.getRoot(),s);return a(y,C,()=>I.prev().map(L=>({container:L,offset:L.length})),A).getOrNull()},forwards:(y,C,A,M)=>{const I=Sp(y,M!=null?M:e.getRoot(),s);return a(y,C,()=>I.next().map(L=>({container:L,offset:0})),A).getOrNull()}}},Km=Math.round,Ym=e=>e?{left:Km(e.left),top:Km(e.top),bottom:Km(e.bottom),right:Km(e.right),width:Km(e.width),height:Km(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Rh=(e,n)=>(e=Ym(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),qM=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Xm=(e,n,s)=>e>=0&&e<=Math.min(n.height,s.height)/2,Jm=(e,n)=>{const s=Math.min(n.height/2,e.height/2);return e.bottom-s<n.top?!0:e.top>n.bottom?!1:Xm(n.top-e.bottom,e,n)},U0=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Xm(n.bottom-e.top,e,n),M8=(e,n,s)=>n>=e.left&&n<=e.right&&s>=e.top&&s<=e.bottom,R8=e=>ve(e,(n,s)=>n.fold(()=>V.some(s),a=>{const f=Math.min(s.left,a.left),g=Math.min(s.top,a.top),y=Math.max(s.right,a.right),C=Math.max(s.bottom,a.bottom);return V.some({top:g,right:y,bottom:C,left:f,width:y-f,height:C-g})}),V.none()),GM=(e,n,s)=>{const a=Math.max(Math.min(n,e.left+e.width),e.left),f=Math.max(Math.min(s,e.top+e.height),e.top);return Math.sqrt((n-a)*(n-a)+(s-f)*(s-f))},P8=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),ck=(e,n,s)=>Math.min(Math.max(e,n),s),fw=e=>{const n=e.startContainer,s=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===s+1?n.childNodes[s]:null},Vf=(e,n)=>{if(wn(e)&&e.hasChildNodes()){const s=e.childNodes,a=ck(n,0,s.length-1);return s[a]}else return e},uk=(e,n)=>{if(!(n<0&&wn(e)&&e.hasChildNodes()))return Vf(e,n)},N8=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),KM=e=>Z(e)&&e.charCodeAt(0)>=768&&N8.test(e),B8=(...e)=>n=>{for(let s=0;s<e.length;s++)if(e[s](n))return!0;return!1},hw=(...e)=>n=>{for(let s=0;s<e.length;s++)if(!e[s](n))return!1;return!0},Ph=wn,mw=bi,os=Nm("display","block table"),Rl=Nm("float","left right"),ed=hw(Ph,mw,We(Rl)),dk=We(Nm("white-space","pre pre-line pre-wrap")),qs=Vt,gw=Zs,fk=or.nodeIndex,Oi=uk,Ld=e=>e?e.createRange():or.DOM.createRng(),hk=e=>Z(e)&&/[\r\n\t ]/.test(e),YM=e=>!!e.setStart&&!!e.setEnd,mk=e=>{const n=e.startContainer,s=e.startOffset;if(hk(e.toString())&&dk(n.parentNode)&&Vt(n)){const a=n.data;if(hk(a[s-1])||hk(a[s+1]))return!0}return!1},pw=e=>{const n=e.ownerDocument,s=Ld(n),a=n.createTextNode(ws),f=e.parentNode;f.insertBefore(a,e),s.setStart(a,0),s.setEnd(a,1);const g=Ym(s.getBoundingClientRect());return f.removeChild(a),g},gk=e=>{const n=e.startContainer,s=e.endContainer,a=e.startOffset,f=e.endOffset;if(n===s&&Vt(s)&&a===0&&f===1){const g=e.cloneRange();return g.setEndAfter(s),$d(g)}else return null},bw=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,$d=e=>{var n;let s;const a=e.getClientRects();return a.length>0?s=Ym(a[0]):s=Ym(e.getBoundingClientRect()),!YM(e)&&gw(e)&&bw(s)?pw(e):bw(s)&&YM(e)&&(n=gk(e))!==null&&n!==void 0?n:s},Nh=(e,n)=>{const s=Rh(e,n);return s.width=1,s.right=s.left+1,s},XM=e=>{const n=[],s=y=>{y.height!==0&&(n.length>0&&qM(y,n[n.length-1])||n.push(y))},a=(y,C)=>{const A=Ld(y.ownerDocument);if(C<y.data.length){if(KM(y.data[C]))return;if(KM(y.data[C-1])&&(A.setStart(y,C),A.setEnd(y,C+1),!mk(A))){s(Nh($d(A),!1));return}}C>0&&(A.setStart(y,C-1),A.setEnd(y,C),mk(A)||s(Nh($d(A),!1))),C<y.data.length&&(A.setStart(y,C),A.setEnd(y,C+1),mk(A)||s(Nh($d(A),!0)))},f=e.container(),g=e.offset();if(qs(f))return a(f,g),n;if(Ph(f))if(e.isAtEnd()){const y=Oi(f,g);qs(y)&&a(y,y.data.length),ed(y)&&!gw(y)&&s(Nh($d(y),!1))}else{const y=Oi(f,g);if(qs(y)&&a(y,0),ed(y)&&e.isAtEnd())return s(Nh($d(y),!1)),n;const C=Oi(e.container(),e.offset()-1);ed(C)&&!gw(C)&&(os(C)||os(y)||!ed(y))&&s(Nh($d(C),!1)),ed(y)&&s(Nh($d(y),!0))}return n},bt=(e,n,s)=>{const a=()=>(qs(e),n===0),f=()=>qs(e)?n>=e.data.length:n>=e.childNodes.length,g=()=>{const I=Ld(e.ownerDocument);return I.setStart(e,n),I.setEnd(e,n),I},y=()=>(s||(s=XM(bt(e,n))),s),C=()=>y().length>0,A=I=>I&&e===I.container()&&n===I.offset(),M=I=>Oi(e,I?n-1:n);return{container:he(e),offset:he(n),toRange:g,getClientRects:y,isVisible:C,isAtStart:a,isAtEnd:f,isEqual:A,getNode:M}};bt.fromRangeStart=e=>bt(e.startContainer,e.startOffset),bt.fromRangeEnd=e=>bt(e.endContainer,e.endOffset),bt.after=e=>bt(e.parentNode,fk(e)+1),bt.before=e=>bt(e.parentNode,fk(e)),bt.isAbove=(e,n)=>Kr(Wt(n.getClientRects()),bn(e.getClientRects()),Jm).getOr(!1),bt.isBelow=(e,n)=>Kr(bn(n.getClientRects()),Wt(e.getClientRects()),U0).getOr(!1),bt.isAtStart=e=>e?e.isAtStart():!1,bt.isAtEnd=e=>e?e.isAtEnd():!1,bt.isTextPosition=e=>e?Vt(e.container()):!1,bt.isElementPosition=e=>!bt.isTextPosition(e);const W0=(e,n)=>{Vt(n)&&n.data.length===0&&e.remove(n)},Cp=(e,n,s)=>{n.insertNode(s),W0(e,s.previousSibling),W0(e,s.nextSibling)},uc=(e,n,s)=>{const a=V.from(s.firstChild),f=V.from(s.lastChild);n.insertNode(s),a.each(g=>W0(e,g.previousSibling)),f.each(g=>W0(e,g.nextSibling))},pk=(e,n,s)=>{Tr(s)?uc(e,n,s):Cp(e,n,s)},Or=Vt,JM=Uu,zf=or.nodeIndex,bk=e=>{const n=e.parentNode;return JM(n)?bk(n):n},vw=e=>e?ke(e.childNodes,(n,s)=>(JM(s)&&s.nodeName!=="BR"?n=n.concat(vw(s)):n.push(s),n),[]):[],QM=(e,n)=>{let s=e;for(;(s=s.previousSibling)&&Or(s);)n+=s.data.length;return n},yw=e=>n=>e===n,vk=e=>{let n,s;n=vw(bk(e)),s=Ae(n,yw(e),e),n=n.slice(0,s+1);const a=ke(n,(f,g,y)=>(Or(g)&&Or(n[y-1])&&f++,f),0);return n=br(n,Ki([e.nodeName])),s=Ae(n,yw(e),e),s-a},yk=e=>(Or(e)?"text()":e.nodeName.toLowerCase())+"["+vk(e)+"]",F8=(e,n,s)=>{const a=[];for(let f=n.parentNode;f&&f!==e;f=f.parentNode)a.push(f);return a},e3=(e,n)=>{let s=[],a=n.container(),f=n.offset(),g;if(Or(a))g=QM(a,f);else{const C=a.childNodes;f>=C.length?(g="after",f=C.length-1):g="before",a=C[f]}s.push(yk(a));let y=F8(e,a);return y=br(y,We(Uu)),s=s.concat(Hr(y,C=>yk(C))),s.reverse().join("/")+","+g},ca=(e,n,s)=>{let a=vw(e);return a=br(a,(f,g)=>!Or(f)||!Or(a[g-1])),a=br(a,Ki([n])),a[s]},ua=(e,n)=>{let s=e,a=0;for(;Or(s);){const f=s.data.length;if(n>=a&&n<=a+f){e=s,n=n-a;break}if(!Or(s.nextSibling)){e=s,n=f;break}a+=f,s=s.nextSibling}return Or(e)&&n>e.data.length&&(n=e.data.length),bt(e,n)},Xa=(e,n)=>{if(!n)return null;const s=n.split(","),a=s[0].split("/"),f=s.length>1?s[1]:"before",g=ke(a,(y,C)=>{const A=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(C);return A?(A[1]==="text()"&&(A[1]="#text"),ca(y,A[1],parseInt(A[2],10))):null},e);if(!g)return null;if(!Or(g)&&g.parentNode){let y;return f==="after"?y=zf(g)+1:y=zf(g),bt(g.parentNode,y)}return ua(g,parseInt(f,10))},xa=ms,Fa=(e,n,s)=>{let a=e(n.data.slice(0,s)).length;for(let f=n.previousSibling;f&&Vt(f);f=f.previousSibling)a+=e(f.data).length;return a},Di=(e,n,s,a,f)=>{const g=f?a.startContainer:a.endContainer;let y=f?a.startOffset:a.endOffset;const C=[],A=e.getRoot();if(Vt(g))C.push(s?Fa(n,g,y):y);else{let M=0;const I=g.childNodes;y>=I.length&&I.length&&(M=1,y=Math.max(0,I.length-1)),C.push(e.nodeIndex(I[y],s)+M)}for(let M=g;M&&M!==A;M=M.parentNode)C.push(e.nodeIndex(M,s));return C},wk=(e,n,s,a)=>{const f=n.dom,g=Di(f,e,s,a,!0),y=n.isForward(),C=kM(a)?{isFakeCaret:!0}:{};if(n.isCollapsed())return ie({start:g,forward:y},C);{const A=Di(f,e,s,a,!1);return ie({start:g,end:A,forward:y},C)}},j0=(e,n,s)=>{let a=0;return Lt.each(e.select(n),f=>{if(f.getAttribute("data-mce-bogus")!=="all"){if(f===s)return!1;a++;return}}),a},xk=(e,n)=>{let s=n?e.startContainer:e.endContainer,a=n?e.startOffset:e.endOffset;if(wn(s)&&s.nodeName==="TR"){const f=s.childNodes;s=f[Math.min(n?a:a-1,f.length-1)],s&&(a=n?0:s.childNodes.length,n?e.setStart(s,a):e.setEnd(s,a))}},Sk=e=>(xk(e,!0),xk(e,!1),e),Ck=(e,n)=>{if(wn(e)&&(e=Vf(e,n),xa(e)))return e;if(Ba(e)){Vt(e)&&ap(e)&&(e=e.parentNode);let s=e.previousSibling;if(xa(s)||(s=e.nextSibling,xa(s)))return s}},t3=e=>Ck(e.startContainer,e.startOffset)||Ck(e.endContainer,e.endOffset),ww=(e,n,s)=>{const a=s.getNode(),f=s.getRng();if(a.nodeName==="IMG"||xa(a)){const y=a.nodeName;return{name:y,index:j0(s.dom,y,a)}}const g=t3(f);if(g){const y=g.tagName;return{name:y,index:j0(s.dom,y,g)}}return wk(e,s,n,f)},kk=e=>{const n=e.getRng();return{start:e3(e.dom.getRoot(),bt.fromRangeStart(n)),end:e3(e.dom.getRoot(),bt.fromRangeEnd(n)),forward:e.isForward()}},I8=e=>({rng:e.getRng(),forward:e.isForward()}),L8=(e,n,s)=>{const a={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return s?e.create("span",a,"&#xFEFF;"):e.create("span",a)},n3=(e,n)=>{const s=e.dom;let a=e.getRng();const f=s.uniqueId(),g=e.isCollapsed(),y=e.getNode(),C=y.nodeName,A=e.isForward();if(C==="IMG")return{name:C,index:j0(s,C,y)};const M=Sk(a.cloneRange());if(!g){M.collapse(!1);const L=L8(s,f+"_end",n);pk(s,M,L)}a=Sk(a),a.collapse(!0);const I=L8(s,f+"_start",n);return pk(s,a,I),e.moveToBookmark({id:f,keep:!0,forward:A}),{id:f,forward:A}},$8=(e,n,s=!1)=>n===2?ww(rc,s,e):n===3?kk(e):n?I8(e):n3(e,!1),Ak=Pe(ww,at,!0),xw=e=>{const n=g=>g(e),s=he(e),a=()=>f,f={tag:!0,inner:e,fold:(g,y)=>y(e),isValue:Ze,isError:ce,map:g=>ml.value(g(e)),mapError:a,bind:n,exists:n,forall:n,getOr:s,or:a,getOrThunk:s,orThunk:a,getOrDie:s,each:g=>{g(e)},toOptional:()=>V.some(e)};return f},o3=e=>{const n=()=>s,s={tag:!1,inner:e,fold:(a,f)=>a(e),isValue:ce,isError:Ze,map:n,mapError:a=>ml.error(a(e)),bind:n,exists:ce,forall:Ze,getOr:at,or:at,getOrThunk:Be,orThunk:Be,getOrDie:yt(String(e)),each:ge,toOptional:V.none};return s},ml={value:xw,error:o3,fromOption:(e,n)=>e.fold(()=>o3(n),xw)},td={generate:e=>{if(!Re(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],s={};return ue(e,(a,f)=>{const g=Fo(a);if(g.length!==1)throw new Error("one and only one name per case");const y=g[0],C=a[y];if(s[y]!==void 0)throw new Error("duplicate key detected:"+y);if(y==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Re(C))throw new Error("case arguments must be an array");n.push(y),s[y]=(...A)=>{const M=A.length;if(M!==C.length)throw new Error("Wrong number of arguments to case "+y+". Expected "+C.length+" ("+C+"), got "+M);return{fold:(...L)=>{if(L.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+L.length);return L[f].apply(null,A)},match:L=>{const W=Fo(L);if(n.length!==W.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+W.join(","));if(!ho(n,de=>Je(W,de)))throw new Error("Not all branches were specified when using match. Specified: "+W.join(", ")+`
Required: `+n.join(", "));return L[y].apply(null,A)},log:L=>{}}}}),s}};td.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Kt=e=>{const n=[],s=[];return ue(e,a=>{a.fold(f=>{n.push(f)},f=>{s.push(f)})}),{errors:n,values:s}},H8=e=>e.type==="inline-command"||e.type==="inline-format",Ji=e=>e.type==="block-command"||e.type==="block-format",V8=e=>{const n=a=>ml.error({message:a,pattern:e}),s=(a,f,g)=>{if(e.format!==void 0){let y;if(Re(e.format)){if(!ho(e.format,Z))return n(a+" pattern has non-string items in the `format` array");y=e.format}else if(Z(e.format))y=[e.format];else return n(a+" pattern has non-string `format` parameter");return ml.value(f(y))}else return e.cmd!==void 0?Z(e.cmd)?ml.value(g(e.cmd,e.value)):n(a+" pattern has non-string `cmd` parameter"):n(a+" pattern is missing both `format` and `cmd` parameters")};if(!be(e))return n("Raw pattern is not an object");if(!Z(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!Z(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let a=e.start,f=e.end;return f.length===0&&(f=a,a=""),s("Inline",g=>({type:"inline-format",start:a,end:f,format:g}),(g,y)=>({type:"inline-command",start:a,end:f,cmd:g,value:y}))}else return e.replacement!==void 0?Z(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):ml.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):s("Block",a=>({type:"block-format",start:e.start,format:a[0]}),(a,f)=>({type:"block-command",start:e.start,cmd:a,value:f}))},Ek=e=>Me(e,Ji),s3=e=>Me(e,H8),Pl=(e,n)=>({inlinePatterns:s3(e),blockPatterns:Ek(e),dynamicPatternsLookup:n}),z8=e=>{const n=Kt(tt(e,V8));return ue(n.errors,s=>{}),n.values},U8=e=>n=>{const s=e(n);return z8(s)},dc=Ms().deviceType,Tk=dc.isTouch(),Z0=or.DOM,Hd=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return ve(n,(s,a)=>{const f=a.split("="),g=f[0],y=f.length>1?f[1]:g;return s[Ii(g)]=Ii(y),s},{})},au=e=>le(e,RegExp),dn=e=>n=>n.options.get(e),fc=e=>Z(e)||be(e),r3=(e,n="")=>s=>{const a=Z(s);if(a)if(s.indexOf("=")!==-1){const f=Hd(s);return{value:us(f,e.id).getOr(n),valid:a}}else return{value:s,valid:a};else return{valid:!1,message:"Must be a string."}},i3=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:r3(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:r3(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:s=>{const a=Z(s)&&Po(s);return a?{value:s,valid:a}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:s=>{const a=Je(["block","linebreak","invert","default"],s);return a?{value:s,valid:a}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:s=>Ie(s)?{valid:!0,value:s}:Z(s)?{valid:!0,value:s}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:s=>{const a=s===!1||Z(s)||ne(s,Z);return a?Z(s)?{value:tt(s.split(","),Ii),valid:a}:Re(s)?{value:s,valid:a}:s===!1?{value:[],valid:a}:{value:s,valid:a}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Fk(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:s=>{const a=Z(s)||ne(s,Z);return a?{value:Re(s)?s:tt(s.split(","),Ii),valid:a}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:s=>{const a=Ie(s)||Z(s);return a?s===!1||dc.isiPhone()||dc.isiPad()?{value:"",valid:a}:{value:s===!0?"table,img,figure.image,div,video,iframe":s,valid:a}:{valid:!1,message:"Must be boolean or a string"}},default:!Tk}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:s=>s===!1||Z(s)||Oe(s),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:s=>{const a=s===!1||Z(s);return a?{value:s===!1?"":s,valid:a}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:fc}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:fc}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:fc}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:s=>Z(s)||s===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:s=>ne(s,be)||s===!1?{value:z8(s===!1?[]:s),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:s=>Oe(s)?{value:U8(s),valid:!0}:{valid:!1,message:"Must be a single function"},default:s=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:s=>ne(s,au)?{value:s,valid:!0}:au(s)?{value:[s],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!1}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:s=>{const a=Je(["inherited","collapsed","expanded"],s);return a?{value:s,valid:a}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:s=>{const a=Je(["inherited","collapsed","expanded"],s);return a?{value:s,valid:a}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("force_hex_color",{processor:s=>{const a=["always","rgb_only","off"],f=Je(a,s);return f?{value:s,valid:f}:{valid:!1,message:`Must be one of: ${a.join(", ")}.`}},default:"off"}),n("sandbox_iframes",{processor:"boolean",default:!1}),n("convert_unsafe_embeds",{processor:"boolean",default:!1}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:iu.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:Z0.getAttrib(e.getElement(),"placeholder")})})},Ok=dn("iframe_attrs"),a3=dn("doctype"),Dk=dn("document_base_url"),_k=dn("body_id"),W8=dn("body_class"),Mk=dn("content_security_policy"),j8=dn("br_in_pre"),Ia=dn("forced_root_block"),q0=dn("forced_root_block_attrs"),Z8=dn("newline_behavior"),q8=dn("br_newline_selector"),Rk=dn("no_newline_selector"),G8=dn("keep_styles"),l3=dn("end_container_on_empty_block"),c3=dn("automatic_uploads"),G0=dn("images_reuse_filename"),K8=dn("images_replace_blob_uris"),u3=dn("icons"),Y8=dn("icons_url"),X8=dn("images_upload_url"),J8=dn("images_upload_base_path"),Pk=dn("images_upload_credentials"),Q8=dn("images_upload_handler"),kp=dn("content_css_cors"),sr=dn("referrer_policy"),Nk=dn("language"),Ja=dn("language_url"),Sw=dn("indent_use_margin"),d3=dn("indentation"),f3=dn("content_css"),Cw=dn("content_style"),h3=dn("font_css"),e7=dn("directionality"),t7=dn("inline_boundaries_selector"),m3=dn("object_resizing"),n7=dn("resize_img_proportional"),o7=dn("placeholder"),g3=dn("event_root"),s7=dn("service_message"),Ap=dn("theme"),r7=dn("theme_url"),Bk=dn("model"),i7=dn("model_url"),K0=dn("inline_boundaries"),a7=dn("formats"),p3=dn("preview_styles"),b3=dn("format_empty_lines"),Ep=dn("format_noneditable_selector"),v3=dn("custom_ui_selector"),Fk=dn("inline"),l7=dn("hidden_input"),c7=dn("submit_patch"),Uf=dn("add_form_submit_trigger"),kw=dn("add_unload_trigger"),Aw=dn("custom_undo_redo_levels"),Ik=dn("disable_nodechange"),y3=dn("readonly"),Wf=dn("editable_root"),Ew=dn("content_css_cors"),Tw=dn("plugins"),Bh=dn("external_plugins"),Ow=dn("block_unsupported_drop"),u7=dn("visual"),d7=dn("visual_table_class"),w3=dn("visual_anchor_class"),f7=dn("iframe_aria_text"),x3=dn("setup"),h7=dn("init_instance_callback"),m7=dn("urlconverter_callback"),S3=dn("auto_focus"),g7=dn("browser_spellcheck"),C3=dn("protect"),p7=dn("paste_block_drop"),Dw=dn("paste_data_images"),b7=dn("paste_preprocess"),k3=dn("paste_postprocess"),Lk=dn("newdocument_content"),A3=dn("paste_webkit_styles"),v7=dn("paste_remove_styles_if_webkit"),y7=dn("paste_merge_formats"),w7=dn("smart_paste"),x7=dn("paste_as_text"),KQ=dn("paste_tab_spaces"),$k=dn("allow_html_data_urls"),Hk=dn("text_patterns"),S7=dn("text_patterns_lookup"),E3=dn("noneditable_class"),C7=dn("editable_class"),k7=dn("noneditable_regexp"),A7=dn("preserve_cdata"),E7=dn("highlight_on_focus"),Tp=dn("xss_sanitization"),T7=dn("init_content_sync"),O7=e=>e.options.isSet("text_patterns_lookup"),D7=e=>Lt.explode(e.options.get("font_size_style_values")),_7=e=>Lt.explode(e.options.get("font_size_classes")),M7=e=>e.options.get("encoding")==="xml",T3=e=>Lt.explode(e.options.get("images_file_types")),R7=dn("table_tab_navigation"),Y0=dn("details_initial_state"),P7=dn("details_serialized_state"),N7=dn("force_hex_color"),_w=dn("sandbox_iframes"),O3=wn,Vk=Vt,D3=e=>{const n=e.parentNode;n&&n.removeChild(e)},_3=e=>{const n=rc(e);return{count:e.length-n.length,text:n}},Op=e=>{let n;for(;(n=e.data.lastIndexOf(Xi))!==-1;)e.deleteData(n,1)},zk=(e,n)=>(_i(e),n),B7=(e,n)=>{const s=_3(e.data.substr(0,n.offset())),a=_3(e.data.substr(n.offset()));return(s.text+a.text).length>0?(Op(e),bt(e,n.offset()-s.count)):n},F7=(e,n)=>{const s=n.container(),a=Cs(oo(s.childNodes),e).map(f=>f<n.offset()?bt(s,n.offset()-1):n).getOr(n);return _i(e),a},I7=(e,n)=>Vk(e)&&n.container()===e?B7(e,n):zk(e,n),M3=(e,n)=>n.container()===e.parentNode?F7(e,n):zk(e,n),R3=(e,n)=>bt.isTextPosition(n)?I7(e,n):M3(e,n),_i=e=>{O3(e)&&Ba(e)&&(SM(e)?e.removeAttribute("data-mce-caret"):D3(e)),Vk(e)&&(Op(e),e.data.length===0&&D3(e))},L7=ms,$7=Qr,H7=S0,P3="*[contentEditable=false],video,audio,embed,object",N3=(e,n,s)=>{const a=Rh(n.getBoundingClientRect(),s);let f,g;if(e.tagName==="BODY"){const C=e.ownerDocument.documentElement;f=e.scrollLeft||C.scrollLeft,g=e.scrollTop||C.scrollTop}else{const C=e.getBoundingClientRect();f=e.scrollLeft-C.left,g=e.scrollTop-C.top}a.left+=f,a.right+=f,a.top+=g,a.bottom+=g,a.width=1;let y=n.offsetWidth-n.clientWidth;return y>0&&(s&&(y*=-1),a.left+=y,a.right+=y),a},V7=e=>{var n,s;const a=ya(ye.fromDom(e),P3);for(let f=0;f<a.length;f++){const g=a[f].dom;let y=g.previousSibling;if(A0(y)){const C=y.data;C.length===1?(n=y.parentNode)===null||n===void 0||n.removeChild(y):y.deleteData(C.length-1,1)}y=g.nextSibling,$m(y)&&(y.data.length===1?(s=y.parentNode)===null||s===void 0||s.removeChild(y):y.deleteData(0,1))}},B3=(e,n,s,a)=>{const f=Mh();let g,y;const C=Ia(e),A=e.dom,M=(te,fe)=>{let Fe;if(I(),H7(fe))return null;if(s(fe)){const ze=CM(C,fe,te),Ve=N3(n,fe,te);A.setStyle(ze,"top",Ve.top),y=ze;const nt=A.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});A.setStyles(nt,ie({},Ve)),A.add(n,nt),f.set({caret:nt,element:fe,before:te}),te&&A.addClass(nt,"mce-visual-caret-before"),L(),Fe=fe.ownerDocument.createRange(),Fe.setStart(ze,0),Fe.setEnd(ze,0)}else return y=j6(fe,te),Fe=fe.ownerDocument.createRange(),Mw(y.nextSibling)?(Fe.setStart(y,0),Fe.setEnd(y,0)):(Fe.setStart(y,1),Fe.setEnd(y,1)),Fe;return Fe},I=()=>{V7(n),y&&(_i(y),y=null),f.on(te=>{A.remove(te.caret),f.clear()}),g&&(clearInterval(g),g=void 0)},L=()=>{g=setInterval(()=>{f.on(te=>{a()?A.toggleClass(te.caret,"mce-visual-caret-hidden"):A.addClass(te.caret,"mce-visual-caret-hidden")})},500)};return{show:M,hide:I,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{f.on(te=>{const fe=N3(n,te.element,te.before);A.setStyles(te.caret,ie({},fe))})},destroy:()=>clearInterval(g)}},F3=()=>sn.browser.isFirefox(),Mw=e=>L7(e)||$7(e),X0=e=>(Mw(e)||Pd(e)&&F3())&&$u(ye.fromDom(e)).exists(Eo),z7=hl,Dp=ms,U7=Qr,Uk=Nm("display","block table table-cell table-caption list-item"),Rw=Ba,Wk=ap,W7=wn,j7=Vt,Pw=bi,Qm=e=>e>0,Fh=e=>e<0,J0=(e,n)=>{let s;for(;s=e(n);)if(!Wk(s))return s;return null},_p=(e,n,s,a,f)=>{const g=new tr(e,a),y=Dp(e)||Wk(e);let C;if(Fh(n)){if(y&&(C=J0(g.prev.bind(g),!0),s(C)))return C;for(;C=J0(g.prev.bind(g),f);)if(s(C))return C}if(Qm(n)){if(y&&(C=J0(g.next.bind(g),!0),s(C)))return C;for(;C=J0(g.next.bind(g),f);)if(s(C))return C}return null},I3=(e,n)=>{const s=f=>z7(f.dom),a=f=>f.dom===n;return Ar(ye.fromDom(e),s,a).map(f=>f.dom).getOr(n)},jf=(e,n)=>{for(;e&&e!==n;){if(Uk(e))return e;e=e.parentNode}return null},nd=(e,n,s)=>jf(e.container(),s)===jf(n.container(),s),Nw=(e,n)=>{if(!n)return V.none();const s=n.container(),a=n.offset();return W7(s)?V.from(s.childNodes[a+e]):V.none()},jk=(e,n)=>{var s;const f=((s=n.ownerDocument)!==null&&s!==void 0?s:document).createRange();return e?(f.setStartBefore(n),f.setEndBefore(n)):(f.setStartAfter(n),f.setEndAfter(n)),f},L3=(e,n,s)=>jf(n,e)===jf(s,e),$3=(e,n,s)=>{const a=e?"previousSibling":"nextSibling";let f=s;for(;f&&f!==n;){let g=f[a];if(g&&Rw(g)&&(g=g[a]),Dp(g)||U7(g)){if(L3(n,g,f))return g;break}if(Pw(g))break;f=f.parentNode}return null},Q0=Pe(jk,!0),eb=Pe(jk,!1),Zk=(e,n,s)=>{let a;const f=Pe($3,!0,n),g=Pe($3,!1,n),y=s.startContainer,C=s.startOffset;if(ap(y)){const A=j7(y)?y.parentNode:y,M=A.getAttribute("data-mce-caret");if(M==="before"&&(a=A.nextSibling,X0(a)))return Q0(a);if(M==="after"&&(a=A.previousSibling,X0(a)))return eb(a)}if(!s.collapsed)return s;if(Vt(y)){if(Rw(y)){if(e===1){if(a=g(y),a)return Q0(a);if(a=f(y),a)return eb(a)}if(e===-1){if(a=f(y),a)return eb(a);if(a=g(y),a)return Q0(a)}return s}if(A0(y)&&C>=y.data.length-1)return e===1&&(a=g(y),a)?Q0(a):s;if($m(y)&&C<=1)return e===-1&&(a=f(y),a)?eb(a):s;if(C===y.data.length)return a=g(y),a?Q0(a):s;if(C===0)return a=f(y),a?eb(a):s}return s},H3=(e,n)=>Nw(e?0:-1,n).filter(Dp),tb=(e,n,s)=>{const a=Zk(e,n,s);return e===-1?bt.fromRangeStart(a):bt.fromRangeEnd(a)},Bw=e=>V.from(e.getNode()).map(ye.fromDom),Z7=e=>V.from(e.getNode(!0)).map(ye.fromDom),qk=(e,n)=>{let s=n;for(;s=e(s);)if(s.isVisible())return s;return s},Fw=(e,n)=>{const s=nd(e,n);return!s&&Zs(e.getNode())?!0:s};var zi;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(zi||(zi={}));const YQ=ms,Zf=Vt,V3=wn,z3=Zs,Mp=bi,Sa=Bf,Rp=V2,nb=(e,n)=>{const s=[];let a=e;for(;a&&a!==n;)s.push(a),a=a.parentNode;return s},Pp=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Gk=(e,n)=>{if(Qm(e)){if(Mp(n.previousSibling)&&!Zf(n.previousSibling))return bt.before(n);if(Zf(n))return bt(n,0)}if(Fh(e)){if(Mp(n.nextSibling)&&!Zf(n.nextSibling))return bt.after(n);if(Zf(n))return bt(n,n.data.length)}return Fh(e)?z3(n)?bt.before(n):bt.after(n):bt.before(n)},Kk=(e,n)=>{const s=n.nextSibling;return s&&Mp(s)?Zf(s)?bt(s,0):bt.before(s):Iw(zi.Forwards,bt.after(n),e)},Iw=(e,n,s)=>{let a,f,g,y;if(!V3(s)||!n)return null;if(n.isEqual(bt.after(s))&&s.lastChild){if(y=bt.after(s.lastChild),Fh(e)&&Mp(s.lastChild)&&V3(s.lastChild))return z3(s.lastChild)?bt.before(s.lastChild):y}else y=n;const C=y.container();let A=y.offset();if(Zf(C)){if(Fh(e)&&A>0)return bt(C,--A);if(Qm(e)&&A<C.length)return bt(C,++A);a=C}else{if(Fh(e)&&A>0&&(f=Pp(C,A-1),Mp(f)))return!Sa(f)&&(g=_p(f,e,Rp,f),g)?Zf(g)?bt(g,g.data.length):bt.after(g):Zf(f)?bt(f,f.data.length):bt.before(f);if(Qm(e)&&A<C.childNodes.length&&(f=Pp(C,A),Mp(f)))return z3(f)?Kk(s,f):!Sa(f)&&(g=_p(f,e,Rp,f),g)?Zf(g)?bt(g,0):bt.before(g):Zf(f)?bt(f,0):bt.after(f);a=f||y.getNode()}if(a&&(Qm(e)&&y.isAtEnd()||Fh(e)&&y.isAtStart())&&(a=_p(a,e,Ze,s,!0),Rp(a,s)))return Gk(e,a);f=a&&_p(a,e,Rp,s);const M=ct(Me(nb(C,s),YQ));return M&&(!f||!M.contains(f))?(Qm(e)?y=bt.after(M):y=bt.before(M),y):f?Gk(e,f):null},Vd=e=>({next:n=>Iw(zi.Forwards,n,e),prev:n=>Iw(zi.Backwards,n,e)}),q7=(e,n,s)=>{const a=e?bt.before(s):bt.after(s);return Nl(e,n,a)},G7=e=>Zs(e)?bt.before(e):bt.after(e),Ih=e=>bt.isTextPosition(e)?e.offset()===0:bi(e.getNode()),Yk=e=>{if(bt.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return bi(e.getNode(!0))},Xk=(e,n)=>!bt.isTextPosition(e)&&!bt.isTextPosition(n)&&e.getNode()===n.getNode(!0),qf=e=>!bt.isTextPosition(e)&&Zs(e.getNode()),U3=(e,n,s)=>e?!Xk(n,s)&&!qf(n)&&Yk(n)&&Ih(s):!Xk(s,n)&&Ih(n)&&Yk(s),Nl=(e,n,s)=>{const a=Vd(n);return V.from(e?a.next(s):a.prev(s))},Gf=(e,n,s)=>Nl(e,n,s).bind(a=>nd(s,a,n)&&U3(e,s,a)?Nl(e,n,a):V.some(a)),Jk=(e,n,s,a)=>Gf(e,n,s).bind(f=>a(f)?Jk(e,n,f,a):V.some(f)),Np=(e,n)=>{const s=e?n.firstChild:n.lastChild;return Vt(s)?V.some(bt(s,e?0:s.data.length)):s?bi(s)?V.some(e?bt.before(s):G7(s)):q7(e,n,s):V.none()},Qa=Pe(Nl,!0),gl=Pe(Nl,!1),La=Pe(Np,!0),lu=Pe(Np,!1),Lw="_mce_caret",hc=e=>wn(e)&&e.id===Lw,eg=(e,n)=>{let s=n;for(;s&&s!==e;){if(hc(s))return s;s=s.parentNode}return null},K7=e=>Z(e.start),Y7=e=>Bn(e,"rng"),X7=e=>Bn(e,"id"),Qk=e=>Bn(e,"name"),W3=e=>Lt.isArray(e.start),ob=e=>!Qk(e)&&Ie(e.forward)?e.forward:!0,j3=(e,n)=>(wn(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),XQ=(e,n)=>{const s=V.from(Xa(e.getRoot(),n.start)),a=V.from(Xa(e.getRoot(),n.end));return Kr(s,a,(f,g)=>{const y=e.createRng();return y.setStart(f.container(),f.offset()),y.setEnd(g.container(),g.offset()),{range:y,forward:ob(n)}})},J7=(e,n)=>{var s;const f=((s=e.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(Xi);e.appendChild(f),n.setStart(f,0),n.setEnd(f,0)},Q7=e=>!e.hasChildNodes(),JQ=(e,n)=>lu(e).fold(ce,s=>(n.setStart(s.container(),s.offset()),n.setEnd(s.container(),s.offset()),!0)),Z3=(e,n,s)=>Q7(n)&&eg(e,n)?(J7(n,s),!0):!1,ss=(e,n,s,a)=>{const f=s[n?"start":"end"],g=e.getRoot();if(f){let y=g,C=f[0];for(let A=f.length-1;y&&A>=1;A--){const M=y.childNodes;if(Z3(g,y,a))return!0;if(f[A]>M.length-1)return Z3(g,y,a)?!0:JQ(y,a);y=M[f[A]]}Vt(y)&&(C=Math.min(f[0],y.data.length)),wn(y)&&(C=Math.min(f[0],y.childNodes.length)),n?a.setStart(y,C):a.setEnd(y,C)}return!0},zd=e=>Vt(e)&&e.data.length>0,tg=(e,n,s)=>{const a=e.get(s.id+"_"+n),f=a==null?void 0:a.parentNode,g=s.keep;if(a&&f){let y,C;if(n==="start"?g?a.hasChildNodes()?(y=a.firstChild,C=1):zd(a.nextSibling)?(y=a.nextSibling,C=0):zd(a.previousSibling)?(y=a.previousSibling,C=a.previousSibling.data.length):(y=f,C=e.nodeIndex(a)+1):(y=f,C=e.nodeIndex(a)):g?a.hasChildNodes()?(y=a.firstChild,C=1):zd(a.previousSibling)?(y=a.previousSibling,C=a.previousSibling.data.length):(y=f,C=e.nodeIndex(a)):(y=f,C=e.nodeIndex(a)),!g){const A=a.previousSibling,M=a.nextSibling;Lt.each(Lt.grep(a.childNodes),L=>{Vt(L)&&(L.data=L.data.replace(/\uFEFF/g,""))});let I;for(;I=e.get(s.id+"_"+n);)e.remove(I,!0);if(Vt(M)&&Vt(A)&&!sn.browser.isOpera()){const L=A.data.length;A.appendData(M.data),e.remove(M),y=A,C=L}}return V.some(bt(y,C))}else return V.none()},eA=(e,n)=>{const s=e.createRng();return ss(e,!0,n,s)&&ss(e,!1,n,s)?V.some({range:s,forward:ob(n)}):V.none()},eH=(e,n)=>{const s=tg(e,"start",n),a=tg(e,"end",n);return Kr(s,a.or(s),(f,g)=>{const y=e.createRng();return y.setStart(j3(e,f.container()),f.offset()),y.setEnd(j3(e,g.container()),g.offset()),{range:y,forward:ob(n)}})},tA=(e,n)=>V.from(e.select(n.name)[n.index]).map(s=>{const a=e.createRng();return a.selectNode(s),{range:a,forward:!0}}),tH=(e,n)=>{const s=e.dom;if(n){if(W3(n))return eA(s,n);if(K7(n))return XQ(s,n);if(X7(n))return eH(s,n);if(Qk(n))return tA(s,n);if(Y7(n))return V.some({range:n.rng,forward:ob(n)})}return V.none()},nA=(e,n,s)=>$8(e,n,s),oA=(e,n)=>{tH(e,n).each(({range:s,forward:a})=>{e.setRng(s,a)})},mc=e=>wn(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",sA=(e=>n=>e===n)(ws),sb=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,rA=e=>!sb(e)&&!sA(e)&&!Wu(e),q3=e=>{const n=[];if(e)for(let s=0;s<e.rangeCount;s++)n.push(e.getRangeAt(s));return n},nH=e=>On(e,n=>{const s=fw(n);return s?[ye.fromDom(s)]:[]}),G3=e=>q3(e).length>1,oH=e=>Me(nH(e),sc),K3=e=>ya(e,"td[data-mce-selected],th[data-mce-selected]"),sH=(e,n)=>{const s=K3(n);return s.length>0?s:oH(e)},Bp=e=>sH(q3(e.selection.getSel()),ye.fromDom(e.getBody())),Fp=(e,n)=>Of(e,"table",n),rH=e=>{const n=e.startContainer,s=e.startOffset;return Vt(n)?s===0?V.some(ye.fromDom(n)):V.none():V.from(n.childNodes[s]).map(ye.fromDom)},iH=e=>{const n=e.endContainer,s=e.endOffset;return Vt(n)?s===n.data.length?V.some(ye.fromDom(n)):V.none():V.from(n.childNodes[s-1]).map(ye.fromDom)},Y3=e=>Om(e).fold(he([e]),n=>[e].concat(Y3(n))),iA=e=>_c(e).fold(he([e]),n=>ts(n)==="br"?Dc(n).map(s=>[e].concat(iA(s))).getOr([]):[e].concat(iA(n))),aA=(e,n)=>Kr(rH(n),iH(n),(s,a)=>{const f=ot(Y3(e),Pe(ys,s)),g=ot(iA(e),Pe(ys,a));return f.isSome()&&g.isSome()}).getOr(!1),lA=(e,n,s,a)=>{const f=s,g=new tr(s,f),y=di(e.schema.getMoveCaretBeforeOnEnterElements(),(A,M)=>!Je(["td","th","table"],M.toLowerCase()));let C=s;do{if(Vt(C)&&Lt.trim(C.data).length!==0){a?n.setStart(C,0):n.setEnd(C,C.data.length);return}if(y[C.nodeName]){a?n.setStartBefore(C):C.nodeName==="BR"?n.setEndBefore(C):n.setEndAfter(C);return}}while(C=a?g.next():g.prev());f.nodeName==="BODY"&&(a?n.setStart(f,0):n.setEnd(f,f.childNodes.length))},$w=e=>{const n=e.selection.getSel();return ae(n)&&n.rangeCount>0},cA=(e,n)=>{const s=Bp(e);s.length>0?ue(s,a=>{const f=a.dom,g=e.dom.createRng();g.setStartBefore(f),g.setEndAfter(f),n(g,!0)}):n(e.selection.getRng(),!1)},X3=(e,n,s)=>{const a=n3(e,n);s(a),e.moveToBookmark(a)},rb=e=>ht(e==null?void 0:e.nodeType),uA=e=>wn(e)&&!mc(e)&&!hc(e)&&!Uu(e),aH=(e,n)=>{if(uA(n)&&!/^(TD|TH)$/.test(n.nodeName)){const s=e.getAttrib(n,"data-mce-selected"),a=parseInt(s,10);return!isNaN(a)&&a>0}else return!1},J3=(e,n,s)=>{const{selection:a,dom:f}=e,g=a.getNode(),y=ms(g);X3(a,!0,()=>{n()}),y&&ms(g)&&f.isChildOf(g,e.getBody())?e.selection.select(g):s(a.getStart())&&lH(f,a)},lH=(e,n)=>{var s,a;const f=n.getRng(),{startContainer:g,startOffset:y}=f,C=n.getNode();if(!aH(e,C)&&wn(g)){const A=g.childNodes,M=e.getRoot();let I;if(y<A.length){const L=A[y];I=new tr(L,(s=e.getParent(L,e.isBlock))!==null&&s!==void 0?s:M)}else{const L=A[A.length-1];I=new tr(L,(a=e.getParent(L,e.isBlock))!==null&&a!==void 0?a:M),I.next(!0)}for(let L=I.current();L;L=I.next()){if(e.getContentEditable(L)==="false")return;if(Vt(L)&&!Mi(L)){f.setStart(L,0),n.setRng(f);return}}}},ln=(e,n,s)=>{if(e){const a=n?"nextSibling":"previousSibling";for(e=e[a];e;e=e[a])if(wn(e)||!Mi(e))return e}},yi=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||ns(e,n),Kf=(e,n,s)=>e.schema.isValidChild(n,s),Mi=(e,n=!1)=>{if(ae(e)&&Vt(e)){const s=n?e.data.replace(/ /g," "):e.data;return Th(s)}else return!1},cu=e=>ae(e)&&Vt(e)&&e.length===0,Q3=(e,n)=>{const s="[data-mce-cef-wrappable]",a=Ep(e),f=Ho(a)?s:`${s},${a}`;return Ol(ye.fromDom(n),f)},ib=(e,n)=>{const s=e.dom;return uA(n)&&s.getContentEditable(n)==="false"&&Q3(e,n)&&s.select('[contenteditable="true"]',n).length===0},Ud=(e,n)=>Oe(e)?e(n):(ae(n)&&(e=e.replace(/%(\w+)/g,(s,a)=>n[a]||s)),e),dA=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),fA=(e,n)=>{if(Ue(e))return null;{let s=String(e);return(n==="color"||n==="backgroundColor")&&(s=B0(s)),n==="fontWeight"&&e===700&&(s="bold"),n==="fontFamily"&&(s=s.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),s}},ab=(e,n,s)=>{const a=e.getStyle(n,s);return fA(a,s)},e4=(e,n)=>{let s;return e.getParent(n,a=>wn(a)?(s=e.getStyle(a,"text-decoration"),!!s&&s!=="none"):!1),s},Hw=(e,n,s)=>e.getParents(n,s,e.getRoot()),hA=(e,n,s)=>{const a=e.formatter.get(n);return ae(a)&&Bt(a,s)},t4=(e,n)=>hA(e,n,a=>{const f=g=>Oe(g)||g.length>1&&g.charAt(0)==="%";return Bt(["styles","attributes"],g=>us(a,g).exists(y=>{const C=Re(y)?y:fi(y);return Bt(C,f)}))}),cH=(e,n,s)=>{const a=["inline","block","selector","attributes","styles","classes"],f=g=>di(g,(y,C)=>Bt(a,A=>A===C));return hA(e,n,g=>{const y=f(g);return hA(e,s,C=>{const A=f(C);return Ge(y,A)})})},od=e=>hi(e,"block"),Vw=e=>od(e)&&e.wrapper===!0,zw=e=>od(e)&&e.wrapper!==!0,Bl=e=>hi(e,"selector"),ri=e=>hi(e,"inline"),mA=e=>Bl(e)&&ri(e)&&er(us(e,"mixed"),!0),gA=e=>Bl(e)&&e.expand!==!1&&!ri(e),Uw=e=>{const n=[];let s=e;for(;s;){if(Vt(s)&&s.data!==Xi||s.childNodes.length>1)return[];wn(s)&&n.push(s),s=s.firstChild}return n},lb=e=>Uw(e).length>0,pA=e=>hc(e.dom)&&lb(e.dom),Ip=mc,n4=Hw,o4=Mi,s4=yi,r4=e=>Zs(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,i4=(e,n)=>{let s=n;for(;s;){if(wn(s)&&e.getContentEditable(s))return e.getContentEditable(s)==="false"?s:n;s=s.parentNode}return n},cb=(e,n,s,a)=>{const f=n.data;if(e){for(let g=s;g>0;g--)if(a(f.charAt(g-1)))return g}else for(let g=s;g<f.length;g++)if(a(f.charAt(g)))return g;return-1},Ca=(e,n,s)=>cb(e,n,s,a=>sA(a)||sb(a)),uu=(e,n,s)=>cb(e,n,s,rA),gc=(e,n,s,a,f,g)=>{let y;const C=e.getParent(s,e.isBlock)||n,A=(I,L,W)=>{const re=Gm(e),de=f?re.backwards:re.forwards;return V.from(de(I,L,(te,fe)=>Ip(te.parentNode)?-1:(y=te,W(f,te,fe)),C))};return A(s,a,Ca).bind(I=>g?A(I.container,I.offset+(f?-1:0),uu):V.some(I)).orThunk(()=>y?V.some({container:y,offset:f?0:y.length}):V.none())},ub=(e,n,s,a,f)=>{const g=a[f];Vt(a)&&Ho(a.data)&&g&&(a=g);const y=n4(e,a);for(let C=0;C<y.length;C++)for(let A=0;A<n.length;A++){const M=n[A];if(!(ae(M.collapsed)&&M.collapsed!==s.collapsed)&&Bl(M)&&e.is(y[C],M.selector))return y[C]}return a},Ww=(e,n,s,a)=>{var f;let g=s;const y=e.getRoot(),C=n[0];if(od(C)&&(g=C.wrapper?null:e.getParent(s,C.block,y)),!g){const A=(f=e.getParent(s,"LI,TD,TH,SUMMARY"))!==null&&f!==void 0?f:y;g=e.getParent(Vt(s)?s.parentNode:s,M=>M!==y&&s4(e.schema,M),A)}if(g&&od(C)&&C.wrapper&&(g=n4(e,g,"ul,ol").reverse()[0]||g),!g)for(g=s;g&&g[a]&&!e.isBlock(g[a])&&(g=g[a],!dA(g,"br")););return g||s},a4=(e,n,s,a)=>{const f=s.parentNode;return ae(s[a])?!1:f===n||Ue(f)||e.isBlock(f)?!0:a4(e,n,f,a)},Lp=(e,n,s,a,f)=>{let g=s;const y=f?"previousSibling":"nextSibling",C=e.getRoot();if(Vt(s)&&!o4(s)&&(f?a>0:a<s.data.length))return s;for(;g;){if(!n[0].block_expand&&e.isBlock(g))return g;for(let A=g[y];A;A=A[y]){const M=Vt(A)&&!a4(e,C,A,y);if(!Ip(A)&&!r4(A)&&!o4(A,M))return g}if(g===C||g.parentNode===C){s=g;break}g=g.parentNode}return s},l4=e=>Ip(e.parentNode)||Ip(e),Yf=(e,n,s,a=!1)=>{let{startContainer:f,startOffset:g,endContainer:y,endOffset:C}=n;const A=s[0];return wn(f)&&f.hasChildNodes()&&(f=Vf(f,g),Vt(f)&&(g=0)),wn(y)&&y.hasChildNodes()&&(y=Vf(y,n.collapsed?C:C-1),Vt(y)&&(C=y.data.length)),f=i4(e,f),y=i4(e,y),l4(f)&&(f=Ip(f)?f:f.parentNode,n.collapsed?f=f.previousSibling||f:f=f.nextSibling||f,Vt(f)&&(g=n.collapsed?f.length:0)),l4(y)&&(y=Ip(y)?y:y.parentNode,n.collapsed?y=y.nextSibling||y:y=y.previousSibling||y,Vt(y)&&(C=n.collapsed?0:y.length)),n.collapsed&&(gc(e,e.getRoot(),f,g,!0,a).each(({container:L,offset:W})=>{f=L,g=W}),gc(e,e.getRoot(),y,C,!1,a).each(({container:L,offset:W})=>{y=L,C=W})),(ri(A)||A.block_expand)&&((!ri(A)||!Vt(f)||g===0)&&(f=Lp(e,s,f,g,!0)),(!ri(A)||!Vt(y)||C===y.data.length)&&(y=Lp(e,s,y,C,!1))),gA(A)&&(f=ub(e,s,n,f,"previousSibling"),y=ub(e,s,n,y,"nextSibling")),(od(A)||Bl(A))&&(f=Ww(e,s,f,"previousSibling"),y=Ww(e,s,y,"nextSibling"),od(A)&&(e.isBlock(f)||(f=Lp(e,s,f,g,!0)),e.isBlock(y)||(y=Lp(e,s,y,C,!1)))),wn(f)&&f.parentNode&&(g=e.nodeIndex(f),f=f.parentNode),wn(y)&&y.parentNode&&(C=e.nodeIndex(y)+1,y=y.parentNode),{startContainer:f,startOffset:g,endContainer:y,endOffset:C}},db=(e,n,s)=>{var a;const f=n.startOffset,g=Vf(n.startContainer,f),y=n.endOffset,C=Vf(n.endContainer,y-1),A=fe=>{const Fe=fe[0];Vt(Fe)&&Fe===g&&f>=Fe.data.length&&fe.splice(0,1);const ze=fe[fe.length-1];return y===0&&fe.length>0&&ze===C&&Vt(ze)&&fe.splice(fe.length-1,1),fe},M=(fe,Fe,ze)=>{const Ve=[];for(;fe&&fe!==ze;fe=fe[Fe])Ve.push(fe);return Ve},I=(fe,Fe)=>e.getParent(fe,ze=>ze.parentNode===Fe,Fe),L=(fe,Fe,ze)=>{const Ve=ze?"nextSibling":"previousSibling";for(let nt=fe,Nt=nt.parentNode;nt&&nt!==Fe;nt=Nt){Nt=nt.parentNode;const Zt=M(nt===fe?nt:nt[Ve],Ve);Zt.length&&(ze||Zt.reverse(),s(A(Zt)))}};if(g===C)return s(A([g]));const W=(a=e.findCommonAncestor(g,C))!==null&&a!==void 0?a:e.getRoot();if(e.isChildOf(g,C))return L(g,W,!0);if(e.isChildOf(C,g))return L(C,W);const re=I(g,W)||g,de=I(C,W)||C;L(g,re,!0);const te=M(re===g?re:re.nextSibling,"nextSibling",de===C?de.nextSibling:de);te.length&&s(A(te)),L(C,de)},bA=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],c4=e=>Ao(e)&&Zu(e)===Xi,u4=(e,n,s,a)=>ra(n).fold(()=>"skipping",f=>a==="br"||c4(n)?"valid":UM(n)?"existing":hc(n.dom)?"caret":Bt(bA,g=>Ol(n,g))?"valid-block":!Kf(e,s,a)||!Kf(e,ts(f),s)?"invalid-child":"valid"),vA=(e,n)=>{const s=Yf(e.dom,n,[{inline:"span"}]);n.setStart(s.startContainer,s.startOffset),n.setEnd(s.endContainer,s.endOffset),e.selection.setRng(n)},jw=(e,n,s,a,f,g)=>{const I=s,{uid:y=n}=I,C=Jv(I,["uid"]);Af(e,$0()),Js(e,`${wp()}`,y),Js(e,`${qm()}`,a);const{attributes:A={},classes:M=[]}=f(y,C);if(Ur(e,A),D8(e,M),g){M.length>0&&Js(e,`${V0()}`,M.join(","));const L=Fo(A);L.length>0&&Js(e,`${z0()}`,L.join(","))}},Gs=e=>{Fu(e,$0()),Ir(e,`${wp()}`),Ir(e,`${qm()}`),Ir(e,`${H0()}`);const n=_a(e,`${z0()}`).map(a=>a.split(",")).getOr([]),s=_a(e,`${V0()}`).map(a=>a.split(",")).getOr([]);ue(n,a=>Ir(e,a)),_8(e,s),Ir(e,`${V0()}`),Ir(e,`${z0()}`)},Xf=(e,n,s,a,f)=>{const g=ye.fromTag("span",e);return jw(g,n,s,a,f,!1),g},d4=(e,n,s,a,f,g)=>{const y=[],C=Xf(e.getDoc(),s,g,a,f),A=Mh(),M=()=>{A.clear()},I=()=>A.get().getOrThunk(()=>{const de=cc(C);return y.push(de),A.set(de),de}),L=de=>{ue(de,W)},W=de=>{switch(u4(e,de,"span",ts(de))){case"invalid-child":{M();const fe=pi(de);L(fe),M();break}case"valid-block":{M(),jw(de,s,g,a,f,!0);break}case"valid":{const fe=I();Vy(de,fe);break}}},re=de=>{const te=tt(de,ye.fromDom);L(te)};return db(e.dom,n,de=>{M(),re(de)}),y},f4=(e,n,s,a)=>{e.undoManager.transact(()=>{const f=e.selection,g=f.getRng(),y=Bp(e).length>0,C=xp("mce-annotation");if(g.collapsed&&!y&&vA(e,g),f.getRng().collapsed&&!y){const A=Xf(e.getDoc(),C,a,n,s.decorate);rp(A,ws),f.getRng().insertNode(A.dom),f.select(A.dom)}else X3(f,!1,()=>{cA(e,A=>{d4(e,A,C,n,s.decorate,a)})})})},yA=e=>{const n=ZM();Rc(e,n);const s=wa(e,n),a=zr("span"),f=g=>{ue(g,y=>{a(y)?Ql(y):Gs(y)})};return{register:(g,y)=>{n.register(g,y)},annotate:(g,y)=>{n.lookup(g).each(C=>{f4(e,g,C,y)})},annotationChanged:(g,y)=>{s.addListener(g,y)},remove:g=>{Lr(e,V.some(g)).each(({elements:y})=>{const C=e.selection.getBookmark();f(y),e.selection.moveToBookmark(C)})},removeAll:g=>{const y=e.selection.getBookmark();$t(uw(e,g),(C,A)=>{f(C)}),e.selection.moveToBookmark(y)},getAll:g=>{const y=uw(e,g);return xo(y,C=>tt(C,A=>A.dom))}}},ng=e=>({getBookmark:Pe(nA,e),moveToBookmark:Pe(oA,e)});ng.isBookmarkNode=mc;const wA=(e,n,s)=>s.collapsed?!1:Bt(s.getClientRects(),a=>M8(a,e,n)),xA=(e,n)=>e.dispatch("PreProcess",n),uH=(e,n)=>e.dispatch("PostProcess",n),dH=e=>{e.dispatch("remove")},h4=e=>{e.dispatch("detach")},fH=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},SA=(e,n,s,a,f)=>{e.dispatch("ObjectResizeStart",{target:n,width:s,height:a,origin:f})},hH=(e,n,s,a,f)=>{e.dispatch("ObjectResized",{target:n,width:s,height:a,origin:f})},m4=e=>{e.dispatch("PreInit")},mH=e=>{e.dispatch("PostRender")},gH=e=>{e.dispatch("Init")},pH=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Fl=(e,n,s)=>{e.dispatch(n,s)},ka=(e,n,s,a)=>{e.dispatch("FormatApply",{format:n,node:s,vars:a})},og=(e,n,s,a)=>{e.dispatch("FormatRemove",{format:n,node:s,vars:a})},QQ=(e,n)=>e.dispatch("BeforeSetContent",n),g4=(e,n)=>e.dispatch("SetContent",n),bH=(e,n)=>e.dispatch("BeforeGetContent",n),Zo=(e,n)=>e.dispatch("GetContent",n),vH=(e,n)=>{e.dispatch("AutocompleterStart",n)},p4=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},CA=e=>{e.dispatch("AutocompleterEnd")},yH=(e,n,s)=>e.dispatch("PastePreProcess",{content:n,internal:s}),wH=(e,n,s)=>e.dispatch("PastePostProcess",{node:n,internal:s}),b4=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),xH=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),hn={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||hn.metaKeyPressed(e),metaKeyPressed:e=>sn.os.isMacOS()||sn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},sg="data-mce-selected",kA="table,img,figure.image,hr,video,span.mce-preview-object,details",Zw=Math.abs,fb=Math.round,v4={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},SH=e=>e.type==="longpress"||e.type.indexOf("touch")===0,CH=(e,n)=>{const s=n.dom,a=n.getDoc(),f=document,g=n.getBody();let y,C,A,M,I,L,W,re,de,te,fe,Fe,ze,Ve,nt,Nt,Zt;const on=Gt=>ae(Gt)&&(Ka(Gt)||s.is(Gt,"figure.image")),vt=Gt=>Qr(Gt)||s.hasClass(Gt,"mce-preview-object"),ut=(Gt,co)=>{if(SH(Gt)){const Go=Gt.touches[0];return on(Gt.target)&&!wA(Go.clientX,Go.clientY,co)}else return on(Gt.target)&&!wA(Gt.clientX,Gt.clientY,co)},Mt=Gt=>{const co=Gt.target;ut(Gt,n.selection.getRng())&&!Gt.isDefaultPrevented()&&n.selection.select(co)},mn=Gt=>s.hasClass(Gt,"mce-preview-object")&&ae(Gt.firstElementChild)?[Gt,Gt.firstElementChild]:s.is(Gt,"figure.image")?[Gt.querySelector("img")]:[Gt],Rn=Gt=>{const co=m3(n);return!co||Gt.getAttribute("data-mce-resize")==="false"||Gt===n.getBody()?!1:s.hasClass(Gt,"mce-preview-object")&&ae(Gt.firstElementChild)?Ol(ye.fromDom(Gt.firstElementChild),co):Ol(ye.fromDom(Gt),co)},Bo=Gt=>vt(Gt)?s.create("img",{src:sn.transparentSrc}):Gt.cloneNode(!0),Mo=(Gt,co,Go)=>{if(ae(Go)){const Fs=mn(Gt);ue(Fs,Ns=>{Ns.style[co]||!n.schema.isValid(Ns.nodeName.toLowerCase(),co)?s.setStyle(Ns,co,Go):s.setAttrib(Ns,co,""+Go)})}},Ps=(Gt,co,Go)=>{Mo(Gt,"width",co),Mo(Gt,"height",Go)},Vs=Gt=>{let co,Go,Fs,Ns,xi;co=Gt.screenX-L,Go=Gt.screenY-W,Ve=co*M[2]+te,nt=Go*M[3]+fe,Ve=Ve<5?5:Ve,nt=nt<5?5:nt,(on(y)||vt(y))&&n7(n)!==!1?Fs=!hn.modifierPressed(Gt):Fs=hn.modifierPressed(Gt),Fs&&(Zw(co)>Zw(Go)?(nt=fb(Ve*Fe),Ve=fb(nt/Fe)):(Ve=fb(nt/Fe),nt=fb(Ve*Fe))),Ps(C,Ve,nt),Ns=M.startPos.x+co,xi=M.startPos.y+Go,Ns=Ns>0?Ns:0,xi=xi>0?xi:0,s.setStyles(A,{left:Ns,top:xi,display:"block"}),A.innerHTML=Ve+" &times; "+nt,M[2]<0&&C.clientWidth<=Ve&&s.setStyle(C,"left",re+(te-Ve)),M[3]<0&&C.clientHeight<=nt&&s.setStyle(C,"top",de+(fe-nt)),co=g.scrollWidth-Nt,Go=g.scrollHeight-Zt,co+Go!==0&&s.setStyles(A,{left:Ns-co,top:xi-Go}),ze||(SA(n,y,te,fe,"corner-"+M.name),ze=!0)},Nr=()=>{const Gt=ze;ze=!1,Gt&&(Mo(y,"width",Ve),Mo(y,"height",nt)),s.unbind(a,"mousemove",Vs),s.unbind(a,"mouseup",Nr),f!==a&&(s.unbind(f,"mousemove",Vs),s.unbind(f,"mouseup",Nr)),s.remove(C),s.remove(A),s.remove(I),ea(y),Gt&&(hH(n,y,Ve,nt,"corner-"+M.name),s.setAttrib(y,"style",s.getAttrib(y,"style"))),n.nodeChanged()},ea=Gt=>{Vo();const co=s.getPos(Gt,g),Go=co.x,Fs=co.y,Ns=Gt.getBoundingClientRect(),xi=Ns.width||Ns.right-Ns.left,Au=Ns.height||Ns.bottom-Ns.top;y!==Gt&&(Xt(),y=Gt,Ve=nt=0);const cf=n.dispatch("ObjectSelected",{target:Gt});Rn(Gt)&&!cf.isDefaultPrevented()?$t(v4,(tl,Vc)=>{const mo=zs=>{const cr=mn(y)[0];L=zs.screenX,W=zs.screenY,te=cr.clientWidth,fe=cr.clientHeight,Fe=fe/te,M=tl,M.name=Vc,M.startPos={x:xi*tl[0]+Go,y:Au*tl[1]+Fs},Nt=g.scrollWidth,Zt=g.scrollHeight,I=s.add(g,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),s.setStyles(I,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),C=Bo(y),s.addClass(C,"mce-clonedresizable"),s.setAttrib(C,"data-mce-bogus","all"),C.contentEditable="false",s.setStyles(C,{left:Go,top:Fs,margin:0}),Ps(C,xi,Au),C.removeAttribute(sg),g.appendChild(C),s.bind(a,"mousemove",Vs),s.bind(a,"mouseup",Nr),f!==a&&(s.bind(f,"mousemove",Vs),s.bind(f,"mouseup",Nr)),A=s.add(g,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},te+" &times; "+fe)};let hs=s.get("mceResizeHandle"+Vc);hs&&s.remove(hs),hs=s.add(g,"div",{id:"mceResizeHandle"+Vc,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Vc+"-resize; margin:0; padding:0"}),s.bind(hs,"mousedown",zs=>{zs.stopImmediatePropagation(),zs.preventDefault(),mo(zs)}),tl.elm=hs,s.setStyles(hs,{left:xi*tl[0]+Go-hs.offsetWidth/2,top:Au*tl[1]+Fs-hs.offsetHeight/2})}):Xt(!1)},_s=cw(ea,0),Xt=(Gt=!0)=>{_s.cancel(),Vo(),y&&Gt&&y.removeAttribute(sg),$t(v4,(co,Go)=>{const Fs=s.get("mceResizeHandle"+Go);Fs&&(s.unbind(Fs),s.remove(Fs))})},Cn=(Gt,co)=>s.isChildOf(Gt,co),Ro=Gt=>{if(ze||n.removed||n.composing)return;const co=Gt.type==="mousedown"?Gt.target:e.getNode(),Go=_d(ye.fromDom(co),kA).map(Ns=>Ns.dom).filter(Ns=>s.isEditable(Ns.parentElement)||Ns.nodeName==="IMG"&&s.isEditable(Ns)).getOrUndefined(),Fs=ae(Go)?s.getAttrib(Go,sg,"1"):"1";if(ue(s.select(`img[${sg}],hr[${sg}]`),Ns=>{Ns.removeAttribute(sg)}),ae(Go)&&Cn(Go,g)&&n.hasFocus()){vn();const Ns=e.getStart(!0);if(Cn(Ns,Go)&&Cn(e.getEnd(!0),Go)){s.setAttrib(Go,sg,Fs),_s.throttle(Go);return}}Xt()},Vo=()=>{$t(v4,Gt=>{Gt.elm&&(s.unbind(Gt.elm),delete Gt.elm)})},vn=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(Gt){}};return n.on("init",()=>{vn(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Ro),n.on("keyup compositionend",Gt=>{y&&y.nodeName==="TABLE"&&Ro(Gt)}),n.on("hide blur",Xt),n.on("contextmenu longpress",Mt,!0)}),n.on("remove",Vo),{isResizable:Rn,showResizeRect:ea,hideResizeRect:Xt,updateResizeRect:Ro,destroy:()=>{_s.cancel(),y=C=I=null}}},eee=(e,n)=>{n.fold(s=>{e.setStartBefore(s.dom)},(s,a)=>{e.setStart(s.dom,a)},s=>{e.setStartAfter(s.dom)})},kH=(e,n)=>{n.fold(s=>{e.setEndBefore(s.dom)},(s,a)=>{e.setEnd(s.dom,a)},s=>{e.setEndAfter(s.dom)})},y4=(e,n,s)=>{const a=e.document.createRange();return eee(a,n),kH(a,s),a},qn=(e,n,s,a,f)=>{const g=e.document.createRange();return g.setStart(n.dom,s),g.setEnd(a.dom,f),g},$p=td.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),w4=(e,n,s)=>n(ye.fromDom(s.startContainer),s.startOffset,ye.fromDom(s.endContainer),s.endOffset),AH=(e,n)=>n.match({domRange:s=>({ltr:he(s),rtl:V.none}),relative:(s,a)=>({ltr:xt(()=>y4(e,s,a)),rtl:xt(()=>V.some(y4(e,a,s)))}),exact:(s,a,f,g)=>({ltr:xt(()=>qn(e,s,a,f,g)),rtl:xt(()=>V.some(qn(e,f,g,s,a)))})}),hb=(e,n)=>{const s=n.ltr();return s.collapsed?n.rtl().filter(f=>f.collapsed===!1).map(f=>$p.rtl(ye.fromDom(f.endContainer),f.endOffset,ye.fromDom(f.startContainer),f.startOffset)).getOrThunk(()=>w4(e,$p.ltr,s)):w4(e,$p.ltr,s)},EH=(e,n)=>{const s=AH(e,n);return hb(e,s)};$p.ltr,$p.rtl;const x4={create:(e,n,s,a)=>({start:e,soffset:n,finish:s,foffset:a})},TH=(e,n,s)=>{var a,f;return V.from((f=(a=e.dom).caretPositionFromPoint)===null||f===void 0?void 0:f.call(a,n,s)).bind(g=>{if(g.offsetNode===null)return V.none();const y=e.dom.createRange();return y.setStart(g.offsetNode,g.offset),y.collapse(),V.some(y)})},AA=(e,n,s)=>{var a,f;return V.from((f=(a=e.dom).caretRangeFromPoint)===null||f===void 0?void 0:f.call(a,n,s))},OH=document.caretPositionFromPoint?TH:document.caretRangeFromPoint?AA:V.none,DH=(e,n,s)=>{const a=ye.fromDom(e.document);return OH(a,n,s).map(f=>x4.create(ye.fromDom(f.startContainer),f.startOffset,ye.fromDom(f.endContainer),f.endOffset))},qw=td.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),S4=(e,n,s,a)=>e.fold(n,s,a),C4=e=>e.fold(at,at,at),_H=qw.before,MH=qw.on,k4=qw.after,Jf={before:_H,on:MH,after:k4,cata:S4,getStart:C4},Gw=td.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),gs=e=>Gw.exact(e.start,e.soffset,e.finish,e.foffset),RH=e=>e.match({domRange:n=>ye.fromDom(n.startContainer),relative:(n,s)=>Jf.getStart(n),exact:(n,s,a,f)=>n}),Qf=Gw.domRange,Wd=Gw.relative,Kw=Gw.exact,Il=e=>{const n=RH(e);return tu(n)},Yw=x4.create,jd={domRange:Qf,relative:Wd,exact:Kw,exactFromRange:gs,getWin:Il,range:Yw},rg=(e,n)=>{const s=ts(e);return s==="input"?Jf.after(e):Je(["br","img"],s)?n===0?Jf.before(e):Jf.after(e):Jf.on(e,n)},Hp=(e,n)=>{const s=e.fold(Jf.before,rg,Jf.after),a=n.fold(Jf.before,rg,Jf.after);return jd.relative(s,a)},A4=(e,n,s,a)=>{const f=rg(e,n),g=rg(s,a);return jd.relative(f,g)},PH=e=>e.match({domRange:n=>{const s=ye.fromDom(n.startContainer),a=ye.fromDom(n.endContainer);return A4(s,n.startOffset,a,n.endOffset)},relative:Hp,exact:A4}),EA=(e,n)=>{const a=document.createDocumentFragment();return ue(e,f=>{a.appendChild(f.dom)}),ye.fromDom(a)},NH=e=>{const n=jd.getWin(e).dom,s=(f,g,y,C)=>qn(n,f,g,y,C),a=PH(e);return EH(n,a).match({ltr:s,rtl:s})},rs=(e,n,s)=>DH(e,n,s),du=(e,n,s)=>{const a=tu(ye.fromDom(s));return rs(a.dom,e,n).map(f=>{const g=s.createRange();return g.setStart(f.start.dom,f.soffset),g.setEnd(f.finish.dom,f.foffset),g}).getOrUndefined()},eh=(e,n)=>ae(e)&&ae(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,BH=(e,n,s)=>{let a=e;for(;a&&a!==n;){if(s(a))return a;a=a.parentNode}return null},Vp=(e,n,s)=>BH(e,n,s)!==null,fs=(e,n,s)=>Vp(e,n,a=>a.nodeName===s),FH=(e,n)=>Ba(e)&&!Vp(e,n,hc),TA=(e,n,s)=>{const a=n.parentNode;if(a){const f=new tr(n,e.getParent(a,e.isBlock)||e.getRoot());let g;for(;g=f[s?"prev":"next"]();)if(Zs(g))return!0}return!1},OA=(e,n)=>{var s;return((s=e.previousSibling)===null||s===void 0?void 0:s.nodeName)===n},IH=(e,n)=>{let s=n;for(;s&&s!==e;){if(ms(s))return!0;s=s.parentNode}return!1},Lh=(e,n,s,a,f)=>{const g=e.getRoot(),y=e.schema.getNonEmptyElements(),C=f.parentNode;let A,M;if(!C)return V.none();const I=e.getParent(C,e.isBlock)||g;if(a&&Zs(f)&&n&&e.isEmpty(I))return V.some(bt(C,e.nodeIndex(f)));const L=new tr(f,I);for(;M=L[a?"prev":"next"]();){if(e.getContentEditableParent(M)==="false"||FH(M,g))return V.none();if(Vt(M)&&M.data.length>0)return fs(M,g,"A")?V.none():V.some(bt(M,a?M.data.length:0));if(e.isBlock(M)||y[M.nodeName.toLowerCase()])return V.none();A=M}return Mf(A)?V.none():s&&A?V.some(bt(A,0)):V.none()},$h=(e,n,s,a)=>{const f=e.getRoot();let g,y=!1,C=s?a.startContainer:a.endContainer,A=s?a.startOffset:a.endOffset;const M=wn(C)&&A===C.childNodes.length,I=e.schema.getNonEmptyElements();let L=s;if(Ba(C))return V.none();if(wn(C)&&A>C.childNodes.length-1&&(L=!1),x0(C)&&(C=f,A=0),C===f){if(L&&(g=C.childNodes[A>0?A-1:0],g&&(Ba(g)||I[g.nodeName]||Pd(g))))return V.none();if(C.hasChildNodes()){if(A=Math.min(!L&&A>0?A-1:A,C.childNodes.length-1),C=C.childNodes[A],A=Vt(C)&&M?C.data.length:0,!n&&C===f.lastChild&&Pd(C)||IH(f,C)||Ba(C)||Pt(C))return V.none();if(C.hasChildNodes()&&!Pd(C)){g=C;const W=new tr(C,f);do{if(ms(g)||Ba(g)){y=!1;break}if(Vt(g)&&g.data.length>0){A=L?0:g.data.length,C=g,y=!0;break}if(I[g.nodeName.toLowerCase()]&&!ia(g)){A=e.nodeIndex(g),C=g.parentNode,L||A++,y=!0;break}}while(g=L?W.next():W.prev())}}}return n&&(Vt(C)&&A===0&&Lh(e,M,n,!0,C).each(W=>{C=W.container(),A=W.offset(),y=!0}),wn(C)&&(g=C.childNodes[A],g||(g=C.childNodes[A-1]),g&&Zs(g)&&!OA(g,"A")&&!TA(e,g,!1)&&!TA(e,g,!0)&&Lh(e,M,n,!0,g).each(W=>{C=W.container(),A=W.offset(),y=!0}))),L&&!n&&Vt(C)&&A===C.data.length&&Lh(e,M,n,!1,C).each(W=>{C=W.container(),A=W.offset(),y=!0}),y&&C?V.some(bt(C,A)):V.none()},mb=(e,n)=>{const s=n.collapsed,a=n.cloneRange(),f=bt.fromRangeStart(n);return $h(e,s,!0,a).each(g=>{(!s||!bt.isAbove(f,g))&&a.setStart(g.container(),g.offset())}),s||$h(e,s,!1,a).each(g=>{a.setEnd(g.container(),g.offset())}),s&&a.collapse(!0),eh(n,a)?V.none():V.some(a)},Xw=(e,n)=>e.splitText(n),Jw=e=>{let n=e.startContainer,s=e.startOffset,a=e.endContainer,f=e.endOffset;if(n===a&&Vt(n)){if(s>0&&s<n.data.length)if(a=Xw(n,s),n=a.previousSibling,f>s){f=f-s;const g=Xw(a,f).previousSibling;n=a=g,f=g.data.length,s=0}else f=0}else if(Vt(n)&&s>0&&s<n.data.length&&(n=Xw(n,s),s=0),Vt(a)&&f>0&&f<a.data.length){const g=Xw(a,f).previousSibling;a=g,f=g.data.length}return{startContainer:n,startOffset:s,endContainer:a,endOffset:f}},ig=e=>({walk:(g,y)=>db(e,g,y),split:Jw,expand:(g,y={type:"word"})=>{if(y.type==="word"){const C=Yf(e,g,[{inline:"span"}]),A=e.createRng();return A.setStart(C.startContainer,C.startOffset),A.setEnd(C.endContainer,C.endOffset),A}return g},normalize:g=>mb(e,g).fold(ce,y=>(g.setStart(y.startContainer,y.startOffset),g.setEnd(y.endContainer,y.endOffset),!0))});ig.compareRanges=eh,ig.getCaretRangeFromPoint=du,ig.getSelectedNode=fw,ig.getNode=Vf;const zp=((e,n)=>{const s=(C,A)=>{if(!ht(A)&&!A.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+A);const M=C.dom;Df(M)&&(M.style[e]=A+"px")},a=C=>{const A=n(C);if(A<=0||A===null){const M=ou(C,e);return parseFloat(M)||0}return A},f=a,g=(C,A)=>ve(A,(M,I)=>{const L=ou(C,I),W=L===void 0?0:parseInt(L,10);return isNaN(W)?M:M+W},0);return{set:s,get:a,getOuter:f,aggregate:g,max:(C,A,M)=>{const I=g(C,M);return A>I?A-I:0}}})("height",e=>{const n=e.dom;return Sh(e)?n.getBoundingClientRect().height:n.offsetHeight}),LH=e=>zp.get(e),DA=()=>ye.fromDom(document),E4=(e,n)=>e.view(n).fold(he([]),a=>{const f=e.owner(a),g=E4(e,f);return[a].concat(g)}),$H=(e,n)=>{const s=n.owner(e);return E4(n,s)};var oee=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?V.none():V.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(ye.fromDom)},owner:e=>Lu(e)});const VH=e=>{const n=DA(),s=Nn(n),a=$H(e,oee),f=Ht(e),g=kt(a,(y,C)=>{const A=Ht(C);return{left:y.left+A.left,top:y.top+A.top}},{left:0,top:0});return F(g.left+f.left+s.left,g.top+f.top+s.top)},ex=e=>ts(e)==="textarea",_A=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),MA=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},RA=(e,n)=>{const s=pi(e);if(s.length===0||ex(e))return{element:e,offset:n};if(n<s.length&&!ex(s[n]))return{element:s[n],offset:0};{const a=s[s.length-1];return ex(a)?{element:e,offset:n}:ts(a)==="img"?{element:a,offset:1}:Ao(a)?{element:a,offset:Zu(a).length}:{element:a,offset:pi(a).length}}},PA=(e,n)=>{const s=De(e),a=LH(e);return{element:e,bottom:s.top+a,height:a,pos:s,cleanup:n}},T4=(e,n)=>{const s=RA(e,n),a=ye.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Xi+"</span>");return Pa(s.element,a),PA(a,()=>ks(a))},O4=e=>PA(ye.fromDom(e),ge),gb=(e,n,s,a)=>{R4(e,(f,g)=>_4(e,n,s,a),s)},D4=(e,n,s,a,f)=>{const g={elm:a.element.dom,alignToTop:f};if(_A(e,g))return;const y=Nn(n).top;s(e,n,y,a,f),MA(e,g)},_4=(e,n,s,a)=>{const f=ye.fromDom(e.getBody()),g=ye.fromDom(e.getDoc());Wr(f);const y=T4(ye.fromDom(s.startContainer),s.startOffset);D4(e,g,n,y,a),y.cleanup()},M4=(e,n,s,a)=>{const f=ye.fromDom(e.getDoc());D4(e,f,s,O4(n),a)},R4=(e,n,s)=>{const a=s.startContainer,f=s.startOffset,g=s.endContainer,y=s.endOffset;n(ye.fromDom(a),ye.fromDom(g));const C=e.dom.createRng();C.setStart(a,f),C.setEnd(g,y),e.selection.setRng(s)},tx=(e,n,s,a,f)=>{const g=n.pos;if(a)vo(g.left,g.top,f);else{const y=g.top-s+n.height;vo(-e.getBody().getBoundingClientRect().left,y,f)}},NA=(e,n,s,a,f,g)=>{const y=a+s,C=f.pos.top,A=f.bottom,M=A-C>=a;C<s?tx(e,f,a,g!==!1,n):C>y?tx(e,f,a,M?g!==!1:g===!0,n):A>y&&!M&&tx(e,f,a,g===!0,n)},BA=(e,n,s,a,f)=>{const g=tu(n).dom.innerHeight;NA(e,n,s,g,a,f)},FA=(e,n,s,a,f)=>{const g=tu(n).dom.innerHeight;NA(e,n,s,g,a,f);const y=VH(a.element),C=Gi(window);y.top<C.y?yo(a.element,f!==!1):y.top>C.bottom&&yo(a.element,f===!0)},zH=(e,n,s)=>gb(e,BA,n,s),UH=(e,n,s)=>M4(e,n,BA,s),WH=(e,n,s)=>gb(e,FA,n,s),jH=(e,n,s)=>M4(e,n,FA,s),ZH=(e,n,s)=>{(e.inline?UH:jH)(e,n,s)},pb=(e,n,s)=>{(e.inline?zH:WH)(e,n,s)},P4=(e,n=!1)=>e.dom.focus({preventScroll:n}),N4=e=>{const n=Hu(e).dom;return e.dom===n.activeElement},Up=(e=DA())=>V.from(e.dom.activeElement).map(ye.fromDom),B4=e=>Up(Hu(e)).filter(n=>e.dom.contains(n.dom)),F4=(e,n)=>{const s=Ao(n)?Zu(n).length:pi(n).length+1;return e>s?s:e<0?0:e},I4=e=>jd.range(e.start,F4(e.soffset,e.start),e.finish,F4(e.foffset,e.finish)),IA=(e,n)=>!zu(n.dom)&&(Iu(e,n)||ys(e,n)),L4=e=>n=>IA(e,n.start)&&IA(e,n.finish),qH=e=>e.inline||sn.browser.isFirefox(),GH=e=>jd.range(ye.fromDom(e.startContainer),e.startOffset,ye.fromDom(e.endContainer),e.endOffset),KH=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?V.none():V.from(n.getRangeAt(0))).map(GH)},YH=e=>{const n=tu(e);return KH(n.dom).filter(L4(e))},$4=(e,n)=>V.from(n).filter(L4(e)).map(I4),H4=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),V.some(n)}catch(s){return V.none()}},Wp=e=>{const n=qH(e)?YH(ye.fromDom(e.getBody())):V.none();e.bookmark=n.isSome()?n:e.bookmark},LA=e=>(e.bookmark?e.bookmark:V.none()).bind(s=>$4(ye.fromDom(e.getBody()),s)).bind(H4),XH=e=>{LA(e).each(n=>e.selection.setRng(n))},z4={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},U4=(e,n)=>(ht(n)||(n=0),setTimeout(e,n)),W4=(e,n)=>(ht(n)||(n=0),setInterval(e,n)),pc={setEditorTimeout:(e,n,s)=>U4(()=>{e.removed||n()},s),setEditorInterval:(e,n,s)=>{const a=W4(()=>{e.removed?clearInterval(a):n()},s);return a}},JH=e=>e.type==="nodechange"&&e.selectionChange,QH=(e,n)=>{const s=()=>{n.throttle()};or.DOM.bind(document,"mouseup",s),e.on("remove",()=>{or.DOM.unbind(document,"mouseup",s)})},e9=(e,n)=>{e.on("mouseup touchend",s=>{n.throttle()})},t9=(e,n)=>{e9(e,n),e.on("keyup NodeChange AfterSetSelectionRange",s=>{JH(s)||Wp(e)})},nx=e=>{const n=cw(()=>{Wp(e)},0);e.on("init",()=>{e.inline&&QH(e,n),t9(e,n)}),e.on("remove",()=>{n.cancel()})};let ag;const ox=or.DOM,j4=e=>wn(e)&&z4.isEditorUIElement(e),sx=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},rx=(e,n)=>{const s=v3(e);return ox.getParent(n,f=>j4(f)||(s?e.dom.is(f,s):!1))!==null},$A=e=>{try{const n=Hu(ye.fromDom(e.getElement()));return Up(n).fold(()=>document.body,s=>s.dom)}catch(n){return document.body}},n9=(e,n)=>{const s=n.editor;nx(s);const a=(f,g)=>{if(E7(f)&&f.inline!==!0){const y=ye.fromDom(f.getContainer());g(y,"tox-edit-focus")}};s.on("focusin",()=>{const f=e.focusedEditor;sx($A(s))&&a(s,Af),f!==s&&(f&&f.dispatch("blur",{focusedEditor:s}),e.setActive(s),e.focusedEditor=s,s.dispatch("focus",{blurredEditor:f}),s.focus(!0))}),s.on("focusout",()=>{pc.setEditorTimeout(s,()=>{const f=e.focusedEditor;(!sx($A(s))||f!==s)&&a(s,Fu),!rx(s,$A(s))&&f===s&&(s.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),ag||(ag=f=>{const g=e.activeEditor;g&&xh(f).each(y=>{const C=y;C.ownerDocument===document&&C!==document.body&&!rx(g,C)&&e.focusedEditor===g&&(g.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},ox.bind(document,"focusin",ag))},o9=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&ag&&(ox.unbind(document,"focusin",ag),ag=null)},s9=e=>{e.on("AddEditor",Pe(n9,e)),e.on("RemoveEditor",Pe(o9,e))},r9=(e,n)=>e.dom.getParent(n,s=>e.dom.getContentEditable(s)==="true"),i9=e=>e.collapsed?V.from(Vf(e.startContainer,e.startOffset)).map(ye.fromDom):V.none(),a9=(e,n)=>i9(n).bind(s=>Rf(s)?V.some(s):Iu(e,s)?V.none():V.some(e)),Z4=(e,n)=>{a9(ye.fromDom(e.getBody()),n).bind(s=>La(s.dom)).fold(()=>{e.selection.normalize()},s=>e.selection.setRng(s.toRange()))},HA=e=>{if(e.setActive)try{e.setActive()}catch(n){e.focus()}else e.focus()},l9=e=>N4(e)||B4(e).isSome(),c9=e=>ae(e.iframeElement)&&N4(ye.fromDom(e.iframeElement)),ix=e=>{const n=e.getBody();return n&&l9(ye.fromDom(n))},q4=e=>{const n=Hu(ye.fromDom(e.getElement()));return Up(n).filter(s=>!sx(s.dom)&&rx(e,s.dom)).isSome()},Hh=e=>e.inline?ix(e):c9(e),G4=e=>Hh(e)||q4(e),u9=e=>{const n=e.selection,s=e.getBody();let a=n.getRng();e.quirks.refreshContentEditable(),ae(e.bookmark)&&!Hh(e)&&LA(e).each(g=>{e.selection.setRng(g),a=g});const f=r9(e,n.getNode());if(f&&e.dom.isChildOf(f,s)){HA(f),Z4(e,a),VA(e);return}e.inline||(sn.browser.isOpera()||HA(s),e.getWin().focus()),(sn.browser.isFirefox()||e.inline)&&(HA(s),Z4(e,a)),VA(e)},VA=e=>e.editorManager.setActive(e),d9=(e,n)=>{e.removed||(n?VA(e):u9(e))},K4=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),Y4=(e,n,s,a,f)=>{const g=s?n.startContainer:n.endContainer,y=s?n.startOffset:n.endOffset;return V.from(g).map(ye.fromDom).map(C=>!a||!n.collapsed?Tf(C,f(C,y)).getOr(C):C).bind(C=>gn(C)?V.some(C):ra(C).filter(gn)).map(C=>C.dom).getOr(e)},zA=(e,n,s=!1)=>Y4(e,n,!0,s,(a,f)=>Math.min(Ra(a),f)),X4=(e,n,s=!1)=>Y4(e,n,!1,s,(a,f)=>f>0?f-1:f),UA=(e,n)=>{const s=e;for(;e&&Vt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||s},J4=(e,n)=>{if(!n)return e;let s=n.startContainer,a=n.endContainer;const f=n.startOffset,g=n.endOffset;let y=n.commonAncestorContainer;n.collapsed||(s===a&&g-f<2&&s.hasChildNodes()&&(y=s.childNodes[f]),Vt(s)&&Vt(a)&&(s.length===f?s=UA(s.nextSibling,!0):s=s.parentNode,g===0?a=UA(a.previousSibling,!1):a=a.parentNode,s&&s===a&&(y=s)));const C=Vt(y)?y.parentNode:y;return _f(C)?C:e},f9=(e,n,s,a)=>{const f=[],g=e.getRoot(),y=e.getParent(s||zA(g,n,n.collapsed),e.isBlock),C=e.getParent(a||X4(g,n,n.collapsed),e.isBlock);if(y&&y!==g&&f.push(y),y&&C&&y!==C){let A;const M=new tr(y,g);for(;(A=M.next())&&A!==C;)e.isBlock(A)&&f.push(A)}return C&&y!==C&&C!==g&&f.push(C),f},h9=(e,n,s)=>V.from(n).bind(a=>V.from(a.parentNode).map(f=>{const g=e.nodeIndex(a),y=e.createRng();return y.setStart(f,g),y.setEnd(f,g+1),s&&(lA(e,y,a,!0),lA(e,y,a,!1)),y})),WA=(e,n)=>tt(n,s=>{const a=e.dispatch("GetSelectionRange",{range:s});return a.range!==s?a.range:s}),m9=e=>ts(e)==="img"?1:L2(e).fold(()=>pi(e).length,n=>n.length),g9=e=>L2(e).filter(n=>n.trim().length!==0||n.indexOf(ws)>-1).isSome(),p9=e=>At(e)&&gi(e,"contenteditable")==="false",b9=["img","br"],Q4=e=>g9(e)||Je(b9,ts(e))||p9(e),v9=e=>qi(e,Q4),y9=e=>w9(e,Q4),w9=(e,n)=>{const s=a=>{const f=pi(a);for(let g=f.length-1;g>=0;g--){const y=f[g];if(n(y))return V.some(y);const C=s(y);if(C.isSome())return C}return V.none()};return s(e)},eR="[data-mce-autocompleter]",x9=(e,n)=>{if(tR(ye.fromDom(e.getBody())).isNone()){const s=ye.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Jr(s,ye.fromDom(n.extractContents())),n.insertNode(s.dom),ra(s).each(a=>a.dom.normalize()),y9(s).map(a=>{e.selection.setCursorLocation(a.dom,m9(a))})}},S9=e=>_d(e,eR),tR=e=>Ch(e,eR),C9=(e,n)=>tR(n).each(s=>{const a=e.selection.getBookmark();Ql(s),e.selection.moveToBookmark(a)}),k9={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},ax=(e,n,s)=>{const a=s?"lastChild":"firstChild",f=s?"prev":"next";if(e[a])return e[a];if(e!==n){let g=e[f];if(g)return g;for(let y=e.parent;y&&y!==n;y=y.parent)if(g=y[f],g)return g}},A9=e=>{var n;const s=(n=e.value)!==null&&n!==void 0?n:"";if(!Th(s))return!1;const a=e.parent;return!(a&&(a.name!=="span"||a.attr("style"))&&/^[ ]+$/.test(s))},Fn=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class $a{static create(n,s){const a=new $a(n,k9[n]||1);return s&&$t(s,(f,g)=>{a.attr(g,f)}),a}constructor(n,s){this.name=n,this.type=s,s===1&&(this.attributes=[],this.attributes.map={})}replace(n){const s=this;return n.parent&&n.remove(),s.insert(n,s),s.remove(),s}attr(n,s){const a=this;if(!Z(n))return ae(n)&&$t(n,(g,y)=>{a.attr(y,g)}),a;const f=a.attributes;if(f){if(s!==void 0){if(s===null){if(n in f.map){delete f.map[n];let g=f.length;for(;g--;)if(f[g].name===n)return f.splice(g,1),a}return a}if(n in f.map){let g=f.length;for(;g--;)if(f[g].name===n){f[g].value=s;break}}else f.push({name:n,value:s});return f.map[n]=s,a}return f.map[n]}}clone(){const n=this,s=new $a(n.name,n.type),a=n.attributes;if(a){const f=[];f.map={};for(let g=0,y=a.length;g<y;g++){const C=a[g];C.name!=="id"&&(f[f.length]={name:C.name,value:C.value},f.map[C.name]=C.value)}s.attributes=f}return s.value=n.value,s}wrap(n){const s=this;return s.parent&&(s.parent.insert(n,s),n.append(s)),s}unwrap(){const n=this;for(let s=n.firstChild;s;){const a=s.next;n.insert(s,n,!0),s=a}n.remove()}remove(){const n=this,s=n.parent,a=n.next,f=n.prev;return s&&(s.firstChild===n?(s.firstChild=a,a&&(a.prev=null)):f&&(f.next=a),s.lastChild===n?(s.lastChild=f,f&&(f.next=null)):a&&(a.prev=f),n.parent=n.next=n.prev=null),n}append(n){const s=this;n.parent&&n.remove();const a=s.lastChild;return a?(a.next=n,n.prev=a,s.lastChild=n):s.lastChild=s.firstChild=n,n.parent=s,n}insert(n,s,a){n.parent&&n.remove();const f=s.parent||this;return a?(s===f.firstChild?f.firstChild=n:s.prev&&(s.prev.next=n),n.prev=s.prev,n.next=s,s.prev=n):(s===f.lastChild?f.lastChild=n:s.next&&(s.next.prev=n),n.next=s.next,n.prev=s,s.next=n),n.parent=f,n}getAll(n){const s=this,a=[];for(let f=s.firstChild;f;f=ax(f,s))f.name===n&&a.push(f);return a}children(){const n=this,s=[];for(let a=n.firstChild;a;a=a.next)s.push(a);return s}empty(){const n=this;if(n.firstChild){const s=[];for(let f=n.firstChild;f;f=ax(f,n))s.push(f);let a=s.length;for(;a--;){const f=s[a];f.parent=f.firstChild=f.lastChild=f.next=f.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,s={},a){var f;const g=this;let y=g.firstChild;if(Fn(g))return!1;if(y)do{if(y.type===1){if(y.attr("data-mce-bogus"))continue;if(n[y.name]||Fn(y))return!1}if(y.type===8||y.type===3&&!A9(y)||y.type===3&&y.parent&&s[y.parent.name]&&Th((f=y.value)!==null&&f!==void 0?f:"")||a&&a(y))return!1}while(y=ax(y,g));return!0}walk(n){return ax(this,null,n)}}const nR=Lt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),oR=e=>Z(e.nodeValue)&&e.nodeValue.includes(Xi),lx=e=>`${e.length===0?"":`${tt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,E9=(e,n)=>n.querySelectorAll(lx(e)),sR=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>oR(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),rR=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(oR(n)){const s=n.parentNode;return s&&Bn(nR,s.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),T9=e=>sR(e).nextNode()!==null,O9=e=>rR(e).nextNode()!==null,cx=(e,n)=>n.querySelector(lx(e))!==null,iR=(e,n)=>{ue(E9(e,n),s=>{const a=ye.fromDom(s);gi(a,"data-mce-bogus")==="all"?ks(a):ue(e,f=>{Od(a,f)&&Ir(a,f)})})},D9=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},_9=O(D9,sR),po=O(D9,rR),aR=(e,n)=>{const s=[{condition:Pe(cx,n),action:Pe(iR,n)},{condition:T9,action:_9},{condition:O9,action:po}];let a=e,f=!1;return ue(s,({condition:g,action:y})=>{g(a)&&(f||(a=e.cloneNode(!0),f=!0),y(a))}),a},So=e=>{const n=ya(e,"[data-mce-bogus]");ue(n,s=>{gi(s,"data-mce-bogus")==="all"?ks(s):Im(s)?(Pa(s,ye.fromText(C0)),ks(s)):Ql(s)})},jA=e=>{const n=ya(e,"input");ue(n,s=>{Ir(s,"name")})},see=(e,n)=>{const s=Ia(e),a=new RegExp(`^(<${s}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${s}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(a,"")},ree=(e,n)=>{const s=e.getDoc(),a=Hu(ye.fromDom(e.getBody())),f=ye.fromTag("div",s);Js(f,"data-mce-bogus","all"),kh(f,{position:"fixed",left:"-9999999px",top:"0"}),rp(f,n.innerHTML),So(f),jA(f);const g=pM(a);Jr(g,f);const y=rc(f.dom.innerText);return ks(f),y},M9=(e,n,s)=>{let a;return n.format==="raw"?a=Lt.trim(rc(aR(s,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?a=ree(e,s):n.format==="tree"?a=e.serializer.serialize(s,n):a=see(e,e.serializer.serialize(s,n)),n.format!=="text"&&!Hi(ye.fromDom(s))&&Z(a)?Lt.trim(a):a},iee=(e,n)=>V.from(e.getBody()).fold(he(n.format==="tree"?new $a("body",11):""),s=>M9(e,n,s)),R9=Lt.makeMap,lR=e=>{const n=[];e=e||{};const s=e.indent,a=R9(e.indent_before||""),f=R9(e.indent_after||""),g=Dh.getEncodeFunc(e.entity_encoding||"raw",e.entities),y=e.element_format!=="xhtml";return{start:(C,A,M)=>{if(s&&a[C]&&n.length>0){const I=n[n.length-1];I.length>0&&I!==`
`&&n.push(`
`)}if(n.push("<",C),A)for(let I=0,L=A.length;I<L;I++){const W=A[I];n.push(" ",W.name,'="',g(W.value,!0),'"')}if(!M||y?n[n.length]=">":n[n.length]=" />",M&&s&&f[C]&&n.length>0){const I=n[n.length-1];I.length>0&&I!==`
`&&n.push(`
`)}},end:C=>{let A;n.push("</",C,">"),s&&f[C]&&n.length>0&&(A=n[n.length-1],A.length>0&&A!==`
`&&n.push(`
`))},text:(C,A)=>{C.length>0&&(n[n.length]=A?C:g(C))},cdata:C=>{n.push("<![CDATA[",C,"]]>")},comment:C=>{n.push("<!--",C,"-->")},pi:(C,A)=>{A?n.push("<?",C," ",g(A),"?>"):n.push("<?",C,"?>"),s&&n.push(`
`)},doctype:C=>{n.push("<!DOCTYPE",C,">",s?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Vh=(e={},n=Hf())=>{const s=lR(e);return e.validate="validate"in e?e.validate:!0,{serialize:f=>{const g=e.validate,y={3:A=>{var M;s.text((M=A.value)!==null&&M!==void 0?M:"",A.raw)},8:A=>{var M;s.comment((M=A.value)!==null&&M!==void 0?M:"")},7:A=>{s.pi(A.name,A.value)},10:A=>{var M;s.doctype((M=A.value)!==null&&M!==void 0?M:"")},4:A=>{var M;s.cdata((M=A.value)!==null&&M!==void 0?M:"")},11:A=>{let M=A;if(M=M.firstChild)do C(M);while(M=M.next)}};s.reset();const C=A=>{var M;const I=y[A.type];if(I)I(A);else{const L=A.name,W=L in n.getVoidElements();let re=A.attributes;if(g&&re&&re.length>1){const de=[];de.map={};const te=n.getElementRule(A.name);if(te){for(let fe=0,Fe=te.attributesOrder.length;fe<Fe;fe++){const ze=te.attributesOrder[fe];if(ze in re.map){const Ve=re.map[ze];de.map[ze]=Ve,de.push({name:ze,value:Ve})}}for(let fe=0,Fe=re.length;fe<Fe;fe++){const ze=re[fe].name;if(!(ze in de.map)){const Ve=re.map[ze];de.map[ze]=Ve,de.push({name:ze,value:Ve})}}re=de}}if(s.start(L,re,W),Ku(L))Z(A.value)&&s.text(A.value,!0),s.end(L);else if(!W){let de=A.firstChild;if(de){(L==="pre"||L==="textarea")&&de.type===3&&((M=de.value)===null||M===void 0?void 0:M[0])===`
`&&s.text(`
`,!0);do C(de);while(de=de.next)}s.end(L)}}};return f.type===1&&!e.inner?C(f):f.type===3?y[3](f):y[11](f),s.getContent()}}},Xn=new Set;ue(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{Xn.add(n)});const cR=["font","text-decoration","text-emphasis"],ZA=(e,n)=>Fo(e.parseStyle(e.getAttrib(n,"style"))),P9=e=>Xn.has(e),bb=(e,n)=>ho(ZA(e,n),s=>!P9(s)),uR=e=>Me(e,n=>Bt(cR,s=>Vn(n,s))),N9=(e,n,s)=>{const a=ZA(e,n),f=ZA(e,s),g=y=>{var C,A;const M=(C=e.getStyle(n,y))!==null&&C!==void 0?C:"",I=(A=e.getStyle(s,y))!==null&&A!==void 0?A:"";return Po(M)&&Po(I)&&M!==I};return Bt(a,y=>{const C=A=>Bt(A,M=>M===y);if(!C(f)&&C(cR)){const A=uR(f);return Bt(A,g)}else return g(y)})},dR=(e,n,s)=>V.from(s.container()).filter(Vt).exists(a=>{const f=e?0:-1;return n(a.data.charAt(s.offset()+f))}),qA=Pe(dR,!0,sb),ux=Pe(dR,!1,sb),B9=e=>{const n=e.container();return Vt(n)&&(n.data.length===0||Ml(n.data)&&ng.isBookmarkNode(n.parentNode))},lg=(e,n)=>s=>Nw(e?0:-1,s).filter(n).isSome(),F9=e=>Ka(e)&&ou(ye.fromDom(e),"display")==="block",fR=e=>ms(e)&&!N2(e),I9=lg(!0,F9),L9=lg(!1,F9),vb=lg(!0,Qr),jp=lg(!1,Qr),hR=lg(!0,Pd),No=lg(!1,Pd),th=lg(!0,fR),sd=lg(!1,fR),mR=e=>e.slice(0,-1),gR=(e,n,s)=>Iu(n,e)?mR(Py(e,a=>s(a)||ys(a,n))):[],GA=(e,n)=>gR(e,n,ce),Zd=(e,n)=>[e].concat(GA(e,n)),dx=(e,n,s)=>Jk(e,n,s,B9),$9=e=>n=>e.isBlock(ts(n)),KA=(e,n,s)=>ot(Zd(ye.fromDom(n.container()),e),$9(s)),pR=(e,n,s,a)=>dx(e,n.dom,s).forall(f=>KA(n,s,a).fold(()=>!nd(f,s,n.dom),g=>!nd(f,s,n.dom)&&Iu(g,ye.fromDom(f.container())))),bR=(e,n,s,a)=>KA(n,s,a).fold(()=>dx(e,n.dom,s).forall(f=>!nd(f,s,n.dom)),f=>dx(e,f.dom,s).isNone()),YA=Pe(bR,!1),vR=Pe(bR,!0),H9=Pe(pR,!1),V9=Pe(pR,!0),z9=e=>Bw(e).exists(Im),fx=(e,n,s,a)=>{const f=Me(Zd(ye.fromDom(s.container()),n),y=>a.isBlock(ts(y))),g=Wt(f).getOr(n);return Nl(e,g.dom,s).filter(z9)},yb=(e,n,s)=>Bw(n).exists(Im)||fx(!0,e,n,s).isSome(),wb=(e,n,s)=>Z7(n).exists(Im)||fx(!1,e,n,s).isSome(),U9=Pe(fx,!1),W9=Pe(fx,!0),yR=e=>bt.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),wR=(e,n,s)=>{const a=Me(Zd(ye.fromDom(n.container()),e),f=>s.isBlock(ts(f)));return Wt(a).getOr(e)},xR=(e,n,s)=>yR(n)?ux(n):ux(n)||gl(wR(e,n,s).dom,n).exists(ux),SR=(e,n,s)=>yR(n)?qA(n):qA(n)||Qa(wR(e,n,s).dom,n).exists(qA),j9=e=>Je(["pre","pre-wrap"],e),XA=e=>Bw(e).bind(n=>fl(n,gn)).exists(n=>j9(ou(n,"white-space"))),CR=(e,n)=>gl(e.dom,n).isNone(),Z9=(e,n)=>Qa(e.dom,n).isNone(),q9=(e,n,s)=>CR(e,n)||Z9(e,n)||YA(e,n,s)||vR(e,n,s)||wb(e,n,s)||yb(e,n,s),cg=e=>ae(e)&&ms(e)&&Uk(e),kR=(e,n)=>s=>cg(new tr(s,e)[n]()),AR=(e,n)=>{const s=Qa(e.dom,n).getOr(n),a=kR(e.dom,"next");return n.isAtEnd()&&(a(n.container())||a(s.container()))},G9=(e,n)=>{const s=gl(e.dom,n).getOr(n),a=kR(e.dom,"prev");return n.isAtStart()&&(a(n.container())||a(s.container()))},ER=(e,n,s)=>XA(n)?!1:q9(e,n,s)||xR(e,n,s)||SR(e,n,s),Zp=(e,n,s)=>XA(n)?!1:YA(e,n,s)||H9(e,n,s)||wb(e,n,s)||xR(e,n,s)||G9(e,n),TR=e=>{const n=e.container(),s=e.offset();return Vt(n)&&s<n.data.length?bt(n,s+1):e},qp=(e,n,s)=>XA(n)?!1:vR(e,n,s)||V9(e,n,s)||yb(e,n,s)||SR(e,n,s)||AR(e,n),hx=(e,n,s)=>Zp(e,n,s)||qp(e,TR(n),s),Ha=(e,n)=>sA(e.charAt(n)),OR=(e,n)=>sb(e.charAt(n)),K9=e=>{const n=e.container();return Vt(n)&&$n(n.data,ws)},Y9=e=>{const n=e.split("");return tt(n,(s,a)=>sA(s)&&a>0&&a<n.length-1&&rA(n[a-1])&&rA(n[a+1])?" ":s).join("")},DR=(e,n,s,a)=>{const f=n.data,g=bt(n,0);return!s&&Ha(f,0)&&!hx(e,g,a)?(n.data=" "+f.slice(1),!0):s&&OR(f,0)&&Zp(e,g,a)?(n.data=ws+f.slice(1),!0):!1},X9=e=>{const n=e.data,s=Y9(n);return s!==n?(e.data=s,!0):!1},zh=(e,n,s,a)=>{const f=n.data,g=bt(n,f.length-1);return!s&&Ha(f,f.length-1)&&!hx(e,g,a)?(n.data=f.slice(0,-1)+" ",!0):s&&OR(f,f.length-1)&&qp(e,g,a)?(n.data=f.slice(0,-1)+ws,!0):!1},J9=(e,n,s)=>{const a=n.container();if(!Vt(a))return V.none();if(K9(n)){const f=DR(e,a,!1,s)||X9(a)||zh(e,a,!1,s);return es(f,n)}else if(hx(e,n,s)){const f=DR(e,a,!0,s)||zh(e,a,!0,s);return es(f,n)}else return V.none()},Q9=e=>{const n=ye.fromDom(e.getBody());e.selection.isCollapsed()&&J9(n,bt.fromRangeStart(e.selection.getRng()),e.schema).each(s=>{e.selection.setRng(s.toRange())})},vr=(e,n,s,a)=>{if(s===0)return;const f=ye.fromDom(e),g=Ar(f,M=>a.isBlock(ts(M))).getOr(f),y=e.data.slice(n,n+s),C=n+s>=e.data.length&&qp(g,bt(e,e.data.length),a),A=n===0&&Zp(g,bt(e,0),a);e.replaceData(n,s,up(y,4,A,C))},ug=(e,n,s)=>{const a=e.data.slice(n),f=a.length-Oa(a).length;vr(e,n,f,s)},_R=(e,n,s)=>{const a=e.data.slice(0,n),f=a.length-Yl(a).length;vr(e,n-f,f,s)},Ri=(e,n,s,a,f=!0)=>{const g=Yl(e.data).length,y=f?e:n,C=f?n:e;return f?y.appendData(C.data):y.insertData(0,C.data),ks(ye.fromDom(C)),a&&ug(y,g,s),y},eV=(e,n)=>{const s=e.container(),a=e.offset();return!bt.isTextPosition(e)&&s===n.parentNode&&a>bt.before(n).offset()},tV=(e,n)=>eV(n,e)?bt(n.container(),n.offset()-1):n,nh=e=>Vt(e)?bt(e,0):bt.before(e),As=e=>Vt(e)?bt(e,e.data.length):bt.after(e),JA=e=>bi(e.previousSibling)?V.some(As(e.previousSibling)):e.previousSibling?lu(e.previousSibling):V.none(),QA=e=>bi(e.nextSibling)?V.some(nh(e.nextSibling)):e.nextSibling?La(e.nextSibling):V.none(),nV=(e,n)=>V.from(n.previousSibling?n.previousSibling:n.parentNode).bind(s=>gl(e,bt.before(s))).orThunk(()=>Qa(e,bt.after(n))),oV=(e,n)=>Qa(e,bt.after(n)).orThunk(()=>gl(e,bt.before(n))),sV=(e,n)=>JA(n).orThunk(()=>QA(n)).orThunk(()=>nV(e,n)),Ll=(e,n)=>QA(n).orThunk(()=>JA(n)).orThunk(()=>oV(e,n)),rd=(e,n,s)=>e?Ll(n,s):sV(n,s),rV=(e,n,s)=>rd(e,n,s).map(Pe(tV,s)),mx=(e,n,s)=>{s.fold(()=>{e.focus()},a=>{e.selection.setRng(a.toRange(),n)})},eE=e=>n=>n.dom===e,iV=(e,n)=>n&&Bn(e.schema.getBlockElements(),ts(n)),aV=(e,n)=>{if(Rr(e)){const s=ye.fromHtml('<br data-mce-bogus="1">');return n?ue(pi(e),a=>{pA(a)||ks(a)}):Md(e),Jr(e,s),V.some(bt.before(s.dom))}else return V.none()},xb=(e,n,s,a)=>{const f=Dc(e).filter(Ao),g=nu(e).filter(Ao);return ks(e),Ed(f,g,n,(y,C,A)=>{const M=y.dom,I=C.dom,L=M.data.length;return Ri(M,I,s,a),A.container()===I?bt(M,L):A}).orThunk(()=>(a&&(f.each(y=>_R(y.dom,y.dom.length,s)),g.each(y=>ug(y.dom,0,s))),n))},gx=(e,n)=>Bn(e.schema.getTextInlineElements(),ts(n)),oh=(e,n,s,a=!0,f=!1)=>{const g=rV(n,e.getBody(),s.dom),y=Ar(s,Pe(iV,e),eE(e.getBody())),C=xb(s,g,e.schema,gx(e,s));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):y.bind(A=>aV(A,f)).fold(()=>{a&&mx(e,n,C)},A=>{a&&mx(e,n,V.some(A))})},lV=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,id=e=>lV.test(e),dg=(e,n)=>Ol(ye.fromDom(n),t7(e))&&!ns(e.schema,n)&&e.dom.isEditable(n),MR=e=>{var n;return or.DOM.getStyle(e,"direction",!0)==="rtl"||id((n=e.textContent)!==null&&n!==void 0?n:"")},Pc=(e,n,s)=>Me(or.DOM.getParents(s.container(),"*",n),e),fu=(e,n,s)=>{const a=Pc(e,n,s);return V.from(a[a.length-1])},hu=(e,n,s)=>{const a=jf(n,e),f=jf(s,e);return ae(a)&&a===f},cV=e=>$2(e)||jy(e),qo=(e,n)=>{const s=n.container(),a=n.offset();return e?ic(s)?Vt(s.nextSibling)?bt(s.nextSibling,0):bt.after(s):$2(n)?bt(s,a+1):n:ic(s)?Vt(s.previousSibling)?bt(s.previousSibling,s.previousSibling.data.length):bt.before(s):jy(n)?bt(s,a-1):n},fg=Pe(qo,!0),Sb=Pe(qo,!1),tE=(e,n)=>{const s=a=>a.stopImmediatePropagation();e.on("beforeinput input",s,!0),e.getDoc().execCommand(n),e.off("beforeinput input",s)},nE=e=>{e.execCommand("delete")},Cb=e=>tE(e,"Delete"),uV=e=>tE(e,"ForwardDelete"),oE=e=>n=>er(ra(n),e,ys),dV=e=>et(e)||Lm(e),kb=(e,n)=>Iu(e,n)?fl(n,dV,oE(e)):V.none(),px=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},bx=(e,n,s)=>Kr(La(s),lu(s),(a,f)=>{const g=qo(!0,a),y=qo(!1,f),C=qo(!1,n);return e?Qa(s,C).exists(A=>A.isEqual(y)&&n.isEqual(g)):gl(s,C).exists(A=>A.isEqual(g)&&n.isEqual(y))}).getOr(!0),sE=e=>(st(e)?Dc(e):_c(e)).bind(sE).orThunk(()=>V.some(e)),Ab=(e,n,s,a=!0)=>{var f;n.deleteContents();const g=sE(s).getOr(s),y=ye.fromDom((f=e.dom.getParent(g.dom,e.dom.isBlock))!==null&&f!==void 0?f:s.dom);if(y.dom===e.getBody()?px(e,a):Rr(y)&&(Bd(y),a&&e.selection.setCursorLocation(y.dom,0)),!ys(s,y)){const C=er(ra(y),s)?[]:Ny(y);ue(C.concat(pi(s)),A=>{!ys(A,y)&&!Iu(A,y)&&Rr(A)&&ks(A)})}},fV=(e,n,s)=>Ar(e,n,s).isSome(),hV=(e,n)=>m0(e,n).isSome(),RR=(e,n)=>qi(e,n).isSome(),mV=e=>n=>ys(e,n),rE=e=>ya(e,"td,th"),iE=(e,n)=>Fp(ye.fromDom(e),n),gV=e=>Kr(e.startTable,e.endTable,(n,s)=>{const a=RR(n,g=>ys(g,s)),f=RR(s,g=>ys(g,n));return!a&&!f?e:Ot(ie({},e),{startTable:a?V.none():e.startTable,endTable:f?V.none():e.endTable,isSameTable:!1,isMultiTable:!1})}).getOr(e),pV=e=>gV(e),PR=(e,n)=>{const s=iE(e.startContainer,n),a=iE(e.endContainer,n),f=s.isSome(),g=a.isSome(),y=Kr(s,a,ys).getOr(!1);return pV({startTable:s,endTable:a,isStartInTable:f,isEndInTable:g,isSameTable:y,isMultiTable:!y&&f&&g})},vx=(e,n)=>({start:e,end:n}),bV=(e,n,s)=>({rng:e,table:n,cells:s}),Eb=td.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Tb=(e,n)=>_d(ye.fromDom(e),"td,th",n),NR=e=>!ys(e.start,e.end),aE=(e,n)=>Fp(e.start,n).bind(s=>Fp(e.end,n).bind(a=>es(ys(s,a),s))),bc=(e,n)=>!NR(e)&&aE(e,n).exists(s=>{const a=s.dom.rows;return a.length===1&&a[0].cells.length===1}),vV=(e,n)=>{const s=Tb(e.startContainer,n),a=Tb(e.endContainer,n);return Kr(s,a,vx)},BR=e=>n=>Fp(n,e).bind(s=>bn(rE(s)).map(a=>vx(n,a))),lE=e=>n=>Fp(n,e).bind(s=>Wt(rE(s)).map(a=>vx(a,n))),Ob=e=>n=>aE(n,e).map(s=>bV(n,s,rE(s))),cE=(e,n,s,a)=>{if(s.collapsed||!e.forall(NR))return V.none();if(n.isSameTable){const f=e.bind(Ob(a));return V.some({start:f,end:f})}else{const f=Tb(s.startContainer,a),g=Tb(s.endContainer,a),y=f.bind(BR(a)).bind(Ob(a)),C=g.bind(lE(a)).bind(Ob(a));return V.some({start:y,end:C})}},uE=(e,n)=>en(e,s=>ys(s,n)),dE=e=>Kr(uE(e.cells,e.rng.start),uE(e.cells,e.rng.end),(n,s)=>e.cells.slice(n,s+1)),yV=(e,n,s)=>e.exists(a=>bc(a,s)&&aA(a.start,n)),yx=(e,n)=>{const{startTable:s,endTable:a}=n,f=e.cloneRange();return s.each(g=>f.setStartAfter(g.dom)),a.each(g=>f.setEndBefore(g.dom)),f},FR=(e,n,s,a)=>cE(e,n,s,a).bind(({start:f,end:g})=>f.or(g)).bind(f=>{const{isSameTable:g}=n,y=dE(f).getOr([]);if(g&&f.cells.length===y.length)return V.some(Eb.fullTable(f.table));if(y.length>0){if(g)return V.some(Eb.partialTable(y,V.none()));{const C=yx(s,n);return V.some(Eb.partialTable(y,V.some(Ot(ie({},n),{rng:C}))))}}else return V.none()}),mu=(e,n,s,a)=>cE(e,n,s,a).bind(({start:f,end:g})=>{const y=f.bind(dE).getOr([]),C=g.bind(dE).getOr([]);if(y.length>0&&C.length>0){const A=yx(s,n);return V.some(Eb.multiTable(y,C,A))}else return V.none()}),wV=(e,n)=>{const s=mV(e),a=vV(n,s),f=PR(n,s);return yV(a,n,s)?a.map(g=>Eb.singleCellTable(n,g.start)):f.isMultiTable?mu(a,f,n,s):FR(a,f,n,s)},IR=e=>ue(e,n=>{Ir(n,"contenteditable"),Bd(n)}),aee=(e,n)=>V.from(e.dom.getParent(n,e.dom.isBlock)).map(ye.fromDom),fE=(e,n,s)=>{s.each(a=>{n?ks(a):(Bd(a),e.selection.setCursorLocation(a.dom,0))})},hE=(e,n,s,a)=>{const f=s.cloneRange();a?(f.setStart(s.startContainer,s.startOffset),f.setEndAfter(n.dom.lastChild)):(f.setStartBefore(n.dom.firstChild),f.setEnd(s.endContainer,s.endOffset)),$l(e,f,n,!1).each(g=>g())},hg=e=>{const n=Bp(e),s=ye.fromDom(e.selection.getNode());S0(s.dom)&&Rr(s)?e.selection.setCursorLocation(s.dom,0):e.selection.collapse(!0),n.length>1&&Bt(n,a=>ys(a,s))&&Js(s,"data-mce-selected","1")},LR=(e,n,s)=>V.some(()=>{const a=e.selection.getRng(),f=s.bind(({rng:g,isStartInTable:y})=>{const C=aee(e,y?g.endContainer:g.startContainer);g.deleteContents(),fE(e,y,C.filter(Rr));const A=y?n[0]:n[n.length-1];return hE(e,A,a,y),Rr(A)?V.none():V.some(y?n.slice(1):n.slice(0,-1))}).getOr(n);IR(f),hg(e)}),Gp=(e,n,s,a)=>V.some(()=>{const f=e.selection.getRng(),g=n[0],y=s[s.length-1];hE(e,g,f,!0),hE(e,y,f,!1);const C=Rr(g)?n:n.slice(1),A=Rr(y)?s:s.slice(0,-1);IR(C.concat(A)),a.deleteContents(),hg(e)}),$l=(e,n,s,a=!0)=>V.some(()=>{Ab(e,n,s,a)}),Db=(e,n)=>V.some(()=>oh(e,!1,n)),$s=(e,n,s)=>wV(n,s).bind(a=>a.fold(Pe($l,e),Pe(Db,e),Pe(LR,e),Pe(Gp,e))),_b=(e,n)=>Kp(e,n),$R=(e,n,s,a)=>Mb(n,a).fold(()=>$s(e,n,s),f=>_b(e,f)),HR=(e,n,s)=>{const a=ye.fromDom(e.getBody()),f=e.selection.getRng();return s.length!==0?LR(e,s,V.none()):$R(e,a,f,n)},wx=(e,n)=>ot(Zd(n,e),sc),Mb=(e,n)=>ot(Zd(n,e),zr("caption")),mE=(e,n,s,a,f)=>Gf(s,e.getBody(),f).bind(g=>wx(n,ye.fromDom(g.getNode())).bind(y=>ys(y,a)?V.none():V.some(ge))),Kp=(e,n)=>V.some(()=>{Bd(n),e.selection.setCursorLocation(n.dom,0)}),xx=(e,n,s,a)=>La(e.dom).bind(f=>lu(e.dom).map(g=>n?s.isEqual(f)&&a.isEqual(g):s.isEqual(g)&&a.isEqual(f))).getOr(!0),gE=(e,n)=>Kp(e,n),VR=(e,n,s)=>Mb(e,ye.fromDom(s.getNode())).fold(()=>V.some(ge),a=>es(!ys(a,n),ge)),zR=(e,n,s,a,f)=>Gf(s,e.getBody(),f).fold(()=>V.some(ge),g=>xx(a,s,f,g)?gE(e,a):VR(n,a,g)),UR=(e,n,s,a)=>{const f=bt.fromRangeStart(e.selection.getRng());return wx(s,a).bind(g=>Rr(g)?Kp(e,g):mE(e,s,n,g,f))},WR=(e,n,s,a)=>{const f=bt.fromRangeStart(e.selection.getRng());return Rr(a)?Kp(e,a):zR(e,s,n,a,f)},pE=(e,n)=>e?hR(n):No(n),Yp=(e,n)=>{const s=bt.fromRangeStart(e.selection.getRng());return pE(n,s)||Nl(n,e.getBody(),s).exists(a=>pE(n,a))},jR=(e,n,s)=>{const a=ye.fromDom(e.getBody());return Mb(a,s).fold(()=>UR(e,n,a,s).orThunk(()=>es(Yp(e,n),ge)),f=>WR(e,n,a,f))},Rb=(e,n)=>{const s=ye.fromDom(e.selection.getStart(!0)),a=Bp(e);return e.selection.isCollapsed()&&a.length===0?jR(e,n,s):HR(e,s,a)},mg=(e,n)=>{let s=n;for(;s&&s!==e;){if(hl(s)||ms(s))return s;s=s.parentNode}return null},xV=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],ZR=Lt.each,Sx=e=>{const n=e.dom,s=new Set(e.serializer.getTempAttrs()),a=(g,y)=>{if(g.nodeName!==y.nodeName||g.nodeType!==y.nodeType)return!1;const C=M=>{const I={};return ZR(n.getAttribs(M),L=>{const W=L.nodeName.toLowerCase();W!=="style"&&!f(W)&&(I[W]=n.getAttrib(M,W))}),I},A=(M,I)=>{for(const L in M)if(Bn(M,L)){const W=I[L];if($e(W)||M[L]!==W)return!1;delete I[L]}for(const L in I)if(Bn(I,L))return!1;return!0};return wn(g)&&wn(y)&&(!A(C(g),C(y))||!A(n.parseStyle(n.getAttrib(g,"style")),n.parseStyle(n.getAttrib(y,"style"))))?!1:!mc(g)&&!mc(y)},f=g=>Bt(xV,y=>Vn(g,y))||s.has(g);return{compare:a,isAttributeInternal:f}},bE=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),Cx=e=>e.name==="summary",qR=(e,n)=>{let s=e;for(;s=s.walk();)n(s)},vE=(e,n,s,a)=>{const f=s.name;for(let g=0,y=e.length;g<y;g++){const C=e[g];if(C.name===f){const A=a.nodes[f];A?A.nodes.push(s):a.nodes[f]={filter:C,nodes:[s]}}}if(s.attributes)for(let g=0,y=n.length;g<y;g++){const C=n[g],A=C.name;if(A in s.attributes.map){const M=a.attributes[A];M?M.nodes.push(s):a.attributes[A]={filter:C,nodes:[s]}}}},GR=(e,n,s)=>{const a={nodes:{},attributes:{}};return s.firstChild&&qR(s,f=>{vE(e,n,f,a)}),a},yE=(e,n)=>{const s=(a,f)=>{$t(a,g=>{const y=oo(g.nodes);ue(g.filter.callbacks,C=>{for(let A=y.length-1;A>=0;A--){const M=y[A];(!(f?M.attr(g.filter.name)!==void 0:M.name===g.filter.name)||Ue(M.parent))&&y.splice(A,1)}y.length>0&&C(y,g.filter.name,n)})})};s(e.nodes,!1),s(e.attributes,!0)},wE=(e,n,s,a={})=>{const f=GR(e,n,s);yE(f,a)},kx=(e,n,s,a)=>{if((e.pad_empty_with_br||n.insert)&&s(a)){const g=new $a("br",1);n.insert&&g.attr("data-mce-bogus","1"),a.empty().append(g)}else a.empty().append(new $a("#text",3)).value=ws},KR=e=>{var n;return xE(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===ws},xE=(e,n)=>{const s=e==null?void 0:e.firstChild;return ae(s)&&s===e.lastChild&&s.name===n},YR=(e,n)=>{const s=e.getElementRule(n.name);return(s==null?void 0:s.paddEmpty)===!0},Xp=(e,n,s,a)=>a.isEmpty(n,s,f=>YR(e,f)),SE=(e,n)=>ae(e)&&(n(e)||e.name==="br"),XR=e=>{let n;for(let s=e;s;s=s.parent){const a=s.attr("contenteditable");if(a==="false")break;a==="true"&&(n=s)}return V.from(n)},Ax=(e,n,s=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const a=e.children();for(const f of a)s&&!n.isValidChild(s.name,f.name)&&Ax(f,n,s);e.unwrap()}},Ex=(e,n,s,a=ge)=>{const f=n.getTextBlockElements(),g=n.getNonEmptyElements(),y=n.getWhitespaceElements(),C=Lt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),A=new Set,M=I=>I!==s&&!C[I.name];for(let I=0;I<e.length;I++){const L=e[I];let W,re,de;if(!L.parent||A.has(L))continue;if(f[L.name]&&L.parent.name==="li"){let fe=L.next;for(;fe&&f[fe.name];){fe.name="li",A.add(fe),L.parent.insert(fe,L.parent);fe=fe.next}L.unwrap();continue}const te=[L];for(W=L.parent;W&&!n.isValidChild(W.name,L.name)&&M(W);W=W.parent)te.push(W);if(W&&te.length>1)if(Tx(n,L,W))Ax(L,n);else{te.reverse(),re=te[0].clone(),a(re);let fe=re;for(let Fe=0;Fe<te.length-1;Fe++){n.isValidChild(fe.name,te[Fe].name)&&Fe>0?(de=te[Fe].clone(),a(de),fe.append(de)):de=fe;for(let ze=te[Fe].firstChild;ze&&ze!==te[Fe+1];){const Ve=ze.next;de.append(ze),ze=Ve}fe=de}Xp(n,g,y,re)?W.insert(L,te[0],!0):(W.insert(re,te[0],!0),W.insert(L,re)),W=te[0],(Xp(n,g,y,W)||xE(W,"br"))&&W.empty().remove()}else if(L.parent){if(L.name==="li"){let fe=L.prev;if(fe&&(fe.name==="ul"||fe.name==="ol")){fe.append(L);continue}if(fe=L.next,fe&&(fe.name==="ul"||fe.name==="ol")&&fe.firstChild){fe.insert(L,fe.firstChild,!0);continue}const Fe=new $a("ul",1);a(Fe),L.wrap(Fe);continue}if(n.isValidChild(L.parent.name,"div")&&n.isValidChild("div",L.name)){const fe=new $a("div",1);a(fe),L.wrap(fe)}else Ax(L,n)}}},JR=(e,n)=>{let s=e;for(;s;){if(s.name===n)return!0;s=s.parent}return!1},Tx=(e,n,s=n.parent)=>s?e.children[n.name]&&!e.isValidChild(s.name,n.name)||n.name==="a"&&JR(s,"a")?!0:Cx(s)&&bE(n)?!((s==null?void 0:s.firstChild)===n&&(s==null?void 0:s.lastChild)===n):!1:!1,QR=(e,n,s,a)=>{const f=document.createRange();return f.setStart(e,n),f.setEnd(s,a),f},CE=e=>{const n=bt.fromRangeStart(e),s=bt.fromRangeEnd(e),a=e.commonAncestorContainer;return Nl(!1,a,s).map(f=>!nd(n,s,a)&&nd(n,f,a)?QR(n.container(),n.offset(),f.container(),f.offset()):e).getOr(e)},Jp=e=>e.collapsed?e:CE(e),Ox=e=>ae(e.firstChild)&&e.firstChild===e.lastChild,Dx=e=>e.name==="br"||e.value===ws,eP=(e,n)=>e.getBlockElements()[n.name]&&Ox(n)&&Dx(n.firstChild),_x=(e,n)=>{const s=e.getNonEmptyElements();return ae(n)&&(n.isEmpty(s)||eP(e,n))},kE=(e,n)=>{let s=n.firstChild,a=n.lastChild;return s&&s.name==="meta"&&(s=s.next),a&&a.attr("id")==="mce_marker"&&(a=a.prev),_x(e,a)&&(a=a==null?void 0:a.prev),!s||s!==a?!1:s.name==="ul"||s.name==="ol"},Pb=e=>{var n,s;const a=e.firstChild,f=e.lastChild;return a&&a.nodeName==="META"&&((n=a.parentNode)===null||n===void 0||n.removeChild(a)),f&&f.id==="mce_marker"&&((s=f.parentNode)===null||s===void 0||s.removeChild(f)),e},AE=(e,n,s)=>{const a=n.serialize(s),f=e.createFragment(a);return Pb(f)},tP=e=>{var n;return Me((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],s=>s.nodeName==="LI")},Qp=e=>e.data===ws||Zs(e),EE=e=>ae(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&Qp(e.firstChild),TE=e=>!e.firstChild||EE(e),Nb=e=>e.length>0&&TE(e[e.length-1])?e.slice(0,-1):e,qd=(e,n)=>{const s=e.getParent(n,e.isBlock);return s&&s.nodeName==="LI"?s:null},nP=(e,n)=>!!qd(e,n),SV=(e,n)=>{const s=n.cloneRange(),a=n.cloneRange();return s.setStartBefore(e),a.setEndAfter(e),[s.cloneContents(),a.cloneContents()]},oP=(e,n)=>{const s=bt.before(e),f=Vd(n).next(s);return f?f.toRange():null},OE=(e,n)=>{const s=bt.after(e),f=Vd(n).prev(s);return f?f.toRange():null},CV=(e,n,s,a)=>{const f=SV(e,a),g=e.parentNode;return g&&(g.insertBefore(f[0],e),Lt.each(n,y=>{g.insertBefore(y,e)}),g.insertBefore(f[1],e),g.removeChild(e)),OE(n[n.length-1],s)},lee=(e,n,s)=>{const a=e.parentNode;return a&&Lt.each(n,f=>{a.insertBefore(f,e)}),oP(e,s)},kV=(e,n,s,a)=>(a.insertAfter(n.reverse(),e),OE(n[0],s)),DE=(e,n,s,a)=>{const f=AE(n,e,a),g=qd(n,s.startContainer),y=Nb(tP(f.firstChild)),C=1,A=2,M=n.getRoot(),I=L=>{const W=bt.fromRangeStart(s),re=Vd(n.getRoot()),de=L===C?re.prev(W):re.next(W),te=de==null?void 0:de.getNode();return te?qd(n,te)!==g:!0};return g?I(C)?lee(g,y,M):I(A)?kV(g,y,M,n):CV(g,y,M,s):null},ad=["pre"],_E=(e,n,s,a)=>{var f;const g=n.firstChild,y=n.lastChild,C=y.attr("data-mce-type")==="bookmark"?y.prev:y,A=g===C,M=Je(ad,g.name);if(A&&M){const I=g.attr("contenteditable")!=="false",L=((f=e.getParent(s,e.isBlock))===null||f===void 0?void 0:f.nodeName.toLowerCase())===g.name,W=V.from(mg(a,s)).forall(hl);return I&&L&&W}else return!1},e1=S0,ME=(e,n,s)=>{if(ae(s)){const a=e.getParent(n.endContainer,e1);return s===a&&aA(ye.fromDom(s),n)}else return!1},AV=(e,n,s)=>{var a;if(s.getAttribute("data-mce-bogus")==="all")(a=s.parentNode)===null||a===void 0||a.insertBefore(e.dom.createFragment(n),s);else{const f=s.firstChild,g=s.lastChild;!f||f===g&&f.nodeName==="BR"?e.dom.setHTML(s,n):e.selection.setContent(n,{no_events:!0})}},sP=(e,n,s)=>{V.from(e.getParent(n,"td,th")).map(ye.fromDom).each(a=>Zn(a,s))},EV=(e,n)=>{const s=e.schema.getTextInlineElements(),a=e.dom;if(n){const f=e.getBody(),g=Sx(e);Lt.each(a.select("*[data-mce-fragment]"),y=>{if(ae(s[y.nodeName.toLowerCase()])&&bb(a,y)){for(let A=y.parentElement;ae(A)&&A!==f&&!N9(a,y,A);A=A.parentElement)if(g.compare(A,y)){a.remove(y,!0);break}}})}},rP=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},RE=e=>{Lt.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},TV=e=>!!e.getAttribute("data-mce-fragment"),iP=(e,n)=>ae(n)&&!e.schema.getVoidElements()[n.nodeName],OV=(e,n)=>{var s,a,f;let g;const y=e.dom,C=e.selection;if(!n)return;C.scrollIntoView(n);const A=mg(e.getBody(),n);if(A&&y.getContentEditable(A)==="false"){y.remove(n),C.select(A);return}let M=y.createRng();const I=n.previousSibling;if(Vt(I)){M.setStart(I,(a=(s=I.nodeValue)===null||s===void 0?void 0:s.length)!==null&&a!==void 0?a:0);const re=n.nextSibling;Vt(re)&&(I.appendData(re.data),(f=re.parentNode)===null||f===void 0||f.removeChild(re))}else M.setStartBefore(n),M.setEndBefore(n);const L=re=>{let de=bt.fromRangeStart(re);return de=Vd(e.getBody()).next(de),de==null?void 0:de.toRange()},W=y.getParent(n,y.isBlock);if(y.remove(n),W&&y.isEmpty(W)){const re=e1(W);Md(ye.fromDom(W)),M.setStart(W,0),M.setEnd(W,0),!re&&!TV(W)&&(g=L(M))?(M=g,y.remove(W)):y.add(W,y.create("br",re?{}:{"data-mce-bogus":"1"}))}C.setRng(M)},Bb=e=>{const n=e.dom,s=Jp(e.selection.getRng());e.selection.setRng(s);const a=n.getParent(s.startContainer,e1);ME(n,s,a)?$l(e,s,ye.fromDom(a)):s.startContainer===s.endContainer&&s.endOffset-s.startOffset===1&&Vt(s.startContainer.childNodes[s.startOffset])?s.deleteContents():e.getDoc().execCommand("Delete",!1)},aP=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return V.some(n);return V.none()},DV=(e,n,s)=>{var a;return Bt(s.children(),bE)&&((a=e.getParent(n,e.isBlock))===null||a===void 0?void 0:a.nodeName)==="SUMMARY"},lP=(e,n,s)=>{var a,f;const g=e.selection,y=e.dom,C=e.parser,A=s.merge,M=Vh({validate:!0},e.schema),I='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';s.preserve_zwsp||(n=rc(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,I);let L=g.getRng();const W=L.startContainer,re=e.getBody();W===re&&g.isCollapsed()&&y.isBlock(re.firstChild)&&iP(e,re.firstChild)&&y.isEmpty(re.firstChild)&&(L=y.createRng(),L.setStart(re.firstChild,0),L.setEnd(re.firstChild,0),g.setRng(L)),g.isCollapsed()||Bb(e);const de=g.getNode(),te={context:de.nodeName.toLowerCase(),data:s.data,insert:!0},fe=C.parse(n,te);if(s.paste===!0&&kE(e.schema,fe)&&nP(y,de))return L=DE(M,y,g.getRng(),fe),L&&g.setRng(L),n;s.paste===!0&&_E(y,fe,de,e.getBody())&&((a=fe.firstChild)===null||a===void 0||a.unwrap()),rP(fe);let Fe=fe.lastChild;if(Fe&&Fe.attr("id")==="mce_marker"){const ze=Fe;for(Fe=Fe.prev;Fe;Fe=Fe.walk(!0))if(Fe.type===3||!y.isBlock(Fe.name)){Fe.parent&&e.schema.isValidChild(Fe.parent.name,"span")&&Fe.parent.insert(ze,Fe,Fe.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(de),!te.invalid&&!DV(y,de,fe))n=M.serialize(fe),AV(e,n,de);else{e.selection.setContent(I);let ze=g.getNode(),Ve;const nt=e.getBody();for(x0(ze)?ze=Ve=nt:Ve=ze;Ve&&Ve!==nt;)ze=Ve,Ve=Ve.parentNode;n=ze===nt?nt.innerHTML:y.getOuterHTML(ze);const Nt=C.parse(n),Zt=aP(Nt),on=Zt.bind(XR).getOr(Nt);Zt.each(mn=>mn.replace(fe));const vt=fe.children(),ut=(f=fe.parent)!==null&&f!==void 0?f:Nt;fe.unwrap();const Mt=Me(vt,mn=>Tx(e.schema,mn,ut));Ex(Mt,e.schema,on),wE(C.getNodeFilters(),C.getAttributeFilters(),Nt),n=M.serialize(Nt),ze===nt?y.setHTML(nt,n):y.setOuterHTML(ze,n)}return EV(e,A),OV(e,y.get("mce_marker")),RE(e.getBody()),sP(y,g.getStart(),e.schema),DM(e.schema,e.getBody(),g.getStart()),n},Mx=e=>e instanceof $a,_V=e=>{Hh(e)&&La(e.getBody()).each(n=>{const s=n.getNode(),a=Pd(s)?La(s).getOr(n):n;e.selection.setRng(a.toRange())})},PE=(e,n,s)=>{e.dom.setHTML(e.getBody(),n),s!==!0&&_V(e)},MV=(e,n,s,a)=>{if(s=rc(s),s.length===0||/^\s+$/.test(s)){const f='<br data-mce-bogus="1">';n.nodeName==="TABLE"?s="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(s="<li>"+f+"</li>");const g=Ia(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),g.toLowerCase())?(s=f,s=e.dom.createHTML(g,q0(e),s)):s||(s=f),PE(e,s,a.no_selection),{content:s,html:s}}else{a.format!=="raw"&&(s=Vh({validate:!1},e.schema).serialize(e.parser.parse(s,{isRootContent:!0,insert:!0})));const f=Hi(ye.fromDom(n))?s:Lt.trim(s);return PE(e,f,a.no_selection),{content:f,html:f}}},RV=(e,n,s,a)=>{wE(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),s);const f=Vh({validate:!1},e.schema).serialize(s),g=rc(Hi(ye.fromDom(n))?f:Lt.trim(f));return PE(e,g,a.no_selection),{content:s,html:g}},cP=(e,n,s)=>V.from(e.getBody()).map(a=>Mx(n)?RV(e,a,n,s):MV(e,a,n,s)).getOr({content:n,html:Mx(s.content)?"":s.content}),uP=e=>Oe(e)?e:ce,NE=(e,n,s)=>{let a=e.dom;const f=uP(s);for(;a.parentNode;){a=a.parentNode;const g=ye.fromDom(a),y=n(g);if(y.isSome())return y;if(f(g))break}return V.none()},sh=(e,n,s)=>{const a=n(e),f=uP(s);return a.orThunk(()=>f(e)?V.none():NE(e,n,f))},BE=dA,dP=(e,n,s)=>{const a=e.formatter.get(s);if(a)for(let f=0;f<a.length;f++){const g=a[f];if(Bl(g)&&g.inherit===!1&&e.dom.is(n,g.selector))return!0}return!1},t1=(e,n,s,a,f)=>{const g=e.dom.getRoot();if(n===g)return!1;const y=e.dom.getParent(n,C=>dP(e,C,s)?!0:C.parentNode===g||!!Gd(e,C,s,a,!0));return!!Gd(e,y,s,a,f)},Fb=(e,n,s)=>ri(s)&&BE(n,s.inline)||od(s)&&BE(n,s.block)?!0:Bl(s)?wn(n)&&e.is(n,s.selector):!1,FE=(e,n,s,a,f,g)=>{const y=s[a],C=a==="attributes";if(Oe(s.onmatch))return s.onmatch(n,s,a);if(y){if(tn(y)){for(let A=0;A<y.length;A++)if(C?e.getAttrib(n,y[A]):ab(e,n,y[A]))return!0}else for(const A in y)if(Bn(y,A)){const M=C?e.getAttrib(n,A):ab(e,n,A),I=Ud(y[A],g),L=Ue(M)||Ho(M);if(L&&Ue(I))continue;if(f&&L&&!s.exact||(!f||s.exact)&&!BE(M,fA(I,A)))return!1}}return!0},Gd=(e,n,s,a,f)=>{const g=e.formatter.get(s),y=e.dom;if(g&&wn(n))for(let C=0;C<g.length;C++){const A=g[C];if(Fb(e.dom,n,A)&&FE(y,n,A,"attributes",f,a)&&FE(y,n,A,"styles",f,a)){const M=A.classes;if(M){for(let I=0;I<M.length;I++)if(!e.dom.hasClass(n,Ud(M[I],a)))return}return A}}},Rx=(e,n,s,a,f)=>{if(a)return t1(e,a,n,s,f);if(a=e.selection.getNode(),t1(e,a,n,s,f))return!0;const g=e.selection.getStart();return!!(g!==a&&t1(e,g,n,s,f))},PV=(e,n,s)=>{const a=[],f={},g=e.selection.getStart();return e.dom.getParent(g,y=>{for(let C=0;C<n.length;C++){const A=n[C];!f[A]&&Gd(e,y,A,s)&&(f[A]=!0,a.push(A))}},e.dom.getRoot()),a},gg=(e,n)=>{const s=f=>ys(f,ye.fromDom(e.getBody())),a=(f,g)=>Gd(e,f.dom,g)?V.some(g):V.none();return V.from(e.selection.getStart(!0)).bind(f=>sh(ye.fromDom(f),g=>ao(n,y=>a(g,y)),s)).getOrNull()},fP=(e,n)=>{const s=e.formatter.get(n),a=e.dom;if(s&&e.selection.isEditable()){const f=e.selection.getStart(),g=Hw(a,f);for(let y=s.length-1;y>=0;y--){const C=s[y];if(!Bl(C))return!0;for(let A=g.length-1;A>=0;A--)if(a.is(g[A],C.selector))return!0}}return!1},hP=(e,n,s)=>ve(s,(a,f)=>{const g=t4(e,f);return e.formatter.matchNode(n,f,{},g)?a.concat([f]):a},[]),n1=Xi,Px=(e,n)=>e.importNode(n,!0),IE=e=>{if(e){const n=new tr(e,e);for(let s=n.current();s;s=n.next())if(Vt(s))return s}return null},LE=e=>{const n=ye.fromTag("span");return Ur(n,{id:Lw,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Jr(n,ye.fromText(n1)),n},mP=e=>{const n=IE(e);return n&&n.data.charAt(0)===n1&&n.deleteData(0,1),n},$E=(e,n,s)=>{const a=e.dom,f=e.selection;if(lb(n))oh(e,!1,ye.fromDom(n),s,!0);else{const g=f.getRng(),y=a.getParent(n,a.isBlock),C=g.startContainer,A=g.startOffset,M=g.endContainer,I=g.endOffset,L=mP(n);a.remove(n,!0),C===L&&A>0&&g.setStart(L,A-1),M===L&&I>0&&g.setEnd(L,I-1),y&&a.isEmpty(y)&&Bd(ye.fromDom(y)),f.setRng(g)}},HE=(e,n,s)=>{const a=e.dom,f=e.selection;if(n)$E(e,n,s);else if(n=eg(e.getBody(),f.getStart()),!n)for(;n=a.get(Lw);)$E(e,n,s)},Nx=(e,n,s)=>{var a,f;const g=e.dom,y=g.getParent(s,Pe(yi,e.schema));y&&g.isEmpty(y)?(a=s.parentNode)===null||a===void 0||a.replaceChild(n,s):(z6(ye.fromDom(s)),g.isEmpty(s)?(f=s.parentNode)===null||f===void 0||f.replaceChild(n,s):g.insertAfter(n,s))},VE=(e,n)=>(e.appendChild(n),n),Bx=(e,n)=>{var s;const a=kt(e,(g,y)=>VE(g,y.cloneNode(!1)),n),f=(s=a.ownerDocument)!==null&&s!==void 0?s:document;return VE(a,f.createTextNode(n1))},NV=(e,n,s,a,f,g)=>{const y=e.formatter,C=e.dom,A=Me(Fo(y.get()),L=>L!==a&&!$n(L,"removeformat")),M=hP(e,s,A);if(Me(M,L=>!cH(e,L,a)).length>0){const L=s.cloneNode(!1);return C.add(n,L),y.remove(a,f,L,g),C.remove(L),V.some(L)}else return V.none()},BV=(e,n,s)=>{let a;const f=e.selection,g=e.formatter.get(n);if(!g)return;const y=f.getRng();let C=y.startOffset;const M=y.startContainer.nodeValue;a=eg(e.getBody(),f.getStart());const I=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(M&&C>0&&C<M.length&&I.test(M.charAt(C))&&I.test(M.charAt(C-1))){const L=f.getBookmark();y.collapse(!0);let W=Yf(e.dom,y,g);W=Jw(W),e.formatter.apply(n,s,W),f.moveToBookmark(L)}else{let L=a?IE(a):null;(!a||(L==null?void 0:L.data)!==n1)&&(a=Px(e.getDoc(),LE(!0).dom),L=a.firstChild,y.insertNode(a),C=1),e.formatter.apply(n,s,a),f.setCursorLocation(L,C)}},gP=(e,n,s,a)=>{const f=e.dom,g=e.selection;let y=!1;const C=e.formatter.get(n);if(!C)return;const A=g.getRng(),M=A.startContainer,I=A.startOffset;let L=M;Vt(M)&&(I!==M.data.length&&(y=!0),L=L.parentNode);const W=[];let re;for(;L;){if(Gd(e,L,n,s,a)){re=L;break}L.nextSibling&&(y=!0),W.push(L),L=L.parentNode}if(re)if(y){const de=g.getBookmark();A.collapse(!0);let te=Yf(f,A,C,!0);te=Jw(te),e.formatter.remove(n,s,te,a),g.moveToBookmark(de)}else{const de=eg(e.getBody(),re),te=ae(de)?f.getParents(re.parentNode,Ze,de):[],fe=LE(!1).dom;Nx(e,fe,de!=null?de:re);const Fe=NV(e,fe,re,n,s,a),ze=Bx([...W,...Fe.toArray(),...te],fe);de&&$E(e,de,ae(de)),g.setCursorLocation(ze,1),f.isEmpty(re)&&f.remove(re)}},zE=(e,n,s)=>{const a=e.selection,f=e.getBody();HE(e,null,s),(n===8||n===46)&&a.isCollapsed()&&a.getStart().innerHTML===n1&&HE(e,eg(f,a.getStart()),!0),(n===37||n===39)&&HE(e,eg(f,a.getStart()),!0)},pP=e=>Vt(e)&&Xo(e.data,ws),FV=e=>{e.on("mouseup keydown",n=>{zE(e,n.keyCode,pP(e.selection.getRng().endContainer))})},bP=e=>{const n=LE(!1),s=Bx(e,n.dom);return{caretContainer:n,caretPosition:bt(s,0)}},vP=(e,n)=>{const{caretContainer:s,caretPosition:a}=bP(n);return Pa(ye.fromDom(e),s),ks(ye.fromDom(e)),a},Fx=(e,n)=>{const{caretContainer:s,caretPosition:a}=bP(n);return e.insertNode(s.dom),a},Kd=(e,n)=>{if(hc(n.dom))return!1;const s=e.schema.getTextInlineElements();return Bn(s,ts(n))&&!hc(n.dom)&&!Uu(n.dom)},Ib={},Ix=Ki(["pre"]),qr=(e,n)=>{Ib[e]||(Ib[e]=[]),Ib[e].push(n)},UE=(e,n)=>{Bn(Ib,e)&&ue(Ib[e],s=>{s(n)})};qr("pre",e=>{const n=e.selection.getRng(),s=f=>g=>{const y=g.previousSibling;return Ix(y)&&Je(f,y)},a=(f,g)=>{const y=ye.fromDom(g),C=Lu(y).dom;ks(y),Ls(ye.fromDom(f),[ye.fromTag("br",C),ye.fromTag("br",C),...pi(y)])};if(!n.collapsed){const f=e.selection.getSelectedBlocks(),g=Me(Me(f,Ix),s(f));ue(g,y=>{a(y.previousSibling,y)})}});const Lx=["fontWeight","fontStyle","color","fontSize","fontFamily"],rh=e=>be(e.styles)&&Bt(Fo(e.styles),n=>Je(Lx,n)),yP=e=>ot(e,n=>ri(n)&&n.inline==="span"&&rh(n)),WE=(e,n)=>{const s=e.get(n);return Re(s)?yP(s):V.none()},o1=(e,n)=>gl(n,bt.fromRangeStart(e)).isNone(),wP=(e,n)=>Qa(n,bt.fromRangeEnd(e)).exists(s=>!Zs(s.getNode())||Qa(n,s).isSome())===!1,xP=e=>n=>F2(n)&&e.isEditable(n),s1=e=>{const n=e.getSelectedBlocks(),s=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return o1(s,n[0])&&wP(s,n[0])?n:[];{const a=Wt(n).filter(y=>o1(s,y)).toArray(),f=bn(n).filter(y=>wP(s,y)).toArray(),g=n.slice(1,-1);return a.concat(g).concat(f)}},IV=e=>Me(s1(e),xP(e.dom)),Uh=e=>Me(e.getSelectedBlocks(),xP(e.dom)),jE=Lt.each,Yd=e=>wn(e)&&!mc(e)&&!hc(e)&&!Uu(e),vc=(e,n)=>{for(let s=e;s;s=s[n]){if(Vt(s)&&Po(s.data))return e;if(wn(s)&&!mc(s))return s}return e},Lb=(e,n,s)=>{const a=Sx(e),f=_f(n)&&e.dom.isEditable(n),g=_f(s)&&e.dom.isEditable(s);if(f&&g){const y=vc(n,"previousSibling"),C=vc(s,"nextSibling");if(a.compare(y,C)){for(let A=y.nextSibling;A&&A!==C;){const M=A;A=A.nextSibling,y.appendChild(M)}return e.dom.remove(C),Lt.each(Lt.grep(C.childNodes),A=>{y.appendChild(A)}),y}}return s},$x=(e,n,s,a)=>{var f;if(a&&n.merge_siblings!==!1){const g=(f=Lb(e,ln(a),a))!==null&&f!==void 0?f:a;Lb(e,g,ln(g,!0))}},LV=(e,n,s)=>{if(n.clear_child_styles){const a=n.links?"*:not(a)":"*";jE(e.select(a,s),f=>{Yd(f)&&e.isEditable(f)&&jE(n.styles,(g,y)=>{e.setStyle(f,y,"")})})}},ZE=(e,n,s)=>{jE(e.childNodes,a=>{Yd(a)&&(n(a)&&s(a),a.hasChildNodes()&&ZE(a,n,s))})},Hx=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},SP=(e,n)=>s=>!!(s&&ab(e,s,n)),Nc=(e,n,s)=>a=>{e.setStyle(a,n,s),a.getAttribute("style")===""&&a.removeAttribute("style"),Hx(e,a)},Xd=td.generate([{keep:[]},{rename:["name"]},{removed:[]}]),CP=/^(src|href|style)$/,$b=Lt.each,r1=dA,pg=e=>/^(TR|TH|TD)$/.test(e.nodeName),Vx=(e,n,s)=>e.isChildOf(n,s)&&n!==s&&!e.isBlock(s),kP=(e,n,s)=>{let a=n[s?"startContainer":"endContainer"],f=n[s?"startOffset":"endOffset"];if(wn(a)){const g=a.childNodes.length-1;!s&&f&&f--,a=a.childNodes[f>g?g:f]}return Vt(a)&&s&&f>=a.data.length&&(a=new tr(a,e.getBody()).next()||a),Vt(a)&&!s&&f===0&&(a=new tr(a,e.getBody()).prev()||a),a},qE=(e,n)=>{const s=n?"firstChild":"lastChild",a=e[s];return pg(e)&&a?e.nodeName==="TR"&&a[s]||a:e},GE=(e,n,s,a)=>{var f;const g=e.create(s,a);return(f=n.parentNode)===null||f===void 0||f.insertBefore(g,n),g.appendChild(n),g},AP=(e,n,s,a,f)=>{const g=ye.fromDom(n),y=ye.fromDom(e.create(a,f)),C=s?Ma(g):By(g);return Ls(y,C),s?(Pa(g,y),Mm(y,g)):(Vu(g,y),Jr(y,g)),y.dom},$V=(e,n)=>n.links&&e.nodeName==="A",EP=(e,n,s)=>{const a=n.parentNode;let f;const g=e.dom,y=Ia(e);od(s)&&a===g.getRoot()&&(!s.list_block||!r1(n,s.list_block))&&ue(oo(n.childNodes),C=>{Kf(e,y,C.nodeName.toLowerCase())?f?f.appendChild(C):(f=GE(g,C,y),g.setAttribs(f,q0(e))):f=null}),!(mA(s)&&!r1(s.inline,n))&&g.remove(n,!0)},i1=(e,n,s)=>ht(e)?{name:n,value:null}:{name:e,value:Ud(n,s)},TP=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},KE=(e,n,s,a,f)=>{let g=!1;$b(s.styles,(y,C)=>{const{name:A,value:M}=i1(C,y,a),I=fA(M,A);(s.remove_similar||K(M)||!wn(f)||r1(ab(e,f,A),I))&&e.setStyle(n,A,""),g=!0}),g&&TP(e,n)},YE=(e,n,s)=>{n==="removeformat"?ue(Uh(e.selection),a=>{ue(Lx,f=>e.dom.setStyle(a,f,"")),TP(e.dom,a)}):WE(e.formatter,n).each(a=>{ue(Uh(e.selection),f=>KE(e.dom,f,a,s,null))})},OP=(e,n,s,a,f)=>{const g=e.dom,y=Sx(e),C=e.schema;if(ri(n)&&M0(C,n.inline)&&ns(C,a)&&a.parentElement===e.getBody())return EP(e,a,n),Xd.removed();if(!n.ceFalseOverride&&a&&g.getContentEditableParent(a)==="false"||a&&!Fb(g,a,n)&&!$V(a,n))return Xd.keep();const A=a,M=n.preserve_attributes;if(ri(n)&&n.remove==="all"&&Re(M)){const I=Me(g.getAttribs(A),L=>Je(M,L.name.toLowerCase()));if(g.removeAllAttribs(A),ue(I,L=>g.setAttrib(A,L.name,L.value)),I.length>0)return Xd.rename("span")}if(n.remove!=="all"){KE(g,A,n,s,f),$b(n.attributes,(L,W)=>{const{name:re,value:de}=i1(W,L,s);if(n.remove_similar||K(de)||!wn(f)||r1(g.getAttrib(f,re),de)){if(re==="class"){const te=g.getAttrib(A,re);if(te){let fe="";if(ue(te.split(/\s+/),Fe=>{/mce\-\w+/.test(Fe)&&(fe+=(fe?" ":"")+Fe)}),fe){g.setAttrib(A,re,fe);return}}}if(CP.test(re)&&A.removeAttribute("data-mce-"+re),re==="style"&&Ki(["li"])(A)&&g.getStyle(A,"list-style-type")==="none"){A.removeAttribute(re),g.setStyle(A,"list-style-type","none");return}re==="class"&&A.removeAttribute("className"),A.removeAttribute(re)}}),$b(n.classes,L=>{L=Ud(L,s),(!wn(f)||g.hasClass(f,L))&&g.removeClass(A,L)});const I=g.getAttribs(A);for(let L=0;L<I.length;L++){const W=I[L].nodeName;if(!y.isAttributeInternal(W))return Xd.keep()}}return n.remove!=="none"?(EP(e,A,n),Xd.removed()):Xd.keep()},DP=(e,n,s,a,f)=>{let g;return n.parentNode&&ue(Hw(e.dom,n.parentNode).reverse(),y=>{if(!g&&wn(y)&&y.id!=="_start"&&y.id!=="_end"){const C=Gd(e,y,s,a,f);C&&C.split!==!1&&(g=y)}}),g},_P=(e,n,s,a)=>OP(e,n,s,a,a).fold(he(a),f=>(e.dom.createFragment().appendChild(a),e.dom.rename(a,f)),he(null)),HV=(e,n,s,a,f,g,y,C)=>{var A,M;let I,L;const W=e.dom;if(s){const re=s.parentNode;for(let de=a.parentNode;de&&de!==re;de=de.parentNode){let te=W.clone(de,!1);for(let fe=0;fe<n.length&&(te=_P(e,n[fe],C,te),te!==null);fe++);te&&(I&&te.appendChild(I),L||(L=te),I=te)}(!y.mixed||!W.isBlock(s))&&(a=(A=W.split(s,a))!==null&&A!==void 0?A:a),I&&L&&((M=f.parentNode)===null||M===void 0||M.insertBefore(I,f),L.appendChild(f),ri(y)&&$x(e,y,C,I))}return a},VV=(e,n,s,a,f)=>{const g=e.formatter.get(n),y=g[0],C=e.dom,A=e.selection,M=te=>{const fe=DP(e,te,n,s,f);return HV(e,g,fe,te,te,!0,y,s)},I=te=>mc(te)&&wn(te)&&(te.id==="_start"||te.id==="_end"),L=te=>Bt(g,fe=>Hb(e,fe,s,te,te)),W=te=>{const fe=oo(te.childNodes),ze=L(te)||Bt(g,Nt=>Fb(C,te,Nt)),Ve=te.parentNode;if(!ze&&ae(Ve)&&gA(y)&&L(Ve),y.deep&&fe.length)for(let Nt=0;Nt<fe.length;Nt++)W(fe[Nt]);ue(["underline","line-through","overline"],Nt=>{wn(te)&&e.dom.getStyle(te,"text-decoration")===Nt&&te.parentNode&&e4(C,te.parentNode)===Nt&&Hb(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Nt}},void 0,te)})},re=te=>{const fe=C.get(te?"_start":"_end");if(fe){let Fe=fe[te?"firstChild":"lastChild"];return I(Fe)&&(Fe=Fe[te?"firstChild":"lastChild"]),Vt(Fe)&&Fe.data.length===0&&(Fe=te?fe.previousSibling||fe.nextSibling:fe.nextSibling||fe.previousSibling),C.remove(fe,!0),Fe}else return null},de=te=>{let fe,Fe,ze=Yf(C,te,g,te.collapsed);if(y.split){if(ze=Jw(ze),fe=kP(e,ze,!0),Fe=kP(e,ze),fe!==Fe){if(fe=qE(fe,!0),Fe=qE(Fe,!1),Vx(C,fe,Fe)){const nt=V.from(fe.firstChild).getOr(fe);M(AP(C,nt,!0,"span",{id:"_start","data-mce-type":"bookmark"})),re(!0);return}if(Vx(C,Fe,fe)){const nt=V.from(Fe.lastChild).getOr(Fe);M(AP(C,nt,!1,"span",{id:"_end","data-mce-type":"bookmark"})),re(!1);return}fe=GE(C,fe,"span",{id:"_start","data-mce-type":"bookmark"}),Fe=GE(C,Fe,"span",{id:"_end","data-mce-type":"bookmark"});const Ve=C.createRng();Ve.setStartAfter(fe),Ve.setEndBefore(Fe),db(C,Ve,nt=>{ue(nt,Nt=>{!mc(Nt)&&!mc(Nt.parentNode)&&M(Nt)})}),M(fe),M(Fe),fe=re(!0),Fe=re()}else fe=Fe=M(fe);ze.startContainer=fe.parentNode?fe.parentNode:fe,ze.startOffset=C.nodeIndex(fe),ze.endContainer=Fe.parentNode?Fe.parentNode:Fe,ze.endOffset=C.nodeIndex(Fe)+1}db(C,ze,Ve=>{ue(Ve,W)})};if(a){if(rb(a)){const te=C.createRng();te.setStartBefore(a),te.setEndAfter(a),de(te)}else de(a);og(e,n,a,s);return}!A.isCollapsed()||!ri(y)||Bp(e).length?(J3(e,()=>cA(e,de),te=>ri(y)&&Rx(e,n,s,te)),e.nodeChanged()):gP(e,n,s,f),YE(e,n,s),og(e,n,a,s)},MP=(e,n,s,a,f)=>{(a||e.selection.isEditable())&&VV(e,n,s,a,f)},Hb=(e,n,s,a,f)=>OP(e,n,s,a,f).fold(ce,g=>(e.dom.rename(a,g),!0),Ze),RP=Lt.each,zV=(e,n,s,a)=>{const f=g=>{if(_f(g)&&wn(g.parentNode)&&e.isEditable(g)){const y=e4(e,g.parentNode);e.getStyle(g,"color")&&y?e.setStyle(g,"text-decoration",y):e.getStyle(g,"text-decoration")===y&&e.setStyle(g,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Lt.walk(a,f,"childNodes"),f(a))},UV=(e,n,s,a)=>{if(n.styles&&n.styles.backgroundColor){const f=SP(e,"fontSize");ZE(a,g=>f(g)&&e.isEditable(g),Nc(e,"backgroundColor",Ud(n.styles.backgroundColor,s)))}},WV=(e,n,s,a)=>{if(ri(n)&&(n.inline==="sub"||n.inline==="sup")){const f=SP(e,"fontSize");ZE(a,y=>f(y)&&e.isEditable(y),Nc(e,"fontSize",""));const g=Me(e.select(n.inline==="sup"?"sub":"sup",a),e.isEditable);e.remove(g,!0)}},jV=(e,n,s,a)=>{RP(n,f=>{ri(f)&&RP(e.dom.select(f.inline,a),g=>{Yd(g)&&Hb(e,f,s,g,f.exact?g:null)}),LV(e.dom,f,a)})},ZV=(e,n,s,a,f)=>{const g=f.parentNode;Gd(e,g,s,a)&&Hb(e,n,a,f)||n.merge_with_parents&&g&&e.dom.getParent(g,y=>Gd(e,y,s,a)?(Hb(e,n,a,f),!0):!1)},zx=Lt.each,qV=(e,n,s,a)=>{if(b3(e)&&ri(n)&&s.parentNode){const f=NM(e.schema),g=hV(ye.fromDom(s),y=>hc(y.dom));return hi(f,a)&&Rr(ye.fromDom(s.parentNode),!1)&&!g}else return!1},PP=(e,n,s,a)=>{if(zx(s.styles,(f,g)=>{e.setStyle(n,g,Ud(f,a))}),s.styles){const f=e.getAttrib(n,"style");f&&e.setAttrib(n,"data-mce-style",f)}},NP=(e,n,s,a)=>{const f=e.formatter.get(n),g=f[0],y=!a&&e.selection.isCollapsed(),C=e.dom,A=e.selection,M=(de,te=g)=>{Oe(te.onformat)&&te.onformat(de,te,s,a),PP(C,de,te,s),zx(te.attributes,(fe,Fe)=>{C.setAttrib(de,Fe,Ud(fe,s))}),zx(te.classes,fe=>{const Fe=Ud(fe,s);C.hasClass(de,Fe)||C.addClass(de,Fe)})},I=(de,te)=>{let fe=!1;return zx(de,Fe=>Bl(Fe)?C.getContentEditable(te)==="false"&&!Fe.ceFalseOverride||ae(Fe.collapsed)&&Fe.collapsed!==y?!0:C.is(te,Fe.selector)&&!hc(te)?(M(te,Fe),fe=!0,!1):!0:!1),fe},L=de=>{if(Z(de)){const te=C.create(de);return M(te),te}else return null},W=(de,te,fe)=>{const Fe=[];let ze=!0;const Ve=g.inline||g.block,nt=L(Ve),Nt=vt=>Vw(g)&&Gd(e,vt,n,s),Zt=(vt,ut,Mt)=>{const mn=zw(g)&&yi(e.schema,vt)&&Kf(e,ut,Ve);return Mt&&mn},on=(vt,ut,Mt,mn)=>{const Rn=vt.nodeName.toLowerCase(),Bo=Kf(e,Ve,Rn)&&Kf(e,ut,Ve),Mo=!fe&&Vt(vt)&&Ml(vt.data),Ps=hc(vt),Vs=!ri(g)||!de.isBlock(vt);return(Mt||mn)&&Bo&&!Mo&&!Ps&&Vs};db(de,te,vt=>{let ut;const Mt=mn=>{let Rn=!1,Bo=ze,Mo=!1;const Ps=mn.parentNode,Vs=Ps.nodeName.toLowerCase(),Nr=de.getContentEditable(mn);ae(Nr)&&(Bo=ze,ze=Nr==="true",Rn=!0,Mo=ib(e,mn));const ea=ze&&!Rn;if(Zs(mn)&&!qV(e,g,mn,Vs)){ut=null,od(g)&&de.remove(mn);return}if(Nt(mn)){ut=null;return}if(Zt(mn,Vs,ea)){const _s=de.rename(mn,Ve);M(_s),Fe.push(_s),ut=null;return}if(Bl(g)){let _s=I(f,mn);if(!_s&&ae(Ps)&&gA(g)&&(_s=I(f,Ps)),!ri(g)||_s){ut=null;return}}ae(nt)&&on(mn,Vs,ea,Mo)?(ut||(ut=de.clone(nt,!1),Ps.insertBefore(ut,mn),Fe.push(ut)),Mo&&Rn&&(ze=Bo),ut.appendChild(mn)):(ut=null,ue(oo(mn.childNodes),Mt),Rn&&(ze=Bo),ut=null)};ue(vt,Mt)}),g.links===!0&&ue(Fe,vt=>{const ut=Mt=>{Mt.nodeName==="A"&&M(Mt,g),ue(oo(Mt.childNodes),ut)};ut(vt)}),ue(Fe,vt=>{const ut=Rn=>{let Bo=0;return ue(Rn.childNodes,Mo=>{!cu(Mo)&&!mc(Mo)&&Bo++}),Bo},Mt=Rn=>ot(Rn.childNodes,uA).filter(Mo=>de.getContentEditable(Mo)!=="false"&&Fb(de,Mo,g)).map(Mo=>{const Ps=de.clone(Mo,!1);return M(Ps),de.replace(Ps,Rn,!0),de.remove(Mo,!0),Ps}).getOr(Rn),mn=ut(vt);if((Fe.length>1||!de.isBlock(vt))&&mn===0){de.remove(vt,!0);return}(ri(g)||od(g)&&g.wrapper)&&(!g.exact&&mn===1&&(vt=Mt(vt)),jV(e,f,s,vt),ZV(e,g,n,s,vt),UV(de,g,s,vt),zV(de,g,s,vt),WV(de,g,s,vt),$x(e,g,s,vt))})},re=rb(a)?a:A.getNode();if(C.getContentEditable(re)==="false"&&!ib(e,re)){a=re,I(f,a),ka(e,n,a,s);return}if(g){if(a)if(rb(a)){if(!I(f,a)){const de=C.createRng();de.setStartBefore(a),de.setEndAfter(a),W(C,Yf(C,de,f),!0)}}else W(C,a,!0);else!y||!ri(g)||Bp(e).length?(A.setRng(Jp(A.getRng())),J3(e,()=>{cA(e,(de,te)=>{const fe=te?de:Yf(C,de,f);W(C,fe,!1)})},Ze),e.nodeChanged()):BV(e,n,s),WE(e.formatter,n).each(de=>{ue(IV(e.selection),te=>PP(C,te,de,s))});UE(n,e)}ka(e,n,a,s)},BP=(e,n,s,a)=>{(a||e.selection.isEditable())&&NP(e,n,s,a)},bg=e=>Bn(e,"vars"),GV=(e,n)=>{e.set({}),n.on("NodeChange",s=>{XE(n,s.element,e.get())}),n.on("FormatApply FormatRemove",s=>{const a=V.from(s.node).map(f=>rb(f)?f:f.startContainer).bind(f=>wn(f)?V.some(f):V.from(f.parentElement)).getOrThunk(()=>FP(n));XE(n,a,e.get())})},FP=e=>e.selection.getStart(),IP=(e,n,s,a,f)=>je(n,C=>{const A=e.formatter.matchNode(C,s,f!=null?f:{},a);return!$e(A)},C=>dP(e,C,s)?!0:a?!1:ae(e.formatter.matchNode(C,s,f,!0))),LP=(e,n)=>{const s=n!=null?n:FP(e);return Me(Hw(e.dom,s),a=>wn(a)&&!Uu(a))},XE=(e,n,s)=>{const a=LP(e,n);$t(s,(f,g)=>{const y=C=>{const A=IP(e,a,g,C.similar,bg(C)?C.vars:void 0),M=A.isSome();if(C.state.get()!==M){C.state.set(M);const I=A.getOr(n);bg(C)?C.callback(M,{node:I,format:g,parents:a}):ue(C.callbacks,L=>L(M,{node:I,format:g,parents:a}))}};ue([f.withSimilar,f.withoutSimilar],y),ue(f.withVars,y)})},KV=(e,n,s,a,f,g)=>{const y=n.get();ue(s.split(","),C=>{const A=us(y,C).getOrThunk(()=>{const I={withSimilar:{state:jr(!1),similar:!0,callbacks:[]},withoutSimilar:{state:jr(!1),similar:!1,callbacks:[]},withVars:[]};return y[C]=I,I}),M=()=>{const I=LP(e);return IP(e,I,C,f,g).isSome()};if($e(g)){const I=f?A.withSimilar:A.withoutSimilar;I.callbacks.push(a),I.callbacks.length===1&&I.state.set(M())}else A.withVars.push({state:jr(M()),similar:f,vars:g,callback:a})}),n.set(y)},YV=(e,n,s)=>{const a=e.get();ue(n.split(","),f=>us(a,f).each(g=>{a[f]={withSimilar:Ot(ie({},g.withSimilar),{callbacks:Me(g.withSimilar.callbacks,y=>y!==s)}),withoutSimilar:Ot(ie({},g.withoutSimilar),{callbacks:Me(g.withoutSimilar.callbacks,y=>y!==s)}),withVars:Me(g.withVars,y=>y.callback!==s)}})),e.set(a)},XV=(e,n,s,a,f,g)=>(KV(e,n,s,a,f,g),{unbind:()=>YV(n,s,a)}),JV=(e,n,s,a)=>{const f=e.formatter.get(n);f&&(Rx(e,n,s,a)&&(!("toggle"in f[0])||f[0].toggle)?MP(e,n,s,a):BP(e,n,s,a))},$P=Lt.explode,HP=()=>{const e={};return{addFilter:(f,g)=>{ue($P(f),y=>{Bn(e,y)||(e[y]={name:y,callbacks:[]}),e[y].callbacks.push(g)})},getFilters:()=>fi(e),removeFilter:(f,g)=>{ue($P(f),y=>{if(Bn(e,y))if(ae(g)){const C=e[y],A=Me(C.callbacks,M=>M!==g);A.length>0?C.callbacks=A:delete e[y]}else delete e[y]})}}},QV=(e,n)=>{ue(n,s=>{e.attr(s,null)})},ez=(e,n,s)=>{e.addNodeFilter("font",a=>{ue(a,f=>{const g=n.parse(f.attr("style")),y=f.attr("color"),C=f.attr("face"),A=f.attr("size");y&&(g.color=y),C&&(g["font-family"]=C),A&&ji(A).each(M=>{g["font-size"]=s[M-1]}),f.name="span",f.attr("style",n.serialize(g)),QV(f,["color","face","size"])})})},tz=(e,n,s)=>{e.addNodeFilter("strike",a=>{const f=n.type!=="html4";ue(a,g=>{if(f)g.name="s";else{const y=s.parse(g.attr("style"));y["text-decoration"]="line-through",g.name="span",g.attr("style",s.serialize(y))}})})},nz=(e,n,s)=>{var a;const f=tk();n.convert_fonts_to_spans&&ez(e,f,Lt.explode((a=n.font_size_legacy_values)!==null&&a!==void 0?a:"")),tz(e,s,f)},JE=(e,n,s)=>{n.inline_styles&&nz(e,n,s)},QE=(e,n,s)=>{n.addNodeFilter("br",(a,f,g)=>{const y=Lt.extend({},s.getBlockElements()),C=s.getNonEmptyElements(),A=s.getWhitespaceElements();y.body=1;const M=I=>I.name in y||Ff(s,I);for(let I=0,L=a.length;I<L;I++){let W=a[I],re=W.parent;if(re&&M(re)&&W===re.lastChild){let de=W.prev;for(;de;){const te=de.name;if(te!=="span"||de.attr("data-mce-type")!=="bookmark"){te==="br"&&(W=null);break}de=de.prev}if(W&&(W.remove(),Xp(s,C,A,re))){const te=s.getElementRule(re.name);te&&(te.removeEmpty?re.remove():te.paddEmpty&&kx(e,g,M,re))}}else{let de=W;for(;re&&re.firstChild===de&&re.lastChild===de&&(de=re,!y[re.name]);)re=re.parent;if(de===re){const te=new $a("#text",3);te.value=ws,W.replace(te)}}}})},cee=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),Vb=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},Ux=e=>{const[n,...s]=e.split(","),a=s.join(","),f=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(f){const g=f[2]===";base64",y=g?Vb(a):decodeURIComponent(a);return V.some({type:f[1],data:y,base64Encoded:g})}else return V.none()},a1=(e,n,s=!0)=>{let a=n;if(s)try{a=atob(n)}catch(g){return V.none()}const f=new Uint8Array(a.length);for(let g=0;g<f.length;g++)f[g]=a.charCodeAt(g);return V.some(new Blob([f],{type:e}))},zb=e=>new Promise((n,s)=>{Ux(e).bind(({type:a,data:f,base64Encoded:g})=>a1(a,f,g)).fold(()=>s("Invalid data URI"),n)}),VP=e=>Vn(e,"blob:")?cee(e):Vn(e,"data:")?zb(e):Promise.reject("Unknown URI format"),oz=e=>new Promise((n,s)=>{const a=new FileReader;a.onloadend=()=>{n(a.result)},a.onerror=()=>{var f;s((f=a.error)===null||f===void 0?void 0:f.message)},a.readAsDataURL(e)});let sz=0;const uee=e=>"blobid"+sz++,zP=(e,n,s)=>Ux(e).bind(({data:a,type:f,base64Encoded:g})=>{if(n&&!g)return V.none();{const y=g?a:btoa(a);return s(y,f)}}),UP=(e,n,s)=>{const a=e.create(uee(),n,s);return e.add(a),a},rz=(e,n,s=!1)=>zP(n,s,(a,f)=>V.from(e.getByData(a,f)).orThunk(()=>a1(f,a).map(g=>UP(e,g,a)))),iz=(e,n)=>{const s=()=>Promise.reject("Invalid data URI");if(Vn(n,"blob:")){const a=e.getByUri(n);return ae(a)?Promise.resolve(a):VP(n).then(f=>oz(f).then(g=>zP(g,!1,y=>V.some(UP(e,f,y))).getOrThunk(s)))}else return Vn(n,"data:")?rz(e,n).fold(s,a=>Promise.resolve(a)):Promise.reject("Unknown image data format")},WP=e=>ae(e.attr("data-mce-bogus")),az=e=>e.attr("src")===sn.transparentSrc||ae(e.attr("data-mce-placeholder")),jP=(e,n)=>{const{blob_cache:s}=n;if(s){const a=f=>{const g=f.attr("src");az(f)||WP(f)||Ue(g)||rz(s,g,!0).each(y=>{f.attr("src",y.blobUri())})};e.addAttributeFilter("src",f=>ue(f,a))}},eT=(e,n)=>Vn(e,`${n}/`),Wx=(e,n,s,a,f)=>{let g;$e(e)?g="iframe":eT(e,"image")?g="img":eT(e,"video")?g="video":eT(e,"audio")?g="audio":g="iframe";const y=new $a(g,1);return y.attr(g==="audio"?{src:n}:{src:n,width:s,height:a}),(g==="audio"||g==="video")&&y.attr("controls",""),g==="iframe"&&f&&y.attr("sandbox",""),y},ZP=(e,n)=>{const s=e.schema;n.remove_trailing_brs&&QE(n,e,s),e.addAttributeFilter("href",f=>{let g=f.length;const y=A=>A.split(" ").filter(I=>I.length>0).concat(["noopener"]).sort().join(" "),C=A=>{const M=A?Lt.trim(A):"";return/\b(noopener)\b/g.test(M)?M:y(M)};if(!n.allow_unsafe_link_target)for(;g--;){const A=f[g];A.name==="a"&&A.attr("target")==="_blank"&&A.attr("rel",C(A.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",f=>{let g=f.length,y,C,A,M;for(;g--;)if(M=f[g],M.name==="a"&&M.firstChild&&!M.attr("href"))for(A=M.parent,y=M.lastChild;y&&A;)C=y.prev,A.insert(y,M),y=C}),n.fix_list_elements&&e.addNodeFilter("ul,ol",f=>{let g=f.length,y,C;for(;g--;)if(y=f[g],C=y.parent,C&&(C.name==="ul"||C.name==="ol"))if(y.prev&&y.prev.name==="li")y.prev.append(y);else{const A=new $a("li",1);A.attr("style","list-style-type: none"),y.wrap(A)}});const a=s.getValidClasses();n.validate&&a&&e.addAttributeFilter("class",f=>{var g;let y=f.length;for(;y--;){const C=f[y],A=(g=C.attr("class"))!==null&&g!==void 0?g:"",M=Lt.explode(A," ");let I="";for(let L=0;L<M.length;L++){const W=M[L];let re=!1,de=a["*"];de&&de[W]&&(re=!0),de=a[C.name],!re&&de&&de[W]&&(re=!0),re&&(I&&(I+=" "),I+=W)}I.length||(I=null),C.attr("class",I)}}),jP(e,n),n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",f=>ue(f,g=>{g.replace(Wx(g.attr("type"),g.name==="object"?g.attr("data"):g.attr("src"),g.attr("width"),g.attr("height"),n.sandbox_iframes))})),n.sandbox_iframes&&e.addNodeFilter("iframe",f=>ue(f,g=>g.attr("sandbox","")))},{entries:ii,setPrototypeOf:lz,isFrozen:dee,getPrototypeOf:fee,getOwnPropertyDescriptor:hee}=Object;let{freeze:ni,seal:yc,create:Wh}=Object,{apply:Jd,construct:tT}=typeof Reflect!="undefined"&&Reflect;Jd||(Jd=function(n,s,a){return n.apply(s,a)}),ni||(ni=function(n){return n}),yc||(yc=function(n){return n}),tT||(tT=function(n,s){return new n(...s)});const cz=pu(Array.prototype.forEach),l1=pu(Array.prototype.pop),Qd=pu(Array.prototype.push),ih=pu(String.prototype.toLowerCase),jx=pu(String.prototype.toString),nT=pu(String.prototype.match),gu=pu(String.prototype.replace),qP=pu(String.prototype.indexOf),uz=pu(String.prototype.trim),Bc=pu(RegExp.prototype.test),c1=dz(TypeError);function pu(e){return function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),f=1;f<s;f++)a[f-1]=arguments[f];return Jd(e,n,a)}}function dz(e){return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return tT(e,s)}}function Rs(e,n,s){var a;s=(a=s)!==null&&a!==void 0?a:ih,lz&&lz(e,null);let f=n.length;for(;f--;){let g=n[f];if(typeof g=="string"){const y=s(g);y!==g&&(dee(n)||(n[f]=y),g=y)}e[g]=!0}return e}function u1(e){const n=Wh(null);for(const[s,a]of ii(e))n[s]=a;return n}function Zx(e,n){for(;e!==null;){const a=hee(e,n);if(a){if(a.get)return pu(a.get);if(typeof a.value=="function")return pu(a.value)}e=fee(e)}function s(a){return null}return s}const oT=ni(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),sT=ni(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),vg=ni(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),GP=ni(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),rT=ni(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),KP=ni(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),YP=ni(["#text"]),iT=ni(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),aT=ni(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),XP=ni(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ub=ni(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),JP=yc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),QP=yc(/<%[\w\W]*|[\w\W]*%>/gm),eN=yc(/\${[\w\W]*}/gm),tN=yc(/^data-[\-\w.\u00B7-\uFFFF]/),nN=yc(/^aria-[\-\w]+$/),oN=yc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),fz=yc(/^(?:\w+script|data):/i),hz=yc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qx=yc(/^html$/i);var d1=Object.freeze({__proto__:null,MUSTACHE_EXPR:JP,ERB_EXPR:QP,TMPLIT_EXPR:eN,DATA_ATTR:tN,ARIA_ATTR:nN,IS_ALLOWED_URI:oN,IS_SCRIPT_OR_DATA:fz,ATTR_WHITESPACE:hz,DOCTYPE_NAME:qx});const sN=()=>typeof window=="undefined"?null:window,rN=function(n,s){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let a=null;const f="data-tt-policy-suffix";s&&s.hasAttribute(f)&&(a=s.getAttribute(f));const g="dompurify"+(a?"#"+a:"");try{return n.createPolicy(g,{createHTML(y){return y},createScriptURL(y){return y}})}catch(y){return null}};function Wb(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sN();const n=$o=>Wb($o);if(n.version="3.0.5",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;const s=e.document,a=s.currentScript;let{document:f}=e;const{DocumentFragment:g,HTMLTemplateElement:y,Node:C,Element:A,NodeFilter:M,NamedNodeMap:I=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:L,DOMParser:W,trustedTypes:re}=e,de=A.prototype,te=Zx(de,"cloneNode"),fe=Zx(de,"nextSibling"),Fe=Zx(de,"childNodes"),ze=Zx(de,"parentNode");if(typeof y=="function"){const $o=f.createElement("template");$o.content&&$o.content.ownerDocument&&(f=$o.content.ownerDocument)}let Ve,nt="";const{implementation:Nt,createNodeIterator:Zt,createDocumentFragment:on,getElementsByTagName:vt}=f,{importNode:ut}=s;let Mt={};n.isSupported=typeof ii=="function"&&typeof ze=="function"&&Nt&&Nt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:mn,ERB_EXPR:Rn,TMPLIT_EXPR:Bo,DATA_ATTR:Mo,ARIA_ATTR:Ps,IS_SCRIPT_OR_DATA:Vs,ATTR_WHITESPACE:Nr}=d1;let{IS_ALLOWED_URI:ea}=d1,_s=null;const Xt=Rs({},[...oT,...sT,...vg,...rT,...YP]);let Cn=null;const Ro=Rs({},[...iT,...aT,...XP,...Ub]);let Vo=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),vn=null,lo=null,Gt=!0,co=!0,Go=!1,Fs=!0,Ns=!1,xi=!1,Au=!1,cf=!1,tl=!1,Vc=!1,mo=!1,hs=!0,zs=!1;const cr="user-content-";let yr=!0,Cl=!1,pd={},um=null;const Uv=Rs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Lg=null;const F1=Rs({},["audio","video","img","source","image","track"]);let I1=null;const Wv=Rs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),$g="http://www.w3.org/1998/Math/MathML",Hg="http://www.w3.org/2000/svg",Eu="http://www.w3.org/1999/xhtml";let uf=Eu,jv=!1,L1=null;const zC=Rs({},[$g,Hg,Eu],jx);let df;const UC=["application/xhtml+xml","text/html"],Zv="text/html";let ha,dm=null;const v_=f.createElement("form"),qv=function(ft){return ft instanceof RegExp||ft instanceof Function},Gv=function(ft){if(!(dm&&dm===ft)){if((!ft||typeof ft!="object")&&(ft={}),ft=u1(ft),df=UC.indexOf(ft.PARSER_MEDIA_TYPE)===-1?df=Zv:df=ft.PARSER_MEDIA_TYPE,ha=df==="application/xhtml+xml"?jx:ih,_s="ALLOWED_TAGS"in ft?Rs({},ft.ALLOWED_TAGS,ha):Xt,Cn="ALLOWED_ATTR"in ft?Rs({},ft.ALLOWED_ATTR,ha):Ro,L1="ALLOWED_NAMESPACES"in ft?Rs({},ft.ALLOWED_NAMESPACES,jx):zC,I1="ADD_URI_SAFE_ATTR"in ft?Rs(u1(Wv),ft.ADD_URI_SAFE_ATTR,ha):Wv,Lg="ADD_DATA_URI_TAGS"in ft?Rs(u1(F1),ft.ADD_DATA_URI_TAGS,ha):F1,um="FORBID_CONTENTS"in ft?Rs({},ft.FORBID_CONTENTS,ha):Uv,vn="FORBID_TAGS"in ft?Rs({},ft.FORBID_TAGS,ha):{},lo="FORBID_ATTR"in ft?Rs({},ft.FORBID_ATTR,ha):{},pd="USE_PROFILES"in ft?ft.USE_PROFILES:!1,Gt=ft.ALLOW_ARIA_ATTR!==!1,co=ft.ALLOW_DATA_ATTR!==!1,Go=ft.ALLOW_UNKNOWN_PROTOCOLS||!1,Fs=ft.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ns=ft.SAFE_FOR_TEMPLATES||!1,xi=ft.WHOLE_DOCUMENT||!1,tl=ft.RETURN_DOM||!1,Vc=ft.RETURN_DOM_FRAGMENT||!1,mo=ft.RETURN_TRUSTED_TYPE||!1,cf=ft.FORCE_BODY||!1,hs=ft.SANITIZE_DOM!==!1,zs=ft.SANITIZE_NAMED_PROPS||!1,yr=ft.KEEP_CONTENT!==!1,Cl=ft.IN_PLACE||!1,ea=ft.ALLOWED_URI_REGEXP||oN,uf=ft.NAMESPACE||Eu,Vo=ft.CUSTOM_ELEMENT_HANDLING||{},ft.CUSTOM_ELEMENT_HANDLING&&qv(ft.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Vo.tagNameCheck=ft.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ft.CUSTOM_ELEMENT_HANDLING&&qv(ft.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Vo.attributeNameCheck=ft.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ft.CUSTOM_ELEMENT_HANDLING&&typeof ft.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Vo.allowCustomizedBuiltInElements=ft.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ns&&(co=!1),Vc&&(tl=!0),pd&&(_s=Rs({},[...YP]),Cn=[],pd.html===!0&&(Rs(_s,oT),Rs(Cn,iT)),pd.svg===!0&&(Rs(_s,sT),Rs(Cn,aT),Rs(Cn,Ub)),pd.svgFilters===!0&&(Rs(_s,vg),Rs(Cn,aT),Rs(Cn,Ub)),pd.mathMl===!0&&(Rs(_s,rT),Rs(Cn,XP),Rs(Cn,Ub))),ft.ADD_TAGS&&(_s===Xt&&(_s=u1(_s)),Rs(_s,ft.ADD_TAGS,ha)),ft.ADD_ATTR&&(Cn===Ro&&(Cn=u1(Cn)),Rs(Cn,ft.ADD_ATTR,ha)),ft.ADD_URI_SAFE_ATTR&&Rs(I1,ft.ADD_URI_SAFE_ATTR,ha),ft.FORBID_CONTENTS&&(um===Uv&&(um=u1(um)),Rs(um,ft.FORBID_CONTENTS,ha)),yr&&(_s["#text"]=!0),xi&&Rs(_s,["html","head","body"]),_s.table&&(Rs(_s,["tbody"]),delete vn.tbody),ft.TRUSTED_TYPES_POLICY){if(typeof ft.TRUSTED_TYPES_POLICY.createHTML!="function")throw c1('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ft.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw c1('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ve=ft.TRUSTED_TYPES_POLICY,nt=Ve.createHTML("")}else Ve===void 0&&(Ve=rN(re,a)),Ve!==null&&typeof nt=="string"&&(nt=Ve.createHTML(""));ni&&ni(ft),dm=ft}},ff=Rs({},["mi","mo","mn","ms","mtext"]),$1=Rs({},["foreignobject","desc","title","annotation-xml"]),rt=Rs({},["title","style","font","a","script"]),it=Rs({},sT);Rs(it,vg),Rs(it,GP);const Yt=Rs({},rT);Rs(Yt,KP);const zt=function(ft){let Sn=ze(ft);(!Sn||!Sn.tagName)&&(Sn={namespaceURI:uf,tagName:"template"});const eo=ih(ft.tagName),Br=ih(Sn.tagName);return L1[ft.namespaceURI]?ft.namespaceURI===Hg?Sn.namespaceURI===Eu?eo==="svg":Sn.namespaceURI===$g?eo==="svg"&&(Br==="annotation-xml"||ff[Br]):!!it[eo]:ft.namespaceURI===$g?Sn.namespaceURI===Eu?eo==="math":Sn.namespaceURI===Hg?eo==="math"&&$1[Br]:!!Yt[eo]:ft.namespaceURI===Eu?Sn.namespaceURI===Hg&&!$1[Br]||Sn.namespaceURI===$g&&!ff[Br]?!1:!Yt[eo]&&(rt[eo]||!it[eo]):!!(df==="application/xhtml+xml"&&L1[ft.namespaceURI]):!1},_n=function(ft){Qd(n.removed,{element:ft});try{ft.parentNode.removeChild(ft)}catch(Sn){ft.remove()}},zo=function(ft,Sn){try{Qd(n.removed,{attribute:Sn.getAttributeNode(ft),from:Sn})}catch(eo){Qd(n.removed,{attribute:null,from:Sn})}if(Sn.removeAttribute(ft),ft==="is"&&!Cn[ft])if(tl||Vc)try{_n(Sn)}catch(eo){}else try{Sn.setAttribute(ft,"")}catch(eo){}},gr=function(ft){let Sn,eo;if(cf)ft="<remove></remove>"+ft;else{const Uc=nT(ft,/^[\r\n\t ]+/);eo=Uc&&Uc[0]}df==="application/xhtml+xml"&&uf===Eu&&(ft='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ft+"</body></html>");const Br=Ve?Ve.createHTML(ft):ft;if(uf===Eu)try{Sn=new W().parseFromString(Br,df)}catch(Uc){}if(!Sn||!Sn.documentElement){Sn=Nt.createDocument(uf,"template",null);try{Sn.documentElement.innerHTML=jv?nt:Br}catch(Uc){}}const Ua=Sn.body||Sn.documentElement;return ft&&eo&&Ua.insertBefore(f.createTextNode(eo),Ua.childNodes[0]||null),uf===Eu?vt.call(Sn,xi?"html":"body")[0]:xi?Sn.documentElement:Ua},nl=function(ft){return Zt.call(ft.ownerDocument||ft,ft,M.SHOW_ELEMENT|M.SHOW_COMMENT|M.SHOW_TEXT,null,!1)},Ni=function(ft){return ft instanceof L&&(typeof ft.nodeName!="string"||typeof ft.textContent!="string"||typeof ft.removeChild!="function"||!(ft.attributes instanceof I)||typeof ft.removeAttribute!="function"||typeof ft.setAttribute!="function"||typeof ft.namespaceURI!="string"||typeof ft.insertBefore!="function"||typeof ft.hasChildNodes!="function")},fm=function(ft){return typeof C=="object"?ft instanceof C:ft&&typeof ft=="object"&&typeof ft.nodeType=="number"&&typeof ft.nodeName=="string"},zc=function(ft,Sn,eo){Mt[ft]&&cz(Mt[ft],Br=>{Br.call(n,Sn,eo,dm)})},y_=function(ft){let Sn;if(zc("beforeSanitizeElements",ft,null),Ni(ft))return _n(ft),!0;const eo=ha(ft.nodeName);if(zc("uponSanitizeElement",ft,{tagName:eo,allowedTags:_s}),ft.hasChildNodes()&&!fm(ft.firstElementChild)&&(!fm(ft.content)||!fm(ft.content.firstElementChild))&&Bc(/<[/\w]/g,ft.innerHTML)&&Bc(/<[/\w]/g,ft.textContent))return _n(ft),!0;if(!_s[eo]||vn[eo]){if(!vn[eo]&&w_(eo)&&(Vo.tagNameCheck instanceof RegExp&&Bc(Vo.tagNameCheck,eo)||Vo.tagNameCheck instanceof Function&&Vo.tagNameCheck(eo)))return!1;if(yr&&!um[eo]){const Br=ze(ft)||ft.parentNode,Ua=Fe(ft)||ft.childNodes;if(Ua&&Br){const Uc=Ua.length;for(let Si=Uc-1;Si>=0;--Si)Br.insertBefore(te(Ua[Si],!0),fe(ft))}}return _n(ft),!0}return ft instanceof A&&!zt(ft)||(eo==="noscript"||eo==="noembed"||eo==="noframes")&&Bc(/<\/no(script|embed|frames)/i,ft.innerHTML)?(_n(ft),!0):(Ns&&ft.nodeType===3&&(Sn=ft.textContent,Sn=gu(Sn,mn," "),Sn=gu(Sn,Rn," "),Sn=gu(Sn,Bo," "),ft.textContent!==Sn&&(Qd(n.removed,{element:ft.cloneNode()}),ft.textContent=Sn)),zc("afterSanitizeElements",ft,null),!1)},WC=function(ft,Sn,eo){if(hs&&(Sn==="id"||Sn==="name")&&(eo in f||eo in v_))return!1;if(!(co&&!lo[Sn]&&Bc(Mo,Sn))){if(!(Gt&&Bc(Ps,Sn))){if(!Cn[Sn]||lo[Sn]){if(!(w_(ft)&&(Vo.tagNameCheck instanceof RegExp&&Bc(Vo.tagNameCheck,ft)||Vo.tagNameCheck instanceof Function&&Vo.tagNameCheck(ft))&&(Vo.attributeNameCheck instanceof RegExp&&Bc(Vo.attributeNameCheck,Sn)||Vo.attributeNameCheck instanceof Function&&Vo.attributeNameCheck(Sn))||Sn==="is"&&Vo.allowCustomizedBuiltInElements&&(Vo.tagNameCheck instanceof RegExp&&Bc(Vo.tagNameCheck,eo)||Vo.tagNameCheck instanceof Function&&Vo.tagNameCheck(eo))))return!1}else if(!I1[Sn]){if(!Bc(ea,gu(eo,Nr,""))){if(!((Sn==="src"||Sn==="xlink:href"||Sn==="href")&&ft!=="script"&&qP(eo,"data:")===0&&Lg[ft])){if(!(Go&&!Bc(Vs,gu(eo,Nr,"")))){if(eo)return!1}}}}}}return!0},w_=function(ft){return ft.indexOf("-")>0},x_=function(ft){let Sn,eo,Br,Ua;zc("beforeSanitizeAttributes",ft,null);const{attributes:Uc}=ft;if(!Uc)return;const Si={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Cn};for(Ua=Uc.length;Ua--;){Sn=Uc[Ua];const{name:Tu,namespaceURI:jC}=Sn;eo=Tu==="value"?Sn.value:uz(Sn.value);const xX=eo;if(Br=ha(Tu),Si.attrName=Br,Si.attrValue=eo,Si.keepAttr=!0,Si.forceKeepAttr=void 0,zc("uponSanitizeAttribute",ft,Si),eo=Si.attrValue,Si.forceKeepAttr)continue;if(!Si.keepAttr){zo(Tu,ft);continue}if(!Fs&&Bc(/\/>/i,eo)){zo(Tu,ft);continue}Ns&&(eo=gu(eo,mn," "),eo=gu(eo,Rn," "),eo=gu(eo,Bo," "));const S_=ha(ft.nodeName);if(!WC(S_,Br,eo)){zo(Tu,ft);continue}if(zs&&(Br==="id"||Br==="name")&&(zo(Tu,ft),eo=cr+eo),Ve&&typeof re=="object"&&typeof re.getAttributeType=="function"&&!jC)switch(re.getAttributeType(S_,Br)){case"TrustedHTML":{eo=Ve.createHTML(eo);break}case"TrustedScriptURL":{eo=Ve.createScriptURL(eo);break}}if(eo!==xX)try{jC?ft.setAttributeNS(jC,Tu,eo):ft.setAttribute(Tu,eo)}catch(t$){zo(Tu,ft)}}zc("afterSanitizeAttributes",ft,null)},wX=function $o(ft){let Sn;const eo=nl(ft);for(zc("beforeSanitizeShadowDOM",ft,null);Sn=eo.nextNode();)zc("uponSanitizeShadowNode",Sn,null),!y_(Sn)&&(Sn.content instanceof g&&$o(Sn.content),x_(Sn));zc("afterSanitizeShadowDOM",ft,null)};return n.sanitize=function($o){let ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Sn,eo,Br,Ua;if(jv=!$o,jv&&($o="<!-->"),typeof $o!="string"&&!fm($o))if(typeof $o.toString=="function"){if($o=$o.toString(),typeof $o!="string")throw c1("dirty is not a string, aborting")}else throw c1("toString is not a function");if(!n.isSupported)return $o;if(Au||Gv(ft),n.removed=[],typeof $o=="string"&&(Cl=!1),Cl){if($o.nodeName){const Tu=ha($o.nodeName);if(!_s[Tu]||vn[Tu])throw c1("root node is forbidden and cannot be sanitized in-place")}}else if($o instanceof C)Sn=gr("<!---->"),eo=Sn.ownerDocument.importNode($o,!0),eo.nodeType===1&&eo.nodeName==="BODY"||eo.nodeName==="HTML"?Sn=eo:Sn.appendChild(eo);else{if(!tl&&!Ns&&!xi&&$o.indexOf("<")===-1)return Ve&&mo?Ve.createHTML($o):$o;if(Sn=gr($o),!Sn)return tl?null:mo?nt:""}Sn&&cf&&_n(Sn.firstChild);const Uc=nl(Cl?$o:Sn);for(;Br=Uc.nextNode();)y_(Br)||(Br.content instanceof g&&wX(Br.content),x_(Br));if(Cl)return $o;if(tl){if(Vc)for(Ua=on.call(Sn.ownerDocument);Sn.firstChild;)Ua.appendChild(Sn.firstChild);else Ua=Sn;return(Cn.shadowroot||Cn.shadowrootmode)&&(Ua=ut.call(s,Ua,!0)),Ua}let Si=xi?Sn.outerHTML:Sn.innerHTML;return xi&&_s["!doctype"]&&Sn.ownerDocument&&Sn.ownerDocument.doctype&&Sn.ownerDocument.doctype.name&&Bc(qx,Sn.ownerDocument.doctype.name)&&(Si="<!DOCTYPE "+Sn.ownerDocument.doctype.name+`>
`+Si),Ns&&(Si=gu(Si,mn," "),Si=gu(Si,Rn," "),Si=gu(Si,Bo," ")),Ve&&mo?Ve.createHTML(Si):Si},n.setConfig=function($o){Gv($o),Au=!0},n.clearConfig=function(){dm=null,Au=!1},n.isValidAttribute=function($o,ft,Sn){dm||Gv({});const eo=ha($o),Br=ha(ft);return WC(eo,Br,Sn)},n.addHook=function($o,ft){typeof ft=="function"&&(Mt[$o]=Mt[$o]||[],Qd(Mt[$o],ft))},n.removeHook=function($o){if(Mt[$o])return l1(Mt[$o])},n.removeHooks=function($o){Mt[$o]&&(Mt[$o]=[])},n.removeAllHooks=function(){Mt={}},n}var iN=Wb();const aN=Lt.each,jh=Lt.trim,lT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],lN={ftp:21,http:80,https:443,mailto:25},jb=["img","video"],cN=(e,n)=>ae(e)?!e:ae(n)?!Je(jb,n):!0,cT=e=>{try{return decodeURIComponent(e)}catch(n){return unescape(e)}},uT=(e,n,s)=>{const a=cT(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(a)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(a)?cN(e.allow_svg_data_urls,s)&&/^data:image\/svg\+xml/i.test(a):/^data:/i.test(a)};class Fc{static parseDataUri(n){let s;const a=decodeURIComponent(n).split(","),f=/data:([^;]+)/.exec(a[0]);return f&&(s=f[1]),{type:s,data:a[1]}}static isDomSafe(n,s,a={}){if(a.allow_script_urls)return!0;{const f=Dh.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!uT(a,f,s)}}static getDocumentBaseUrl(n){var s;let a;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?a=(s=n.href)!==null&&s!==void 0?s:"":a=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/")),a}constructor(n,s={}){this.path="",this.directory="",n=jh(n),this.settings=s;const a=s.base_uri,f=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){f.source=n;return}const g=n.indexOf("//")===0;if(n.indexOf("/")===0&&!g&&(n=(a&&a.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const C=a?a.path:new Fc(document.location.href).directory;if((a==null?void 0:a.protocol)==="")n="//mce_host"+f.toAbsPath(C,n);else{const A=/([^#?]*)([#?]?.*)/.exec(n);A&&(n=(a&&a.protocol||"http")+"://mce_host"+f.toAbsPath(C,A[1])+A[2])}}n=n.replace(/@@/g,"(mce_at)");const y=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);y&&aN(lT,(C,A)=>{let M=y[A];M&&(M=M.replace(/\(mce_at\)/g,"@@")),f[C]=M}),a&&(f.protocol||(f.protocol=a.protocol),f.userInfo||(f.userInfo=a.userInfo),!f.port&&f.host==="mce_host"&&(f.port=a.port),(!f.host||f.host==="mce_host")&&(f.host=a.host),f.source=""),g&&(f.protocol="")}setPath(n){const s=/^(.*?)\/?(\w+)?$/.exec(n);s&&(this.path=s[0],this.directory=s[1],this.file=s[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const s=new Fc(n,{base_uri:this});if(s.host!=="mce_host"&&this.host!==s.host&&s.host||this.port!==s.port||this.protocol!==s.protocol&&s.protocol!=="")return s.getURI();const a=this.getURI(),f=s.getURI();if(a===f||a.charAt(a.length-1)==="/"&&a.substr(0,a.length-1)===f)return a;let g=this.toRelPath(this.path,s.path);return s.query&&(g+="?"+s.query),s.anchor&&(g+="#"+s.anchor),g}toAbsolute(n,s){const a=new Fc(n,{base_uri:this});return a.getURI(s&&this.isSameOrigin(a))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const s=this.protocol?lN[this.protocol]:null;if(s&&(this.port||s)==(n.port||s))return!0}return!1}toRelPath(n,s){let a=0,f="",g,y;const C=n.substring(0,n.lastIndexOf("/")).split("/"),A=s.split("/");if(C.length>=A.length){for(g=0,y=C.length;g<y;g++)if(g>=A.length||C[g]!==A[g]){a=g+1;break}}if(C.length<A.length){for(g=0,y=A.length;g<y;g++)if(g>=C.length||C[g]!==A[g]){a=g+1;break}}if(a===1)return s;for(g=0,y=C.length-(a-1);g<y;g++)f+="../";for(g=a-1,y=A.length;g<y;g++)g!==a-1?f+="/"+A[g]:f+=A[g];return f}toAbsPath(n,s){let a=0;const f=/\/$/.test(s)?"/":"",g=n.split("/"),y=s.split("/"),C=[];aN(g,L=>{L&&C.push(L)});const A=[];for(let L=y.length-1;L>=0;L--)if(!(y[L].length===0||y[L]===".")){if(y[L]===".."){a++;continue}if(a>0){a--;continue}A.push(y[L])}const M=C.length-a;let I;return M<=0?I=Kn(A).join("/"):I=C.slice(0,M).join("/")+"/"+Kn(A).join("/"),I.indexOf("/")!==0&&(I="/"+I),f&&I.lastIndexOf("/")!==I.length-1&&(I+=f),I}getURI(n=!1){let s;return(!this.source||n)&&(s="",n||(this.protocol?s+=this.protocol+"://":s+="//",this.userInfo&&(s+=this.userInfo+"@"),this.host&&(s+=this.host),this.port&&(s+=":"+this.port)),this.path&&(s+=this.path),this.query&&(s+="?"+this.query),this.anchor&&(s+="#"+this.anchor),this.source=s),this.source}}const mz=Lt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),dT="data-mce-type";let uN=0;const Gx=(e,n,s,a,f)=>{var g,y,C,A;const M=n.validate,I=s.getSpecialElements();e.nodeType===Em&&!n.allow_conditional_comments&&/^\[if/i.test((g=e.nodeValue)!==null&&g!==void 0?g:"")&&(e.nodeValue=" "+e.nodeValue);const L=(y=f==null?void 0:f.tagName)!==null&&y!==void 0?y:e.nodeName.toLowerCase();if(a!=="html"&&s.isValid(a)){ae(f)&&(f.allowedTags[L]=!0);return}if(e.nodeType!==dl||L==="body")return;const W=ye.fromDom(e),re=Od(W,dT),de=gi(W,"data-mce-bogus");if(!re&&Z(de)){de==="all"?ks(W):Ql(W);return}const te=s.getElementRule(L);if(M&&!te){Bn(I,L)?ks(W):Ql(W);return}else ae(f)&&(f.allowedTags[L]=!0);if(M&&te&&!re){if(ue((C=te.attributesForced)!==null&&C!==void 0?C:[],fe=>{Js(W,fe.name,fe.value==="{$uid}"?`mce_${uN++}`:fe.value)}),ue((A=te.attributesDefault)!==null&&A!==void 0?A:[],fe=>{Od(W,fe.name)||Js(W,fe.name,fe.value==="{$uid}"?`mce_${uN++}`:fe.value)}),te.attributesRequired&&!Bt(te.attributesRequired,fe=>Od(W,fe))){Ql(W);return}if(te.removeEmptyAttrs&&Yr(W)){Ql(W);return}te.outputName&&te.outputName!==L&&Qu(W,te.outputName)}},gz=(e,n,s,a,f)=>{const g=e.tagName.toLowerCase(),{attrName:y,attrValue:C}=f;f.keepAttr=fT(n,s,a,g,y,C),f.keepAttr?(f.allowedAttributes[y]=!0,fN(y,s)&&(f.attrValue=y),n.allow_svg_data_urls&&Vn(C,"data:image/svg+xml")&&(f.forceKeepAttr=!0)):dN(e,y)&&(f.forceKeepAttr=!0)},fT=(e,n,s,a,f,g)=>s!=="html"&&!Ku(a)?!0:!(f in mz&&uT(e,g,a))&&(!e.validate||n.isValid(a,f)||Vn(f,"data-")||Vn(f,"aria-")),dN=(e,n)=>e.hasAttribute(dT)&&(n==="id"||n==="class"||n==="style"),fN=(e,n)=>e in n.getBoolAttrs(),pz=(e,n,s,a)=>{const{attributes:f}=e;for(let g=f.length-1;g>=0;g--){const y=f[g],C=y.name,A=y.value;!fT(n,s,a,e.tagName.toLowerCase(),C,A)&&!dN(e,C)?e.removeAttribute(C):fN(C,s)&&e.setAttribute(C,C)}},bz=(e,n,s)=>{const a=iN();return a.addHook("uponSanitizeElement",(f,g)=>{Gx(f,e,n,s.track(f),g)}),a.addHook("uponSanitizeAttribute",(f,g)=>{gz(f,e,n,s.current(),g)}),a},vz=(e,n)=>{const a=ie({},{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]});return a.PARSER_MEDIA_TYPE=n,e.allow_script_urls?a.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(a.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),a},yz=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(a=>`xlink:${a}`),s={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};return iN().sanitize(e,s),e.innerHTML},wz=(e,n)=>{const s=Gy();if(e.sanitize){const a=bz(e,n,s);return{sanitizeHtmlElement:(g,y)=>{a.sanitize(g,vz(e,y)),a.removed=[],s.reset()},sanitizeNamespaceElement:yz}}else return{sanitizeHtmlElement:(g,y)=>{const C=document.createNodeIterator(g,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let A;for(;A=C.nextNode();){const M=s.track(A);Gx(A,e,n,M),wn(A)&&pz(A,e,n,M)}s.reset()},sanitizeNamespaceElement:ge}},hN=Lt.makeMap,mN=Lt.extend,Zb=(e,n,s,a)=>{const f=e.name,g=f in s&&f!=="title"&&f!=="textarea",y=n.childNodes;for(let C=0,A=y.length;C<A;C++){const M=y[C],I=new $a(M.nodeName.toLowerCase(),M.nodeType);if(wn(M)){const L=M.attributes;for(let W=0,re=L.length;W<re;W++){const de=L[W];I.attr(de.name,de.value)}Ku(I.name)&&(a(M),I.value=M.innerHTML)}else Vt(M)?(I.value=M.data,g&&(I.raw=!0)):(Mf(M)||H6(M)||w0(M))&&(I.value=M.data);Ku(I.name)||Zb(I,M,s,a),e.append(I)}},Va=(e,n,s)=>{const a=[];for(let f=e,g=f;f;g=f,f=f.walk()){const y=f;ue(n,C=>C(y)),Ue(y.parent)&&y!==e?f=g:a.push(y)}for(let f=a.length-1;f>=0;f--){const g=a[f];ue(s,y=>y(g))}},xz=(e,n,s,a)=>{const f=s.validate,g=n.getNonEmptyElements(),y=n.getWhitespaceElements(),C=mN(hN("script,style,head,html,body,title,meta,param"),n.getBlockElements()),A=NM(n),M=/[ \t\r\n]+/g,I=/^[ \t\r\n]+/,L=/[ \t\r\n]+$/,W=ze=>{let Ve=ze.parent;for(;ae(Ve);){if(Ve.name in y)return!0;Ve=Ve.parent}return!1},re=ze=>{let Ve=ze;for(;ae(Ve);){if(Ve.name in A)return Xp(n,g,y,Ve);Ve=Ve.parent}return!1},de=ze=>ze.name in C||Ff(n,ze)||Ku(ze.name)&&ze.parent===e,te=(ze,Ve)=>{const nt=Ve?ze.prev:ze.next;return ae(nt)||Ue(ze.parent)?!1:de(ze.parent)&&(ze.parent!==e||a.isRootContent===!0)};return[ze=>{var Ve;if(ze.type===3&&!W(ze)){let nt=(Ve=ze.value)!==null&&Ve!==void 0?Ve:"";nt=nt.replace(M," "),(SE(ze.prev,de)||te(ze,!0))&&(nt=nt.replace(I,"")),nt.length===0?ze.remove():ze.value=nt}},ze=>{var Ve;if(ze.type===1){const nt=n.getElementRule(ze.name);if(f&&nt){const Nt=Xp(n,g,y,ze);nt.paddInEmptyBlock&&Nt&&re(ze)?kx(s,a,de,ze):nt.removeEmpty&&Nt?de(ze)?ze.remove():ze.unwrap():nt.paddEmpty&&(Nt||KR(ze))&&kx(s,a,de,ze)}}else if(ze.type===3&&!W(ze)){let nt=(Ve=ze.value)!==null&&Ve!==void 0?Ve:"";(ze.next&&de(ze.next)||te(ze,!1))&&(nt=nt.replace(L,"")),nt.length===0?ze.remove():ze.value=nt}}]},Kx=(e,n)=>{var s;const a=(s=n.forced_root_block)!==null&&s!==void 0?s:e.forced_root_block;return a===!1?"":a===!0?"p":a},bu=(e={},n=Hf())=>{const s=HP(),a=HP(),f=ie({validate:!0,root_name:"body",sanitize:!0},e),g=new DOMParser,y=wz(f,n),C=(Ve,nt,Nt="html")=>{const Zt=Nt==="xhtml"?"application/xhtml+xml":"text/html",on=Bn(n.getSpecialElements(),nt.toLowerCase()),vt=on?`<${nt}>${Ve}</${nt}>`:Ve,ut=Nt==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${vt}</body></html>`:`<body>${vt}</body>`,Mt=g.parseFromString(ut,Zt).body;return y.sanitizeHtmlElement(Mt,Zt),on?Mt.firstChild:Mt},A=s.addFilter,M=s.getFilters,I=s.removeFilter,L=a.addFilter,W=a.getFilters,re=a.removeFilter,de=(Ve,nt)=>{Tx(n,Ve)&&nt.push(Ve)},te=(Ve,nt)=>{const Nt=Z(nt.attr(dT)),Zt=nt.type===1&&!Bn(Ve,nt.name)&&!Ff(n,nt)&&!Ku(nt.name);return nt.type===3||Zt&&!Nt},fe=(Ve,nt)=>{const Nt=mN(hN("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Zt=/^[ \t\r\n]+/,on=/[ \t\r\n]+$/;let vt=Ve.firstChild,ut=null;const Mt=mn=>{var Rn,Bo;mn&&(vt=mn.firstChild,vt&&vt.type===3&&(vt.value=(Rn=vt.value)===null||Rn===void 0?void 0:Rn.replace(Zt,"")),vt=mn.lastChild,vt&&vt.type===3&&(vt.value=(Bo=vt.value)===null||Bo===void 0?void 0:Bo.replace(on,"")))};if(n.isValidChild(Ve.name,nt.toLowerCase())){for(;vt;){const mn=vt.next;te(Nt,vt)?(ut||(ut=new $a(nt,1),ut.attr(f.forced_root_block_attrs),Ve.insert(ut,vt)),ut.append(vt)):(Mt(ut),ut=null),vt=mn}Mt(ut)}},ze={schema:n,addAttributeFilter:L,getAttributeFilters:W,removeAttributeFilter:re,addNodeFilter:A,getNodeFilters:M,removeNodeFilter:I,parse:(Ve,nt={})=>{var Nt;const Zt=f.validate,on=(Nt=nt.context)!==null&&Nt!==void 0?Nt:f.root_name,vt=C(Ve,on,nt.format);_0(n,vt);const ut=new $a(on,11);Zb(ut,vt,n.getSpecialElements(),y.sanitizeNamespaceElement),vt.innerHTML="";const[Mt,mn]=xz(ut,n,f,nt),Rn=[],Bo=Zt?Nr=>de(Nr,Rn):ge,Mo={nodes:{},attributes:{}},Ps=Nr=>vE(M(),W(),Nr,Mo);if(Va(ut,[Mt,Ps],[mn,Bo]),Rn.reverse(),Zt&&Rn.length>0)if(nt.context){const{pass:Nr,fail:ea}=Ne(Rn,_s=>_s.parent===ut);Ex(ea,n,ut,Ps),nt.invalid=Nr.length>0}else Ex(Rn,n,ut,Ps);const Vs=Kx(f,nt);return Vs&&(ut.name==="body"||nt.isRootContent)&&fe(ut,Vs),nt.invalid||yE(Mo,nt),ut}};return ZP(ze,f),JE(ze,f,n),ze},gN=e=>Mx(e)?Vh({validate:!1}).serialize(e):e,pl=(e,n,s)=>{const a=gN(e),f=n(a);if(f.isDefaultPrevented())return f;if(Mx(e))if(f.content!==a){const g=bu(ie({validate:!1,forced_root_block:!1},s)).parse(f.content,{context:e.name});return Ot(ie({},f),{content:g})}else return Ot(ie({},f),{content:e});else return f},Zh=(e,n)=>{if(n.no_events)return ml.value(n);{const s=bH(e,n);return s.isDefaultPrevented()?ml.error(Zo(e,ie({content:""},s)).content):ml.value(s)}},hT=(e,n,s)=>s.no_events?n:pl(n,f=>Zo(e,Ot(ie({},s),{content:f})),{sanitize:Tp(e),sandbox_iframes:_w(e)}).content,mT=(e,n)=>{if(n.no_events)return ml.value(n);{const s=pl(n.content,a=>QQ(e,Ot(ie({},n),{content:a})),{sanitize:Tp(e),sandbox_iframes:_w(e)});return s.isDefaultPrevented()?(g4(e,s),ml.error(void 0)):ml.value(s)}},Yx=(e,n,s)=>{s.no_events||g4(e,Ot(ie({},s),{content:n}))},gT=(e,n,s)=>({element:e,width:n,rows:s}),pT=(e,n)=>({element:e,cells:n}),qb=(e,n)=>({x:e,y:n}),Xx=(e,n)=>_a(e,n).bind(ji).getOr(1),Sz=(e,n,s,a,f)=>{const g=Xx(f,"rowspan"),y=Xx(f,"colspan"),C=e.rows;for(let A=s;A<s+g;A++){C[A]||(C[A]=pT(dw(a),[]));for(let M=n;M<n+y;M++){const I=C[A].cells;I[M]=A===s&&M===n?f:cc(f)}}},pN=(e,n,s)=>{const a=e.rows;return!!(a[s]?a[s].cells:[])[n]},Cz=(e,n,s)=>{for(;pN(e,n,s);)n++;return n},Jx=e=>ve(e,(n,s)=>s.cells.length>n?s.cells.length:n,0),Qx=(e,n)=>{const s=e.rows;for(let a=0;a<s.length;a++){const f=s[a].cells;for(let g=0;g<f.length;g++)if(ys(f[g],n))return V.some(qb(g,a))}return V.none()},bN=(e,n,s,a,f)=>{const g=[],y=e.rows;for(let C=s;C<=f;C++){const A=y[C].cells,M=n<a?A.slice(n,a+1):A.slice(a,n+1);g.push(pT(y[C].element,M))}return g},kz=(e,n,s)=>{const a=n.x,f=n.y,g=s.x,y=s.y,C=f<y?bN(e,a,f,g,y):bN(e,a,y,g,f);return gT(e.element,Jx(C),C)},ef=(e,n)=>{const s=cc(e.element),a=ye.fromTag("tbody");return Ls(a,n),Jr(s,a),s},bT=e=>tt(e.rows,n=>{const s=tt(n.cells,f=>{const g=dw(f);return Ir(g,"colspan"),Ir(g,"rowspan"),g}),a=cc(n.element);return Ls(a,s),a}),Az=e=>{const n=gT(cc(e),0,[]);return ue(ya(e,"tr"),(s,a)=>{ue(ya(s,"td,th"),(f,g)=>{Sz(n,Cz(n,g,a),a,s,f)})}),gT(n.element,Jx(n.rows),n.rows)},eS=e=>ef(e,bT(e)),vT=(e,n,s)=>Qx(e,n).bind(a=>Qx(e,s).map(f=>kz(e,a,f))),vN=e=>ot(e,n=>ts(n)==="ul"||ts(n)==="ol"),yN=(e,n)=>ot(e,s=>ts(s)==="li"&&aA(s,n)).fold(he([]),s=>vN(e).map(a=>{const f=ye.fromTag(ts(a)),g=di(p0(a),(y,C)=>Vn(C,"list-style"));return kh(f,g),[ye.fromTag("li"),f]}).getOr([])),wN=(e,n)=>{const s=ve(n,(a,f)=>(Jr(f,a),f),e);return n.length>0?EA([s]):s},Ez=e=>Lm(e)?ra(e).filter(_l).fold(he([]),n=>[e,n]):_l(e)?[e]:[],Tz=(e,n,s)=>{const a=ye.fromDom(n.commonAncestorContainer),f=Zd(a,e),g=Me(f,A=>s.isWrapper(ts(A))),y=yN(f,n),C=g.concat(y.length?y:Ez(a));return tt(C,cc)},xN=()=>EA([]),Oz=(e,n,s)=>wN(ye.fromDom(n.cloneContents()),Tz(e,n,s)),Dz=(e,n)=>Of(n,"table",Pe(ys,e)),SN=(e,n)=>Dz(e,n[0]).bind(s=>{const a=n[0],f=n[n.length-1],g=Az(s);return vT(g,a,f).map(y=>EA([eS(y)]))}).getOrThunk(xN),_z=(e,n,s)=>n.length>0&&n[0].collapsed?xN():Oz(e,n[0],s),Mz=(e,n,s)=>{const a=sH(n,e);return a.length>0?SN(e,a):_z(e,n,s)},tS=(e,n)=>n>=0&&n<e.length&&sb(e.charAt(n)),yT=e=>rc(e.innerText),wT=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),xT=e=>V.from(e.selection.getRng()).map(n=>{var s;const a=V.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),f=e.getBody(),g=wT(a),y=ye.fromDom(n.cloneContents());So(y),jA(y);const C=e.dom.add(f,g,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},y.dom),A=yT(C),M=rc((s=C.textContent)!==null&&s!==void 0?s:"");if(e.dom.remove(C),tS(M,0)||tS(M,M.length-1)){const I=a.getOr(f),L=yT(I),W=L.indexOf(A);if(W===-1)return A;{const re=tS(L,W-1),de=tS(L,W+A.length);return(re?" ":"")+A+(de?" ":"")}}else return A}).getOr(""),CN=(e,n)=>{const s=e.selection.getRng(),a=e.dom.create("body"),f=e.selection.getSel(),g=WA(e,q3(f)),y=n.contextual?Mz(ye.fromDom(e.getBody()),g,e.schema).dom:s.cloneContents();return y&&a.appendChild(y),e.selection.serializer.serialize(a,n)},ST=(e,n)=>{if(n.format==="text")return xT(e);{const s=CN(e,n);return n.format==="tree"?s:e.selection.isCollapsed()?"":s}},kN=(e,n)=>Ot(ie({},e),{format:n,get:!0,selection:!0,getInner:!0}),AN=(e,n,s={})=>{const a=kN(s,n);return Zh(e,a).fold(at,f=>{const g=ST(e,f);return hT(e,g,f)})},Gb=0,CT=1,kT=2,EN=(e,n)=>{const s=e.length+n.length+2,a=new Array(s),f=new Array(s),g=(I,L,W)=>({start:I,end:L,diag:W}),y=(I,L,W,re,de)=>{const te=A(I,L,W,re);if(te===null||te.start===L&&te.diag===L-re||te.end===I&&te.diag===I-W){let fe=I,Fe=W;for(;fe<L||Fe<re;)fe<L&&Fe<re&&e[fe]===n[Fe]?(de.push([Gb,e[fe]]),++fe,++Fe):L-I>re-W?(de.push([kT,e[fe]]),++fe):(de.push([CT,n[Fe]]),++Fe)}else{y(I,te.start,W,te.start-te.diag,de);for(let fe=te.start;fe<te.end;++fe)de.push([Gb,e[fe]]);y(te.end,L,te.end-te.diag,re,de)}},C=(I,L,W,re)=>{let de=I;for(;de-L<re&&de<W&&e[de]===n[de-L];)++de;return g(I,de,L)},A=(I,L,W,re)=>{const de=L-I,te=re-W;if(de===0||te===0)return null;const fe=de-te,Fe=te+de,ze=(Fe%2===0?Fe:Fe+1)/2;a[1+ze]=I,f[1+ze]=L+1;let Ve,nt,Nt,Zt,on;for(Ve=0;Ve<=ze;++Ve){for(nt=-Ve;nt<=Ve;nt+=2){for(Nt=nt+ze,nt===-Ve||nt!==Ve&&a[Nt-1]<a[Nt+1]?a[Nt]=a[Nt+1]:a[Nt]=a[Nt-1]+1,Zt=a[Nt],on=Zt-I+W-nt;Zt<L&&on<re&&e[Zt]===n[on];)a[Nt]=++Zt,++on;if(fe%2!==0&&fe-Ve<=nt&&nt<=fe+Ve&&f[Nt-fe]<=a[Nt])return C(f[Nt-fe],nt+I-W,L,re)}for(nt=fe-Ve;nt<=fe+Ve;nt+=2){for(Nt=nt+ze-fe,nt===fe-Ve||nt!==fe+Ve&&f[Nt+1]<=f[Nt-1]?f[Nt]=f[Nt+1]-1:f[Nt]=f[Nt-1],Zt=f[Nt]-1,on=Zt-I+W-nt;Zt>=I&&on>=W&&e[Zt]===n[on];)f[Nt]=Zt--,on--;if(fe%2===0&&-Ve<=nt&&nt<=Ve&&f[Nt]<=a[Nt+fe])return C(f[Nt],nt+I-W,L,re)}}return null},M=[];return y(0,e.length,0,n.length,M),M},TN=e=>wn(e)?e.outerHTML:Vt(e)?Dh.encodeRaw(e.data,!1):Mf(e)?"<!--"+e.data+"-->":"",AT=e=>{let n;const s=document.createElement("div"),a=document.createDocumentFragment();for(e&&(s.innerHTML=e);n=s.firstChild;)a.appendChild(n);return a},Rz=(e,n,s)=>{const a=AT(n);if(e.hasChildNodes()&&s<e.childNodes.length){const f=e.childNodes[s];e.insertBefore(a,f)}else e.appendChild(a)},nS=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const s=e.childNodes[n];e.removeChild(s)}},Pz=(e,n)=>{let s=0;ue(e,a=>{a[0]===Gb?s++:a[0]===CT?(Rz(n,a[1],s),s++):a[0]===kT&&nS(n,s)})},Nz=(e,n)=>Me(tt(oo(e.childNodes),O(rc,TN)),s=>s.length>0),Bz=(e,n)=>{const s=tt(oo(n.childNodes),TN);return Pz(EN(s,e),n),n},ON=xt(()=>document.implementation.createHTMLDocument("undo")),DN=e=>e.querySelector("iframe")!==null,Fz=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),Iz=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),oS=e=>{const n=e.serializer.getTempAttrs(),s=aR(e.getBody(),n);return DN(s)?Fz(Nz(s)):Iz(rc(s.innerHTML))},ET=(e,n,s)=>{const a=s?n.beforeBookmark:n.bookmark;n.type==="fragmented"?Bz(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:ae(a)&&W3(a)?!a.isFakeCaret:!0}),a&&(e.selection.moveToBookmark(a),e.selection.scrollIntoView())},TT=e=>e.type==="fragmented"?e.fragments.join(""):e.content,OT=e=>{const n=ye.fromTag("body",ON());return rp(n,TT(e)),ue(ya(n,"*[data-mce-bogus]"),Ql),sp(n)},mee=(e,n)=>TT(e)===TT(n),Lz=(e,n)=>OT(e)===OT(n),DT=(e,n)=>!e||!n?!1:mee(e,n)?!0:Lz(e,n),_T=e=>e.get()===0,sS=(e,n,s)=>{_T(s)&&(e.typing=n)},_N=(e,n)=>{e.typing&&(sS(e,!1,n),e.add())},$z=e=>{e.typing&&(e.typing=!1,e.add())},Hz=(e,n,s)=>{_T(n)&&s.set(Ak(e.selection))},MN=(e,n,s,a,f,g,y)=>{const C=oS(e),A=Lt.extend(g||{},C);if(!_T(a)||e.removed)return null;const M=n.data[s.get()];if(e.dispatch("BeforeAddUndo",{level:A,lastLevel:M,originalEvent:y}).isDefaultPrevented()||M&&DT(M,A))return null;n.data[s.get()]&&f.get().each(W=>{n.data[s.get()].beforeBookmark=W});const I=Aw(e);if(I&&n.data.length>I){for(let W=0;W<n.data.length-1;W++)n.data[W]=n.data[W+1];n.data.length--,s.set(n.data.length)}A.bookmark=Ak(e.selection),s.get()<n.data.length-1&&(n.data.length=s.get()+1),n.data.push(A),s.set(n.data.length-1);const L={level:A,lastLevel:M,originalEvent:y};return s.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",L),e.dispatch("change",L)):e.dispatch("AddUndo",L),A},Vz=(e,n,s)=>{n.data=[],s.set(0),n.typing=!1,e.dispatch("ClearUndos")},zz=(e,n,s,a,f)=>{if(n.transact(a)){const g=n.data[s.get()].bookmark,y=n.data[s.get()-1];ET(e,y,!0),n.transact(f)&&(n.data[s.get()-1].beforeBookmark=g)}},Uz=(e,n,s)=>{let a;return n.get()<s.length-1&&(n.set(n.get()+1),a=s[n.get()],ET(e,a,!1),e.setDirty(!0),e.dispatch("Redo",{level:a})),a},Wz=(e,n,s,a)=>{let f;return n.typing&&(n.add(),n.typing=!1,sS(n,!1,s)),a.get()>0&&(a.set(a.get()-1),f=n.data[a.get()],ET(e,f,!0),e.setDirty(!0),e.dispatch("Undo",{level:f})),f},jz=e=>{e.clear(),e.add()},gee=(e,n,s)=>s.get()>0||n.typing&&n.data[0]&&!DT(oS(e),n.data[0]),pee=(e,n)=>n.get()<e.data.length-1&&!e.typing,Zz=(e,n,s)=>(_N(e,n),e.beforeChange(),e.ignore(s),e.add()),qz=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},bee=(e,n)=>{const s=e.dom,a=ae(n)?n:e.getBody();ue(s.select("table,a",a),f=>{switch(f.nodeName){case"TABLE":const g=d7(e),y=s.getAttrib(f,"border");(!y||y==="0")&&e.hasVisual?s.addClass(f,g):s.removeClass(f,g);break;case"A":if(!s.getAttrib(f,"href")){const C=s.getAttrib(f,"name")||f.id,A=w3(e);C&&e.hasVisual?s.addClass(f,A):s.removeClass(f,A)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},RN=e=>({init:{bindEvents:ge},undoManager:{beforeChange:(n,s)=>Hz(e,n,s),add:(n,s,a,f,g,y)=>MN(e,n,s,a,f,g,y),undo:(n,s,a)=>Wz(e,n,s,a),redo:(n,s)=>Uz(e,n,s),clear:(n,s)=>Vz(e,n,s),reset:n=>jz(n),hasUndo:(n,s)=>gee(e,n,s),hasRedo:(n,s)=>pee(n,s),transact:(n,s,a)=>Zz(n,s,a),ignore:(n,s)=>qz(n,s),extra:(n,s,a,f)=>zz(e,n,s,a,f)},formatter:{match:(n,s,a,f)=>Rx(e,n,s,a,f),matchAll:(n,s)=>PV(e,n,s),matchNode:(n,s,a,f)=>Gd(e,n,s,a,f),canApply:n=>fP(e,n),closest:n=>gg(e,n),apply:(n,s,a)=>BP(e,n,s,a),remove:(n,s,a,f)=>MP(e,n,s,a,f),toggle:(n,s,a)=>JV(e,n,s,a),formatChanged:(n,s,a,f,g)=>XV(e,n,s,a,f,g)},editor:{getContent:n=>iee(e,n),setContent:(n,s)=>cP(e,n,s),insertContent:(n,s)=>lP(e,n,s),addVisual:n=>bee(e,n)},selection:{getContent:(n,s)=>AN(e,n,s)},autocompleter:{addDecoration:n=>x9(e,n),removeDecoration:()=>C9(e,ye.fromDom(e.getBody()))},raw:{getModel:()=>V.none()}}),Pr=e=>{const n=M=>be(M)?M:{},{init:s,undoManager:a,formatter:f,editor:g,selection:y,autocompleter:C,raw:A}=e;return{init:{bindEvents:s.bindEvents},undoManager:{beforeChange:a.beforeChange,add:a.add,undo:a.undo,redo:a.redo,clear:a.clear,reset:a.reset,hasUndo:a.hasUndo,hasRedo:a.hasRedo,transact:(M,I,L)=>a.transact(L),ignore:(M,I)=>a.ignore(I),extra:(M,I,L,W)=>a.extra(L,W)},formatter:{match:(M,I,L,W)=>f.match(M,n(I),W),matchAll:f.matchAll,matchNode:f.matchNode,canApply:M=>f.canApply(M),closest:M=>f.closest(M),apply:(M,I,L)=>f.apply(M,n(I)),remove:(M,I,L,W)=>f.remove(M,n(I)),toggle:(M,I,L)=>f.toggle(M,n(I)),formatChanged:(M,I,L,W,re)=>f.formatChanged(I,L,W,re)},editor:{getContent:M=>g.getContent(M),setContent:(M,I)=>({content:g.setContent(M,I),html:""}),insertContent:(M,I)=>(g.insertContent(M),""),addVisual:g.addVisual},selection:{getContent:(M,I)=>y.getContent(I)},autocompleter:{addDecoration:C.addDecoration,removeDecoration:C.removeDecoration},raw:{getModel:()=>V.some(A.getRawModel())}}},MT=()=>{const e=he(null),n=he("");return{init:{bindEvents:ge},undoManager:{beforeChange:ge,add:e,undo:e,redo:e,clear:ge,reset:ge,hasUndo:ce,hasRedo:ce,transact:e,ignore:ge,extra:ge},formatter:{match:ce,matchAll:he([]),matchNode:he(void 0),canApply:ce,closest:n,apply:ge,remove:ge,toggle:ge,formatChanged:he({unbind:ge})},editor:{getContent:n,setContent:he({content:"",html:""}),insertContent:he(""),addVisual:ge},selection:{getContent:n},autocompleter:{addDecoration:ge,removeDecoration:ge},raw:{getModel:he(V.none())}}},ah=e=>Bn(e.plugins,"rtc"),Gz=e=>us(e.plugins,"rtc").bind(n=>V.from(n.setup)),Kz=e=>{const n=e;return Gz(e).fold(()=>(n.rtcInstance=RN(e),V.none()),s=>(n.rtcInstance=MT(),V.some(()=>s().then(a=>(n.rtcInstance=Pr(a),a.rtc.isRemote)))))},qh=e=>e.rtcInstance?e.rtcInstance:RN(e),wi=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},vee=(e,n,s)=>{wi(e).undoManager.beforeChange(n,s)},da=(e,n,s,a,f,g,y)=>wi(e).undoManager.add(n,s,a,f,g,y),PN=(e,n,s,a)=>wi(e).undoManager.undo(n,s,a),NN=(e,n,s)=>wi(e).undoManager.redo(n,s),BN=(e,n,s)=>{wi(e).undoManager.clear(n,s)},Yz=(e,n)=>{wi(e).undoManager.reset(n)},Xz=(e,n,s)=>wi(e).undoManager.hasUndo(n,s),rS=(e,n,s)=>wi(e).undoManager.hasRedo(n,s),Jz=(e,n,s,a)=>wi(e).undoManager.transact(n,s,a),RT=(e,n,s)=>{wi(e).undoManager.ignore(n,s)},Qz=(e,n,s,a,f)=>{wi(e).undoManager.extra(n,s,a,f)},FN=(e,n,s,a,f)=>wi(e).formatter.match(n,s,a,f),IN=(e,n,s)=>wi(e).formatter.matchAll(n,s),PT=(e,n,s,a,f)=>wi(e).formatter.matchNode(n,s,a,f),LN=(e,n)=>wi(e).formatter.canApply(n),NT=(e,n)=>wi(e).formatter.closest(n),eU=(e,n,s,a)=>{wi(e).formatter.apply(n,s,a)},tU=(e,n,s,a,f)=>{wi(e).formatter.remove(n,s,a,f)},nU=(e,n,s,a)=>{wi(e).formatter.toggle(n,s,a)},Ic=(e,n,s,a,f,g)=>wi(e).formatter.formatChanged(n,s,a,f,g),oU=(e,n)=>qh(e).editor.getContent(n),sU=(e,n,s)=>qh(e).editor.setContent(n,s),rU=(e,n,s)=>qh(e).editor.insertContent(n,s),iU=(e,n,s)=>wi(e).selection.getContent(n,s),aU=(e,n)=>wi(e).editor.addVisual(n),BT=e=>wi(e).init.bindEvents(),lU=(e,n)=>wi(e).autocompleter.addDecoration(n),cU=e=>wi(e).autocompleter.removeDecoration(),uU=(e,n={})=>{const s=n.format?n.format:"html";return iU(e,s,n)},Kb=e=>e.dom.length===0?(ks(e),V.none()):V.some(e),dU=(e,n)=>e.filter(s=>ng.isBookmarkNode(s.dom)).bind(n?nu:Dc),fU=(e,n,s,a,f)=>{const g=e.dom,y=n.dom,C=a?g.length:y.length;a?(Ri(g,y,f,!1,!a),s.setStart(y,C)):(Ri(y,g,f,!1,!a),s.setEnd(y,C))},$N=(e,n,s)=>{ra(e).each(a=>{const f=e.dom;n&&Zp(a,bt(f,0),s)?ug(f,0,s):!n&&qp(a,bt(f,f.length),s)&&_R(f,f.length,s)})},iS=(e,n,s,a,f)=>{e.bind(g=>((a?_R:ug)(g.dom,a?g.dom.length:0,f),n.filter(Ao).map(C=>fU(g,C,s,a,f)))).orThunk(()=>dU(n,a).or(n).filter(Ao).map(y=>$N(y,a,f)))},hU=(e,n,s)=>{const a=V.from(n.firstChild).map(ye.fromDom),f=V.from(n.lastChild).map(ye.fromDom);e.deleteContents(),e.insertNode(n);const g=a.bind(Dc).filter(Ao).bind(Kb),y=f.bind(nu).filter(Ao).bind(Kb);iS(g,a,e,!0,s),iS(y,f,e,!1,s),e.collapse(!1)},mU=(e,n)=>Ot(ie({format:"html"},e),{set:!0,selection:!0,content:n}),yee=(e,n)=>{if(n.format!=="raw"){const s=e.selection.getRng(),a=e.dom.getParent(s.commonAncestorContainer,e.dom.isBlock),f=a?{context:a.nodeName.toLowerCase()}:{},g=e.parser.parse(n.content,ie(ie({forced_root_block:!1},f),n));return Vh({validate:!1},e.schema).serialize(g)}else return n.content},gU=(e,n,s={})=>{const a=mU(s,n);mT(e,a).each(f=>{const g=yee(e,f),y=e.selection.getRng();hU(y,y.createContextualFragment(g),e.schema),e.selection.setRng(y),pb(e,y),Yx(e,g,f)})},HN=(e,n,s)=>{if(Bn(e,n)){const a=Me(e[n],f=>f!==s);a.length===0?delete e[n]:e[n]=a}};var VN=(e,n)=>{let s,a;const f=(C,A)=>ot(A,M=>e.is(M,C)),g=C=>e.getParents(C,void 0,e.getRoot()),y=()=>{s={},a={},n.on("NodeChange",C=>{const A=C.element,M=g(A),I={};$t(s,(L,W)=>{f(W,M).each(re=>{a[W]||(ue(L,de=>{de(!0,{node:re,selector:W,parents:M})}),a[W]=L),I[W]=L})}),$t(a,(L,W)=>{I[W]||(delete a[W],ue(L,re=>{re(!1,{node:A,selector:W,parents:M})}))})})};return{selectorChangedWithUnbind:(C,A)=>(s||y(),s[C]||(s[C]=[]),s[C].push(A),f(C,g(n.selection.getStart())).each(()=>{a[C]=s[C]}),{unbind:()=>{HN(s,C,A),HN(a,C,A)}})}};const FT=e=>!!(e&&e.ownerDocument)&&Iu(ye.fromDom(e.ownerDocument),ye.fromDom(e)),pU=e=>e?FT(e.startContainer)&&FT(e.endContainer):!1,Gh=(e,n,s,a)=>{let f,g;const{selectorChangedWithUnbind:y}=VN(e,a),C=(Xt,Cn)=>{const Ro=e.createRng();ae(Xt)&&ae(Cn)?(Ro.setStart(Xt,Cn),Ro.setEnd(Xt,Cn),nt(Ro),Fe(!1)):(lA(e,Ro,a.getBody(),!0),nt(Ro))},A=Xt=>uU(a,Xt),M=(Xt,Cn)=>gU(a,Xt,Cn),I=Xt=>zA(a.getBody(),Ve(),Xt),L=Xt=>X4(a.getBody(),Ve(),Xt),W=(Xt,Cn)=>ea.getBookmark(Xt,Cn),re=Xt=>ea.moveToBookmark(Xt),de=(Xt,Cn)=>(h9(e,Xt,Cn).each(nt),Xt),te=()=>{const Xt=Ve(),Cn=ze();return!Xt||Xt.item?!1:Xt.compareEndPoints?Xt.compareEndPoints("StartToEnd",Xt)===0:!Cn||Xt.collapsed},fe=()=>{const Xt=Ve(),Cn=a.getBody().querySelectorAll('[data-mce-selected="1"]');return Cn.length>0?ho(Cn,Ro=>e.isEditable(Ro.parentElement)):K4(e,Xt)},Fe=Xt=>{const Cn=Ve();Cn.collapse(!!Xt),nt(Cn)},ze=()=>n.getSelection?n.getSelection():n.document.selection,Ve=()=>{let Xt;const Cn=(Vo,vn,lo)=>{try{return vn.compareBoundaryPoints(Vo,lo)}catch(Gt){return-1}},Ro=n.document;if(ae(a.bookmark)&&!Hh(a)){const Vo=LA(a);if(Vo.isSome())return Vo.map(vn=>WA(a,[vn])[0]).getOr(Ro.createRange())}try{const Vo=ze();Vo&&!zu(Vo.anchorNode)&&(Vo.rangeCount>0?Xt=Vo.getRangeAt(0):Xt=Ro.createRange(),Xt=WA(a,[Xt])[0])}catch(Vo){}if(Xt||(Xt=Ro.createRange()),x0(Xt.startContainer)&&Xt.collapsed){const Vo=e.getRoot();Xt.setStart(Vo,0),Xt.setEnd(Vo,0)}return f&&g&&(Cn(Xt.START_TO_START,Xt,f)===0&&Cn(Xt.END_TO_END,Xt,f)===0?Xt=g:(f=null,g=null)),Xt},nt=(Xt,Cn)=>{if(!pU(Xt))return;const Ro=ze();if(Xt=a.dispatch("SetSelectionRange",{range:Xt,forward:Cn}).range,Ro){g=Xt;try{Ro.removeAllRanges(),Ro.addRange(Xt)}catch(vn){}Cn===!1&&Ro.extend&&(Ro.collapse(Xt.endContainer,Xt.endOffset),Ro.extend(Xt.startContainer,Xt.startOffset)),f=Ro.rangeCount>0?Ro.getRangeAt(0):null}if(!Xt.collapsed&&Xt.startContainer===Xt.endContainer&&(Ro!=null&&Ro.setBaseAndExtent)&&Xt.endOffset-Xt.startOffset<2&&Xt.startContainer.hasChildNodes()){const vn=Xt.startContainer.childNodes[Xt.startOffset];vn&&vn.nodeName==="IMG"&&(Ro.setBaseAndExtent(Xt.startContainer,Xt.startOffset,Xt.endContainer,Xt.endOffset),(Ro.anchorNode!==Xt.startContainer||Ro.focusNode!==Xt.endContainer)&&Ro.setBaseAndExtent(vn,0,vn,1))}a.dispatch("AfterSetSelectionRange",{range:Xt,forward:Cn})},Nt=Xt=>(M(e.getOuterHTML(Xt)),Xt),Zt=()=>J4(a.getBody(),Ve()),on=(Xt,Cn)=>f9(e,Ve(),Xt,Cn),vt=()=>{const Xt=ze(),Cn=Xt==null?void 0:Xt.anchorNode,Ro=Xt==null?void 0:Xt.focusNode;if(!Xt||!Cn||!Ro||zu(Cn)||zu(Ro))return!0;const Vo=e.createRng(),vn=e.createRng();try{Vo.setStart(Cn,Xt.anchorOffset),Vo.collapse(!0),vn.setStart(Ro,Xt.focusOffset),vn.collapse(!0)}catch(lo){return!0}return Vo.compareBoundaryPoints(Vo.START_TO_START,vn)<=0},Nr={dom:e,win:n,serializer:s,editor:a,expand:(Xt={type:"word"})=>nt(ig(e).expand(Ve(),Xt)),collapse:Fe,setCursorLocation:C,getContent:A,setContent:M,getBookmark:W,moveToBookmark:re,select:de,isCollapsed:te,isEditable:fe,isForward:vt,setNode:Nt,getNode:Zt,getSel:ze,setRng:nt,getRng:Ve,getStart:I,getEnd:L,getSelectedBlocks:on,normalize:()=>{const Xt=Ve(),Cn=ze();if(!G3(Cn)&&$w(a)){const Ro=mb(e,Xt);return Ro.each(Vo=>{nt(Vo,vt())}),Ro.getOr(Xt)}return Xt},selectorChanged:(Xt,Cn)=>(y(Xt,Cn),Nr),selectorChangedWithUnbind:y,getScrollContainer:()=>{let Xt,Cn=e.getRoot();for(;Cn&&Cn.nodeName!=="BODY";){if(Cn.scrollHeight>Cn.clientHeight){Xt=Cn;break}Cn=Cn.parentNode}return Xt},scrollIntoView:(Xt,Cn)=>{ae(Xt)?ZH(a,Xt,Cn):pb(a,Ve(),Cn)},placeCaretAt:(Xt,Cn)=>nt(du(Xt,Cn,a.getDoc())),getBoundingClientRect:()=>{const Xt=Ve();return Xt.collapsed?bt.fromRangeStart(Xt).getClientRects()[0]:Xt.getBoundingClientRect()},destroy:()=>{n=f=g=null,_s.destroy()}},ea=ng(Nr),_s=CH(Nr,a);return Nr.bookmarkManager=ea,Nr.controlSelection=_s,Nr},f1=(e,n,s)=>{e.addAttributeFilter("data-mce-tabindex",(a,f)=>{let g=a.length;for(;g--;){const y=a[g];y.attr("tabindex",y.attr("data-mce-tabindex")),y.attr(f,null)}}),e.addAttributeFilter("src,href,style",(a,f)=>{const g="data-mce-"+f,y=n.url_converter,C=n.url_converter_scope;let A=a.length;for(;A--;){const M=a[A];let I=M.attr(g);I!==void 0?(M.attr(f,I.length>0?I:null),M.attr(g,null)):(I=M.attr(f),f==="style"?I=s.serializeStyle(s.parseStyle(I),M.name):y&&(I=y.call(C,I,f,M.name)),M.attr(f,I.length>0?I:null))}}),e.addAttributeFilter("class",a=>{let f=a.length;for(;f--;){const g=a[f];let y=g.attr("class");y&&(y=y.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),g.attr("class",y.length>0?y:null))}}),e.addAttributeFilter("data-mce-type",(a,f,g)=>{let y=a.length;for(;y--;){const C=a[y];C.attr("data-mce-type")==="bookmark"&&!g.cleanup&&(V.from(C.firstChild).exists(M=>{var I;return!Ml((I=M.value)!==null&&I!==void 0?I:"")})?C.unwrap():C.remove())}}),e.addNodeFilter("noscript",a=>{var f;let g=a.length;for(;g--;){const y=a[g].firstChild;y&&(y.value=Dh.decode((f=y.value)!==null&&f!==void 0?f:""))}}),e.addNodeFilter("script,style",(a,f)=>{var g;const y=A=>A.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let C=a.length;for(;C--;){const A=a[C],M=A.firstChild,I=(g=M==null?void 0:M.value)!==null&&g!==void 0?g:"";if(f==="script"){const L=A.attr("type");L&&A.attr("type",L==="mce-no/type"?null:L.replace(/^mce\-/,"")),n.element_format==="xhtml"&&M&&I.length>0&&(M.value=`// <![CDATA[
`+y(I)+`
// ]]>`)}else n.element_format==="xhtml"&&M&&I.length>0&&(M.value=`<!--
`+y(I)+`
-->`)}}),e.addNodeFilter("#comment",a=>{let f=a.length;for(;f--;){const g=a[f],y=g.value;n.preserve_cdata&&(y==null?void 0:y.indexOf("[CDATA["))===0?(g.name="#cdata",g.type=4,g.value=s.decode(y.replace(/^\[CDATA\[|\]\]$/g,""))):(y==null?void 0:y.indexOf("mce:protected "))===0&&(g.name="#text",g.type=3,g.raw=!0,g.value=unescape(y).substr(14))}}),e.addNodeFilter("xml:namespace,input",(a,f)=>{let g=a.length;for(;g--;){const y=a[g];y.type===7?y.remove():y.type===1&&f==="input"&&!y.attr("type")&&y.attr("type","text")}}),e.addAttributeFilter("data-mce-type",a=>{ue(a,f=>{f.attr("data-mce-type")==="format-caret"&&(f.isEmpty(e.schema.getNonEmptyElements())?f.remove():f.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(a,f)=>{let g=a.length;for(;g--;)a[g].attr(f,null)}),n.remove_trailing_brs&&QE(n,e,e.schema)},Yb=e=>{const n=a=>(a==null?void 0:a.name)==="br",s=e.lastChild;if(n(s)){const a=s.prev;n(a)&&(s.remove(),a.remove())}},zN=(e,n,s)=>{let a;const f=e.dom;let g=n.cloneNode(!0);const y=document.implementation;if(y.createHTMLDocument){const C=y.createHTMLDocument("");Lt.each(g.nodeName==="BODY"?g.childNodes:[g],A=>{C.body.appendChild(C.importNode(A,!0))}),g.nodeName!=="BODY"?g=C.body.firstChild:g=C.body,a=f.doc,f.doc=C}return xA(e,Ot(ie({},s),{node:g})),a&&(f.doc=a),g},UN=(e,n)=>ae(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,bU=(e,n,s)=>UN(e,s)?zN(e,n,s):n,WN=(e,n,s)=>{Lt.inArray(n,s)===-1&&(e.addAttributeFilter(s,(a,f)=>{let g=a.length;for(;g--;)a[g].attr(f,null)}),n.push(s))},vU=(e,n,s)=>!n.no_events&&e?uH(e,Ot(ie({},n),{content:s})).content:s,yU=(e,n,s)=>{const a=rc(s.getInner?n.innerHTML:e.getOuterHTML(n));return s.selection||Hi(ye.fromDom(n))?a:Lt.trim(a)},wU=(e,n,s)=>{const a=s.selection?ie({forced_root_block:!1},s):s,f=e.parse(n,a);return Yb(f),f},xU=(e,n,s)=>Vh(e,n).serialize(s),jN=(e,n,s,a,f)=>{const g=xU(n,s,a);return vU(e,f,g)},SU=(e,n)=>{const s=["data-mce-selected"],a=ie({entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1},e),f=n&&n.dom?n.dom:or.DOM,g=n&&n.schema?n.schema:Hf(a),y=bu(a,g);f1(y,a,f);const C=(A,M={})=>{const I=ie({format:"html"},M),L=bU(n,A,I),W=yU(f,L,I),re=wU(y,W,I);return I.format==="tree"?re:jN(n,a,g,re,I)};return{schema:g,addNodeFilter:y.addNodeFilter,addAttributeFilter:y.addAttributeFilter,serialize:C,addRules:g.addValidElements,setRules:g.setValidElements,addTempAttr:Pe(WN,y,s),getTempAttrs:he(s),getNodeFilters:y.getNodeFilters,getAttributeFilters:y.getAttributeFilters,removeNodeFilter:y.removeNodeFilter,removeAttributeFilter:y.removeAttributeFilter}},ZN=(e,n)=>{const s=SU(e,n);return{schema:s.schema,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:s.serialize,addRules:s.addRules,setRules:s.setRules,addTempAttr:s.addTempAttr,getTempAttrs:s.getTempAttrs,getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter}},Xb="html",qN=(e,n)=>Ot(ie({},e),{format:n,get:!0,getInner:!0}),GN=(e,n={})=>{const s=n.format?n.format:Xb,a=qN(n,s);return Zh(e,a).fold(at,f=>{const g=oU(e,f);return hT(e,g,f)})},CU="html",kU=(e,n)=>Ot(ie({format:CU},e),{set:!0,content:n}),IT=(e,n,s={})=>{const a=kU(s,n);return mT(e,a).map(f=>{const g=sU(e,f.content,f);return Yx(e,g.html,f),g.content}).getOr(n)},KN="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),AU="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),EU="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),YN=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],XN=(e,n)=>{const s=Me(n,a=>Bn(e,a));return pt(s)},wee=e=>{const n=XN(e,KN),s=e.forced_root_block;return(s===!1||s==="")&&n.push("forced_root_block (false only)"),pt(n)},ld=e=>XN(e,AU),aS=(e,n)=>{const s=Lt.makeMap(e.plugins," "),f=Me(n,g=>Bn(s,g));return pt(f)},TU=e=>aS(e,EU),OU=e=>aS(e,YN.map(n=>n.name)),DU=(e,n)=>{const s=wee(e),a=TU(n),f=a.length>0,g=s.length>0,y=n.theme==="mobile";if(f||g||y){const C=`
- `,A=y?`

Themes:${C}mobile`:"",M=f?`

Plugins:${C}${a.join(C)}`:"",I=g?`

Options:${C}${s.join(C)}`:""}},_U=e=>ot(YN,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),Es=(e,n)=>{const s=ld(e),a=OU(n),f=a.length>0,g=s.length>0;if(f||g){const y=`
- `,C=f?`

Plugins:${y}${a.map(_U).join(y)}`:"",A=g?`

Options:${y}${s.join(y)}`:""}},xee=(e,n)=>{DU(e,n),Es(e,n)},lS=or.DOM,MU=e=>{lS.setStyle(e.id,"display",e.orgDisplay)},lr=e=>V.from(e).each(n=>n.destroy()),RU=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const s=e.selection;if(s){const a=s.dom;n.selection=s.win=s.dom=a.doc=null}},Jb=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),lS.unbind(n,"submit reset",e.formEventDelegate))},PU=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:s}=e,a=e.getBody(),f=e.getElement();a&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&ae(f==null?void 0:f.nextSibling)&&lS.remove(f.nextSibling),dH(e),e.editorManager.remove(e),!e.inline&&a&&MU(e),h4(e),lS.remove(e.getContainer()),lr(n),lr(s),e.destroy()}},NU=(e,n)=>{const{selection:s,dom:a}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),lr(s),lr(a)),Jb(e),RU(e),e.destroyed=!0}},Qb=(()=>{const e={};return{add:(f,g)=>{e[f]=g},get:f=>e[f]?e[f]:{icons:{}},has:f=>Bn(e,f)}})(),Lc=Ya.ModelManager,bl=(e,n)=>n.dom[e],h1=(e,n)=>parseInt(ou(n,e),10),Kh=Pe(bl,"clientWidth"),tf=Pe(bl,"clientHeight"),ev=Pe(h1,"margin-top"),LT=Pe(h1,"margin-left"),$T=e=>e.dom.getBoundingClientRect(),JN=(e,n,s)=>{const a=Kh(e),f=tf(e);return n>=0&&s>=0&&n<=a&&s<=f},QN=(e,n,s,a)=>{const f=$T(n),g=e?f.left+n.dom.clientLeft+LT(n):0,y=e?f.top+n.dom.clientTop+ev(n):0,C=s-g,A=a-y;return{x:C,y:A}},BU=(e,n,s)=>{const a=ye.fromDom(e.getBody()),f=e.inline?a:Ef(a),g=QN(e.inline,f,n,s);return JN(f,g.x,g.y)},FU=e=>V.from(e).map(ye.fromDom),eB=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return FU(n).map(Sh).getOr(!1)};var tB=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const HT=e=>{const n=[],s=()=>{const W=e.theme;return W&&W.getNotificationManagerImpl?W.getNotificationManagerImpl():tB()},a=()=>V.from(n[0]),f=(W,re)=>W.type===re.type&&W.text===re.text&&!W.progressBar&&!W.timeout&&!re.progressBar&&!re.timeout,g=()=>{ue(n,W=>{W.reposition()})},y=W=>{n.push(W)},C=W=>{en(n,re=>re===W).each(re=>{n.splice(re,1)})},A=(W,re=!0)=>e.removed||!eB(e)?{}:(re&&e.dispatch("BeforeOpenNotification",{notification:W}),ot(n,de=>f(s().getArgs(de),W)).getOrThunk(()=>{e.editorManager.setActive(e);const de=s().open(W,()=>{C(de),g(),G4(e)&&a().fold(()=>e.focus(),te=>P4(ye.fromDom(te.getEl())))});return y(de),g(),e.dispatch("OpenNotification",{notification:ie({},de)}),de})),M=()=>{a().each(W=>{s().close(W),C(W),g()})},I=he(n);return(W=>{W.on("SkinLoaded",()=>{const re=s7(W);re&&A({text:re,type:"warning",timeout:0},!1),g()}),W.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(g)}),W.on("remove",()=>{ue(n.slice(),re=>{s().close(re)})})})(e),{open:A,close:M,getNotifications:I}},yg=Ya.PluginManager,lh=Ya.ThemeManager;var Cee=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const nB=e=>{let n=[];const s=()=>{const te=e.theme;return te&&te.getWindowManagerImpl?te.getWindowManagerImpl():Cee()},a=(te,fe)=>(...Fe)=>fe?fe.apply(te,Fe):void 0,f=te=>{e.dispatch("OpenWindow",{dialog:te})},g=te=>{e.dispatch("CloseWindow",{dialog:te})},y=te=>{n.push(te),f(te)},C=te=>{g(te),n=Me(n,fe=>fe!==te),n.length===0&&e.focus()},A=()=>V.from(n[n.length-1]),M=te=>{e.editorManager.setActive(e),Wp(e),e.ui.show();const fe=te();return y(fe),fe},I=(te,fe)=>M(()=>s().open(te,fe,C)),L=te=>M(()=>s().openUrl(te,C)),W=(te,fe,Fe)=>{const ze=s();ze.alert(te,a(Fe||ze,fe))},re=(te,fe,Fe)=>{const ze=s();ze.confirm(te,a(Fe||ze,fe))},de=()=>{A().each(te=>{s().close(te),C(te)})};return e.on("remove",()=>{ue(n,te=>{s().close(te)})}),{open:I,openUrl:L,alert:W,confirm:re,close:de}},IU=(e,n)=>{e.notificationManager.open({type:"error",text:n})},cS=(e,n)=>{e._skinLoaded?IU(e,n):e.on("SkinLoaded",()=>{IU(e,n)})},LU=(e,n)=>{cS(e,iu.translate(["Failed to upload image: {0}",n]))},wc=(e,n,s)=>{Fl(e,n,{message:s})},uS=(e,n,s)=>s?`Failed to load ${e}: ${s} from url ${n}`:`Failed to load ${e} url: ${n}`,kee=(e,n,s)=>{wc(e,"PluginLoadError",uS("plugin",n,s))},$U=(e,n,s)=>{wc(e,"IconsLoadError",uS("icons",n,s))},tv=(e,n,s)=>{wc(e,"LanguageLoadError",uS("language",n,s))},HU=(e,n,s)=>{wc(e,"ThemeLoadError",uS("theme",n,s))},oB=(e,n,s)=>{wc(e,"ModelLoadError",uS("model",n,s))},sB=(e,n,s)=>{const a=iu.translate(["Failed to initialize plugin: {0}",n]);Fl(e,"PluginLoadError",{message:a}),nv(a,s),cS(e,a)},nv=(e,...n)=>{const s=window.console;s&&(s.error?s.error(e,...n):s.log(e,...n))},VU=e=>/^[a-z0-9\-]+$/i.test(e),VT=e=>"content/"+e+"/content.css",Yh=e=>tinymce.Resource.has(VT(e)),zU=e=>rB(e,f3(e)),UU=e=>rB(e,h3(e)),rB=(e,n)=>{const s=e.editorManager.baseURL+"/skins/content",f=`content${e.editorManager.suffix}.css`;return tt(n,g=>Yh(g)?g:VU(g)&&!e.inline?`${s}/${g}/${f}`:e.documentBaseURI.toAbsolute(g))},WU=e=>{e.contentCSS=e.contentCSS.concat(zU(e),UU(e))},jU=e=>e?oo(e.getElementsByTagName("img")):[],ZU=(e,n)=>{const s={};return{findAll:(f,g=Ze)=>{const y=Me(jU(f),A=>{const M=A.src;return A.hasAttribute("data-mce-bogus")||A.hasAttribute("data-mce-placeholder")||!M||M===sn.transparentSrc?!1:Vn(M,"blob:")?!e.isUploaded(M)&&g(A):Vn(M,"data:")?g(A):!1}),C=tt(y,A=>{const M=A.src;if(Bn(s,M))return s[M].then(I=>Z(I)?I:{image:A,blobInfo:I.blobInfo});{const I=iz(n,M).then(L=>(delete s[M],{image:A,blobInfo:L})).catch(L=>(delete s[M],L));return s[M]=I,I}});return Promise.all(C)}}},iB=()=>{let s={};const a=(W,re)=>({status:W,resultUri:re}),f=W=>W in s;return{hasBlobUri:f,getResultUri:W=>{const re=s[W];return re?re.resultUri:null},isPending:W=>f(W)?s[W].status===1:!1,isUploaded:W=>f(W)?s[W].status===2:!1,markPending:W=>{s[W]=a(1,null)},markUploaded:(W,re)=>{s[W]=a(2,re)},removeFailed:W=>{delete s[W]},destroy:()=>{s={}}}};let qU=0;const GU=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},dS=e=>e+qU+++GU(),KU=()=>{let e=[];const n=L=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[L.toLowerCase()]||"dat",s=(L,W,re,de,te)=>{if(Z(L))return a({id:L,name:de,filename:te,blob:W,base64:re});if(be(L))return a(L);throw new Error("Unknown input type")},a=L=>{if(!L.blob||!L.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const W=L.id||dS("blobid"),re=L.name||W,de=L.blob;return{id:he(W),name:he(re),filename:he(L.filename||re+"."+n(de.type)),blob:he(de),base64:he(L.base64),blobUri:he(L.blobUri||URL.createObjectURL(de)),uri:he(L.uri)}},f=L=>{y(L.id())||e.push(L)},g=L=>ot(e,L).getOrUndefined(),y=L=>g(W=>W.id()===L);return{create:s,add:f,get:y,getByUri:L=>g(W=>W.blobUri()===L),getByData:(L,W)=>g(re=>re.base64()===L&&re.blob().type===W),findFirst:g,removeByUri:L=>{e=Me(e,W=>W.blobUri()===L?(URL.revokeObjectURL(W.blobUri()),!1):!0)},destroy:()=>{ue(e,L=>{URL.revokeObjectURL(L.blobUri())}),e=[]}}},YU=(e,n)=>{const s={},a=(te,fe)=>te?te.replace(/\/$/,"")+"/"+fe.replace(/^\//,""):fe,f=(te,fe)=>new Promise((Fe,ze)=>{const Ve=new XMLHttpRequest;Ve.open("POST",n.url),Ve.withCredentials=n.credentials,Ve.upload.onprogress=Nt=>{fe(Nt.loaded/Nt.total*100)},Ve.onerror=()=>{ze("Image upload failed due to a XHR Transport error. Code: "+Ve.status)},Ve.onload=()=>{if(Ve.status<200||Ve.status>=300){ze("HTTP Error: "+Ve.status);return}const Nt=JSON.parse(Ve.responseText);if(!Nt||!Z(Nt.location)){ze("Invalid JSON: "+Ve.responseText);return}Fe(a(n.basePath,Nt.location))};const nt=new FormData;nt.append("file",te.blob(),te.filename()),Ve.send(nt)}),g=Oe(n.handler)?n.handler:f,y=()=>new Promise(te=>{te([])}),C=(te,fe)=>({url:fe,blobInfo:te,status:!0}),A=(te,fe)=>({url:"",blobInfo:te,status:!1,error:fe}),M=(te,fe)=>{Lt.each(s[te],Fe=>{Fe(fe)}),delete s[te]},I=(te,fe,Fe)=>(e.markPending(te.blobUri()),new Promise(ze=>{let Ve,nt;try{const Nt=()=>{Ve&&(Ve.close(),nt=ge)},Zt=vt=>{Nt(),e.markUploaded(te.blobUri(),vt),M(te.blobUri(),C(te,vt)),ze(C(te,vt))},on=vt=>{Nt(),e.removeFailed(te.blobUri()),M(te.blobUri(),A(te,vt)),ze(A(te,vt))};nt=vt=>{vt<0||vt>100||V.from(Ve).orThunk(()=>V.from(Fe).map(Be)).each(ut=>{Ve=ut,ut.progressBar.value(vt)})},fe(te,nt).then(Zt,vt=>{on(Z(vt)?{message:vt}:vt)})}catch(Nt){ze(A(te,Nt))}})),L=te=>te===f,W=te=>{const fe=te.blobUri();return new Promise(Fe=>{s[fe]=s[fe]||[],s[fe].push(Fe)})},re=(te,fe)=>(te=Lt.grep(te,Fe=>!e.isUploaded(Fe.blobUri())),Promise.all(Lt.map(te,Fe=>e.isPending(Fe.blobUri())?W(Fe):I(Fe,g,fe))));return{upload:(te,fe)=>!n.url&&L(g)?y():re(te,fe)}},XU=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),m1=(e,n)=>YU(n,{url:X8(e),basePath:J8(e),credentials:Pk(e),handler:Q8(e)}),JU=e=>{const n=iB(),s=m1(e,n);return{upload:(a,f=!0)=>s.upload(a,f?XU(e):void 0)}},zT=(e,n)=>e.dom.isEmpty(n.dom)&&ae(e.schema.getTextBlockElements()[ts(n)]),QU=e=>n=>{zT(e,n)&&Jr(n,ye.fromHtml('<br data-mce-bogus="1" />'))},eW=e=>{const n=KU();let s,a;const f=iB(),g=[],y=Ve=>nt=>e.selection?Ve(nt):[],C=Ve=>Ve+(Ve.indexOf("?")===-1?"?":"&")+new Date().getTime(),A=(Ve,nt,Nt)=>{let Zt=0;do Zt=Ve.indexOf(nt,Zt),Zt!==-1&&(Ve=Ve.substring(0,Zt)+Nt+Ve.substr(Zt+nt.length),Zt+=Nt.length-nt.length+1);while(Zt!==-1);return Ve},M=(Ve,nt,Nt)=>{const Zt=`src="${Nt}"${Nt===sn.transparentSrc?' data-mce-placeholder="1"':""}`;return Ve=A(Ve,`src="${nt}"`,Zt),Ve=A(Ve,'data-mce-src="'+nt+'"','data-mce-src="'+Nt+'"'),Ve},I=(Ve,nt)=>{ue(e.undoManager.data,Nt=>{Nt.type==="fragmented"?Nt.fragments=tt(Nt.fragments,Zt=>M(Zt,Ve,nt)):Nt.content=M(Nt.content,Ve,nt)})},L=(Ve,nt)=>{const Nt=e.convertURL(nt,"src");I(Ve.src,nt),Ur(ye.fromDom(Ve),{src:G0(e)?C(nt):nt,"data-mce-src":Nt})},W=()=>(s||(s=m1(e,f)),fe().then(y(Ve=>{const nt=tt(Ve,Nt=>Nt.blobInfo);return s.upload(nt,XU(e)).then(y(Nt=>{const Zt=[];let on=!1;const vt=tt(Nt,(ut,Mt)=>{const{blobInfo:mn,image:Rn}=Ve[Mt];let Bo=!1;return ut.status&&K8(e)?(ut.url&&!$n(Rn.src,ut.url)&&(on=!0),n.removeByUri(Rn.src),ah(e)||L(Rn,ut.url)):ut.error&&(ut.error.remove&&(I(Rn.src,sn.transparentSrc),Zt.push(Rn),Bo=!0),LU(e,ut.error.message)),{element:Rn,status:ut.status,uploadUri:ut.url,blobInfo:mn,removed:Bo}});return Zt.length>0&&!ah(e)?e.undoManager.transact(()=>{ue(Ah(Zt),ut=>{const Mt=ra(ut);ks(ut),Mt.each(QU(e)),n.removeByUri(ut.dom.src)})}):on&&e.undoManager.dispatchChange(),vt}))}))),re=()=>c3(e)?W():Promise.resolve([]),de=Ve=>ho(g,nt=>nt(Ve)),te=Ve=>{g.push(Ve)},fe=()=>(a||(a=ZU(f,n)),a.findAll(e.getBody(),de).then(y(Ve=>{const nt=Me(Ve,Nt=>Z(Nt)?(cS(e,Nt),!1):Nt.uriType!=="blob");return ah(e)||ue(nt,Nt=>{I(Nt.image.src,Nt.blobInfo.blobUri()),Nt.image.src=Nt.blobInfo.blobUri(),Nt.image.removeAttribute("data-mce-src")}),nt}))),Fe=()=>{n.destroy(),f.destroy(),a=s=null},ze=Ve=>Ve.replace(/src="(blob:[^"]+)"/g,(nt,Nt)=>{const Zt=f.getResultUri(Nt);if(Zt)return'src="'+Zt+'"';let on=n.getByUri(Nt);return on||(on=ve(e.editorManager.get(),(vt,ut)=>vt||ut.editorUpload&&ut.editorUpload.blobCache.getByUri(Nt),void 0)),on?'src="data:'+on.blob().type+";base64,"+on.base64()+'"':nt});return e.on("SetContent",()=>{c3(e)?re():fe()}),e.on("RawSaveContent",Ve=>{Ve.content=ze(Ve.content)}),e.on("GetContent",Ve=>{Ve.source_view||Ve.format==="raw"||Ve.format==="tree"||(Ve.content=ze(Ve.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Ve=>{ue(Ve,nt=>{const Nt=nt.attr("src");if(!Nt||n.getByUri(Nt))return;const Zt=f.getResultUri(Nt);Zt&&nt.attr("src",Zt)})})}),{blobCache:n,addFilter:te,uploadImages:W,uploadImagesAuto:re,scanForImages:fe,destroy:Fe}},tW=e=>{const n=e.dom,s=e.schema.type,a={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:f=>{n.setStyle(f,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:f=>{n.setStyle(f,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const f={inline:"span",styles:{textDecoration:"line-through"},exact:!0},g={inline:"strike",remove:"all",preserve_attributes:["class","style"]},y={inline:"s",remove:"all",preserve_attributes:["class","style"]};return s!=="html4"?[y,f,g]:[f,y,g]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(f,g,y)=>wn(f)&&f.hasAttribute("href"),onformat:(f,g,y)=>{Lt.each(y,(C,A)=>{n.setAttrib(f,A,C)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":f=>{var g;return(g=f==null?void 0:f.customValue)!==null&&g!==void 0?g:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Lt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),f=>{a[f]={block:f,remove:"all"}}),a},aB={remove_similar:!0,inherit:!1},vu=ie({selector:"td,th"},aB),wg={tablecellbackgroundcolor:ie({styles:{backgroundColor:"%value"}},vu),tablecellverticalalign:ie({styles:{"vertical-align":"%value"}},vu),tablecellbordercolor:ie({styles:{borderColor:"%value"}},vu),tablecellclass:ie({classes:["%value"]},vu),tableclass:ie({selector:"table",classes:["%value"]},aB),tablecellborderstyle:ie({styles:{borderStyle:"%value"}},vu),tablecellborderwidth:ie({styles:{borderWidth:"%value"}},vu)},fS=he(wg),hS=e=>{const n={},s=y=>ae(y)?n[y]:n,a=y=>Bn(n,y),f=(y,C)=>{y&&(Z(y)?(Re(C)||(C=[C]),ue(C,A=>{$e(A.deep)&&(A.deep=!Bl(A)),$e(A.split)&&(A.split=!Bl(A)||ri(A)),$e(A.remove)&&Bl(A)&&!ri(A)&&(A.remove="none"),Bl(A)&&ri(A)&&(A.mixed=!0,A.block_expand=!0),Z(A.classes)&&(A.classes=A.classes.split(/\s+/))}),n[y]=C):$t(y,(A,M)=>{f(M,A)}))},g=y=>(y&&n[y]&&delete n[y],n);return f(tW(e)),f(fS()),f(a7(e)),{get:s,has:a,register:f,unregister:g}},nf=Lt.each,Aa=or.DOM,g1=e=>ae(e)&&be(e),ov=(e,n)=>{const s=n&&n.schema||Hf({}),a=(A,M)=>{M.classes.length>0&&Aa.addClass(A,M.classes.join(" ")),Aa.setAttribs(A,M.attrs)},f=A=>{const M=Z(A)?{name:A,classes:[],attrs:{}}:A,I=Aa.create(M.name);return a(I,M),I},g=(A,M)=>{const I=s.getElementRule(A.nodeName.toLowerCase()),L=I==null?void 0:I.parentsRequired;return L&&L.length?M&&Je(L,M)?M:L[0]:!1},y=(A,M,I)=>{let L;const W=M[0],re=g1(W)?W.name:void 0,de=g(A,re);if(de)re===de?(L=W,M=M.slice(1)):L=de;else if(W)L=W,M=M.slice(1);else if(!I)return A;const te=L?f(L):Aa.create("div");te.appendChild(A),I&&Lt.each(I,Fe=>{const ze=f(Fe);te.insertBefore(ze,A)});const fe=g1(L)?L.siblings:void 0;return y(te,M,fe)},C=Aa.create("div");if(e.length>0){const A=e[0],M=f(A),I=g1(A)?A.siblings:void 0;C.appendChild(y(M,e.slice(1),I))}return C},lB=e=>{e=Lt.trim(e);let n="div";const s={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(a,f,g,y,C)=>{switch(f){case"#":s.attrs.id=g;break;case".":s.classes.push(g);break;case":":Lt.inArray("checked disabled enabled read-only required".split(" "),g)!==-1&&(s.attrs[g]=g);break}if(y==="["){const A=C.match(/([\w\-]+)(?:\=\"([^\"]+))?/);A&&(s.attrs[A[1]]=A[2])}return""})),s.name=n||"div",s},UT=e=>Z(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Lt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const s=Lt.map(n.split(/(?:~\+|~|\+)/),lB),a=s.pop();return s.length&&(a.siblings=s),a}).reverse()):[],WT=(e,n)=>{let s="",a=p3(e);if(a==="")return"";const f=W=>Z(W)?W.replace(/%(\w+)/g,""):"",g=(W,re)=>Aa.getStyle(re!=null?re:e.getBody(),W,!0);if(Z(n)){const W=e.formatter.get(n);if(!W)return"";n=W[0]}if("preview"in n){const W=n.preview;if(W===!1)return"";a=W||a}let y=n.block||n.inline||"span",C;const A=UT(n.selector);A.length>0?(A[0].name||(A[0].name=y),y=n.selector,C=ov(A,e)):C=ov([y],e);const M=Aa.select(y,C)[0]||C.firstChild;nf(n.styles,(W,re)=>{const de=f(W);de&&Aa.setStyle(M,re,de)}),nf(n.attributes,(W,re)=>{const de=f(W);de&&Aa.setAttrib(M,re,de)}),nf(n.classes,W=>{const re=f(W);Aa.hasClass(M,re)||Aa.addClass(M,re)}),e.dispatch("PreviewFormats"),Aa.setStyles(C,{position:"absolute",left:-65535}),e.getBody().appendChild(C);const I=g("fontSize"),L=/px$/.test(I)?parseInt(I,10):0;return nf(a.split(" "),W=>{let re=g(W,M);if(!(W==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(re)&&(re=g(W),B0(re).toLowerCase()==="#ffffff"))&&!(W==="color"&&B0(re).toLowerCase()==="#000000")){if(W==="font-size"&&/em|%$/.test(re)){if(L===0)return;re=parseFloat(re)/(/%$/.test(re)?100:1)*L+"px"}W==="border"&&re&&(s+="padding:0 2px;"),s+=W+":"+re+";"}}),e.dispatch("AfterPreviewFormats"),Aa.remove(C),s},cB=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},jT=e=>{const n=hS(e),s=jr({});return cB(e),FV(e),ah(e)||GV(s,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(a,f,g)=>{eU(e,a,f,g)},remove:(a,f,g,y)=>{tU(e,a,f,g,y)},toggle:(a,f,g)=>{nU(e,a,f,g)},match:(a,f,g,y)=>FN(e,a,f,g,y),closest:a=>NT(e,a),matchAll:(a,f)=>IN(e,a,f),matchNode:(a,f,g,y)=>PT(e,a,f,g,y),canApply:a=>LN(e,a),formatChanged:(a,f,g,y)=>Ic(e,s,a,f,g,y),getCssText:Pe(WT,e)}},xg=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},uB=(e,n,s)=>{const a=jr(!1),f=A=>{sS(n,!1,s),n.add({},A)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",A=>{const M=A.command;xg(M)||(_N(n,s),n.beforeChange())}),e.on("ExecCommand",A=>{const M=A.command;xg(M)||f(A)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",f),e.on("dragend",f),e.on("keyup",A=>{const M=A.keyCode;if(A.isDefaultPrevented())return;const I=sn.os.isMacOS()&&A.key==="Meta";(M>=33&&M<=36||M>=37&&M<=40||M===45||A.ctrlKey||I)&&(f(),e.nodeChanged()),(M===46||M===8)&&e.nodeChanged(),a.get()&&n.typing&&!DT(oS(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),a.set(!1),e.nodeChanged())}),e.on("keydown",A=>{const M=A.keyCode;if(A.isDefaultPrevented())return;if(M>=33&&M<=36||M>=37&&M<=40||M===45){n.typing&&f(A);return}const I=A.ctrlKey&&!A.altKey||A.metaKey;if((M<16||M>20)&&M!==224&&M!==91&&!n.typing&&!I){n.beforeChange(),sS(n,!0,s),n.add({},A),a.set(!0);return}(sn.os.isMacOS()?A.metaKey:A.ctrlKey&&!A.altKey)&&n.beforeChange()}),e.on("mousedown",A=>{n.typing&&f(A)});const g=A=>A.inputType==="insertReplacementText",y=A=>A.inputType==="insertText"&&A.data===null,C=A=>A.inputType==="insertFromPaste"||A.inputType==="insertFromDrop";e.on("input",A=>{A.inputType&&(g(A)||y(A)||C(A))&&f(A)}),e.on("AddUndo Undo Redo ClearUndos",A=>{A.isDefaultPrevented()||e.nodeChanged()})},dB=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},ZT=e=>{const n=Mh(),s=jr(0),a=jr(0),f={data:[],typing:!1,beforeChange:()=>{vee(e,s,n)},add:(g,y)=>da(e,f,a,s,n,g,y),dispatchChange:()=>{e.setDirty(!0);const g=oS(e);g.bookmark=Ak(e.selection),e.dispatch("change",{level:g,lastLevel:Rt(f.data,a.get()).getOrUndefined()})},undo:()=>PN(e,f,s,a),redo:()=>NN(e,a,f.data),clear:()=>{BN(e,f,a)},reset:()=>{Yz(e,f)},hasUndo:()=>Xz(e,f,a),hasRedo:()=>rS(e,f,a),transact:g=>Jz(e,f,s,g),ignore:g=>{RT(e,s,g)},extra:(g,y)=>{Qz(e,f,a,g,y)}};return ah(e)||uB(e,f,s),dB(e),f},mS=[9,27,hn.HOME,hn.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,hn.DOWN,hn.UP,hn.LEFT,hn.RIGHT].concat(sn.browser.isFirefox()?[224]:[]),qT="data-mce-placeholder",GT=e=>e.type==="keydown"||e.type==="keyup",KT=e=>{const n=e.keyCode;return n===hn.BACKSPACE||n===hn.DELETE},fB=e=>{if(GT(e)){const n=e.keyCode;return!KT(e)&&(hn.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Je(mS,n))}else return!1},ch=e=>GT(e)&&!(KT(e)||e.type==="keyup"&&e.keyCode===229),Xh=(e,n,s)=>{if(Rr(ye.fromDom(n),!1)){const a=n.firstElementChild;return a?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:s===a.nodeName.toLowerCase():!0}else return!1},yu=e=>{var n;const s=e.dom,a=Ia(e),f=(n=o7(e))!==null&&n!==void 0?n:"",g=(y,C)=>{if(fB(y))return;const A=e.getBody(),M=ch(y)?!1:Xh(s,A,a);(s.getAttrib(A,qT)!==""!==M||C)&&(s.setAttrib(A,qT,M?f:null),s.setAttrib(A,"aria-placeholder",M?f:null),pH(e,M),e.on(M?"keydown":"keyup",g),e.off(M?"keyup":"keydown",g))};Po(f)&&e.on("init",y=>{g(y,!0),e.on("change SetContent ExecCommand",g),e.on("paste",C=>pc.setEditorTimeout(e,()=>g(C)))})},nW=(e,n)=>({block:e,position:n}),oW=(e,n)=>({from:e,to:n}),YT=(e,n)=>{const s=ye.fromDom(e),a=ye.fromDom(n.container());return kb(s,a).map(f=>nW(f,n))},sW=e=>!ys(e.from.block,e.to.block),hB=(e,n)=>fl(n,f=>sc(f)||hl(f.dom),f=>ys(f,e)).filter(gn).getOr(e),rW=(e,n)=>{const s=ye.fromDom(e);return ys(hB(s,n.from.block),hB(s,n.to.block))},iW=e=>ms(e.from.block.dom)===!1&&ms(e.to.block.dom)===!1,aW=e=>{const n=s=>et(s)||Xy(s.dom);return n(e.from.block)&&n(e.to.block)},lW=(e,n,s)=>Zs(s.position.getNode())&&!Rr(s.block)?Np(!1,s.block.dom).bind(a=>a.isEqual(s.position)?Nl(n,e,a).bind(f=>YT(e,f)):V.some(s)).getOr(s):s,cW=(e,n,s)=>{const a=YT(e,bt.fromRangeStart(s)),f=a.bind(g=>Nl(n,e,g.position).bind(y=>YT(e,y).map(C=>lW(e,n,C))));return Kr(a,f,oW).filter(g=>sW(g)&&rW(e,g)&&iW(g)&&aW(g))},uW=(e,n,s)=>s.collapsed?cW(e,n,s):V.none(),dW=(e,n)=>{const s=pi(e);return en(s,a=>n.isBlock(ts(a))).fold(he(s),a=>s.slice(0,a))},gS=(e,n)=>{const s=dW(e,n);return ue(s,ks),s},pS=(e,n)=>{const s=Zd(n,e);return ot(s.reverse(),a=>Rr(a)).each(ks)},mB=e=>Me(By(e),n=>!Rr(n)).length===0,fW=(e,n,s,a,f)=>{if(Rr(s))return Bd(s),La(s.dom);mB(f)&&Rr(n)&&Pa(f,ye.fromTag("br"));const g=gl(s.dom,bt.before(f.dom));return ue(gS(n,a),y=>{Pa(f,y)}),pS(e,n),g},hW=(e,n)=>e.isInline(ts(n)),gB=(e,n,s,a)=>{if(Rr(s)){if(Rr(n)){const y=kt((C=>{const A=(M,I)=>Om(M).fold(()=>I,L=>hW(a,L)?A(L,I.concat(cc(L))):I);return A(C,[])})(s),(C,A)=>(Vy(C,A),A),qu());Md(n),Jr(n,y)}return ks(s),La(n.dom)}const f=lu(s.dom);return ue(gS(n,a),g=>{Jr(s,g)}),pS(e,n),f},pB=(e,n)=>{const s=Zd(n,e);return V.from(s[s.length-1])},XT=(e,n)=>Iu(n,e)?pB(n,e):V.none(),JT=(e,n)=>{Np(e,n.dom).bind(s=>V.from(s.getNode())).map(ye.fromDom).filter(Im).each(ks)},QT=(e,n,s,a)=>(JT(!0,n),JT(!1,s),XT(n,s).fold(Pe(gB,e,n,s,a),Pe(fW,e,n,s,a))),bS=(e,n,s,a,f)=>n?QT(e,a,s,f):QT(e,s,a,f),eO=(e,n)=>{const s=ye.fromDom(e.getBody());return uW(s.dom,n,e.selection.getRng()).map(f=>()=>{bS(s,n,f.from.block,f.to.block,e.schema).each(g=>{e.selection.setRng(g.toRange())})})},mW=(e,n,s)=>{const a=n.getRng();return Kr(kb(e,ye.fromDom(a.startContainer)),kb(e,ye.fromDom(a.endContainer)),(f,g)=>ys(f,g)?V.none():V.some(()=>{a.deleteContents(),bS(e,!0,f,g,s).each(y=>{n.setRng(y.toRange())})})).getOr(V.none())},cd=(e,n)=>{const s=ye.fromDom(n),a=Pe(ys,e);return Ar(s,sc,a).isSome()},wu=(e,n)=>cd(e,n.startContainer)||cd(e,n.endContainer),vS=(e,n)=>{const s=gl(e.dom,bt.fromRangeStart(n)).isNone(),a=Qa(e.dom,bt.fromRangeEnd(n)).isNone();return!wu(e,n)&&s&&a},bB=e=>V.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),yS=e=>{const n=ye.fromDom(e.getBody()),s=e.selection.getRng();return vS(n,s)?bB(e):mW(n,e.selection,e.schema)},wS=(e,n)=>e.selection.isCollapsed()?V.none():yS(e),of=(e,n,s,a,f)=>V.from(n._selectionOverrides.showCaret(e,s,a,f)),vB=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},p1=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?V.none():V.some(vB(n)),yB=(e,n,s)=>{const a=Zk(1,e.getBody(),n),f=bt.fromRangeStart(a),g=f.getNode();if(Mw(g))return of(1,e,g,!f.isAtEnd(),!1);const y=f.getNode(!0);if(Mw(y))return of(1,e,y,!1,!1);const C=mg(e.dom.getRoot(),f.getNode());return Mw(C)?of(1,e,C,!1,s):V.none()},xS=(e,n,s)=>n.collapsed?yB(e,n,s).getOr(n):n,SS=e=>th(e)||vb(e),tO=e=>sd(e)||jp(e),gW=(e,n)=>{Vt(n)&&n.data.length===0&&e.remove(n)},wB=(e,n,s,a,f,g)=>{of(a,e,g.getNode(!f),f,!0).each(y=>{if(n.collapsed){const C=n.cloneRange();f?C.setEnd(y.startContainer,y.startOffset):C.setStart(y.endContainer,y.endOffset),C.deleteContents()}else n.deleteContents();e.selection.setRng(y)}),gW(e.dom,s)},pW=(e,n)=>{const s=e.selection.getRng();if(!Vt(s.commonAncestorContainer))return V.none();const a=n?zi.Forwards:zi.Backwards,f=Vd(e.getBody()),g=Pe(qk,n?f.next:f.prev),y=n?SS:tO,C=tb(a,e.getBody(),s),A=g(C),M=A&&qo(n,A);if(!M||!Fw(C,M))return V.none();if(y(M))return V.some(()=>wB(e,s,C.getNode(),a,n,M));const I=g(M);return I&&y(I)&&Fw(M,I)?V.some(()=>wB(e,s,C.getNode(),a,n,I)):V.none()},nO=(e,n)=>pW(e,n),CS=(e,n)=>{const s=e.getBody();return n?La(s).filter(th):lu(s).filter(sd)},oO=e=>{const n=e.selection.getRng();return!n.collapsed&&(CS(e,!0).exists(s=>s.isEqual(bt.fromRangeStart(n)))||CS(e,!1).exists(s=>s.isEqual(bt.fromRangeEnd(n))))},bW=e=>ae(e)&&(sc(ye.fromDom(e))||Lm(ye.fromDom(e))),vl=td.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),vW=(e,n)=>{const s=n.getNode(!e),a=e?"after":"before";return wn(s)&&s.getAttribute("data-mce-caret")===a},yW=(e,n,s,a,f)=>{const g=y=>f.isInline(y.nodeName.toLowerCase())&&!nd(s,a,e);return H3(!n,s).fold(()=>H3(n,a).fold(ce,g),g)},xB=(e,n,s,a)=>{const f=a.getNode(!n);return kb(ye.fromDom(e),ye.fromDom(s.getNode())).map(g=>Rr(g)?vl.remove(g.dom):vl.moveToElement(f)).orThunk(()=>V.some(vl.moveToElement(f)))},SB=(e,n,s,a)=>Nl(n,e,s).bind(f=>bW(f.getNode())||yW(e,n,s,f,a)?V.none():n&&ms(f.getNode())||!n&&ms(f.getNode(!0))?xB(e,n,s,f):n&&sd(s)||!n&&th(s)?V.some(vl.moveToPosition(f)):V.none()),wW=(e,n)=>Ue(n)?V.none():e&&ms(n.nextSibling)?V.some(vl.moveToElement(n.nextSibling)):!e&&ms(n.previousSibling)?V.some(vl.moveToElement(n.previousSibling)):V.none(),xW=(e,n,s)=>s.fold(a=>V.some(vl.remove(a)),a=>V.some(vl.moveToElement(a)),a=>nd(n,a,e)?V.none():V.some(vl.moveToPosition(a))),SW=(e,n,s,a)=>vW(n,s)?wW(n,s.getNode(!n)).orThunk(()=>SB(e,n,s,a)):SB(e,n,s,a).bind(f=>xW(e,s,f)),kS=(e,n,s,a)=>{const f=Zk(n?1:-1,e,s),g=bt.fromRangeStart(f),y=ye.fromDom(e);return!n&&sd(g)?V.some(vl.remove(g.getNode(!0))):n&&th(g)?V.some(vl.remove(g.getNode())):!n&&th(g)&&wb(y,g,a)?U9(y,g,a).map(C=>vl.remove(C.getNode())):n&&sd(g)&&yb(y,g,a)?W9(y,g,a).map(C=>vl.remove(C.getNode())):SW(e,n,g,a)},sO=(e,n)=>s=>(e._selectionOverrides.hideFakeCaret(),oh(e,n,ye.fromDom(s)),!0),CW=(e,n)=>s=>{const a=n?bt.before(s):bt.after(s);return e.selection.setRng(a.toRange()),!0},kW=e=>n=>(e.selection.setRng(n.toRange()),!0),CB=(e,n)=>V.from(mg(e.getBody(),n)),AW=(e,n)=>{const s=e.selection.getNode();return CB(e,s).filter(ms).fold(()=>kS(e.getBody(),n,e.selection.getRng(),e.schema).map(a=>()=>a.fold(sO(e,n),CW(e,n),kW(e))),()=>V.some(ge))},kB=e=>{ue(ya(e,".mce-offscreen-selection"),ks)},EW=(e,n)=>{const s=e.selection.getNode();return ms(s)&&!S0(s)?CB(e,s.parentNode).filter(ms).fold(()=>V.some(()=>{kB(ye.fromDom(e.getBody())),oh(e,n,ye.fromDom(e.selection.getNode())),px(e)}),()=>V.some(ge)):oO(e)?V.some(()=>{Ab(e,e.selection.getRng(),ye.fromDom(e.getBody()))}):V.none()},AB=e=>{const n=e.dom,s=e.selection,a=mg(e.getBody(),s.getNode());if(hl(a)&&n.isBlock(a)&&n.isEmpty(a)){const f=n.create("br",{"data-mce-bogus":"1"});n.setHTML(a,""),a.appendChild(f),s.setRng(bt.before(f).toRange())}return!0},sv=(e,n)=>e.selection.isCollapsed()?AW(e,n):EW(e,n),TW=(e,n)=>{const s=bt.fromRangeStart(e.selection.getRng());return Nl(n,e.getBody(),s).filter(a=>n?I9(a):L9(a)).bind(a=>Nw(n?0:-1,a)).map(a=>()=>e.selection.select(a))},rO=(e,n)=>e.selection.isCollapsed()?TW(e,n):V.none(),b1=Vt,EB=e=>b1(e)&&e.data[0]===Xi,TB=e=>b1(e)&&e.data[e.data.length-1]===Xi,OB=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Xi)},OW=e=>{var n;if(b1(e.previousSibling))return TB(e.previousSibling)||e.previousSibling.appendData(Xi),e.previousSibling;if(b1(e))return EB(e)||e.insertData(0,Xi),e;{const s=OB(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(s,e),s}},AS=e=>{var n,s;if(b1(e.nextSibling))return EB(e.nextSibling)||e.nextSibling.insertData(0,Xi),e.nextSibling;if(b1(e))return TB(e)||e.appendData(Xi),e;{const a=OB(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(a,e.nextSibling):(s=e.parentNode)===null||s===void 0||s.appendChild(a),a}},Sg=(e,n)=>e?OW(n):AS(n),DW=Pe(Sg,!0),_W=Pe(Sg,!1),rv=(e,n)=>Vt(e.container())?Sg(n,e.container()):Sg(n,e.getNode()),DB=(e,n)=>{const s=n.get();return s&&e.container()===s&&ic(s)},iO=(e,n)=>n.fold(s=>{_i(e.get());const a=DW(s);return e.set(a),V.some(bt(a,a.length-1))},s=>La(s).map(a=>{if(DB(a,e)){const f=e.get();return bt(f,1)}else{_i(e.get());const f=rv(a,!0);return e.set(f),bt(f,1)}}),s=>lu(s).map(a=>{if(DB(a,e)){const f=e.get();return bt(f,f.length-1)}else{_i(e.get());const f=rv(a,!1);return e.set(f),bt(f,f.length-1)}}),s=>{_i(e.get());const a=_W(s);return e.set(a),V.some(bt(a,1))}),_B=(e,n)=>{for(let s=0;s<e.length;s++){const a=e[s].apply(null,n);if(a.isSome())return a}return V.none()},el=td.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),MB=(e,n)=>{const s=jf(n,e);return s||e},MW=(e,n,s)=>{const a=fg(s),f=MB(n,a.container());return fu(e,f,a).fold(()=>Qa(f,a).bind(Pe(fu,e,f)).map(g=>el.before(g)),V.none)},RW=(e,n)=>eg(e,n)===null,RB=(e,n,s)=>fu(e,n,s).filter(Pe(RW,n)),PW=(e,n,s)=>{const a=Sb(s);return RB(e,n,a).bind(f=>gl(f,a).isNone()?V.some(el.start(f)):V.none())},NW=(e,n,s)=>{const a=fg(s);return RB(e,n,a).bind(f=>Qa(f,a).isNone()?V.some(el.end(f)):V.none())},BW=(e,n,s)=>{const a=Sb(s),f=MB(n,a.container());return fu(e,f,a).fold(()=>gl(f,a).bind(Pe(fu,e,f)).map(g=>el.after(g)),V.none)},FW=e=>!MR(iv(e)),Qi=(e,n,s)=>_B([MW,PW,NW,BW],[e,n,s]).filter(FW),iv=e=>e.fold(at,at,at,at),aO=e=>e.fold(he("before"),he("start"),he("end"),he("after")),av=e=>e.fold(el.before,el.before,el.after,el.after),lO=e=>e.fold(el.start,el.start,el.end,el.end),PB=(e,n)=>aO(e)===aO(n)&&iv(e)===iv(n),IW=(e,n,s,a,f,g)=>Kr(fu(n,s,a),fu(n,s,f),(y,C)=>y!==C&&hu(s,y,C)?el.after(e?y:C):g).getOr(g),NB=(e,n)=>e.fold(Ze,s=>!PB(s,n)),LW=(e,n,s,a,f)=>{const g=qo(e,f);return Nl(e,s,g).map(Pe(qo,e)).fold(()=>a.map(av),A=>Qi(n,s,A).map(Pe(IW,e,n,s,g,A)).filter(Pe(NB,a))).filter(FW)},$W=(e,n)=>e?n.fold(O(V.some,el.start),V.none,O(V.some,el.after),V.none):n.fold(V.none,O(V.some,el.before),V.none,O(V.some,el.end)),HW=(e,n,s,a)=>{const f=qo(e,a),g=Qi(n,s,f);return Qi(n,s,f).bind(Pe($W,e)).orThunk(()=>LW(e,n,s,g,a))},v1=e=>Oe(e.selection.getSel().modify),cO=(e,n,s)=>{const a=e?1:-1;return n.setRng(bt(s.container(),s.offset()+a).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},BB=(e,n)=>{const s=n.selection.getRng(),a=e?bt.fromRangeEnd(s):bt.fromRangeStart(s);return v1(n)?e&&$2(a)?cO(!0,n.selection,a):!e&&jy(a)?cO(!1,n.selection,a):!1:!1};var ud;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(ud||(ud={}));const y1=(e,n)=>e===zi.Backwards?Kn(n):n,VW=(e,n,s)=>e===zi.Forwards?n.next(s):n.prev(s),zW=(e,n,s,a)=>Zs(a.getNode(n===zi.Forwards))?ud.Br:nd(s,a)===!1?ud.Block:ud.Wrap,FB=(e,n,s,a)=>{const f=Vd(s);let g=a;const y=[];for(;g;){const C=VW(n,f,g);if(!C)break;if(Zs(C.getNode(!1)))return n===zi.Forwards?{positions:y1(n,y).concat([C]),breakType:ud.Br,breakAt:V.some(C)}:{positions:y1(n,y),breakType:ud.Br,breakAt:V.some(C)};if(!C.isVisible()){g=C;continue}if(e(g,C)){const A=zW(s,n,g,C);return{positions:y1(n,y),breakType:A,breakAt:V.some(C)}}y.push(C),g=C}return{positions:y1(n,y),breakType:ud.Eol,breakAt:V.none()}},UW=(e,n,s,a)=>n(s,a).breakAt.map(f=>{const g=n(s,f).positions;return e===zi.Backwards?g.concat(f):[f].concat(g)}).getOr([]),IB=(e,n)=>ve(e,(s,a)=>s.fold(()=>V.some(a),f=>Kr(Wt(f.getClientRects()),Wt(a.getClientRects()),(g,y)=>{const C=Math.abs(n-g.left);return Math.abs(n-y.left)<=C?a:f}).or(s)),V.none()),uO=(e,n)=>Wt(n.getClientRects()).bind(s=>IB(e,s.left)),yl=Pe(FB,bt.isAbove,-1),lv=Pe(FB,bt.isBelow,1),LB=Pe(UW,-1,yl),Jh=Pe(UW,1,lv),dO=(e,n)=>yl(e,n).breakAt.isNone(),$B=(e,n)=>lv(e,n).breakAt.isNone(),ES=e=>La(e).map(n=>[n].concat(lv(e,n).positions)).getOr([]),WW=e=>lu(e).map(n=>yl(e,n).positions.concat(n)).getOr([]),jW=(e,n)=>uO(LB(e,n),n),ZW=(e,n)=>uO(Jh(e,n),n),qW=ms,HB=(e,n)=>Math.abs(e.left-n),VB=(e,n)=>Math.abs(e.right-n),uh=e=>hi(e,"node"),zB=(e,n)=>ke(e,(s,a)=>{const f=Math.min(HB(s,n),VB(s,n)),g=Math.min(HB(a,n),VB(a,n));return g===f&&uh(a)&&qW(a.node)||g<f?a:s}),GW=e=>{const n=s=>tt(s,a=>{const f=Ym(a);return f.node=e,f});if(wn(e))return n(e.getClientRects());if(Vt(e)){const s=e.ownerDocument.createRange();return s.setStart(e,0),s.setEnd(e,e.data.length),n(s.getClientRects())}else return[]},UB=e=>On(e,GW);var cv;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(cv||(cv={}));const KW=(e,n,s,a)=>{let f=a;for(;f=_p(f,e,V2,n);)if(s(f))return},TS=(e,n,s,a,f,g)=>{let y=0;const C=[],A=L=>{let W=UB([L]);e===-1&&(W=W.reverse());for(let re=0;re<W.length;re++){const de=W[re];if(!s(de,M)){if(C.length>0&&n(de,ct(C))&&y++,de.line=y,f(de))return!0;C.push(de)}}return!1},M=ct(g.getClientRects());if(!M)return C;const I=g.getNode();return I&&(A(I),KW(e,a,A,I)),C},fO=(e,n)=>n.line>e,hO=(e,n)=>n.line===e,WB=Pe(TS,cv.Up,Jm,U0),jB=Pe(TS,cv.Down,U0,Jm),mO=e=>ct(e.getClientRects()),YW=(e,n,s,a)=>{const f=Vd(n);let g,y,C,A;const M=[];let I=0;e===1?(g=f.next,y=U0,C=Jm,A=bt.after(a)):(g=f.prev,y=Jm,C=U0,A=bt.before(a));const L=mO(A);do{if(!A.isVisible())continue;const W=mO(A);if(C(W,L))continue;M.length>0&&y(W,ct(M))&&I++;const re=Ym(W);if(re.position=A,re.line=I,s(re))return M;M.push(re)}while(A=g(A));return M},w1=e=>n=>fO(e,n),x1=e=>n=>hO(e,n),sf=(e,n)=>{e.selection.setRng(n),pb(e,e.selection.getRng())},OS=(e,n,s)=>V.some(xS(e,n,s)),gO=(e,n,s,a,f,g)=>{const y=n===zi.Forwards,C=Vd(e.getBody()),A=Pe(qk,y?C.next:C.prev),M=y?a:f;if(!s.collapsed){const de=fw(s);if(g(de))return of(n,e,de,n===zi.Backwards,!1);if(oO(e)){const te=s.cloneRange();return te.collapse(n===zi.Backwards),V.from(te)}}const I=tb(n,e.getBody(),s);if(M(I))return p1(e,I.getNode(!y));let L=A(I);const W=kM(s);if(L)L=qo(y,L);else return W?V.some(s):V.none();if(M(L))return of(n,e,L.getNode(!y),y,!1);const re=A(L);return re&&M(re)&&Fw(L,re)?of(n,e,re.getNode(!y),y,!1):W?OS(e,L.toRange(),!1):V.none()},pO=(e,n,s,a,f,g)=>{const y=tb(n,e.getBody(),s),C=ct(y.getClientRects()),A=n===cv.Down,M=e.getBody();if(!C)return V.none();if(oO(e)){const fe=A?bt.fromRangeEnd(s):bt.fromRangeStart(s);return(A?ZW:jW)(M,fe).orThunk(()=>V.from(fe)).map(ze=>ze.toRange())}const L=(A?jB:WB)(M,w1(1),y),W=Me(L,x1(1)),re=C.left,de=zB(W,re);if(de&&g(de.node)){const fe=Math.abs(re-de.left),Fe=Math.abs(re-de.right);return of(n,e,de.node,fe<Fe,!1)}let te;if(a(y)?te=y.getNode():f(y)?te=y.getNode(!0):te=fw(s),te){const fe=YW(n,M,w1(1),te);let Fe=zB(Me(fe,x1(1)),re);if(Fe||(Fe=ct(Me(fe,x1(0))),Fe))return OS(e,Fe.position.toRange(),!1)}return W.length===0?S1(e,A).filter(A?f:a).map(fe=>xS(e,fe.toRange(),!1)):V.none()},S1=(e,n)=>{const s=e.selection.getRng(),a=n?bt.fromRangeEnd(s):bt.fromRangeStart(s),f=I3(a.container(),e.getBody());if(n){const g=lv(f,a);return bn(g.positions)}else{const g=yl(f,a);return Wt(g.positions)}},DS=(e,n,s)=>S1(e,n).filter(s).exists(a=>(e.selection.setRng(a.toRange()),!0)),Qh=(e,n)=>{const s=e.dom.createRng();s.setStart(n.container(),n.offset()),s.setEnd(n.container(),n.offset()),e.selection.setRng(s)},ZB=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},bO=(e,n,s)=>iO(n,s).map(a=>(Qh(e,a),s)),XW=(e,n,s)=>{const a=bt.fromRangeStart(e);if(e.collapsed)return a;{const f=bt.fromRangeEnd(e);return s?gl(n,f).getOr(f):Qa(n,a).getOr(a)}},JW=(e,n,s)=>{const a=e.getBody(),f=XW(e.selection.getRng(),a,s),g=Pe(dg,e);return HW(s,g,a,f).bind(C=>bO(e,n,C))},qB=(e,n,s)=>{const a=tt(ya(ye.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),y=>y.dom),f=Me(a,e),g=Me(s,e);ue(ls(f,g),Pe(ZB,!1)),ue(ls(g,f),Pe(ZB,!0))},QW=(e,n)=>{const s=n.get();if(e.selection.isCollapsed()&&!e.composing&&s){const a=bt.fromRangeStart(e.selection.getRng());bt.isTextPosition(a)&&!cV(a)&&(Qh(e,R3(s,a)),n.set(null))}},GB=(e,n,s,a)=>{if(n.selection.isCollapsed()){const f=Me(a,e);ue(f,g=>{const y=bt.fromRangeStart(n.selection.getRng());Qi(e,n.getBody(),y).bind(C=>bO(n,s,C))})}},ej=(e,n,s)=>K0(e)?JW(e,n,s).isSome():!1,KB=(e,n,s)=>K0(n)?BB(e,n):!1,tj=e=>{const n=jr(null),s=Pe(dg,e);return e.on("NodeChange",a=>{K0(e)&&(qB(s,e.dom,a.parents),QW(e,n),GB(s,e,n,a.parents))}),n},nj=Pe(KB,!0),oj=Pe(KB,!1),_S=(e,n,s)=>{if(K0(e)){const a=S1(e,n).getOrThunk(()=>{const f=e.selection.getRng();return n?bt.fromRangeEnd(f):bt.fromRangeStart(f)});return Qi(Pe(dg,e),e.getBody(),a).exists(f=>{const g=av(f);return iO(s,g).exists(y=>(Qh(e,y),!0))})}else return!1},sj=(e,n)=>{const s=document.createRange();return s.setStart(e.container(),e.offset()),s.setEnd(n.container(),n.offset()),s},rj=e=>Kr(La(e),lu(e),(n,s)=>{const a=qo(!0,n),f=qo(!1,s);return Qa(e,a).forall(g=>g.isEqual(f))}).getOr(!0),YB=(e,n)=>s=>iO(n,s).map(a=>()=>Qh(e,a)),vO=(e,n,s,a)=>{const f=e.getBody(),g=Pe(dg,e);e.undoManager.ignore(()=>{e.selection.setRng(sj(s,a)),Cb(e),Qi(g,f,bt.fromRangeStart(e.selection.getRng())).map(lO).bind(YB(e,n)).each(wt)}),e.nodeChanged()},ij=(e,n)=>{const s=jf(n,e);return s||e},Cg=(e,n,s,a)=>{const f=ij(e.getBody(),a.container()),g=Pe(dg,e),y=Qi(g,f,a);return y.bind(A=>s?A.fold(he(V.some(lO(A))),V.none,he(V.some(av(A))),V.none):A.fold(V.none,he(V.some(av(A))),V.none,he(V.some(lO(A))))).map(YB(e,n)).getOrThunk(()=>{const A=Gf(s,f,a),M=A.bind(I=>Qi(g,f,I));return Kr(y,M,()=>fu(g,f,a).bind(I=>rj(I)?V.some(()=>{oh(e,s,ye.fromDom(I))}):V.none())).getOrThunk(()=>M.bind(()=>A.map(I=>()=>{s?vO(e,n,a,I):vO(e,n,I,a)})))})},MS=(e,n,s)=>{if(e.selection.isCollapsed()&&K0(e)){const a=bt.fromRangeStart(e.selection.getRng());return Cg(e,n,s,a)}return V.none()},yO=e=>Ra(e)>1,wO=(e,n)=>{const s=ye.fromDom(e.getBody()),a=ye.fromDom(e.selection.getStart()),f=Zd(a,s);return en(f,n).fold(he(f),g=>f.slice(0,g))},xO=e=>Ra(e)===1,em=e=>wO(e,n=>e.schema.isBlock(ts(n))||yO(n)),XB=e=>wO(e,n=>e.schema.isBlock(ts(n))),xc=(e,n)=>{const s=Pe(Kd,e);return On(n,a=>s(a)?[a.dom]:[])},tm=e=>{const n=XB(e);return xc(e,n)},SO=(e,n,s,a)=>{const f=xc(n,a);if(f.length===0)oh(n,e,s);else{const g=vP(s.dom,f);n.selection.setRng(g.toRange())}},aj=(e,n)=>{const s=Me(em(e),xO);return bn(s).bind(a=>{const f=bt.fromRangeStart(e.selection.getRng());return bx(n,f,a.dom)&&!pA(a)?V.some(()=>SO(n,e,a,s)):V.none()})},JB=(e,n)=>{const s=n.parentElement;return Zs(n)&&!K(s)&&e.dom.isEmpty(s)},lj=e=>pA(ye.fromDom(e)),QB=(e,n)=>{const s=e.selection.getStart(),a=JB(e,s)||lj(s)?vP(s,n):Fx(e.selection.getRng(),n);e.selection.setRng(a.toRange())},cj=(e,n)=>{const s=ls(n,tm(e));s.length>0&&QB(e,s)},eF=e=>Vt(e.startContainer),uj=e=>e.startOffset===0&&eF(e),tF=(e,n)=>{const s=n.startContainer.parentElement;return!K(s)&&Kd(e,ye.fromDom(s))},dj=e=>{const n=e.startContainer.parentNode,s=e.endContainer.parentNode;return!K(n)&&!K(s)&&n.isEqualNode(s)},fj=e=>{const n=e.endContainer;return e.endOffset===(Vt(n)?n.length:n.childNodes.length)},C1=e=>dj(e)&&fj(e),CO=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),nF=e=>C1(e)||CO(e),oF=e=>{const n=e.selection.getRng();return uj(n)&&tF(e,n)&&nF(n)},kO=e=>{if(oF(e)){const n=tm(e);return V.some(()=>{Cb(e),cj(e,n)})}else return V.none()},AO=(e,n)=>e.selection.isCollapsed()?aj(e,n):kO(e),hj=(e,n)=>fV(e,s=>hc(s.dom),s=>n.isBlock(ts(s))),mj=e=>hj(ye.fromDom(e.selection.getStart()),e.schema),gj=e=>{const n=e.selection.getRng();return n.collapsed&&(eF(n)||e.dom.isEmpty(n.startContainer))&&!mj(e)},uv=e=>(gj(e)&&QB(e,[]),!0),EO=(e,n,s)=>ae(s)?V.some(()=>{e._selectionOverrides.hideFakeCaret(),oh(e,n,ye.fromDom(s))}):V.none(),pj=(e,n)=>{const s=n?vb:jp,a=n?zi.Forwards:zi.Backwards,f=tb(a,e.getBody(),e.selection.getRng());return s(f)?EO(e,n,f.getNode(!n)):V.from(qo(n,f)).filter(g=>s(g)&&Fw(f,g)).bind(g=>EO(e,n,g.getNode(!n)))},sF=(e,n)=>{const s=e.selection.getNode();return Qr(s)?EO(e,n,s):V.none()},TO=(e,n)=>e.selection.isCollapsed()?pj(e,n):sF(e,n),bj=e=>fl(e,n=>hl(n.dom)||ms(n.dom)).exists(n=>hl(n.dom)),wl=e=>ji(e!=null?e:"").getOr(0),rF=(e,n)=>{const s=e||oc(n)?"margin":"padding",a=ou(n,"direction")==="rtl"?"-right":"-left";return s+a},OO=(e,n,s,a,f,g)=>{const y=rF(s,ye.fromDom(g)),C=wl(e.getStyle(g,y));if(n==="outdent"){const A=Math.max(0,C-a);e.setStyle(g,y,A?A+f:"")}else{const A=C+a+f;e.setStyle(g,y,A)}},iF=(e,n)=>ho(n,s=>{const a=rF(Sw(e),s),f=_m(s,a).map(wl).getOr(0);return e.dom.getContentEditable(s.dom)!=="false"&&f>0}),RS=e=>{const n=lF(e);return!e.mode.isReadOnly()&&(n.length>1||iF(e,n))},aF=e=>_l(e)||Lm(e),vj=e=>ra(e).exists(aF),lF=e=>Me(Ah(e.selection.getSelectedBlocks()),n=>!aF(n)&&!vj(n)&&bj(n)),cF=(e,n)=>{var s,a;const{dom:f}=e,g=d3(e),y=(a=(s=/[a-z%]+$/i.exec(g))===null||s===void 0?void 0:s[0])!==null&&a!==void 0?a:"px",C=wl(g),A=Sw(e);ue(lF(e),M=>{OO(f,n,A,C,y,M.dom)})},yj=e=>cF(e,"indent"),DO=e=>cF(e,"outdent"),uF=e=>{if(e.selection.isCollapsed()&&RS(e)){const n=e.dom,s=e.selection.getRng(),a=bt.fromRangeStart(s),f=n.getParent(s.startContainer,n.isBlock);if(f!==null&&YA(ye.fromDom(f),a,e.schema))return V.some(()=>DO(e))}return V.none()},dF=(e,n,s)=>ao([uF,sv,nO,(a,f)=>MS(a,n,f),eO,Rb,rO,TO,wS,AO],a=>a(e,s)).filter(a=>e.selection.isEditable()),dv=(e,n)=>{dF(e,n,!1).fold(()=>{e.selection.isEditable()&&(Cb(e),px(e))},wt)},dh=(e,n)=>{dF(e,n,!0).fold(()=>{e.selection.isEditable()&&uV(e)},wt)},kg=(e,n)=>{e.addCommand("delete",()=>{dv(e,n)}),e.addCommand("forwardDelete",()=>{dh(e,n)})},fv=5,_O=400,PS=e=>e.touches===void 0||e.touches.length!==1?V.none():V.some(e.touches[0]),fF=(e,n)=>{const s=Math.abs(e.clientX-n.x),a=Math.abs(e.clientY-n.y);return s>fv||a>fv},wj=e=>{const n=Mh(),s=jr(!1),a=ik(f=>{e.dispatch("longpress",Ot(ie({},f),{type:"longpress"})),s.set(!0)},_O);e.on("touchstart",f=>{PS(f).each(g=>{a.cancel();const y={x:g.clientX,y:g.clientY,target:f.target};a.throttle(f),s.set(!1),n.set(y)})},!0),e.on("touchmove",f=>{a.cancel(),PS(f).each(g=>{n.on(y=>{fF(g,y)&&(n.clear(),s.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",f=>{a.cancel(),f.type!=="touchcancel"&&n.get().filter(g=>g.target.isEqualNode(f.target)).each(()=>{s.get()?f.preventDefault():e.dispatch("tap",Ot(ie({},f),{type:"tap"}))})},!0)},NS=(e,n)=>Bn(e,n.nodeName),hF=(e,n)=>Vt(n)?!0:wn(n)?!NS(e.getBlockElements(),n)&&!mc(n)&&!ns(e,n)&&!W2(n):!1,xj=(e,n,s)=>Bt(GA(ye.fromDom(s),ye.fromDom(n)),a=>NS(e,a.dom)),Sj=(e,n)=>{if(Vt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||NS(e,n.nextSibling)||W2(n.nextSibling)}return!1},mF=e=>e.dom.create(Ia(e),q0(e)),Cj=e=>{const n=e.dom,s=e.selection,a=e.schema,f=a.getBlockElements(),g=s.getStart(),y=e.getBody();let C,A,M=!1;const I=Ia(e);if(!g||!wn(g))return;const L=y.nodeName.toLowerCase();if(!a.isValidChild(L,I.toLowerCase())||xj(f,y,g))return;const W=s.getRng(),{startContainer:re,startOffset:de,endContainer:te,endOffset:fe}=W,Fe=Hh(e);let ze=y.firstChild;for(;ze;)if(wn(ze)&&OM(a,ze),hF(a,ze)){if(Sj(f,ze)){A=ze,ze=ze.nextSibling,n.remove(A);continue}C||(C=mF(e),y.insertBefore(C,ze),M=!0),A=ze,ze=ze.nextSibling,C.appendChild(A)}else C=null,ze=ze.nextSibling;M&&Fe&&(W.setStart(re,de),W.setEnd(te,fe),s.setRng(W),e.nodeChanged())},gF=(e,n,s)=>{const a=ye.fromDom(mF(e)),f=qu();Jr(a,f),s(n,a);const g=document.createRange();return g.setStartBefore(f.dom),g.setEndBefore(f.dom),g},kj=e=>{e.on("NodeChange",Pe(Cj,e))},MO=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,pF=(e,n,s)=>function(a){const f=arguments,g=f[f.length-2],y=g>0?n.charAt(g-1):"";if(y==='"')return a;if(y===">"){const C=n.lastIndexOf("<",g);if(C!==-1&&n.substring(C,g).indexOf('contenteditable="false"')!==-1)return a}return'<span class="'+s+'" data-mce-content="'+e.dom.encode(f[0])+'">'+e.dom.encode(typeof f[1]=="string"?f[1]:f[0])+"</span>"},Aee=(e,n,s)=>{let a=n.length,f=s.content;if(s.format!=="raw"){for(;a--;)f=f.replace(n[a],pF(e,f,E3(e)));s.content=f}},Eee=e=>{const n="contenteditable",s=" "+Lt.trim(C7(e))+" ",a=" "+Lt.trim(E3(e))+" ",f=MO(s),g=MO(a),y=k7(e);y.length>0&&e.on("BeforeSetContent",C=>{Aee(e,y,C)}),e.parser.addAttributeFilter("class",C=>{let A=C.length;for(;A--;){const M=C[A];f(M)?M.attr(n,"true"):g(M)&&M.attr(n,"false")}}),e.serializer.addAttributeFilter(n,C=>{let A=C.length;for(;A--;){const M=C[A];!f(M)&&!g(M)||(y.length>0&&M.attr("data-mce-content")?(M.name="#text",M.type=3,M.raw=!0,M.value=M.attr("data-mce-content")):M.attr(n,null))}})},Tee=e=>Ch(ye.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),bF=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Eh(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},Oee=(e,n)=>{const s=Tee(e);if(s){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),bF(e,s);return}SM(s)&&(bF(e,s),e.undoManager.add())}},Dee=e=>{e.on("keyup compositionstart",Pe(Oee,e))},vF=ms,Aj=(e,n,s)=>gO(n,e,s,th,sd,vF),_ee=(e,n,s)=>pO(n,e,s,g=>th(g)||hR(g),g=>sd(g)||No(g),vF),Ej=e=>{const n=e.dom.create(Ia(e));return n.innerHTML='<br data-mce-bogus="1">',n},xl=(e,n,s)=>{const a=Vd(e.getBody()),f=Pe(qk,n===1?a.next:a.prev);if(s.collapsed){const g=e.dom.getParent(s.startContainer,"PRE");if(!g)return;if(!f(bt.fromRangeStart(s))){const C=ye.fromDom(Ej(e));n===1?Vu(ye.fromDom(g),C):Pa(ye.fromDom(g),C),e.selection.select(C.dom,!0),e.selection.collapse()}}},yF=(e,n)=>{const s=n?zi.Forwards:zi.Backwards,a=e.selection.getRng();return Aj(s,e,a).orThunk(()=>(xl(e,s,a),V.none()))},hv=(e,n)=>{const s=n?1:-1,a=e.selection.getRng();return _ee(s,e,a).orThunk(()=>(xl(e,s,a),V.none()))},Tj=(e,n)=>{const s=n?e.getEnd(!0):e.getStart(!0);return MR(s)?!n:n},RO=(e,n)=>yF(e,Tj(e.selection,n)).exists(s=>(sf(e,s),!0)),PO=(e,n)=>hv(e,n).exists(s=>(sf(e,s),!0)),BS=(e,n)=>DS(e,n,n?sd:th),FS=(e,n)=>CS(e,!n).map(s=>{const a=s.toRange(),f=e.selection.getRng();return n?a.setStart(f.startContainer,f.startOffset):a.setEnd(f.endContainer,f.endOffset),a}).exists(s=>(sf(e,s),!0)),Oj=e=>Je(["figcaption"],ts(e)),wF=(e,n,s)=>{const a=Pe(ys,n);return fl(ye.fromDom(e.container()),f=>s.isBlock(ts(f)),a).filter(Oj)},Dj=(e,n,s)=>n?$B(e.dom,s):dO(e.dom,s),_j=(e,n)=>{const s=ye.fromDom(e.getBody()),a=bt.fromRangeStart(e.selection.getRng());return wF(a,s,e.schema).exists(()=>{if(Dj(s,n,a)){const g=gF(e,s,n?Jr:Mm);return e.selection.setRng(g),!0}else return!1})},xF=(e,n)=>e.selection.isCollapsed()?_j(e,n):!1,NO=(e,n,s)=>{const a=e.selection.getRng(),f=bt.fromRangeStart(a);return e.getBody().firstChild===n&&dO(s,f)?(e.execCommand("InsertNewBlockBefore"),!0):!1},Mj=(e,n)=>{const s=e.selection.getRng(),a=bt.fromRangeStart(s);return e.getBody().lastChild===n&&$B(n,a)?(e.execCommand("InsertNewBlockAfter"),!0):!1},Rj=(e,n)=>n?V.from(e.dom.getParent(e.selection.getNode(),"details")).map(s=>Mj(e,s)).getOr(!1):V.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(s=>V.from(e.dom.getParent(s,"details")).map(a=>NO(e,a,s))).getOr(!1),Pj=(e,n)=>Rj(e,n),SF={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},CF=e=>tt(e,n=>ie(ie({},SF),n)),Mee=e=>tt(e,n=>ie(ie({},SF),n)),kF=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,Nj=(e,n)=>On(CF(e),s=>kF(s,n)?[s]:[]),Bj=(e,n)=>On(Mee(e),s=>kF(s,n)?[s]:[]),so=(e,...n)=>()=>e.apply(null,n),nm=(e,n)=>ot(Nj(e,n),s=>s.action()),BO=(e,n)=>ao(Bj(e,n),s=>s.action()),FO=(e,n)=>{const s=n?zi.Forwards:zi.Backwards,a=e.selection.getRng();return gO(e,s,a,vb,jp,Qr).exists(f=>(sf(e,f),!0))},AF=(e,n)=>{const s=n?1:-1,a=e.selection.getRng();return pO(e,s,a,vb,jp,Qr).exists(f=>(sf(e,f),!0))},EF=(e,n)=>DS(e,n,n?jp:vb),IS=td.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Fj=e=>IS.none(e),mv=Ot(ie({},IS),{none:Fj}),Ij=(e,n)=>TF(e,n,Ze),TF=(e,n,s)=>On(pi(e),a=>Ol(a,n)?s(a)?[a]:[]:TF(a,n,s)),xu=(e,n,s=ce)=>{if(s(n))return V.none();if(Je(e,ts(n)))return V.some(n);const a=f=>Ol(f,"table")||s(f);return Of(n,e.join(","),a)},OF=(e,n)=>xu(["td","th"],e,n),DF=e=>Ij(e,"th,td"),Lj=(e,n)=>_d(e,"table",n),_F=(e,n,s,a,f=Ze)=>{const g=a===1;if(!g&&s<=0)return mv.first(e[0]);if(g&&s>=e.length-1)return mv.last(e[e.length-1]);{const y=s+a,C=e[y];return f(C)?mv.middle(n,C):_F(e,n,y,a,f)}},$j=(e,n)=>Lj(e,n).bind(s=>{const a=DF(s);return en(a,g=>ys(e,g)).map(g=>({index:g,all:a}))}),Ree=(e,n,s)=>$j(e,s).fold(()=>mv.none(e),f=>_F(f.all,e,f.index,1,n)),Hj=(e,n,s)=>$j(e,s).fold(()=>mv.none(),f=>_F(f.all,e,f.index,-1,n)),LS=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),Vj=(e,n)=>On(n,s=>{const a=LS(Ym(s.getBoundingClientRect()),-1);return[{x:a.left,y:e(a),cell:s},{x:a.right,y:e(a),cell:s}]}),IO=(e,n,s)=>ve(e,(a,f)=>a.fold(()=>V.some(f),g=>{const y=Math.sqrt(Math.abs(g.x-n)+Math.abs(g.y-s)),C=Math.sqrt(Math.abs(f.x-n)+Math.abs(f.y-s));return V.some(C<y?f:g)}),V.none()),LO=(e,n,s,a,f)=>{const g=ya(ye.fromDom(s),"td,th,caption").map(C=>C.dom),y=Me(Vj(e,g),C=>n(C,f));return IO(y,a,f).map(C=>C.cell)},MF=e=>e.bottom,RF=e=>e.top,zj=(e,n)=>e.y<n,Uj=(e,n)=>e.y>n,Wj=Pe(LO,MF,zj),jj=Pe(LO,RF,Uj),$S=(e,n)=>Wt(n.getClientRects()).bind(s=>Wj(e,s.left,s.top)).bind(s=>uO(WW(s),n)),Zj=(e,n)=>bn(n.getClientRects()).bind(s=>jj(e,s.left,s.top)).bind(s=>uO(ES(s),n)),qj=(e,n,s)=>s.breakAt.exists(a=>e(n,a).breakAt.isSome()),Gj=e=>e.breakType===ud.Wrap&&e.positions.length===0,$O=e=>e.breakType===ud.Br&&e.positions.length===1,PF=(e,n,s)=>{const a=e(n,s);return Gj(a)||!Zs(s.getNode())&&$O(a)?!qj(e,n,a):a.breakAt.isNone()},Kj=Pe(PF,yl),NF=Pe(PF,lv),Yj=(e,n,s)=>{const a=bt.fromRangeStart(n);return Np(!e,s).exists(f=>f.isEqual(a))},Xj=(e,n,s,a)=>{const f=e.selection.getRng(),g=n?1:-1;return F3()&&Yj(n,f,s)?(of(g,e,s,!n,!1).each(y=>{sf(e,y)}),!0):!1},Jj=(e,n,s)=>$S(n,s).orThunk(()=>Wt(s.getClientRects()).bind(a=>IB(LB(e,bt.before(n)),a.left))).getOr(bt.before(n)),Qj=(e,n,s)=>Zj(n,s).orThunk(()=>Wt(s.getClientRects()).bind(a=>IB(Jh(e,bt.after(n)),a.left))).getOr(bt.after(n)),BF=(e,n)=>{const s=n.getNode(e);return Pd(s)?V.some(s):V.none()},eZ=(e,n,s)=>{n.undoManager.transact(()=>{const a=e?Vu:Pa,f=gF(n,ye.fromDom(s),a);sf(n,f)})},HS=(e,n,s)=>{const a=BF(!!n,s),f=n===!1;a.fold(()=>sf(e,s.toRange()),g=>Np(f,e.getBody()).filter(y=>y.isEqual(s)).fold(()=>sf(e,s.toRange()),y=>eZ(n,e,g)))},tZ=(e,n,s,a)=>{const f=e.selection.getRng(),g=bt.fromRangeStart(f),y=e.getBody();if(!n&&Kj(a,g)){const C=Jj(y,s,g);return HS(e,n,C),!0}else if(n&&NF(a,g)){const C=Qj(y,s,g);return HS(e,n,C),!0}else return!1},HO=(e,n,s)=>V.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(a=>V.from(e.dom.getParent(a,"table")).map(f=>s(e,n,f,a))).getOr(!1),FF=(e,n)=>HO(e,n,Xj),VO=(e,n)=>HO(e,n,tZ),nZ=e=>{const n=jd.exact(e,0,e,0);return NH(n)},IF=(e,n,s)=>s.fold(V.none,V.none,(a,f)=>v9(f).map(g=>nZ(g)),a=>(e.execCommand("mceTableInsertRowAfter"),LF(e,n,a))),LF=(e,n,s)=>IF(e,n,Ree(s,Eo)),oZ=(e,n,s)=>IF(e,n,Hj(s,Eo)),ai=(e,n)=>{const s=["table","li","dl"],a=ye.fromDom(e.getBody()),f=C=>{const A=ts(C);return ys(C,a)||Je(s,A)},g=e.selection.getRng(),y=ye.fromDom(n?g.endContainer:g.startContainer);return OF(y,f).map(C=>(Lj(C,f).each(I=>{e.model.table.clearSelectedCells(I.dom)}),e.selection.collapse(!n),(n?LF:oZ)(e,f,C).each(I=>{e.selection.setRng(I)}),!0)).getOr(!1)},sZ=(e,n,s)=>{const a=sn.os.isMacOS()||sn.os.isiOS();nm([{keyCode:hn.RIGHT,action:so(RO,e,!0)},{keyCode:hn.LEFT,action:so(RO,e,!1)},{keyCode:hn.UP,action:so(PO,e,!1)},{keyCode:hn.DOWN,action:so(PO,e,!0)},...a?[{keyCode:hn.UP,action:so(FS,e,!1),metaKey:!0,shiftKey:!0},{keyCode:hn.DOWN,action:so(FS,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:hn.RIGHT,action:so(FF,e,!0)},{keyCode:hn.LEFT,action:so(FF,e,!1)},{keyCode:hn.UP,action:so(VO,e,!1)},{keyCode:hn.DOWN,action:so(VO,e,!0)},{keyCode:hn.UP,action:so(VO,e,!1)},{keyCode:hn.UP,action:so(Pj,e,!1)},{keyCode:hn.DOWN,action:so(Pj,e,!0)},{keyCode:hn.RIGHT,action:so(FO,e,!0)},{keyCode:hn.LEFT,action:so(FO,e,!1)},{keyCode:hn.UP,action:so(AF,e,!1)},{keyCode:hn.DOWN,action:so(AF,e,!0)},{keyCode:hn.RIGHT,action:so(ej,e,n,!0)},{keyCode:hn.LEFT,action:so(ej,e,n,!1)},{keyCode:hn.RIGHT,ctrlKey:!a,altKey:a,action:so(nj,e,n)},{keyCode:hn.LEFT,ctrlKey:!a,altKey:a,action:so(oj,e,n)},{keyCode:hn.UP,action:so(xF,e,!1)},{keyCode:hn.DOWN,action:so(xF,e,!0)}],s).each(f=>{s.preventDefault()})},rZ=(e,n)=>{e.on("keydown",s=>{s.isDefaultPrevented()||sZ(e,n,s)})},dd=(e,n)=>({container:e,offset:n}),gv=or.DOM,k1=e=>n=>e===n?-1:0,$F=e=>n=>e.isBlock(n)||Je(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",rf=(e,n,s)=>{if(Vt(e)&&n>=0)return V.some(dd(e,n));{const a=Gm(gv);return V.from(a.backwards(e,n,k1(e),s)).map(f=>dd(f.container,f.container.data.length))}},zO=(e,n,s)=>{if(Vt(e)&&n>=e.length)return V.some(dd(e,n));{const a=Gm(gv);return V.from(a.forwards(e,n,k1(e),s)).map(f=>dd(f.container,0))}},VS=(e,n,s)=>{if(!Vt(e))return V.none();const a=e.data;if(n>=0&&n<=a.length)return V.some(dd(e,n));{const f=Gm(gv);return V.from(f.backwards(e,n,k1(e),s)).bind(g=>{const y=g.container.data;return VS(g.container,n+y.length,s)})}},zS=(e,n,s)=>{if(!Vt(e))return V.none();const a=e.data;if(n<=a.length)return V.some(dd(e,n));{const f=Gm(gv);return V.from(f.forwards(e,n,k1(e),s)).bind(g=>zS(g.container,n-a.length,s))}},pv=(e,n,s,a,f)=>{const g=Gm(e,$F(e));return V.from(g.backwards(n,s,a,f))},UO=e=>e.collapsed&&Vt(e.startContainer),WO=e=>rc(e.toString().replace(/\u00A0/g," ")),bv=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,A1=(e,n)=>e.substring(n.length),vv=(e,n,s)=>{let a;const f=s.charAt(0);for(a=n-1;a>=0;a--){const g=e.charAt(a);if(bv(g))return V.none();if(f===g&&$n(e,s,a,n))break}return V.some(a)},yv=(e,n,s,a=0)=>{if(!UO(n))return V.none();const f={text:"",offset:0},g=(C,A,M)=>(f.text=M+f.text,f.offset+=A,vv(f.text,f.offset,s).getOr(A)),y=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return pv(e,n.startContainer,n.startOffset,g,y).bind(C=>{const A=n.cloneRange();if(A.setStart(C.container,C.offset),A.setEnd(n.endContainer,n.endOffset),A.collapsed)return V.none();const M=WO(A);return M.lastIndexOf(s)!==0||A1(M,s).length<a?V.none():V.some({text:A1(M,s),range:A,trigger:s})})},$c=(e,n,s,a=0)=>S9(ye.fromDom(n.startContainer)).fold(()=>yv(e,n,s,a),f=>{const g=e.createRng();g.selectNode(f.dom);const y=WO(g);return V.some({range:g,text:A1(y,s),trigger:s})}),wv=e=>e.nodeType===kf,HF=e=>e.nodeType===dl,jO=e=>{if(wv(e))return dd(e,e.data.length);{const n=e.childNodes;return n.length>0?jO(n[n.length-1]):dd(e,n.length)}},VF=(e,n)=>{const s=e.childNodes;return s.length>0&&n<s.length?VF(s[n],0):s.length>0&&HF(e)&&s.length===n?jO(s[s.length-1]):dd(e,n)},zF=(e,n)=>{var s;const a=(s=e.getParent(n.container,e.isBlock))!==null&&s!==void 0?s:e.getRoot();return pv(e,n.container,n.offset,(f,g)=>g===0?-1:g,a).filter(f=>{const g=f.container.data.charAt(f.offset-1);return!bv(g)}).isSome()},iZ=e=>n=>{const s=VF(n.startContainer,n.startOffset);return!zF(e,s)},aZ=(e,n,s)=>ao(s.triggers,a=>$c(e,n,a)),xv=(e,n)=>{const s=n(),a=e.selection.getRng();return aZ(e.dom,a,s).bind(f=>UF(e,n,f))},UF=(e,n,s,a={})=>{var f;const g=n(),C=(f=e.selection.getRng().startContainer.nodeValue)!==null&&f!==void 0?f:"",A=Me(g.lookupByTrigger(s.trigger),I=>s.text.length>=I.minChars&&I.matches.getOrThunk(()=>iZ(e.dom))(s.range,C,s.text));if(A.length===0)return V.none();const M=Promise.all(tt(A,I=>I.fetch(s.text,I.maxResults,a).then(W=>({matchText:s.text,items:W,columns:I.columns,onAction:I.onAction,highlightOn:I.highlightOn}))));return V.some({lookupData:M,context:s})};var fd;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(fd||(fd={}));const ZO=(e,n,s)=>e.stype===fd.Error?n(e.serror):s(e.svalue),lZ=e=>{const n=[],s=[];return ue(e,a=>{ZO(a,f=>s.push(f),f=>n.push(f))}),{values:n,errors:s}},cZ=(e,n)=>e.stype===fd.Error?{stype:fd.Error,serror:n(e.serror)}:e,uZ=(e,n)=>e.stype===fd.Value?{stype:fd.Value,svalue:n(e.svalue)}:e,dZ=(e,n)=>e.stype===fd.Value?n(e.svalue):e,fZ=(e,n)=>e.stype===fd.Error?n(e.serror):e,WF=e=>({stype:fd.Value,svalue:e}),jF=e=>({stype:fd.Error,serror:e}),fa={fromResult:e=>e.fold(jF,WF),toResult:e=>ZO(e,ml.error,ml.value),svalue:WF,partition:lZ,serror:jF,bind:dZ,bindError:fZ,map:uZ,mapError:cZ,fold:ZO},qO=e=>be(e)&&Fo(e).length>100?" removed due to size":JSON.stringify(e,null,2),ZF=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:he("... (only showing first ten failures)")}]):e;return tt(n,s=>"Failed path: ("+s.path.join(" > ")+`)
`+s.getErrorInfo())},Sv=(e,n)=>fa.serror([{path:e,getErrorInfo:n}]),qF=(e,n,s)=>Sv(e,()=>'Could not find valid *required* value for "'+n+'" in '+qO(s)),hZ=(e,n)=>Sv(e,()=>'Choice schema did not contain choice key: "'+n+'"'),mZ=(e,n,s)=>Sv(e,()=>'The chosen schema: "'+s+'" did not exist in branches: '+qO(n)),gZ=(e,n)=>Sv(e,he(n)),pZ=(e,n,s,a)=>us(s,a).fold(()=>mZ(e,s,a),g=>g.extract(e.concat(["branch: "+a]),n)),GF=(e,n)=>({extract:(f,g)=>us(g,e).fold(()=>hZ(f,e),C=>pZ(f,g,n,C)),toString:()=>"chooseOn("+e+"). Possible values: "+Fo(n)}),bZ=(e,n)=>n,KF=(e,n)=>He(e)&&He(n)?Cv(e,n):n,YF=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const s={};for(let a=0;a<n.length;a++){const f=n[a];for(const g in f)Bn(f,g)&&(s[g]=e(s[g],f[g]))}return s},Cv=YF(KF),XF=YF(bZ),JF=()=>({tag:"required",process:{}}),vZ=e=>({tag:"defaultedThunk",process:e}),QF=e=>vZ(he(e)),eI=()=>({tag:"option",process:{}}),yZ=(e,n)=>e.length>0?fa.svalue(Cv(n,XF.apply(void 0,e))):fa.svalue(n),tI=e=>O(fa.serror,Wn)(e),xZ={consolidateObj:(e,n)=>{const s=fa.partition(e);return s.errors.length>0?tI(s.errors):yZ(s.values,n)},consolidateArr:e=>{const n=fa.partition(e);return n.errors.length>0?tI(n.errors):fa.svalue(n.values)}},nI=(e,n,s,a)=>({tag:"field",key:e,newKey:n,presence:s,prop:a}),SZ=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),oI=(e,n,s)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return s(e.newKey,e.instantiator)}},GO=e=>{const n=(a,f)=>fa.bindError(e(f),g=>gZ(a,g)),s=he("val");return{extract:n,toString:s}},sI=GO(fa.svalue),rI=(e,n,s,a)=>us(n,s).fold(()=>qF(e,s,n),a),iI=(e,n,s,a)=>{const f=us(e,n).getOrThunk(()=>s(e));return a(f)},CZ=(e,n,s)=>s(us(e,n)),kZ=(e,n,s,a)=>{const f=us(e,n).map(g=>g===!0?s(e):g);return a(f)},AZ=(e,n,s,a,f)=>{const g=C=>f.extract(n.concat([a]),C),y=C=>C.fold(()=>fa.svalue(V.none()),A=>{const M=f.extract(n.concat([a]),A);return fa.map(M,V.some)});switch(e.tag){case"required":return rI(n,s,a,g);case"defaultedThunk":return iI(s,a,e.process,g);case"option":return CZ(s,a,y);case"defaultedOptionThunk":return kZ(s,a,e.process,y);case"mergeWithThunk":return iI(s,a,he({}),C=>{const A=Cv(e.process(s),C);return g(A)})}},EZ=(e,n,s)=>{const a={},f=[];for(const g of s)oI(g,(y,C,A,M)=>{const I=AZ(A,e,n,y,M);fa.fold(I,L=>{f.push(...L)},L=>{a[C]=L})},(y,C)=>{a[y]=C(n)});return f.length>0?fa.serror(f):fa.svalue(a)},KO=e=>({extract:(a,f)=>EZ(a,f,e),toString:()=>`obj{
`+tt(e,f=>oI(f,(g,y,C,A)=>g+" -> "+A.toString(),(g,y)=>"state("+g+")")).join(`
`)+"}"}),aI=e=>({extract:(a,f)=>{const g=tt(f,(y,C)=>e.extract(a.concat(["["+C+"]"]),y));return xZ.consolidateArr(g)},toString:()=>"array("+e.toString()+")"}),TZ=e=>GO(n=>e(n).fold(fa.serror,fa.svalue)),Fee=(e,n,s)=>{const a=n.extract([e],s);return fa.mapError(a,f=>({input:s,errors:f}))},OZ=(e,n,s)=>fa.toResult(Fee(e,n,s)),lI=e=>`Errors: 
`+ZF(e.errors).join(`
`)+`

Input object: `+qO(e.input),YO=(e,n)=>GF(e,xo(n,KO)),cI=he(sI),US=(e,n)=>GO(s=>{const a=typeof s;return e(s)?fa.svalue(s):fa.serror(`Expected type: ${n} but got: ${a}`)}),uI=US(ht,"number"),kv=US(Z,"string"),DZ=US(Ie,"boolean"),XO=US(Oe,"function"),Av=nI,JO=SZ,_Z=e=>TZ(n=>Je(e,n)?ml.value(n):ml.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),WS=(e,n)=>Av(e,e,JF(),n),dI=e=>WS(e,kv),fI=e=>WS(e,XO),MZ=(e,n)=>Av(e,e,JF(),aI(n)),jS=(e,n)=>Av(e,e,eI(),n),ZS=e=>jS(e,kv),RZ=e=>jS(e,XO),PZ=(e,n)=>Av(e,e,QF(n),cI()),E1=(e,n,s)=>Av(e,e,QF(n),s),hI=(e,n)=>E1(e,n,uI),Pi=(e,n)=>E1(e,n,kv),hd=(e,n,s)=>E1(e,n,_Z(s)),QO=(e,n)=>E1(e,n,DZ),mI=(e,n)=>E1(e,n,XO),NZ=(e,n,s)=>E1(e,n,aI(s)),BZ=dI("type"),FZ=fI("fetch"),eD=fI("onAction"),gI=mI("onSetup",()=>ge),T1=ZS("text"),Iee=ZS("icon"),IZ=ZS("tooltip"),LZ=ZS("label"),md=QO("active",!1),$Z=QO("enabled",!0),pI=QO("primary",!1),bI=e=>PZ("columns",e),Ev=e=>Pi("type",e),tD=KO([BZ,dI("trigger"),hI("minChars",1),bI(1),hI("maxResults",10),RZ("matches"),FZ,eD,NZ("highlightOn",[],kv)]),vI=e=>OZ("Autocompleter",tD,ie({trigger:e.ch},e)),nD=[$Z,IZ,Iee,T1,gI],yI=[md].concat(nD),HZ=[mI("predicate",ce),hd("scope","node",["node","editor"]),hd("position","selection",["node","selection","line"])],wI=nD.concat([Ev("contextformbutton"),pI,eD,JO("original",at)]),xI=yI.concat([Ev("contextformbutton"),pI,eD,JO("original",at)]),oD=nD.concat([Ev("contextformbutton")]),sD=yI.concat([Ev("contextformtogglebutton")]),rD=YO("type",{contextformbutton:wI,contextformtogglebutton:xI});KO([Ev("contextform"),mI("initValue",he("")),LZ,MZ("commands",rD),jS("launch",YO("type",{contextformbutton:oD,contextformtogglebutton:sD}))].concat(HZ));const VZ=e=>{const n=e.ui.registry.getAll().popups,s=xo(n,y=>vI(y).fold(C=>{throw new Error(lI(C))},at)),a=dt(Cr(s,y=>y.trigger)),f=fi(s);return{dataset:s,triggers:a,lookupByTrigger:y=>Me(f,C=>C.trigger===y)}},zZ=(e,n)=>{const s=ik(n.load,50);e.on("keypress compositionend",a=>{a.which!==27&&s.throttle()}),e.on("keydown",a=>{const f=a.which;f===8?s.throttle():f===27&&n.cancelIfNecessary()}),e.on("remove",s.cancel)},UZ=e=>{const n=Mh(),s=jr(!1),a=n.isSet,f=()=>{a()&&(cU(e),CA(e),s.set(!1),n.clear())},g=M=>{a()||(lU(e,M.range),n.set({trigger:M.trigger,matchLength:M.text.length}))},y=xt(()=>VZ(e)),C=M=>n.get().map(I=>$c(e.dom,e.selection.getRng(),I.trigger).bind(L=>UF(e,y,L,M))).getOrThunk(()=>xv(e,y)),A=M=>{C(M).fold(f,I=>{g(I.context),I.lookupData.then(L=>{n.get().map(W=>{const re=I.context;W.trigger===re.trigger&&(re.text.length-W.matchLength>=10?f():(n.set(Ot(ie({},W),{matchLength:re.text.length})),s.get()?p4(e,{lookupData:L}):(s.set(!0),vH(e,{lookupData:L}))))})})})};e.addCommand("mceAutocompleterReload",(M,I)=>{const L=be(I)?I.fetchOptions:{};A(L)}),e.addCommand("mceAutocompleterClose",f),zZ(e,{cancelIfNecessary:f,load:A})},iD=Ms().browser.isSafari(),aD=e=>Bd(ye.fromDom(e)),SI=(e,n)=>{var s;return e.startOffset===0&&e.endOffset===((s=n.textContent)===null||s===void 0?void 0:s.length)},Tv=(e,n)=>V.from(e.getParent(n.container(),"details")),CI=(e,n)=>Tv(e,n).isSome(),lD=(e,n)=>{const s=V.from(e.getParent(n.startContainer,"details")),a=V.from(e.getParent(n.endContainer,"details"));if(s.isSome()||a.isSome()){const f=s.bind(g=>V.from(e.select("summary",g)[0]));return V.some({startSummary:f,startDetails:s,endDetails:a})}else return V.none()},WZ=(e,n)=>La(n).exists(s=>s.isEqual(e)),jZ=(e,n)=>lu(n).exists(s=>Zs(s.getNode())&&gl(n,s).exists(a=>a.isEqual(e))||s.isEqual(e)),ZZ=(e,n)=>n.startSummary.exists(s=>WZ(e,s)),qZ=(e,n)=>n.startSummary.exists(s=>jZ(e,s)),GZ=(e,n)=>n.startDetails.exists(s=>gl(s,e).forall(a=>n.startSummary.exists(f=>!f.contains(e.container())&&f.contains(a.container())))),kI=(e,n,s)=>s.startDetails.exists(a=>Qa(e,n).forall(f=>!a.contains(f.container()))),qS=(e,n)=>{const s=n.getNode();$e(s)||e.selection.setCursorLocation(s,n.offset())},cD=(e,n,s)=>{const a=e.dom.getParent(n.container(),"details");if(a&&!a.open){const f=e.dom.select("summary",a)[0];f&&(s?La(f):lu(f)).each(y=>qS(e,y))}else qS(e,n)},AI=(e,n)=>{const s=A=>A.contains(e.startContainer),a=A=>A.contains(e.endContainer),f=n.startSummary.exists(s),g=n.startSummary.exists(a),y=n.startDetails.forall(A=>n.endDetails.forall(M=>A!==M));return(f||g)&&!(f&&g)||y},EI=(e,n,s)=>{const{dom:a,selection:f}=e,g=e.getBody();if(s==="character"){const y=bt.fromRangeStart(f.getRng()),C=a.getParent(y.container(),a.isBlock),A=Tv(a,y),M=C&&a.isEmpty(C),I=K(C==null?void 0:C.previousSibling),L=K(C==null?void 0:C.nextSibling);return M&&(n?L:I)&&Gf(!n,g,y).exists(de=>CI(a,de)&&!ba(A,Tv(a,de)))?!0:Gf(n,g,y).fold(ce,W=>{const re=Tv(a,W);if(CI(a,W)&&!ba(A,re)){if(n||cD(e,W,!1),C&&M){if(n&&I)return!0;if(!n&&L)return!0;cD(e,W,n),e.dom.remove(C)}return!0}else return!1})}else return!1},KZ=(e,n,s,a)=>{const g=e.selection.getRng(),y=bt.fromRangeStart(g),C=e.getBody();return a==="selection"?AI(g,n):s?qZ(y,n)||kI(C,y,n):ZZ(y,n)||GZ(y,n)},YZ=(e,n,s)=>lD(e.dom,e.selection.getRng()).fold(()=>EI(e,n,s),a=>KZ(e,a,n,s)||EI(e,n,s)),GS=(e,n,s)=>{const a=e.selection,f=a.getNode(),g=a.getRng(),y=bt.fromRangeStart(g);return tc(f)?(s==="selection"&&SI(g,f)||bx(n,y,f)?aD(f):e.undoManager.transact(()=>{const C=a.getSel();let{anchorNode:A,anchorOffset:M,focusNode:I,focusOffset:L}=C!=null?C:{};const W=()=>{ae(A)&&ae(M)&&ae(I)&&ae(L)&&(C==null||C.setBaseAndExtent(A,M,I,L))},re=()=>{A=C==null?void 0:C.anchorNode,M=C==null?void 0:C.anchorOffset,I=C==null?void 0:C.focusNode,L=C==null?void 0:C.focusOffset},de=(fe,Fe)=>{ue(fe.childNodes,ze=>{rb(ze)&&Fe.appendChild(ze)})},te=e.dom.create("span",{"data-mce-bogus":"1"});de(f,te),f.appendChild(te),W(),(s==="word"||s==="line")&&(C==null||C.modify("extend",n?"right":"left",s)),!a.isCollapsed()&&SI(a.getRng(),te)?aD(f):(e.execCommand(n?"ForwardDelete":"Delete"),re(),de(te,f),W()),e.dom.remove(te)}),!0):!1},om=(e,n,s)=>YZ(e,n,s)||iD&&GS(e,n,s)?V.some(ge):V.none(),uD=e=>(n,s,a={})=>{const f=n.getBody(),g={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:f,currentTarget:f,eventPhase:Event.AT_TARGET,originalTarget:f,explicitOriginalTarget:f,isTrusted:!1,srcElement:f,cancelable:!1,preventDefault:ge,inputType:s},y=sw(new InputEvent(e));return n.dispatch(e,ie(ie(ie({},y),g),a))},Ov=uD("input"),KS=uD("beforeinput"),XZ=Ms(),JZ=XZ.os,QZ=JZ.isMacOS()||JZ.isiOS(),Hee=XZ.browser.isFirefox(),eq=(e,n,s)=>{const a=s.keyCode===hn.BACKSPACE?"deleteContentBackward":"deleteContentForward",f=e.selection.isCollapsed(),g=f?"character":"selection",y=C=>f?C?"word":"line":"selection";BO([{keyCode:hn.BACKSPACE,action:so(uF,e)},{keyCode:hn.BACKSPACE,action:so(sv,e,!1)},{keyCode:hn.DELETE,action:so(sv,e,!0)},{keyCode:hn.BACKSPACE,action:so(nO,e,!1)},{keyCode:hn.DELETE,action:so(nO,e,!0)},{keyCode:hn.BACKSPACE,action:so(MS,e,n,!1)},{keyCode:hn.DELETE,action:so(MS,e,n,!0)},{keyCode:hn.BACKSPACE,action:so(Rb,e,!1)},{keyCode:hn.DELETE,action:so(Rb,e,!0)},{keyCode:hn.BACKSPACE,action:so(om,e,!1,g)},{keyCode:hn.DELETE,action:so(om,e,!0,g)},...QZ?[{keyCode:hn.BACKSPACE,altKey:!0,action:so(om,e,!1,y(!0))},{keyCode:hn.DELETE,altKey:!0,action:so(om,e,!0,y(!0))},{keyCode:hn.BACKSPACE,metaKey:!0,action:so(om,e,!1,y(!1))}]:[{keyCode:hn.BACKSPACE,ctrlKey:!0,action:so(om,e,!1,y(!0))},{keyCode:hn.DELETE,ctrlKey:!0,action:so(om,e,!0,y(!0))}],{keyCode:hn.BACKSPACE,action:so(rO,e,!1)},{keyCode:hn.DELETE,action:so(rO,e,!0)},{keyCode:hn.BACKSPACE,action:so(TO,e,!1)},{keyCode:hn.DELETE,action:so(TO,e,!0)},{keyCode:hn.BACKSPACE,action:so(wS,e,!1)},{keyCode:hn.DELETE,action:so(wS,e,!0)},{keyCode:hn.BACKSPACE,action:so(eO,e,!1)},{keyCode:hn.DELETE,action:so(eO,e,!0)},{keyCode:hn.BACKSPACE,action:so(AO,e,!1)},{keyCode:hn.DELETE,action:so(AO,e,!0)}],s).filter(C=>e.selection.isEditable()).each(C=>{s.preventDefault(),KS(e,a).isDefaultPrevented()||(C(),Ov(e,a))})},tq=(e,n,s)=>nm([{keyCode:hn.BACKSPACE,action:so(AB,e)},{keyCode:hn.DELETE,action:so(AB,e)},...QZ?[{keyCode:hn.BACKSPACE,altKey:!0,action:so(uv,e)},{keyCode:hn.DELETE,altKey:!0,action:so(uv,e)},...s?[{keyCode:Hee?224:91,action:so(uv,e)}]:[]]:[{keyCode:hn.BACKSPACE,ctrlKey:!0,action:so(uv,e)},{keyCode:hn.DELETE,ctrlKey:!0,action:so(uv,e)}]],n),Vee=(e,n)=>{let s=!1;e.on("keydown",a=>{s=a.keyCode===hn.BACKSPACE,a.isDefaultPrevented()||eq(e,n,a)}),e.on("keyup",a=>{a.isDefaultPrevented()||tq(e,a,s),s=!1})},nq=e=>{for(;e;){if(wn(e)||Vt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},mr=(e,n)=>{const s=e.dom,a=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const g=nq(n.firstChild);g&&/^(UL|OL|DL)$/.test(g.nodeName)&&n.insertBefore(s.doc.createTextNode(ws),n.firstChild)}const f=s.createRng();if(n.normalize(),n.hasChildNodes()){const g=new tr(n,n);let y=n,C;for(;C=g.current();){if(Vt(C)){f.setStart(C,0),f.setEnd(C,0);break}if(a[C.nodeName.toLowerCase()]){f.setStartBefore(C),f.setEndBefore(C);break}y=C,C=g.next()}C||(f.setStart(y,0),f.setEnd(y,0))}else Zs(n)?n.nextSibling&&s.isBlock(n.nextSibling)?(f.setStartBefore(n),f.setEndBefore(n)):(f.setStartAfter(n),f.setEndAfter(n)):(f.setStart(n,0),f.setEnd(n,0));e.selection.setRng(f),pb(e,f)},Ag=(e,n)=>{const s=e.getRoot();let a,f=n;for(;f!==s&&f&&e.getContentEditable(f)!=="false";){if(e.getContentEditable(f)==="true"){a=f;break}f=f.parentNode}return f!==s?a:s},Su=e=>V.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),TI=e=>Su(e).fold(he(""),n=>n.nodeName.toUpperCase()),OI=e=>Su(e).filter(n=>Lm(ye.fromDom(n))).isSome(),dD=e=>{e.innerHTML='<br data-mce-bogus="1">'},YS=(e,n,s)=>{const a=e.dom;V.from(s.style).map(a.parseStyle).each(A=>{const M=p0(ye.fromDom(n)),I=ie(ie({},M),A);a.setStyles(n,I)});const f=V.from(s.class).map(A=>A.split(/\s+/)),g=V.from(n.className).map(A=>Me(A.split(/\s+/),M=>M!==""));Kr(f,g,(A,M)=>{const I=Me(M,W=>!Je(A,W)),L=[...A,...I];a.setAttrib(n,"class",L.join(" "))});const y=["style","class"],C=di(s,(A,M)=>!Je(y,M));a.setAttribs(n,C)},Eg=(e,n)=>{if(Ia(e).toLowerCase()===n.tagName.toLowerCase()){const a=q0(e);YS(e,n,a)}},fD=(e,n,s,a,f=!0,g,y)=>{const C=e.dom,A=e.schema,M=Ia(e),I=s?s.nodeName.toUpperCase():"";let L=n;const W=A.getTextInlineElements();let re;g||I==="TABLE"||I==="HR"?re=C.create(g||M,y||{}):re=s.cloneNode(!1);let de=re;if(!f)C.setAttrib(re,"style",null),C.setAttrib(re,"class",null);else do if(W[L.nodeName]){if(hc(L)||mc(L))continue;const te=L.cloneNode(!1);C.setAttrib(te,"id",""),re.hasChildNodes()?(te.appendChild(re.firstChild),re.appendChild(te)):(de=te,re.appendChild(te))}while((L=L.parentNode)&&L!==a);return Eg(e,re),dD(de),re},DI=(e,n)=>e.dom.getParent(n,Pt),oq=(e,n,s)=>{let a=n;for(;a&&a!==e&&K(a.nextSibling);){const f=a.parentElement;if(!f||!s(f))return Pt(f);a=f}return!1},sq=(e,n,s)=>!n&&s.nodeName.toLowerCase()===Ia(e)&&e.dom.isEmpty(s)&&oq(e.getBody(),s,a=>Bn(e.schema.getTextBlockElements(),a.nodeName.toLowerCase())),rq=(e,n,s)=>{var a,f,g;const y=n(Ia(e)),C=DI(e,s);C&&(e.dom.insertAfter(y,C),mr(e,y),((g=(f=(a=s.parentElement)===null||a===void 0?void 0:a.childNodes)===null||f===void 0?void 0:f.length)!==null&&g!==void 0?g:0)>1&&e.dom.remove(s))},iq=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,aq=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},hD=(e,n)=>{const s=e==null?void 0:e.parentNode;return ae(s)&&s.nodeName===n},_I=e=>ae(e)&&/^(OL|UL|LI)$/.test(e.nodeName),mD=e=>ae(e)&&/^(LI|DT|DD)$/.test(e.nodeName),lq=e=>_I(e)&&_I(e.parentNode),XS=e=>{const n=e.parentNode;return mD(n)?n:e},JS=(e,n,s)=>{let a=e[s?"firstChild":"lastChild"];for(;a&&!wn(a);)a=a[s?"nextSibling":"previousSibling"];return a===n},gD=e=>ve(Cr(p0(ye.fromDom(e)),(n,s)=>`${s}: ${n};`),(n,s)=>n+s,""),MI=(e,n,s,a,f)=>{const g=e.dom,y=e.selection.getRng(),C=s.parentNode;if(s===e.getBody()||!C)return;lq(s)&&(f="LI");const A=mD(a)?gD(a):void 0;let M=mD(a)&&A?n(f,{style:gD(a)}):n(f);if(JS(s,a,!0)&&JS(s,a,!1))if(hD(s,"LI")){const I=XS(s);g.insertAfter(M,I),aq(s)?g.remove(I):g.remove(s)}else g.replace(M,s);else if(JS(s,a,!0))hD(s,"LI")?(g.insertAfter(M,XS(s)),M.appendChild(g.doc.createTextNode(" ")),M.appendChild(s)):C.insertBefore(M,s),g.remove(a);else if(JS(s,a,!1))g.insertAfter(M,XS(s)),g.remove(a);else{s=XS(s);const I=y.cloneRange();I.setStartAfter(a),I.setEndAfter(s);const L=I.extractContents();if(f==="LI"&&iq(L,"LI")){const W=Me(tt(M.children,ye.fromDom),We(zr("br")));M=L.firstChild,g.insertAfter(L,s),ue(W,re=>Mm(ye.fromDom(M),re)),A&&M.setAttribute("style",A)}else g.insertAfter(L,s),g.insertAfter(M,s);g.remove(a)}mr(e,M)},cq=e=>{ue(Rd(ye.fromDom(e),Ao),n=>{const s=n.dom;s.nodeValue=rc(s.data)})},uq=(e,n)=>{const s=e.dom.getParent(n,"ol,ul,dl");return s!==null&&e.dom.getContentEditableParent(s)==="false"},zee=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),Dv=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,pD=(e,n)=>ae(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",dq=(e,n,s)=>{var a;const f=[];if(!s)return;let g=s;for(;g=g.firstChild;){if(e.isBlock(g))return;wn(g)&&!n[g.nodeName.toLowerCase()]&&f.push(g)}let y=f.length;for(;y--;)g=f[y],(!g.hasChildNodes()||g.firstChild===g.lastChild&&((a=g.firstChild)===null||a===void 0?void 0:a.nodeValue)===""||zee(e,g))&&e.remove(g)},bD=(e,n,s)=>Vt(n)?e?s===1&&n.data.charAt(s-1)===Xi?0:s:s===n.data.length-1&&n.data.charAt(s)===Xi?n.data.length:s:s,RI=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,bD(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,bD(!1,e.endContainer,e.endOffset)),n},fq=e=>{let n=e;do Vt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},PI=(e,n,s,a,f)=>{var g,y;const C=e.dom,A=(g=Ag(C,a))!==null&&g!==void 0?g:C.getRoot();let M=C.getParent(a,C.isBlock);if(!M||!pD(C,M)){if(M=M||A,!M.hasChildNodes()){const re=C.create(n);return Eg(e,re),M.appendChild(re),s.setStart(re,0),s.setEnd(re,0),re}let I=a;for(;I&&I.parentNode!==M;)I=I.parentNode;let L;for(;I&&!C.isBlock(I);)L=I,I=I.previousSibling;const W=(y=L==null?void 0:L.parentElement)===null||y===void 0?void 0:y.nodeName;if(L&&W&&e.schema.isValidChild(W,n.toLowerCase())){const re=L.parentNode,de=C.create(n);for(Eg(e,de),re.insertBefore(de,L),I=L;I&&!C.isBlock(I);){const te=I.nextSibling;de.appendChild(I),I=te}s.setStart(a,f),s.setEnd(a,f)}}return a},hq=(e,n)=>{n.normalize();const s=n.lastChild;(!s||wn(s)&&/^(left|right)$/gi.test(e.getStyle(s,"float",!0)))&&e.add(n,"br")},mq=(e,n)=>{const s=l3(e);return Ue(n)?!1:Z(s)?Je(Lt.explode(s),n.nodeName.toLowerCase()):s},NI={insert:(e,n)=>{let s,a,f,g,y=!1;const C=e.dom,A=e.schema,M=A.getNonEmptyElements(),I=e.selection.getRng(),L=Ia(e),W=ye.fromDom(I.startContainer),re=Tf(W,I.startOffset),de=re.exists(Mt=>At(Mt)&&!Eo(Mt)),te=I.collapsed&&de,fe=(Mt,mn)=>fD(e,s,Zt,Nt,G8(e),Mt,mn),Fe=Mt=>{const mn=bD(Mt,s,a);if(Vt(s)&&(Mt?mn>0:mn<s.data.length))return!1;if(s.parentNode===Zt&&y&&!Mt||Mt&&wn(s)&&s===Zt.firstChild)return!0;if(Dv(s,"TABLE")||Dv(s,"HR"))return y&&!Mt||!y&&Mt;const Rn=new tr(s,Zt);Vt(s)&&(Mt&&mn===0?Rn.prev():!Mt&&mn===s.data.length&&Rn.next());let Bo;for(;Bo=Rn.current();){if(wn(Bo)){if(!Bo.getAttribute("data-mce-bogus")){const Mo=Bo.nodeName.toLowerCase();if(M[Mo]&&Mo!=="br")return!1}}else if(Vt(Bo)&&!Th(Bo.data))return!1;Mt?Rn.prev():Rn.next()}return!0},ze=()=>{let Mt;return/^(H[1-6]|PRE|FIGURE)$/.test(f)&&on!=="HGROUP"?Mt=fe(L):Mt=fe(),mq(e,g)&&pD(C,g)&&C.isEmpty(Zt,void 0,{includeZwsp:!0})?Mt=C.split(g,Zt):C.insertAfter(Mt,Zt),mr(e,Mt),Mt};mb(C,I).each(Mt=>{I.setStart(Mt.startContainer,Mt.startOffset),I.setEnd(Mt.endContainer,Mt.endOffset)}),s=I.startContainer,a=I.startOffset;const Ve=!!(n&&n.shiftKey),nt=!!(n&&n.ctrlKey);wn(s)&&s.hasChildNodes()&&!te&&(y=a>s.childNodes.length-1,s=s.childNodes[Math.min(a,s.childNodes.length-1)]||s,y&&Vt(s)?a=s.data.length:a=0);const Nt=Ag(C,s);if(!Nt||uq(e,s))return;Ve||(s=PI(e,L,I,s,a));let Zt=C.getParent(s,C.isBlock)||C.getRoot();g=ae(Zt==null?void 0:Zt.parentNode)?C.getParent(Zt.parentNode,C.isBlock):null,f=Zt?Zt.nodeName.toUpperCase():"";const on=g?g.nodeName.toUpperCase():"";if(on==="LI"&&!nt){const Mt=g;Zt=Mt,g=Mt.parentNode,f=on}if(wn(g)&&sq(e,Ve,Zt))return rq(e,fe,Zt);if(/^(LI|DT|DD)$/.test(f)&&wn(g)&&C.isEmpty(Zt)){MI(e,fe,g,Zt,L);return}if(!te&&(Zt===e.getBody()||!pD(C,Zt)))return;const vt=Zt.parentNode;let ut;if(te)ut=fe(L),re.fold(()=>{Jr(W,ye.fromDom(ut))},Mt=>{Pa(Mt,ye.fromDom(ut))}),e.selection.setCursorLocation(ut,0);else if(ap(Zt))ut=Eh(Zt),C.isEmpty(Zt)&&dD(Zt),Eg(e,ut),mr(e,ut);else if(Fe(!1))ut=ze();else if(Fe(!0)&&vt){ut=vt.insertBefore(fe(),Zt);const Mt=Fy(ye.fromDom(I.startContainer))&&I.collapsed;mr(e,Dv(Zt,"HR")||Mt?ut:Zt)}else{const Mt=RI(I).cloneRange();Mt.setEndAfter(Zt);const mn=Mt.extractContents();cq(mn),fq(mn),ut=mn.firstChild,C.insertAfter(mn,Zt),dq(C,M,ut),hq(C,Zt),C.isEmpty(Zt)&&dD(Zt),ut.normalize(),C.isEmpty(ut)?(C.remove(ut),ze()):(Eg(e,ut),mr(e,ut))}C.setAttrib(ut,"id",""),e.dispatch("NewBlock",{newBlock:ut})},fakeEventName:"insertParagraph"},gq=(e,n,s)=>{const a=new tr(n,s);let f;const g=e.getNonEmptyElements();for(;f=a.next();)if(g[f.nodeName.toLowerCase()]||Vt(f)&&f.length>0)return!0;return!1},BI=(e,n,s)=>{const a=e.dom.createRng();s?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),e.selection.setRng(a),pb(e,a)},pq=(e,n)=>{const s=e.selection,a=e.dom,f=s.getRng();let g,y=!1;mb(a,f).each(re=>{f.setStart(re.startContainer,re.startOffset),f.setEnd(re.endContainer,re.endOffset)});let C=f.startOffset,A=f.startContainer;if(wn(A)&&A.hasChildNodes()){const re=C>A.childNodes.length-1;A=A.childNodes[Math.min(C,A.childNodes.length-1)]||A,re&&Vt(A)?C=A.data.length:C=0}let M=a.getParent(A,a.isBlock);const I=M&&M.parentNode?a.getParent(M.parentNode,a.isBlock):null,L=I?I.nodeName.toUpperCase():"",W=!!(n&&n.ctrlKey);L==="LI"&&!W&&(M=I),Vt(A)&&C>=A.data.length&&(gq(e.schema,A,M||a.getRoot())||(g=a.create("br"),f.insertNode(g),f.setStartAfter(g),f.setEndAfter(g),y=!0)),g=a.create("br"),pk(a,f,g),BI(e,g,y),e.undoManager.add()},bq=(e,n)=>{const s=ye.fromTag("br");Pa(ye.fromDom(n),s),e.undoManager.add()},vq=(e,n)=>{QS(e.getBody(),n)||Vu(ye.fromDom(n),ye.fromTag("br"));const s=ye.fromTag("br");Vu(ye.fromDom(n),s),BI(e,s.dom,!1),e.undoManager.add()},yq=e=>Zs(e.getNode()),QS=(e,n)=>yq(bt.after(n))?!0:Qa(e,bt.after(n)).map(s=>Zs(s.getNode())).getOr(!1),FI=e=>e&&e.nodeName==="A"&&"href"in e,wq=e=>e.fold(ce,FI,FI,ce),vD=e=>{const n=Pe(dg,e),s=bt.fromRangeStart(e.selection.getRng());return Qi(n,e.getBody(),s).filter(wq)},yD=(e,n)=>{n.fold(ge,Pe(bq,e),Pe(vq,e),ge)},xq={insert:(e,n)=>{const s=vD(e);s.isSome()?s.each(Pe(yD,e)):pq(e,n)},fakeEventName:"insertLineBreak"},Sq=(e,n)=>Su(e).filter(s=>n.length>0&&Ol(ye.fromDom(s),n)).isSome(),Cq=e=>Sq(e,q8(e)),kq=e=>Sq(e,Rk(e)),Hc=td.generate([{br:[]},{block:[]},{none:[]}]),Aq=(e,n)=>kq(e),Cu=e=>(n,s)=>OI(n)===e,II=(e,n)=>(s,a)=>TI(s)===e.toUpperCase()===n,LI=e=>{const n=Ag(e.dom,e.selection.getStart());return Ue(n)},_v=e=>II("pre",e),Eq=()=>II("summary",!0),eC=e=>(n,s)=>j8(n)===e,Tq=(e,n)=>Cq(e),tC=(e,n)=>n,Oq=e=>{const n=Ia(e),s=Ag(e.dom,e.selection.getStart());return ae(s)&&e.schema.isValidChild(s.nodeName,n)},Dq=e=>{const n=e.selection.getRng(),s=ye.fromDom(n.startContainer),f=Tf(s,n.startOffset).map(g=>At(g)&&!Eo(g));return n.collapsed&&f.getOr(!0)},Hl=(e,n)=>(s,a)=>ve(e,(g,y)=>g&&y(s,a),!0)?V.some(n):V.none(),$I=(e,n)=>_B([Hl([Aq],Hc.none()),Hl([_v(!0),LI],Hc.none()),Hl([Eq()],Hc.br()),Hl([_v(!0),eC(!1),tC],Hc.br()),Hl([_v(!0),eC(!1)],Hc.block()),Hl([_v(!0),eC(!0),tC],Hc.block()),Hl([_v(!0),eC(!0)],Hc.br()),Hl([Cu(!0),tC],Hc.br()),Hl([Cu(!0)],Hc.block()),Hl([Tq],Hc.br()),Hl([tC],Hc.br()),Hl([Oq],Hc.block()),Hl([Dq],Hc.block())],[e,!!(n&&n.shiftKey)]).getOr(Hc.none()),Tg=(e,n,s)=>{n.selection.isCollapsed()||nE(n),!(ae(s)&&KS(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,s),ae(s)&&Ov(n,e.fakeEventName))},HI=(e,n)=>{const s=()=>Tg(xq,e,n),a=()=>Tg(NI,e,n),f=$I(e,n);switch(Z8(e)){case"linebreak":f.fold(s,s,ge);break;case"block":f.fold(a,a,ge);break;case"invert":f.fold(a,s,ge);break;default:f.fold(s,a,ge);break}},VI=Ms(),_q=VI.os.isiOS()&&VI.browser.isSafari(),zI=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),$z(e.undoManager),e.undoManager.transact(()=>{HI(e,n)}))},Mq=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(Vt(n)){const s=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,a=n.data.charAt(e.startOffset-1);return s.test(a)}else return!1},UI=e=>{let n=V.none();const s=f=>{n=V.some(f.selection.getBookmark()),f.undoManager.add()},a=(f,g)=>{f.undoManager.undo(),n.fold(ge,y=>f.selection.moveToBookmark(y)),zI(f,g),n=V.none()};e.on("keydown",f=>{f.keyCode===hn.ENTER&&(_q&&Mq(e.selection.getRng())?s(e):zI(e,f))}),e.on("keyup",f=>{f.keyCode===hn.ENTER&&n.each(()=>a(e,f))})},Rq=(e,n,s)=>{const a=sn.os.isMacOS()||sn.os.isiOS();nm([{keyCode:hn.END,action:so(BS,e,!0)},{keyCode:hn.HOME,action:so(BS,e,!1)},...a?[]:[{keyCode:hn.HOME,action:so(FS,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:hn.END,action:so(FS,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:hn.END,action:so(EF,e,!0)},{keyCode:hn.HOME,action:so(EF,e,!1)},{keyCode:hn.END,action:so(_S,e,!0,n)},{keyCode:hn.HOME,action:so(_S,e,!1,n)}],s).each(f=>{s.preventDefault()})},WI=(e,n)=>{e.on("keydown",s=>{s.isDefaultPrevented()||Rq(e,n,s)})},jI=e=>{e.on("input",n=>{n.isComposing||Q9(e)})},Pq=Ms(),Nq=(e,n,s)=>{nm([{keyCode:hn.PAGE_UP,action:so(_S,e,!1,n)},{keyCode:hn.PAGE_DOWN,action:so(_S,e,!0,n)}],s)},nC=e=>e.stopImmediatePropagation(),ZI=e=>e.keyCode===hn.PAGE_UP||e.keyCode===hn.PAGE_DOWN,qI=(e,n,s)=>{s&&!e.get()?n.on("NodeChange",nC,!0):!s&&e.get()&&n.off("NodeChange",nC),e.set(s)},oC=(e,n)=>{if(Pq.os.isMacOS())return;const s=jr(!1);e.on("keydown",a=>{ZI(a)&&qI(s,e,!0)}),e.on("keyup",a=>{a.isDefaultPrevented()||Nq(e,n,a),ZI(a)&&s.get()&&(qI(s,e,!1),e.nodeChanged())})},Bq=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||Bt(n.getTargetRanges(),s=>!K4(e.dom,s)))&&n.preventDefault()})},sC=(e,n)=>{const s=n.container(),a=n.offset();return Vt(s)?(s.insertData(a,e),V.some(bt(s,a+e.length))):Bw(n).map(f=>{const g=ye.fromText(e);return n.isAtEnd()?Vu(f,g):Pa(f,g),bt(g.dom,e.length)})},rC=Pe(sC,ws),wD=Pe(sC," "),Fq=(e,n,s)=>ER(e,n,s)?rC(n):wD(n),jee=e=>n=>n.fold(s=>gl(e.dom,bt.before(s)),s=>La(s),s=>lu(s),s=>Qa(e.dom,bt.after(s))),sm=(e,n,s)=>a=>ER(e,a,s)?rC(n):wD(n),GI=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},Iq=(e,n)=>e.isEditable(e.getParent(n,"summary")),Lq=e=>{const n=bt.fromRangeStart(e.selection.getRng()),s=ye.fromDom(e.getBody());if(e.selection.isCollapsed()){const a=Pe(dg,e),f=bt.fromRangeStart(e.selection.getRng());return Qi(a,e.getBody(),f).bind(jee(s)).map(g=>()=>sm(s,n,e.schema)(g).each(GI(e)))}else return V.none()},iC=e=>{const n=()=>{const s=ye.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const a=bt.fromRangeStart(e.selection.getRng());Fq(s,a,e.schema).each(GI(e))};return es(sn.browser.isFirefox()&&e.selection.isEditable()&&Iq(e.dom,e.selection.getRng().startContainer),n)},KI=(e,n)=>{BO([{keyCode:hn.SPACEBAR,action:so(Lq,e)},{keyCode:hn.SPACEBAR,action:so(iC,e)}],n).each(s=>{n.preventDefault(),KS(e,"insertText",{data:" "}).isDefaultPrevented()||(s(),Ov(e,"insertText",{data:" "}))})},YI=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||KI(e,n)})},$q=e=>R7(e)?[{keyCode:hn.TAB,action:so(ai,e,!0)},{keyCode:hn.TAB,shiftKey:!0,action:so(ai,e,!1)}]:[],XI=(e,n)=>{nm([...$q(e)],n).each(s=>{n.preventDefault()})},Hq=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||XI(e,n)})},Vq=e=>{if(e.addShortcut("Meta+P","","mcePrint"),UZ(e),ah(e))return jr(null);{const n=tj(e);return Bq(e),Dee(e),rZ(e,n),Vee(e,n),UI(e),YI(e),jI(e),Hq(e),WI(e,n),oC(e,n),n}};class zq{constructor(n){this.lastPath=[],this.editor=n;let s;const a=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",f=>{const g=n.selection.getRng(),y={startContainer:g.startContainer,startOffset:g.startOffset,endContainer:g.endContainer,endOffset:g.endOffset};(f.type==="nodechange"||!eh(y,s))&&n.dispatch("SelectionChange"),s=y}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const f=n.selection.getStart(!0);f&&$w(n)&&!a.isSameElementPath(f)&&n.dom.isChildOf(f,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",f=>{!f.isDefaultPrevented()&&$w(n)&&(n.selection.getNode().nodeName==="IMG"?pc.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const s=this.editor.selection;let a;if(this.editor.initialized&&s&&!Ik(this.editor)&&!this.editor.mode.isReadOnly()){const f=this.editor.getBody();a=s.getStart(!0)||f,(a.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(a,f))&&(a=f);const g=[];this.editor.dom.getParent(a,y=>y===f?!0:(g.push(y),!1)),this.editor.dispatch("NodeChange",Ot(ie({},n),{element:a,parents:g}))}}isSameElementPath(n){let s;const a=this.editor,f=Kn(a.dom.getParents(n,Ze,a.getBody()));if(f.length===this.lastPath.length){for(s=f.length;s>=0&&f[s]===this.lastPath[s];s--);if(s===-1)return this.lastPath=f,!0}return this.lastPath=f,!1}}const xD=xp("image"),SD=e=>{const n=e;return V.from(n[xD])},Uq=(e,n)=>{const s=e;s[xD]=n},Mv=xp("event"),JI=e=>{const n=e;return V.from(n[Mv])},Og=e=>n=>{const s=n;s[Mv]=e},QI=(e,n)=>Og(n)(e),CD=Og(0),Wq=Og(2),jq=Og(1),eL=(e=>n=>{const s=n;return V.from(s[Mv]).exists(a=>a===e)})(0),Zq=()=>Object.freeze({length:0,item:e=>null}),AD=xp("mode"),tL=e=>{const n=e;return V.from(n[AD])},aC=e=>n=>{const s=n;s[AD]=e},nL=(e,n)=>aC(n)(e),oL=aC(0),ED=aC(2),qq=aC(1),TD=e=>n=>{const s=n;return V.from(s[AD]).exists(a=>a===e)},O1=TD(0),OD=TD(1),Gq=(e,n)=>Ot(ie({},n),{get length(){return n.length},add:(s,a)=>{if(O1(e))if(Z(s)){if(!$e(a))return n.add(s,a)}else return n.add(s);return null},remove:s=>{O1(e)&&n.remove(s)},clear:()=>{O1(e)&&n.clear()}}),Kq=["none","copy","link","move"],Yq=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],DD=()=>{const e=new window.DataTransfer;let n="move",s="all";const a={get dropEffect(){return n},set dropEffect(f){Je(Kq,f)&&(n=f)},get effectAllowed(){return s},set effectAllowed(f){eL(a)&&Je(Yq,f)&&(s=f)},get items(){return Gq(a,e.items)},get files(){return OD(a)?Zq():e.files},get types(){return e.types},setDragImage:(f,g,y)=>{O1(a)&&(Uq(a,{image:f,x:g,y}),e.setDragImage(f,g,y))},getData:f=>OD(a)?"":e.getData(f),setData:(f,g)=>{O1(a)&&e.setData(f,g)},clearData:f=>{O1(a)&&e.clearData(f)}};return oL(a),a},Xq=e=>{const n=DD(),s=tL(e);return ED(e),CD(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,SD(e).each(a=>n.setDragImage(a.image,a.x,a.y)),ue(e.types,a=>{a!=="Files"&&n.setData(a,e.getData(a))}),ue(e.files,a=>n.items.add(a)),JI(e).each(a=>{QI(n,a)}),s.each(a=>{nL(e,a),nL(n,a)}),n},D1=e=>{const n=e.getData("text/html");return n===""?V.none():V.some(n)},sL=(e,n)=>e.setData("text/html",n),rL="x-tinymce/html",Rv=he(rL),_D="<!-- "+rL+" -->",Jq=e=>_D+e,Qq=e=>e.replace(_D,""),MD=e=>e.indexOf(_D)!==-1,eG=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),tG=(e,n)=>{let s="<"+e;const a=Cr(n,(f,g)=>g+'="'+Dh.encodeAllRaw(f)+'"');return a.length&&(s+=" "+a.join(" ")),s+">"},Zee=(e,n,s)=>{const a=e.split(/\n\n/),f=tG(n,s),g="</"+n+">",y=tt(a,A=>A.split(/\n/).join("<br />")),C=A=>f+A+g;return y.length===1?y[0]:tt(y,C).join("")},Pv="%MCEPASTEBIN%",nG=(e,n)=>{const{dom:s,selection:a}=e,f=e.getBody();n.set(a.getRng());const g=s.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Pv);sn.browser.isFirefox()&&s.setStyle(g,"left",s.getStyle(f,"direction",!0)==="rtl"?65535:-65535),s.bind(g,"beforedeactivate focusin focusout",y=>{y.stopPropagation()}),g.focus(),a.select(g,!0)},oG=(e,n)=>{const s=e.dom;if(RD(e)){let a;const f=n.get();for(;a=RD(e);)s.remove(a),s.unbind(a);f&&e.selection.setRng(f)}n.set(null)},RD=e=>e.dom.get("mcepastebin"),sG=e=>ae(e)&&e.id==="mcepastebin",rG=e=>{const n=e.dom,s=(y,C)=>{y.appendChild(C),n.remove(C,!0)},[a,...f]=Me(e.getBody().childNodes,sG);ue(f,y=>{s(a,y)});const g=n.select("div[id=mcepastebin]",a);for(let y=g.length-1;y>=0;y--){const C=n.create("div");a.insertBefore(C,g[y]),s(C,g[y])}return a?a.innerHTML:""},iL=e=>e===Pv,iG=e=>{const n=jr(null);return{create:()=>nG(e,n),remove:()=>oG(e,n),getEl:()=>RD(e),getHtml:()=>rG(e),getLastRng:n.get}},aL=(e,n)=>(Lt.each(n,s=>{le(s,RegExp)?e=e.replace(s,""):e=e.replace(s[0],s[1])}),e),aG=e=>{const n=Hf(),s=bu({},n);let a="";const f=n.getVoidElements(),g=Lt.makeMap("script noscript style textarea video audio iframe object"," "),y=n.getBlockElements(),C=A=>{const M=A.name,I=A;if(M==="br"){a+=`
`;return}if(M!=="wbr"){if(f[M]&&(a+=" "),g[M]){a+=" ";return}if(A.type===3&&(a+=A.value),!(A.name in n.getVoidElements())){let L=A.firstChild;if(L)do C(L);while(L=L.next)}y[M]&&I.next&&(a+=`
`,M==="p"&&(a+=`
`))}};return e=aL(e,[/<!\[[^\]]+\]>/g]),C(s.parse(e)),a},lL=e=>(e=aL(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(s,a,f)=>!a&&!f?" ":ws],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),lG=e=>{let n=0;return()=>e+n++},cG=e=>{const n=e.toLowerCase(),s={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Lt.hasOwn(s,n)?"image/"+s[n]:"image/"+n},uG=(e,n)=>{const s=bu({sanitize:Tp(e),sandbox_iframes:_w(e)},e.schema);s.addNodeFilter("meta",f=>{Lt.each(f,g=>{g.remove()})});const a=s.parse(n,{forced_root_block:!1,isRootContent:!0});return Vh({validate:!0},e.schema).serialize(a)},Hs=(e,n)=>({content:e,cancelled:n}),dG=(e,n,s)=>{const a=e.dom.create("div",{style:"display:none"},n),f=wH(e,a,s);return Hs(f.node.innerHTML,f.isDefaultPrevented())},cL=(e,n,s)=>{const a=yH(e,n,s),f=uG(e,a.content);return e.hasEventListeners("PastePostProcess")&&!a.isDefaultPrevented()?dG(e,f,s):Hs(f,a.isDefaultPrevented())},fG=(e,n,s)=>cL(e,n,s),Nv=(e,n)=>(e.insertContent(n,{merge:y7(e),paste:!0}),!0),lC=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),hG=(e,n)=>lC(n)&&Bt(T3(e),s=>Xo(n.toLowerCase(),`.${s.toLowerCase()}`)),mG=(e,n,s)=>(e.undoManager.extra(()=>{s(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),uL=(e,n,s)=>(e.undoManager.extra(()=>{s(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),PD=(e,n,s)=>!e.selection.isCollapsed()&&lC(n)?uL(e,n,s):!1,gG=(e,n,s)=>hG(e,n)?mG(e,n,s):!1,pG=(e,n)=>{Lt.each([PD,gG,Nv],s=>!s(e,n,Nv))},bG=(e,n,s)=>{s||!w7(e)?Nv(e,n):pG(e,n)},dL=lG("mceclip"),vG=e=>{const n=DD();return sL(n,e),ED(n),n},fL=(e,n,s,a,f)=>{const g=fG(e,n,s);if(!g.cancelled){const y=g.content,C=()=>bG(e,y,a);f?KS(e,"insertFromPaste",{dataTransfer:vG(y)}).isDefaultPrevented()||(C(),Ov(e,"insertFromPaste")):C()}},fh=(e,n,s,a)=>{const f=s||MD(n);fL(e,Qq(n),f,!1,a)},ND=(e,n,s)=>{const a=e.dom.encode(n).replace(/\r\n/g,`
`),f=up(a,KQ(e)),g=Zee(f,Ia(e),q0(e));fL(e,g,!1,!0,s)},Dg=e=>{const n={};if(e&&e.types)for(let s=0;s<e.types.length;s++){const a=e.types[s];try{n[a]=e.getData(a)}catch(f){n[a]=""}}return n},ku=(e,n)=>n in e&&e[n].length>0,hL=e=>ku(e,"text/html")||ku(e,"text/plain"),yG=(e,n)=>{const s=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ae(s)?e.dom.encode(s[1]):void 0},_1=(e,n,s,a)=>{const f=dL(),g=G0(e)&&ae(s.name),y=g?yG(e,s.name):f,C=g?s.name:void 0,A=n.create(f,s,a,y,C);return n.add(A),A},wG=(e,n)=>{Ux(n.uri).each(({data:s,type:a,base64Encoded:f})=>{const g=f?s:btoa(s),y=n.file,C=e.editorUpload.blobCache,A=C.getByData(g,a),M=A!=null?A:_1(e,C,y,g);fh(e,`<img src="${M.blobUri()}">`,!1,!0)})},BD=e=>e.type==="paste",xG=e=>Promise.all(tt(e,n=>oz(n).then(s=>({file:n,uri:s})))),mL=e=>{const n=T3(e);return s=>Vn(s.type,"image/")&&Bt(n,a=>cG(a)===s.type)},gL=(e,n)=>{const s=n.items?On(oo(n.items),f=>f.kind==="file"?[f.getAsFile()]:[]):[],a=n.files?oo(n.files):[];return Me(s.length>0?s:a,mL(e))},cC=(e,n,s)=>{const a=BD(n)?n.clipboardData:n.dataTransfer;if(Dw(e)&&a){const f=gL(e,a);if(f.length>0)return n.preventDefault(),xG(f).then(g=>{s&&e.selection.setRng(s),ue(g,y=>{wG(e,y)})}),!0}return!1},pL=e=>{var n,s;return sn.os.isAndroid()&&((s=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||s===void 0?void 0:s.length)===0},SG=e=>hn.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,FD=(e,n,s,a,f)=>{let g=lL(s);const y=ku(n,Rv())||MD(s),C=!y&&eG(g),A=lC(g);(iL(g)||!g.length||C&&!A)&&(a=!0),(a||A)&&(ku(n,"text/plain")&&C?g=n["text/plain"]:g=aG(g)),!iL(g)&&(a?ND(e,g,f):fh(e,g,y,f))},bL=(e,n,s)=>{let a;const f=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",g=>{SG(g)&&!g.isDefaultPrevented()&&(a=g.shiftKey&&g.keyCode===86)}),e.on("paste",g=>{if(g.isDefaultPrevented()||pL(g))return;const y=s.get()==="text"||a;a=!1;const C=Dg(g.clipboardData);!hL(C)&&cC(e,g,f())||(ku(C,"text/html")?(g.preventDefault(),FD(e,C,C["text/html"],y,!0)):ku(C,"text/plain")&&ku(C,"text/uri-list")?(g.preventDefault(),FD(e,C,C["text/plain"],y,!0)):(n.create(),pc.setEditorTimeout(e,()=>{const A=n.getHtml();n.remove(),FD(e,C,A,y,!1)},0)))})},CG=e=>{const n=f=>Vn(f,"webkit-fake-url"),s=f=>Vn(f,"data:"),a=f=>{var g;return((g=f.data)===null||g===void 0?void 0:g.paste)===!0};e.parser.addNodeFilter("img",(f,g,y)=>{if(!Dw(e)&&a(y))for(const C of f){const A=C.attr("src");Z(A)&&!C.attr("data-mce-object")&&A!==sn.transparentSrc&&(n(A)||!$k(e)&&s(A))&&C.remove()}})},vL=(e,n,s)=>{bL(e,n,s),CG(e)},ID=(e,n)=>{n.get()==="text"?(n.set("html"),b4(e,!1)):(n.set("text"),b4(e,!0)),e.focus()},yL=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{ID(e,n)}),e.addCommand("mceInsertClipboardContent",(s,a)=>{a.html&&fh(e,a.html,a.internal,!1),a.text&&ND(e,a.text,!1)})},kG=(e,n,s)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",s),e.setData(Rv(),n),!0}catch(a){return!1}else return!1},wL=(e,n,s,a)=>{kG(e.clipboardData,n.html,n.text)?(e.preventDefault(),a()):s(n.html,a)},xL=e=>(n,s)=>{const{dom:a,selection:f}=e,g=a.create("div",{contenteditable:"false","data-mce-bogus":"all"}),y=a.create("div",{contenteditable:"true"},n);a.setStyles(g,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),g.appendChild(y),a.add(e.getBody(),g);const C=f.getRng();y.focus();const A=a.createRng();A.selectNodeContents(y),f.setRng(A),pc.setEditorTimeout(e,()=>{f.setRng(C),a.remove(g),s()},0)},LD=e=>({html:Jq(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),$D=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),SL=e=>!e.selection.isCollapsed()||$D(e),CL=e=>n=>{!n.isDefaultPrevented()&&SL(e)&&e.selection.isEditable()&&wL(n,LD(e),xL(e),()=>{if(sn.browser.isChromium()||sn.browser.isFirefox()){const s=e.selection.getRng();pc.setEditorTimeout(e,()=>{e.selection.setRng(s),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},kL=e=>n=>{!n.isDefaultPrevented()&&SL(e)&&wL(n,LD(e),xL(e),ge)},AG=e=>{e.on("cut",CL(e)),e.on("copy",kL(e))},HD=(e,n)=>{var s,a;return ig.getCaretRangeFromPoint((s=n.clientX)!==null&&s!==void 0?s:0,(a=n.clientY)!==null&&a!==void 0?a:0,e.getDoc())},EG=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},AL=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},TG=e=>Bt(e.files,n=>/^image\//.test(n.type)),OG=(e,n,s,a)=>{const f=e.getParent(s,y=>ns(n,y));if(!K(e.getParent(s,"summary")))return!0;if(f&&Bn(a,"text/html")){const y=new DOMParser().parseFromString(a["text/html"],"text/html").body;return!K(y.querySelector(f.nodeName.toLowerCase()))}else return!1},DG=e=>{e.on("input",n=>{const s=a=>K(a.querySelector("summary"));if(n.inputType==="deleteByDrag"){const a=Me(e.dom.select("details"),s);ue(a,f=>{Zs(f.firstChild)&&f.firstChild.remove();const g=e.dom.create("summary");g.appendChild(qu().dom),f.prepend(g)})}})},uC=(e,n)=>{p7(e)&&e.on("dragend dragover draggesture dragdrop drop drag",s=>{s.preventDefault(),s.stopPropagation()}),Dw(e)||e.on("drop",s=>{const a=s.dataTransfer;a&&TG(a)&&s.preventDefault()}),e.on("drop",s=>{if(s.isDefaultPrevented())return;const a=HD(e,s);if(Ue(a))return;const f=Dg(s.dataTransfer),g=ku(f,Rv());if((!hL(f)||EG(f))&&cC(e,s,a))return;const y=f[Rv()],C=y||f["text/html"]||f["text/plain"],A=OG(e.dom,e.schema,a.startContainer,f),M=n.get();M&&!A||C&&(s.preventDefault(),pc.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(y||M&&A)&&e.execCommand("Delete"),AL(e,a);const I=lL(C);f["text/html"]?fh(e,I,g,!0):ND(e,I,!0)})}))}),e.on("dragstart",s=>{n.set(!0)}),e.on("dragover dragend",s=>{Dw(e)&&!n.get()&&(s.preventDefault(),AL(e,HD(e,s))),s.type==="dragend"&&n.set(!1)}),DG(e)},_G=e=>{const n=f=>g=>{f(e,g)},s=b7(e);Oe(s)&&e.on("PastePreProcess",n(s));const a=k3(e);Oe(a)&&e.on("PastePostProcess",n(a))},EL=(e,n)=>{e.on("PastePreProcess",s=>{s.content=n(e,s.content,s.internal)})},MG=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,TL=e=>Lt.trim(e).replace(MG,B0).toLowerCase(),OL=(e,n,s)=>{const a=A3(e);if(s||a==="all"||!v7(e))return n;const f=a?a.split(/[, ]/):[];if(f&&a!=="none"){const g=e.dom,y=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(C,A,M,I)=>{const L=g.parseStyle(g.decode(M)),W={};for(let de=0;de<f.length;de++){const te=L[f[de]];let fe=te,Fe=g.getStyle(y,f[de],!0);/color/.test(f[de])&&(fe=TL(fe),Fe=TL(Fe)),Fe!==fe&&(W[f[de]]=te)}const re=g.serializeStyle(W,"span");return re?A+' style="'+re+'"'+I:A+I})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(g,y,C,A)=>y+' style="'+C+'"'+A),n},DL=e=>{(sn.browser.isChromium()||sn.browser.isSafari())&&EL(e,OL)},RG=e=>{const n=jr(!1),s=jr(x7(e)?"text":"html"),a=iG(e);DL(e),yL(e,s),_G(e),e.on("PreInit",()=>{AG(e),uC(e,n),vL(e,a,s)})},PG=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},NG=e=>{e.parser.addNodeFilter("details",n=>{const s=Y0(e);ue(n,a=>{s==="expanded"?a.attr("open","open"):s==="collapsed"&&a.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const s=P7(e);ue(n,a=>{s==="expanded"?a.attr("open","open"):s==="collapsed"&&a.attr("open",null)})})},BG=e=>{PG(e),NG(e)},FG=Zs,VD=Vt,IG=e=>ms(e.dom),LG=e=>hl(e.dom),_L=e=>n=>ys(ye.fromDom(e),n),$G=(e,n,s)=>fl(ye.fromDom(e),a=>LG(a)||s.isBlock(ts(a)),_L(n)).getOr(ye.fromDom(n)).dom,ML=(e,n)=>fl(ye.fromDom(e),IG,_L(n)),RL=(e,n,s)=>{const a=new tr(e,n),f=s?a.next.bind(a):a.prev.bind(a);let g=e;for(let y=s?e:f();y&&!FG(y);y=f())bi(y)&&(g=y);return g},HG=(e,n,s)=>{const f=bt.fromRangeStart(e).getNode(),g=$G(f,n,s),y=RL(f,g,!1),C=RL(f,g,!0),A=document.createRange();return ML(y,g).fold(()=>{VD(y)?A.setStart(y,0):A.setStartBefore(y)},M=>A.setStartBefore(M.dom)),ML(C,g).fold(()=>{VD(C)?A.setEnd(C,C.data.length):A.setEndAfter(C)},M=>A.setEndAfter(M.dom)),A},VG=e=>{const n=HG(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Jp(n))},PL=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),VG(e))})};var _g;(function(e){e.Before="before",e.After="after"})(_g||(_g={}));const zG=(e,n)=>Math.abs(e.left-n),UG=(e,n)=>Math.abs(e.right-n),WG=(e,n)=>e>=n.top&&e<=n.bottom,jG=(e,n)=>e.top<n.bottom&&e.bottom>n.top,ZG=(e,n)=>{const s=P8(e,n)/Math.min(e.height,n.height);return jG(e,n)&&s>.5},qG=(e,n)=>{const s=Me(e,a=>WG(n,a));return R8(s).fold(()=>[[],e],a=>{const{pass:f,fail:g}=Ne(e,y=>ZG(y,a));return[f,g]})},GG=(e,n)=>({node:e.node,position:zG(e,n)<UG(e,n)?_g.Before:_g.After}),dC=(e,n,s)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),fC=(e,n,s,a)=>{const f=L=>bi(L.node)?V.some(L):wn(L.node)?fC(oo(L.node.childNodes),n,s,!1):V.none(),g=(L,W,re)=>f(W).filter(de=>Math.abs(re(L,n,s)-re(de,n,s))<2&&Vt(de.node)),y=(L,W)=>{const re=pt(L,(de,te)=>W(de,n,s)-W(te,n,s));return ao(re,f).map(de=>a&&!Vt(de.node)&&re.length>1?g(de,re[1],W).getOr(de):de)},[C,A]=qG(UB(e),s),{pass:M,fail:I}=Ne(A,L=>L.top<s);return y(C,dC).orThunk(()=>y(I,GM)).orThunk(()=>y(M,GM))},KG=(e,n,s,a)=>{const f=(g,y)=>{const C=M=>wn(M)&&M.classList.contains("mce-drag-container"),A=Me(g.dom.childNodes,We(C));return y.fold(()=>fC(A,s,a,!0),M=>{const I=Me(A,L=>L!==M.dom);return fC(I,s,a,!0)}).orThunk(()=>(ys(g,e)?V.none():$u(g)).bind(I=>f(I,V.some(g))))};return f(n,V.none())},NL=(e,n,s)=>{const a=ye.fromDom(e),f=Lu(a),y=ye.fromPoint(f,n,s).filter(C=>Iu(a,C)).getOr(a);return KG(a,y,n,s)},zD=(e,n,s)=>NL(e,n,s).filter(a=>X0(a.node)).map(a=>GG(a,n)),hC=e=>{var n,s;const a=e.getBoundingClientRect(),f=e.ownerDocument,g=f.documentElement,y=f.defaultView;return{top:a.top+((n=y==null?void 0:y.scrollY)!==null&&n!==void 0?n:0)-g.clientTop,left:a.left+((s=y==null?void 0:y.scrollX)!==null&&s!==void 0?s:0)-g.clientLeft}},YG=e=>e.inline?hC(e.getBody()):{left:0,top:0},BL=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},XG=e=>{const n=e.getBody(),s=e.getDoc().documentElement,a={left:n.scrollLeft,top:n.scrollTop},f={left:n.scrollLeft||s.scrollLeft,top:n.scrollTop||s.scrollTop};return e.inline?a:f},FL=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const s=hC(e.getContentAreaContainer()),a=XG(e);return{left:n.pageX-s.left+a.left,top:n.pageY-s.top+a.top}}return{left:n.pageX,top:n.pageY}},JG=(e,n,s)=>({pageX:s.left-e.left+n.left,pageY:s.top-e.top+n.top}),IL=(e,n)=>JG(YG(e),BL(e),FL(e,n)),LL=e=>({target:e,srcElement:e}),QG=(e,n,s,a)=>ie(Ot(ie({},n),{dataTransfer:a,type:e}),LL(s)),eK=(e,n,s)=>{const a=yt("Function not supported on simulated event.");return ie({bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:a,initEvent:a,preventDefault:ge,stopImmediatePropagation:ge,stopPropagation:ge,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:a,initMouseEvent:a,getModifierState:a,dataTransfer:s},LL(n))},Bv=(e,n)=>{const s=Xq(e);return n==="dragstart"?(CD(s),oL(s)):n==="drop"?(Wq(s),ED(s)):(jq(s),qq(s)),s},tK=(e,n,s,a)=>{const f=Bv(s,e);return $e(a)?eK(e,n,f):QG(e,a,n,f)},mC=32,$L=100,gC=8,pC=16,HL=ms,nK=B8(HL,hl),oK=(e,n,s)=>HL(s)&&s!==n&&e.isEditable(s.parentElement),bC=(e,n,s)=>Ue(n)||n===s||e.dom.isChildOf(n,s)?!1:e.dom.isEditable(n),VL=(e,n,s,a)=>{const f=e.dom,g=n.cloneNode(!0);f.setStyles(g,{width:s,height:a}),f.setAttrib(g,"data-mce-selected",null);const y=f.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return f.setStyles(y,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:s,height:a}),f.setStyles(g,{margin:0,boxSizing:"border-box"}),y.appendChild(g),y},zL=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},vC=(e,n)=>s=>()=>{const a=e==="left"?s.scrollX:s.scrollY;s.scroll({[e]:a+n,behavior:"smooth"})},UL=vC("left",-mC),WL=vC("left",mC),sK=vC("top",-mC),jL=vC("top",mC),UD=(e,n,s,a,f,g,y,C,A,M,I,L)=>{let W=0,re=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+s>f&&(W=n.pageX+s-f),n.pageY+a>g&&(re=n.pageY+a-g),e.style.width=s-W+"px",e.style.height=a-re+"px";const de=A.clientHeight,te=A.clientWidth,fe=y+A.getBoundingClientRect().top,Fe=C+A.getBoundingClientRect().left;I.on(ze=>{ze.intervalId.clear(),ze.dragging&&L&&(y+gC>=de?ze.intervalId.set(jL(M)):y-gC<=0?ze.intervalId.set(sK(M)):C+gC>=te?ze.intervalId.set(WL(M)):C-gC<=0?ze.intervalId.set(UL(M)):fe+pC>=window.innerHeight?ze.intervalId.set(jL(window)):fe-pC<=0?ze.intervalId.set(sK(window)):Fe+pC>=window.innerWidth?ze.intervalId.set(WL(window)):Fe-pC<=0&&ze.intervalId.set(UL(window)))})},yC=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},wC=(e,n)=>{const s=e.getParent(n.parentNode,e.isBlock);yC(n),s&&s!==e.getRoot()&&e.isEmpty(s)&&Bd(ye.fromDom(s))},rK=e=>e.button===0,iK=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),ZL=(e,n)=>s=>{if(rK(s)){const a=ot(n.dom.getParents(s.target),nK).getOr(null);if(ae(a)&&oK(n.dom,n.getBody(),a)){const f=n.dom.getPos(a),g=n.getBody(),y=n.getDoc().documentElement;e.set({element:a,dataTransfer:DD(),dragging:!1,screenX:s.screenX,screenY:s.screenY,maxX:(n.inline?g.scrollWidth:y.offsetWidth)-2,maxY:(n.inline?g.scrollHeight:y.offsetHeight)-2,relX:s.pageX-f.x,relY:s.pageY-f.y,width:a.offsetWidth,height:a.offsetHeight,ghost:VL(n,a,a.offsetWidth,a.offsetHeight),intervalId:O8($L)})}}},aK=(e,n,s)=>{e._selectionOverrides.hideFakeCaret(),zD(e.getBody(),n,s).fold(()=>e.selection.placeCaretAt(n,s),a=>{const f=e._selectionOverrides.showCaret(1,a.node,a.position===_g.Before,!1);f?e.selection.setRng(f):e.selection.placeCaretAt(n,s)})},Mg=(e,n,s,a,f)=>{n==="dragstart"&&sL(a,e.dom.getOuterHTML(s));const g=tK(n,s,a,f);return e.dispatch(n,g)},qL=(e,n)=>{const s=cw((f,g)=>aK(n,f,g),0);n.on("remove",s.cancel);const a=e;return f=>e.on(g=>{const y=Math.max(Math.abs(f.screenX-g.screenX),Math.abs(f.screenY-g.screenY));if(!g.dragging&&y>10){const C=Mg(n,"dragstart",g.element,g.dataTransfer,f);if(ae(C.dataTransfer)&&(g.dataTransfer=C.dataTransfer),C.isDefaultPrevented())return;g.dragging=!0,n.focus()}if(g.dragging){const C=f.currentTarget===n.getDoc().documentElement,A=iK(g,IL(n,f));zL(g.ghost,n.getBody()),UD(g.ghost,A,g.width,g.height,g.maxX,g.maxY,f.clientY,f.clientX,n.getContentAreaContainer(),n.getWin(),a,C),s.throttle(f.clientX,f.clientY)}})},lK=e=>{const n=e.getSel();if(ae(n)){const a=n.getRangeAt(0).startContainer;return Vt(a)?a.parentNode:a}else return null},cK=(e,n)=>s=>{e.on(a=>{var f;if(a.intervalId.clear(),a.dragging){if(bC(n,lK(n.selection),a.element)){const g=(f=n.getDoc().elementFromPoint(s.clientX,s.clientY))!==null&&f!==void 0?f:n.getBody();Mg(n,"drop",g,a.dataTransfer,s).isDefaultPrevented()||n.undoManager.transact(()=>{wC(n.dom,a.element),D1(a.dataTransfer).each(C=>n.insertContent(C)),n._selectionOverrides.hideFakeCaret()})}Mg(n,"dragend",n.getBody(),a.dataTransfer,s)}}),dK(e)},WD=(e,n,s)=>{e.on(a=>{a.intervalId.clear(),a.dragging&&s.fold(()=>Mg(n,"dragend",a.element,a.dataTransfer),f=>Mg(n,"dragend",a.element,a.dataTransfer,f))}),dK(e)},uK=(e,n)=>s=>WD(e,n,V.some(s)),dK=e=>{e.on(n=>{n.intervalId.clear(),yC(n.ghost)}),e.clear()},fK=e=>{const n=Mh(),s=or.DOM,a=document,f=ZL(n,e),g=qL(n,e),y=cK(n,e),C=uK(n,e);e.on("mousedown",f),e.on("mousemove",g),e.on("mouseup",y),s.bind(a,"mousemove",g),s.bind(a,"mouseup",C),e.on("remove",()=>{s.unbind(a,"mousemove",g),s.unbind(a,"mouseup",C)}),e.on("keydown",A=>{A.keyCode===hn.ESC&&WD(n,e,V.none())})},hK=e=>{const n=f=>{if(!f.isDefaultPrevented()){const g=f.dataTransfer;g&&(Je(g.types,"Files")||g.files.length>0)&&(f.preventDefault(),f.type==="drop"&&cS(e,"Dropped file type is not supported"))}},s=f=>{rx(e,f.target)&&n(f)},a=()=>{const f=or.DOM,g=e.dom,y=document,C=e.inline?e.getBody():e.getDoc(),A=["drop","dragover"];ue(A,M=>{f.bind(y,M,s),g.bind(C,M,n)}),e.on("remove",()=>{ue(A,M=>{f.unbind(y,M,s),g.unbind(C,M,n)})})};e.on("init",()=>{pc.setEditorTimeout(e,a,0)})},mK=e=>{fK(e),Ow(e)&&hK(e)},GL=e=>{const n=cw(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const s=e.selection.getRng();if(s.collapsed){const a=xS(e,s,!1);e.selection.setRng(a)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},gK=e=>{e.on("init",()=>{e.on("focusin",n=>{const s=n.target;if(Qr(s)){const a=mg(e.getBody(),s),f=ms(a)?a:s;e.selection.getNode()!==f&&p1(e,f).each(g=>e.selection.setRng(g))}})})},M1=ms,KL=(e,n)=>mg(e.getBody(),n),pK=e=>{const n=e.selection,s=e.dom,a=e.getBody(),f=B3(e,a,s.isBlock,()=>Hh(e)),g="sel-"+s.uniqueId(),y="data-mce-selected";let C;const A=on=>ae(on)&&s.hasClass(on,"mce-offscreen-selection"),M=on=>on!==a&&(M1(on)||Qr(on))&&s.isChildOf(on,a)&&s.isEditable(on.parentNode),I=on=>{on&&n.setRng(on)},L=(on,vt,ut,Mt=!0)=>e.dispatch("ShowCaret",{target:vt,direction:on,before:ut}).isDefaultPrevented()?null:(Mt&&n.scrollIntoView(vt,on===-1),f.show(ut,vt)),W=on=>{on.hasAttribute("data-mce-caret")&&(Eh(on),n.scrollIntoView(on))},re=()=>{e.on("click",vt=>{s.isEditable(vt.target)||(vt.preventDefault(),e.focus())}),e.on("blur NewBlock",nt),e.on("ResizeWindow FullscreenStateChanged",f.reposition),e.on("tap",vt=>{const ut=vt.target,Mt=KL(e,ut);M1(Mt)?(vt.preventDefault(),p1(e,Mt).each(Ve)):M(ut)&&p1(e,ut).each(Ve)},!0),e.on("mousedown",vt=>{const ut=vt.target;if(ut!==a&&ut.nodeName!=="HTML"&&!s.isChildOf(ut,a)||!BU(e,vt.clientX,vt.clientY))return;nt(),Zt();const Mt=KL(e,ut);M1(Mt)?(vt.preventDefault(),p1(e,Mt).each(Ve)):zD(a,vt.clientX,vt.clientY).each(mn=>{vt.preventDefault();const Rn=L(1,mn.node,mn.position===_g.Before,!1);I(Rn),_f(Mt)?Mt.focus():e.getBody().focus()})}),e.on("keypress",vt=>{hn.modifierPressed(vt)||M1(n.getNode())&&vt.preventDefault()}),e.on("GetSelectionRange",vt=>{let ut=vt.range;if(C){if(!C.parentNode){C=null;return}ut=ut.cloneRange(),ut.selectNode(C),vt.range=ut}}),e.on("SetSelectionRange",vt=>{vt.range=fe(vt.range);const ut=Ve(vt.range,vt.forward);ut&&(vt.range=ut)});const on=vt=>wn(vt)&&vt.id==="mcepastebin";e.on("AfterSetSelectionRange",vt=>{const ut=vt.range,Mt=ut.startContainer.parentElement;!te(ut)&&!on(Mt)&&Zt(),A(Mt)||nt()}),mK(e),GL(e),gK(e)},de=on=>Ba(on)||$m(on)||A0(on),te=on=>de(on.startContainer)||de(on.endContainer),fe=on=>{const vt=e.schema.getVoidElements(),ut=s.createRng(),Mt=on.startContainer,mn=on.startOffset,Rn=on.endContainer,Bo=on.endOffset;return Bn(vt,Mt.nodeName.toLowerCase())?mn===0?ut.setStartBefore(Mt):ut.setStartAfter(Mt):ut.setStart(Mt,mn),Bn(vt,Rn.nodeName.toLowerCase())?Bo===0?ut.setEndBefore(Rn):ut.setEndAfter(Rn):ut.setEnd(Rn,Bo),ut},Fe=(on,vt)=>{const ut=ye.fromDom(e.getBody()),Mt=e.getDoc(),mn=Ch(ut,"#"+g).getOrThunk(()=>{const Mo=ye.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Mt);return Js(Mo,"id",g),Jr(ut,Mo),Mo}),Rn=s.createRng();Md(mn),Ls(mn,[ye.fromText(ws,Mt),ye.fromDom(vt),ye.fromText(ws,Mt)]),Rn.setStart(mn.dom.firstChild,1),Rn.setEnd(mn.dom.lastChild,0),kh(mn,{top:s.getPos(on,e.getBody()).y+"px"}),P4(mn);const Bo=n.getSel();return Bo&&(Bo.removeAllRanges(),Bo.addRange(Rn)),Rn},ze=on=>{const vt=on.cloneNode(!0),ut=e.dispatch("ObjectSelected",{target:on,targetClone:vt});if(ut.isDefaultPrevented())return null;const Mt=Fe(on,ut.targetClone),mn=ye.fromDom(on);return ue(ya(ye.fromDom(e.getBody()),`*[${y}]`),Rn=>{ys(mn,Rn)||Ir(Rn,y)}),s.getAttrib(on,y)||on.setAttribute(y,"1"),C=on,Zt(),Mt},Ve=(on,vt)=>{if(!on)return null;if(on.collapsed){if(!te(on)){const Rn=vt?1:-1,Bo=tb(Rn,a,on),Mo=Bo.getNode(!vt);if(ae(Mo)){if(X0(Mo))return L(Rn,Mo,vt?!Bo.isAtEnd():!1,!1);if(ic(Mo)&&ms(Mo.nextSibling)){const Vs=s.createRng();return Vs.setStart(Mo,0),Vs.setEnd(Mo,0),Vs}}const Ps=Bo.getNode(vt);if(ae(Ps)){if(X0(Ps))return L(Rn,Ps,vt?!1:!Bo.isAtEnd(),!1);if(ic(Ps)&&ms(Ps.previousSibling)){const Vs=s.createRng();return Vs.setStart(Ps,1),Vs.setEnd(Ps,1),Vs}}}return null}let ut=on.startContainer,Mt=on.startOffset;const mn=on.endOffset;if(Vt(ut)&&Mt===0&&M1(ut.parentNode)&&(ut=ut.parentNode,Mt=s.nodeIndex(ut),ut=ut.parentNode),!wn(ut))return null;if(mn===Mt+1&&ut===on.endContainer){const Rn=ut.childNodes[Mt];if(M(Rn))return ze(Rn)}return null},nt=()=>{C&&C.removeAttribute(y),Ch(ye.fromDom(e.getBody()),"#"+g).each(ks),C=null},Nt=()=>{f.destroy(),C=null},Zt=()=>{f.hide()};return ah(e)||re(),{showCaret:L,showBlockCaretContainer:W,hideFakeCaret:Zt,destroy:Nt}},bK=(e,n)=>{let s=n;for(let a=e.previousSibling;Vt(a);a=a.previousSibling)s+=a.data.length;return s},YL=(e,n,s,a,f)=>{if(Vt(s)&&(a<0||a>s.data.length))return[];const g=f&&Vt(s)?[bK(s,a)]:[a];let y=s;for(;y!==n&&y.parentNode;)g.push(e.nodeIndex(y,f)),y=y.parentNode;return y===n?g.reverse():[]},jD=(e,n,s,a,f,g,y=!1)=>{const C=YL(e,n,s,a,y),A=YL(e,n,f,g,y);return{start:C,end:A}},ZD=(e,n)=>{const s=n.slice(),a=s.pop();return ht(a)?ve(s,(g,y)=>g.bind(C=>V.from(C.childNodes[y])),V.some(e)).bind(g=>Vt(g)&&(a<0||a>g.data.length)?V.none():V.some({node:g,offset:a})):V.none()},vK=(e,n)=>ZD(e,n.start).bind(({node:s,offset:a})=>ZD(e,n.end).map(({node:f,offset:g})=>{const y=document.createRange();return y.setStart(s,a),y.setEnd(f,g),y})),yK=(e,n,s,a=!1)=>jD(e,n,s.startContainer,s.startOffset,s.endContainer,s.endOffset,a),Rg=(e,n,s)=>{if(n&&e.isEmpty(n)&&!s(n)){const a=n.parentNode;e.remove(n,Vt(n.firstChild)&&Th(n.firstChild.data)),Rg(e,a,s)}},xC=(e,n,s,a=!0)=>{const f=n.startContainer.parentNode,g=n.endContainer.parentNode;n.deleteContents(),a&&!s(n.startContainer)&&(Vt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),Vt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Rg(e,f,s),f!==g&&Rg(e,g,s))},Fv=(e,n)=>V.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),XL=(e,n,s)=>{const a=e.dynamicPatternsLookup({text:s,block:n});return Ot(ie({},e),{blockPatterns:Ek(a).concat(e.blockPatterns),inlinePatterns:s3(a).concat(e.inlinePatterns)})},JL=(e,n,s,a)=>{const f=e.createRng();return f.setStart(n,0),f.setEnd(s,a),f.toString()},wK=e=>/^\s[^\s]/.test(e),qD=(e,n,s)=>{zO(n,0,n).each(f=>{const g=f.container;zS(g,s.start.length,n).each(A=>{const M=e.createRng();M.setStart(g,0),M.setEnd(A.container,A.offset),xC(e,M,I=>I===n)});const y=ye.fromDom(g),C=Zu(y);wK(C)&&nc(y,C.slice(1))})},SC=(e,n)=>{const s=e.dom,a=n.pattern,f=vK(s.getRoot(),n.range).getOrDie("Unable to resolve path range"),g=(y,C)=>{const A=C.get(y);return Re(A)&&Wt(A).exists(M=>Bn(M,"block"))};return Fv(e,f).each(y=>{a.type==="block-format"?g(a.format,e.formatter)&&e.undoManager.transact(()=>{qD(e.dom,y,a),e.formatter.apply(a.format)}):a.type==="block-command"&&e.undoManager.transact(()=>{qD(e.dom,y,a),e.execCommand(a.cmd,!1,a.value)})}),!0},QL=e=>pt(e,(n,s)=>s.start.length-n.start.length),e5=(e,n)=>{const s=QL(e),a=n.replace(ws," ");return ot(s,f=>n.indexOf(f.start)===0||a.indexOf(f.start)===0)},xK=(e,n,s,a)=>{var f;const g=e.dom,y=Ia(e);if(!g.is(n,y))return[];const C=(f=n.textContent)!==null&&f!==void 0?f:"";return e5(s.blockPatterns,C).map(A=>Lt.trim(C).length===A.start.length?[]:[{pattern:A,range:jD(g,g.getRoot(),n,0,n,0,a)}]).getOr([])},SK=(e,n)=>{if(n.length===0)return;const s=e.selection.getBookmark();ue(n,a=>SC(e,a)),e.selection.moveToBookmark(s)},GD=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),CC=(e,n)=>{const s=e.createRng();return s.setStartAfter(n.start),s.setEndBefore(n.end),s},t5=(e,n,s)=>{const a=vK(e.getRoot(),s).getOrDie("Unable to resolve path range"),f=a.startContainer,g=a.endContainer,y=a.endOffset===0?g:g.splitText(a.endOffset),C=a.startOffset===0?f:f.splitText(a.startOffset),A=C.parentNode,M=y.parentNode;return{prefix:n,end:M.insertBefore(GD(e,n+"-end"),y),start:A.insertBefore(GD(e,n+"-start"),C)}},n5=(e,n,s)=>{Rg(e,e.get(n.prefix+"-end"),s),Rg(e,e.get(n.prefix+"-start"),s)},Iv=e=>e.start.length===0,CK=e=>(n,s)=>{const f=n.data.substring(0,s),g=f.lastIndexOf(e.charAt(e.length-1)),y=f.lastIndexOf(e);return y!==-1?y+e.length:g!==-1?g+1:-1},o5=(e,n,s,a)=>{const f=n.start;return pv(e,a.container,a.offset,CK(f),s).bind(y=>{var C,A;const M=(A=(C=s.textContent)===null||C===void 0?void 0:C.indexOf(f))!==null&&A!==void 0?A:-1;if(M!==-1&&y.offset>=M+f.length){const L=e.createRng();return L.setStart(y.container,y.offset-f.length),L.setEnd(y.container,y.offset),V.some(L)}else{const L=y.offset-f.length;return VS(y.container,L,s).map(W=>{const re=e.createRng();return re.setStart(W.container,W.offset),re.setEnd(y.container,y.offset),re}).filter(W=>W.toString()===f).orThunk(()=>o5(e,n,s,dd(y.container,0)))}})},kK=(e,n,s,a,f,g=!1)=>{if(n.start.length===0&&!g){const y=e.createRng();return y.setStart(s,a),y.setEnd(s,a),V.some(y)}return rf(s,a,f).bind(y=>o5(e,n,f,y).bind(A=>{var M;if(g){if(A.endContainer===y.container&&A.endOffset===y.offset)return V.none();if(y.offset===0&&((M=A.endContainer.textContent)===null||M===void 0?void 0:M.length)===A.endOffset)return V.none()}return V.some(A)}))},AK=(e,n,s,a)=>{const f=e.dom,g=f.getRoot(),y=s.pattern,C=s.position.container,A=s.position.offset;return VS(C,A-s.pattern.end.length,n).bind(M=>{const I=jD(f,g,M.container,M.offset,C,A,a);if(Iv(y))return V.some({matches:[{pattern:y,startRng:I,endRng:I}],position:M});{const L=kC(e,s.remainingPatterns,M.container,M.offset,n,a),W=L.getOr({matches:[],position:M}),re=W.position;return kK(f,y,re.container,re.offset,n,L.isNone()).map(te=>{const fe=yK(f,g,te,a);return{matches:W.matches.concat([{pattern:y,startRng:fe,endRng:I}]),position:dd(te.startContainer,te.startOffset)}})}})},kC=(e,n,s,a,f,g)=>{const y=e.dom;return rf(s,a,y.getRoot()).bind(C=>{const A=JL(y,f,s,a);for(let M=0;M<n.length;M++){const I=n[M];if(!Xo(A,I.end))continue;const L=n.slice();L.splice(M,1);const W=AK(e,f,{pattern:I,remainingPatterns:L,position:C},g);if(W.isNone()&&a>0)return kC(e,n,s,a-1,f,g);if(W.isSome())return W}return V.none()})},s5=(e,n,s)=>{e.selection.setRng(s),n.type==="inline-format"?ue(n.format,a=>{e.formatter.apply(a)}):e.execCommand(n.cmd,!1,n.value)},r5=(e,n,s,a)=>{const f=CC(e.dom,s);xC(e.dom,f,a),s5(e,n,f)},i5=(e,n,s,a,f)=>{const g=e.dom,y=CC(g,a),C=CC(g,s);xC(g,C,f),xC(g,y,f);const A={prefix:s.prefix,start:s.end,end:a.start},M=CC(g,A);s5(e,n,M)},KD=(e,n)=>{const s=xp("mce_textpattern"),a=kt(n,(f,g)=>{const y=t5(e,s+`_end${f.length}`,g.endRng);return f.concat([Ot(ie({},g),{endMarker:y})])},[]);return kt(a,(f,g)=>{const y=a.length-f.length-1,C=Iv(g.pattern)?g.endMarker:t5(e,s+`_start${y}`,g.startRng);return f.concat([Ot(ie({},g),{startMarker:C})])},[])},YD=e=>pt(e,(n,s)=>s.end.length-n.end.length),EK=(e,n)=>{const s=ho(e,a=>Bt(n,f=>a.pattern.start===f.pattern.start&&a.pattern.end===f.pattern.end));return e.length===n.length?s?e:n:e.length>n.length?e:n},AC=(e,n,s,a,f,g)=>{const y=kC(e,f.inlinePatterns,s,a,n,g).fold(()=>[],A=>A.matches),C=kC(e,YD(f.inlinePatterns),s,a,n,g).fold(()=>[],A=>A.matches);return EK(y,C)},a5=(e,n)=>{if(n.length===0)return;const s=e.dom,a=e.selection.getBookmark(),f=KD(s,n);ue(f,g=>{const y=s.getParent(g.startMarker.start,s.isBlock),C=A=>A===y;Iv(g.pattern)?r5(e,g.pattern,g.endMarker,C):i5(e,g.pattern,g.startMarker,g.endMarker,C),n5(s,g.endMarker,C),n5(s,g.startMarker,C)}),e.selection.moveToBookmark(a)},TK=(e,n)=>{const s=e.selection.getRng();return Fv(e,s).map(a=>{var f;const g=Math.max(0,s.startOffset),y=XL(n,a,(f=a.textContent)!==null&&f!==void 0?f:""),C=AC(e,a,s.startContainer,g,y,!0),A=xK(e,a,y,!0);return A.length>0||C.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{U6(e),a5(e,C),SK(e,A);const M=e.selection.getRng(),I=rf(M.startContainer,M.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),I.each(L=>{const W=L.container;W.data.charAt(L.offset-1)===C0&&(W.deleteData(L.offset-1,1),Rg(e.dom,W.parentNode,re=>re===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},l5=(e,n)=>{const s=e.selection.getRng();Fv(e,s).map(a=>{const f=Math.max(0,s.startOffset-1),g=JL(e.dom,a,s.startContainer,f),y=XL(n,a,g),C=AC(e,a,s.startContainer,f,y,!1);C.length>0&&e.undoManager.transact(()=>{a5(e,C)})})},c5=(e,n,s)=>{for(let a=0;a<e.length;a++)if(s(e[a],n))return!0;return!1},OK=(e,n)=>c5(e,n,(s,a)=>s===a.keyCode&&!hn.modifierPressed(a)),DK=(e,n)=>c5(e,n,(s,a)=>s.charCodeAt(0)===a.charCode),_K=e=>{const n=[",",".",";",":","!","?"],s=[32],a=()=>Pl(Hk(e),S7(e)),f=()=>O7(e);e.on("keydown",y=>{if(y.keyCode===13&&!hn.modifierPressed(y)&&e.selection.isCollapsed()){const C=a();(C.inlinePatterns.length>0||C.blockPatterns.length>0||f())&&TK(e,C)&&y.preventDefault()}},!0);const g=()=>{if(e.selection.isCollapsed()){const y=a();(y.inlinePatterns.length>0||f())&&l5(e,y)}};e.on("keyup",y=>{OK(s,y)&&g()}),e.on("keypress",y=>{DK(n,y)&&pc.setEditorTimeout(e,g)})},MK=e=>{_K(e)},RK=e=>{const n=Lt.each,s=hn.BACKSPACE,a=hn.DELETE,f=e.dom,g=e.selection,y=e.parser,C=sn.browser,A=C.isFirefox(),M=C.isChromium()||C.isSafari(),I=sn.deviceType.isiPhone()||sn.deviceType.isiPad(),L=sn.os.isMacOS()||sn.os.isiOS(),W=(vn,lo)=>{try{e.getDoc().execCommand(vn,!1,String(lo))}catch(Gt){}},re=vn=>vn.isDefaultPrevented(),de=()=>{const vn=Gt=>{const co=f.create("body"),Go=Gt.cloneContents();return co.appendChild(Go),g.serializer.serialize(co,{format:"html"})},lo=Gt=>{const co=vn(Gt),Go=f.createRng();Go.selectNode(e.getBody());const Fs=vn(Go);return co===Fs};e.on("keydown",Gt=>{const co=Gt.keyCode;if(!re(Gt)&&(co===a||co===s)&&e.selection.isEditable()){const Go=e.selection.isCollapsed(),Fs=e.getBody();if(Go&&!Rr(ye.fromDom(Fs))||!Go&&!lo(e.selection.getRng()))return;Gt.preventDefault(),e.setContent(""),Fs.firstChild&&f.isBlock(Fs.firstChild)?e.selection.setCursorLocation(Fs.firstChild,0):e.selection.setCursorLocation(Fs,0),e.nodeChanged()}})},te=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},fe=()=>{e.inline||f.bind(e.getDoc(),"mousedown mouseup",vn=>{let lo;if(vn.target===e.getDoc().documentElement)if(lo=g.getRng(),e.getBody().focus(),vn.type==="mousedown"){if(Ba(lo.startContainer))return;g.placeCaretAt(vn.clientX,vn.clientY)}else g.setRng(lo)})},Fe=()=>{e.on("keydown",vn=>{if(!re(vn)&&vn.keyCode===s){if(!e.getBody().getElementsByTagName("hr").length)return;if(g.isCollapsed()&&g.getRng().startOffset===0){const lo=g.getNode(),Gt=lo.previousSibling;if(lo.nodeName==="HR"){f.remove(lo),vn.preventDefault();return}Gt&&Gt.nodeName&&Gt.nodeName.toLowerCase()==="hr"&&(f.remove(Gt),vn.preventDefault())}}})},ze=()=>{Range.prototype.getClientRects||e.on("mousedown",vn=>{if(!re(vn)&&vn.target.nodeName==="HTML"){const lo=e.getBody();lo.blur(),pc.setEditorTimeout(e,()=>{lo.focus()})}})},Ve=()=>{const vn=w3(e);e.on("click",lo=>{const Gt=lo.target;/^(IMG|HR)$/.test(Gt.nodeName)&&f.isEditable(Gt)&&(lo.preventDefault(),e.selection.select(Gt),e.nodeChanged()),Gt.nodeName==="A"&&f.hasClass(Gt,vn)&&Gt.childNodes.length===0&&f.isEditable(Gt.parentNode)&&(lo.preventDefault(),g.select(Gt))})},nt=()=>{const vn=()=>{const Gt=f.getAttribs(g.getStart().cloneNode(!1));return()=>{const co=g.getStart();co!==e.getBody()&&(f.setAttrib(co,"style",null),n(Gt,Go=>{co.setAttributeNode(Go.cloneNode(!0))}))}},lo=()=>!g.isCollapsed()&&f.getParent(g.getStart(),f.isBlock)!==f.getParent(g.getEnd(),f.isBlock);e.on("keypress",Gt=>{let co;return!re(Gt)&&(Gt.keyCode===8||Gt.keyCode===46)&&lo()?(co=vn(),e.getDoc().execCommand("delete",!1),co(),Gt.preventDefault(),!1):!0}),f.bind(e.getDoc(),"cut",Gt=>{if(!re(Gt)&&lo()){const co=vn();pc.setEditorTimeout(e,()=>{co()})}})},Nt=()=>{e.on("keydown",vn=>{if(!re(vn)&&vn.keyCode===s&&g.isCollapsed()&&g.getRng().startOffset===0){const lo=g.getNode().previousSibling;if(lo&&lo.nodeName&&lo.nodeName.toLowerCase()==="table")return vn.preventDefault(),!1}return!0})},Zt=()=>{e.on("keydown",vn=>{if(re(vn)||vn.keyCode!==hn.BACKSPACE)return;let lo=g.getRng();const Gt=lo.startContainer,co=lo.startOffset,Go=f.getRoot();let Fs=Gt;if(!(!lo.collapsed||co!==0)){for(;Fs.parentNode&&Fs.parentNode.firstChild===Fs&&Fs.parentNode!==Go;)Fs=Fs.parentNode;Fs.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Fs),lo=f.createRng(),lo.setStart(Gt,0),lo.setEnd(Gt,0),g.setRng(lo))}})},on=()=>{const vn=()=>{W("StyleWithCSS",!1),W("enableInlineTableEditing",!1),m3(e)||W("enableObjectResizing",!1)};y3(e)||e.on("BeforeExecCommand mousedown",vn)},vt=()=>{const vn=()=>{n(f.select("a:not([data-mce-block])"),lo=>{var Gt;let co=lo.parentNode;const Go=f.getRoot();if((co==null?void 0:co.lastChild)===lo){for(;co&&!f.isBlock(co);){if(((Gt=co.parentNode)===null||Gt===void 0?void 0:Gt.lastChild)!==co||co===Go)return;co=co.parentNode}f.add(co,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",lo=>{(lo.type==="setcontent"||lo.command==="mceInsertLink")&&vn()})},ut=()=>{e.on("init",()=>{W("DefaultParagraphSeparator",Ia(e))})},Mt=vn=>{const lo=vn.getBody(),Gt=vn.selection.getRng();return Gt.startContainer===Gt.endContainer&&Gt.startContainer===lo&&Gt.startOffset===0&&Gt.endOffset===lo.childNodes.length},mn=()=>{e.on("keyup focusin mouseup",vn=>{!hn.modifierPressed(vn)&&!Mt(e)&&g.normalize()},!0)},Rn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Bo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Mo=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",vn=>{let lo;vn.target.nodeName==="HTML"&&(lo=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(lo),e.selection.normalize(),e.nodeChanged())}))},Ps=()=>{L&&e.on("keydown",vn=>{hn.metaKeyPressed(vn)&&!vn.shiftKey&&(vn.keyCode===37||vn.keyCode===39)&&(vn.preventDefault(),e.selection.getSel().modify("move",vn.keyCode===37?"backward":"forward","lineboundary"))})},Vs=()=>{e.on("click",vn=>{let lo=vn.target;do if(lo.tagName==="A"){vn.preventDefault();return}while(lo=lo.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Nr=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",vn=>{vn.preventDefault()})})},ea=()=>{y.addNodeFilter("br",vn=>{let lo=vn.length;for(;lo--;)vn[lo].attr("class")==="Apple-interchange-newline"&&vn[lo].remove()})},_s=ge,Xt=()=>{if(!A||e.removed)return!1;const vn=e.selection.getSel();return!vn||!vn.rangeCount||vn.rangeCount===0},Cn=()=>{M&&(fe(),Ve(),Nr(),te(),I&&(Bo(),Mo(),Vs())),A&&(ze(),on(),Rn(),Ps())},Ro=()=>{e.on("drop",vn=>{var lo;const Gt=(lo=vn.dataTransfer)===null||lo===void 0?void 0:lo.getData("text/html");Z(Gt)&&/^<img[^>]*>$/.test(Gt)&&e.dispatch("dragend",new window.DragEvent("dragend",vn))})},Vo=()=>{Zt(),de(),sn.windowsPhone||mn(),M&&(fe(),Ve(),ut(),Nr(),Nt(),ea(),I?(Bo(),Mo(),Vs()):te()),A&&(Fe(),ze(),nt(),on(),vt(),Rn(),Ps(),Nt(),Ro())};return ah(e)?Cn():Vo(),{refreshContentEditable:_s,isHidden:Xt}},XD=or.DOM,u5=(e,n)=>{const s=ye.fromDom(e.getBody()),a=h0(Hu(s)),f=ye.fromTag("style");Js(f,"type","text/css"),Jr(f,ye.fromText(n)),Jr(a,f),e.on("remove",()=>{ks(f)})},PK=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Lv=e=>di(e,n=>$e(n)===!1),d5=e=>{const n=e.options.get,s=e.editorUpload.blobCache;return Lv({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:PK(e),sandbox_iframes:n("sandbox_iframes"),sanitize:n("xss_sanitization"),validate:!0,blob_cache:s,document:e.getDoc()})},f5=e=>{const n=e.options.get;return Lv({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},NK=e=>{const n=e.options.get;return ie(ie(ie({},d5(e)),f5(e)),Lv({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")}))},BK=e=>{const n=bu(d5(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(s,a)=>{const f=e.dom,g="data-mce-"+a;let y=s.length;for(;y--;){const C=s[y];let A=C.attr(a);if(A&&!C.attr(g)){if(A.indexOf("data:")===0||A.indexOf("blob:")===0)continue;a==="style"?(A=f.serializeStyle(f.parseStyle(A),C.name),A.length||(A=null),C.attr(g,A),C.attr(a,A)):a==="tabindex"?(C.attr(g,A),C.attr(a,null)):C.attr(g,e.convertURL(A,a,C.name))}}}),n.addNodeFilter("script",s=>{let a=s.length;for(;a--;){const f=s[a],g=f.attr("type")||"no/type";g.indexOf("mce-")!==0&&f.attr("type","mce-"+g)}}),A7(e)&&n.addNodeFilter("#cdata",s=>{var a;let f=s.length;for(;f--;){const g=s[f];g.type=8,g.name="#comment",g.value="[CDATA["+e.dom.encode((a=g.value)!==null&&a!==void 0?a:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",s=>{let a=s.length;const f=e.schema.getNonEmptyElements();for(;a--;){const g=s[a];g.isEmpty(f)&&g.getAll("br").length===0&&g.append(new $a("br",1))}}),n},FK=e=>{const n=S3(e);n&&pc.setEditorTimeout(e,()=>{let s;n===!0?s=e:s=e.editorManager.get(n),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)},IK=e=>{const n=e.dom.getRoot();!e.inline&&(!$w(e)||e.selection.getStart(!0)===n)&&La(n).each(s=>{const a=s.getNode(),f=Pd(a)?La(a).getOr(s):s;e.selection.setRng(f.toRange())})},EC=e=>{e.bindPendingEventDelegates(),e.initialized=!0,gH(e),e.focus(!0),IK(e),e.nodeChanged({initial:!0});const n=h7(e);Oe(n)&&n.call(e,e),FK(e)},JD=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,LK=(e,n,s)=>{const{pass:a,fail:f}=Ne(n,C=>tinymce.Resource.has(VT(C))),y=[...a.map(C=>{const A=tinymce.Resource.get(VT(C));return Z(A)?Promise.resolve(JD(e).loadRawCss(C,A)):Promise.resolve()}),JD(e).loadAll(f)];return e.inline?y:y.concat([e.ui.styleSheetLoader.loadAll(s)])},h5=e=>{const n=JD(e),s=h3(e),a=e.contentCSS,f=()=>{n.unloadAll(a),e.inline||e.ui.styleSheetLoader.unloadAll(s)},g=()=>{e.removed?f():e.on("remove",f)};if(e.contentStyles.length>0){let A="";Lt.each(e.contentStyles,M=>{A+=M+`\r
`}),e.dom.addStyle(A)}const y=Promise.all(LK(e,a,s)).then(g).catch(g),C=Cw(e);return C&&u5(e,C),y},$K=e=>{const n=e.getDoc(),s=e.getBody();m4(e),g7(e)||(n.body.spellcheck=!1,XD.setAttrib(s,"spellcheck","false")),e.quirks=RK(e),mH(e);const a=e7(e);a!==void 0&&(s.dir=a);const f=C3(e);f&&e.on("BeforeSetContent",g=>{Lt.each(f,y=>{g.content=g.content.replace(y,C=>"<!--mce:protected "+escape(C)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",g=>{e.composing=g.type==="compositionstart"})},HK=e=>{ah(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},QD=e=>{e.removed!==!0&&(HK(e),EC(e))},VK=e=>{let n=!1;const s=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(s),n=!0,e.setProgressState(!1)}},m5=e=>{const n=e.getElement();let s=e.getDoc();e.inline&&(XD.addClass(n,"mce-content-body"),e.contentDocument=s=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const a=e.getBody();a.disabled=!0,e.readonly=y3(e),e._editableRoot=Wf(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&XD.getStyle(a,"position",!0)==="static"&&(a.style.position="relative"),a.contentEditable="true"),a.disabled=!1,e.editorUpload=eW(e),e.schema=Hf(f5(e)),e.dom=or(s,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:kp(e),referrerPolicy:sr(e),onSetAttrib:y=>{e.dispatch("SetAttrib",y)},force_hex_color:N7(e)}),e.parser=BK(e),e.serializer=ZN(NK(e),e),e.selection=Gh(e.dom,e.getWin(),e.serializer,e),e.annotator=yA(e),e.formatter=jT(e),e.undoManager=ZT(e),e._nodeChangeDispatcher=new zq(e),e._selectionOverrides=pK(e),wj(e),BG(e),Eee(e),ah(e)||(PL(e),MK(e));const f=Vq(e);kg(e,f),kj(e),yu(e),RG(e);const g=Kz(e);$K(e),g.fold(()=>{const y=VK(e);h5(e).then(()=>{QD(e),y()})},y=>{e.setProgressState(!0),h5(e).then(()=>{y().then(C=>{e.setProgressState(!1),QD(e),BT(e)},C=>{e.notificationManager.open({type:"error",text:String(C)}),QD(e),BT(e)})})})},zK=Ze,g5=(e,n,s)=>v0(e,n,zK,s),e_=or.DOM,p5=(e,n,s,a)=>{const f=ye.fromTag("iframe");return a.each(g=>Js(f,"tabindex",g)),Ur(f,s),Ur(f,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Af(f,"tox-edit-area__iframe"),f},UK=e=>{let n=a3(e)+"<html><head>";Dk(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const s=_k(e),a=W8(e),f=e.translate(f7(e));return Mk(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Mk(e)+'" />'),n+=`</head><body id="${s}" class="mce-content-body ${a}" data-id="${e.id}" aria-label="${f}"><br></body></html>`,n},WK=(e,n)=>{const s=e.translate("Rich Text Area"),a=_a(ye.fromDom(e.getElement()),"tabindex").bind(ji),f=p5(e.id,s,Ok(e),a).dom;f.onload=()=>{f.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=f,e.iframeHTML=UK(e),e_.add(n.iframeContainer,f)},b5=e=>{const n=e.iframeElement,s=()=>{e.contentDocument=n.contentDocument,m5(e)};if(T7(e)||sn.browser.isFirefox()){const a=e.getDoc();a.open(),a.write(e.iframeHTML),a.close(),s()}else{const a=g5(ye.fromDom(n),"load",()=>{a.unbind(),s()});n.srcdoc=e.iframeHTML}},$v=(e,n)=>{WK(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=e_.isHidden(n.editorContainer)),e.getElement().style.display="none",e_.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,b5(e)},v5=or.DOM,y5=(e,n,s)=>{const a=yg.get(s),f=yg.urls[s]||e.documentBaseUrl.replace(/\/$/,"");if(s=Lt.trim(s),a&&Lt.inArray(n,s)===-1){if(e.plugins[s])return;try{const g=a(e,f)||{};e.plugins[s]=g,Oe(g.init)&&(g.init(e,f),n.push(s))}catch(g){sB(e,s,g)}}},jK=e=>e.replace(/^\-/,""),ZK=e=>{const n=[];ue(Tw(e),s=>{y5(e,n,jK(s))})},qK=e=>{const n=Lt.trim(u3(e)),s=e.ui.registry.getAll().icons,a=ie(ie({},Qb.get("default").icons),Qb.get(n).icons);$t(a,(f,g)=>{Bn(s,g)||e.ui.registry.addIcon(g,f)})},GK=e=>{const n=Ap(e);if(Z(n)){const s=lh.get(n);e.theme=s(e,lh.urls[n])||{},Oe(e.theme.init)&&e.theme.init(e,lh.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},w5=e=>{const n=Bk(e),s=Lc.get(n);e.model=s(e,Lc.urls[n])},KK=e=>{const n=e.theme.renderUI;return n?n():C5(e)},x5=e=>{const n=e.getElement(),a=Ap(e)(e,n);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||e.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||e.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:n.offsetHeight,a},S5=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),YK=e=>{const n=v5.create("div");return v5.insertAfter(n,e),S5(n,n)},C5=e=>{const n=e.getElement();return e.inline?S5(null):YK(n)},XK=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,Z(Ap(e))?KK(e):Oe(Ap(e))?x5(e):C5(e)},JK=(e,n)=>{const s={show:V.from(n.show).getOr(ge),hide:V.from(n.hide).getOr(ge),isEnabled:V.from(n.isEnabled).getOr(Ze),setEnabled:a=>{e.mode.isReadOnly()||V.from(n.setEnabled).each(f=>f(a))}};e.ui=ie(ie({},e.ui),s)},QK=e=>Ko(this,null,function*(){e.dispatch("ScriptsLoaded"),qK(e),GK(e),w5(e),ZK(e);const n=yield XK(e);JK(e,V.from(n.api).getOr({})),e.editorContainer=n.editorContainer,WU(e),e.inline?m5(e):$v(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})}),Pg=or.DOM,k5=e=>e.charAt(0)==="-",eY=(e,n)=>{const s=Nk(n),a=Ja(n);if(!iu.hasCode(s)&&s!=="en"){const f=Po(a)?a:`${n.editorManager.baseURL}/langs/${s}.js`;e.add(f).catch(()=>{tv(n,f,s)})}},A5=(e,n)=>{const s=Ap(e);if(Z(s)&&!k5(s)&&!Bn(lh.urls,s)){const a=r7(e),f=a?e.documentBaseURI.toAbsolute(a):`themes/${s}/theme${n}.js`;lh.load(s,f).catch(()=>{HU(e,f,s)})}},t_=(e,n)=>{const s=Bk(e);if(s!=="plugin"&&!Bn(Lc.urls,s)){const a=i7(e),f=Z(a)?e.documentBaseURI.toAbsolute(a):`models/${s}/model${n}.js`;Lc.load(s,f).catch(()=>{oB(e,f,s)})}},E5=e=>V.from(Y8(e)).filter(Po).map(n=>({url:n,name:V.none()})),n_=(e,n,s)=>V.from(n).filter(a=>Po(a)&&!Qb.has(a)).map(a=>({url:`${e.editorManager.baseURL}/icons/${a}/icons${s}.js`,name:V.some(a)})),tY=(e,n,s)=>{const a=n_(n,"default",s),f=E5(n).orThunk(()=>n_(n,u3(n),""));ue(js([a,f]),g=>{e.add(g.url).catch(()=>{$U(n,g.url,g.name.getOrUndefined())})})},nY=(e,n)=>{const s=(a,f)=>{yg.load(a,f).catch(()=>{kee(e,f,a)})};$t(Bh(e),(a,f)=>{s(f,a),e.options.set("plugins",Tw(e).concat(f))}),ue(Tw(e),a=>{a=Lt.trim(a),a&&!yg.urls[a]&&!k5(a)&&s(a,`plugins/${a}/plugin${n}.js`)})},oY=e=>{const n=Ap(e);return!Z(n)||ae(lh.get(n))},T5=e=>{const n=Bk(e);return ae(Lc.get(n))},O5=(e,n)=>{const s=vi.ScriptLoader,a=()=>{!e.removed&&oY(e)&&T5(e)&&QK(e)};A5(e,n),t_(e,n),eY(s,e),tY(s,e,n),nY(e,n),s.loadQueue().then(a,a)},sY=(e,n)=>K2.forElement(e,{contentCssCors:Ew(n),referrerPolicy:sr(n)}),rY=e=>{const n=e.id;iu.setCode(Nk(e));const s=()=>{Pg.unbind(window,"ready",s),e.render()};if(!Mc.Event.domLoaded){Pg.bind(window,"ready",s);return}if(!e.getElement())return;const a=ye.fromDom(e.getElement()),f=Jl(a);e.on("remove",()=>{xe(a.dom.attributes,y=>Ir(a,y.name)),Ur(a,f)}),e.ui.styleSheetLoader=sY(a,e),Fk(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const g=e.getElement().form||Pg.getParent(n,"form");g&&(e.formElement=g,l7(e)&&!B2(e.getElement())&&(Pg.insertAfter(Pg.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=y=>{e.dispatch(y.type,y)},Pg.bind(g,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),c7(e)&&!g.submit.nodeType&&!g.submit.length&&!g._mceOldSubmit&&(g._mceOldSubmit=g.submit,g.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),g._mceOldSubmit(g)))),e.windowManager=nB(e),e.notificationManager=HT(e),M7(e)&&e.on("GetContent",y=>{y.save&&(y.content=Pg.encode(y.content))}),Uf(e)&&e.on("submit",()=>{e.initialized&&e.save()}),kw(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),O5(e,e.suffix)},o_=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),xH(e,n))},TC=e=>e._editableRoot,OC=(e,n)=>({sections:he(e),options:he(n)}),af=Ms().deviceType,Hv=af.isPhone(),R1=af.isTablet(),P1=e=>{if(Ue(e))return[];{const n=Re(e)?e:e.split(/[ ,]/),s=tt(n,Ii);return Me(s,Po)}},iY=(e,n)=>{const s=pr(n,(a,f)=>Je(e,f));return OC(s.t,s.f)},aY=(e,n,s={})=>{const a=e.sections(),f=us(a,n).getOr({});return Lt.extend({},s,f)},DC=(e,n)=>Bn(e.sections(),n),lY=(e,n)=>DC(e,n)?e.sections()[n]:{},s_=(e,n)=>{const s={table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:us(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},a={menubar:!1};return ie(ie({},s),n?a:{})},_C=(e,n)=>{var s;const a=(s=n.external_plugins)!==null&&s!==void 0?s:{};return e&&e.external_plugins?Lt.extend({},e.external_plugins,a):a},rm=(e,n)=>[...P1(e),...P1(n)],Ng=(e,n,s,a)=>e&&DC(n,"mobile")?a:s,D5=(e,n,s,a)=>{const f=P1(s.forced_plugins),g=P1(a.plugins),y=lY(n,"mobile"),C=y.plugins?P1(y.plugins):g,A=Ng(e,n,g,C),M=rm(f,A);return Lt.extend(a,{forced_plugins:f,plugins:M})},cY=(e,n)=>e&&DC(n,"mobile"),uY=(e,n,s,a,f)=>{var g;const y=e?{mobile:s_((g=f.mobile)!==null&&g!==void 0?g:{},n)}:{},C=iY(["mobile"],Cv(y,f)),A=Lt.extend(s,a,C.options(),cY(e,C)?aY(C,"mobile"):{},{external_plugins:_C(a,C.options())});return D5(e,C,a,A)},dY=(e,n)=>uY(Hv||R1,Hv,n,e,n),fY=(e,n)=>aU(e,n),hY=e=>{const n=(a,f)=>{e.formatter.toggle(a,f),e.nodeChanged()},s=a=>()=>{ue("left,center,right,justify".split(","),f=>{a!==f&&e.formatter.remove("align"+f)}),a!=="none"&&n("align"+a)};e.editorCommands.addCommands({JustifyLeft:s("left"),JustifyCenter:s("center"),JustifyRight:s("right"),JustifyFull:s("justify"),JustifyNone:s("none")})},mY=e=>{const n=s=>()=>{const a=e.selection,f=a.isCollapsed()?[e.dom.getParent(a.getNode(),e.dom.isBlock)]:a.getSelectedBlocks();return Bt(f,g=>ae(e.formatter.matchNode(g,s)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},_5=e=>{hY(e),mY(e)},gY=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const s=e.getDoc();let a;try{s.execCommand(n)}catch(f){a=!0}if(n==="paste"&&!s.queryCommandEnabled(n)&&(a=!0),a||!s.queryCommandSupported(n)){let f=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(sn.os.isMacOS()||sn.os.isiOS())&&(f=f.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:f,type:"error"})}}})},pY=(e,n,s,a)=>{const f=ye.fromDom(e.getRoot());return Zp(f,bt.fromRangeStart(n),a)?s=s.replace(/^ /,"&nbsp;"):s=s.replace(/^&nbsp;/," "),qp(f,bt.fromRangeEnd(n),a)?s=s.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):s=s.replace(/&nbsp;(<br( \/)?>)?$/," "),s},bY=e=>{if(typeof e!="string"){const n=Lt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},qee=(e,n)=>{const s=e.selection,a=e.dom;return/^ | $/.test(n)?pY(a,s.getRng(),n,e.schema):n},MC=(e,n)=>{if(e.selection.isEditable()){const{content:s,details:a}=bY(n);mT(e,Ot(ie({},a),{content:qee(e,s),format:"html",set:!1,selection:!0})).each(f=>{const g=rU(e,f.content,a);Yx(e,g,f),e.addVisual()})}},r_=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,s,a)=>{MC(e,e.dom.createHTML("img",{src:a}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,s,a)=>{MC(e,e.dom.encode(a))},insertHTML:(n,s,a)=>{MC(e,a)},mceInsertContent:(n,s,a)=>{MC(e,a)},mceSetContent:(n,s,a)=>{e.setContent(a)},mceReplaceContent:(n,s,a)=>{e.execCommand("mceInsertContent",!1,a.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Lk(e))}})},vY={"font-size":"size","font-family":"face"},yY=zr("font"),M5=(e,n,s)=>{const a=g=>_m(g,e).orThunk(()=>yY(g)?us(vY,e).bind(y=>_a(g,y)):V.none()),f=g=>ys(ye.fromDom(n),g);return sh(ye.fromDom(s),g=>a(g),f)},wY=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),R5=(e,n)=>V.from(or.DOM.getStyle(n,e,!0)),P5=e=>(n,s)=>V.from(s).map(ye.fromDom).filter(gn).bind(a=>M5(e,n,a.dom).or(R5(e,a.dom))).getOr(""),i_=P5("font-size"),xY=O(wY,P5("font-family")),SY=e=>La(e.getBody()).bind(n=>{const s=n.container();return V.from(Vt(s)?s.parentNode:s)}),CY=e=>V.from(e.selection.getRng()).bind(n=>{const s=e.getBody();return n.startContainer===s&&n.startOffset===0?V.none():V.from(e.selection.getStart(!0))}),kY=(e,n)=>CY(e).orThunk(Pe(SY,e)).map(ye.fromDom).filter(gn).bind(n),RC=(e,n)=>kY(e,Ke(V.some,n)),PC=(e,n)=>{if(/^[0-9.]+$/.test(n)){const s=parseInt(n,10);if(s>=1&&s<=7){const a=D7(e),f=_7(e);return f.length>0?f[s-1]||n:a[s-1]||n}else return n}else return n},N5=e=>{const n=e.split(/\s*,\s*/);return tt(n,s=>s.indexOf(" ")!==-1&&!(Vn(s,'"')||Vn(s,"'"))?`'${s}'`:s).join(",")},a_=(e,n)=>{const s=PC(e,n);e.formatter.toggle("fontname",{value:N5(s)}),e.nodeChanged()},AY=e=>RC(e,n=>xY(e.getBody(),n.dom)).getOr(""),Gee=(e,n)=>{e.formatter.toggle("fontsize",{value:PC(e,n)}),e.nodeChanged()},Kee=e=>RC(e,n=>i_(e.getBody(),n.dom)).getOr(""),EY=e=>RC(e,n=>{const s=ye.fromDom(e.getBody()),a=sh(n,g=>_m(g,"line-height"),Pe(ys,s)),f=()=>{const g=parseFloat(ou(n,"line-height")),y=parseFloat(ou(n,"font-size"));return String(g/y)};return a.getOrThunk(f)}).getOr(""),B5=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},TY=e=>{const n=(s,a)=>{e.formatter.toggle(s,a),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":s=>{n(s)},"ForeColor,HiliteColor":(s,a,f)=>{n(s,{value:f})},BackColor:(s,a,f)=>{n("hilitecolor",{value:f})},FontName:(s,a,f)=>{a_(e,f)},FontSize:(s,a,f)=>{Gee(e,f)},LineHeight:(s,a,f)=>{B5(e,f)},Lang:(s,a,f)=>{var g;n(s,{value:f.code,customValue:(g=f.customCode)!==null&&g!==void 0?g:null})},RemoveFormat:s=>{e.formatter.remove(s)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(s,a,f)=>{n(Z(f)?f:"p")},mceToggleFormat:(s,a,f)=>{n(f)}})},OY=e=>{const n=s=>e.formatter.match(s);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":s=>n(s),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>AY(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>Kee(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>EY(e))},DY=e=>{TY(e),OY(e)},Yee=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},Xee=e=>{e.editorCommands.addCommands({Indent:()=>{yj(e)},Outdent:()=>{DO(e)}}),e.editorCommands.addCommands({Outdent:()=>RS(e)},"state")},F5=e=>{const n=(s,a,f)=>{const g=Z(f)?{href:f}:f,y=e.dom.getParent(e.selection.getNode(),"a");be(g)&&Z(g.href)&&(g.href=g.href.replace(/ /g,"%20"),(!y||!g.href)&&e.formatter.remove("link"),g.href&&e.formatter.apply("link",g,y))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const s=e.dom.getParent(e.selection.getStart(),"a");s&&e.dom.remove(s,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},I5=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const s=e.dom.getParent(e.selection.getNode(),"ol,ul");if(s){const a=s.parentNode;if(a&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(a.nodeName)){const f=e.selection.getBookmark();e.dom.split(a,s),e.selection.moveToBookmark(f)}}}})},_Y=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const s=e.dom.getParent(e.selection.getNode(),"ul,ol");return s&&(n==="insertunorderedlist"&&s.tagName==="UL"||n==="insertorderedlist"&&s.tagName==="OL")}},"state")},MY=e=>{I5(e),_Y(e)},RY=(e,n,s,a)=>{const f=e.dom,g=C=>f.isBlock(C)&&C.parentElement===s,y=g(n)?n:f.getParent(a,g,s);return V.from(y).map(ye.fromDom)},PY=(e,n)=>{const s=e.dom,a=e.selection.getRng(),f=n?e.selection.getStart():e.selection.getEnd(),g=n?a.startContainer:a.endContainer,y=Ag(s,g);if(!y||!y.isContentEditable)return;const C=n?Pa:Vu,A=Ia(e);RY(e,f,y,g).each(M=>{const I=fD(e,g,M.dom,y,!1,A);C(M,ye.fromDom(I)),e.selection.setCursorLocation(I,0),e.dispatch("NewBlock",{newBlock:I}),Ov(e,"insertParagraph")})},Jee=e=>PY(e,!0),Qee=e=>PY(e,!1),NY=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{Jee(e)},InsertNewBlockAfter:()=>{Qee(e)}})},ete=e=>{e.editorCommands.addCommands({insertParagraph:()=>{Tg(NI,e)},mceInsertNewLine:(n,s,a)=>{HI(e,a)},InsertLineBreak:(n,s,a)=>{Tg(xq,e)}})},BY=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,s,a)=>{let f=0;e.dom.getParent(e.selection.getNode(),g=>wn(g)&&f++===a?(e.selection.select(g),!1):!0,e.getBody())},mceSelectNode:(n,s,a)=>{e.selection.select(a)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),hl);if(n){const s=e.dom.createRng();s.selectNodeContents(n),e.selection.setRng(s)}}})},Bg=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,s,a)=>{const f=a!=null?a:e.selection.getNode();if(f!==e.getBody()){const g=e.selection.getBookmark();e.dom.remove(f,!0),e.selection.moveToBookmark(g)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,s,a)=>{d9(e,a===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},l_=e=>{_5(e),gY(e),Yee(e),BY(e),r_(e),F5(e),Xee(e),NY(e),ete(e),MY(e),DY(e),Bg(e)},NC=["toggleview"],c_=e=>Je(NC,e.toLowerCase());class u_{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,s=!1,a,f){const g=this.editor,y=n.toLowerCase(),C=f==null?void 0:f.skip_focus;if(g.removed||(y!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(y)&&!C?g.focus():XH(g)),g.dispatch("BeforeExecCommand",{command:n,ui:s,value:a}).isDefaultPrevented()))return!1;const M=this.commands.exec[y];return Oe(M)?(M(y,s,a),g.dispatch("ExecCommand",{command:n,ui:s,value:a}),!0):!1}queryCommandState(n){if(!c_(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const s=n.toLowerCase(),a=this.commands.state[s];return Oe(a)?a(s):!1}queryCommandValue(n){if(!c_(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const s=n.toLowerCase(),a=this.commands.value[s];return Oe(a)?a(s):""}addCommands(n,s="exec"){const a=this.commands;$t(n,(f,g)=>{ue(g.toLowerCase().split(","),y=>{a[s][y]=f})})}addCommand(n,s,a){const f=n.toLowerCase();this.commands.exec[f]=(g,y,C)=>s.call(a!=null?a:this.editor,y,C)}queryCommandSupported(n){const s=n.toLowerCase();return!!this.commands.exec[s]}addQueryStateHandler(n,s,a){this.commands.state[n.toLowerCase()]=()=>s.call(a!=null?a:this.editor)}addQueryValueHandler(n,s,a){this.commands.value[n.toLowerCase()]=()=>s.call(a!=null?a:this.editor)}}const im="data-mce-contenteditable",FY=(e,n,s)=>{ep(e,n)&&!s?Fu(e,n):s&&Af(e,n)},d_=(e,n,s)=>{try{e.getDoc().execCommand(n,!1,String(s))}catch(a){}},BC=(e,n)=>{e.dom.contentEditable=n?"true":"false"},IY=e=>{ue(ya(e,'*[contenteditable="true"]'),n=>{Js(n,im,"true"),BC(n,!1)})},am=e=>{ue(ya(e,`*[${im}="true"]`),n=>{Ir(n,im),BC(n,!0)})},LY=e=>{V.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},L5=e=>{e.selection.setRng(e.selection.getRng())},$Y=(e,n)=>{const s=ye.fromDom(e.getBody());FY(s,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),LY(e),e.readonly=!0,BC(s,!1),IY(s)):(e.readonly=!1,e.hasEditableRoot()&&BC(s,!0),am(s),d_(e,"StyleWithCSS",!1),d_(e,"enableInlineTableEditing",!1),d_(e,"enableObjectResizing",!1),G4(e)&&e.focus(),L5(e),e.nodeChanged())},lf=e=>e.readonly,$5=e=>{e.parser.addAttributeFilter("contenteditable",n=>{lf(e)&&ue(n,s=>{s.attr(im,s.attr("contenteditable")),s.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(im,n=>{lf(e)&&ue(n,s=>{s.attr("contenteditable",s.attr(im))})}),e.serializer.addTempAttr(im)},HY=e=>{e.serializer?$5(e):e.on("PreInit",()=>{$5(e)})},VY=e=>e.type==="click",H5=["copy"],zY=e=>Je(H5,e.type),UY=(e,n)=>_d(n,"a",a=>ys(a,ye.fromDom(e.getBody()))).bind(a=>_a(a,"href")),WY=(e,n)=>{if(VY(n)&&!hn.metaKeyPressed(n)){const s=ye.fromDom(n.target);UY(e,s).each(a=>{if(n.preventDefault(),/^#/.test(a)){const f=e.dom.select(`${a},[name="${En(a,"#")}"]`);f.length&&e.selection.scrollIntoView(f[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else zY(n)&&e.dispatch(n.type,n)},f_=e=>{e.on("ShowCaret",n=>{lf(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{lf(e)&&n.preventDefault()})},jY=Lt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class h_{static isNative(n){return!!jY[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ce}fire(n,s){return this.dispatch(n,s)}dispatch(n,s){const a=n.toLowerCase(),f=nk(a,s!=null?s:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(f);const g=this.bindings[a];if(g)for(let y=0,C=g.length;y<C;y++){const A=g[y];if(!A.removed){if(A.once&&this.off(a,A.func),f.isImmediatePropagationStopped())return f;if(A.func.call(this.scope,f)===!1)return f.preventDefault(),f}}return f}on(n,s,a,f){if(s===!1&&(s=ce),s){const g={func:s,removed:!1};f&&Lt.extend(g,f);const y=n.toLowerCase().split(" ");let C=y.length;for(;C--;){const A=y[C];let M=this.bindings[A];M||(M=[],this.toggleEvent(A,!0)),a?M=[g,...M]:M=[...M,g],this.bindings[A]=M}}return this}off(n,s){if(n){const a=n.toLowerCase().split(" ");let f=a.length;for(;f--;){const g=a[f];let y=this.bindings[g];if(!g)return $t(this.bindings,(C,A)=>{this.toggleEvent(A,!1),delete this.bindings[A]}),this;if(y){if(!s)y.length=0;else{const C=Ne(y,A=>A.func===s);y=C.fail,this.bindings[g]=y,ue(C.pass,A=>{A.removed=!0})}y.length||(this.toggleEvent(n,!1),delete this.bindings[g])}}}else $t(this.bindings,(a,f)=>{this.toggleEvent(f,!1)}),this.bindings={};return this}once(n,s,a){return this.on(n,s,a,{once:!0})}has(n){n=n.toLowerCase();const s=this.bindings[n];return!(!s||s.length===0)}}const $r=e=>(e._eventDispatcher||(e._eventDispatcher=new h_({scope:e,toggleEvent:(n,s)=>{h_.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,s)}})),e._eventDispatcher),m_={fire(e,n,s){return this.dispatch(e,n,s)},dispatch(e,n,s){const a=this;if(a.removed&&e!=="remove"&&e!=="detach")return nk(e.toLowerCase(),n!=null?n:{},a);const f=$r(a).dispatch(e,n);if(s!==!1&&a.parent){let g=a.parent();for(;g&&!f.isPropagationStopped();)g.dispatch(e,f,!1),g=g.parent?g.parent():void 0}return f},on(e,n,s){return $r(this).on(e,n,s)},off(e,n){return $r(this).off(e,n)},once(e,n){return $r(this).once(e,n)},hasEventListeners(e){return $r(this).has(e)}},FC=or.DOM;let hh;const Vv=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const s=g3(e);return s?(e.eventRoot||(e.eventRoot=FC.select(s)[0]),e.eventRoot):e.getBody()},g_=e=>!e.hidden&&!lf(e),V5=(e,n,s)=>{g_(e)?e.dispatch(n,s):lf(e)&&WY(e,s)},z5=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const s=Vv(e,n);if(g3(e)){if(hh||(hh={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||hh&&($t(hh,(f,g)=>{e.dom.unbind(Vv(e,g))}),hh=null)})),hh[n])return;const a=f=>{const g=f.target,y=e.editorManager.get();let C=y.length;for(;C--;){const A=y[C].getBody();(A===g||FC.isChildOf(g,A))&&V5(y[C],n,f)}};hh[n]=a,FC.bind(s,n,a)}else{const a=f=>{V5(e,n,f)};FC.bind(s,n,a),e.delegates[n]=a}},U5=Ot(ie({},m_),{bindPendingEventDelegates(){const e=this;Lt.each(e._pendingNativeEvents,n=>{z5(e,n)})},toggleNativeEvent(e,n){const s=this;e==="focus"||e==="blur"||s.removed||(n?s.initialized?z5(s,e):s._pendingNativeEvents?s._pendingNativeEvents.push(e):s._pendingNativeEvents=[e]:s.initialized&&s.delegates&&(s.dom.unbind(Vv(s,e),e,s.delegates[e]),delete s.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),s=e.dom;e.delegates&&($t(e.delegates,(a,f)=>{e.dom.unbind(Vv(e,f),f,a)}),delete e.delegates),!e.inline&&n&&s&&(n.onload=null,s.unbind(e.getWin()),s.unbind(e.getDoc())),s&&(s.unbind(n),s.unbind(e.getContainer()))}}),ZY=e=>Z(e)?{value:e.split(/[ ,]/),valid:!0}:ne(e,Z)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},qY=e=>{const n=(()=>{switch(e){case"array":return Re;case"boolean":return Ie;case"function":return Oe;case"number":return ht;case"object":return be;case"string":return Z;case"string[]":return ZY;case"object[]":return s=>ne(s,be);case"regexp":return s=>le(s,RegExp);default:return Ze}})();return s=>lm(s,n,`The value must be a ${e}.`)},GY=e=>Z(e.processor),tte=(e,n)=>{const s=Ho(n.message)?"":`. ${n.message}`;return e+s},W5=e=>e.valid,lm=(e,n,s="")=>{const a=n(e);return Ie(a)?a?{value:e,valid:!0}:{valid:!1,message:s}:a},gd=(e,n,s)=>{if(!$e(n)){const a=lm(n,s);if(W5(a))return a.value}},KY=(e,n)=>{const s={},a={},f=(L,W,re)=>{const de=lm(W,re);return W5(de)?(a[L]=de.value,!0):!1},g=(L,W)=>{const re=GY(W)?qY(W.processor):W.processor,de=gd(L,W.default,re);s[L]=Ot(ie({},W),{default:de,processor:re}),us(a,L).orThunk(()=>us(n,L)).each(fe=>f(L,fe,re))},y=L=>Bn(s,L);return{register:g,isRegistered:y,get:L=>us(a,L).orThunk(()=>us(s,L).map(W=>W.default)).getOrUndefined(),set:(L,W)=>{if(y(L)){const re=s[L];return re.immutable?!1:f(L,W,re.processor)}else return!1},unset:L=>{const W=y(L);return W&&delete a[L],W},isSet:L=>Bn(a,L)}},YY=["design","readonly"],j5=(e,n,s,a)=>{const f=s[n.get()],g=s[a];try{g.activate()}catch(y){return}f.deactivate(),f.editorReadOnly!==g.editorReadOnly&&$Y(e,g.editorReadOnly),n.set(a),fH(e,a)},XY=(e,n,s,a)=>{if(a!==s.get()){if(!Bn(n,a))throw new Error(`Editor mode '${a}' is invalid`);e.initialized?j5(e,s,n,a):e.on("init",()=>j5(e,s,n,a))}},JY=(e,n,s)=>{if(Je(YY,n))throw new Error(`Cannot override default mode ${n}`);return Ot(ie({},e),{[n]:Ot(ie({},s),{deactivate:()=>{try{s.deactivate()}catch(a){}}})})},QY=e=>{const n=jr("design"),s=jr({design:{activate:ge,deactivate:ge,editorReadOnly:!1},readonly:{activate:ge,deactivate:ge,editorReadOnly:!0}});return HY(e),f_(e),{isReadOnly:()=>lf(e),set:a=>XY(e,s.get(),n,a),get:()=>n.get(),register:(a,f)=>{s.set(JY(s.get(),a,f))}}},p_=Lt.each,b_=Lt.explode,eX={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},tX=Lt.makeMap("alt,ctrl,shift,meta,access"),nX=e=>e in tX,oX=e=>{const n={},s=sn.os.isMacOS()||sn.os.isiOS();p_(b_(e.toLowerCase(),"+"),g=>{nX(g)?n[g]=!0:/^[0-9]{2,}$/.test(g)?n.keyCode=parseInt(g,10):(n.charCode=g.charCodeAt(0),n.keyCode=eX[g]||g.toUpperCase().charCodeAt(0))});const a=[n.keyCode];let f;for(f in tX)n[f]?a.push(f):n[f]=!1;return n.id=a.join(","),n.access&&(n.alt=!0,s?n.ctrl=!0:n.shift=!0),n.meta&&(s?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class Z5{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const s=this;n.on("keyup keypress keydown",a=>{(s.hasModifier(a)||s.isFunctionKey(a))&&!a.isDefaultPrevented()&&(p_(s.shortcuts,f=>{s.matchShortcut(a,f)&&(s.pendingPatterns=f.subpatterns.slice(0),a.type==="keydown"&&s.executeShortcutAction(f))}),s.matchShortcut(a,s.pendingPatterns[0])&&(s.pendingPatterns.length===1&&a.type==="keydown"&&s.executeShortcutAction(s.pendingPatterns[0]),s.pendingPatterns.shift()))})}add(n,s,a,f){const g=this,y=g.normalizeCommandFunc(a);return p_(b_(Lt.trim(n)),C=>{const A=g.createShortcut(C,s,y,f);g.shortcuts[A.id]=A}),!0}remove(n){const s=this.createShortcut(n);return this.shortcuts[s.id]?(delete this.shortcuts[s.id],!0):!1}normalizeCommandFunc(n){const s=this,a=n;return typeof a=="string"?()=>{s.editor.execCommand(a,!1,null)}:Lt.isArray(a)?()=>{s.editor.execCommand(a[0],a[1],a[2])}:a}createShortcut(n,s,a,f){const g=Lt.map(b_(n,">"),oX);return g[g.length-1]=Lt.extend(g[g.length-1],{func:a,scope:f||this.editor}),Lt.extend(g[0],{desc:this.editor.translate(s),subpatterns:g.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,s){return!s||s.ctrl!==n.ctrlKey||s.meta!==n.metaKey||s.alt!==n.altKey||s.shift!==n.shiftKey?!1:n.keyCode===s.keyCode||n.charCode&&n.charCode===s.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const sX=()=>{const e={},n={},s={},a={},f={},g={},y={},C={},A=(I,L)=>(W,re)=>{I[W.toLowerCase()]=Ot(ie({},re),{type:L})},M=(I,L)=>a[I.toLowerCase()]=L;return{addButton:A(e,"button"),addGroupToolbarButton:A(e,"grouptoolbarbutton"),addToggleButton:A(e,"togglebutton"),addMenuButton:A(e,"menubutton"),addSplitButton:A(e,"splitbutton"),addMenuItem:A(n,"menuitem"),addNestedMenuItem:A(n,"nestedmenuitem"),addToggleMenuItem:A(n,"togglemenuitem"),addAutocompleter:A(s,"autocompleter"),addContextMenu:A(f,"contextmenu"),addContextToolbar:A(g,"contexttoolbar"),addContextForm:A(g,"contextform"),addSidebar:A(y,"sidebar"),addView:A(C,"views"),addIcon:M,getAll:()=>({buttons:e,menuItems:n,icons:a,popups:s,contextMenus:f,contextToolbars:g,sidebars:y,views:C})}},rX=()=>{const e=sX();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Fg=or.DOM,iX=Lt.extend,aX=Lt.each;class IC{constructor(n,s,a){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=a,this.documentBaseUrl=a.documentBaseURL,iX(this,U5);const f=this;this.id=n,this.hidden=!1;const g=dY(a.defaultOptions,s);this.options=KY(f,g),i3(f);const y=this.options.get;y("deprecation_warnings")&&xee(s,g);const C=y("suffix");C&&(a.suffix=C),this.suffix=a.suffix;const A=y("base_url");A&&a._setBaseUrl(A),this.baseUri=a.baseURI;const M=sr(f);M&&(vi.ScriptLoader._setReferrerPolicy(M),or.DOM.styleSheetLoader._setReferrerPolicy(M));const I=Ew(f);ae(I)&&or.DOM.styleSheetLoader._setContentCssCors(I),Ya.languageLoad=y("language_load"),Ya.baseURL=a.baseURL,this.setDirty(!1),this.documentBaseURI=new Fc(Dk(f),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Fk(f),this.hasVisual=u7(f),this.shortcuts=new Z5(this),this.editorCommands=new u_(this),l_(this);const L=y("cache_suffix");L&&(sn.cacheSuffix=L.replace(/^[\?\&]+/,"")),this.ui={registry:rX(),styleSheetLoader:void 0,show:ge,hide:ge,setEnabled:ge,isEnabled:Ze},this.mode=QY(f),a.dispatch("SetupEditor",{editor:this});const W=x3(f);Oe(W)&&W.call(f,f)}render(){rY(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Hh(this)}translate(n){return iu.translate(n)}getParam(n,s,a){const f=this.options;return f.isRegistered(n)||(ae(a)?f.register(n,{processor:a,default:s}):f.register(n,{processor:Ze,default:s})),!f.isSet(n)&&!$e(s)?s:f.get(n)}hasPlugin(n,s){return Je(Tw(this),n)?s?yg.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,s,a){this.editorCommands.addCommand(n,s,a)}addQueryStateHandler(n,s,a){this.editorCommands.addQueryStateHandler(n,s,a)}addQueryValueHandler(n,s,a){this.editorCommands.addQueryValueHandler(n,s,a)}addShortcut(n,s,a,f){this.shortcuts.add(n,s,a,f)}execCommand(n,s,a,f){return this.editorCommands.execCommand(n,s,a,f)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Fg.show(n.getContainer()),Fg.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Fg.hide(n.getContainer()),Fg.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,s){this.dispatch("ProgressState",{state:n,time:s})}load(n={}){const s=this,a=s.getElement();if(s.removed)return"";if(a){const f=Ot(ie({},n),{load:!0}),g=B2(a)?a.value:a.innerHTML,y=s.setContent(g,f);return f.no_events||s.dispatch("LoadContent",Ot(ie({},f),{element:a})),y}else return""}save(n={}){const s=this;let a=s.getElement();if(!a||!s.initialized||s.removed)return"";const f=Ot(ie({},n),{save:!0,element:a});let g=s.getContent(f);const y=Ot(ie({},f),{content:g});if(y.no_events||s.dispatch("SaveContent",y),y.format==="raw"&&s.dispatch("RawSaveContent",y),g=y.content,B2(a))a.value=g;else{(n.is_removing||!s.inline)&&(a.innerHTML=g);const C=Fg.getParent(s.id,"form");C&&aX(C.elements,A=>A.name===s.id?(A.value=g,!1):!0)}return y.element=f.element=a=null,y.set_dirty!==!1&&s.setDirty(!1),g}setContent(n,s){return IT(this,n,s)}getContent(n){return GN(this,n)}insertContent(n,s){s&&(n=iX({content:n},s)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?IT(this,this.startContent,{format:"raw"}):IT(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const s=!this.isNotDirty;this.isNotDirty=!n,n&&n!==s&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Fg.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Fg.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const s=n.iframeElement;s&&(n.contentWindow=s.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const s=n.getWin();s&&(n.contentDocument=s.document)}return n.contentDocument}getBody(){var n,s;const a=this.getDoc();return(s=(n=this.bodyElement)!==null&&n!==void 0?n:a==null?void 0:a.body)!==null&&s!==void 0?s:null}convertURL(n,s,a){const f=this,g=f.options.get,y=m7(f);if(Oe(y))return y.call(f,n,a,!0,s);if(!g("convert_urls")||a==="link"||be(a)&&a.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const C=new Fc(n);return C.protocol!=="http"&&C.protocol!=="https"&&C.protocol!==""?n:g("relative_urls")?f.documentBaseURI.toRelative(n):(n=f.documentBaseURI.toAbsolute(n,g("remove_script_host")),n)}addVisual(n){fY(this,n)}setEditableRoot(n){o_(this,n)}hasEditableRoot(){return TC(this)}remove(){PU(this)}destroy(n){NU(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const N1=or.DOM,LC=Lt.each;let q5=!1,$C,Sl=[];const HC=e=>{const n=e.type;LC(cm.get(),s=>{switch(n){case"scroll":s.dispatch("ScrollWindow",e);break;case"resize":s.dispatch("ResizeWindow",e);break}})},G5=e=>{if(e!==q5){const n=or.DOM;e?(n.bind(window,"resize",HC),n.bind(window,"scroll",HC)):(n.unbind(window,"resize",HC),n.unbind(window,"scroll",HC)),q5=e}},K5=e=>{const n=Sl;return Sl=Me(Sl,s=>e!==s),cm.activeEditor===e&&(cm.activeEditor=Sl.length>0?Sl[0]:null),cm.focusedEditor===e&&(cm.focusedEditor=null),n.length!==Sl.length},lX=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(K5(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},cX=document.compatMode!=="CSS1Compat",cm=Ot(ie({},m_),{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.3",releaseDate:"2024-02-08",i18n:iu,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",s="",a=Fc.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/"));const f=window.tinymce||window.tinyMCEPreInit;if(f)n=f.base||f.baseURL,s=f.suffix;else{const g=document.getElementsByTagName("script");for(let y=0;y<g.length;y++){const C=g[y].src||"";if(C==="")continue;const A=C.substring(C.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(C)){A.indexOf(".min")!==-1&&(s=".min"),n=C.substring(0,C.lastIndexOf("/"));break}}if(!n&&document.currentScript){const y=document.currentScript.src;y.indexOf(".min")!==-1&&(s=".min"),n=y.substring(0,y.lastIndexOf("/"))}}e.baseURL=new Fc(a).toAbsolute(n),e.documentBaseURL=a,e.baseURI=new Fc(e.baseURL),e.suffix=s,s9(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const s=e.suffix;s&&(this.suffix=s),this.defaultOptions=e;const a=e.plugin_base_urls;a!==void 0&&$t(a,(f,g)=>{Ya.PluginManager.urls[g]=f})},init(e){const n=this;let s;const a=Lt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),f=(I,L)=>I.inline&&L.tagName.toLowerCase()in a,g=I=>{let L=I.id;return L||(L=us(I,"name").filter(W=>!N1.get(W)).getOrThunk(N1.uniqueId),I.setAttribute("id",L)),L},y=I=>{const L=e[I];if(L)return L.apply(n,[])},C=I=>sn.browser.isIE()||sn.browser.isEdge()?(nv("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):cX?(nv("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Z(I.selector)?N1.select(I.selector):ae(I.target)?[I.target]:[];let A=I=>{s=I};const M=()=>{let I=0;const L=[];let W;const re=(de,te,fe)=>{const Fe=new IC(de,te,n);L.push(Fe),Fe.on("init",()=>{++I===W.length&&A(L)}),Fe.targetElm=Fe.targetElm||fe,Fe.render()};N1.unbind(window,"ready",M),y("onpageload"),W=Qo(C(e)),Lt.each(W,de=>{lX(n.get(de.id))}),W=Lt.grep(W,de=>!n.get(de.id)),W.length===0?A([]):LC(W,de=>{f(e,de)?nv("Could not initialize inline editor on invalid inline target element",de):re(g(de),e,de)})};return N1.bind(window,"ready",M),new Promise(I=>{s?I(s):A=L=>{I(L)}})},get(e){return arguments.length===0?Sl.slice(0):Z(e)?ot(Sl,n=>n.id===e).getOr(null):ht(e)&&Sl[e]?Sl[e]:null},add(e){const n=this,s=n.get(e.id);return s===e||(s===null&&Sl.push(e),G5(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),$C||($C=a=>{const f=n.dispatch("BeforeUnload");if(f.returnValue)return a.preventDefault(),a.returnValue=f.returnValue,f.returnValue},window.addEventListener("beforeunload",$C))),e},createEditor(e,n){return this.add(new IC(e,n,this))},remove(e){const n=this;let s;if(!e){for(let a=Sl.length-1;a>=0;a--)n.remove(Sl[a]);return}if(Z(e)){LC(N1.select(e),a=>{s=n.get(a.id),s&&n.remove(s)});return}return s=e,K(n.get(s.id))?null:(K5(s)&&n.dispatch("RemoveEditor",{editor:s}),Sl.length===0&&window.removeEventListener("beforeunload",$C),s.remove(),G5(Sl.length>0),s)},execCommand(e,n,s){var a;const f=this,g=be(s)?(a=s.id)!==null&&a!==void 0?a:s.index:s;switch(e){case"mceAddEditor":{if(!f.get(g)){const y=s.options;new IC(g,y,f).render()}return!0}case"mceRemoveEditor":{const y=f.get(g);return y&&y.remove(),!0}case"mceToggleEditor":{const y=f.get(g);return y?(y.isHidden()?y.show():y.hide(),!0):(f.execCommand("mceAddEditor",!1,s),!0)}}return f.activeEditor?f.activeEditor.execCommand(e,n,s):!1},triggerSave:()=>{LC(Sl,e=>{e.save()})},addI18n:(e,n)=>{iu.add(e,n)},translate:e=>iu.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Fc(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Fc(this.baseURL)}});cm.setup();const uX=(()=>{const e=Mh(),n=g=>({items:g,types:Fo(g),getType:y=>us(g,y).getOrUndefined()}),s=g=>{e.set(g)},a=()=>e.get().getOrUndefined(),f=e.clear;return{FakeClipboardItem:n,write:s,read:a,clear:f}})(),Y5=Math.min,Ig=Math.max,VC=Math.round,X5=(e,n,s)=>{let a=n.x,f=n.y;const g=e.w,y=e.h,C=n.w,A=n.h,M=(s||"").split("");return M[0]==="b"&&(f+=A),M[1]==="r"&&(a+=C),M[0]==="c"&&(f+=VC(A/2)),M[1]==="c"&&(a+=VC(C/2)),M[3]==="b"&&(f-=y),M[4]==="r"&&(a-=g),M[3]==="c"&&(f-=VC(y/2)),M[4]==="c"&&(a-=VC(g/2)),B1(a,f,g,y)},dX=(e,n,s,a)=>{for(let f=0;f<a.length;f++){const g=X5(e,n,a[f]);if(g.x>=s.x&&g.x+g.w<=s.w+s.x&&g.y>=s.y&&g.y+g.h<=s.h+s.y)return a[f]}return null},fX=(e,n,s)=>B1(e.x-n,e.y-s,e.w+n*2,e.h+s*2),hX=(e,n)=>{const s=Ig(e.x,n.x),a=Ig(e.y,n.y),f=Y5(e.x+e.w,n.x+n.w),g=Y5(e.y+e.h,n.y+n.h);return f-s<0||g-a<0?null:B1(s,a,f-s,g-a)},mX=(e,n,s)=>{let a=e.x,f=e.y,g=e.x+e.w,y=e.y+e.h;const C=n.x+n.w,A=n.y+n.h,M=Ig(0,n.x-a),I=Ig(0,n.y-f),L=Ig(0,g-C),W=Ig(0,y-A);return a+=M,f+=I,s&&(g+=M,y+=I,a-=L,f-=W),g-=L,y-=W,B1(a,f,g-a,y-f)},B1=(e,n,s,a)=>({x:e,y:n,w:s,h:a}),J5={inflate:fX,relativePosition:X5,findBestRelativePosition:dX,intersect:hX,clamp:mX,create:B1,fromClientRect:e=>B1(e.left,e.top,e.width,e.height)},gX=(e,n,s=1e3)=>{let a=!1,f=null;const g=M=>(...I)=>{a||(a=!0,f!==null&&(clearTimeout(f),f=null),M.apply(null,I))},y=g(e),C=g(n);return{start:(...M)=>{!a&&f===null&&(f=setTimeout(()=>C.apply(null,M),s))},resolve:y,reject:C}},pX=(()=>{const e={},n={},s={};return{load:(A,M)=>{const I=`Script at URL "${M}" failed to load`,L=`Script at URL "${M}" did not call \`tinymce.Resource.add('${A}', data)\` within 1 second`;if(e[A]!==void 0)return e[A];{const W=new Promise((re,de)=>{const te=gX(re,de);n[A]=te.resolve,vi.ScriptLoader.loadScript(M).then(()=>te.start(L),()=>te.reject(I))});return e[A]=W,W}},add:(A,M)=>{n[A]!==void 0&&(n[A](M),delete n[A]),e[A]=Promise.resolve(M),s[A]=M},has:A=>A in s,get:A=>s[A],unload:A=>{delete e[A]}}})(),bX=()=>(()=>{let e={},n=[];const s={getItem:a=>{const f=e[a];return f||null},setItem:(a,f)=>{n.push(a),e[a]=String(f)},key:a=>n[a],removeItem:a=>{n=n.filter(f=>f===a),delete e[a]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(s,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),s})();let zv;try{const e="__storage_test__";zv=window.localStorage,zv.setItem(e,e),zv.removeItem(e)}catch(e){zv=bX()}var vX=zv;const yX={geom:{Rect:J5},util:{Delay:pc,Tools:Lt,VK:hn,URI:Fc,EventDispatcher:h_,Observable:m_,I18n:iu,LocalStorage:vX,ImageUploader:JU},dom:{EventUtils:Mc,TreeWalker:tr,TextSeeker:Gm,DOMUtils:or,ScriptLoader:vi,RangeUtils:ig,Serializer:ZN,StyleSheetLoader:G2,ControlSelection:CH,BookmarkManager:ng,Selection:Gh,Event:Mc.Event},html:{Styles:tk,Entities:Dh,Node:$a,Schema:Hf,DomParser:bu,Writer:lR,Serializer:Vh},Env:sn,AddOnManager:Ya,Annotator:yA,Formatter:jT,UndoManager:ZT,EditorCommands:u_,WindowManager:nB,NotificationManager:HT,EditorObservable:U5,Shortcuts:Z5,Editor:IC,FocusManager:z4,EditorManager:cm,DOM:or.DOM,ScriptLoader:vi.ScriptLoader,PluginManager:yg,ThemeManager:lh,ModelManager:Lc,IconManager:Qb,Resource:pX,FakeClipboard:uX,trim:Lt.trim,isArray:Lt.isArray,is:Lt.is,toArray:Lt.toArray,makeMap:Lt.makeMap,each:Lt.each,map:Lt.map,grep:Lt.grep,inArray:Lt.inArray,extend:Lt.extend,walk:Lt.walk,resolve:Lt.resolve,explode:Lt.explode,_addCacheSuffix:Lt._addCacheSuffix},Q5=Lt.extend(cm,yX),e$=e=>{try{u.exports=e}catch(n){}};(e=>{window.tinymce=e,window.tinyMCE=e})(Q5),e$(Q5)})()})(aae);var W1e=aae.exports;const ey=$oe(W1e);(function(){const u=Object.getPrototypeOf,o=(t,r,c)=>{var h;return c(t,r.prototype)?!0:((h=t.constructor)===null||h===void 0?void 0:h.name)===r.name},i=t=>{const r=typeof t;return t===null?"null":r==="object"&&Array.isArray(t)?"array":r==="object"&&o(t,String,(c,h)=>h.isPrototypeOf(c))?"string":r},l=t=>r=>i(r)===t,d=t=>r=>typeof r===t,m=t=>r=>t===r,p=(t,r)=>x(t)&&o(t,r,(c,h)=>u(c)===h),v=l("string"),x=l("object"),k=t=>p(t,Object),T=l("array"),R=m(null),N=d("boolean"),$=m(void 0),U=t=>t==null,X=t=>!U(t),J=d("function"),G=d("number"),le=(t,r)=>{if(T(t)){for(let c=0,h=t.length;c<h;++c)if(!r(t[c]))return!1;return!0}return!1},Z=()=>{},be=t=>()=>t(),He=(t,r)=>(...c)=>t(r.apply(null,c)),Re=(t,r)=>c=>t(r(c)),K=t=>()=>t,Ie=t=>t,$e=(t,r)=>t===r;function Ue(t,...r){return(...c)=>{const h=r.concat(c);return t.apply(null,h)}}const ae=t=>r=>!t(r),Oe=t=>()=>{throw new Error(t)},ht=t=>t(),ne=K(!1),ge=K(!0);class O{constructor(r,c){this.tag=r,this.value=c}static some(r){return new O(!0,r)}static none(){return O.singletonNone}fold(r,c){return this.tag?c(this.value):r()}isSome(){return this.tag}isNone(){return!this.tag}map(r){return this.tag?O.some(r(this.value)):O.none()}bind(r){return this.tag?r(this.value):O.none()}exists(r){return this.tag&&r(this.value)}forall(r){return!this.tag||r(this.value)}filter(r){return!this.tag||r(this.value)?this:O.none()}getOr(r){return this.tag?this.value:r}or(r){return this.tag?this:r}getOrThunk(r){return this.tag?this.value:r()}orThunk(r){return this.tag?this:r()}getOrDie(r){if(this.tag)return this.value;throw new Error(r!=null?r:"Called getOrDie on None")}static from(r){return X(r)?O.some(r):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(r){this.tag&&r(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}O.singletonNone=new O(!1);const Ke=Array.prototype.slice,he=Array.prototype.indexOf,at=Array.prototype.push,qt=(t,r)=>he.call(t,r),Pe=(t,r)=>{const c=qt(t,r);return c===-1?O.none():O.some(c)},We=(t,r)=>qt(t,r)>-1,yt=(t,r)=>{for(let c=0,h=t.length;c<h;c++){const b=t[c];if(r(b,c))return!0}return!1},Be=(t,r)=>{const c=[];for(let h=0;h<t;h++)c.push(r(h));return c},wt=(t,r)=>{const c=[];for(let h=0;h<t.length;h+=r){const b=Ke.call(t,h,h+r);c.push(b)}return c},ce=(t,r)=>{const c=t.length,h=new Array(c);for(let b=0;b<c;b++){const w=t[b];h[b]=r(w,b)}return h},Ze=(t,r)=>{for(let c=0,h=t.length;c<h;c++){const b=t[c];r(b,c)}},V=(t,r)=>{for(let c=t.length-1;c>=0;c--){const h=t[c];r(h,c)}},kn=(t,r)=>{const c=[],h=[];for(let b=0,w=t.length;b<w;b++){const S=t[b];(r(S,b)?c:h).push(S)}return{pass:c,fail:h}},cn=(t,r)=>{const c=[];for(let h=0,b=t.length;h<b;h++){const w=t[h];r(w,h)&&c.push(w)}return c},no=(t,r,c)=>(V(t,(h,b)=>{c=r(c,h,b)}),c),Do=(t,r,c)=>(Ze(t,(h,b)=>{c=r(c,h,b)}),c),Cs=(t,r,c)=>{for(let h=0,b=t.length;h<b;h++){const w=t[h];if(r(w,h))return O.some(w);if(c(w,h))break}return O.none()},Je=(t,r)=>Cs(t,r,ne),Bt=(t,r)=>{for(let c=0,h=t.length;c<h;c++){const b=t[c];if(r(b,c))return O.some(c)}return O.none()},tt=t=>{const r=[];for(let c=0,h=t.length;c<h;++c){if(!T(t[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+t);at.apply(r,t[c])}return r},ue=(t,r)=>tt(ce(t,r)),xe=(t,r)=>{for(let c=0,h=t.length;c<h;++c){const b=t[c];if(r(b,c)!==!0)return!1}return!0},Ne=t=>{const r=Ke.call(t,0);return r.reverse(),r},Me=(t,r)=>cn(t,c=>!We(r,c)),kt=(t,r)=>{const c={};for(let h=0,b=t.length;h<b;h++){const w=t[h];c[String(w)]=r(w,h)}return c},ve=t=>[t],je=(t,r)=>{const c=Ke.call(t,0);return c.sort(r),c},ot=(t,r)=>r>=0&&r<t.length?O.some(t[r]):O.none(),en=t=>ot(t,0),Wn=t=>ot(t,t.length-1),On=J(Array.from)?Array.from:t=>Ke.call(t),ho=(t,r)=>{for(let c=0;c<t.length;c++){const h=r(t[c],c);if(h.isSome())return h}return O.none()},Kn=Object.keys,ls=Object.hasOwnProperty,Ye=(t,r)=>{const c=Kn(t);for(let h=0,b=c.length;h<b;h++){const w=c[h],S=t[w];r(S,w)}},pt=(t,r)=>Rt(t,(c,h)=>({k:h,v:r(c,h)})),Rt=(t,r)=>{const c={};return Ye(t,(h,b)=>{const w=r(h,b);c[w.k]=w.v}),c},Wt=t=>(r,c)=>{t[c]=r},bn=(t,r,c,h)=>{Ye(t,(b,w)=>{(r(b,w)?c:h)(b,w)})},oo=(t,r)=>{const c={},h={};return bn(t,r,Wt(c),Wt(h)),{t:c,f:h}},ao=(t,r)=>{const c={};return bn(t,r,Wt(c),Z),c},Qo=(t,r)=>{const c=[];return Ye(t,(h,b)=>{c.push(r(h,b))}),c},Fo=(t,r)=>{const c=Kn(t);for(let h=0,b=c.length;h<b;h++){const w=c[h],S=t[w];if(r(S,w,t))return O.some(S)}return O.none()},cs=t=>Qo(t,Ie),$t=(t,r)=>xo(t,r)?O.from(t[r]):O.none(),xo=(t,r)=>ls.call(t,r),Qs=(t,r)=>xo(t,r)&&t[r]!==void 0&&t[r]!==null,Sr=(t,r,c=$e)=>t.exists(h=>c(h,r)),Gr=(t,r,c=$e)=>Cr(t,r,c).getOr(t.isNone()&&r.isNone()),pr=t=>{const r=[],c=h=>{r.push(h)};for(let h=0;h<t.length;h++)t[h].each(c);return r},di=t=>{const r=[];for(let c=0;c<t.length;c++){const h=t[c];if(h.isSome())r.push(h.getOrDie());else return O.none()}return O.some(r)},Cr=(t,r,c)=>t.isSome()&&r.isSome()?O.some(c(t.getOrDie(),r.getOrDie())):O.none(),fi=(t,r,c,h)=>t.isSome()&&r.isSome()&&c.isSome()?O.some(h(t.getOrDie(),r.getOrDie(),c.getOrDie())):O.none(),us=(t,r)=>t!=null?O.some(r(t)):O.none(),Bn=(t,r)=>t?O.some(r):O.none(),hi=(t,r)=>t+r,Ge=(t,r)=>t.substring(r),dt=(t,r,c)=>r===""||t.length>=r.length&&t.substr(c,c+r.length)===r,tn=(t,r)=>Ys(t,r)?Ge(t,r.length):t,In=(t,r)=>Hr(t,r)?t:hi(t,r),go=(t,r,c=0,h)=>{const b=t.indexOf(r,c);return b!==-1?$(h)?!0:b+r.length<=h:!1},Ys=(t,r)=>dt(t,r,0),Hr=(t,r)=>dt(t,r,t.length-r.length),_r=(t=>r=>r.replace(t,""))(/^\s+|\s+$/g),ke=t=>t.length>0,Ae=t=>!ke(t),ct=t=>t.style!==void 0&&J(t.style.getPropertyValue),xt=(t,r)=>{const h=(r||document).createElement("div");if(h.innerHTML=t,!h.hasChildNodes()||h.childNodes.length>1){const b="HTML does not have a single root node";throw new Error(b)}return _o(h.childNodes[0])},An=(t,r)=>{const h=(r||document).createElement(t);return _o(h)},Pn=(t,r)=>{const h=(r||document).createTextNode(t);return _o(h)},_o=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Tt={fromHtml:xt,fromTag:An,fromText:Pn,fromDom:_o,fromPoint:(t,r,c)=>O.from(t.dom.elementFromPoint(r,c)).map(_o)},Lo=typeof window!="undefined"?window:Function("return this;")(),Se=(t,r)=>{let c=r!=null?r:Lo;for(let h=0;h<t.length&&c!==void 0&&c!==null;++h)c=c[t[h]];return c},Ee=(t,r)=>{const c=t.split(".");return Se(c,r)},Dt=(t,r)=>Ee(t,r),nn=(t,r)=>{const c=Dt(t,r);if(c==null)throw new Error(t+" not available on this browser");return c},an=Object.getPrototypeOf,Dn=t=>nn("HTMLElement",t),Mn=t=>{const r=Ee("ownerDocument.defaultView",t);return x(t)&&(Dn(r).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(an(t).constructor.name))},En=9,$n=11,Vn=1,Xo=3,Ts=t=>t.dom.nodeName.toLowerCase(),Ii=t=>t.dom.nodeType,Oa=t=>r=>Ii(r)===t,Yl=t=>Po(t)&&Mn(t.dom),Po=Oa(Vn),Ho=Oa(Xo),ds=Oa(En),ji=Oa($n),Li=t=>r=>Po(r)&&Ts(r)===t,Mr=(t,r)=>{const c=t.dom;if(c.nodeType!==Vn)return!1;{const h=c;if(h.matches!==void 0)return h.matches(r);if(h.msMatchesSelector!==void 0)return h.msMatchesSelector(r);if(h.webkitMatchesSelector!==void 0)return h.webkitMatchesSelector(r);if(h.mozMatchesSelector!==void 0)return h.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")}},ll=t=>t.nodeType!==Vn&&t.nodeType!==En&&t.nodeType!==$n||t.childElementCount===0,Ei=(t,r)=>{const c=r===void 0?document:r.dom;return ll(c)?[]:ce(c.querySelectorAll(t),Tt.fromDom)},Ec=(t,r)=>{const c=r===void 0?document:r.dom;return ll(c)?O.none():O.from(c.querySelector(t)).map(Tt.fromDom)},bs=(t,r)=>t.dom===r.dom,ma=(t,r)=>{const c=t.dom,h=r.dom;return c===h?!1:c.contains(h)},Zi=t=>Tt.fromDom(t.dom.ownerDocument),Za=t=>ds(t)?t:Zi(t),oa=t=>Tt.fromDom(Za(t).dom.documentElement),Da=t=>Tt.fromDom(Za(t).dom.defaultView),mi=t=>O.from(t.dom.parentNode).map(Tt.fromDom),Tc=t=>mi(t),ga=t=>O.from(t.dom.parentElement).map(Tt.fromDom),Jc=(t,r)=>{const c=J(r)?r:ne;let h=t.dom;const b=[];for(;h.parentNode!==null&&h.parentNode!==void 0;){const w=h.parentNode,S=Tt.fromDom(w);if(b.push(S),c(S)===!0)break;h=w}return b},pa=t=>O.from(t.dom.offsetParent).map(Tt.fromDom),Xl=t=>O.from(t.dom.nextSibling).map(Tt.fromDom),$i=t=>ce(t.dom.childNodes,Tt.fromDom),cl=(t,r)=>{const c=t.dom.childNodes;return O.from(c[r]).map(Tt.fromDom)},Oc=t=>cl(t,0),Qc=(t,r)=>({element:t,offset:r}),Ad=(t,r)=>{const c=$i(t);return c.length>0&&r<c.length?Qc(c[r],0):Qc(t,r)},Q=t=>ji(t)&&X(t.dom.host),Te=J(Element.prototype.attachShadow)&&J(Node.prototype.getRootNode),qe=K(Te),Ct=Te?t=>Tt.fromDom(t.dom.getRootNode()):Za,Ut=t=>Q(t)?t:Tt.fromDom(Za(t).dom.body),jn=t=>Os(t).isSome(),Os=t=>{const r=Ct(t);return Q(r)?O.some(r):O.none()},Ms=t=>Tt.fromDom(t.dom.host),vs=t=>{if(qe()&&X(t.target)){const r=Tt.fromDom(t.target);if(Po(r)&&Xs(r)&&t.composed&&t.composedPath){const c=t.composedPath();if(c)return en(c)}}return O.from(t.target)},Xs=t=>X(t.dom.shadowRoot),jo=t=>{const r=Ho(t)?t.dom.parentNode:t.dom;if(r==null||r.ownerDocument===null)return!1;const c=r.ownerDocument;return Os(Tt.fromDom(r)).fold(()=>c.body.contains(r),Re(jo,Ms))},fr=()=>Ti(Tt.fromDom(document)),Ti=t=>{const r=t.dom.body;if(r==null)throw new Error("Body is not available yet");return Tt.fromDom(r)},Ru=(t,r,c)=>{if(v(c)||N(c)||G(c))t.setAttribute(r,c+"");else throw new Error("Attribute value was not simple")},sn=(t,r,c)=>{Ru(t.dom,r,c)},Pu=(t,r)=>{const c=t.dom;Ye(r,(h,b)=>{Ru(c,b,h)})},Vr=(t,r)=>{const c=t.dom.getAttribute(r);return c===null?void 0:c},z=(t,r)=>O.from(Vr(t,r)),se=(t,r)=>{const c=t.dom;return c&&c.hasAttribute?c.hasAttribute(r):!1},pe=(t,r)=>{t.dom.removeAttribute(r)},lt=t=>Do(t.dom.attributes,(r,c)=>(r[c.name]=c.value,r),{}),un=(t,r,c)=>{if(!v(c))throw new Error("CSS value must be a string: "+c);ct(t)&&t.style.setProperty(r,c)},Uo=(t,r)=>{ct(t)&&t.style.removeProperty(r)},xn=(t,r,c)=>{const h=t.dom;un(h,r,c)},si=(t,r)=>{const c=t.dom;Ye(r,(h,b)=>{un(c,b,h)})},Lt=(t,r)=>{const c=t.dom;Ye(r,(h,b)=>{h.fold(()=>{Uo(c,b)},w=>{un(c,b,w)})})},er=(t,r)=>{const c=t.dom,b=window.getComputedStyle(c).getPropertyValue(r);return b===""&&!jo(t)?ba(c,r):b},ba=(t,r)=>ct(t)?t.style.getPropertyValue(r):"",js=(t,r)=>{const c=t.dom,h=ba(c,r);return O.from(h).filter(b=>b.length>0)},Kr=t=>{const r={},c=t.dom;if(ct(c))for(let h=0;h<c.style.length;h++){const b=c.style.item(h);r[b]=c.style[b]}return r},Ed=(t,r,c)=>{const h=Tt.fromTag(t);return xn(h,r,c),js(h,r).isSome()},es=(t,r)=>{const c=t.dom;Uo(c,r),Sr(z(t,"style").map(_r),"")&&pe(t,"style")},ul=t=>t.dom.offsetWidth,qa=(t,r)=>{const c=(E,D)=>{if(!G(D)&&!D.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+D);const P=E.dom;ct(P)&&(P.style[t]=D+"px")},h=E=>{const D=r(E);if(D<=0||D===null){const P=er(E,t);return parseFloat(P)||0}return D},b=h,w=(E,D)=>Do(D,(P,B)=>{const H=er(E,B),j=H===void 0?0:parseInt(H,10);return isNaN(j)?P:P+j},0);return{set:c,get:h,getOuter:b,aggregate:w,max:(E,D,P)=>{const B=w(E,P);return D>B?D-B:0}}},Nu=qa("height",t=>{const r=t.dom;return jo(t)?r.getBoundingClientRect().height:r.offsetHeight}),ir=t=>Nu.get(t),Bu=t=>Nu.getOuter(t),Xg=(t,r)=>{const c=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],h=Nu.max(t,r,c);xn(t,"max-height",h+"px")},Jg=(t,r)=>({left:t,top:r,translate:(h,b)=>Jg(t+h,r+b)}),hr=Jg,Em=t=>{const r=t.getBoundingClientRect();return hr(r.left,r.top)},Td=(t,r)=>t!==void 0?t:r!==void 0?r:0,Ga=t=>{const r=t.dom.ownerDocument,c=r.body,h=r.defaultView,b=r.documentElement;if(c===t.dom)return hr(c.offsetLeft,c.offsetTop);const w=Td(h==null?void 0:h.pageYOffset,b.scrollTop),S=Td(h==null?void 0:h.pageXOffset,b.scrollLeft),E=Td(b.clientTop,c.clientTop),D=Td(b.clientLeft,c.clientLeft);return dl(t).translate(S-D,w-E)},dl=t=>{const r=t.dom,h=r.ownerDocument.body;return h===r?hr(h.offsetLeft,h.offsetTop):jo(t)?Em(r):hr(0,0)},kf=qa("width",t=>t.dom.offsetWidth),ts=(t,r)=>kf.set(t,r),ee=t=>kf.get(t),me=t=>kf.getOuter(t),st=(t,r)=>{const c=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],h=kf.max(t,r,c);xn(t,"max-width",h+"px")},At=t=>{let r=!1,c;return(...h)=>(r||(r=!0,c=t.apply(null,h)),c)},gn=(t,r,c,h)=>{const b=t.isiOS()&&/ipad/i.test(c)===!0,w=t.isiOS()&&!b,S=t.isiOS()||t.isAndroid(),E=S||h("(pointer:coarse)"),D=b||!w&&S&&h("(min-device-width:768px)"),P=w||S&&!D,B=r.isSafari()&&t.isiOS()&&/safari/i.test(c)===!1,H=!P&&!D&&!B;return{isiPad:K(b),isiPhone:K(w),isTablet:K(D),isPhone:K(P),isTouch:K(E),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:K(B),isDesktop:K(H)}},Ao=(t,r)=>{for(let c=0;c<t.length;c++){const h=t[c];if(h.test(r))return h}},kr=(t,r)=>{const c=Ao(t,r);if(!c)return{major:0,minor:0};const h=b=>Number(r.replace(c,"$"+b));return sa(h(1),h(2))},va=(t,r)=>{const c=String(r).toLowerCase();return t.length===0?zr():kr(t,c)},zr=()=>sa(0,0),sa=(t,r)=>({major:t,minor:r}),Js={nu:sa,detect:va,unknown:zr},Ur=(t,r)=>ho(r.brands,c=>{const h=c.brand.toLowerCase();return Je(t,b=>{var w;return h===((w=b.brand)===null||w===void 0?void 0:w.toLowerCase())}).map(b=>({current:b.name,version:Js.nu(parseInt(c.version,10),0)}))}),gi=(t,r)=>{const c=String(r).toLowerCase();return Je(t,h=>h.search(c))},_a=(t,r)=>gi(t,r).map(c=>{const h=Js.detect(c.versionRegexes,r);return{current:c.name,version:h}}),Od=(t,r)=>gi(t,r).map(c=>{const h=Js.detect(c.versionRegexes,r);return{current:c.name,version:h}}),Ir=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Yr=t=>r=>go(r,t),Jl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>go(t,"edge/")&&go(t,"chrome")&&go(t,"safari")&&go(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ir],search:t=>go(t,"chrome")&&!go(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>go(t,"msie")||go(t,"trident")},{name:"Opera",versionRegexes:[Ir,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Yr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Yr("firefox")},{name:"Safari",versionRegexes:[Ir,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(go(t,"safari")||go(t,"mobile/"))&&go(t,"applewebkit")}],Dd=[{name:"Windows",search:Yr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>go(t,"iphone")||go(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Yr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Yr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Yr("linux"),versionRegexes:[]},{name:"Solaris",search:Yr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Yr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Yr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ey={browsers:K(Jl),oses:K(Dd)},Ty="Edge",yh="Chromium",c0="IE",u0="Opera",Qg="Firefox",Oy="Safari",Af=()=>d0({current:void 0,version:Js.unknown()}),d0=t=>{const r=t.current,c=t.version,h=b=>()=>r===b;return{current:r,version:c,isEdge:h(Ty),isChromium:h(yh),isIE:h(c0),isOpera:h(u0),isFirefox:h(Qg),isSafari:h(Oy)}},Fu={unknown:Af,nu:d0,edge:K(Ty),chromium:K(yh),ie:K(c0),opera:K(u0),firefox:K(Qg),safari:K(Oy)},Dy="Windows",ep="iOS",_y="Android",My="Linux",Ry="macOS",wh="Solaris",A2="FreeBSD",ye="ChromeOS",tp=()=>Ol({current:void 0,version:Js.unknown()}),Ol=t=>{const r=t.current,c=t.version,h=b=>()=>r===b;return{current:r,version:c,isWindows:h(Dy),isiOS:h(ep),isAndroid:h(_y),isMacOS:h(Ry),isLinux:h(My),isSolaris:h(wh),isFreeBSD:h(A2),isChromeOS:h(ye)}},Tm={unknown:tp,nu:Ol,windows:K(Dy),ios:K(ep),android:K(_y),linux:K(My),macos:K(Ry),solaris:K(wh),freebsd:K(A2),chromeos:K(ye)},E2={detect:(t,r,c)=>{const h=Ey.browsers(),b=Ey.oses(),w=r.bind(D=>Ur(h,D)).orThunk(()=>_a(h,t)).fold(Fu.unknown,Fu.nu),S=Od(b,t).fold(Tm.unknown,Tm.nu),E=gn(S,w,t,c);return{browser:w,os:S,deviceType:E}}},ys=t=>window.matchMedia(t).matches;let Iu=At(()=>E2.detect(navigator.userAgent,O.from(navigator.userAgentData),ys));const eu=()=>Iu(),Lu=(t,r,c,h,b,w,S)=>({target:t,x:r,y:c,stop:h,prevent:b,kill:w,raw:S}),Ef=t=>{const r=Tt.fromDom(vs(t).getOr(t.target)),c=()=>t.stopPropagation(),h=()=>t.preventDefault(),b=He(h,c);return Lu(r,t.clientX,t.clientY,c,h,b,t)},tu=(t,r)=>c=>{t(c)&&r(Ef(c))},ra=(t,r,c,h,b)=>{const w=tu(c,h);return t.dom.addEventListener(r,w,b),{unbind:Ue(Ny,t,r,w,b)}},$u=(t,r,c,h)=>ra(t,r,c,h,!1),Py=(t,r,c,h)=>ra(t,r,c,h,!0),Ny=(t,r,c,h)=>{t.dom.removeEventListener(r,c,h)},Dc=(t,r)=>{mi(t).each(h=>{h.dom.insertBefore(r.dom,t.dom)})},nu=(t,r)=>{Xl(t).fold(()=>{mi(t).each(b=>{Ma(b,r)})},h=>{Dc(h,r)})},By=(t,r)=>{Oc(t).fold(()=>{Ma(t,r)},h=>{t.dom.insertBefore(r.dom,h.dom)})},Ma=(t,r)=>{t.dom.appendChild(r.dom)},pi=(t,r,c)=>{cl(t,c).fold(()=>{Ma(t,r)},h=>{Dc(h,r)})},Tf=(t,r)=>{Ze(r,c=>{Ma(t,c)})},Om=t=>{t.dom.textContent="",Ze($i(t),r=>{_c(r)})},_c=t=>{const r=t.dom;r.parentNode!==null&&r.parentNode.removeChild(r)},Ra=t=>{const r=t!==void 0?t.dom:document,c=r.body.scrollLeft||r.documentElement.scrollLeft,h=r.body.scrollTop||r.documentElement.scrollTop;return hr(c,h)},Fy=(t,r,c)=>{const b=(c!==void 0?c.dom:document).defaultView;b&&b.scrollTo(t,r)},T2=t=>{const r=t===void 0?window:t;return eu().browser.isFirefox()?O.none():O.from(r.visualViewport)},np=(t,r,c,h)=>({x:t,y:r,width:c,height:h,right:t+c,bottom:r+h}),op=t=>{const r=t===void 0?window:t,c=r.document,h=Ra(Tt.fromDom(c));return T2(r).fold(()=>{const b=r.document.documentElement,w=b.clientWidth,S=b.clientHeight;return np(h.left,h.top,w,S)},b=>np(Math.max(b.pageLeft,h.left),Math.max(b.pageTop,h.top),b.width,b.height))},Dm=()=>Tt.fromDom(document),Hu=(t,r)=>t.view(r).fold(K([]),h=>{const b=t.owner(h),w=Hu(t,b);return[h].concat(w)}),h0=(t,r)=>{const c=r.owner(t),h=Hu(r,c);return O.some(h)};var D2=Object.freeze({__proto__:null,view:t=>{var r;return(t.dom===document?O.none():O.from((r=t.dom.defaultView)===null||r===void 0?void 0:r.frameElement)).map(Tt.fromDom)},owner:t=>Zi(t)});const xh=t=>{const r=Dm(),c=Ra(r);return h0(t,D2).fold(Ue(Ga,t),b=>{const w=dl(t),S=no(b,(E,D)=>{const P=dl(D);return{left:E.left+P.left,top:E.top+P.top}},{left:0,top:0});return hr(S.left+w.left+c.left,S.top+w.top+c.top)})},Iy=(t,r,c)=>({point:t,width:r,height:c}),Sh=(t,r,c,h)=>({x:t,y:r,width:c,height:h}),Xr=(t,r,c,h)=>({x:t,y:r,width:c,height:h,right:t+c,bottom:r+h}),Ar=t=>{const r=Ga(t),c=me(t),h=Bu(t);return Xr(r.left,r.top,c,h)},fl=t=>{const r=xh(t),c=me(t),h=Bu(t);return Xr(r.left,r.top,c,h)},m0=(t,r)=>{const c=Math.max(t.x,r.x),h=Math.max(t.y,r.y),b=Math.min(t.right,r.right),w=Math.min(t.bottom,r.bottom),S=b-c,E=w-h;return Xr(c,h,S,E)},_2=(t,r)=>Do(r,(c,h)=>m0(c,h),t),qi=()=>op(window);var Of=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Ch=t=>{const r=w=>w(t),c=K(t),h=()=>b,b={tag:!0,inner:t,fold:(w,S)=>S(t),isValue:ge,isError:ne,map:w=>Eo.value(w(t)),mapError:h,bind:r,exists:r,forall:r,getOr:c,or:h,getOrThunk:c,orThunk:h,getOrDie:c,each:w=>{w(t)},toOptional:()=>O.some(t)};return b},_d=t=>{const r=()=>c,c={tag:!1,inner:t,fold:(h,b)=>h(t),isValue:ne,isError:ge,map:r,mapError:h=>Eo.error(h(t)),bind:r,exists:ne,forall:ge,getOr:Ie,or:Ie,getOrThunk:ht,orThunk:ht,getOrDie:Oe(String(t)),each:Z,toOptional:O.none};return c},Eo={value:Ch,error:_d,fromOption:(t,r)=>t.fold(()=>_d(r),Ch)};var Dl;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Dl||(Dl={}));const Df=(t,r,c)=>t.stype===Dl.Error?r(t.serror):c(t.svalue),Ly=t=>{const r=[],c=[];return Ze(t,h=>{Df(h,b=>c.push(b),b=>r.push(b))}),{values:r,errors:c}},$y=(t,r)=>t.stype===Dl.Error?{stype:Dl.Error,serror:r(t.serror)}:t,Hy=(t,r)=>t.stype===Dl.Value?{stype:Dl.Value,svalue:r(t.svalue)}:t,kh=(t,r)=>t.stype===Dl.Value?r(t.svalue):t,ou=(t,r)=>t.stype===Dl.Error?r(t.serror):t,g0=t=>({stype:Dl.Value,svalue:t}),_m=t=>({stype:Dl.Error,serror:t}),Wr={fromResult:t=>t.fold(_m,g0),toResult:t=>Df(t,Eo.error,Eo.value),svalue:g0,partition:Ly,serror:_m,bind:kh,bindError:ou,map:Hy,mapError:$y,fold:Df},Pa=(t,r,c,h)=>({tag:"field",key:t,newKey:r,presence:c,prop:h}),Vu=(t,r)=>({tag:"custom",newKey:t,instantiator:r}),Mm=(t,r,c)=>{switch(t.tag){case"field":return r(t.key,t.newKey,t.presence,t.prop);case"custom":return c(t.newKey,t.instantiator)}},Jr=(t,r)=>r,Vy=(t,r)=>k(t)&&k(r)?Ls(t,r):r,zy=t=>(...r)=>{if(r.length===0)throw new Error("Can't merge zero objects");const c={};for(let h=0;h<r.length;h++){const b=r[h];for(const w in b)xo(b,w)&&(c[w]=t(c[w],b[w]))}return c},Ls=zy(Vy),Md=zy(Jr),ks=()=>({tag:"required",process:{}}),Ql=t=>({tag:"defaultedThunk",process:t}),Rm=t=>Ql(K(t)),Ah=()=>({tag:"option",process:{}}),sp=t=>({tag:"mergeWithThunk",process:t}),rp=t=>sp(K(t)),M2=(t,r)=>t.length>0?Wr.svalue(Ls(r,Md.apply(void 0,t))):Wr.svalue(r),Uy=t=>He(Wr.serror,tt)(t),Wy={consolidateObj:(t,r)=>{const c=Wr.partition(t);return c.errors.length>0?Uy(c.errors):M2(c.values,r)},consolidateArr:t=>{const r=Wr.partition(t);return r.errors.length>0?Uy(r.errors):Wr.svalue(r.values)}},v0=t=>x(t)&&Kn(t).length>100?" removed due to size":JSON.stringify(t,null,2),P2=t=>{const r=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):t;return ce(r,c=>"Failed path: ("+c.path.join(" > ")+`)
`+c.getErrorInfo())},_=(t,r)=>Wr.serror([{path:t,getErrorInfo:r}]),F=(t,r,c)=>_(t,()=>'Could not find valid *required* value for "'+r+'" in '+v0(c)),q=(t,r)=>_(t,()=>'Choice schema did not contain choice key: "'+r+'"'),we=(t,r,c)=>_(t,()=>'The chosen schema: "'+c+'" did not exist in branches: '+v0(r)),De=(t,r)=>_(t,()=>"There are unsupported fields: ["+r.join(", ")+"] specified"),Ht=(t,r)=>_(t,K(r)),Nn=t=>{const r=(h,b)=>Wr.bindError(t(b),w=>Ht(h,w)),c=K("val");return{extract:r,toString:c}},vo=Nn(Wr.svalue),yo=(t,r,c,h)=>$t(r,c).fold(()=>F(t,c,r),h),Qn=(t,r,c,h)=>{const b=$t(t,r).getOrThunk(()=>c(t));return h(b)},Er=(t,r,c)=>c($t(t,r)),Gi=(t,r,c,h)=>{const b=$t(t,r).map(w=>w===!0?c(t):w);return h(b)},ec=(t,r,c,h,b)=>{const w=E=>b.extract(r.concat([h]),E),S=E=>E.fold(()=>Wr.svalue(O.none()),D=>{const P=b.extract(r.concat([h]),D);return Wr.map(P,O.some)});switch(t.tag){case"required":return yo(r,c,h,w);case"defaultedThunk":return Qn(c,h,t.process,w);case"option":return Er(c,h,S);case"defaultedOptionThunk":return Gi(c,h,t.process,S);case"mergeWithThunk":return Qn(c,h,K({}),E=>{const D=Ls(t.process(c),E);return w(D)})}},Rd=(t,r,c)=>{const h={},b=[];for(const w of c)Mm(w,(S,E,D,P)=>{const B=ec(D,t,r,S,P);Wr.fold(B,H=>{b.push(...H)},H=>{h[E]=H})},(S,E)=>{h[S]=E(r)});return b.length>0?Wr.serror(b):Wr.svalue(h)},ya=t=>({extract:(h,b)=>t().extract(h,b),toString:()=>t().toString()}),yM=t=>Kn(ao(t,X)),tr=t=>{const r=Ln(t),c=no(t,(b,w)=>Mm(w,S=>Ls(b,{[S]:!0}),K(b)),{});return{extract:(b,w)=>{const S=N(w)?[]:yM(w),E=cn(S,D=>!Qs(c,D));return E.length===0?r.extract(b,w):De(b,E)},toString:r.toString}},Ln=t=>({extract:(h,b)=>Rd(h,b,t),toString:()=>`obj{
`+ce(t,b=>Mm(b,(w,S,E,D)=>w+" -> "+D.toString(),(w,S)=>"state("+w+")")).join(`
`)+"}"}),zu=t=>({extract:(h,b)=>{const w=ce(b,(S,E)=>t.extract(h.concat(["["+E+"]"]),S));return Wy.consolidateArr(w)},toString:()=>"array("+t.toString()+")"}),wn=(t,r)=>{const c=r!==void 0?r:Ie;return{extract:(w,S)=>{const E=[];for(const D of t){const P=D.extract(w,S);if(P.stype===Dl.Value)return{stype:Dl.Value,svalue:c(P.svalue)};E.push(P)}return Wy.consolidateArr(E)},toString:()=>"oneOf("+ce(t,w=>w.toString()).join(", ")+")"}},_f=(t,r)=>{const c=(w,S)=>zu(Nn(t)).extract(w,S);return{extract:(w,S)=>{const E=Kn(S),D=c(w,E);return Wr.bind(D,P=>{const B=ce(P,H=>Pa(H,H,ks(),r));return Ln(B).extract(w,S)})},toString:()=>"setOf("+r.toString()+")"}},$6=(t,r)=>{const c=At(r);return{extract:(w,S)=>c().extract(w,S),toString:()=>c().toString()}},Pm=He(zu,Ln),Ki=K(vo),Nm=(t,r)=>Nn(c=>{const h=typeof c;return t(c)?Wr.svalue(c):Wr.serror(`Expected type: ${r} but got: ${h}`)}),y0=Nm(G,"number"),Yi=Nm(v,"string"),Uu=Nm(N,"boolean"),N2=Nm(J,"function"),Pd=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(r=>Pd(t[r]));default:return!1}},wM=Nn(t=>Pd(t)?Wr.svalue(t):Wr.serror("Expected value to be acceptable for sending via postMessage")),B2=(t,r,c,h)=>$t(c,h).fold(()=>we(t,c,h),w=>w.extract(t.concat(["branch: "+h]),r)),Vt=(t,r)=>({extract:(b,w)=>$t(w,t).fold(()=>q(b,t),E=>B2(b,w,r,E)),toString:()=>"chooseOn("+t+"). Possible values: "+Kn(r)}),H6=()=>zu(vo),w0=t=>Nn(r=>t(r).fold(Wr.serror,Wr.svalue)),Mf=(t,r)=>_f(c=>Wr.fromResult(t(c)),r),x0=(t,r,c)=>{const h=r.extract([t],c);return Wr.mapError(h,b=>({input:c,errors:b}))},Tr=(t,r,c)=>Wr.toResult(x0(t,r,c)),Zs=t=>t.fold(r=>{throw new Error(hl(r))},Ie),Ka=(t,r,c)=>Zs(Tr(t,r,c)),hl=t=>`Errors: 
`+P2(t.errors).join(`
`)+`

Input object: `+v0(t.input),ms=(t,r)=>Vt(t,pt(r,Ln)),S0=(t,r)=>$6(t,r),ia=Pa,Qr=Vu,F2=t=>w0(r=>We(t,r)?Eo.value(r):Eo.error(`Unsupported value: "${r}", choose one of "${t.join(", ")}".`)),Pt=t=>ia(t,t,ks(),Ki()),tc=(t,r)=>ia(t,t,ks(),r),C0=t=>tc(t,y0),ws=t=>tc(t,Yi),Wu=(t,r)=>ia(t,t,ks(),F2(r)),V6=t=>tc(t,Uu),ju=t=>tc(t,N2),I2=(t,r)=>ia(t,t,Ah(),Nn(c=>Wr.serror("The field: "+t+" is forbidden. "+r))),Zu=(t,r)=>ia(t,t,ks(),Ln(r)),L2=(t,r)=>ia(t,t,ks(),Pm(r)),nc=(t,r)=>ia(t,t,ks(),zu(r)),Ds=t=>ia(t,t,Ah(),Ki()),Nd=(t,r)=>ia(t,t,Ah(),r),k0=t=>Nd(t,y0),Na=t=>Nd(t,Yi),xM=(t,r)=>Nd(t,F2(r)),Bm=t=>Nd(t,N2),Fm=(t,r)=>Nd(t,zu(r)),oc=(t,r)=>Nd(t,Ln(r)),Im=(t,r)=>Nd(t,tr(r)),et=(t,r)=>ia(t,t,Rm(r),Ki()),_l=(t,r,c)=>ia(t,t,Rm(r),c),Lm=(t,r)=>_l(t,r,y0),Rf=(t,r)=>_l(t,r,Yi),sc=(t,r,c)=>_l(t,r,F2(c)),Hi=(t,r)=>_l(t,r,Uu),Vi=(t,r)=>_l(t,r,N2),z6=(t,r)=>_l(t,r,wM),qu=(t,r,c)=>_l(t,r,zu(c)),Bd=(t,r,c)=>_l(t,r,Ln(c)),Zn=t=>{let r=t;return{get:()=>r,set:b=>{r=b}}},Ml={generate:t=>{if(!T(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const r=[],c={};return Ze(t,(h,b)=>{const w=Kn(h);if(w.length!==1)throw new Error("one and only one name per case");const S=w[0],E=h[S];if(c[S]!==void 0)throw new Error("duplicate key detected:"+S);if(S==="cata")throw new Error("cannot have a case named cata (sorry)");if(!T(E))throw new Error("case arguments must be an array");r.push(S),c[S]=(...D)=>{const P=D.length;if(P!==E.length)throw new Error("Wrong number of arguments to case "+S+". Expected "+E.length+" ("+E+"), got "+P);return{fold:(...H)=>{if(H.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+H.length);return H[b].apply(null,D)},match:H=>{const j=Kn(H);if(r.length!==j.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+`
Actual: `+j.join(","));if(!xe(r,oe=>We(j,oe)))throw new Error("Not all branches were specified when using match. Specified: "+j.join(", ")+`
Required: `+r.join(", "));return H[S].apply(null,D)},log:H=>{}}}}),c}};Ml.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const rc=t=>{const r=[],c=[];return Ze(t,h=>{h.fold(b=>{r.push(b)},b=>{c.push(b)})}),{errors:r,values:c}},U6=(t,r)=>{const c={};return Ye(t,(h,b)=>{We(r,b)||(c[b]=h)}),c},W6=(t,r)=>({[t]:r}),ip=t=>{const r={};return Ze(t,c=>{r[c.key]=c.value}),r},ap=(t,r)=>U6(t,r),ic=(t,r)=>W6(t,r),Ba=t=>ip(t),SM=(t,r)=>t.length===0?Eo.value(r):Eo.value(Ls(r,Md.apply(void 0,t))),j6=t=>Eo.error(tt(t)),$2=(t,r)=>{const c=rc(t);return c.errors.length>0?j6(c.errors):SM(c.values,r)},jy=t=>J(t)?t:ne,CM=(t,r,c)=>{let h=t.dom;const b=jy(c);for(;h.parentNode;){h=h.parentNode;const w=Tt.fromDom(h),S=r(w);if(S.isSome())return S;if(b(w))break}return O.none()},$m=(t,r,c)=>{const h=r(t),b=jy(c);return h.orThunk(()=>b(t)?O.none():CM(t,r,b))},A0=(t,r)=>bs(t.element,r.event.target),Z6={can:ge,abort:ne,run:Z},Eh=t=>{if(!Qs(t,"can")&&!Qs(t,"abort")&&!Qs(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return ie(ie({},Z6),t)},kM=(t,r)=>(...c)=>Do(t,(h,b)=>h&&r(b).apply(void 0,c),!0),AM=(t,r)=>(...c)=>Do(t,(h,b)=>h||r(b).apply(void 0,c),!1),q6=t=>J(t)?{can:ge,abort:ne,run:t}:t,G6=t=>{const r=kM(t,b=>b.can),c=AM(t,b=>b.abort);return{can:r,abort:c,run:(...b)=>{Ze(t,w=>{w.run.apply(void 0,b)})}}},aa=K,Pf=aa("touchstart"),lp=aa("touchmove"),Hm=aa("touchend"),EM=aa("touchcancel"),bi=aa("mousedown"),Zy=aa("mousemove"),E0=aa("mouseout"),H2=aa("mouseup"),Nf=aa("mouseover"),Bf=aa("focusin"),V2=aa("focusout"),Gu=aa("keydown"),Th=aa("keyup"),Vm=aa("input"),cp=aa("change"),Oh=aa("click"),K6=aa("transitioncancel"),up=aa("transitionend"),Y6=aa("transitionstart"),X6=aa("selectstart"),ei=t=>K("alloy."+t),qy={tap:ei("tap")},dp=ei("focus"),z2=ei("blur.post"),U2=ei("paste.post"),zm=ei("receive"),ac=ei("execute"),Rr=ei("focus.item"),Ku=qy.tap,W2=ei("longpress"),T0=ei("sandbox.close"),j2=ei("typeahead.cancel"),Gy=ei("system.init"),Ky=ei("system.touchmove"),J6=ei("system.touchend"),O0=ei("system.scroll"),D0=ei("system.resize"),Yu=ei("system.attached"),Um=ei("system.detached"),Wm=ei("system.dismissRequested"),TM=ei("system.repositionRequested"),Yy=ei("focusmanager.shifted"),_0=ei("slotcontainer.visibility"),OM=ei("system.external.element.scroll"),DM=ei("change.tab"),Xy=ei("dismiss.tab"),M0=ei("highlight"),R0=ei("dehighlight"),ns=(t,r)=>{Jy(t,t.element,r,{})},Hn=(t,r,c)=>{Jy(t,t.element,r,c)},Ff=t=>{ns(t,ac())},Z2=(t,r,c)=>{Jy(t,r,c,{})},Jy=(t,r,c,h)=>{const b=ie({target:r},h);t.getSystem().triggerEvent(c,r,b)},Q6=(t,r,c,h)=>{const b=Ot(ie({},h),{target:r});t.getSystem().triggerEvent(c,r,b)},q2=(t,r,c,h)=>{t.getSystem().triggerEvent(c,r,h.event)},ar=t=>Ba(t),G2=(t,r)=>({key:t,value:Eh({abort:r})}),VQ=(t,r)=>({key:t,value:Eh({can:r})}),K2=t=>({key:t,value:Eh({run:(r,c)=>{c.event.prevent()}})}),_t=(t,r)=>({key:t,value:Eh({run:r})}),Qy=(t,r,c)=>({key:t,value:Eh({run:(h,b)=>{r.apply(void 0,[h,b].concat(c))}})}),e8=t=>r=>_t(t,r),P0=t=>r=>({key:t,value:Eh({run:(c,h)=>{A0(c,h)&&r(c,h)}})}),t8=(t,r)=>_t(t,(c,h)=>{c.getSystem().getByUid(r).each(b=>{q2(b,b.element,t,h)})}),fp=(t,r,c)=>{const h=r.partUids[c];return t8(t,h)},Y2=(t,r)=>_t(t,(c,h)=>{const b=h.event,w=c.getSystem().getByDom(b.target).getOrThunk(()=>$m(b.target,E=>c.getSystem().getByDom(E).toOptional(),ne).getOr(c));r(c,w,h)}),If=t=>_t(t,(r,c)=>{c.cut()}),n8=t=>_t(t,(r,c)=>{c.stop()}),Lf=(t,r)=>P0(t)(r),nr=P0(Yu()),Fd=P0(Um()),o8=P0(Gy()),$f=e8(ac()),jm=(t,r)=>{const h=(r||document).createElement("div");return h.innerHTML=t,$i(Tt.fromDom(h))},X2=t=>t.dom.innerHTML,hp=(t,r)=>{const h=Zi(t).dom,b=Tt.fromDom(h.createDocumentFragment()),w=jm(r,h);Tf(b,w),Om(t),Ma(t,b)},_M=t=>{const r=Tt.fromTag("div"),c=Tt.fromDom(t.dom.cloneNode(!0));return Ma(r,c),X2(r)},ew=(t,r)=>Tt.fromDom(t.dom.cloneNode(r)),MM=t=>ew(t,!1),s8=t=>ew(t,!0),RM=t=>{if(Q(t))return"#shadow-root";{const r=MM(t);return _M(r)}},Zm=t=>RM(t),zQ=(t,r,c)=>bs(r,t.element)&&!bs(r,c),UQ=ar([VQ(dp(),(t,r)=>{const c=r.event,h=c.originator,b=c.target;return!zQ(t,h,b)})]);var Dh=Object.freeze({__proto__:null,events:UQ});let la=0;const pn=t=>{const c=new Date().getTime(),h=Math.floor(Math.random()*1e9);return la++,t+"_"+h+la+String(c)},r8=K("alloy-id-"),i8=K("data-alloy-id"),a8=r8(),PM=i8(),l8=(t,r)=>{const c=pn(a8+t);return J2(r,c),c},J2=(t,r)=>{Object.defineProperty(t.dom,PM,{value:r,writable:!0})},N0=t=>{const r=Po(t)?t.dom[PM]:null;return O.from(r)},mp=t=>pn(t),tw=Ie,_h=t=>{const r=b=>`The component must be in a context to execute: ${b}`+(t?`
`+Zm(t().element)+" is not in context.":""),c=b=>()=>{throw new Error(r(b))},h=b=>()=>{};return{debugInfo:K("fake"),triggerEvent:h("triggerEvent"),triggerFocus:h("triggerFocus"),triggerEscape:h("triggerEscape"),broadcast:h("broadcast"),broadcastOn:h("broadcastOn"),broadcastEvent:h("broadcastEvent"),build:c("build"),buildOrPatch:c("buildOrPatch"),addToWorld:c("addToWorld"),removeFromWorld:c("removeFromWorld"),addToGui:c("addToGui"),removeFromGui:c("removeFromGui"),getByUid:c("getByUid"),getByDom:c("getByDom"),isConnected:ne}},Xu=_h(),Q2=(t,r,c)=>{const h=c.toString(),b=h.indexOf(")")+1,w=h.indexOf("("),S=h.substring(w+1,b-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:r,parameters:nw(S.slice(0,1).concat(S.slice(3)))}),t},nw=t=>ce(t,r=>Hr(r,"/*")?r.substring(0,r.length-2):r),ow=(t,r)=>{const c=t.toString(),h=c.indexOf(")")+1,b=c.indexOf("("),w=c.substring(b+1,h-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:r,parameters:nw(w)}),t},NM=(t,r)=>{const c=r.toString(),h=c.indexOf(")")+1,b=c.indexOf("("),w=c.substring(b+1,h-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:nw(w.slice(1))}),t},gp=pn("alloy-premade"),Hf=t=>(Object.defineProperty(t.element.dom,gp,{value:t.uid,writable:!0}),ic(gp,t)),c8=t=>xo(t.dom,gp),BM=t=>$t(t,gp),pp=t=>NM((r,...c)=>t(r.getApis(),r,...c),t),Ju={init:()=>lc({readState:K("No State required")})},lc=t=>t,u8=(t,r)=>{const c=ce(r,b=>oc(b.name(),[Pt("config"),et("state",Ju)])),h=Tr("component.behaviours",Ln(c),t.behaviours).fold(b=>{throw new Error(hl(b)+`
Complete spec:
`+JSON.stringify(t,null,2))},Ie);return{list:r,data:pt(h,b=>{const w=b.map(S=>({config:S.config,state:S.state.init(S.config)}));return K(w)})}},FM=t=>t.list,IM=t=>t.data,ek=(t,r)=>{const c={};return Ye(t,(h,b)=>{Ye(h,(w,S)=>{const E=$t(c,S).getOr([]);c[S]=E.concat([r(b,w)])})}),c},su=t=>({classes:$(t.classes)?[]:t.classes,attributes:$(t.attributes)?{}:t.attributes,styles:$(t.styles)?{}:t.styles}),B0=(t,r)=>Ot(ie({},t),{attributes:ie(ie({},t.attributes),r.attributes),styles:ie(ie({},t.styles),r.styles),classes:t.classes.concat(r.classes)}),tk=(t,r,c,h)=>{const b=ie({},r);Ze(c,B=>{b[B.name()]=B.exhibit(t,h)});const w=ek(b,(B,H)=>({name:B,modification:H})),S=B=>no(B,(H,j)=>ie(ie({},j.modification),H),{}),E=no(w.classes,(B,H)=>H.modification.concat(B),[]),D=S(w.attributes),P=S(w.styles);return su({classes:E,attributes:D,styles:P})},d8=(t,r,c,h)=>{try{const b=je(c,(w,S)=>{const E=w[r],D=S[r],P=h.indexOf(E),B=h.indexOf(D);if(P===-1)throw new Error("The ordering for "+t+" does not have an entry for "+E+`.
Order specified: `+JSON.stringify(h,null,2));if(B===-1)throw new Error("The ordering for "+t+" does not have an entry for "+D+`.
Order specified: `+JSON.stringify(h,null,2));return P<B?-1:B<P?1:0});return Eo.value(b)}catch(b){return Eo.error([b])}},f8=(t,r)=>({handler:t,purpose:r}),h8=(t,r)=>({cHandler:t,purpose:r}),m8=(t,r)=>h8(Ue.apply(void 0,[t.handler].concat(r)),t.purpose),sw=t=>t.cHandler,nk=(t,r)=>({name:t,handler:r}),g8=(t,r)=>{const c={};return Ze(t,h=>{c[h.name()]=h.handlers(r)}),c},p8=(t,r,c)=>{const h=ie(ie({},c),g8(r,t));return ek(h,nk)},ok=(t,r,c,h)=>{const b=p8(t,c,h);return v8(b,r)},rw=t=>{const r=q6(t);return(c,h,...b)=>{const w=[c,h].concat(b);r.abort.apply(void 0,w)?h.stop():r.can.apply(void 0,w)&&r.run.apply(void 0,w)}},b8=(t,r)=>Eo.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(ce(r,c=>c.name),null,2)]),F0=(t,r,c)=>{const h=r[c];return h?d8("Event: "+c,"name",t,h).map(b=>{const w=ce(b,S=>S.handler);return G6(w)}):b8(c,t)},v8=(t,r)=>{const c=Qo(t,(h,b)=>(h.length===1?Eo.value(h[0].handler):F0(h,r,b)).map(S=>{const E=rw(S),D=h.length>1?cn(r[b],P=>yt(h,B=>B.name===P)).join(" > "):h[0].name;return ic(b,f8(E,D))}));return $2(c,{})},Mc="alloy.base.behaviour",sk=Ln([ia("dom","dom",ks(),Ln([Pt("tag"),et("styles",{}),et("classes",[]),et("attributes",{}),Ds("value"),Ds("innerHtml")])),Pt("components"),Pt("uid"),et("events",{}),et("apis",{}),ia("eventOrder","eventOrder",rp({[ac()]:["disabling",Mc,"toggling","typeaheadevents"],[dp()]:[Mc,"focusing","keying"],[Gy()]:[Mc,"disabling","toggling","representing"],[Vm()]:[Mc,"representing","streaming","invalidating"],[Um()]:[Mc,"representing","item-events","tooltipping"],[bi()]:["focusing",Mc,"item-type-events"],[Pf()]:["focusing",Mc,"item-type-events"],[Nf()]:["item-type-events","tooltipping"],[zm()]:["receiving","reflecting","tooltipping"]}),Ki()),Ds("domModification")]),y8=t=>Tr("custom.definition",sk,t),rk=t=>Ot(ie({},t.dom),{uid:t.uid,domChildren:ce(t.components,r=>r.element)}),w8=t=>t.domModification.fold(()=>su({}),su),I0=t=>t.events,iw=(t,r)=>{const c=Vr(t,r);return c===void 0||c===""?[]:c.split(" ")},bp=(t,r,c)=>{const b=iw(t,r).concat([c]);return sn(t,r,b.join(" ")),!0},LM=(t,r,c)=>{const h=cn(iw(t,r),b=>b!==c);return h.length>0?sn(t,r,h.join(" ")):pe(t,r),!1},vp=t=>t.dom.classList!==void 0,aw=t=>iw(t,"class"),$M=(t,r)=>bp(t,"class",r),or=(t,r)=>LM(t,"class",r),x8=(t,r)=>We(aw(t),r)?or(t,r):$M(t,r),ti=(t,r)=>{vp(t)?t.dom.classList.add(r):$M(t,r)},HM=t=>{(vp(t)?t.dom.classList:aw(t)).length===0&&pe(t,"class")},wr=(t,r)=>{vp(t)?t.dom.classList.remove(r):or(t,r),HM(t)},VM=(t,r)=>{const c=vp(t)?t.dom.classList.toggle(r):x8(t,r);return HM(t),c},vi=(t,r)=>vp(t)&&t.dom.classList.contains(r),jr=(t,r)=>{Ze(r,c=>{ti(t,c)})},ru=(t,r)=>{Ze(r,c=>{wr(t,c)})},S8=(t,r)=>{Ze(r,c=>{VM(t,c)})},C8=(t,r)=>xe(r,c=>vi(t,c)),L0=t=>{const r=t.dom.classList,c=new Array(r.length);for(let h=0;h<r.length;h++){const b=r.item(h);b!==null&&(c[h]=b)}return c},lw=t=>vp(t)?L0(t):aw(t),Id=t=>t.dom.value,yp=(t,r)=>{if(r===void 0)throw new Error("Value.set was undefined");t.dom.value=r},WQ=(t,r,c)=>cl(t,r).map(b=>{if(c.exists(S=>!bs(S,b))){const S=c.map(Ts).getOr("span"),E=Tt.fromTag(S);return Dc(b,E),E}else return b}),k8=(t,r,c)=>{c.fold(()=>Ma(t,r),h=>{bs(h,r)||(Dc(h,r),_c(h))})},A8=(t,r,c)=>{const h=ce(r,c),b=$i(t);return Ze(b.slice(h.length),_c),h},E8=(t,r,c,h)=>{const b=cl(t,r),w=h(c,b),S=WQ(t,r,b);return k8(t,w.element,S),w},jQ=(t,r,c)=>A8(t,r,(h,b)=>E8(t,b,h,c)),ZQ=(t,r)=>A8(t,r,(c,h)=>{const b=cl(t,h);return k8(t,c,b),c}),iu=(t,r)=>{const c=Kn(t),h=Kn(r),b=Me(h,c),w=oo(t,(S,E)=>!xo(r,E)||S!==r[E]).t;return{toRemove:b,toSet:w}},Ya=(t,r)=>{const Xe=lt(r),{class:c,style:h}=Xe,b=Jv(Xe,["class","style"]),{toSet:w,toRemove:S}=iu(t.attributes,b),E=()=>{Ze(S,Ft=>pe(r,Ft)),Pu(r,w)},D=Kr(r),{toSet:P,toRemove:B}=iu(t.styles,D),H=()=>{Ze(B,Ft=>es(r,Ft)),si(r,P)},j=lw(r),Y=Me(j,t.classes),oe=Me(t.classes,j),Ce=()=>{jr(r,oe),ru(r,Y)},Qe=Ft=>{hp(r,Ft)},Le=()=>{const Ft=t.domChildren;ZQ(r,Ft)},_e=()=>{const Ft=r,Et=t.value.getOrUndefined();Et!==Id(Ft)&&yp(Ft,Et!=null?Et:"")};return E(),Ce(),H(),t.innerHtml.fold(Le,Qe),_e(),r},T8=t=>{const r=Tt.fromTag(t.tag);Pu(r,t.attributes),jr(r,t.classes),si(r,t.styles),t.innerHtml.each(h=>hp(r,h));const c=t.domChildren;return Tf(r,c),t.value.each(h=>{yp(r,h)}),r},O8=(t,r)=>{try{const c=Ya(t,r);return O.some(c)}catch(c){return O.none()}},Mh=t=>t.innerHtml.isSome()&&t.domChildren.length>0,cw=(t,r)=>{const c=b=>Ts(b)===t.tag&&!Mh(t)&&!c8(b),h=r.filter(c).bind(b=>O8(t,b)).getOrThunk(()=>T8(t));return J2(h,t.uid),h},ik=t=>{const r=$t(t,"behaviours").getOr({});return ue(Kn(r),c=>{const h=r[c];return X(h)?[h.me]:[]})},$0=(t,r)=>u8(t,r),qm=t=>{const r=ik(t);return $0(t,r)},wp=(t,r,c)=>{const h=rk(t),b=w8(t),w={"alloy.base.modification":b},S=r.length>0?tk(c,w,r,h):b;return B0(h,S)},H0=(t,r,c)=>{const h={"alloy.base.behaviour":I0(t)};return ok(c,t.eventOrder,r,h).getOrDie()},V0=(t,r)=>{const c=()=>Xe,h=Zn(Xu),b=Zs(y8(t)),w=qm(t),S=FM(w),E=IM(w),D=wp(b,S,E),P=cw(D,r),B=H0(b,S,E),H=Zn(b.components),j=Ft=>{h.set(Ft)},Y=()=>{h.set(_h(c))},oe=()=>{const Ft=$i(P),Et=ue(Ft,St=>h.get().getByDom(St).fold(()=>[],ve));H.set(Et)},Ce=Ft=>{const Et=E;return(J(Et[Ft.name()])?Et[Ft.name()]:()=>{throw new Error("Could not find "+Ft.name()+" in "+JSON.stringify(t,null,2))})()},Qe=Ft=>J(E[Ft.name()]),Le=()=>b.apis,_e=Ft=>E[Ft]().map(Et=>Et.state.readState()).getOr("not enabled"),Xe={uid:t.uid,getSystem:h.get,config:Ce,hasConfigured:Qe,spec:t,readState:_e,getApis:Le,connect:j,disconnect:Y,element:P,syncComponents:oe,components:H.get,events:B};return Xe},z0=(t,r)=>{const c=$t(t,"components").getOr([]);return r.fold(()=>ce(c,wa),h=>ce(c,(b,w)=>uw(b,cl(h,w))))},zM=(t,r)=>{const S=tw(t),{events:c}=S,h=Jv(S,["events"]),b=z0(h,r),w=Ot(ie({},h),{events:ie(ie({},Dh),c),components:b});return Eo.value(V0(w,r))},Lr=t=>{const r=Tt.fromText(t);return UM({element:r})},UM=t=>{const r=Ka("external.component",tr([Pt("element"),Ds("uid")]),t),c=Zn(_h()),h=E=>{c.set(E)},b=()=>{c.set(_h(()=>S))},w=r.uid.getOrThunk(()=>mp("external"));J2(r.element,w);const S={uid:w,getSystem:c.get,config:O.none,hasConfigured:ne,connect:h,disconnect:b,getApis:()=>({}),element:r.element,spec:t,readState:K("No state"),syncComponents:Z,components:K([]),events:{}};return Hf(S)},WM=mp,jM=t=>xo(t,"uid"),uw=(t,r)=>BM(t).getOrThunk(()=>{const c=jM(t)?t:ie({uid:WM("")},t);return zM(c,r).getOrDie()}),wa=t=>uw(t,O.none()),Rc=Hf;var ZM=(t,r,c,h,b)=>t(c,h)?O.some(c):J(b)&&b(c)?O.none():r(c,h,b);const ak=(t,r,c)=>{let h=t.dom;const b=J(c)?c:ne;for(;h.parentNode;){h=h.parentNode;const w=Tt.fromDom(h);if(r(w))return O.some(w);if(b(w))break}return O.none()},xp=(t,r,c)=>ZM((b,w)=>w(b),ak,t,r,c),D8=(t,r)=>{const c=b=>r(Tt.fromDom(b));return Je(t.dom.childNodes,c).map(Tt.fromDom)},_8=(t,r)=>{const c=h=>{for(let b=0;b<h.childNodes.length;b++){const w=Tt.fromDom(h.childNodes[b]);if(r(w))return O.some(w);const S=c(h.childNodes[b]);if(S.isSome())return S}return O.none()};return c(t.dom)},lk=(t,r,c)=>xp(t,r,c).isSome(),cc=(t,r,c)=>ak(t,h=>Mr(h,r),c),dw=(t,r)=>D8(t,c=>Mr(c,r)),Zr=(t,r)=>Ec(r,t),Qu=(t,r,c)=>ZM((b,w)=>Mr(b,w),cc,t,r,c),Sp="aria-controls",Gm=t=>xp(t,c=>{if(!Po(c))return!1;const h=Vr(c,"id");return h!==void 0&&h.indexOf(Sp)>-1}).bind(c=>{const h=Vr(c,"id"),b=Ct(c);return Zr(b,`[${Sp}="${h}"]`)}),Km=()=>{const t=pn(Sp);return{id:t,link:h=>{sn(h,Sp,t)},unlink:h=>{pe(h,Sp)}}},Ym=(t,r)=>Gm(r).exists(c=>Rh(t,c)),Rh=(t,r)=>lk(r,c=>bs(c,t.element),ne)||Ym(t,r),qM="unknown";var Xm;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Xm||(Xm={}));const Jm=Zn({}),U0=(t,r)=>{const c=[],h=new Date().getTime();return{logEventCut:(b,w,S)=>{c.push({outcome:"cut",target:w,purpose:S})},logEventStopped:(b,w,S)=>{c.push({outcome:"stopped",target:w,purpose:S})},logNoParent:(b,w,S)=>{c.push({outcome:"no-parent",target:w,purpose:S})},logEventNoHandlers:(b,w)=>{c.push({outcome:"no-handlers-left",target:w})},logEventResponse:(b,w,S)=>{c.push({outcome:"response",purpose:S,target:w})},write:()=>{const b=new Date().getTime();We(["mousemove","mouseover","mouseout",Gy()],t)}}},M8=(t,r,c)=>{switch($t(Jm.get(),t).orThunk(()=>{const b=Kn(Jm.get());return ho(b,w=>t.indexOf(w)>-1?O.some(Jm.get()[w]):O.none())}).getOr(Xm.NORMAL)){case Xm.NORMAL:return c(fw());case Xm.LOGGING:{const b=U0(t,r),w=c(b);return b.write(),w}case Xm.STOP:return!0}},R8=["alloy/data/Fields","alloy/debugging/Debugging"],GM=()=>{const t=new Error;if(t.stack!==void 0){const r=t.stack.split(`
`);return Je(r,c=>c.indexOf("alloy")>0&&!yt(R8,h=>c.indexOf(h)>-1)).getOr(qM)}else return qM},P8={logEventCut:Z,logEventStopped:Z,logNoParent:Z,logEventNoHandlers:Z,logEventResponse:Z,write:Z},ck=(t,r,c)=>M8(t,r,c),fw=K(P8),Vf=K([Pt("menu"),Pt("selectedMenu")]),uk=K([Pt("item"),Pt("selectedItem")]);K(Ln(uk().concat(Vf())));const N8=K(Ln(uk())),KM=Zu("initSize",[Pt("numColumns"),Pt("numRows")]),B8=()=>tc("markers",N8()),hw=()=>Zu("markers",[Pt("backgroundMenu")].concat(Vf()).concat(uk())),Ph=t=>Zu("markers",ce(t,Pt)),mw=(t,r,c)=>(GM(),ia(r,r,c,w0(h=>Eo.value((...b)=>h.apply(void 0,b))))),os=t=>mw("onHandler",t,Rm(Z)),Rl=t=>mw("onKeyboardHandler",t,Rm(O.none)),ed=t=>mw("onHandler",t,ks()),dk=t=>mw("onKeyboardHandler",t,ks()),qs=(t,r)=>Qr(t,K(r)),gw=t=>Qr(t,Ie),fk=K(KM),Oi=(t,r,c,h,b,w,S,E=!1)=>({x:t,y:r,bubble:c,direction:h,placement:b,restriction:w,label:`${S}-${b}`,alwaysFit:E}),Ld=Ml.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),hk=(t,r,c,h,b,w,S,E,D)=>t.fold(r,c,h,b,w,S,E,D),YM=(t,r,c,h)=>t.fold(r,r,h,h,r,h,c,c),mk=(t,r,c,h)=>t.fold(r,h,r,h,c,c,r,h),pw=Ld.southeast,gk=Ld.southwest,bw=Ld.northeast,$d=Ld.northwest,Nh=Ld.south,XM=Ld.north,bt=Ld.east,W0=Ld.west,Cp=(t,r,c,h)=>{const b=t+r;return b>h?c:b<c?h:b},uc=(t,r,c)=>Math.min(Math.max(t,r),c),pk=(t,r)=>{switch(r){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Or=(t,r)=>kt(["left","right","top","bottom"],c=>$t(r,c).map(h=>pk(t,h))),JM=(t,r,c)=>{const h=(D,P)=>r[D].map(B=>{const H=D==="top"||D==="bottom",j=H?c.top:c.left,oe=(D==="left"||D==="top"?Math.max:Math.min)(B,P)+j;return H?uc(oe,t.y,t.bottom):uc(oe,t.x,t.right)}).getOr(P),b=h("left",t.x),w=h("top",t.y),S=h("right",t.right),E=h("bottom",t.bottom);return Xr(b,w,S-b,E-w)},zf="layout",bk=t=>t.x,vw=(t,r)=>t.x+t.width/2-r.width/2,QM=(t,r)=>t.x+t.width-r.width,yw=(t,r)=>t.y-r.height,vk=t=>t.y+t.height,yk=(t,r)=>t.y+t.height/2-r.height/2,F8=t=>t.x+t.width,e3=(t,r)=>t.x-r.width,ca=(t,r,c)=>Oi(bk(t),vk(t),c.southeast(),pw(),"southeast",Or(t,{left:1,top:3}),zf),ua=(t,r,c)=>Oi(QM(t,r),vk(t),c.southwest(),gk(),"southwest",Or(t,{right:0,top:3}),zf),Xa=(t,r,c)=>Oi(bk(t),yw(t,r),c.northeast(),bw(),"northeast",Or(t,{left:1,bottom:2}),zf),xa=(t,r,c)=>Oi(QM(t,r),yw(t,r),c.northwest(),$d(),"northwest",Or(t,{right:0,bottom:2}),zf),Fa=(t,r,c)=>Oi(vw(t,r),yw(t,r),c.north(),XM(),"north",Or(t,{bottom:2}),zf),Di=(t,r,c)=>Oi(vw(t,r),vk(t),c.south(),Nh(),"south",Or(t,{top:3}),zf),wk=(t,r,c)=>Oi(F8(t),yk(t,r),c.east(),bt(),"east",Or(t,{left:0}),zf),j0=(t,r,c)=>Oi(e3(t,r),yk(t,r),c.west(),W0(),"west",Or(t,{right:1}),zf),xk=()=>[ca,ua,Xa,xa,Di,Fa,wk,j0],Sk=()=>[ua,ca,xa,Xa,Di,Fa,wk,j0],Ck=()=>[Xa,xa,ca,ua,Fa,Di],t3=()=>[xa,Xa,ua,ca,Fa,Di],ww=()=>[ca,ua,Xa,xa,Di,Fa],kk=()=>[ua,ca,xa,Xa,Di,Fa],I8=(t,r)=>r.universal?t:cn(t,c=>We(r.channels,c));var n3=Object.freeze({__proto__:null,events:t=>ar([_t(zm(),(r,c)=>{const h=t.channels,b=Kn(h),w=c,S=I8(b,w);Ze(S,E=>{const D=h[E],P=D.schema,B=Ka("channel["+E+`] data
Receiver: `+Zm(r.element),P,w.data);D.onReceive(r,B)})})])}),$8=[tc("channels",Mf(Eo.value,tr([ed("onReceive"),et("schema",Ki())])))];const Ak=(t,r,c)=>$f(h=>{c(h,t,r)}),xw=(t,r,c)=>o8((h,b)=>{c(h,t,r)}),o3=(t,r,c,h,b,w)=>{const S=tr(t),E=oc(r,[Im("config",t)]);return td(S,E,r,c,h,b,w)},qQ=(t,r,c,h,b,w)=>{const S=t,E=oc(r,[Nd("config",t)]);return td(S,E,r,c,h,b,w)},ml=(t,r,c)=>Q2((b,...w)=>{const S=[b].concat(w);return b.config({name:K(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+c)},E=>{const D=Array.prototype.slice.call(S,1);return r.apply(void 0,[b,E.config,E.state].concat(D))})},c,r),GQ=t=>({key:t,value:void 0}),td=(t,r,c,h,b,w,S)=>{const E=H=>Qs(H,c)?H[c]():O.none(),D=pt(b,(H,j)=>ml(c,H,j)),P=pt(w,(H,j)=>ow(H,j)),B=Ot(ie(ie({},P),D),{revoke:Ue(GQ,c),config:H=>{const j=Ka(c+"-config",t,H);return{key:c,value:{config:j,me:B,configAsRaw:At(()=>Ka(c+"-config",t,H)),initialConfig:H,state:S}}},schema:K(r),exhibit:(H,j)=>Cr(E(H),$t(h,"exhibit"),(Y,oe)=>oe(j,Y.config,Y.state)).getOrThunk(()=>su({})),name:K(c),handlers:H=>E(H).map(j=>$t(h,"events").getOr(()=>({}))(j.config,j.state)).getOr({})});return B},Kt=t=>Ba(t),H8=tr([Pt("fields"),Pt("name"),et("active",{}),et("apis",{}),et("state",Ju),et("extra",{})]),Ji=t=>{const r=Ka("Creating behaviour: "+t.name,H8,t);return o3(r.fields,r.name,r.active,r.apis,r.extra,r.state)},V8=tr([Pt("branchKey"),Pt("branches"),Pt("name"),et("active",{}),et("apis",{}),et("state",Ju),et("extra",{})]),Ek=t=>{const r=Ka("Creating behaviour: "+t.name,V8,t);return qQ(ms(r.branchKey,r.branches),r.name,r.active,r.apis,r.extra,r.state)},s3=K(void 0),Pl=Ji({fields:$8,name:"receiving",active:n3});var U8=Object.freeze({__proto__:null,exhibit:(t,r)=>su({classes:[],styles:r.useFixed()?{}:{position:"relative"}})});const dc=(t,r=!1)=>t.dom.focus({preventScroll:r}),Tk=t=>t.dom.blur(),Z0=t=>{const r=Ct(t).dom;return t.dom===r.activeElement},Hd=(t=Dm())=>O.from(t.dom.activeElement).map(Tt.fromDom),au=t=>Hd(Ct(t)).filter(r=>t.dom.contains(r.dom)),dn=(t,r)=>{const c=Ct(r),h=Hd(c).bind(w=>{const S=E=>bs(w,E);return S(r)?O.some(r):_8(r,S)}),b=t(r);return h.each(w=>{Hd(c).filter(S=>bs(S,w)).fold(()=>{dc(w)},Z)}),b},fc=(t,r,c,h,b)=>{const w=S=>S+"px";return{position:t,left:r.map(w),top:c.map(w),right:h.map(w),bottom:b.map(w)}},r3=t=>Ot(ie({},t),{position:O.some(t.position)}),i3=(t,r)=>{Lt(t,r3(r))},Ok=Ml.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),a3=(t,r,c,h,b,w)=>{const S=r.rect,E=S.x-c,D=S.y-h,P=S.width,B=S.height,H=b-(E+P),j=w-(D+B),Y=O.some(E),oe=O.some(D),Ce=O.some(H),Qe=O.some(j),Le=O.none();return hk(r.direction,()=>fc(t,Y,oe,Le,Le),()=>fc(t,Le,oe,Ce,Le),()=>fc(t,Y,Le,Le,Qe),()=>fc(t,Le,Le,Ce,Qe),()=>fc(t,Y,oe,Le,Le),()=>fc(t,Y,Le,Le,Qe),()=>fc(t,Y,oe,Le,Le),()=>fc(t,Le,oe,Ce,Le))},Dk=(t,r)=>t.fold(()=>{const c=r.rect;return fc("absolute",O.some(c.x),O.some(c.y),O.none(),O.none())},(c,h,b,w)=>a3("absolute",r,c,h,b,w),(c,h,b,w)=>a3("fixed",r,c,h,b,w)),_k=(t,r)=>{const c=Ue(xh,r),h=t.fold(c,c,()=>{const S=Ra();return xh(r).translate(-S.left,-S.top)}),b=me(r),w=Bu(r);return Xr(h.left,h.top,b,w)},W8=(t,r)=>r.fold(()=>t.fold(qi,qi,Xr),c=>t.fold(K(c),K(c),()=>{const h=Mk(t,c.x,c.y);return Xr(h.left,h.top,c.width,c.height)})),Mk=(t,r,c)=>{const h=hr(r,c),b=()=>{const w=Ra();return h.translate(-w.left,-w.top)};return t.fold(K(h),K(h),b)},j8=(t,r,c,h)=>t.fold(r,c,h);Ok.none;const Ia=Ok.relative,q0=Ok.fixed,Z8=(t,r)=>({anchorBox:t,origin:r}),q8=(t,r)=>Z8(t,r),Rk="data-alloy-placement",G8=(t,r)=>{sn(t,Rk,r)},l3=t=>z(t,Rk),c3=t=>pe(t,Rk),G0=Ml.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),K8=(t,r)=>{const{x:c,y:h,right:b,bottom:w}=r,{x:S,y:E,right:D,bottom:P,width:B,height:H}=t,j=S>=c&&S<=b,Y=E>=h&&E<=w,oe=j&&Y,Ce=D<=b&&D>=c,Qe=P<=w&&P>=h,Le=Ce&&Qe,_e=Math.min(B,S>=c?b-S:D-c),Xe=Math.min(H,E>=h?w-E:P-h);return{originInBounds:oe,sizeInBounds:Le,visibleW:_e,visibleH:Xe}},u3=(t,r)=>{const{x:c,y:h,right:b,bottom:w}=r,{x:S,y:E,width:D,height:P}=t,B=Math.max(c,b-D),H=Math.max(h,w-P),j=uc(S,c,B),Y=uc(E,h,H),oe=Math.min(j+D,b)-j,Ce=Math.min(Y+P,w)-Y;return Xr(j,Y,oe,Ce)},Y8=(t,r,c)=>{const h=K(r.bottom-c.y),b=K(c.bottom-r.y),w=YM(t,b,b,h),S=K(r.right-c.x),E=K(c.right-r.x);return{maxWidth:mk(t,E,E,S),maxHeight:w}},X8=(t,r,c,h)=>{const b=t.bubble,w=b.offset,S=JM(h,t.restriction,w),E=t.x+w.left,D=t.y+w.top,P=Xr(E,D,r,c),{originInBounds:B,sizeInBounds:H,visibleW:j,visibleH:Y}=K8(P,S),oe=B&&H,Ce=oe?P:u3(P,S),Qe=Ce.width>0&&Ce.height>0,{maxWidth:Le,maxHeight:_e}=Y8(t.direction,Ce,h),Xe={rect:Ce,maxHeight:_e,maxWidth:Le,direction:t.direction,placement:t.placement,classes:{on:b.classesOn,off:b.classesOff},layout:t.label,testY:D};return oe||t.alwaysFit?G0.fit(Xe):G0.nofit(Xe,j,Y,Qe)},J8=(t,r,c,h,b,w)=>{const S=h.width,E=h.height,D=(B,H,j,Y,oe)=>{const Ce=B(c,h,b,t,w),Qe=X8(Ce,S,E,w);return Qe.fold(K(Qe),(Le,_e,Xe,Ft)=>(oe===Ft?Xe>Y||_e>j:!oe&&Ft)?Qe:G0.nofit(H,j,Y,oe))};return Do(r,(B,H)=>{const j=Ue(D,H);return B.fold(K(B),j)},G0.nofit({rect:c,maxHeight:h.height,maxWidth:h.width,direction:pw(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:c.y},-1,-1,!1)).fold(Ie,Ie)},Pk=t=>{const r=Zn(O.none()),c=()=>r.get().each(t);return{clear:()=>{c(),r.set(O.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:E=>{c(),r.set(O.some(E))}}},Q8=()=>Pk(t=>t.destroy()),kp=()=>Pk(t=>t.unbind()),sr=()=>{const t=Pk(Z),r=c=>t.get().each(c);return Ot(ie({},t),{on:r})},Nk=ge,Ja=(t,r,c)=>$u(t,r,Nk,c),Sw=(t,r,c)=>Py(t,r,Nk,c),d3=Ef,f3=["top","bottom","right","left"],Cw="data-alloy-transition-timer",h3=(t,r)=>C8(t,r.classes),e7=(t,r,c)=>c.exists(h=>{const b=t.mode;return b==="all"?!0:h[b]!==r[b]}),t7=(t,r)=>{const c=h=>parseFloat(h).toFixed(3);return Fo(r,(h,b)=>{const w=t[b].map(c),S=h.map(c);return!Gr(w,S)}).isSome()},m3=t=>{const r=w=>{const E=er(t,w).split(/\s*,\s*/);return cn(E,ke)},c=w=>{if(v(w)&&/^[\d.]+/.test(w)){const S=parseFloat(w);return Hr(w,"ms")?S:S*1e3}else return 0},h=r("transition-delay"),b=r("transition-duration");return Do(b,(w,S,E)=>{const D=c(h[E])+c(S);return Math.max(w,D)},0)},n7=(t,r)=>{const c=kp(),h=kp();let b;const w=P=>{var B;const H=(B=P.raw.pseudoElement)!==null&&B!==void 0?B:"";return bs(P.target,t)&&Ae(H)&&We(f3,P.raw.propertyName)},S=P=>{if(U(P)||w(P)){c.clear(),h.clear();const B=P==null?void 0:P.raw.type;(U(B)||B===up())&&(clearTimeout(b),pe(t,Cw),ru(t,r.classes))}},E=Ja(t,Y6(),P=>{w(P)&&(E.unbind(),c.set(Ja(t,up(),S)),h.set(Ja(t,K6(),S)))}),D=m3(t);requestAnimationFrame(()=>{b=setTimeout(S,D+17),sn(t,Cw,b)})},o7=(t,r)=>{jr(t,r.classes),z(t,Cw).each(c=>{clearTimeout(parseInt(c,10)),pe(t,Cw)}),n7(t,r)},g3=(t,r,c,h,b,w)=>{const S=e7(h,b,w);if(S||h3(t,h)){xn(t,"position",c.position);const E=_k(r,t),D=Dk(r,Ot(ie({},b),{rect:E})),P=kt(f3,B=>D[B]);t7(c,P)&&(Lt(t,P),S&&o7(t,h),ul(t))}else ru(t,h.classes)},s7=t=>({width:me(t),height:Bu(t)}),Ap=(t,r,c,h)=>{es(r,"max-height"),es(r,"max-width");const b=s7(r);return J8(r,h.preference,t,b,c,h.bounds)},r7=(t,r)=>{const c=r.classes;ru(t,c.off),jr(t,c.on)},Bk=(t,r,c)=>{const h=c.maxHeightFunction;h(t,r.maxHeight)},i7=(t,r,c)=>{const h=c.maxWidthFunction;h(t,r.maxWidth)},K0=(t,r,c)=>{const h=Dk(c.origin,r);c.transition.each(b=>{g3(t,c.origin,h,b,r,c.lastPlacement)}),i3(t,h)},a7=(t,r)=>{G8(t,r.placement)},p3=(t,r)=>{Xg(t,Math.floor(r))},b3=K((t,r)=>{p3(t,r),si(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Ep=K((t,r)=>{p3(t,r)}),v3=(t,r,c)=>t[r]===void 0?c:t[r],Fk=(t,r,c,h,b,w,S,E)=>{const D=v3(S,"maxHeightFunction",b3()),P=v3(S,"maxWidthFunction",Z),B=t.anchorBox,H=t.origin,j={bounds:W8(H,w),origin:H,preference:h,maxHeightFunction:D,maxWidthFunction:P,lastPlacement:b,transition:E};return l7(B,r,c,j)},l7=(t,r,c,h)=>{const b=Ap(t,r,c,h);return K0(r,b,h),a7(r,b),r7(r,b),Bk(r,b,h),i7(r,b,h),{layout:b.layout,placement:b.placement}},c7=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Uf=(t,r,c,h=1)=>{const b=t*h,w=r*h,S=D=>$t(c,D).getOr([]),E=(D,P,B)=>{const H=Me(c7,B);return{offset:hr(D,P),classesOn:ue(B,S),classesOff:ue(H,S)}};return{southeast:()=>E(-t,r,["top","alignLeft"]),southwest:()=>E(t,r,["top","alignRight"]),south:()=>E(-t/2,r,["top","alignCentre"]),northeast:()=>E(-t,-r,["bottom","alignLeft"]),northwest:()=>E(t,-r,["bottom","alignRight"]),north:()=>E(-t/2,-r,["bottom","alignCentre"]),east:()=>E(t,-r/2,["valignCentre","left"]),west:()=>E(-t,-r/2,["valignCentre","right"]),insetNortheast:()=>E(b,w,["top","alignLeft","inset"]),insetNorthwest:()=>E(-b,w,["top","alignRight","inset"]),insetNorth:()=>E(-b/2,w,["top","alignCentre","inset"]),insetSoutheast:()=>E(b,-w,["bottom","alignLeft","inset"]),insetSouthwest:()=>E(-b,-w,["bottom","alignRight","inset"]),insetSouth:()=>E(-b/2,-w,["bottom","alignCentre","inset"]),insetEast:()=>E(-b,-w/2,["valignCentre","right","inset"]),insetWest:()=>E(b,-w/2,["valignCentre","left","inset"])}},kw=()=>Uf(0,0,{}),Aw=Ie,Ik=(t,r)=>c=>y3(c)==="rtl"?r:t,y3=t=>er(t,"direction")==="rtl"?"rtl":"ltr";var Wf;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Wf||(Wf={}));const Ew="data-alloy-vertical-dir",Tw=t=>lk(t,r=>Po(r)&&Vr(r,"data-alloy-vertical-dir")===Wf.BottomToTop),Bh=()=>oc("layouts",[Pt("onLtr"),Pt("onRtl"),Ds("onBottomLtr"),Ds("onBottomRtl")]),Ow=(t,r,c,h,b,w,S)=>{const E=S.map(Tw).getOr(!1),D=r.layouts.map(Y=>Y.onLtr(t)),P=r.layouts.map(Y=>Y.onRtl(t)),B=E?r.layouts.bind(Y=>Y.onBottomLtr.map(oe=>oe(t))).or(D).getOr(b):D.getOr(c),H=E?r.layouts.bind(Y=>Y.onBottomRtl.map(oe=>oe(t))).or(P).getOr(w):P.getOr(h);return Ik(B,H)(t)},u7=(t,r,c)=>{const h=r.hotspot,b=_k(c,h.element),w=Ow(t.element,r,ww(),kk(),Ck(),t3(),O.some(r.hotspot.element));return O.some(Aw({anchorBox:b,bubble:r.bubble.getOr(kw()),overrides:r.overrides,layouts:w}))};var d7=[Pt("hotspot"),Ds("bubble"),et("overrides",{}),Bh(),qs("placement",u7)];const w3=(t,r,c)=>{const h=Mk(c,r.x,r.y),b=Xr(h.left,h.top,r.width,r.height),w=Ow(t.element,r,xk(),Sk(),xk(),Sk(),O.none());return O.some(Aw({anchorBox:b,bubble:r.bubble,overrides:r.overrides,layouts:w}))};var f7=[Pt("x"),Pt("y"),et("height",0),et("width",0),et("bubble",kw()),et("overrides",{}),Bh(),qs("placement",w3)];const x3=Ml.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),h7=t=>t.fold(Ie,(r,c,h)=>r.translate(-c,-h)),m7=t=>t.fold(Ie,Ie),S3=t=>Do(t,(r,c)=>r.translate(c.left,c.top),hr(0,0)),g7=t=>{const r=ce(t,h7);return S3(r)},C3=t=>{const r=ce(t,m7);return S3(r)},p7=x3.screen,Dw=x3.absolute,b7=(t,r,c)=>{const h=Da(c.root).dom,b=w=>{const S=Zi(w),E=Zi(t.element);return bs(S,E)};return O.from(h.frameElement).map(Tt.fromDom).filter(b).map(Ga)},k3=(t,r,c)=>{const h=Zi(t.element),b=Ra(h),w=b7(t,r,c).getOr(b);return Dw(w,b.left,b.top)},Lk=(t,r,c,h)=>{const b=p7(hr(t,r));return O.some(Iy(b,c,h))},A3=(t,r,c,h,b)=>t.map(w=>{const S=[r,w.point],E=j8(h,()=>C3(S),()=>C3(S),()=>g7(S)),D=Sh(E.left,E.top,w.width,w.height),P=c.showAbove?Ck():ww(),B=c.showAbove?t3():kk(),H=Ow(b,c,P,B,P,B,O.none());return Aw({anchorBox:D,bubble:c.bubble.getOr(kw()),overrides:c.overrides,layouts:H})}),v7=(t,r,c)=>{const h=k3(t,c,r);return r.node.filter(jo).bind(b=>{const w=b.dom.getBoundingClientRect(),S=Lk(w.left,w.top,w.width,w.height),E=r.node.getOr(t.element);return A3(S,h,r,c,E)})};var y7=[Pt("node"),Pt("root"),Ds("bubble"),Bh(),et("overrides",{}),et("showAbove",!1),qs("placement",v7)];const w7="\uFEFF",x7=" ",$k={create:(t,r,c,h)=>({start:t,soffset:r,finish:c,foffset:h})},Hk=Ml.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),S7=(t,r,c,h)=>t.fold(r,c,h),E3=t=>t.fold(Ie,Ie,Ie),C7=Hk.before,k7=Hk.on,A7=Hk.after,E7={before:C7,on:k7,after:A7,cata:S7,getStart:E3},Tp=Ml.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),T7=t=>Tp.exact(t.start,t.soffset,t.finish,t.foffset),O7=t=>t.match({domRange:r=>Tt.fromDom(r.startContainer),relative:(r,c)=>E7.getStart(r),exact:(r,c,h,b)=>r}),D7=Tp.domRange,_7=Tp.relative,M7=Tp.exact,T3=t=>{const r=O7(t);return Da(r)},R7=$k.create,Y0={domRange:D7,relative:_7,exact:M7,exactFromRange:T7,getWin:T3,range:R7},P7=(t,r)=>{r.fold(c=>{t.setStartBefore(c.dom)},(c,h)=>{t.setStart(c.dom,h)},c=>{t.setStartAfter(c.dom)})},N7=(t,r)=>{r.fold(c=>{t.setEndBefore(c.dom)},(c,h)=>{t.setEnd(c.dom,h)},c=>{t.setEndAfter(c.dom)})},_w=(t,r,c)=>{const h=t.document.createRange();return P7(h,r),N7(h,c),h},O3=(t,r,c,h,b)=>{const w=t.document.createRange();return w.setStart(r.dom,c),w.setEnd(h.dom,b),w},Vk=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),D3=t=>{const r=t.getClientRects(),c=r.length>0?r[0]:t.getBoundingClientRect();return c.width>0||c.height>0?O.some(c).map(Vk):O.none()},_3=t=>{const r=t.getBoundingClientRect();return r.width>0||r.height>0?O.some(r).map(Vk):O.none()},Op=Ml.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),zk=(t,r,c)=>r(Tt.fromDom(c.startContainer),c.startOffset,Tt.fromDom(c.endContainer),c.endOffset),B7=(t,r)=>r.match({domRange:c=>({ltr:K(c),rtl:O.none}),relative:(c,h)=>({ltr:At(()=>_w(t,c,h)),rtl:At(()=>O.some(_w(t,h,c)))}),exact:(c,h,b,w)=>({ltr:At(()=>O3(t,c,h,b,w)),rtl:At(()=>O.some(O3(t,b,w,c,h)))})}),F7=(t,r)=>{const c=r.ltr();return c.collapsed?r.rtl().filter(b=>b.collapsed===!1).map(b=>Op.rtl(Tt.fromDom(b.endContainer),b.endOffset,Tt.fromDom(b.startContainer),b.startOffset)).getOrThunk(()=>zk(t,Op.ltr,c)):zk(t,Op.ltr,c)},I7=(t,r)=>{const c=B7(t,r);return F7(t,c)},M3=(t,r)=>I7(t,r).match({ltr:(h,b,w,S)=>{const E=t.document.createRange();return E.setStart(h.dom,b),E.setEnd(w.dom,S),E},rtl:(h,b,w,S)=>{const E=t.document.createRange();return E.setStart(w.dom,S),E.setEnd(h.dom,b),E}});Op.ltr,Op.rtl;const R3=(t,r,c)=>cn(Jc(t,c),r),_i=(t,r)=>Ei(r,t),L7=(t,r,c,h)=>{const w=Zi(t).dom.createRange();return w.setStart(t.dom,r),w.setEnd(c.dom,h),w},$7=(t,r,c,h)=>{const b=L7(t,r,c,h),w=bs(t,c)&&r===h;return b.collapsed&&!w},H7=t=>O.from(t.getSelection()),P3=t=>{if(t.rangeCount>0){const r=t.getRangeAt(0),c=t.getRangeAt(t.rangeCount-1);return O.some($k.create(Tt.fromDom(r.startContainer),r.startOffset,Tt.fromDom(c.endContainer),c.endOffset))}else return O.none()},N3=t=>{if(t.anchorNode===null||t.focusNode===null)return P3(t);{const r=Tt.fromDom(t.anchorNode),c=Tt.fromDom(t.focusNode);return $7(r,t.anchorOffset,c,t.focusOffset)?O.some($k.create(r,t.anchorOffset,c,t.focusOffset)):P3(t)}},V7=t=>H7(t).filter(r=>r.rangeCount>0).bind(N3),B3=(t,r)=>{const c=M3(t,r);return D3(c)},F3=(t,r)=>{const c=M3(t,r);return _3(c)},X0=((t,r)=>{const c=w=>{if(!t(w))throw new Error("Can only get "+r+" value of a "+r+" node");return h(w).getOr("")},h=w=>t(w)?O.from(w.dom.nodeValue):O.none();return{get:c,getOption:h,set:(w,S)=>{if(!t(w))throw new Error("Can only set raw "+r+" value of a "+r+" node");w.dom.nodeValue=S}}})(Ho,"text"),z7=t=>X0.get(t),Dp=(t,r)=>({element:t,offset:r}),U7=(t,r)=>{const c=$i(t);if(c.length===0)return Dp(t,r);if(r<c.length)return Dp(c[r],0);{const h=c[c.length-1],b=Ho(h)?z7(h).length:$i(h).length;return Dp(h,b)}},Uk=(t,r)=>Ho(t)?Dp(t,r):U7(t,r),Rw=t=>t.foffset!==void 0,Wk=(t,r)=>r.getSelection.getOrThunk(()=>()=>V7(t))().map(h=>{if(Rw(h)){const b=Uk(h.start,h.soffset),w=Uk(h.finish,h.foffset);return Y0.range(b.element,b.offset,w.element,w.offset)}else return h}),W7=(t,r,c)=>{const h=Da(r.root).dom,b=k3(t,c,r),w=Wk(h,r).bind(D=>{if(Rw(D))return F3(h,Y0.exactFromRange(D)).orThunk(()=>{const B=Tt.fromText(w7);Dc(D.start,B);const H=B3(h,Y0.exact(B,0,B,1));return _c(B),H}).bind(B=>Lk(B.left,B.top,B.width,B.height));{const P=pt(D,H=>H.dom.getBoundingClientRect()),B={left:Math.min(P.firstCell.left,P.lastCell.left),right:Math.max(P.firstCell.right,P.lastCell.right),top:Math.min(P.firstCell.top,P.lastCell.top),bottom:Math.max(P.firstCell.bottom,P.lastCell.bottom)};return Lk(B.left,B.top,B.right-B.left,B.bottom-B.top)}}),E=Wk(h,r).bind(D=>Rw(D)?Po(D.start)?O.some(D.start):ga(D.start):O.some(D.firstCell)).getOr(t.element);return A3(w,b,r,c,E)};var j7=[Ds("getSelection"),Pt("root"),Ds("bubble"),Bh(),et("overrides",{}),et("showAbove",!1),qs("placement",W7)];const Pw="link-layout",Qm=t=>t.x+t.width,Fh=(t,r)=>t.x-r.width,J0=(t,r)=>t.y-r.height+t.height,_p=t=>t.y,I3=(t,r,c)=>Oi(Qm(t),_p(t),c.southeast(),pw(),"southeast",Or(t,{left:0,top:2}),Pw),jf=(t,r,c)=>Oi(Fh(t,r),_p(t),c.southwest(),gk(),"southwest",Or(t,{right:1,top:2}),Pw),nd=(t,r,c)=>Oi(Qm(t),J0(t,r),c.northeast(),bw(),"northeast",Or(t,{left:0,bottom:3}),Pw),Nw=(t,r,c)=>Oi(Fh(t,r),J0(t,r),c.northwest(),$d(),"northwest",Or(t,{right:1,bottom:3}),Pw),jk=()=>[I3,jf,nd,Nw],L3=()=>[jf,I3,Nw,nd],$3=(t,r,c)=>{const h=_k(c,r.item.element),b=Ow(t.element,r,jk(),L3(),jk(),L3(),O.none());return O.some(Aw({anchorBox:h,bubble:kw(),overrides:r.overrides,layouts:b}))};var Q0=[Pt("item"),Bh(),et("overrides",{}),qs("placement",$3)],eb=ms("type",{selection:j7,node:y7,hotspot:d7,submenu:Q0,makeshift:f7});const Zk=[nc("classes",Yi),sc("mode","all",["all","layout","placement"])],H3=[et("useFixed",ne),Ds("getBounds")],tb=[tc("anchor",eb),oc("transition",Zk)],Bw=()=>{const t=document.documentElement;return q0(0,0,t.clientWidth,t.clientHeight)},Z7=t=>{const r=Ga(t.element),c=t.element.dom.getBoundingClientRect();return Ia(r.left,r.top,c.width,c.height)},qk=(t,r,c,h,b,w)=>{const S=q8(r.anchorBox,t);return Fk(S,h.element,r.bubble,r.layouts,b,c,r.overrides,w)},Fw=(t,r,c,h,b)=>{const w=O.none();zi(t,r,c,h,b,w)},zi=(t,r,c,h,b,w)=>{const S=Ka("placement.info",Ln(tb),b),E=S.anchor,D=h.element,P=c.get(h.uid);dn(()=>{xn(D,"position","fixed");const B=js(D,"visibility");xn(D,"visibility","hidden");const H=r.useFixed()?Bw():Z7(t);E.placement(t,E,H).each(j=>{const Y=w.orThunk(()=>r.getBounds.map(ht)),oe=qk(H,j,Y,h,P,S.transition);c.set(h.uid,oe)}),B.fold(()=>{es(D,"visibility")},j=>{xn(D,"visibility",j)}),js(D,"left").isNone()&&js(D,"top").isNone()&&js(D,"right").isNone()&&js(D,"bottom").isNone()&&Sr(js(D,"position"),"fixed")&&es(D,"position")},D)};var V3=Object.freeze({__proto__:null,position:Fw,positionWithinBounds:zi,getMode:(t,r,c)=>r.useFixed()?"fixed":"absolute",reset:(t,r,c,h)=>{const b=h.element;Ze(["position","left","right","top","bottom"],w=>es(b,w)),c3(b),c.clear(h.uid)}}),Mp=Object.freeze({__proto__:null,init:()=>{let t={};return lc({readState:()=>t,clear:b=>{X(b)?delete t[b]:t={}},set:(b,w)=>{t[b]=w},get:b=>$t(t,b)})}});const Sa=Ji({fields:H3,name:"positioning",active:U8,apis:V3,state:Mp}),Rp=t=>t.getSystem().isConnected(),nb=t=>{ns(t,Um());const r=t.components();Ze(r,nb)},Pp=t=>{const r=t.components();Ze(r,Pp),ns(t,Yu())},Gk=(t,r)=>{t.getSystem().addToWorld(r),jo(t.element)&&Pp(r)},Kk=t=>{nb(t),t.getSystem().removeFromWorld(t)},Iw=(t,r)=>{Ma(t.element,r.element)},Vd=t=>{Ze(t.components(),r=>_c(r.element)),Om(t.element),t.syncComponents()},q7=(t,r,c)=>{const h=t.components();Vd(t);const b=c(r),w=Me(h,b);Ze(w,S=>{nb(S),t.getSystem().removeFromWorld(S)}),Ze(b,S=>{Rp(S)?Iw(t,S):(t.getSystem().addToWorld(S),Iw(t,S),jo(t.element)&&Pp(S))}),t.syncComponents()},G7=(t,r,c)=>{const h=t.components(),b=ue(r,E=>BM(E).toArray());Ze(h,E=>{We(b,E)||Kk(E)});const w=c(r),S=Me(h,w);Ze(S,E=>{Rp(E)&&Kk(E)}),Ze(w,E=>{Rp(E)||Gk(t,E)}),t.syncComponents()},Ih=(t,r)=>{Yk(t,r,Ma)},Yk=(t,r,c)=>{t.getSystem().addToWorld(r),c(t.element,r.element),jo(t.element)&&Pp(r),t.syncComponents()},Xk=t=>{nb(t),_c(t.element),t.getSystem().removeFromWorld(t)},qf=t=>{const r=mi(t.element).bind(c=>t.getSystem().getByDom(c).toOptional());Xk(t),r.each(c=>{c.syncComponents()})},U3=t=>{const r=t.components();Ze(r,Xk),Om(t.element),t.syncComponents()},Nl=(t,r)=>{Jk(t,r,Ma)},Gf=(t,r)=>{Jk(t,r,nu)},Jk=(t,r,c)=>{c(t,r.element);const h=$i(r.element);Ze(h,b=>{r.getByDom(b).each(Pp)})},Np=t=>{const r=$i(t.element);Ze(r,c=>{t.getByDom(c).each(nb)}),_c(t.element)},Qa=(t,r,c,h)=>{c.get().each(S=>{U3(t)});const b=r.getAttachPoint(t);Ih(b,t);const w=t.getSystem().build(h);return Ih(t,w),c.set(w),w},gl=(t,r,c,h)=>{const b=Qa(t,r,c,h);return r.onOpen(t,b),b},La=(t,r,c,h)=>c.get().map(()=>Qa(t,r,c,h)),lu=(t,r,c,h,b)=>{Qk(t,r),gl(t,r,c,h),b(),ob(t,r)},Lw=(t,r,c)=>{c.get().each(h=>{U3(t),qf(t),r.onClose(t,h),c.clear()})},hc=(t,r,c)=>c.isOpen(),eg=(t,r,c,h)=>hc(t,r,c)&&c.get().exists(b=>r.isPartOf(t,b,h)),K7=(t,r,c)=>c.get(),Y7=(t,r,c,h)=>{js(t.element,r).fold(()=>{pe(t.element,c)},b=>{sn(t.element,c,b)}),xn(t.element,r,h)},X7=(t,r,c)=>{z(t.element,c).fold(()=>es(t.element,r),h=>xn(t.element,r,h))},Qk=(t,r,c)=>{const h=r.getAttachPoint(t);xn(t.element,"position",Sa.getMode(h)),Y7(t,"visibility",r.cloakVisibilityAttr,"hidden")},W3=t=>yt(["top","left","right","bottom"],r=>js(t,r).isSome()),ob=(t,r,c)=>{W3(t.element)||es(t.element,"position"),X7(t,"visibility",r.cloakVisibilityAttr)};var j3=Object.freeze({__proto__:null,cloak:Qk,decloak:ob,open:gl,openWhileCloaked:lu,close:Lw,isOpen:hc,isPartOf:eg,getState:K7,setContent:La}),J7=Object.freeze({__proto__:null,events:(t,r)=>ar([_t(T0(),(c,h)=>{Lw(c,t,r)})])}),Q7=[os("onOpen"),os("onClose"),Pt("isPartOf"),Pt("getAttachPoint"),et("cloakVisibilityAttr","data-precloak-visibility")],Z3=Object.freeze({__proto__:null,init:()=>{const t=sr(),r=K("not-implemented");return lc({readState:r,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const ss=Ji({fields:Q7,name:"sandboxing",active:J7,apis:j3,state:Z3}),zd=K("dismiss.popups"),tg=K("reposition.popups"),eA=K("mouse.released"),eH=tr([et("isExtraPart",ne),oc("fireEventInstead",[et("event",Wm())])]),tA=t=>{const r=Ka("Dismissal",eH,t);return{[zd()]:{schema:tr([Pt("target")]),onReceive:(c,h)=>{ss.isOpen(c)&&(ss.isPartOf(c,h.target)||r.isExtraPart(c,h.target)||r.fireEventInstead.fold(()=>ss.close(c),w=>ns(c,w.event)))}}}},tH=tr([oc("fireEventInstead",[et("event",TM())]),ju("doReposition")]),nA=t=>{const r=Ka("Reposition",tH,t);return{[tg()]:{onReceive:c=>{ss.isOpen(c)&&r.fireEventInstead.fold(()=>r.doReposition(c),h=>ns(c,h.event))}}}},oA=(t,r,c)=>{r.store.manager.onLoad(t,r,c)},mc=(t,r,c)=>{r.store.manager.onUnload(t,r,c)};var rA=Object.freeze({__proto__:null,onLoad:oA,onUnload:mc,setValue:(t,r,c,h)=>{r.store.manager.setValue(t,r,c,h)},getValue:(t,r,c)=>r.store.manager.getValue(t,r,c),getState:(t,r,c)=>c}),nH=Object.freeze({__proto__:null,events:(t,r)=>{const c=t.resetOnDom?[nr((h,b)=>{oA(h,t,r)}),Fd((h,b)=>{mc(h,t,r)})]:[xw(t,r,oA)];return ar(c)}});const G3=()=>{const t=Zn(null),r=()=>({mode:"memory",value:t.get()}),c=()=>t.get()===null,h=()=>{t.set(null)};return lc({set:t.set,get:t.get,isNotSet:c,clear:h,readState:r})},oH=()=>lc({readState:Z}),K3=()=>{const t=Zn({}),r=Zn({});return lc({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:r.get()}),lookup:S=>$t(t.get(),S).orThunk(()=>$t(r.get(),S)),update:S=>{const E=t.get(),D=r.get(),P={},B={};Ze(S,H=>{P[H.value]=H,$t(H,"meta").each(j=>{$t(j,"text").each(Y=>{B[Y]=H})})}),t.set(ie(ie({},E),P)),r.set(ie(ie({},D),B))},clear:()=>{t.set({}),r.set({})}})};var Bp=Object.freeze({__proto__:null,memory:G3,dataset:K3,manual:oH,init:t=>t.store.manager.state(t)});const Fp=(t,r,c,h)=>{const b=r.store;c.update([h]),b.setValue(t,h),r.onSetValue(t,h)},rH=(t,r,c)=>{const h=r.store,b=h.getDataKey(t);return c.lookup(b).getOrThunk(()=>h.getFallbackEntry(b))},iH=(t,r,c)=>{r.store.initialValue.each(b=>{Fp(t,r,c,b)})},Y3=(t,r,c)=>{c.clear()};var iA=[Ds("initialValue"),Pt("getFallbackEntry"),Pt("getDataKey"),Pt("setValue"),qs("manager",{setValue:Fp,getValue:rH,onLoad:iH,onUnload:Y3,state:K3})];const aA=(t,r,c)=>r.store.getValue(t),lA=(t,r,c,h)=>{r.store.setValue(t,h),r.onSetValue(t,h)},$w=(t,r,c)=>{r.store.initialValue.each(h=>{r.store.setValue(t,h)})};var cA=[Pt("getValue"),et("setValue",Z),Ds("initialValue"),qs("manager",{setValue:lA,getValue:aA,onLoad:$w,onUnload:Z,state:Ju.init})];const X3=(t,r,c,h)=>{c.set(h),r.onSetValue(t,h)},rb=(t,r,c)=>c.get(),uA=(t,r,c)=>{r.store.initialValue.each(h=>{c.isNotSet()&&c.set(h)})},aH=(t,r,c)=>{c.clear()};var J3=[Ds("initialValue"),qs("manager",{setValue:X3,getValue:rb,onLoad:uA,onUnload:aH,state:G3})],lH=[_l("store",{mode:"memory"},ms("mode",{memory:J3,manual:cA,dataset:iA})),os("onSetValue"),et("resetOnDom",!1)];const ln=Ji({fields:lH,name:"representing",active:nH,apis:rA,extra:{setValueFrom:(t,r)=>{const c=ln.getValue(r);ln.setValue(t,c)}},state:Bp}),yi=(t,r)=>Bd(t,{},ce(r,c=>I2(c.name(),"Cannot configure "+c.name()+" for "+t)).concat([Qr("dump",Ie)])),Kf=t=>t.dump,Mi=(t,r)=>ie(ie({},Kt(r)),t.dump),cu={field:yi,augment:Mi,get:Kf},Q3="placeholder",ib=Ml.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Ud=t=>xo(t,"uiType"),dA=(t,r,c,h)=>t.exists(b=>b!==c.owner)?ib.single(!0,K(c)):$t(h,c.name).fold(()=>{throw new Error("Unknown placeholder component: "+c.name+`
Known: [`+Kn(h)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(c,null,2))},b=>b.replace()),fA=(t,r,c,h)=>Ud(c)&&c.uiType===Q3?dA(t,r,c,h):ib.single(!1,K(c)),ab=(t,r,c,h)=>fA(t,r,c,h).fold((w,S)=>{const E=Ud(c)?S(r,c.config,c.validated):S(r),D=$t(E,"components").getOr([]),P=ue(D,B=>ab(t,r,B,h));return[Ot(ie({},E),{components:P})]},(w,S)=>{if(Ud(c)){const E=S(r,c.config,c.validated);return c.validated.preprocess.getOr(Ie)(E)}else return S(r)}),e4=(t,r,c,h)=>ue(c,b=>ab(t,r,b,h)),Hw=(t,r)=>{let c=!1;const h=()=>c,b=()=>{if(c)throw new Error("Trying to use the same placeholder more than once: "+t);return c=!0,r},w=()=>r.fold((S,E)=>S,(S,E)=>S);return{name:K(t),required:w,used:h,replace:b}},hA=(t,r,c,h)=>{const b=pt(h,(S,E)=>Hw(E,S)),w=e4(t,r,c,b);return Ye(b,S=>{if(S.used()===!1&&S.required())throw new Error("Placeholder: "+S.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(r.components,null,2))}),w},t4=ib.single,cH=ib.multiple,od=K(Q3),Vw=Ml.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),zw=et("factory",{sketch:Ie}),Bl=et("schema",[]),ri=Pt("name"),mA=ia("pname","pname",Ql(t=>"<alloy."+pn(t.name)+">"),Ki()),gA=Qr("schema",()=>[Ds("preprocess")]),Uw=et("defaults",K({})),lb=et("overrides",K({})),pA=Ln([zw,Bl,ri,mA,Uw,lb]),Ip=Ln([zw,Bl,ri,Uw,lb]),n4=Ln([zw,Bl,ri,mA,Uw,lb]),o4=Ln([zw,gA,ri,Pt("unit"),mA,Uw,lb]),s4=t=>t.fold(O.some,O.none,O.some,O.some),r4=t=>{const r=c=>c.name;return t.fold(r,r,r,r)},i4=t=>t.fold(Ie,Ie,Ie,Ie),cb=(t,r)=>c=>{const h=Ka("Converting part type",r,c);return t(h)},Ca=cb(Vw.required,pA),uu=cb(Vw.external,Ip),gc=cb(Vw.optional,n4),ub=cb(Vw.group,o4),Ww=K("entirety");var a4=Object.freeze({__proto__:null,required:Ca,external:uu,optional:gc,group:ub,asNamedPart:s4,name:r4,asCommon:i4,original:Ww});const Lp=(t,r,c,h)=>Ls(r.defaults(t,c,h),c,{uid:t.partUids[r.name]},r.overrides(t,c,h)),l4=(t,r,c)=>{const h={},b={};return Ze(c,w=>{w.fold(S=>{h[S.pname]=t4(!0,(E,D,P)=>S.factory.sketch(Lp(E,S,D,P)))},S=>{const E=r.parts[S.name];b[S.name]=K(S.factory.sketch(Lp(r,S,E[Ww()]),E))},S=>{h[S.pname]=t4(!1,(E,D,P)=>S.factory.sketch(Lp(E,S,D,P)))},S=>{h[S.pname]=cH(!0,(E,D,P)=>{const B=E[S.name];return ce(B,H=>S.factory.sketch(Ls(S.defaults(E,H,P),H,S.overrides(E,H))))})})}),{internals:K(h),externals:K(b)}},Yf=(t,r)=>{const c={};return Ze(r,h=>{s4(h).each(b=>{const w=db(t,b.pname);c[b.name]=S=>{const E=Ka("Part: "+b.name+" in "+t,Ln(b.schema),S);return Ot(ie({},w),{config:S,validated:E})}})}),c},db=(t,r)=>({uiType:od(),owner:t,name:r}),bA=(t,r,c)=>({uiType:od(),owner:t,name:r,config:c,validated:{}}),c4=t=>ue(t,r=>r.fold(O.none,O.some,O.none,O.none).map(c=>Zu(c.name,c.schema.concat([gw(Ww())]))).toArray()),u4=t=>ce(t,r4),vA=(t,r,c)=>l4(t,r,c),jw=(t,r,c)=>hA(O.some(t),r,r.components,c),Gs=(t,r,c)=>{const h=r.partUids[c];return t.getSystem().getByUid(h).toOptional()},Xf=(t,r,c)=>Gs(t,r,c).getOrDie("Could not find part: "+c),d4=(t,r,c)=>{const h={},b=r.partUids,w=t.getSystem();return Ze(c,S=>{h[S]=K(w.getByUid(b[S]))}),h},f4=(t,r)=>{const c=t.getSystem();return pt(r.partUids,(h,b)=>K(c.getByUid(h)))},yA=t=>Kn(t.partUids),ng=(t,r,c)=>{const h={},b=r.partUids,w=t.getSystem();return Ze(c,S=>{h[S]=K(w.getByUid(b[S]).getOrDie())}),h},wA=(t,r)=>{const c=u4(r);return Ba(ce(c,h=>({key:h,value:t+"-"+h})))},xA=t=>ia("partUids","partUids",sp(r=>wA(r.uid,t)),Ki());var uH=Object.freeze({__proto__:null,generate:Yf,generateOne:bA,schemas:c4,names:u4,substitutes:vA,components:jw,defaultUids:wA,defaultUidsSchema:xA,getAllParts:f4,getAllPartNames:yA,getPart:Gs,getPartOrDie:Xf,getParts:d4,getPartsOrDie:ng});const dH=(t,r)=>(t.length>0?[Zu("parts",t)]:[]).concat([Pt("uid"),et("dom",{}),et("components",[]),gw("originalSpec"),et("debug.sketcher",{})]).concat(r),h4=(t,r,c,h,b)=>{const w=dH(h,b);return Ka(t+" [SpecSchema]",tr(w.concat(r)),c)},fH=(t,r,c,h)=>{const b=m4(h),w=h4(t,r,b,[],[]);return c(w,b)},SA=(t,r,c,h,b)=>{const w=m4(b),S=c4(c),E=xA(c),D=h4(t,r,w,S,[E]),P=vA(t,D,c),B=jw(t,D,P.internals());return h(D,B,w,P.externals())},hH=t=>xo(t,"uid"),m4=t=>hH(t)?t:Ot(ie({},t),{uid:mp("uid")}),mH=t=>t.uid!==void 0,gH=tr([Pt("name"),Pt("factory"),Pt("configFields"),et("apis",{}),et("extraApis",{})]),pH=tr([Pt("name"),Pt("factory"),Pt("configFields"),Pt("partFields"),et("apis",{}),et("extraApis",{})]),Fl=t=>{const r=Ka("Sketcher for "+t.name,gH,t),c=w=>fH(r.name,r.configFields,r.factory,w),h=pt(r.apis,pp),b=pt(r.extraApis,(w,S)=>ow(w,S));return ie(ie({name:r.name,configFields:r.configFields,sketch:c},h),b)},ka=t=>{const r=Ka("Sketcher for "+t.name,pH,t),c=S=>SA(r.name,r.configFields,r.partFields,r.factory,S),h=Yf(r.name,r.partFields),b=pt(r.apis,pp),w=pt(r.extraApis,(S,E)=>ow(S,E));return ie(ie({name:r.name,partFields:r.partFields,configFields:r.configFields,sketch:c,parts:h},b),w)},og=t=>Li("input")(t)&&Vr(t,"type")!=="radio"||Li("textarea")(t);var g4=Object.freeze({__proto__:null,getCurrent:(t,r,c)=>r.find(t)});const bH=[Pt("find")],Zo=Ji({fields:bH,name:"composing",apis:g4}),vH=["input","button","textarea","select"],p4=(t,r,c)=>{(r.disabled()?kA:Zw)(t,r)},CA=(t,r)=>r.useNative===!0&&We(vH,Ts(t.element)),yH=t=>se(t.element,"disabled"),wH=t=>{sn(t.element,"disabled","disabled")},b4=t=>{pe(t.element,"disabled")},xH=t=>Vr(t.element,"aria-disabled")==="true",hn=t=>{sn(t.element,"aria-disabled","true")},sg=t=>{sn(t.element,"aria-disabled","false")},kA=(t,r,c)=>{r.disableClass.each(b=>{ti(t.element,b)}),(CA(t,r)?wH:hn)(t),r.onDisabled(t)},Zw=(t,r,c)=>{r.disableClass.each(b=>{wr(t.element,b)}),(CA(t,r)?b4:sg)(t),r.onEnabled(t)},fb=(t,r)=>CA(t,r)?yH(t):xH(t);var SH=Object.freeze({__proto__:null,enable:Zw,disable:kA,isDisabled:fb,onLoad:p4,set:(t,r,c,h)=>{(h?kA:Zw)(t,r)}}),kH=Object.freeze({__proto__:null,exhibit:(t,r)=>su({classes:r.disabled()?r.disableClass.toArray():[]}),events:(t,r)=>ar([G2(ac(),(c,h)=>fb(c,t)),xw(t,r,p4)])}),y4=[Vi("disabled",ne),et("useNative",!0),Ds("disableClass"),os("onDisabled"),os("onEnabled")];const qn=Ji({fields:y4,name:"disabling",active:kH,apis:SH}),$p=(t,r,c,h)=>{const b=_i(t.element,"."+r.highlightClass);Ze(b,w=>{yt(h,E=>bs(E.element,w))||(wr(w,r.highlightClass),t.getSystem().getByDom(w).each(E=>{r.onDehighlight(t,E),ns(E,R0())}))})},w4=(t,r,c)=>$p(t,r,c,[]),AH=(t,r,c,h)=>{AA(t,r,c,h)&&(wr(h.element,r.highlightClass),r.onDehighlight(t,h),ns(h,R0()))},hb=(t,r,c,h)=>{$p(t,r,c,[h]),AA(t,r,c,h)||(ti(h.element,r.highlightClass),r.onHighlight(t,h),ns(h,M0()))},EH=(t,r,c)=>{qw(t,r).each(h=>{hb(t,r,c,h)})},tee=(t,r,c)=>{S4(t,r).each(h=>{hb(t,r,c,h)})},x4=(t,r,c,h)=>{DH(t,r,c,h).fold(b=>{throw b},b=>{hb(t,r,c,b)})},TH=(t,r,c,h)=>{const b=k4(t,r);Je(b,h).each(S=>{hb(t,r,c,S)})},AA=(t,r,c,h)=>vi(h.element,r.highlightClass),OH=(t,r,c)=>Zr(t.element,"."+r.highlightClass).bind(h=>t.getSystem().getByDom(h).toOptional()),DH=(t,r,c,h)=>{const b=_i(t.element,"."+r.itemClass);return O.from(b[h]).fold(()=>Eo.error(new Error("No element found with index "+h)),t.getSystem().getByDom)},qw=(t,r,c)=>Zr(t.element,"."+r.itemClass).bind(h=>t.getSystem().getByDom(h).toOptional()),S4=(t,r,c)=>{const h=_i(t.element,"."+r.itemClass);return(h.length>0?O.some(h[h.length-1]):O.none()).bind(w=>t.getSystem().getByDom(w).toOptional())},C4=(t,r,c,h)=>{const b=_i(t.element,"."+r.itemClass);return Bt(b,S=>vi(S,r.highlightClass)).bind(S=>{const E=Cp(S,h,0,b.length-1);return t.getSystem().getByDom(b[E]).toOptional()})},_H=(t,r,c)=>C4(t,r,c,-1),MH=(t,r,c)=>C4(t,r,c,1),k4=(t,r,c)=>{const h=_i(t.element,"."+r.itemClass);return pr(ce(h,b=>t.getSystem().getByDom(b).toOptional()))};var Jf=Object.freeze({__proto__:null,dehighlightAll:w4,dehighlight:AH,highlight:hb,highlightFirst:EH,highlightLast:tee,highlightAt:x4,highlightBy:TH,isHighlighted:AA,getHighlighted:OH,getFirst:qw,getLast:S4,getPrevious:_H,getNext:MH,getCandidates:k4}),Gw=[Pt("highlightClass"),Pt("itemClass"),os("onHighlight"),os("onDehighlight")];const gs=Ji({fields:Gw,name:"highlighting",apis:Jf}),RH=[8],Qf=[9],Wd=[13],Kw=[27],Il=[32],Yw=[37],jd=[38],rg=[39],Hp=[40],A4=(t,r,c)=>{const h=Ne(t.slice(0,r)),b=Ne(t.slice(r+1));return Je(h.concat(b),c)},PH=(t,r,c)=>{const h=Ne(t.slice(0,r));return Je(h,c)},EA=(t,r,c)=>{const h=t.slice(0,r),b=t.slice(r+1);return Je(b.concat(h),c)},NH=(t,r,c)=>{const h=t.slice(r+1);return Je(h,c)},rs=t=>r=>{const c=r.raw;return We(t,c.which)},du=t=>r=>xe(t,c=>c(r)),eh=t=>t.raw.shiftKey===!0,BH=t=>t.raw.ctrlKey===!0,Vp=ae(eh),fs=(t,r)=>({matches:t,classification:r}),FH=(t,r)=>Je(t,h=>h.matches(r)).map(h=>h.classification),TA=(t,r,c)=>{r.exists(b=>c.exists(w=>bs(w,b)))||Hn(t,Yy(),{prevFocus:r,newFocus:c})},OA=()=>{const t=c=>au(c.element);return{get:t,set:(c,h)=>{const b=t(c);c.getSystem().triggerFocus(h,c.element);const w=t(c);TA(c,b,w)}}},IH=()=>{const t=c=>gs.getHighlighted(c).map(h=>h.element);return{get:t,set:(c,h)=>{const b=t(c);c.getSystem().getByDom(h).fold(Z,S=>{gs.highlight(c,S)});const w=t(c);TA(c,b,w)}}};var Lh;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Lh||(Lh={}));const $h=(t,r,c,h,b)=>{const w=()=>t.concat([et("focusManager",OA()),_l("focusInside","onFocus",w0(P=>We(["onFocus","onEnterOrSpace","onApi"],P)?Eo.value(P):Eo.error("Invalid value for focusInside"))),qs("handler",D),qs("state",r),qs("sendFocusIn",b)]),S=(P,B,H,j,Y)=>{const oe=H(P,B,j,Y);return FH(oe,B.event).bind(Ce=>Ce(P,B,j,Y))},D={schema:w,processKey:S,toEvents:(P,B)=>{const H=P.focusInside!==Lh.OnFocusMode?O.none():b(P).map(oe=>_t(dp(),(Ce,Qe)=>{oe(Ce,P,B),Qe.stop()})),j=(oe,Ce)=>{const Qe=rs(Il.concat(Wd))(Ce.event);P.focusInside===Lh.OnEnterOrSpaceMode&&Qe&&A0(oe,Ce)&&b(P).each(Le=>{Le(oe,P,B),Ce.stop()})},Y=[_t(Gu(),(oe,Ce)=>{S(oe,Ce,c,P,B).fold(()=>{j(oe,Ce)},Qe=>{Ce.stop()})}),_t(Th(),(oe,Ce)=>{S(oe,Ce,h,P,B).each(Qe=>{Ce.stop()})})];return ar(H.toArray().concat(Y))}};return D},mb=t=>{const r=[Ds("onEscape"),Ds("onEnter"),et("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),et("firstTabstop",0),et("useTabstopAt",ge),Ds("visibilitySelector")].concat([t]),c=(Le,_e)=>{const Xe=Le.visibilitySelector.bind(Ft=>Qu(_e,Ft)).getOr(_e);return ir(Xe)>0},h=(Le,_e)=>{const Xe=_i(Le.element,_e.selector),Ft=cn(Xe,Et=>c(_e,Et));return O.from(Ft[_e.firstTabstop])},b=(Le,_e)=>_e.focusManager.get(Le).bind(Xe=>Qu(Xe,_e.selector)),w=(Le,_e)=>c(Le,_e)&&Le.useTabstopAt(_e),S=(Le,_e,Xe)=>{h(Le,_e).each(Ft=>{_e.focusManager.set(Le,Ft)})},E=(Le,_e,Xe,Ft,Et)=>Et(_e,Xe,St=>w(Ft,St)).fold(()=>Ft.cyclic?O.some(!0):O.none(),St=>(Ft.focusManager.set(Le,St),O.some(!0))),D=(Le,_e,Xe,Ft)=>{const Et=_i(Le.element,Xe.selector);return b(Le,Xe).bind(St=>Bt(Et,Ue(bs,St)).bind(Jt=>E(Le,Et,Jt,Xe,Ft)))},P=(Le,_e,Xe)=>{const Ft=Xe.cyclic?A4:PH;return D(Le,_e,Xe,Ft)},B=(Le,_e,Xe)=>{const Ft=Xe.cyclic?EA:NH;return D(Le,_e,Xe,Ft)},H=Le=>Tc(Le).bind(Oc).exists(_e=>bs(_e,Le)),j=(Le,_e,Xe)=>b(Le,Xe).filter(Ft=>!Xe.useTabstopAt(Ft)).bind(Ft=>(H(Ft)?P:B)(Le,_e,Xe)),Y=(Le,_e,Xe)=>Xe.onEnter.bind(Ft=>Ft(Le,_e)),oe=(Le,_e,Xe)=>Xe.onEscape.bind(Ft=>Ft(Le,_e)),Ce=K([fs(du([eh,rs(Qf)]),P),fs(rs(Qf),B),fs(du([Vp,rs(Wd)]),Y)]),Qe=K([fs(rs(Kw),oe),fs(rs(Qf),j)]);return $h(r,Ju.init,Ce,Qe,()=>O.some(S))};var Xw=mb(Qr("cyclic",ne)),Jw=mb(Qr("cyclic",ge));const ig=(t,r,c)=>(Z2(t,c,ac()),O.some(!0)),Qw=(t,r,c)=>og(c)&&rs(Il)(r.event)?O.none():ig(t,r,c),zp=(t,r)=>O.some(!0),LH=[et("execute",Qw),et("useSpace",!1),et("useEnter",!0),et("useControlEnter",!1),et("useDown",!1)],DA=(t,r,c)=>c.execute(t,r,t.element),E4=(t,r,c,h)=>{const b=c.useSpace&&!og(t.element)?Il:[],w=c.useEnter?Wd:[],S=c.useDown?Hp:[],E=b.concat(w).concat(S);return[fs(rs(E),DA)].concat(c.useControlEnter?[fs(du([BH,rs(Wd)]),DA)]:[])},$H=(t,r,c,h)=>c.useSpace&&!og(t.element)?[fs(rs(Il),zp)]:[];var nee=$h(LH,Ju.init,E4,$H,()=>O.none());const HH=()=>{const t=sr();return lc({readState:()=>t.get().map(b=>({numRows:String(b.numRows),numColumns:String(b.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(b,w)=>{t.set({numRows:b,numColumns:w})},getNumRows:()=>t.get().map(b=>b.numRows),getNumColumns:()=>t.get().map(b=>b.numColumns)})};var VH=Object.freeze({__proto__:null,flatgrid:HH,init:t=>t.state(t)});const ex=t=>(r,c,h,b)=>{const w=t(r.element);return PA(w,r,c,h,b)},_A=(t,r)=>{const c=Ik(t,r);return ex(c)},MA=(t,r)=>{const c=Ik(r,t);return ex(c)},RA=t=>(r,c,h,b)=>PA(t,r,c,h,b),PA=(t,r,c,h,b)=>h.focusManager.get(r).bind(S=>t(r.element,S,h,b)).map(S=>(h.focusManager.set(r,S),!0)),T4=RA,O4=RA,gb=RA,D4=t=>t.offsetWidth<=0&&t.offsetHeight<=0,_4=t=>!D4(t.dom),M4=(t,r)=>Bt(t,r).map(c=>({index:c,candidates:t})),R4=(t,r,c)=>{const h=S=>bs(S,r),b=_i(t,c),w=cn(b,_4);return M4(w,h)},tx=(t,r)=>Bt(t,c=>bs(r,c)),NA=(t,r,c,h)=>{const b=Math.floor(r/c),w=r%c;return h(b,w).bind(S=>{const E=S.row*c+S.column;return E>=0&&E<t.length?O.some(t[E]):O.none()})},BA=(t,r,c,h,b)=>NA(t,r,h,(w,S)=>{const D=w===c-1?t.length-w*h:h,P=Cp(S,b,0,D-1);return O.some({row:w,column:P})}),FA=(t,r,c,h,b)=>NA(t,r,h,(w,S)=>{const E=Cp(w,b,0,c-1),P=E===c-1?t.length-E*h:h,B=uc(S,0,P-1);return O.some({row:E,column:B})}),zH=(t,r,c,h)=>BA(t,r,c,h,1),UH=(t,r,c,h)=>BA(t,r,c,h,-1),WH=(t,r,c,h)=>FA(t,r,c,h,-1),jH=(t,r,c,h)=>FA(t,r,c,h,1),ZH=[Pt("selector"),et("execute",Qw),Rl("onEscape"),et("captureTab",!1),fk()],pb=(t,r,c)=>{Zr(t.element,r.selector).each(h=>{r.focusManager.set(t,h)})},P4=(t,r)=>r.focusManager.get(t).bind(c=>Qu(c,r.selector)),N4=(t,r,c,h)=>P4(t,c).bind(b=>c.execute(t,r,b)),Up=t=>(r,c,h,b)=>R4(r,c,h.selector).bind(w=>t(w.candidates,w.index,b.getNumRows().getOr(h.initSize.numRows),b.getNumColumns().getOr(h.initSize.numColumns))),B4=(t,r,c)=>c.captureTab?O.some(!0):O.none(),F4=(t,r,c)=>c.onEscape(t,r),I4=Up(UH),IA=Up(zH),L4=Up(WH),qH=Up(jH),GH=K([fs(rs(Yw),_A(I4,IA)),fs(rs(rg),MA(I4,IA)),fs(rs(jd),T4(L4)),fs(rs(Hp),O4(qH)),fs(du([eh,rs(Qf)]),B4),fs(du([Vp,rs(Qf)]),B4),fs(rs(Il.concat(Wd)),N4)]),KH=K([fs(rs(Kw),F4),fs(rs(Il),zp)]);var YH=$h(ZH,HH,GH,KH,()=>O.some(pb));const $4=(t,r,c,h,b)=>{const w=E=>Ts(E)==="button"&&Vr(E,"disabled")==="disabled",S=(E,D,P)=>b(E,D,h,0,P.length-1,P[D],B=>w(P[B])?S(E,B,P):O.from(P[B]));return R4(t,c,r).bind(E=>{const D=E.index,P=E.candidates;return S(D,D,P)})},H4=(t,r,c,h)=>$4(t,r,c,h,(b,w,S,E,D,P,B)=>{const H=uc(w+S,E,D);return H===b?O.from(P):B(H)}),Wp=(t,r,c,h)=>$4(t,r,c,h,(b,w,S,E,D,P,B)=>{const H=Cp(w,S,E,D);return H===b?O.none():B(H)}),LA=[Pt("selector"),et("getInitial",O.none),et("execute",Qw),Rl("onEscape"),et("executeOnMove",!1),et("allowVertical",!0),et("allowHorizontal",!0),et("cycles",!0)],XH=(t,r)=>r.focusManager.get(t).bind(c=>Qu(c,r.selector)),V4=(t,r,c)=>XH(t,c).bind(h=>c.execute(t,r,h)),z4=(t,r,c)=>{r.getInitial(t).orThunk(()=>Zr(t.element,r.selector)).each(h=>{r.focusManager.set(t,h)})},U4=(t,r,c)=>(c.cycles?Wp:H4)(t,c.selector,r,-1),W4=(t,r,c)=>(c.cycles?Wp:H4)(t,c.selector,r,1),pc=t=>(r,c,h,b)=>t(r,c,h,b).bind(()=>h.executeOnMove?V4(r,c,h):O.some(!0)),JH=(t,r,c)=>c.onEscape(t,r),QH=(t,r,c,h)=>{const b=[...c.allowHorizontal?Yw:[]].concat(c.allowVertical?jd:[]),w=[...c.allowHorizontal?rg:[]].concat(c.allowVertical?Hp:[]);return[fs(rs(b),pc(_A(U4,W4))),fs(rs(w),pc(MA(U4,W4))),fs(rs(Wd),V4),fs(rs(Il),V4)]},e9=K([fs(rs(Il),zp),fs(rs(Kw),JH)]);var t9=$h(LA,Ju.init,QH,e9,()=>O.some(z4));const nx=(t,r,c)=>O.from(t[r]).bind(h=>O.from(h[c]).map(b=>({rowIndex:r,columnIndex:c,cell:b}))),ag=(t,r,c,h)=>{const w=t[r].length,S=Cp(c,h,0,w-1);return nx(t,r,S)},ox=(t,r,c,h)=>{const b=Cp(c,h,0,t.length-1),w=t[b].length,S=uc(r,0,w-1);return nx(t,b,S)},j4=(t,r,c,h)=>{const w=t[r].length,S=uc(c+h,0,w-1);return nx(t,r,S)},sx=(t,r,c,h)=>{const b=uc(c+h,0,t.length-1),w=t[b].length,S=uc(r,0,w-1);return nx(t,b,S)},rx=(t,r,c)=>ag(t,r,c,1),$A=(t,r,c)=>ag(t,r,c,-1),n9=(t,r,c)=>ox(t,c,r,-1),o9=(t,r,c)=>ox(t,c,r,1),s9=(t,r,c)=>j4(t,r,c,-1),r9=(t,r,c)=>j4(t,r,c,1),i9=(t,r,c)=>sx(t,c,r,-1),a9=(t,r,c)=>sx(t,c,r,1),Z4=[Zu("selectors",[Pt("row"),Pt("cell")]),et("cycles",!0),et("previousSelector",O.none),et("execute",Qw)],HA=(t,r,c)=>{r.previousSelector(t).orThunk(()=>{const b=r.selectors;return Zr(t.element,b.cell)}).each(b=>{r.focusManager.set(t,b)})},l9=(t,r,c)=>au(t.element).bind(h=>c.execute(t,r,h)),c9=(t,r)=>ce(t,c=>_i(c,r.selectors.cell)),ix=(t,r)=>(c,h,b)=>{const w=b.cycles?t:r;return Qu(h,b.selectors.row).bind(S=>{const E=_i(S,b.selectors.cell);return tx(E,h).bind(D=>{const P=_i(c,b.selectors.row);return tx(P,S).bind(B=>{const H=c9(P,b);return w(H,B,D).map(j=>j.cell)})})})},q4=ix($A,s9),Hh=ix(rx,r9),G4=ix(n9,i9),u9=ix(o9,a9),VA=K([fs(rs(Yw),_A(q4,Hh)),fs(rs(rg),MA(q4,Hh)),fs(rs(jd),T4(G4)),fs(rs(Hp),O4(u9)),fs(rs(Il.concat(Wd)),l9)]),d9=K([fs(rs(Il),zp)]);var K4=$h(Z4,Ju.init,VA,d9,()=>O.some(HA));const Y4=[Pt("selector"),et("execute",Qw),et("moveOnTab",!1)],zA=(t,r,c)=>c.focusManager.get(t).bind(h=>c.execute(t,r,h)),X4=(t,r,c)=>{Zr(t.element,r.selector).each(h=>{r.focusManager.set(t,h)})},UA=(t,r,c)=>Wp(t,c.selector,r,-1),J4=(t,r,c)=>Wp(t,c.selector,r,1),f9=(t,r,c,h)=>c.moveOnTab?gb(UA)(t,r,c,h):O.none(),h9=(t,r,c,h)=>c.moveOnTab?gb(J4)(t,r,c,h):O.none(),WA=K([fs(rs(jd),gb(UA)),fs(rs(Hp),gb(J4)),fs(du([eh,rs(Qf)]),f9),fs(du([Vp,rs(Qf)]),h9),fs(rs(Wd),zA),fs(rs(Il),zA)]),m9=K([fs(rs(Il),zp)]);var g9=$h(Y4,Ju.init,WA,m9,()=>O.some(X4));const p9=[Rl("onSpace"),Rl("onEnter"),Rl("onShiftEnter"),Rl("onLeft"),Rl("onRight"),Rl("onTab"),Rl("onShiftTab"),Rl("onUp"),Rl("onDown"),Rl("onEscape"),et("stopSpaceKeyup",!1),Ds("focusIn")],b9=(t,r,c)=>[fs(rs(Il),c.onSpace),fs(du([Vp,rs(Wd)]),c.onEnter),fs(du([eh,rs(Wd)]),c.onShiftEnter),fs(du([eh,rs(Qf)]),c.onShiftTab),fs(du([Vp,rs(Qf)]),c.onTab),fs(rs(jd),c.onUp),fs(rs(Hp),c.onDown),fs(rs(Yw),c.onLeft),fs(rs(rg),c.onRight),fs(rs(Il),c.onSpace)],Q4=(t,r,c)=>[...c.stopSpaceKeyup?[fs(rs(Il),zp)]:[],fs(rs(Kw),c.onEscape)];var v9=$h(p9,Ju.init,b9,Q4,t=>t.focusIn);const y9=Xw.schema(),w9=Jw.schema(),eR=t9.schema(),x9=YH.schema(),S9=K4.schema(),tR=nee.schema(),C9=g9.schema(),k9=v9.schema();var ax=Object.freeze({__proto__:null,acyclic:y9,cyclic:w9,flow:eR,flatgrid:x9,matrix:S9,execution:tR,menu:C9,special:k9});const A9=t=>Qs(t,"setGridSize"),Fn=Ek({branchKey:"mode",branches:ax,name:"keying",active:{events:(t,r)=>t.handler.toEvents(t,r)},apis:{focusIn:(t,r,c)=>{r.sendFocusIn(r).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},h=>{h(t,r,c)})},setGridSize:(t,r,c,h,b)=>{A9(c)&&c.setGridSize(h,b)}},state:VH}),$a=(t,r)=>{dn(()=>{q7(t,r,()=>ce(r,t.getSystem().build))},t.element)},nR=(t,r)=>{dn(()=>{G7(t,r,()=>jQ(t.element,r,t.getSystem().buildOrPatch))},t.element)},oR=(t,r,c,h)=>{Kk(r);const b=E8(t.element,c,h,t.getSystem().buildOrPatch);Gk(t,b),t.syncComponents()},lx=(t,r,c)=>{const h=t.getSystem().build(c);Yk(t,h,r)},E9=(t,r,c,h)=>{qf(r),lx(t,(b,w)=>pi(b,w,c),h)},sR=(t,r,c,h)=>(r.reuseDom?nR:$a)(t,h),rR=(t,r,c,h)=>{lx(t,Ma,h)},T9=(t,r,c,h)=>{lx(t,By,h)},O9=(t,r,c,h)=>{const b=cx(t);Je(b,S=>bs(h.element,S.element)).each(qf)},cx=(t,r)=>t.components(),iR=(t,r,c,h,b)=>{const w=cx(t);return O.from(w[h]).map(S=>(b.fold(()=>qf(S),E=>{(r.reuseDom?oR:E9)(t,S,h,E)}),S))};var _9=Object.freeze({__proto__:null,append:rR,prepend:T9,remove:O9,replaceAt:iR,replaceBy:(t,r,c,h,b)=>{const w=cx(t);return Bt(w,h).bind(S=>iR(t,r,c,S,b))},set:sR,contents:cx});const po=Ji({fields:[Hi("reuseDom",!0)],name:"replacing",apis:_9}),aR=(t,r)=>{const c=ar(r);return Ji({fields:[Pt("enabled")],name:t,active:{events:K(c)}})},So=(t,r)=>{const c=aR(t,r);return{key:t,value:{config:{},me:c,configAsRaw:K({}),initialConfig:{},state:Ju}}},jA=(t,r)=>{r.ignore||(dc(t.element),r.onFocus(t))};var M9=Object.freeze({__proto__:null,focus:jA,blur:(t,r)=>{r.ignore||Tk(t.element)},isFocused:t=>Z0(t.element)}),lR=Object.freeze({__proto__:null,exhibit:(t,r)=>{const c=r.ignore?{}:{attributes:{tabindex:"-1"}};return su(c)},events:t=>ar([_t(dp(),(r,c)=>{jA(r,t),c.stop()})].concat(t.stopMousedown?[_t(bi(),(r,c)=>{c.event.prevent()})]:[]))}),Vh=[os("onFocus"),et("stopMousedown",!1),et("ignore",!1)];const Xn=Ji({fields:Vh,name:"focusing",active:lR,apis:M9}),cR=t=>({init:()=>{const c=Zn(t);return{get:()=>c.get(),set:E=>c.set(E),clear:()=>c.set(t),readState:()=>c.get()}}}),ZA=(t,r,c)=>{const h=r.aria;h.update(t,h,c.get())},P9=(t,r,c)=>{r.toggleClass.each(h=>{c.get()?ti(t.element,h):wr(t.element,h)})},bb=(t,r,c,h)=>{const b=c.get();c.set(h),P9(t,r,c),ZA(t,r,c),b!==h&&r.onToggled(t,h)},uR=(t,r,c)=>{bb(t,r,c,!c.get())},N9=(t,r,c)=>{bb(t,r,c,!0)},dR=(t,r,c)=>{bb(t,r,c,!1)},qA=(t,r,c)=>c.get(),ux=(t,r,c)=>{bb(t,r,c,r.selected)};var B9=Object.freeze({__proto__:null,onLoad:ux,toggle:uR,isOn:qA,on:N9,off:dR,set:bb}),fR=Object.freeze({__proto__:null,exhibit:()=>su({}),events:(t,r)=>{const c=Ak(t,r,uR),h=xw(t,r,ux);return ar(tt([t.toggleOnExecute?[c]:[],[h]]))}});const I9=(t,r,c)=>{sn(t.element,"aria-pressed",c),r.syncWithExpanded&&jp(t,r,c)},L9=(t,r,c)=>{sn(t.element,"aria-selected",c)},vb=(t,r,c)=>{sn(t.element,"aria-checked",c)},jp=(t,r,c)=>{sn(t.element,"aria-expanded",c)};var hR=[et("selected",!1),Ds("toggleClass"),et("toggleOnExecute",!0),os("onToggled"),_l("aria",{mode:"none"},ms("mode",{pressed:[et("syncWithExpanded",!1),qs("update",I9)],checked:[qs("update",vb)],expanded:[qs("update",jp)],selected:[qs("update",L9)],none:[qs("update",Z)]}))];const No=Ji({fields:hR,name:"toggling",active:fR,apis:B9,state:cR(!1)}),th=()=>{const t=(r,c)=>{c.stop(),Ff(r)};return[_t(Oh(),t),_t(Ku(),t),If(Pf()),If(bi())]},sd=t=>{const r=c=>$f((h,b)=>{c(h),b.stop()});return ar(tt([t.map(r).toArray(),th()]))},mR="alloy.item-hover",gR="alloy.item-focus",GA="alloy.item-toggled",Zd=t=>{(au(t.element).isNone()||Xn.isFocused(t))&&(Xn.isFocused(t)||Xn.focus(t),Hn(t,mR,{item:t}))},dx=t=>{Hn(t,gR,{item:t})},$9=(t,r)=>{Hn(t,GA,{item:t,state:r})},KA=K(mR),pR=K(gR),bR=K(GA),YA=t=>t.toggling.map(r=>r.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),vR=t=>Ot(ie({aria:{mode:"checked"}},ao(t,(r,c)=>c!=="exclusive")),{onToggled:(r,c)=>{J(t.onToggled)&&t.onToggled(r,c),$9(r,c)}}),H9=t=>({dom:t.dom,domModification:Ot(ie({},t.domModification),{attributes:ie(Ot(ie({role:YA(t)},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:cu.augment(t.itemBehaviours,[t.toggling.fold(No.revoke,r=>No.config(vR(r))),Xn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:r=>{dx(r)}}),Fn.config({mode:"execution"}),ln.config({store:{mode:"memory",initialValue:t.data}}),So("item-type-events",[...th(),_t(Nf(),Zd),_t(Rr(),Xn.focus)])]),components:t.components,eventOrder:t.eventOrder}),V9=[Pt("data"),Pt("components"),Pt("dom"),et("hasSubmenu",!1),Ds("toggling"),cu.field("itemBehaviours",[No,Xn,Fn,ln]),et("ignoreFocus",!1),et("domModification",{}),qs("builder",H9),et("eventOrder",{})],z9=t=>({dom:t.dom,components:t.components,events:ar([n8(Rr())])}),fx=[Pt("dom"),Pt("components"),qs("builder",z9)],yb=K("item-widget"),wb=K([Ca({name:"widget",overrides:t=>({behaviours:Kt([ln.config({store:{mode:"manual",getValue:r=>t.data,setValue:Z}})])})})]),U9=t=>{const r=vA(yb(),t,wb()),c=jw(yb(),t,r.internals()),h=w=>Gs(w,t,"widget").map(S=>(Fn.focusIn(S),S)),b=(w,S)=>og(S.event.target)?O.none():(t.autofocus&&S.setSource(w.element),O.none());return{dom:t.dom,components:c,domModification:t.domModification,events:ar([$f((w,S)=>{h(w).each(E=>{S.stop()})}),_t(Nf(),Zd),_t(Rr(),(w,S)=>{t.autofocus?h(w):Xn.focus(w)})]),behaviours:cu.augment(t.widgetBehaviours,[ln.config({store:{mode:"memory",initialValue:t.data}}),Xn.config({ignore:t.ignoreFocus,onFocus:w=>{dx(w)}}),Fn.config({mode:"special",focusIn:t.autofocus?w=>{h(w)}:s3(),onLeft:b,onRight:b,onEscape:(w,S)=>!Xn.isFocused(w)&&!t.autofocus?(Xn.focus(w),O.some(!0)):(t.autofocus&&S.setSource(w.element),O.none())})])}},W9=[Pt("uid"),Pt("data"),Pt("components"),Pt("dom"),et("autofocus",!1),et("ignoreFocus",!1),cu.field("widgetBehaviours",[ln,Xn,Fn]),et("domModification",{}),xA(wb()),qs("builder",U9)],yR=ms("type",{widget:W9,item:V9,separator:fx}),wR=(t,r)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:r.initSize.numColumns,numRows:r.initSize.numRows},focusManager:t.focusManager}),xR=(t,r)=>({mode:"matrix",selectors:{row:r.rowSelector,cell:"."+t.markers.item},previousSelector:r.previousSelector,focusManager:t.focusManager}),SR=(t,r)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:r.moveOnTab,focusManager:t.focusManager}),j9=K([ub({factory:{sketch:t=>{const r=Ka("menu.spec item",yR,t);return r.builder(r)}},name:"items",unit:"item",defaults:(t,r)=>xo(r,"uid")?r:Ot(ie({},r),{uid:mp("item")}),overrides:(t,r)=>({type:r.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),XA=K([Pt("value"),Pt("items"),Pt("dom"),Pt("components"),et("eventOrder",{}),yi("menuBehaviours",[gs,ln,Zo,Fn]),_l("movement",{mode:"menu",moveOnTab:!0},ms("mode",{grid:[fk(),qs("config",wR)],matrix:[qs("config",xR),Pt("rowSelector"),et("previousSelector",O.none)],menu:[et("moveOnTab",!0),qs("config",SR)]})),B8(),et("fakeFocus",!1),et("focusManager",OA()),os("onHighlight"),os("onDehighlight")]),CR=K("alloy.menu-focus"),Z9=(t,r)=>{const c=_i(t.element,'[role="menuitemradio"][aria-checked="true"]');Ze(c,h=>{bs(h,r.element)||t.getSystem().getByDom(h).each(b=>{No.off(b)})})},q9=(t,r,c,h)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Mi(t.menuBehaviours,[gs.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),ln.config({store:{mode:"memory",initialValue:t.value}}),Zo.config({find:O.some}),Fn.config(t.movement.config(t,t.movement))]),events:ar([_t(pR(),(b,w)=>{const S=w.event;b.getSystem().getByDom(S.target).each(E=>{gs.highlight(b,E),w.stop(),Hn(b,CR(),{menu:b,item:E})})}),_t(KA(),(b,w)=>{const S=w.event.item;gs.highlight(b,S)}),_t(bR(),(b,w)=>{const{item:S,state:E}=w.event;E&&Vr(S.element,"role")==="menuitemradio"&&Z9(b,S)})]),components:r,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),cg=ka({name:"Menu",configFields:XA(),partFields:j9(),factory:q9}),kR=t=>Rt(t,(r,c)=>({k:r,v:c})),AR=(t,r,c,h)=>$t(c,h).bind(b=>$t(t,b).bind(w=>{const S=AR(t,r,c,w);return O.some([w].concat(S))})).getOr([]),G9=(t,r)=>{const c={};Ye(t,(S,E)=>{Ze(S,D=>{c[D]=E})});const h=r,b=kR(r),w=pt(b,(S,E)=>[E].concat(AR(c,h,b,E)));return pt(c,S=>$t(w,S).getOr([S]))},ER=()=>{const t=Zn({}),r=Zn({}),c=Zn({}),h=sr(),b=Zn({}),w=()=>{t.set({}),r.set({}),c.set({}),h.clear()},S=()=>h.get().isNone(),E=(Et,St)=>{r.set(Ot(ie({},r.get()),{[Et]:{type:"prepared",menu:St}}))},D=(Et,St,jt,Jt)=>{h.set(Et),t.set(jt),r.set(St),b.set(Jt);const Co=G9(Jt,jt);c.set(Co)},P=Et=>Fo(t.get(),(St,jt)=>St===Et),B=(Et,St,jt)=>Ce(Et).bind(Jt=>P(Et).bind(Co=>St(Co).map(fn=>({triggeredMenu:Jt,triggeringItem:fn,triggeringPath:jt})))),H=(Et,St)=>{const jt=cn(Le(Et).toArray(),Jt=>Ce(Jt).isSome());return $t(c.get(),Et).bind(Jt=>{const Co=Ne(jt.concat(Jt)),fn=ue(Co,(ro,Jn)=>B(ro,St,Co.slice(0,Jn+1)).fold(()=>Sr(h.get(),ro)?[]:[O.none()],xs=>[O.some(xs)]));return di(fn)})},j=Et=>$t(t.get(),Et).map(St=>{const jt=$t(c.get(),Et).getOr([]);return[St].concat(jt)}),Y=Et=>$t(c.get(),Et).bind(St=>St.length>1?O.some(St.slice(1)):O.none()),oe=Et=>$t(c.get(),Et),Ce=Et=>Qe(Et).bind(Zp),Qe=Et=>$t(r.get(),Et),Le=Et=>$t(t.get(),Et);return{setMenuBuilt:E,setContents:D,expand:j,refresh:oe,collapse:Y,lookupMenu:Qe,lookupItem:Le,otherMenus:Et=>{const St=b.get();return Me(Kn(St),Et)},getPrimary:()=>h.get().bind(Ce),getMenus:()=>r.get(),clear:w,isClear:S,getTriggeringPath:H}},Zp=t=>t.type==="prepared"?O.some(t.menu):O.none(),TR={init:ER,extractPreparedMenu:Zp},qp=pn("tiered-menu-item-highlight"),hx=pn("tiered-menu-item-dehighlight");var Ha;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Ha||(Ha={}));const OR=(t,r)=>{const c=sr(),h=(Qt,yn,io)=>pt(io,(uo,Un)=>{const bo=()=>cg.sketch(Ot(ie({},uo),{value:Un,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Is,is)=>{Hn(Is,qp,{menuComp:Is,itemComp:is})},onDehighlight:(Is,is)=>{Hn(Is,hx,{menuComp:Is,itemComp:is})},focusManager:t.fakeFocus?IH():OA()}));return Un===yn?{type:"prepared",menu:Qt.getSystem().build(bo())}:{type:"notbuilt",nbMenu:bo}}),b=TR.init(),w=Qt=>{const yn=h(Qt,t.data.primary,t.data.menus),io=D();return b.setContents(t.data.primary,yn,t.data.expansions,io),b.getPrimary()},S=Qt=>ln.getValue(Qt).value,E=(Qt,yn,io)=>ho(yn,uo=>{if(!uo.getSystem().isConnected())return O.none();const Un=gs.getCandidates(uo);return Je(Un,bo=>S(bo)===io)}),D=Qt=>pt(t.data.menus,(yn,io)=>ue(yn.items,uo=>uo.type==="separator"?[]:[uo.data.value])),P=gs.highlight,B=(Qt,yn)=>{P(Qt,yn),gs.getHighlighted(yn).orThunk(()=>gs.getFirst(yn)).each(io=>{t.fakeFocus?gs.highlight(yn,io):Z2(Qt,io.element,Rr())})},H=(Qt,yn)=>pr(ce(yn,io=>Qt.lookupMenu(io).bind(uo=>uo.type==="prepared"?O.some(uo.menu):O.none()))),j=(Qt,yn,io)=>{const uo=H(yn,yn.otherMenus(io));Ze(uo,Un=>{ru(Un.element,[t.markers.backgroundMenu]),t.stayInDom||po.remove(Qt,Un)})},Y=Qt=>c.get().getOrThunk(()=>{const yn={},io=_i(Qt.element,`.${t.markers.item}`),uo=cn(io,Un=>Vr(Un,"aria-haspopup")==="true");return Ze(uo,Un=>{Qt.getSystem().getByDom(Un).each(bo=>{const Is=S(bo);yn[Is]=bo})}),c.set(yn),yn}),oe=(Qt,yn)=>{const io=Y(Qt);Ye(io,(uo,Un)=>{const bo=We(yn,Un);sn(uo.element,"aria-expanded",bo)})},Ce=(Qt,yn,io)=>O.from(io[0]).bind(uo=>yn.lookupMenu(uo).bind(Un=>{if(Un.type==="notbuilt")return O.none();{const bo=Un.menu,Is=H(yn,io.slice(1));return Ze(Is,is=>{ti(is.element,t.markers.backgroundMenu)}),jo(bo.element)||po.append(Qt,Rc(bo)),ru(bo.element,[t.markers.backgroundMenu]),B(Qt,bo),j(Qt,yn,io),O.some(bo)}}));let Qe;(function(Qt){Qt[Qt.HighlightSubmenu=0]="HighlightSubmenu",Qt[Qt.HighlightParent=1]="HighlightParent"})(Qe||(Qe={}));const Le=(Qt,yn,io)=>{if(io.type==="notbuilt"){const uo=Qt.getSystem().build(io.nbMenu());return b.setMenuBuilt(yn,uo),uo}else return io.menu},_e=(Qt,yn,io=Qe.HighlightSubmenu)=>{if(yn.hasConfigured(qn)&&qn.isDisabled(yn))return O.some(yn);{const uo=S(yn);return b.expand(uo).bind(Un=>(oe(Qt,Un),O.from(Un[0]).bind(bo=>b.lookupMenu(bo).bind(Is=>{const is=Le(Qt,bo,Is);return jo(is.element)||po.append(Qt,Rc(is)),t.onOpenSubmenu(Qt,yn,is,Ne(Un)),io===Qe.HighlightSubmenu?(gs.highlightFirst(is),Ce(Qt,b,Un)):(gs.dehighlightAll(is),O.some(yn))}))))}},Xe=(Qt,yn)=>{const io=S(yn);return b.collapse(io).bind(uo=>(oe(Qt,uo),Ce(Qt,b,uo).map(Un=>(t.onCollapseMenu(Qt,yn,Un),Un))))},Ft=(Qt,yn)=>{const io=S(yn);return b.refresh(io).bind(uo=>(oe(Qt,uo),Ce(Qt,b,uo)))},Et=(Qt,yn)=>og(yn.element)?O.none():_e(Qt,yn,Qe.HighlightSubmenu),St=(Qt,yn)=>og(yn.element)?O.none():Xe(Qt,yn),jt=(Qt,yn)=>Xe(Qt,yn).orThunk(()=>t.onEscape(Qt,yn).map(()=>Qt)),Jt=Qt=>(yn,io)=>Qu(io.getSource(),`.${t.markers.item}`).bind(uo=>yn.getSystem().getByDom(uo).toOptional().bind(Un=>Qt(yn,Un).map(ge))),Co=ar([_t(CR(),(Qt,yn)=>{const io=yn.event.item;b.lookupItem(S(io)).each(()=>{const uo=yn.event.menu;gs.highlight(Qt,uo);const Un=S(yn.event.item);b.refresh(Un).each(bo=>j(Qt,b,bo))})}),$f((Qt,yn)=>{const io=yn.event.target;Qt.getSystem().getByDom(io).each(uo=>{S(uo).indexOf("collapse-item")===0&&Xe(Qt,uo),_e(Qt,uo,Qe.HighlightSubmenu).fold(()=>{t.onExecute(Qt,uo)},Z)})}),nr((Qt,yn)=>{w(Qt).each(io=>{po.append(Qt,Rc(io)),t.onOpenMenu(Qt,io),t.highlightOnOpen===Ha.HighlightMenuAndItem?B(Qt,io):t.highlightOnOpen===Ha.HighlightJustMenu&&P(Qt,io)})}),_t(qp,(Qt,yn)=>{t.onHighlightItem(Qt,yn.event.menuComp,yn.event.itemComp)}),_t(hx,(Qt,yn)=>{t.onDehighlightItem(Qt,yn.event.menuComp,yn.event.itemComp)}),...t.navigateOnHover?[_t(KA(),(Qt,yn)=>{const io=yn.event.item;Ft(Qt,io),_e(Qt,io,Qe.HighlightParent),t.onHover(Qt,io)})]:[]]),fn=Qt=>gs.getHighlighted(Qt).bind(gs.getHighlighted),ro=Qt=>{fn(Qt).each(yn=>{Xe(Qt,yn)})},Jn=Qt=>{b.getPrimary().each(yn=>{B(Qt,yn)})},xs=Qt=>O.from(Qt.components()[0]).filter(yn=>Vr(yn.element,"role")==="menu"),Jo={collapseMenu:ro,highlightPrimary:Jn,repositionMenus:Qt=>{b.getPrimary().bind(io=>fn(Qt).bind(uo=>{const Un=S(uo),bo=cs(b.getMenus()),Is=pr(ce(bo,TR.extractPreparedMenu));return b.getTriggeringPath(Un,is=>E(Qt,Is,is))}).map(uo=>({primary:io,triggeringPath:uo}))).fold(()=>{xs(Qt).each(io=>{t.onRepositionMenu(Qt,io,[])})},({primary:io,triggeringPath:uo})=>{t.onRepositionMenu(Qt,io,uo)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Mi(t.tmenuBehaviours,[Fn.config({mode:"special",onRight:Jt(Et),onLeft:Jt(St),onEscape:Jt(jt),focusIn:(Qt,yn)=>{b.getPrimary().each(io=>{Z2(Qt,io.element,Rr())})}}),gs.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Zo.config({find:Qt=>gs.getHighlighted(Qt)}),po.config({})]),eventOrder:t.eventOrder,apis:Jo,events:Co}},K9=K("collapse-item"),Y9=(t,r,c)=>({primary:t,menus:r,expansions:c}),DR=(t,r)=>({primary:t,menus:ic(t,r),expansions:{}}),X9=t=>({value:pn(K9()),meta:{text:t}}),zh=Fl({name:"TieredMenu",configFields:[dk("onExecute"),dk("onEscape"),ed("onOpenMenu"),ed("onOpenSubmenu"),os("onRepositionMenu"),os("onCollapseMenu"),et("highlightOnOpen",Ha.HighlightMenuAndItem),Zu("data",[Pt("primary"),Pt("menus"),Pt("expansions")]),et("fakeFocus",!1),os("onHighlightItem"),os("onDehighlightItem"),os("onHover"),hw(),Pt("dom"),et("navigateOnHover",!0),et("stayInDom",!1),yi("tmenuBehaviours",[Fn,gs,Zo,po]),et("eventOrder",{})],apis:{collapseMenu:(t,r)=>{t.collapseMenu(r)},highlightPrimary:(t,r)=>{t.highlightPrimary(r)},repositionMenus:(t,r)=>{t.repositionMenus(r)}},factory:OR,extraApis:{tieredData:Y9,singleData:DR,collapseItem:X9}}),J9=(t,r,c,h,b)=>{const w=()=>t.lazySink(r),S=h.type==="horizontal"?{layouts:{onLtr:()=>ww(),onRtl:()=>kk()}}:{},E=P=>P.length===2,D=P=>E(P)?S:{};return zh.sketch({dom:{tag:"div"},data:h.data,markers:h.menu.markers,highlightOnOpen:h.menu.highlightOnOpen,fakeFocus:h.menu.fakeFocus,onEscape:()=>(ss.close(r),t.onEscape.map(P=>P(r)),O.some(!0)),onExecute:()=>O.some(!0),onOpenMenu:(P,B)=>{Sa.positionWithinBounds(w().getOrDie(),B,c,b())},onOpenSubmenu:(P,B,H,j)=>{const Y=w().getOrDie();Sa.position(Y,H,{anchor:ie({type:"submenu",item:B},D(j))})},onRepositionMenu:(P,B,H)=>{const j=w().getOrDie();Sa.positionWithinBounds(j,B,c,b()),Ze(H,Y=>{const oe=D(Y.triggeringPath);Sa.position(j,Y.triggeredMenu,{anchor:ie({type:"submenu",item:Y.triggeringItem},oe)})})}})},Q9=(t,r)=>{const c=(j,Y)=>t.getRelated(j).exists(Ce=>Rh(Ce,Y)),h=(j,Y)=>{ss.setContent(j,Y)},b=(j,Y,oe)=>{const Ce=O.none;w(j,Y,oe,Ce)},w=(j,Y,oe,Ce)=>{const Qe=t.lazySink(j).getOrDie();ss.openWhileCloaked(j,Y,()=>Sa.positionWithinBounds(Qe,j,oe,Ce())),ln.setValue(j,O.some({mode:"position",config:oe,getBounds:Ce}))},S=(j,Y,oe)=>{E(j,Y,oe,O.none)},E=(j,Y,oe,Ce)=>{const Qe=J9(t,j,Y,oe,Ce);ss.open(j,Qe),ln.setValue(j,O.some({mode:"menu",menu:Qe}))},D=j=>{ss.isOpen(j)&&(ln.setValue(j,O.none()),ss.close(j))},P=j=>ss.getState(j),B=j=>{ss.isOpen(j)&&ln.getValue(j).each(Y=>{switch(Y.mode){case"menu":ss.getState(j).each(zh.repositionMenus);break;case"position":const oe=t.lazySink(j).getOrDie();Sa.positionWithinBounds(oe,j,Y.config,Y.getBounds());break}})},H={setContent:h,showAt:b,showWithinBounds:w,showMenuAt:S,showMenuWithinBounds:E,hide:D,getContent:P,reposition:B,isOpen:ss.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Mi(t.inlineBehaviours,[ss.config({isPartOf:(j,Y,oe)=>Rh(Y,oe)||c(j,oe),getAttachPoint:j=>t.lazySink(j).getOrDie(),onOpen:j=>{t.onShow(j)},onClose:j=>{t.onHide(j)}}),ln.config({store:{mode:"memory",initialValue:O.none()}}),Pl.config({channels:ie(ie({},tA(ie({isExtraPart:r.isExtraPart},t.fireDismissalEventInstead.map(j=>({fireEventInstead:{event:j.event}})).getOr({})))),nA(Ot(ie({},t.fireRepositionEventInstead.map(j=>({fireEventInstead:{event:j.event}})).getOr({})),{doReposition:B})))})]),eventOrder:t.eventOrder,apis:H}},vr=Fl({name:"InlineView",configFields:[Pt("lazySink"),os("onShow"),os("onHide"),Bm("onEscape"),yi("inlineBehaviours",[ss,ln,Pl]),oc("fireDismissalEventInstead",[et("event",Wm())]),oc("fireRepositionEventInstead",[et("event",TM())]),et("getRelated",O.none),et("isExtraPart",ne),et("eventOrder",O.none)],factory:Q9,apis:{showAt:(t,r,c,h)=>{t.showAt(r,c,h)},showWithinBounds:(t,r,c,h,b)=>{t.showWithinBounds(r,c,h,b)},showMenuAt:(t,r,c,h)=>{t.showMenuAt(r,c,h)},showMenuWithinBounds:(t,r,c,h,b)=>{t.showMenuWithinBounds(r,c,h,b)},hide:(t,r)=>{t.hide(r)},isOpen:(t,r)=>t.isOpen(r),getContent:(t,r)=>t.getContent(r),setContent:(t,r,c)=>{t.setContent(r,c)},reposition:(t,r)=>{t.reposition(r)}}});var ug=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ri=Fl({name:"Button",factory:t=>{const r=sd(t.action),c=t.dom.tag,h=w=>$t(t.dom,"attributes").bind(S=>$t(S,w)),b=()=>{if(c==="button"){const w=h("type").getOr("button"),S=h("role").map(E=>({role:E})).getOr({});return ie({type:w},S)}else return{role:t.role.getOr(h("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:r,behaviours:cu.augment(t.buttonBehaviours,[Xn.config({}),Fn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:b()},eventOrder:t.eventOrder}},configFields:[et("uid",void 0),Pt("dom"),et("components",[]),cu.field("buttonBehaviours",[Xn,Fn]),Ds("action"),Ds("role"),et("eventOrder",{})]}),eV=t=>{const r=t.dom.attributes!==void 0?t.dom.attributes:[];return Do(r,(c,h)=>h.name==="class"?c:Ot(ie({},c),{[h.name]:h.value}),{})},tV=t=>Array.prototype.slice.call(t.dom.classList,0),nh=t=>{const r=Tt.fromHtml(t),c=$i(r),h=eV(r),b=tV(r),w=c.length===0?{}:{innerHtml:X2(r)};return ie({tag:Ts(r),classes:b,attributes:h},w)},As=t=>{const r=mH(t)&&Qs(t,"uid")?t.uid:mp("memento");return{get:w=>w.getSystem().getByUid(r).getOrDie(),getOpt:w=>w.getSystem().getByUid(r).toOptional(),asSpec:()=>Ot(ie({},t),{uid:r})}},{entries:JA,setPrototypeOf:QA,isFrozen:nV,getPrototypeOf:oV,getOwnPropertyDescriptor:sV}=Object;let{freeze:Ll,seal:rd,create:rV}=Object,{apply:mx,construct:eE}=typeof Reflect!="undefined"&&Reflect;mx||(mx=function(r,c,h){return r.apply(c,h)}),Ll||(Ll=function(r){return r}),rd||(rd=function(r){return r}),eE||(eE=function(r,c){return new r(...c)});const iV=hu(Array.prototype.forEach),aV=hu(Array.prototype.pop),xb=hu(Array.prototype.push),gx=hu(String.prototype.toLowerCase),oh=hu(String.prototype.toString),lV=hu(String.prototype.match),id=hu(String.prototype.replace),dg=hu(String.prototype.indexOf),MR=hu(String.prototype.trim),Pc=hu(RegExp.prototype.test),fu=cV(TypeError);function hu(t){return function(r){for(var c=arguments.length,h=new Array(c>1?c-1:0),b=1;b<c;b++)h[b-1]=arguments[b];return mx(t,r,h)}}function cV(t){return function(){for(var r=arguments.length,c=new Array(r),h=0;h<r;h++)c[h]=arguments[h];return eE(t,c)}}function qo(t,r,c){var h;c=(h=c)!==null&&h!==void 0?h:gx,QA&&QA(t,null);let b=r.length;for(;b--;){let w=r[b];if(typeof w=="string"){const S=c(w);S!==w&&(nV(r)||(r[b]=S),w=S)}t[w]=!0}return t}function fg(t){const r=rV(null);for(const[c,h]of JA(t))r[c]=h;return r}function Sb(t,r){for(;t!==null;){const h=sV(t,r);if(h){if(h.get)return hu(h.get);if(typeof h.value=="function")return hu(h.value)}t=oV(t)}function c(h){return null}return c}const tE=Ll(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),nE=Ll(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Cb=Ll(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),uV=Ll(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),oE=Ll(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),dV=Ll(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),kb=Ll(["#text"]),px=Ll(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),bx=Ll(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),sE=Ll(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ab=Ll(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),fV=rd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hV=rd(/<%[\w\W]*|[\w\W]*%>/gm),RR=rd(/\${[\w\W]*}/gm),mV=rd(/^data-[\-\w.\u00B7-\uFFFF]/),rE=rd(/^aria-[\-\w]+$/),iE=rd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),gV=rd(/^(?:\w+script|data):/i),pV=rd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),PR=rd(/^html$/i);var vx=Object.freeze({__proto__:null,MUSTACHE_EXPR:fV,ERB_EXPR:hV,TMPLIT_EXPR:RR,DATA_ATTR:mV,ARIA_ATTR:rE,IS_ALLOWED_URI:iE,IS_SCRIPT_OR_DATA:gV,ATTR_WHITESPACE:pV,DOCTYPE_NAME:PR});const bV=()=>typeof window=="undefined"?null:window,Eb=function(r,c){if(typeof r!="object"||typeof r.createPolicy!="function")return null;let h=null;const b="data-tt-policy-suffix";c&&c.hasAttribute(b)&&(h=c.getAttribute(b));const w="dompurify"+(h?"#"+h:"");try{return r.createPolicy(w,{createHTML(S){return S},createScriptURL(S){return S}})}catch(S){return null}};function Tb(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bV();const r=Wo=>Tb(Wo);if(r.version="3.0.5",r.removed=[],!t||!t.document||t.document.nodeType!==9)return r.isSupported=!1,r;const c=t.document,h=c.currentScript;let{document:b}=t;const{DocumentFragment:w,HTMLTemplateElement:S,Node:E,Element:D,NodeFilter:P,NamedNodeMap:B=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:H,DOMParser:j,trustedTypes:Y}=t,oe=D.prototype,Ce=Sb(oe,"cloneNode"),Qe=Sb(oe,"nextSibling"),Le=Sb(oe,"childNodes"),_e=Sb(oe,"parentNode");if(typeof S=="function"){const Wo=b.createElement("template");Wo.content&&Wo.content.ownerDocument&&(b=Wo.content.ownerDocument)}let Xe,Ft="";const{implementation:Et,createNodeIterator:St,createDocumentFragment:jt,getElementsByTagName:Jt}=b,{importNode:Co}=c;let fn={};r.isSupported=typeof JA=="function"&&typeof _e=="function"&&Et&&Et.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ro,ERB_EXPR:Jn,TMPLIT_EXPR:xs,DATA_ATTR:zn,ARIA_ATTR:Jo,IS_SCRIPT_OR_DATA:Qt,ATTR_WHITESPACE:yn}=vx;let{IS_ALLOWED_URI:io}=vx,uo=null;const Un=qo({},[...tE,...nE,...Cb,...oE,...kb]);let bo=null;const Is=qo({},[...px,...bx,...sE,...Ab]);let is=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ui=null,kl=null,Wc=!0,Ou=!0,hm=!1,Vg=!0,bd=!1,mh=!1,Kv=!1,C_=!1,H1=!1,ZC=!1,n$=!1,lte=!0,cte=!1;const kae="user-content-";let SX=!0,k_=!1,qC={},GC=null;const ute=qo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let dte=null;const fte=qo({},["audio","video","img","source","image","track"]);let CX=null;const hte=qo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),o$="http://www.w3.org/1998/Math/MathML",s$="http://www.w3.org/2000/svg",zg="http://www.w3.org/1999/xhtml";let KC=zg,kX=!1,AX=null;const Aae=qo({},[o$,s$,zg],oh);let Yv;const Eae=["application/xhtml+xml","text/html"],Tae="text/html";let Al,YC=null;const Oae=b.createElement("form"),mte=function(mt){return mt instanceof RegExp||mt instanceof Function},EX=function(mt){if(!(YC&&YC===mt)){if((!mt||typeof mt!="object")&&(mt={}),mt=fg(mt),Yv=Eae.indexOf(mt.PARSER_MEDIA_TYPE)===-1?Yv=Tae:Yv=mt.PARSER_MEDIA_TYPE,Al=Yv==="application/xhtml+xml"?oh:gx,uo="ALLOWED_TAGS"in mt?qo({},mt.ALLOWED_TAGS,Al):Un,bo="ALLOWED_ATTR"in mt?qo({},mt.ALLOWED_ATTR,Al):Is,AX="ALLOWED_NAMESPACES"in mt?qo({},mt.ALLOWED_NAMESPACES,oh):Aae,CX="ADD_URI_SAFE_ATTR"in mt?qo(fg(hte),mt.ADD_URI_SAFE_ATTR,Al):hte,dte="ADD_DATA_URI_TAGS"in mt?qo(fg(fte),mt.ADD_DATA_URI_TAGS,Al):fte,GC="FORBID_CONTENTS"in mt?qo({},mt.FORBID_CONTENTS,Al):ute,Ui="FORBID_TAGS"in mt?qo({},mt.FORBID_TAGS,Al):{},kl="FORBID_ATTR"in mt?qo({},mt.FORBID_ATTR,Al):{},qC="USE_PROFILES"in mt?mt.USE_PROFILES:!1,Wc=mt.ALLOW_ARIA_ATTR!==!1,Ou=mt.ALLOW_DATA_ATTR!==!1,hm=mt.ALLOW_UNKNOWN_PROTOCOLS||!1,Vg=mt.ALLOW_SELF_CLOSE_IN_ATTR!==!1,bd=mt.SAFE_FOR_TEMPLATES||!1,mh=mt.WHOLE_DOCUMENT||!1,H1=mt.RETURN_DOM||!1,ZC=mt.RETURN_DOM_FRAGMENT||!1,n$=mt.RETURN_TRUSTED_TYPE||!1,C_=mt.FORCE_BODY||!1,lte=mt.SANITIZE_DOM!==!1,cte=mt.SANITIZE_NAMED_PROPS||!1,SX=mt.KEEP_CONTENT!==!1,k_=mt.IN_PLACE||!1,io=mt.ALLOWED_URI_REGEXP||iE,KC=mt.NAMESPACE||zg,is=mt.CUSTOM_ELEMENT_HANDLING||{},mt.CUSTOM_ELEMENT_HANDLING&&mte(mt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(is.tagNameCheck=mt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),mt.CUSTOM_ELEMENT_HANDLING&&mte(mt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(is.attributeNameCheck=mt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),mt.CUSTOM_ELEMENT_HANDLING&&typeof mt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(is.allowCustomizedBuiltInElements=mt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),bd&&(Ou=!1),ZC&&(H1=!0),qC&&(uo=qo({},[...kb]),bo=[],qC.html===!0&&(qo(uo,tE),qo(bo,px)),qC.svg===!0&&(qo(uo,nE),qo(bo,bx),qo(bo,Ab)),qC.svgFilters===!0&&(qo(uo,Cb),qo(bo,bx),qo(bo,Ab)),qC.mathMl===!0&&(qo(uo,oE),qo(bo,sE),qo(bo,Ab))),mt.ADD_TAGS&&(uo===Un&&(uo=fg(uo)),qo(uo,mt.ADD_TAGS,Al)),mt.ADD_ATTR&&(bo===Is&&(bo=fg(bo)),qo(bo,mt.ADD_ATTR,Al)),mt.ADD_URI_SAFE_ATTR&&qo(CX,mt.ADD_URI_SAFE_ATTR,Al),mt.FORBID_CONTENTS&&(GC===ute&&(GC=fg(GC)),qo(GC,mt.FORBID_CONTENTS,Al)),SX&&(uo["#text"]=!0),mh&&qo(uo,["html","head","body"]),uo.table&&(qo(uo,["tbody"]),delete Ui.tbody),mt.TRUSTED_TYPES_POLICY){if(typeof mt.TRUSTED_TYPES_POLICY.createHTML!="function")throw fu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof mt.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw fu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Xe=mt.TRUSTED_TYPES_POLICY,Ft=Xe.createHTML("")}else Xe===void 0&&(Xe=Eb(Y,h)),Xe!==null&&typeof Ft=="string"&&(Ft=Xe.createHTML(""));Ll&&Ll(mt),YC=mt}},gte=qo({},["mi","mo","mn","ms","mtext"]),pte=qo({},["foreignobject","desc","title","annotation-xml"]),Dae=qo({},["title","style","font","a","script"]),r$=qo({},nE);qo(r$,Cb),qo(r$,uV);const TX=qo({},oE);qo(TX,dV);const _ae=function(mt){let Tn=_e(mt);(!Tn||!Tn.tagName)&&(Tn={namespaceURI:KC,tagName:"template"});const fo=gx(mt.tagName),oi=gx(Tn.tagName);return AX[mt.namespaceURI]?mt.namespaceURI===s$?Tn.namespaceURI===zg?fo==="svg":Tn.namespaceURI===o$?fo==="svg"&&(oi==="annotation-xml"||gte[oi]):!!r$[fo]:mt.namespaceURI===o$?Tn.namespaceURI===zg?fo==="math":Tn.namespaceURI===s$?fo==="math"&&pte[oi]:!!TX[fo]:mt.namespaceURI===zg?Tn.namespaceURI===s$&&!pte[oi]||Tn.namespaceURI===o$&&!gte[oi]?!1:!TX[fo]&&(Dae[fo]||!r$[fo]):!!(Yv==="application/xhtml+xml"&&AX[mt.namespaceURI]):!1},Xv=function(mt){xb(r.removed,{element:mt});try{mt.parentNode.removeChild(mt)}catch(Tn){mt.remove()}},A_=function(mt,Tn){try{xb(r.removed,{attribute:Tn.getAttributeNode(mt),from:Tn})}catch(fo){xb(r.removed,{attribute:null,from:Tn})}if(Tn.removeAttribute(mt),mt==="is"&&!bo[mt])if(H1||ZC)try{Xv(Tn)}catch(fo){}else try{Tn.setAttribute(mt,"")}catch(fo){}},bte=function(mt){let Tn,fo;if(C_)mt="<remove></remove>"+mt;else{const hf=lV(mt,/^[\r\n\t ]+/);fo=hf&&hf[0]}Yv==="application/xhtml+xml"&&KC===zg&&(mt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+mt+"</body></html>");const oi=Xe?Xe.createHTML(mt):mt;if(KC===zg)try{Tn=new j().parseFromString(oi,Yv)}catch(hf){}if(!Tn||!Tn.documentElement){Tn=Et.createDocument(KC,"template",null);try{Tn.documentElement.innerHTML=kX?Ft:oi}catch(hf){}}const El=Tn.body||Tn.documentElement;return mt&&fo&&El.insertBefore(b.createTextNode(fo),El.childNodes[0]||null),KC===zg?Jt.call(Tn,mh?"html":"body")[0]:mh?Tn.documentElement:El},vte=function(mt){return St.call(mt.ownerDocument||mt,mt,P.SHOW_ELEMENT|P.SHOW_COMMENT|P.SHOW_TEXT,null,!1)},Mae=function(mt){return mt instanceof H&&(typeof mt.nodeName!="string"||typeof mt.textContent!="string"||typeof mt.removeChild!="function"||!(mt.attributes instanceof B)||typeof mt.removeAttribute!="function"||typeof mt.setAttribute!="function"||typeof mt.namespaceURI!="string"||typeof mt.insertBefore!="function"||typeof mt.hasChildNodes!="function")},i$=function(mt){return typeof E=="object"?mt instanceof E:mt&&typeof mt=="object"&&typeof mt.nodeType=="number"&&typeof mt.nodeName=="string"},Ug=function(mt,Tn,fo){fn[mt]&&iV(fn[mt],oi=>{oi.call(r,Tn,fo,YC)})},yte=function(mt){let Tn;if(Ug("beforeSanitizeElements",mt,null),Mae(mt))return Xv(mt),!0;const fo=Al(mt.nodeName);if(Ug("uponSanitizeElement",mt,{tagName:fo,allowedTags:uo}),mt.hasChildNodes()&&!i$(mt.firstElementChild)&&(!i$(mt.content)||!i$(mt.content.firstElementChild))&&Pc(/<[/\w]/g,mt.innerHTML)&&Pc(/<[/\w]/g,mt.textContent))return Xv(mt),!0;if(!uo[fo]||Ui[fo]){if(!Ui[fo]&&xte(fo)&&(is.tagNameCheck instanceof RegExp&&Pc(is.tagNameCheck,fo)||is.tagNameCheck instanceof Function&&is.tagNameCheck(fo)))return!1;if(SX&&!GC[fo]){const oi=_e(mt)||mt.parentNode,El=Le(mt)||mt.childNodes;if(El&&oi){const hf=El.length;for(let ta=hf-1;ta>=0;--ta)oi.insertBefore(Ce(El[ta],!0),Qe(mt))}}return Xv(mt),!0}return mt instanceof D&&!_ae(mt)||(fo==="noscript"||fo==="noembed"||fo==="noframes")&&Pc(/<\/no(script|embed|frames)/i,mt.innerHTML)?(Xv(mt),!0):(bd&&mt.nodeType===3&&(Tn=mt.textContent,Tn=id(Tn,ro," "),Tn=id(Tn,Jn," "),Tn=id(Tn,xs," "),mt.textContent!==Tn&&(xb(r.removed,{element:mt.cloneNode()}),mt.textContent=Tn)),Ug("afterSanitizeElements",mt,null),!1)},wte=function(mt,Tn,fo){if(lte&&(Tn==="id"||Tn==="name")&&(fo in b||fo in Oae))return!1;if(!(Ou&&!kl[Tn]&&Pc(zn,Tn))){if(!(Wc&&Pc(Jo,Tn))){if(!bo[Tn]||kl[Tn]){if(!(xte(mt)&&(is.tagNameCheck instanceof RegExp&&Pc(is.tagNameCheck,mt)||is.tagNameCheck instanceof Function&&is.tagNameCheck(mt))&&(is.attributeNameCheck instanceof RegExp&&Pc(is.attributeNameCheck,Tn)||is.attributeNameCheck instanceof Function&&is.attributeNameCheck(Tn))||Tn==="is"&&is.allowCustomizedBuiltInElements&&(is.tagNameCheck instanceof RegExp&&Pc(is.tagNameCheck,fo)||is.tagNameCheck instanceof Function&&is.tagNameCheck(fo))))return!1}else if(!CX[Tn]){if(!Pc(io,id(fo,yn,""))){if(!((Tn==="src"||Tn==="xlink:href"||Tn==="href")&&mt!=="script"&&dg(fo,"data:")===0&&dte[mt])){if(!(hm&&!Pc(Qt,id(fo,yn,"")))){if(fo)return!1}}}}}}return!0},xte=function(mt){return mt.indexOf("-")>0},Ste=function(mt){let Tn,fo,oi,El;Ug("beforeSanitizeAttributes",mt,null);const{attributes:hf}=mt;if(!hf)return;const ta={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:bo};for(El=hf.length;El--;){Tn=hf[El];const{name:mf,namespaceURI:OX}=Tn;fo=mf==="value"?Tn.value:MR(Tn.value);const Pae=fo;if(oi=Al(mf),ta.attrName=oi,ta.attrValue=fo,ta.keepAttr=!0,ta.forceKeepAttr=void 0,Ug("uponSanitizeAttribute",mt,ta),fo=ta.attrValue,ta.forceKeepAttr)continue;if(!ta.keepAttr){A_(mf,mt);continue}if(!Vg&&Pc(/\/>/i,fo)){A_(mf,mt);continue}bd&&(fo=id(fo,ro," "),fo=id(fo,Jn," "),fo=id(fo,xs," "));const Cte=Al(mt.nodeName);if(!wte(Cte,oi,fo)){A_(mf,mt);continue}if(cte&&(oi==="id"||oi==="name")&&(A_(mf,mt),fo=kae+fo),Xe&&typeof Y=="object"&&typeof Y.getAttributeType=="function"&&!OX)switch(Y.getAttributeType(Cte,oi)){case"TrustedHTML":{fo=Xe.createHTML(fo);break}case"TrustedScriptURL":{fo=Xe.createScriptURL(fo);break}}if(fo!==Pae)try{OX?mt.setAttributeNS(OX,mf,fo):mt.setAttribute(mf,fo)}catch(O0e){A_(mf,mt)}}Ug("afterSanitizeAttributes",mt,null)},Rae=function Wo(mt){let Tn;const fo=vte(mt);for(Ug("beforeSanitizeShadowDOM",mt,null);Tn=fo.nextNode();)Ug("uponSanitizeShadowNode",Tn,null),!yte(Tn)&&(Tn.content instanceof w&&Wo(Tn.content),Ste(Tn));Ug("afterSanitizeShadowDOM",mt,null)};return r.sanitize=function(Wo){let mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Tn,fo,oi,El;if(kX=!Wo,kX&&(Wo="<!-->"),typeof Wo!="string"&&!i$(Wo))if(typeof Wo.toString=="function"){if(Wo=Wo.toString(),typeof Wo!="string")throw fu("dirty is not a string, aborting")}else throw fu("toString is not a function");if(!r.isSupported)return Wo;if(Kv||EX(mt),r.removed=[],typeof Wo=="string"&&(k_=!1),k_){if(Wo.nodeName){const mf=Al(Wo.nodeName);if(!uo[mf]||Ui[mf])throw fu("root node is forbidden and cannot be sanitized in-place")}}else if(Wo instanceof E)Tn=bte("<!---->"),fo=Tn.ownerDocument.importNode(Wo,!0),fo.nodeType===1&&fo.nodeName==="BODY"||fo.nodeName==="HTML"?Tn=fo:Tn.appendChild(fo);else{if(!H1&&!bd&&!mh&&Wo.indexOf("<")===-1)return Xe&&n$?Xe.createHTML(Wo):Wo;if(Tn=bte(Wo),!Tn)return H1?null:n$?Ft:""}Tn&&C_&&Xv(Tn.firstChild);const hf=vte(k_?Wo:Tn);for(;oi=hf.nextNode();)yte(oi)||(oi.content instanceof w&&Rae(oi.content),Ste(oi));if(k_)return Wo;if(H1){if(ZC)for(El=jt.call(Tn.ownerDocument);Tn.firstChild;)El.appendChild(Tn.firstChild);else El=Tn;return(bo.shadowroot||bo.shadowrootmode)&&(El=Co.call(c,El,!0)),El}let ta=mh?Tn.outerHTML:Tn.innerHTML;return mh&&uo["!doctype"]&&Tn.ownerDocument&&Tn.ownerDocument.doctype&&Tn.ownerDocument.doctype.name&&Pc(PR,Tn.ownerDocument.doctype.name)&&(ta="<!DOCTYPE "+Tn.ownerDocument.doctype.name+`>
`+ta),bd&&(ta=id(ta,ro," "),ta=id(ta,Jn," "),ta=id(ta,xs," ")),Xe&&n$?Xe.createHTML(ta):ta},r.setConfig=function(Wo){EX(Wo),Kv=!0},r.clearConfig=function(){YC=null,Kv=!1},r.isValidAttribute=function(Wo,mt,Tn){YC||EX({});const fo=Al(Wo),oi=Al(mt);return wte(fo,oi,Tn)},r.addHook=function(Wo,mt){typeof mt=="function"&&(fn[Wo]=fn[Wo]||[],xb(fn[Wo],mt))},r.removeHook=function(Wo){if(fn[Wo])return aV(fn[Wo])},r.removeHooks=function(Wo){fn[Wo]&&(fn[Wo]=[])},r.removeAllHooks=function(){fn={}},r}var NR=Tb();const aE=t=>NR().sanitize(t);var bc=tinymce.util.Tools.resolve("tinymce.util.I18n");const vV={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},BR="temporary-placeholder",lE=t=>()=>$t(t,BR).getOr("!not found!"),Ob=(t,r)=>{const c=t.toLowerCase();if(bc.isRtl()){const h=In(c,"-rtl");return xo(r,h)?h:c}else return c},cE=(t,r)=>$t(r,Ob(t,r)),uE=(t,r)=>{const c=r();return cE(t,c).getOrThunk(lE(c))},dE=(t,r,c)=>{const h=r();return cE(t,h).or(c).getOrThunk(lE(h))},yV=t=>bc.isRtl()?xo(vV,t):!1,yx=()=>So("add-focusable",[nr(t=>{dw(t.element,"svg").each(r=>sn(r,"focusable","false"))})]),FR=(t,r,c,h)=>{var b,w;const S=yV(r)?["tox-icon--flip"]:[],E=$t(c,Ob(r,c)).or(h).getOrThunk(lE(c));return{dom:{tag:t.tag,attributes:(b=t.attributes)!==null&&b!==void 0?b:{},classes:t.classes.concat(S),innerHtml:E},behaviours:Kt([...(w=t.behaviours)!==null&&w!==void 0?w:[],yx()])}},mu=(t,r,c,h=O.none())=>FR(r,t,c(),h),wV=(t,r,c)=>{const h=c(),b=Je(t,w=>xo(h,Ob(w,h)));return FR(r,b.getOr(BR),h,O.none())},IR={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},fE=Fl({name:"Notification",factory:t=>{const r=As({dom:nh(`<p>${aE(t.translationProvider(t.text))}</p>`),behaviours:Kt([po.config({})])}),c=Y=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${Y}%`}}}),h=Y=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${Y}%`}}),b=As({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(0)]},h(0)],behaviours:Kt([po.config({})])}),E={updateProgress:(Y,oe)=>{Y.getSystem().isConnected()&&b.getOpt(Y).each(Ce=>{po.set(Ce,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(oe)]},h(oe)])})},updateText:(Y,oe)=>{if(Y.getSystem().isConnected()){const Ce=r.get(Y);po.set(Ce,[Lr(oe)])}}},D=tt([t.icon.toArray(),t.level.toArray(),t.level.bind(Y=>O.from(IR[Y])).toArray()]),P=As(Ri.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[mu("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:Y=>{t.onAction(Y)}})),B=wV(D,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),H={dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:Kt([po.config({})])},j=[B,H];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(Y=>["tox-notification","tox-notification--in",`tox-notification--${Y}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Kt([Xn.config({}),So("notification-events",[_t(Bf(),Y=>{P.getOpt(Y).each(Xn.focus)})])]),components:j.concat(t.progress?[b.asSpec()]:[]).concat(t.closeButton?[P.asSpec()]:[]),apis:E}},configFields:[Ds("level"),Pt("progress"),Ds("icon"),Pt("onAction"),Pt("text"),Pt("iconProvider"),Pt("translationProvider"),Hi("closeButton",!0)],apis:{updateProgress:(t,r,c)=>{t.updateProgress(r,c)},updateText:(t,r,c)=>{t.updateText(r,c)}}});var hE=(t,r,c)=>{const h=r.backstage.shared,b=()=>{const D=Ar(Tt.fromDom(t.getContentAreaContainer())),P=qi(),B=uc(P.x,D.x,D.right),H=uc(P.y,D.y,D.bottom),j=Math.max(D.right,P.right),Y=Math.max(D.bottom,P.bottom);return O.some(Xr(B,H,j-B,Y-H))};return{open:(D,P)=>{const B=()=>{P(),vr.hide(j)},H=wa(fE.sketch({text:D.text,level:We(["success","error","warning","warn","info"],D.type)?D.type:void 0,progress:D.progressBar===!0,icon:D.icon,closeButton:D.closeButton,onAction:B,iconProvider:h.providers.icons,translationProvider:h.providers.translate})),j=wa(vr.sketch(ie({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:h.getSink,fireDismissalEventInstead:{}},h.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));c.add(j),G(D.timeout)&&D.timeout>0&&ug.setEditorTimeout(t,()=>{B()},D.timeout);const oe={close:B,reposition:()=>{const Ce=Rc(H),Qe={maxHeightFunction:Ep()},Le=t.notificationManager.getNotifications();if(Le[0]===oe){const _e=Ot(ie({},h.anchors.banner()),{overrides:Qe});vr.showWithinBounds(j,Ce,{anchor:_e},b)}else Pe(Le,oe).each(_e=>{const Xe=Le[_e-1].getEl(),Ft={type:"node",root:fr(),node:O.some(Tt.fromDom(Xe)),overrides:Qe,layouts:{onRtl:()=>[Di],onLtr:()=>[Di]}};vr.showWithinBounds(j,Ce,{anchor:Ft},b)})},text:Ce=>{fE.updateText(H,Ce)},settings:D,getEl:()=>H.element.dom,progressBar:{value:Ce=>{fE.updateProgress(H,Ce)}}};return oe},close:D=>{D.close()},getArgs:D=>D.settings}},hg=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),LR=tinymce.util.Tools.resolve("tinymce.EditorManager"),Gp=tinymce.util.Tools.resolve("tinymce.Env"),$l;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})($l||($l={}));var Db;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Db||(Db={}));const $s=t=>r=>r.options.get(t),_b=t=>r=>O.from(t(r)),$R=t=>{const r=Gp.deviceType.isPhone(),c=Gp.deviceType.isTablet()||r,h=t.options.register,b=S=>v(S)||S===!1,w=S=>v(S)||G(S);h("skin",{processor:S=>v(S)||S===!1,default:"oxide"}),h("skin_url",{processor:"string"}),h("height",{processor:w,default:Math.max(t.getElement().offsetHeight,400)}),h("width",{processor:w,default:hg.DOM.getStyle(t.getElement(),"width")}),h("min_height",{processor:"number",default:100}),h("min_width",{processor:"number"}),h("max_height",{processor:"number"}),h("max_width",{processor:"number"}),h("style_formats",{processor:"object[]"}),h("style_formats_merge",{processor:"boolean",default:!1}),h("style_formats_autohide",{processor:"boolean",default:!1}),h("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),h("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),h("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),h("font_size_input_default_unit",{processor:"string",default:"pt"}),h("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),h("content_langs",{processor:"object[]"}),h("removed_menuitems",{processor:"string",default:""}),h("menubar",{processor:S=>v(S)||N(S),default:!r}),h("menu",{processor:"object",default:{}}),h("toolbar",{processor:S=>N(S)||v(S)||T(S)?{value:S,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Be(9,S=>{h("toolbar"+(S+1),{processor:"string"})}),h("toolbar_mode",{processor:"string",default:c?"scrolling":"floating"}),h("toolbar_groups",{processor:"object",default:{}}),h("toolbar_location",{processor:"string",default:Db.auto}),h("toolbar_persist",{processor:"boolean",default:!1}),h("toolbar_sticky",{processor:"boolean",default:t.inline}),h("toolbar_sticky_offset",{processor:"number",default:0}),h("fixed_toolbar_container",{processor:"string",default:""}),h("fixed_toolbar_container_target",{processor:"object"}),h("ui_mode",{processor:"string",default:"combined"}),h("file_picker_callback",{processor:"function"}),h("file_picker_validator_handler",{processor:"function"}),h("file_picker_types",{processor:"string"}),h("typeahead_urls",{processor:"boolean",default:!0}),h("anchor_top",{processor:b,default:"#top"}),h("anchor_bottom",{processor:b,default:"#bottom"}),h("draggable_modal",{processor:"boolean",default:!1}),h("statusbar",{processor:"boolean",default:!0}),h("elementpath",{processor:"boolean",default:!0}),h("branding",{processor:"boolean",default:!0}),h("promotion",{processor:"boolean",default:!0}),h("resize",{processor:S=>S==="both"||N(S),default:!Gp.deviceType.isTouch()}),h("sidebar_show",{processor:"string"}),h("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),h("default_font_stack",{processor:"string[]",default:[]})},HR=$s("readonly"),wx=$s("height"),Mb=$s("width"),mE=_b($s("min_width")),Kp=_b($s("min_height")),xx=_b($s("max_width")),gE=_b($s("max_height")),VR=_b($s("style_formats")),zR=$s("style_formats_merge"),UR=$s("style_formats_autohide"),WR=$s("content_langs"),pE=$s("removed_menuitems"),Yp=$s("toolbar_mode"),jR=$s("toolbar_groups"),Rb=$s("toolbar_location"),mg=$s("fixed_toolbar_container"),xV=$s("fixed_toolbar_container_target"),ZR=$s("toolbar_persist"),Sx=$s("toolbar_sticky_offset"),bE=$s("menubar"),Cx=$s("toolbar"),qR=$s("file_picker_callback"),vE=$s("file_picker_validator_handler"),GR=$s("font_size_input_default_unit"),yE=$s("file_picker_types"),wE=$s("typeahead_urls"),kx=$s("anchor_top"),KR=$s("anchor_bottom"),xE=$s("draggable_modal"),YR=$s("statusbar"),Xp=$s("elementpath"),SE=$s("branding"),XR=$s("resize"),Ax=$s("paste_as_text"),Ex=$s("sidebar_show"),JR=$s("promotion"),Tx=$s("help_accessibility"),QR=$s("default_font_stack"),CE=t=>t.options.get("skin")===!1,Jp=t=>t.options.get("menubar")!==!1,Ox=t=>{const r=t.options.get("skin_url");if(CE(t))return r;if(r)return t.documentBaseURI.toAbsolute(r);{const c=t.options.get("skin");return LR.baseURL+"/skins/ui/"+c}},Dx=t=>O.from(t.options.get("skin_url")),eP=t=>t.options.get("line_height_formats").split(" "),_x=t=>{const r=Cx(t),c=v(r),h=T(r)&&r.length>0;return!Pb(t)&&(h||c||r===!0)},kE=t=>{const r=Be(9,h=>t.options.get("toolbar"+(h+1))),c=cn(r,v);return Bn(c.length>0,c)},Pb=t=>kE(t).fold(()=>{const r=Cx(t);return le(r,v)&&r.length>0},ge),AE=t=>Rb(t)===Db.bottom,tP=t=>{var r;if(!t.inline)return O.none();const c=(r=mg(t))!==null&&r!==void 0?r:"";if(c.length>0)return Zr(fr(),c);const h=xV(t);return X(h)?O.some(Tt.fromDom(h)):O.none()},Qp=t=>t.inline&&tP(t).isSome(),EE=t=>tP(t).getOrThunk(()=>Ut(Ct(Tt.fromDom(t.getElement())))),TE=t=>t.inline&&!Jp(t)&&!_x(t)&&!Pb(t),Nb=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Qp(t)&&!TE(t),qd=t=>!Qp(t)&&t.options.get("ui_mode")==="split",nP=t=>{const r=t.options.get("menu");return pt(r,c=>Ot(ie({},c),{items:c.items}))};var SV=Object.freeze({__proto__:null,get ToolbarMode(){return $l},get ToolbarLocation(){return Db},register:$R,getSkinUrl:Ox,getSkinUrlOption:Dx,isReadOnly:HR,isSkinDisabled:CE,getHeightOption:wx,getWidthOption:Mb,getMinWidthOption:mE,getMinHeightOption:Kp,getMaxWidthOption:xx,getMaxHeightOption:gE,getUserStyleFormats:VR,shouldMergeStyleFormats:zR,shouldAutoHideStyleFormats:UR,getLineHeightFormats:eP,getContentLanguages:WR,getRemovedMenuItems:pE,isMenubarEnabled:Jp,isMultipleToolbars:Pb,isToolbarEnabled:_x,isToolbarPersist:ZR,getMultipleToolbarsOption:kE,getUiContainer:EE,useFixedContainer:Qp,isSplitUiMode:qd,getToolbarMode:Yp,isDraggableModal:xE,isDistractionFree:TE,isStickyToolbar:Nb,getStickyToolbarOffset:Sx,getToolbarLocation:Rb,isToolbarLocationBottom:AE,getToolbarGroups:jR,getMenus:nP,getMenubar:bE,getToolbar:Cx,getFilePickerCallback:qR,getFilePickerTypes:yE,useTypeaheadUrls:wE,getAnchorTop:kx,getAnchorBottom:KR,getFilePickerValidatorHandler:vE,getFontSizeInputDefaultUnit:GR,useStatusBar:YR,useElementPath:Xp,promotionEnabled:JR,useBranding:SE,getResize:XR,getPasteAsText:Ax,getSidebarShow:Ex,useHelpAccessibility:Tx,getDefaultFontStack:QR});const oP="[data-mce-autocompleter]",OE=t=>Qu(t,oP),CV=t=>Zr(t,oP),kV={setup:(t,r)=>{const c=(b,w)=>{Hn(b,Gu(),{raw:w})},h=()=>t.getMenu().bind(gs.getHighlighted);r.on("keydown",b=>{const w=b.which;t.isActive()&&(t.isMenuOpen()?w===13?(h().each(Ff),b.preventDefault()):w===40?(h().fold(()=>{t.getMenu().each(gs.highlightFirst)},S=>{c(S,b)}),b.preventDefault(),b.stopImmediatePropagation()):(w===37||w===38||w===39)&&h().each(S=>{c(S,b),b.preventDefault(),b.stopImmediatePropagation()}):(w===13||w===38||w===40)&&t.cancelIfNecessary())}),r.on("NodeChange",b=>{t.isActive()&&!t.isProcessingAction()&&OE(Tt.fromDom(b.element)).isNone()&&t.cancelIfNecessary()})}};var DE;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(DE||(DE={}));var ad=DE;const _E="tox-menu-nav__js",e1="tox-collection__item",ME="tox-swatch",AV={normal:_E,color:ME},sP="tox-collection__item--enabled",EV="tox-collection__group-heading",rP="tox-collection__item-icon",RE="tox-collection__item-label",TV="tox-collection__item-accessory",iP="tox-collection__item-caret",OV="tox-collection__item-checkmark",Bb="tox-collection__item--active",aP="tox-collection__item-container",DV="tox-collection__item-container--column",lP="tox-collection__item-container--row",Mx="tox-collection__item-container--align-right",_V="tox-collection__item-container--align-left",PE="tox-collection__item-container--valign-top",MV="tox-collection__item-container--valign-middle",RV="tox-collection__item-container--valign-bottom",cP=t=>$t(AV,t).getOr(_E),uP=t=>t==="color"?"tox-swatches":"tox-menu",NE=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:uP(t),tieredMenu:"tox-tiered-menu"}),sh=t=>{const r=NE(t);return{backgroundMenu:r.backgroundMenu,selectedMenu:r.selectedMenu,menu:r.menu,selectedItem:r.selectedItem,item:cP(t)}},BE=(t,r,c)=>{const h=NE(c);return{tag:"div",classes:tt([[h.menu,`tox-menu-${r}-column`],t?[h.hasIcons]:[]])}},dP=[cg.parts.items({})],t1=(t,r,c)=>{const h=NE(c);return{dom:{tag:"div",classes:tt([[h.tieredMenu]])},markers:sh(c)}},Fb=K([Ds("data"),et("inputAttributes",{}),et("inputStyles",{}),et("tag","input"),et("inputClasses",[]),os("onSetValue"),et("styles",{}),et("eventOrder",{}),yi("inputBehaviours",[ln,Xn]),et("selectOnFocus",!0)]),FE=t=>Kt([Xn.config({onFocus:t.selectOnFocus?r=>{const c=r.element,h=Id(c);c.dom.setSelectionRange(0,h.length)}:Z})]),Gd=t=>ie(ie({},FE(t)),Mi(t.inputBehaviours,[ln.config({store:Ot(ie({mode:"manual"},t.data.map(r=>({initialValue:r})).getOr({})),{getValue:r=>Id(r.element),setValue:(r,c)=>{Id(r.element)!==c&&yp(r.element,c)}}),onSetValue:t.onSetValue})])),Rx=t=>({tag:t.tag,attributes:ie({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}),PV=(t,r)=>({uid:t.uid,dom:Rx(t),components:[],behaviours:Gd(t),eventOrder:t.eventOrder}),gg=Fl({name:"Input",configFields:Fb(),factory:PV}),fP=pn("refetch-trigger-event"),hP=pn("redirect-menu-item-interaction"),n1="tox-menu__searcher",Px=t=>Zr(t.element,`.${n1}`).bind(r=>t.getSystem().getByDom(r).toOptional()),IE=Px,LE=(t,r)=>{ln.setValue(t,r.fetchPattern),t.element.dom.selectionStart=r.selectionStart,t.element.dom.selectionEnd=r.selectionEnd},mP=t=>{const r=ln.getValue(t),c=t.element.dom.selectionStart,h=t.element.dom.selectionEnd;return{fetchPattern:r,selectionStart:c,selectionEnd:h}},$E=(t,r)=>{z(r.element,"id").each(c=>sn(t.element,"aria-activedescendant",c))},HE=t=>{const r=(b,w)=>(w.cut(),O.none()),c=(b,w)=>{const S={interactionEvent:w.event,eventType:w.event.raw.type};return Hn(b,hP,S),O.some(!0)},h="searcher-events";return{dom:{tag:"div",classes:[e1]},components:[gg.sketch({inputClasses:[n1,"tox-textfield"],inputAttributes:Ot(ie({},t.placeholder.map(b=>({placeholder:t.i18n(b)})).getOr({})),{type:"search","aria-autocomplete":"list"}),inputBehaviours:Kt([So(h,[_t(Vm(),b=>{ns(b,fP)}),_t(Gu(),(b,w)=>{w.event.raw.key==="Escape"&&w.stop()})]),Fn.config({mode:"special",onLeft:r,onRight:r,onSpace:r,onEnter:c,onEscape:c,onUp:c,onDown:c})]),eventOrder:{keydown:[h,Fn.name()]}})]}},Nx="tox-collection--results__js",VE=t=>{var r;return t.dom?Ot(ie({},t),{dom:Ot(ie({},t.dom),{attributes:Ot(ie({},(r=t.dom.attributes)!==null&&r!==void 0?r:{}),{id:pn("aria-item-search-result-id"),"aria-selected":"false"})})}):t},Bx=(t,r)=>c=>{const h=wt(c,r);return ce(h,b=>({dom:t,components:b}))},NV=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[cg.parts.items({preprocess:t!=="auto"?Bx({tag:"div",classes:["tox-swatches__row"]},t):Ie})]}]}),BV=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[cg.parts.items({preprocess:Bx({tag:"div",classes:["tox-collection__group"]},t)})]}),gP=(t,r)=>{const c=[];let h=[];return Ze(t,(b,w)=>{r(b,w)?(h.length>0&&c.push(h),h=[],(xo(b.dom,"innerHtml")||b.components&&b.components.length>0)&&h.push(b)):h.push(b)}),h.length>0&&c.push(h),ce(c,b=>({dom:{tag:"div",classes:["tox-collection__group"]},components:b}))},zE=(t,r,c)=>cg.parts.items({preprocess:h=>{const b=ce(h,c);return t!=="auto"&&t>1?Bx({tag:"div",classes:["tox-collection__group"]},t)(b):gP(b,(w,S)=>r[S].type==="separator")}}),pP=(t,r,c=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[zE(t,r,Ie)]}),FV=(t,r,c=!0)=>{const h=pn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Nx].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:h}},components:[zE(t,r,VE)]}},bP=(t,r,c)=>{const h=pn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[HE({i18n:bc.translate,placeholder:c.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],Nx],attributes:{id:h}},components:[zE(t,r,VE)]}]}},vP=(t,r=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[cg.parts.items({preprocess:c=>gP(c,(h,b)=>t[b].type==="separator")})]}),Fx=t=>yt(t,r=>"icon"in r&&r.icon!==void 0),Kd=t=>O.none(),Ib=(t,r,c,h,b)=>{const w=vP(c);return{value:t,dom:w.dom,components:w.components,items:c}},Ix=(t,r,c,h,b)=>{const w=()=>b.menuType!=="searchable"?pP(h,c):b.searchMode.searchMode==="search-with-field"?bP(h,c,b.searchMode):FV(h,c);if(b.menuType==="color"){const S=NV(h);return{value:t,dom:S.dom,components:S.components,items:c}}else if(b.menuType==="normal"&&h==="auto"){const S=pP(h,c);return{value:t,dom:S.dom,components:S.components,items:c}}else if(b.menuType==="normal"||b.menuType==="searchable"){const S=w();return{value:t,dom:S.dom,components:S.components,items:c}}else if(b.menuType==="listpreview"&&h!=="auto"){const S=BV(h);return{value:t,dom:S.dom,components:S.components,items:c}}else return{value:t,dom:BE(r,h,b.menuType),components:dP,items:c}},qr=ws("type"),UE=ws("name"),Lx=ws("label"),rh=ws("text"),yP=ws("title"),WE=ws("icon"),o1=ws("value"),wP=ju("fetch"),xP=ju("getSubmenuItems"),s1=ju("onAction"),IV=ju("onItemAction"),Uh=Vi("onSetup",()=>Z),jE=Na("name"),Yd=Na("text"),vc=Na("icon"),Lb=Na("tooltip"),$x=Na("label"),LV=Na("shortcut"),ZE=Bm("select"),Hx=Hi("active",!1),SP=Hi("borderless",!1),Nc=Hi("enabled",!0),Xd=Hi("primary",!1),CP=t=>et("columns",t),$b=et("meta",{}),r1=Vi("onAction",Z),pg=t=>Rf("type",t),Vx=t=>ia("name","name",Ql(()=>pn(`${t}-name`)),Yi),kP=t=>ia("value","value",Ql(()=>pn(`${t}-value`)),Ki()),qE=Ln([qr,Yd]),GE=t=>Tr("separatormenuitem",qE,t),AP=Ln([pg("autocompleteitem"),Hx,Nc,$b,o1,Yd,vc]),$V=t=>Tr("Autocompleter.Separator",qE,t),EP=t=>Tr("Autocompleter.Item",AP,t),i1=[Nc,Lb,vc,Yd,Uh],TP=Ln([qr,s1].concat(i1)),KE=t=>Tr("toolbarbutton",TP,t),YE=[Hx].concat(i1),OP=Ln(YE.concat([qr,s1])),DP=t=>Tr("ToggleButton",OP,t),_P=[Vi("predicate",ne),sc("scope","node",["node","editor"]),sc("position","selection",["node","selection","line"])],HV=i1.concat([pg("contextformbutton"),Xd,s1,Qr("original",Ie)]),VV=YE.concat([pg("contextformbutton"),Xd,s1,Qr("original",Ie)]),MP=i1.concat([pg("contextformbutton")]),Hb=YE.concat([pg("contextformtogglebutton")]),RP=ms("type",{contextformbutton:HV,contextformtogglebutton:VV}),zV=Ln([pg("contextform"),Vi("initValue",K("")),$x,nc("commands",RP),Nd("launch",ms("type",{contextformbutton:MP,contextformtogglebutton:Hb}))].concat(_P)),UV=t=>Tr("ContextForm",zV,t),WV=Ln([pg("contexttoolbar"),ws("items")].concat(_P)),jV=t=>Tr("ContextToolbar",WV,t),ZV=[qr,ws("src"),Na("alt"),qu("classes",[],Yi)],zx=Ln(ZV),qV=[qr,rh,jE,qu("classes",["tox-collection__item-label"],Yi)],PP=Ln(qV),NP=ya(()=>Vt("type",{cardimage:zx,cardtext:PP,cardcontainer:BP})),BP=Ln([qr,Rf("direction","horizontal"),Rf("align","left"),Rf("valign","middle"),nc("items",NP)]),bg=[Nc,Yd,LV,kP("menuitem"),$b],GV=Ln([qr,$x,nc("items",NP),Uh,r1].concat(bg)),FP=t=>Tr("cardmenuitem",GV,t),IP=Ln([qr,Hx,vc].concat(bg)),LP=t=>Tr("choicemenuitem",IP,t),XE=[qr,ws("fancytype"),r1],KV=[et("initData",{})].concat(XE),YV=[Bm("select"),Bd("initData",{},[Hi("allowCustomColors",!0),Rf("storageKey","default"),Fm("colors",Ki())])].concat(XE),XV=ms("fancytype",{inserttable:KV,colorswatch:YV}),JV=t=>Tr("fancymenuitem",XV,t),$P=Ln([qr,Uh,r1,vc].concat(bg)),HP=t=>Tr("menuitem",$P,t),QV=Ln([qr,xP,Uh,vc].concat(bg)),ez=t=>Tr("nestedmenuitem",QV,t),tz=Ln([qr,vc,Hx,Uh,s1].concat(bg)),nz=t=>Tr("togglemenuitem",tz,t),JE=(t,r,c)=>{const h=_i(t.element,"."+c);if(h.length>0){const b=Bt(h,w=>{const S=w.dom.getBoundingClientRect().top,E=h[0].dom.getBoundingClientRect().top;return Math.abs(S-E)>r}).getOr(h.length);return O.some({numColumns:b,numRows:Math.ceil(h.length/b)})}else return O.none()},QE=(t,r)=>Kt([So(t,r)]),Vb={namedEvents:QE,unnamedEvents:t=>QE(pn("unnamed-events"),t)},Ux=pn("tooltip.exclusive"),a1=pn("tooltip.show"),zb=pn("tooltip.hide"),VP=(t,r,c)=>{t.getSystem().broadcastOn([Ux],{})};var sz=Object.freeze({__proto__:null,hideAllExclusive:VP,setComponents:(t,r,c,h)=>{c.getTooltip().each(b=>{b.getSystem().isConnected()&&po.set(b,h)})}}),zP=Object.freeze({__proto__:null,events:(t,r)=>{const c=b=>{r.getTooltip().each(w=>{qf(w),t.onHide(b,w),r.clearTooltip()}),r.clearTimer()},h=b=>{if(!r.isShowing()){VP(b);const w=t.lazySink(b).getOrDie(),S=b.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:ar(t.mode==="normal"?[_t(Nf(),E=>{ns(b,a1)}),_t(E0(),E=>{ns(b,zb)})]:[]),behaviours:Kt([po.config({})])});r.setTooltip(S),Ih(w,S),t.onShow(b,S),Sa.position(w,S,{anchor:t.anchor(b)})}};return ar(tt([[_t(a1,b=>{r.resetTimer(()=>{h(b)},t.delay)}),_t(zb,b=>{r.resetTimer(()=>{c(b)},t.delay)}),_t(zm(),(b,w)=>{const S=w;S.universal||We(S.channels,Ux)&&c(b)}),Fd(b=>{c(b)})],t.mode==="normal"?[_t(Bf(),b=>{ns(b,a1)}),_t(z2(),b=>{ns(b,zb)}),_t(Nf(),b=>{ns(b,a1)}),_t(E0(),b=>{ns(b,zb)})]:[_t(M0(),(b,w)=>{ns(b,a1)}),_t(R0(),b=>{ns(b,zb)})]]))}}),UP=[Pt("lazySink"),Pt("tooltipDom"),et("exclusive",!0),et("tooltipComponents",[]),et("delay",300),sc("mode","normal",["normal","follow-highlight"]),et("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:K([Di,Fa,ca,Xa,ua,xa]),onRtl:K([Di,Fa,ca,Xa,ua,xa])}})),os("onHide"),os("onShow")],iz=Object.freeze({__proto__:null,init:()=>{const t=sr(),r=sr(),c=()=>{t.on(clearTimeout)},h=(w,S)=>{c(),t.set(setTimeout(w,S))},b=K("not-implemented");return lc({getTooltip:r.get,isShowing:r.isSet,setTooltip:r.set,clearTooltip:r.clear,clearTimer:c,resetTimer:h,readState:b})}});const WP=Ji({fields:UP,name:"tooltipping",active:zP,state:iz,apis:sz}),az=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),jP="silver.readonly",eT=Ln([V6("readonly")]),Wx=(t,r)=>{const h=t.mainUi.outerContainer.element,b=[t.mainUi.mothership,...t.uiMotherships];r&&Ze(b,w=>{w.broadcastOn([zd()],{target:h})}),Ze(b,w=>{w.broadcastOn([jP],{readonly:r})})},ZP=(t,r)=>{t.on("init",()=>{t.mode.isReadOnly()&&Wx(r,!0)}),t.on("SwitchMode",()=>Wx(r,t.mode.isReadOnly())),HR(t)&&t.mode.set("readonly")},ii=()=>Pl.config({channels:{[jP]:{schema:eT,onReceive:(t,r)=>{qn.set(t,r.readonly)}}}}),ni={item:t=>qn.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>qn.config({disabled:t}),splitButton:t=>qn.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>qn.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},yc=(t,r)=>{const c=t.getApi(r);return h=>{h(c)}},Wh=(t,r)=>nr(c=>{yc(t,c)(b=>{const w=t.onSetup(b);J(w)&&r.set(w)})}),Jd=(t,r)=>Fd(c=>yc(t,c)(r.get())),tT=(t,r)=>$f((c,h)=>{yc(t,c)(t.onAction),!t.triggersSubmenu&&r===ad.CLOSE_ON_EXECUTE&&(c.getSystem().isConnected()&&ns(c,T0()),h.stop())}),cz={[ac()]:["disabling","alloy.base.behaviour","toggling","item-events"]},l1=pr,Qd=(t,r,c,h)=>{const b=Zn(Z);return{type:"item",dom:r.dom,components:l1(r.optComponents),data:t.data,eventOrder:cz,hasSubmenu:t.triggersSubmenu,itemBehaviours:Kt([So("item-events",[tT(t,c),Wh(t,b),Jd(t,b)]),ni.item(()=>!t.enabled||h.isDisabled()),ii(),po.config({})].concat(t.itemBehaviours))}},ih=t=>({value:t.value,meta:ie({text:t.text.getOr("")},t.meta)}),jx=t=>{const r=Gp.os.isMacOS()||Gp.os.isiOS(),b=r?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},w=t.split("+"),S=ce(w,E=>{const D=E.toLowerCase().trim();return xo(b,D)?b[D]:E});return r?S.join(""):S.join("+")},nT=(t,r,c=[rP])=>mu(t,{tag:"div",classes:c},r),gu=t=>({dom:{tag:"div",classes:[RE]},components:[Lr(bc.translate(t))]}),qP=(t,r)=>({dom:{tag:"div",classes:r,innerHtml:t}}),uz=(t,r)=>({dom:{tag:"div",classes:[RE]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Lr(bc.translate(r))]}]}),Bc=t=>({dom:{tag:"div",classes:[TV]},components:[Lr(jx(t))]}),c1=t=>nT("checkmark",t,[OV]),pu=t=>nT("chevron-right",t,[iP]),dz=t=>nT("chevron-down",t,[iP]),Rs=(t,r)=>{const c=t.direction==="vertical"?DV:lP,h=t.align==="left"?_V:Mx;return{dom:{tag:"div",classes:[aP,c,h,(()=>{switch(t.valign){case"top":return PE;case"middle":return MV;case"bottom":return RV}})()]},components:r}},u1=(t,r,c)=>({dom:{tag:"img",classes:r,attributes:{src:t,alt:c.getOr("")}}}),Zx=(t,r,c)=>{const h="custom",b="remove",w=t.ariaLabel,S=t.value,E=t.iconContent.map(P=>dE(P,r.icons,c));return{dom:(()=>{const P=ME,B=E.getOr(""),j={tag:"div",attributes:w.map(Y=>({title:r.translate(Y)})).getOr({}),classes:[P]};return S===h?Ot(ie({},j),{tag:"button",classes:[...j.classes,"tox-swatches__picker-btn"],innerHtml:B}):S===b?Ot(ie({},j),{classes:[...j.classes,"tox-swatch--remove"],innerHtml:B}):X(S)?Ot(ie({},j),{attributes:Ot(ie({},j.attributes),{"data-mce-color":S}),styles:{"background-color":S},innerHtml:B}):j})(),optComponents:[]}},oT=t=>{const r=t.map(c=>({attributes:{title:bc.translate(c),id:pn("menu-item")}})).getOr({});return ie({tag:"div",classes:[_E,e1]},r)},sT=(t,r,c,h)=>{const b={tag:"div",classes:[rP]},w=j=>mu(j,b,r.icons,h),S=()=>O.some({dom:b}),E=c?t.iconContent.map(w).orThunk(S):O.none(),D=t.checkMark,P=O.from(t.meta).fold(()=>gu,j=>xo(j,"style")?Ue(uz,j.style):gu),B=t.htmlContent.fold(()=>t.textContent.map(P),j=>O.some(qP(j,[RE])));return{dom:oT(t.ariaLabel),optComponents:[E,B,t.shortcutContent.map(Bc),D,t.caret]}},vg=(t,r,c,h=O.none())=>t.presets==="color"?Zx(t,r,h):sT(t,r,c,h),GP=(t,r)=>$t(t,"tooltipWorker").map(c=>[WP.config({lazySink:r.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:h=>({type:"submenu",item:h,overrides:{maxHeightFunction:Ep}}),mode:"follow-highlight",onShow:(h,b)=>{c(w=>{WP.setComponents(h,[UM({element:Tt.fromDom(w)})])})}})]).getOr([]),rT=t=>hg.DOM.encode(t),KP=(t,r)=>{const c=bc.translate(t),h=rT(c);if(r.length>0){const b=new RegExp(az(r),"gi");return h.replace(b,w=>`<span class="tox-autocompleter-highlight">${w}</span>`)}else return h},YP=(t,r,c,h,b,w,S,E=!0)=>{const D=vg({presets:h,textContent:O.none(),htmlContent:c?t.text.map(P=>KP(P,r)):O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:O.none(),checkMark:O.none(),caret:O.none(),value:t.value},S.providers,E,t.icon);return Qd({data:ih(t),enabled:t.enabled,getApi:K({}),onAction:P=>b(t.value,t.meta),onSetup:K(Z),triggersSubmenu:!1,itemBehaviours:GP(t.meta,S)},D,w,S.providers)},iT=(t,r)=>ce(t,c=>{switch(c.type){case"cardcontainer":return Rs(c,iT(c.items,r));case"cardimage":return u1(c.src,c.classes,c.alt);case"cardtext":const b=c.name.exists(w=>We(r.cardText.highlightOn,w))?O.from(r.cardText.matchText).getOr(""):"";return qP(KP(c.text,b),c.classes)}}),aT=(t,r,c,h)=>{const b=S=>({isEnabled:()=>!qn.isDisabled(S),setEnabled:E=>{qn.set(S,!E),Ze(_i(S.element,"*"),D=>{S.getSystem().getByDom(D).each(P=>{P.hasConfigured(qn)&&qn.set(P,!E)})})}}),w={dom:oT(t.label),optComponents:[O.some({dom:{tag:"div",classes:[aP,lP]},components:iT(t.items,h)})]};return Qd({data:ih(ie({text:O.none()},t)),enabled:t.enabled,getApi:b,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:O.from(h.itemBehaviours).getOr([])},w,r,c.providers)},XP=(t,r,c,h,b,w,S,E=!0)=>{const D=B=>({setActive:H=>{No.set(B,H)},isActive:()=>No.isOn(B),isEnabled:()=>!qn.isDisabled(B),setEnabled:H=>qn.set(B,!H)}),P=vg({presets:c,textContent:r?t.text:O.none(),htmlContent:O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:r?t.shortcut:O.none(),checkMark:r?O.some(c1(S.icons)):O.none(),caret:O.none(),value:t.value},S,E);return Ls(Qd({data:ih(t),enabled:t.enabled,getApi:D,onAction:B=>h(t.value),onSetup:B=>(B.setActive(b),Z),triggersSubmenu:!1,itemBehaviours:[]},P,w,S),{toggling:{toggleClass:sP,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},Ub=Yf(yb(),wb()),JP=t=>({value:nN(t)}),QP=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,eN=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,tN=t=>QP.test(t)||eN.test(t),nN=t=>tn(t,"#").toUpperCase(),oN=t=>tN(t)?O.some({value:nN(t)}):O.none(),fz=t=>({value:t.value.replace(QP,(c,h,b,w)=>h+h+b+b+w+w)}),hz=t=>{const r=fz(t),c=eN.exec(r.value);return c===null?["FFFFFF","FF","FF","FF"]:c},qx=t=>{const r=t.toString(16);return(r.length===1?"0"+r:r).toUpperCase()},d1=t=>{const r=qx(t.red)+qx(t.green)+qx(t.blue);return JP(r)},sN=Math.min,rN=Math.max,Wb=Math.round,iN=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,aN=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,jh=(t,r,c,h)=>({red:t,green:r,blue:c,alpha:h}),lT=t=>{const r=parseInt(t,10);return r.toString()===t&&r>=0&&r<=255},lN=t=>{let r,c,h;const b=(t.hue||0)%360;let w=t.saturation/100,S=t.value/100;if(w=rN(0,sN(w,1)),S=rN(0,sN(S,1)),w===0)return r=c=h=Wb(255*S),jh(r,c,h,1);const E=b/60,D=S*w,P=D*(1-Math.abs(E%2-1)),B=S-D;switch(Math.floor(E)){case 0:r=D,c=P,h=0;break;case 1:r=P,c=D,h=0;break;case 2:r=0,c=D,h=P;break;case 3:r=0,c=P,h=D;break;case 4:r=P,c=0,h=D;break;case 5:r=D,c=0,h=P;break;default:r=c=h=0}return r=Wb(255*(r+B)),c=Wb(255*(c+B)),h=Wb(255*(h+B)),jh(r,c,h,1)},jb=t=>{const r=hz(t),c=parseInt(r[1],16),h=parseInt(r[2],16),b=parseInt(r[3],16);return jh(c,h,b,1)},cN=(t,r,c,h)=>{const b=parseInt(t,10),w=parseInt(r,10),S=parseInt(c,10),E=parseFloat(h);return jh(b,w,S,E)},cT=t=>{if(t==="transparent")return O.some(jh(0,0,0,0));const r=iN.exec(t);if(r!==null)return O.some(cN(r[1],r[2],r[3],"1"));const c=aN.exec(t);return c!==null?O.some(cN(c[1],c[2],c[3],c[4])):O.none()},uT=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,Fc=jh(255,0,0,1),mz=t=>{t.dispatch("SkinLoaded")},dT=(t,r)=>{t.dispatch("SkinLoadError",r)},uN=t=>{t.dispatch("ResizeEditor")},Gx=(t,r)=>{t.dispatch("ResizeContent",r)},gz=(t,r)=>{t.dispatch("ScrollContent",r)},fT=(t,r)=>{t.dispatch("TextColorChange",r)},dN=(t,r)=>{t.dispatch("AfterProgressState",{state:r})},fN=(t,r)=>t.dispatch("ResolveName",{name:r.nodeName.toLowerCase(),target:r}),pz=(t,r)=>{t.dispatch("ToggleToolbarDrawer",{state:r})},bz=(t,r)=>{t.dispatch("StylesTextUpdate",r)},vz=(t,r)=>{t.dispatch("AlignTextUpdate",r)},yz=(t,r)=>{t.dispatch("FontSizeTextUpdate",r)},wz=(t,r)=>{t.dispatch("FontSizeInputTextUpdate",r)},hN=(t,r)=>{t.dispatch("BlocksTextUpdate",r)},mN=(t,r)=>{t.dispatch("FontFamilyTextUpdate",r)},Zb=(t,r)=>()=>{t(),r()},Va=t=>bu(t,"NodeChange",r=>{r.setEnabled(t.selection.isEditable())}),xz=(t,r)=>c=>{const h=kp(),b=()=>{c.setActive(t.formatter.match(r));const w=t.formatter.formatChanged(r,c.setActive);h.set(w)};return t.initialized?b():t.once("init",b),()=>{t.off("init",b),h.clear()}},Kx=(t,r)=>c=>{const h=Va(t)(c),b=xz(t,r)(c);return()=>{h(),b()}},bu=(t,r,c)=>h=>{const b=()=>c(h),w=()=>{c(h),t.on(r,b)};return t.initialized?w():t.once("init",w),()=>{t.off("init",w),t.off(r,b)}},gN=t=>r=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,r.format)})},pl=(t,r)=>()=>t.execCommand(r);var Zh=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const hT={},mT=(t,r=10)=>{const c=Zh.getItem(t),h=v(c)?JSON.parse(c):[],w=(P=>r-P.length<0?P.slice(0,r):P)(h),S=P=>{Pe(w,P).each(E),w.unshift(P),w.length>r&&w.pop(),Zh.setItem(t,JSON.stringify(w))},E=P=>{w.splice(P,1)};return{add:S,state:()=>w.slice(0)}},Yx=t=>$t(hT,t).getOrThunk(()=>{const r=`tinymce-custom-colors-${t}`,c=Zh.getItem(r);if(U(c)){const b=Zh.getItem("tinymce-custom-colors");Zh.setItem(r,X(b)?b:"[]")}const h=mT(r,10);return hT[t]=h,h}),gT=t=>ce(Yx(t).state(),r=>({type:"choiceitem",text:r,icon:"checkmark",value:r})),pT=(t,r)=>{Yx(t).add(r)},qb=(t,r,c)=>({hue:t,saturation:r,value:c}),Xx=t=>{let r=0,c=0,h=0;const b=t.red/255,w=t.green/255,S=t.blue/255,E=Math.min(b,Math.min(w,S)),D=Math.max(b,Math.max(w,S));if(E===D)return h=E,qb(0,0,h*100);const P=b===E?w-S:S===E?b-w:S-b;return r=b===E?3:S===E?1:5,r=60*(r-P/(D-E)),c=(D-E)/D,h=D,qb(Math.round(r),Math.round(c*100),Math.round(h*100))},Sz=t=>Xx(jb(t)),pN=t=>d1(lN(t)),Cz=t=>oN(t).orThunk(()=>cT(t).map(d1)).getOrThunk(()=>{const r=document.createElement("canvas");r.height=1,r.width=1;const c=r.getContext("2d");c.clearRect(0,0,r.width,r.height),c.fillStyle="#FFFFFF",c.fillStyle=t,c.fillRect(0,0,1,1);const h=c.getImageData(0,0,1,1).data,b=h[0],w=h[1],S=h[2],E=h[3];return d1(jh(b,w,S,E))}),Jx="forecolor",Qx="hilitecolor",bN=5,kz=t=>{const r=[];for(let c=0;c<t.length;c+=2)r.push({text:t[c+1],value:"#"+Cz(t[c]).value,icon:"checkmark",type:"choiceitem"});return r},ef=t=>r=>r.options.get(t),bT="#000000",Az=t=>{const r=t.options.register,c=b=>le(b,v)?{value:kz(b),valid:!0}:{valid:!1,message:"Must be an array of strings."},h=b=>G(b)&&b>0?{value:b,valid:!0}:{valid:!1,message:"Must be a positive number."};r("color_map",{processor:c,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),r("color_map_background",{processor:c}),r("color_map_foreground",{processor:c}),r("color_cols",{processor:h,default:vT(t)}),r("color_cols_foreground",{processor:h,default:vN(t,Jx)}),r("color_cols_background",{processor:h,default:vN(t,Qx)}),r("custom_colors",{processor:"boolean",default:!0}),r("color_default_foreground",{processor:"string",default:bT}),r("color_default_background",{processor:"string",default:bT})},eS=(t,r)=>r===Jx&&t.options.isSet("color_map_foreground")?ef("color_map_foreground")(t):r===Qx&&t.options.isSet("color_map_background")?ef("color_map_background")(t):ef("color_map")(t),vT=(t,r="default")=>Math.max(bN,Math.ceil(Math.sqrt(eS(t,r).length))),vN=(t,r)=>{const c=ef("color_cols")(t),h=vT(t,r);return c===vT(t)?h:c},yN=(t,r="default")=>Math.round(r===Jx?ef("color_cols_foreground")(t):r===Qx?ef("color_cols_background")(t):ef("color_cols")(t)),wN=ef("custom_colors"),Ez=ef("color_default_foreground"),Tz=ef("color_default_background"),xN="rgba(0, 0, 0, 0)",Oz=t=>cT(t).exists(r=>r.alpha!==0),Dz=t=>$m(t,r=>{if(Po(r)){const c=er(r,"background-color");return Bn(Oz(c),c)}else return O.none()}).getOr(xN),SN=(t,r)=>{const c=Tt.fromDom(t.selection.getStart()),h=r==="hilitecolor"?Dz(c):er(c,"color");return cT(h).map(b=>"#"+d1(b).value)},_z=(t,r,c)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(r,{value:c}),t.nodeChanged()})},Mz=(t,r)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(r,{value:null},void 0,!0),t.nodeChanged()})},tS=t=>{t.addCommand("mceApplyTextcolor",(r,c)=>{_z(t,r,c)}),t.addCommand("mceRemoveTextcolor",r=>{Mz(t,r)})},yT=t=>{const r="choiceitem",c={type:r,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[c,{type:r,text:"Custom color",icon:"color-picker",value:"custom"}]:[c]},wT=(t,r,c,h)=>{c==="custom"?EN(t)(w=>{w.each(S=>{pT(r,S),t.execCommand("mceApplyTextcolor",r,S),h(S)})},SN(t,r).getOr(bT)):c==="remove"?(h(""),t.execCommand("mceRemoveTextcolor",r)):(h(c),t.execCommand("mceApplyTextcolor",r,c))},xT=(t,r,c)=>t.concat(gT(r).concat(yT(c))),CN=(t,r,c)=>h=>{h(xT(t,r,c))},ST=(t,r,c)=>{const h=r==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(h,c)},kN=(t,r)=>{t.setTooltip(r)},AN=(t,r)=>c=>{const h=SN(t,r);return Sr(h,c.toUpperCase())},Gb=(t,r,c)=>{if(Ae(c))return r==="forecolor"?"Text color":"Background color";const h=r==="forecolor"?"Text color {0}":"Background color {0}",b=xT(eS(t,r),r,!1),w=Je(b,S=>S.value===c).getOr({text:""}).text;return t.translate([h,t.translate(w)])},CT=(t,r,c,h)=>{t.ui.registry.addSplitButton(r,{tooltip:Gb(t,c,h.get()),presets:"color",icon:r==="forecolor"?"text-color":"highlight-bg-color",select:AN(t,c),columns:yN(t,c),fetch:CN(eS(t,c),c,wN(t)),onAction:b=>{wT(t,c,h.get(),Z)},onItemAction:(b,w)=>{wT(t,c,w,S=>{h.set(S),fT(t,{name:r,color:S})})},onSetup:b=>{ST(b,r,h.get());const w=S=>{S.name===r&&(ST(b,S.name,S.color),kN(b,Gb(t,c,S.color)))};return t.on("TextColorChange",w),Zb(Va(t)(b),()=>{t.off("TextColorChange",w)})}})},kT=(t,r,c,h,b)=>{t.ui.registry.addNestedMenuItem(r,{text:h,icon:r==="forecolor"?"text-color":"highlight-bg-color",onSetup:w=>(kN(w,Gb(t,c,b.get())),ST(w,r,b.get()),Va(t)(w)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:AN(t,c),initData:{storageKey:c},onAction:w=>{wT(t,c,w.value,S=>{b.set(S),fT(t,{name:r,color:S})})}}]})},EN=t=>(r,c)=>{let h=!1;const b=E=>{const P=E.getData().colorpicker;h?(r(O.from(P)),E.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",P]))},w=(E,D)=>{D.name==="hex-valid"&&(h=D.value)},S={colorpicker:c};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:S,onAction:w,onSubmit:b,onClose:Z,onCancel:()=>{r(O.none())}})},TN=t=>{tS(t);const r=Ez(t),c=Tz(t),h=Zn(r),b=Zn(c);CT(t,"forecolor","forecolor",h),CT(t,"backcolor","hilitecolor",b),kT(t,"forecolor","forecolor","Text color",h),kT(t,"backcolor","hilitecolor","Background color",b)},AT=(t,r,c,h,b,w,S,E)=>{const D=Fx(r),B=Rz(r,c,h,b!=="color"?"normal":"color",w,S,E);return Ix(t,D,B,h,{menuType:b})},Rz=(t,r,c,h,b,w,S)=>pr(ce(t,E=>E.type==="choiceitem"?LP(E).fold(Kd,D=>O.some(XP(D,c===1,h,r,w(D.value),b,S,Fx(t)))):O.none())),nS=(t,r)=>{const c=sh(r);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+c.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(r==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:b=>r==="color"?Zr(b.element,"[aria-checked=true]"):O.none()}},Pz=(t,r)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:r==="color"?".tox-swatches__row":".tox-collection__group",cell:r==="color"?`.${ME}`:`.${e1}`}},Nz=(t,r)=>{const c=Bz(t,r),h=r.colorinput.getColorCols(t.initData.storageKey),b="color",w=AT(pn("menu-value"),c,E=>{t.onAction({value:E})},h,b,ad.CLOSE_ON_EXECUTE,t.select.getOr(ne),r.shared.providers),S=Ot(ie({},w),{markers:sh(b),movement:nS(h,b)});return{type:"widget",data:{value:pn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Ub.widget(cg.sketch(S))]}},Bz=(t,r)=>{const c=t.initData.allowCustomColors&&r.colorinput.hasCustomColors();return t.initData.colors.fold(()=>xT(r.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,c),h=>h.concat(yT(c)))},ON=pn("cell-over"),DN=pn("cell-execute"),Fz=t=>(r,c)=>t.shared.providers.translate(["{0} columns, {1} rows",c,r]),Iz=(t,r,c)=>{const h=S=>Hn(S,ON,{row:t,col:r}),b=S=>Hn(S,DN,{row:t,col:r}),w=(S,E)=>{E.stop(),b(S)};return wa({dom:{tag:"div",attributes:{role:"button","aria-label":c}},behaviours:Kt([So("insert-table-picker-cell",[_t(Nf(),Xn.focus),_t(ac(),b),_t(Oh(),w),_t(Ku(),w)]),No.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Xn.config({onFocus:h})])})},oS=(t,r,c)=>{const h=[];for(let b=0;b<r;b++){const w=[];for(let S=0;S<c;S++){const E=t(b+1,S+1);w.push(Iz(b,S,E))}h.push(w)}return h},ET=(t,r,c,h,b)=>{for(let w=0;w<h;w++)for(let S=0;S<b;S++)No.set(t[w][S],w<=r&&S<=c)},TT=t=>ue(t,r=>ce(r,Rc)),OT=(t,r)=>Lr(`${r}x${t}`),Lz={inserttable:(t,r)=>{const b=Fz(r),w=oS(b,10,10),S=OT(0,0),E=As({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[S],behaviours:Kt([po.config({})])});return{type:"widget",data:{value:pn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Ub.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:TT(w).concat(E.asSpec()),behaviours:Kt([So("insert-table-picker",[nr(D=>{po.set(E.get(D),[S])}),Y2(ON,(D,P,B)=>{const{row:H,col:j}=B.event;ET(w,H,j,10,10),po.set(E.get(D),[OT(H+1,j+1)])}),Y2(DN,(D,P,B)=>{const{row:H,col:j}=B.event;t.onAction({numRows:H+1,numColumns:j+1}),ns(D,T0())})]),Fn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:Nz},DT=(t,r)=>$t(Lz,t.fancytype).map(c=>c(t,r)),_T=(t,r,c,h=!0,b=!1)=>{const w=b?dz(c.icons):pu(c.icons),S=D=>({isEnabled:()=>!qn.isDisabled(D),setEnabled:P=>qn.set(D,!P),setIconFill:(P,B)=>{Zr(D.element,`svg path[class="${P}"], rect[class="${P}"]`).each(H=>{sn(H,"fill",B)})},setTooltip:P=>{const B=c.translate(P);Pu(D.element,{"aria-label":B,title:B})}}),E=vg({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.some(w),checkMark:O.none(),shortcutContent:t.shortcut},c,h);return Qd({data:ih(t),getApi:S,enabled:t.enabled,onAction:Z,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},E,r,c)},sS=(t,r,c,h=!0)=>{const b=S=>({isEnabled:()=>!qn.isDisabled(S),setEnabled:E=>qn.set(S,!E)}),w=vg({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.none(),checkMark:O.none(),shortcutContent:t.shortcut},c,h);return Qd({data:ih(t),getApi:b,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},w,r,c)},_N=t=>({type:"separator",dom:{tag:"div",classes:[e1,EV]},components:t.text.map(Lr).toArray()}),$z=(t,r,c,h=!0)=>{const b=S=>({setActive:E=>{No.set(S,E)},isActive:()=>No.isOn(S),isEnabled:()=>!qn.isDisabled(S),setEnabled:E=>qn.set(S,!E)}),w=vg({iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,checkMark:O.some(c1(c.icons)),caret:O.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},c,h);return Ls(Qd({data:ih(t),enabled:t.enabled,getApi:b,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},w,r,c),{toggling:{toggleClass:sP,toggleOnExecute:!1,selected:t.active}})},Hz=YP,MN=_N,Vz=sS,zz=_T,Uz=$z,Wz=DT,jz=aT;var Zz=Object.freeze({__proto__:null,getCoupled:(t,r,c,h)=>c.getOrCreate(t,r,h),getExistingCoupled:(t,r,c,h)=>c.getExisting(t,r,h)}),qz=[tc("others",Mf(Eo.value,Ki()))],RN=Object.freeze({__proto__:null,init:()=>{const t={},r=(w,S)=>{if(Kn(w.others).length===0)throw new Error("Cannot find any known coupled components");return $t(t,S)},c=(w,S,E)=>r(S,E).getOrThunk(()=>{const P=$t(S.others,E).getOrDie("No information found for coupled component: "+E)(w),B=w.getSystem().build(P);return t[E]=B,B}),h=(w,S,E)=>r(S,E).orThunk(()=>($t(S.others,E).getOrDie("No information found for coupled component: "+E),O.none())),b=K({});return lc({readState:b,getExisting:h,getOrCreate:c})}});const Pr=Ji({fields:qz,name:"coupling",apis:Zz,state:RN}),MT=t=>{let r=O.none(),c=[];const h=P=>MT(B=>{b(H=>{B(P(H))})}),b=P=>{S()?D(P):c.push(P)},w=P=>{S()||(r=O.some(P),E(c),c=[])},S=()=>r.isSome(),E=P=>{Ze(P,D)},D=P=>{r.each(B=>{setTimeout(()=>{P(B)},0)})};return t(w),{get:b,map:h,isReady:S}},Gz={nu:MT,pure:t=>MT(r=>{r(t)})},Kz=t=>{setTimeout(()=>{throw t},0)},qh=t=>{const r=D=>{t().then(D,Kz)};return{map:D=>qh(()=>t().then(D)),bind:D=>qh(()=>t().then(P=>D(P).toPromise())),anonBind:D=>qh(()=>t().then(()=>D.toPromise())),toLazy:()=>Gz.nu(r),toCached:()=>{let D=null;return qh(()=>(D===null&&(D=t()),D))},toPromise:t,get:r}},da={nu:t=>qh(()=>new Promise(t)),pure:t=>qh(()=>Promise.resolve(t))},PN=K("sink"),NN=K(gc({name:PN(),overrides:K({dom:{tag:"div"},behaviours:Kt([Sa.config({useFixed:ge})]),events:ar([If(Gu()),If(bi()),If(Oh())])})})),BN=(t,r)=>{const c=t.getHotspot(r).getOr(r),h="hotspot",b=t.getAnchorOverrides();return t.layouts.fold(()=>({type:h,hotspot:c,overrides:b}),w=>({type:h,hotspot:c,overrides:b,layouts:w}))},Yz=(t,r,c)=>{const h=t.fetch;return h(c).map(r)},Xz=(t,r,c,h,b,w,S)=>{const E=Yz(t,r,h),D=FN(h,t);return E.map(P=>P.bind(B=>O.from(zh.sketch(Ot(ie({},w.menu()),{uid:mp(""),data:B,highlightOnOpen:S,onOpenMenu:(H,j)=>{const Y=D().getOrDie();Sa.position(Y,j,{anchor:c}),ss.decloak(b)},onOpenSubmenu:(H,j,Y)=>{const oe=D().getOrDie();Sa.position(oe,Y,{anchor:{type:"submenu",item:j}}),ss.decloak(b)},onRepositionMenu:(H,j,Y)=>{const oe=D().getOrDie();Sa.position(oe,j,{anchor:c}),Ze(Y,Ce=>{Sa.position(oe,Ce.triggeredMenu,{anchor:{type:"submenu",item:Ce.triggeringItem}})})},onEscape:()=>(Xn.focus(h),ss.close(b),O.some(!0))})))))},rS=(t,r,c,h,b,w,S)=>{const E=BN(t,c);return Xz(t,r,E,c,h,b,S).map(P=>(P.fold(()=>{ss.isOpen(h)&&ss.close(h)},B=>{ss.cloak(h),ss.open(h,B),w(h)}),h))},Jz=(t,r,c,h,b,w,S)=>(ss.close(h),da.pure(h)),RT=(t,r,c,h,b,w)=>{const S=Pr.getCoupled(c,"sandbox");return(ss.isOpen(S)?Jz:rS)(t,r,c,S,h,b,w)},Qz=(t,r,c)=>{const h=Zo.getCurrent(r).getOr(r),b=ee(t.element);c?xn(h.element,"min-width",b+"px"):ts(h.element,b)},FN=(t,r)=>t.getSystem().getByUid(r.uid+"-"+PN()).map(c=>()=>Eo.value(c)).getOrThunk(()=>r.lazySink.fold(()=>()=>Eo.error(new Error("No internal sink is specified, nor could an external sink be found")),c=>()=>c(t))),IN=t=>{ss.getState(t).each(r=>{zh.repositionMenus(r)})},PT=(t,r,c)=>{const h=Km(),b=(E,D)=>{const P=BN(t,r);h.link(r.element),t.matchWidth&&Qz(P.hotspot,D,t.useMinWidth),t.onOpen(P,E,D),c!==void 0&&c.onOpen!==void 0&&c.onOpen(E,D)},w=(E,D)=>{h.unlink(r.element),c!==void 0&&c.onClose!==void 0&&c.onClose(E,D)},S=FN(r,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:h.id,role:"listbox"}},behaviours:cu.augment(t.sandboxBehaviours,[ln.config({store:{mode:"memory",initialValue:r}}),ss.config({onOpen:b,onClose:w,isPartOf:(E,D,P)=>Rh(D,P)||Rh(r,P),getAttachPoint:()=>S().getOrDie()}),Zo.config({find:E=>ss.getState(E).bind(D=>Zo.getCurrent(D))}),Pl.config({channels:ie(ie({},tA({isExtraPart:ne})),nA({doReposition:IN}))})])}},LN=t=>{const r=Pr.getCoupled(t,"sandbox");IN(r)},NT=()=>[et("sandboxClasses",[]),cu.field("sandboxBehaviours",[Zo,Pl,ss,ln])],eU=K([Pt("dom"),Pt("fetch"),os("onOpen"),Rl("onExecute"),et("getHotspot",O.some),et("getAnchorOverrides",K({})),Bh(),yi("dropdownBehaviours",[No,Pr,Fn,Xn]),Pt("toggleClass"),et("eventOrder",{}),Ds("lazySink"),et("matchWidth",!1),et("useMinWidth",!1),Ds("role")].concat(NT())),tU=K([uu({schema:[hw(),et("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),NN()]),nU=(t,r,c,h)=>{const b=B=>$t(t.dom,"attributes").bind(H=>$t(H,B)),w=B=>{ss.getState(B).each(H=>{zh.highlightPrimary(H)})},S=(B,H,j)=>RT(t,Ie,B,h,H,j),E=B=>{S(B,w,Ha.HighlightMenuAndItem).get(Z)},D={expand:B=>{No.isOn(B)||S(B,Z,Ha.HighlightNone).get(Z)},open:B=>{No.isOn(B)||S(B,Z,Ha.HighlightMenuAndItem).get(Z)},refetch:B=>Pr.getExistingCoupled(B,"sandbox").fold(()=>S(B,Z,Ha.HighlightMenuAndItem).map(Z),j=>rS(t,Ie,B,j,h,Z,Ha.HighlightMenuAndItem).map(Z)),isOpen:No.isOn,close:B=>{No.isOn(B)&&S(B,Z,Ha.HighlightMenuAndItem).get(Z)},repositionMenus:B=>{No.isOn(B)&&LN(B)}},P=(B,H)=>(Ff(B),O.some(!0));return{uid:t.uid,dom:t.dom,components:r,behaviours:Mi(t.dropdownBehaviours,[No.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Pr.config({others:{sandbox:B=>PT(t,B,{onOpen:()=>No.on(B),onClose:()=>No.off(B)})}}),Fn.config({mode:"special",onSpace:P,onEnter:P,onDown:(B,H)=>{if(Ic.isOpen(B)){const j=Pr.getCoupled(B,"sandbox");w(j)}else Ic.open(B);return O.some(!0)},onEscape:(B,H)=>Ic.isOpen(B)?(Ic.close(B),O.some(!0)):O.none()}),Xn.config({})]),events:sd(O.some(E)),eventOrder:Ot(ie({},t.eventOrder),{[ac()]:["disabling","toggling","alloy.base.behaviour"]}),apis:D,domModification:{attributes:ie(ie({"aria-haspopup":"true"},t.role.fold(()=>({}),B=>({role:B}))),t.dom.tag==="button"?{type:b("type").getOr("button")}:{})}}},Ic=ka({name:"Dropdown",configFields:eU(),partFields:tU(),factory:nU,apis:{open:(t,r)=>t.open(r),refetch:(t,r)=>t.refetch(r),expand:(t,r)=>t.expand(r),close:(t,r)=>t.close(r),isOpen:(t,r)=>t.isOpen(r),repositionMenus:(t,r)=>t.repositionMenus(r)}}),oU=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},sU=t=>{const r=ln.getValue(t),c=Px(t).map(mP);Ic.refetch(r).get(()=>{const h=Pr.getCoupled(r,"sandbox");c.each(b=>Px(h).each(w=>LE(w,b)))})},rU=(t,r)=>{iU(t).each(c=>{Q6(t,c.element,r.event.eventType,r.event.interactionEvent)})},iU=t=>ss.getState(t).bind(gs.getHighlighted).bind(gs.getHighlighted),aU=t=>vi(t.element,Nx)?O.some(t.element):Zr(t.element,"."+Nx),BT=(t,r,c)=>{IE(t).each(h=>{$E(h,c),aU(r).each(w=>{z(w,"id").each(S=>sn(h.element,"aria-controls",S))})}),sn(c.element,"aria-selected","true")},lU=(t,r,c)=>{sn(c.element,"aria-selected","false")},cU=t=>{IE(t).each(r=>Xn.focus(r))},uU=t=>Pr.getExistingCoupled(t,"sandbox").bind(Px).map(mP).map(c=>c.fetchPattern).getOr("");var Kb;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(Kb||(Kb={}));const dU=(t,r,c,h,b)=>{const w=c.shared.providers,S=E=>b?Ot(ie({},E),{shortcut:O.none(),icon:E.text.isSome()?O.none():E.icon}):E;switch(t.type){case"menuitem":return HP(t).fold(Kd,E=>O.some(Vz(S(E),r,w,h)));case"nestedmenuitem":return ez(t).fold(Kd,E=>O.some(zz(S(E),r,w,h,b)));case"togglemenuitem":return nz(t).fold(Kd,E=>O.some(Uz(S(E),r,w,h)));case"separator":return GE(t).fold(Kd,E=>O.some(MN(E)));case"fancymenuitem":return JV(t).fold(Kd,E=>Wz(E,c));default:return O.none()}},fU=(t,r,c,h,b,w,S)=>{const E=h===1,D=!E||Fx(t);return pr(ce(t,P=>{switch(P.type){case"separator":return $V(P).fold(Kd,B=>O.some(MN(B)));case"cardmenuitem":return FP(P).fold(Kd,B=>O.some(jz(Ot(ie({},B),{onAction:H=>{B.onAction(H),c(B.value,B.meta)}}),b,w,{itemBehaviours:GP(B.meta,w),cardText:{matchText:r,highlightOn:S}})));case"autocompleteitem":default:return EP(P).fold(Kd,B=>O.some(Hz(B,r,E,"normal",c,b,w,D)))}}))},$N=(t,r,c,h,b,w)=>{const S=Fx(r),E=pr(ce(r,B=>{const H=Y=>b?!xo(Y,"text"):S,j=Y=>dU(Y,c,h,H(Y),b);return B.type==="nestedmenuitem"&&B.getSubmenuItems().length<=0?j(Ot(ie({},B),{enabled:!1})):j(B)})),D=oU(w);return(b?Ib:Ix)(t,S,E,1,D)},iS=t=>zh.singleData(t.value,t),hU=(t,r,c,h)=>{const b=nS(r,h),w=sh(h);return{data:iS(Ot(ie({},t),{movement:b,menuBehaviours:Vb.unnamedEvents(r!=="auto"?[]:[nr((S,E)=>{JE(S,4,w.item).each(({numColumns:D,numRows:P})=>{Fn.setGridSize(S,P,D)})})])})),menu:{markers:sh(h),fakeFocus:c===Kb.ContentFocus}}},mU=(t,r)=>OE(Tt.fromDom(r.startContainer)).map(c=>{const h=t.createRng();return h.selectNode(c.dom),h}),gU={register:(t,r)=>{const c=pn("autocompleter"),h=Zn(!1),b=Zn(!1),w=wa(vr.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:c}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Kt([So("dismissAutocompleter",[_t(Wm(),()=>B()),_t(M0(),(Qe,Le)=>{z(Le.event.target,"id").each(_e=>sn(Tt.fromDom(t.getBody()),"aria-activedescendant",_e))})])]),lazySink:r.getSink})),S=()=>vr.isOpen(w),E=b.get,D=()=>{if(S()){vr.hide(w),t.dom.remove(c,!1);const Qe=Tt.fromDom(t.getBody());z(Qe,"aria-owns").filter(Le=>Le===c).each(()=>{pe(Qe,"aria-owns"),pe(Qe,"aria-activedescendant")})}},P=()=>vr.getContent(w).bind(Qe=>ot(Qe.components(),0)),B=()=>t.execCommand("mceAutocompleterClose"),H=Qe=>{const Le=ho(Qe,_e=>O.from(_e.columns)).getOr(1);return ue(Qe,_e=>{const Xe=_e.items;return fU(Xe,_e.matchText,(Ft,Et)=>{const St=t.selection.getRng();mU(t.dom,St).each(jt=>{const Jt={hide:()=>B(),reload:Co=>{D(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Co})}};h.set(!0),_e.onAction(Jt,jt,Ft,Et),h.set(!1)})},Le,ad.BUBBLE_TO_SANDBOX,r,_e.highlightOn)})},j=(Qe,Le)=>{CV(Tt.fromDom(t.getBody())).each(_e=>{const Xe=ho(Qe,Ft=>O.from(Ft.columns)).getOr(1);vr.showMenuAt(w,{anchor:{type:"node",root:Tt.fromDom(t.getBody()),node:O.from(_e)}},hU(Ix("autocompleter-value",!0,Le,Xe,{menuType:"normal"}),Xe,Kb.ContentFocus,"normal"))}),P().each(gs.highlightFirst)},Y=Qe=>{const Le=H(Qe);Le.length>0?(j(Qe,Le),sn(Tt.fromDom(t.getBody()),"aria-owns",c),t.inline||oe()):D()},oe=()=>{t.dom.get(c)&&t.dom.remove(c,!1);const Qe=t.getDoc().documentElement,Le=t.selection.getNode(),_e=s8(w.element);si(_e,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${Le.offsetTop}px`,left:`${Le.offsetLeft}px`}),t.dom.add(Qe,_e.dom),Zr(_e,'[role="menu"]').each(Xe=>{es(Xe,"position"),es(Xe,"max-height")})};t.on("AutocompleterStart",({lookupData:Qe})=>{b.set(!0),h.set(!1),Y(Qe)}),t.on("AutocompleterUpdate",({lookupData:Qe})=>Y(Qe)),t.on("AutocompleterEnd",()=>{D(),b.set(!1),h.set(!1)});const Ce={cancelIfNecessary:B,isMenuOpen:S,isActive:E,isProcessingAction:h.get,getMenu:P};kV.setup(Ce,t)}},HN=["visible","hidden","clip"],VN=t=>_r(t).length>0&&!We(HN,t),FT=t=>{if(Yl(t)){const r=er(t,"overflow-x"),c=er(t,"overflow-y");return VN(r)||VN(c)}else return!1},pU=t=>{const r=R3(t,FT),c=r.length===0?Os(t).map(Ms).map(h=>R3(h,FT)).getOr([]):r;return en(c).map(h=>({element:h,others:c.slice(1)}))},Gh=(t,r)=>qd(t)?pU(r):O.none(),f1=t=>{const r=[...ce(t.others,Ar),qi()];return _2(Ar(t.element),r)},Yb=(t,r,c)=>Qu(t,r,c).isSome(),zN=(t,r)=>{let c=null;return{cancel:()=>{c!==null&&(clearTimeout(c),c=null)},schedule:(...w)=>{c=setTimeout(()=>{t.apply(null,w),c=null},r)}}},UN=5,bU=400,WN=t=>{const r=t.raw;return r.touches===void 0||r.touches.length!==1?O.none():O.some(r.touches[0])},vU=(t,r)=>{const c=Math.abs(t.clientX-r.x),h=Math.abs(t.clientY-r.y);return c>UN||h>UN},yU=t=>{const r=sr(),c=Zn(!1),h=zN(P=>{t.triggerEvent(W2(),P),c.set(!0)},bU),b=P=>(WN(P).each(B=>{h.cancel();const H={x:B.clientX,y:B.clientY,target:P.target};h.schedule(P),c.set(!1),r.set(H)}),O.none()),w=P=>(h.cancel(),WN(P).each(B=>{r.on(H=>{vU(B,H)&&r.clear()})}),O.none()),S=P=>{h.cancel();const B=H=>bs(H.target,P.target);return r.get().filter(B).map(H=>c.get()?(P.prevent(),!1):t.triggerEvent(Ku(),P))},E=Ba([{key:Pf(),value:b},{key:lp(),value:w},{key:Hm(),value:S}]);return{fireIfReady:(P,B)=>$t(E,B).bind(H=>H(P))}},wU=t=>t.raw.which===RH[0]&&!We(["input","textarea"],Ts(t.target))&&!Yb(t.target,'[contenteditable="true"]'),xU=(t,r)=>{const c=ie({stopBackspace:!0},r),h=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],b=yU(c),w=ce(h.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),Y=>Ja(t,Y,oe=>{b.fireIfReady(oe,Y).each(Qe=>{Qe&&oe.kill()}),c.triggerEvent(Y,oe)&&oe.kill()})),S=sr(),E=Ja(t,"paste",Y=>{b.fireIfReady(Y,"paste").each(Ce=>{Ce&&Y.kill()}),c.triggerEvent("paste",Y)&&Y.kill(),S.set(setTimeout(()=>{c.triggerEvent(U2(),Y)},0))}),D=Ja(t,"keydown",Y=>{c.triggerEvent("keydown",Y)?Y.kill():c.stopBackspace&&wU(Y)&&Y.prevent()}),P=Ja(t,"focusin",Y=>{c.triggerEvent("focusin",Y)&&Y.kill()}),B=sr(),H=Ja(t,"focusout",Y=>{c.triggerEvent("focusout",Y)&&Y.kill(),B.set(setTimeout(()=>{c.triggerEvent(z2(),Y)},0))});return{unbind:()=>{Ze(w,Y=>{Y.unbind()}),D.unbind(),P.unbind(),H.unbind(),E.unbind(),S.on(clearTimeout),B.on(clearTimeout)}}},jN=(t,r)=>{const c=$t(t,"target").getOr(r);return Zn(c)},SU=(t,r)=>{const c=Zn(!1),h=Zn(!1);return{stop:()=>{c.set(!0)},cut:()=>{h.set(!0)},isStopped:c.get,isCut:h.get,event:t,setSource:r.set,getSource:r.get}},ZN=t=>{const r=Zn(!1);return{stop:()=>{r.set(!0)},cut:Z,isStopped:r.get,isCut:ne,event:t,setSource:Oe("Cannot set source of a broadcasted event"),getSource:Oe("Cannot get source of a broadcasted event")}},Xb=Ml.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),qN=(t,r,c,h,b,w)=>{const S=t(r,h),E=SU(c,b);return S.fold(()=>(w.logEventNoHandlers(r,h),Xb.complete()),D=>{const P=D.descHandler;return sw(P)(E),E.isStopped()?(w.logEventStopped(r,D.element,P.purpose),Xb.stopped()):E.isCut()?(w.logEventCut(r,D.element,P.purpose),Xb.complete()):mi(D.element).fold(()=>(w.logNoParent(r,D.element,P.purpose),Xb.complete()),H=>(w.logEventResponse(r,D.element,P.purpose),Xb.resume(H)))})},GN=(t,r,c,h,b,w)=>qN(t,r,c,h,b,w).fold(ge,S=>GN(t,r,c,S,b,w),ne),CU=(t,r,c,h,b)=>{const w=jN(c,h);return qN(t,r,c,h,w,b)},kU=(t,r,c)=>{const h=ZN(r);return Ze(t,b=>{const w=b.descHandler;sw(w)(h)}),h.isStopped()},IT=(t,r,c,h)=>KN(t,r,c,c.target,h),KN=(t,r,c,h,b)=>{const w=jN(c,h);return GN(t,r,c,h,w,b)},AU=(t,r)=>({element:t,descHandler:r}),EU=(t,r)=>({id:t,descHandler:r}),YN=()=>{const t={},r=(S,E,D)=>{Ye(D,(P,B)=>{const H=t[B]!==void 0?t[B]:{};H[E]=m8(P,S),t[B]=H})},c=(S,E)=>N0(E).bind(D=>$t(S,D)).map(D=>AU(E,D));return{registerId:r,unregisterId:S=>{Ye(t,(E,D)=>{xo(E,S)&&delete E[S]})},filterByType:S=>$t(t,S).map(E=>Qo(E,(D,P)=>EU(P,D))).getOr([]),find:(S,E,D)=>$t(t,E).bind(P=>$m(D,B=>c(P,B),S))}},XN=()=>{const t=YN(),r={},c=P=>{const B=P.element;return N0(B).getOrThunk(()=>l8("uid-",P.element))},h=(P,B)=>{const H=r[B];if(H===P)w(P);else throw new Error('The tagId "'+B+'" is already used by: '+Zm(H.element)+`
Cannot use it for: `+Zm(P.element)+`
The conflicting element is`+(jo(H.element)?" ":" not ")+"already in the DOM")},b=P=>{const B=c(P);Qs(r,B)&&h(P,B);const H=[P];t.registerId(H,B,P.events),r[B]=P},w=P=>{N0(P.element).each(B=>{delete r[B],t.unregisterId(B)})};return{find:(P,B,H)=>t.find(P,B,H),filter:P=>t.filterByType(P),register:b,unregister:w,getById:P=>$t(r,P)}},ld=Fl({name:"Container",factory:t=>{const h=t.dom,{attributes:r}=h,c=Jv(h,["attributes"]);return{uid:t.uid,dom:ie({tag:"div",attributes:ie({role:"presentation"},r)},c),components:t.components,behaviours:Kf(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[et("components",[]),yi("containerBehaviours",[]),et("events",{}),et("domModification",{}),et("eventOrder",{})]}),aS=t=>{const r=Le=>mi(t.element).fold(ge,_e=>bs(Le,_e)),c=XN(),h=(Le,_e)=>c.find(r,Le,_e),b=xU(t.element,{triggerEvent:(Le,_e)=>ck(Le,_e.target,Xe=>IT(h,Le,_e,Xe))}),w={debugInfo:K("real"),triggerEvent:(Le,_e,Xe)=>{ck(Le,_e,Ft=>KN(h,Le,Xe,_e,Ft))},triggerFocus:(Le,_e)=>{N0(Le).fold(()=>{dc(Le)},Xe=>{ck(dp(),Le,Ft=>(CU(h,dp(),{originator:_e,kill:Z,prevent:Z,target:Le},Le,Ft),!1))})},triggerEscape:(Le,_e)=>{w.triggerEvent("keydown",Le.element,_e.event)},getByUid:Le=>Ce(Le),getByDom:Le=>Qe(Le),build:wa,buildOrPatch:uw,addToGui:Le=>{D(Le)},removeFromGui:Le=>{P(Le)},addToWorld:Le=>{S(Le)},removeFromWorld:Le=>{E(Le)},broadcast:Le=>{j(Le)},broadcastOn:(Le,_e)=>{Y(Le,_e)},broadcastEvent:(Le,_e)=>{oe(Le,_e)},isConnected:ge},S=Le=>{Le.connect(w),Ho(Le.element)||(c.register(Le),Ze(Le.components(),S),w.triggerEvent(Gy(),Le.element,{target:Le.element}))},E=Le=>{Ho(Le.element)||(Ze(Le.components(),E),c.unregister(Le)),Le.disconnect()},D=Le=>{Ih(t,Le)},P=Le=>{qf(Le)},B=()=>{b.unbind(),_c(t.element)},H=Le=>{const _e=c.filter(zm());Ze(_e,Xe=>{const Ft=Xe.descHandler;sw(Ft)(Le)})},j=Le=>{H({universal:!0,data:Le})},Y=(Le,_e)=>{H({universal:!1,channels:Le,data:_e})},oe=(Le,_e)=>{const Xe=c.filter(Le);return kU(Xe,_e)},Ce=Le=>c.getById(Le).fold(()=>Eo.error(new Error('Could not find component with uid: "'+Le+'" in system.')),Eo.value),Qe=Le=>{const _e=N0(Le).getOr("not found");return Ce(_e)};return S(t),{root:t,element:t.element,destroy:B,add:D,remove:P,getByUid:Ce,getByDom:Qe,addToWorld:S,removeFromWorld:E,broadcast:j,broadcastOn:Y,broadcastEvent:oe}},TU=(t,r)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:ce(t.items,r.interpreter)}),OU=K([et("prefix","form-field"),yi("fieldBehaviours",[Zo,ln])]),DU=K([gc({schema:[Pt("dom")],name:"label"}),gc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Pt("text")],name:"aria-descriptor"}),Ca({factory:{sketch:t=>{const r=ap(t,["factory"]);return t.factory.sketch(r)}},schema:[Pt("factory")],name:"field"})]),_U=(t,r,c,h)=>{const b=Mi(t.fieldBehaviours,[Zo.config({find:E=>Gs(E,t,"field")}),ln.config({store:{mode:"manual",getValue:E=>Zo.getCurrent(E).bind(ln.getValue),setValue:(E,D)=>{Zo.getCurrent(E).each(P=>{ln.setValue(P,D)})}}})]),w=ar([nr((E,D)=>{const P=d4(E,t,["label","field","aria-descriptor"]);P.field().each(B=>{const H=pn(t.prefix);P.label().each(j=>{sn(j.element,"for",H),sn(B.element,"id",H)}),P["aria-descriptor"]().each(j=>{const Y=pn(t.prefix);sn(j.element,"id",Y),sn(B.element,"aria-describedby",Y)})})})]),S={getField:E=>Gs(E,t,"field"),getLabel:E=>Gs(E,t,"label")};return{uid:t.uid,dom:t.dom,components:r,behaviours:b,events:w,apis:S}},Es=ka({name:"FormField",configFields:OU(),partFields:DU(),factory:_U,apis:{getField:(t,r)=>t.getField(r),getLabel:(t,r)=>t.getLabel(r)}});var lS=Object.freeze({__proto__:null,exhibit:(t,r)=>su({attributes:Ba([{key:r.tabAttr,value:"true"}])})}),MU=[et("tabAttr","data-alloy-tabstop")];const lr=Ji({fields:MU,name:"tabstopping",active:lS});var RU=tinymce.util.Tools.resolve("tinymce.html.Entities");const Jb=(t,r,c,h)=>{const b=NU(t,r,c,h);return Es.sketch(b)},PU=(t,r)=>Jb(t,r,[],[]),NU=(t,r,c,h)=>({dom:Qb(c),components:t.toArray().concat([r]),fieldBehaviours:Kt(h)}),See=()=>Qb([]),Qb=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Lc=(t,r)=>Es.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Lr(r.translate(t))]}),bl=pn("form-component-change"),h1=pn("form-close"),Kh=pn("form-cancel"),tf=pn("form-action"),ev=pn("form-submit"),LT=pn("form-block"),$T=pn("form-unblock"),JN=pn("form-tabchange"),QN=pn("form-resize"),BU=(t,r,c)=>{const h=t.label.map(Y=>Lc(Y,r)),b=r.icons(),w=Y=>{var oe;return(oe=b[Y])!==null&&oe!==void 0?oe:Y},S=Y=>(oe,Ce)=>{Qu(Ce.event.target,"[data-collection-item-value]").each(Qe=>{Y(oe,Ce,Qe,Vr(Qe,"data-collection-item-value"))})},E=(Y,oe)=>{const Ce=ce(oe,_e=>{const Xe=bc.translate(_e.text),Ft=t.columns===1?`<div class="tox-collection__item-label">${Xe}</div>`:"",Et=`<div class="tox-collection__item-icon">${w(_e.icon)}</div>`,St={_:" "," - ":" ","-":" "},jt=Xe.replace(/\_| \- |\-/g,Co=>St[Co]);return`<div class="tox-collection__item${r.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${RU.encodeAllRaw(_e.value)}" title="${jt}" aria-label="${jt}">${Et}${Ft}</div>`}),Qe=t.columns!=="auto"&&t.columns>1?wt(Ce,t.columns):[Ce],Le=ce(Qe,_e=>`<div class="tox-collection__group">${_e.join("")}</div>`);hp(Y.element,Le.join(""))},D=S((Y,oe,Ce,Qe)=>{oe.stop(),r.isDisabled()||Hn(Y,tf,{name:t.name,value:Qe})}),P=[_t(Nf(),S((Y,oe,Ce)=>{dc(Ce)})),_t(Oh(),D),_t(Ku(),D),_t(Bf(),S((Y,oe,Ce)=>{Zr(Y.element,"."+Bb).each(Qe=>{wr(Qe,Bb)}),ti(Ce,Bb)})),_t(V2(),S(Y=>{Zr(Y.element,"."+Bb).each(oe=>{wr(oe,Bb)})})),$f(S((Y,oe,Ce,Qe)=>{Hn(Y,tf,{name:t.name,value:Qe})}))],B=(Y,oe)=>ce(_i(Y.element,".tox-collection__item"),oe),H=Es.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Ie},behaviours:Kt([qn.config({disabled:r.isDisabled,onDisabled:Y=>{B(Y,oe=>{ti(oe,"tox-collection__item--state-disabled"),sn(oe,"aria-disabled",!0)})},onEnabled:Y=>{B(Y,oe=>{wr(oe,"tox-collection__item--state-disabled"),pe(oe,"aria-disabled")})}}),ii(),po.config({}),ln.config({store:{mode:"memory",initialValue:c.getOr([])},onSetValue:(Y,oe)=>{E(Y,oe),t.columns==="auto"&&JE(Y,5,"tox-collection__item").each(({numRows:Ce,numColumns:Qe})=>{Fn.setGridSize(Y,Ce,Qe)}),ns(Y,QN)}}),lr.config({}),Fn.config(Pz(t.columns,"normal")),So("collection-events",P)]),eventOrder:{[ac()]:["disabling","alloy.base.behaviour","collection-events"]}});return Jb(h,H,["tox-form__group--collection"],[])},FU=["input","textarea"],eB=t=>{const r=Ts(t);return We(FU,r)},tB=(t,r)=>{const c=r.getRoot(t).getOr(t.element);wr(c,r.invalidClass),r.notify.each(h=>{eB(t.element)&&sn(t.element,"aria-invalid",!1),h.getContainer(t).each(b=>{hp(b,h.validHtml)}),h.onValid(t)})},HT=(t,r,c,h)=>{const b=r.getRoot(t).getOr(t.element);ti(b,r.invalidClass),r.notify.each(w=>{eB(t.element)&&sn(t.element,"aria-invalid",!0),w.getContainer(t).each(S=>{hp(S,h)}),w.onInvalid(t,h)})},yg=(t,r,c)=>r.validator.fold(()=>da.pure(Eo.value(!0)),h=>h.validate(t)),lh=(t,r,c)=>(r.notify.each(h=>{h.onValidate(t)}),yg(t,r).map(h=>t.getSystem().isConnected()?h.fold(b=>(HT(t,r,c,b),Eo.error(b)),b=>(tB(t,r),Eo.value(b))):Eo.error("No longer in system")));var nB=Object.freeze({__proto__:null,markValid:tB,markInvalid:HT,query:yg,run:lh,isInvalid:(t,r)=>{const c=r.getRoot(t).getOr(t.element);return vi(c,r.invalidClass)}}),cS=Object.freeze({__proto__:null,events:(t,r)=>t.validator.map(c=>ar([_t(c.onEvent,h=>{lh(h,t,r).get(Ie)})].concat(c.validateOnLoad?[nr(h=>{lh(h,t,r).get(Z)})]:[]))).getOr({})}),LU=[Pt("invalidClass"),et("getRoot",O.none),oc("notify",[et("aria","alert"),et("getContainer",O.none),et("validHtml",""),os("onValid"),os("onInvalid"),os("onValidate")]),oc("validator",[Pt("validate"),et("onEvent","input"),et("validateOnLoad",!0)])];const wc=Ji({fields:LU,name:"invalidating",active:cS,apis:nB,extra:{validation:t=>r=>{const c=ln.getValue(r);return da.pure(t(c))}}});var $U=Object.freeze({__proto__:null,events:()=>ar([G2(X6(),ge)]),exhibit:()=>su({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const tv=Ji({fields:[],name:"unselecting",active:$U}),HU=(t,r)=>Ic.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Kt([ni.button(r.providers.isDisabled),ii(),tv.config({}),lr.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:r.getSink,fetch:c=>da.nu(h=>t.fetch(h)).map(h=>O.from(iS(Ls(AT(pn("menu-value"),h,b=>{t.onItemAction(c,b)},t.columns,t.presets,ad.CLOSE_ON_EXECUTE,ne,r.providers),{movement:nS(t.columns,t.presets)})))),parts:{menu:t1(!1,1,t.presets)}}),oB=pn("color-input-change"),sB=pn("color-swatch-change"),nv=pn("color-picker-cancel"),VU=(t,r,c,h)=>{const b=Es.parts.field({factory:gg,inputClasses:["tox-textfield"],data:h,onSetValue:P=>wc.run(P).get(Z),inputBehaviours:Kt([qn.config({disabled:r.providers.isDisabled}),ii(),lr.config({}),wc.config({invalidClass:"tox-textbox-field-invalid",getRoot:P=>ga(P.element),notify:{onValid:P=>{const B=ln.getValue(P);Hn(P,oB,{color:B})}},validator:{validateOnLoad:!1,validate:P=>{const B=ln.getValue(P);if(B.length===0)return da.pure(Eo.value(!0));{const H=Tt.fromTag("span");xn(H,"background-color",B);const j=js(H,"background-color").fold(()=>Eo.error("blah"),Y=>Eo.value(B));return da.pure(j)}}}})]),selectOnFocus:!1}),w=t.label.map(P=>Lc(P,r.providers)),S=(P,B)=>{Hn(P,sB,{value:B})},E=(P,B)=>{D.getOpt(P).each(H=>{B==="custom"?c.colorPicker(j=>{j.fold(()=>ns(H,nv),Y=>{S(H,Y),pT(t.storageKey,Y)})},"#ffffff"):B==="remove"?S(H,""):S(H,B)})},D=As(HU({dom:{tag:"span",attributes:{"aria-label":r.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ua,ca,Di],onLtr:()=>[ca,ua,Di]},components:[],fetch:CN(c.getColors(t.storageKey),t.storageKey,c.hasCustomColors()),columns:c.getColorCols(t.storageKey),presets:"color",onItemAction:E},r));return Es.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:w.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[b,D.asSpec()]}]),fieldBehaviours:Kt([So("form-field-events",[_t(oB,(P,B)=>{D.getOpt(P).each(H=>{xn(H.element,"background-color",B.event.color)}),Hn(P,bl,{name:t.name})}),_t(sB,(P,B)=>{Es.getField(P).each(H=>{ln.setValue(H,B.event.value),Zo.getCurrent(P).each(Xn.focus)})}),_t(nv,(P,B)=>{Es.getField(P).each(H=>{Zo.getCurrent(P).each(Xn.focus)})})])])})},VT=gc({schema:[Pt("dom")],name:"label"}),Yh=t=>gc({name:""+t+"-edge",overrides:r=>r.model.manager.edgeActions[t].fold(()=>({}),h=>({events:ar([Qy(Pf(),(b,w,S)=>h(b,S),[r]),Qy(bi(),(b,w,S)=>h(b,S),[r]),Qy(Zy(),(b,w,S)=>{S.mouseIsDown.get()&&h(b,S)},[r])])}))}),zU=Yh("top-left"),UU=Yh("top"),rB=Yh("top-right"),WU=Yh("right"),jU=Yh("bottom-right"),ZU=Yh("bottom"),iB=Yh("bottom-left"),qU=Yh("left"),GU=Ca({name:"thumb",defaults:K({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:ar([fp(Pf(),t,"spectrum"),fp(lp(),t,"spectrum"),fp(Hm(),t,"spectrum"),fp(bi(),t,"spectrum"),fp(Zy(),t,"spectrum"),fp(H2(),t,"spectrum")])})}),dS=t=>eh(t.event),KU=Ca({schema:[Qr("mouseIsDown",()=>Zn(!1))],name:"spectrum",overrides:t=>{const c=t.model.manager,h=(b,w)=>c.getValueFromEvent(w).map(S=>c.setValueFrom(b,t,S));return{behaviours:Kt([Fn.config({mode:"special",onLeft:(b,w)=>c.onLeft(b,t,dS(w)),onRight:(b,w)=>c.onRight(b,t,dS(w)),onUp:(b,w)=>c.onUp(b,t,dS(w)),onDown:(b,w)=>c.onDown(b,t,dS(w))}),lr.config({}),Xn.config({})]),events:ar([_t(Pf(),h),_t(lp(),h),_t(bi(),h),_t(Zy(),(b,w)=>{t.mouseIsDown.get()&&h(b,w)})])}}});var YU=[VT,qU,WU,UU,ZU,zU,rB,iB,jU,GU,KU];const m1=K("slider.change.value"),JU=t=>t.type.indexOf("touch")!==-1,zT=t=>{const r=t.event.raw;if(JU(r)){const c=r;return c.touches!==void 0&&c.touches.length===1?O.some(c.touches[0]).map(h=>hr(h.clientX,h.clientY)):O.none()}else{const c=r;return c.clientX!==void 0?O.some(c).map(h=>hr(h.clientX,h.clientY)):O.none()}},QU="top",eW="right",tW="bottom",aB="left",vu=t=>t.model.minX,wg=t=>t.model.minY,fS=t=>t.model.minX-1,hS=t=>t.model.minY-1,nf=t=>t.model.maxX,Aa=t=>t.model.maxY,g1=t=>t.model.maxX+1,ov=t=>t.model.maxY+1,lB=(t,r,c)=>r(t)-c(t),UT=t=>lB(t,nf,vu),WT=t=>lB(t,Aa,wg),cB=t=>UT(t)/2,jT=t=>WT(t)/2,xg=(t,r)=>r?t.stepSize*t.speedMultiplier:t.stepSize,uB=t=>t.snapToGrid,dB=t=>t.snapStart,ZT=t=>t.rounded,mS=(t,r)=>t[r+"-edge"]!==void 0,qT=t=>mS(t,aB),GT=t=>mS(t,eW),KT=t=>mS(t,QU),fB=t=>mS(t,tW),ch=t=>t.model.value.get(),Xh=(t,r)=>({x:t,y:r}),yu=(t,r)=>{Hn(t,m1(),{value:r})},nW=(t,r)=>{yu(t,Xh(fS(r),hS(r)))},oW=(t,r)=>{yu(t,hS(r))},YT=(t,r)=>{yu(t,Xh(cB(r),hS(r)))},sW=(t,r)=>{yu(t,Xh(g1(r),hS(r)))},hB=(t,r)=>{yu(t,g1(r))},rW=(t,r)=>{yu(t,Xh(g1(r),jT(r)))},iW=(t,r)=>{yu(t,Xh(g1(r),ov(r)))},aW=(t,r)=>{yu(t,ov(r))},lW=(t,r)=>{yu(t,Xh(cB(r),ov(r)))},cW=(t,r)=>{yu(t,Xh(fS(r),ov(r)))},uW=(t,r)=>{yu(t,fS(r))},dW=(t,r)=>{yu(t,Xh(fS(r),jT(r)))},gS=(t,r,c,h)=>t<r?t:t>c?c:t===r?r-1:Math.max(r,t-h),pS=(t,r,c,h)=>t>c?t:t<r?r:t===c?c+1:Math.min(c,t+h),mB=(t,r,c)=>Math.max(r,Math.min(c,t)),fW=(t,r,c,h,b)=>b.fold(()=>{const w=t-r,S=Math.round(w/h)*h;return mB(r+S,r-1,c+1)},w=>{const S=(t-w)%h,E=Math.round(S/h),D=Math.floor((t-w)/h),P=Math.floor((c-w)/h),B=Math.min(P,D+E),H=w+B*h;return Math.max(w,H)}),hW=(t,r,c)=>Math.min(c,Math.max(t,r))-r,gB=t=>{const{min:r,max:c,range:h,value:b,step:w,snap:S,snapStart:E,rounded:D,hasMinEdge:P,hasMaxEdge:B,minBound:H,maxBound:j,screenRange:Y}=t,oe=P?r-1:r,Ce=B?c+1:c;if(b<H)return oe;if(b>j)return Ce;{const Qe=hW(b,H,j),Le=mB(Qe/Y*h+r,oe,Ce);return S&&Le>=r&&Le<=c?fW(Le,r,c,w,E):D?Math.round(Le):Le}},pB=t=>{const{min:r,max:c,range:h,value:b,hasMinEdge:w,hasMaxEdge:S,maxBound:E,maxOffset:D,centerMinEdge:P,centerMaxEdge:B}=t;return b<r?w?0:P:b>c?S?E:B:(b-r)/h*D},XT="top",JT="right",QT="bottom",bS="left",eO="width",mW="height",cd=t=>t.element.dom.getBoundingClientRect(),wu=(t,r)=>t[r],vS=t=>{const r=cd(t);return wu(r,bS)},bB=t=>{const r=cd(t);return wu(r,JT)},yS=t=>{const r=cd(t);return wu(r,XT)},wS=t=>{const r=cd(t);return wu(r,QT)},of=t=>{const r=cd(t);return wu(r,eO)},vB=t=>{const r=cd(t);return wu(r,mW)},p1=(t,r,c)=>(t+r)/2-c,yB=(t,r)=>{const c=cd(t),h=cd(r),b=wu(c,bS),w=wu(c,JT),S=wu(h,bS);return p1(b,w,S)},xS=(t,r)=>{const c=cd(t),h=cd(r),b=wu(c,XT),w=wu(c,QT),S=wu(h,XT);return p1(b,w,S)},SS=(t,r)=>{Hn(t,m1(),{value:r})},tO=(t,r,c)=>{const h={min:vu(r),max:nf(r),range:UT(r),value:c,step:xg(r),snap:uB(r),snapStart:dB(r),rounded:ZT(r),hasMinEdge:qT(r),hasMaxEdge:GT(r),minBound:vS(t),maxBound:bB(t),screenRange:of(t)};return gB(h)},gW=(t,r,c)=>{const h=tO(t,r,c);return SS(t,h),h},wB=(t,r)=>{const c=vu(r);SS(t,c)},pW=(t,r)=>{const c=nf(r);SS(t,c)},nO=(t,r,c,h)=>{const w=(t>0?pS:gS)(ch(c),vu(c),nf(c),xg(c,h));return SS(r,w),O.some(w)},CS=t=>(r,c,h)=>nO(t,r,c,h).map(ge),oO=t=>zT(t).map(c=>c.left),bW=(t,r,c,h,b)=>{const S=of(t),E=h.bind(B=>O.some(yB(B,t))).getOr(0),D=b.bind(B=>O.some(yB(B,t))).getOr(S),P={min:vu(r),max:nf(r),range:UT(r),value:c,hasMinEdge:qT(r),hasMaxEdge:GT(r),minBound:vS(t),minOffset:0,maxBound:bB(t),maxOffset:S,centerMinEdge:E,centerMaxEdge:D};return pB(P)},vl=(t,r,c,h,b,w)=>{const S=bW(r,w,c,h,b);return vS(r)-vS(t)+S},vW=(t,r,c,h)=>{const b=ch(c),w=vl(t,h.getSpectrum(t),b,h.getLeftEdge(t),h.getRightEdge(t),c),S=ee(r.element)/2;xn(r.element,"left",w-S+"px")},yW=CS(-1),xB=CS(1),SB=O.none,wW=O.none,xW={"top-left":O.none(),top:O.none(),"top-right":O.none(),right:O.some(hB),"bottom-right":O.none(),bottom:O.none(),"bottom-left":O.none(),left:O.some(uW)};var SW=Object.freeze({__proto__:null,setValueFrom:gW,setToMin:wB,setToMax:pW,findValueOfOffset:tO,getValueFromEvent:oO,findPositionOfValue:vl,setPositionFromValue:vW,onLeft:yW,onRight:xB,onUp:SB,onDown:wW,edgeActions:xW});const kS=(t,r)=>{Hn(t,m1(),{value:r})},sO=(t,r,c)=>{const h={min:wg(r),max:Aa(r),range:WT(r),value:c,step:xg(r),snap:uB(r),snapStart:dB(r),rounded:ZT(r),hasMinEdge:KT(r),hasMaxEdge:fB(r),minBound:yS(t),maxBound:wS(t),screenRange:vB(t)};return gB(h)},CW=(t,r,c)=>{const h=sO(t,r,c);return kS(t,h),h},kW=(t,r)=>{const c=wg(r);kS(t,c)},CB=(t,r)=>{const c=Aa(r);kS(t,c)},AW=(t,r,c,h)=>{const w=(t>0?pS:gS)(ch(c),wg(c),Aa(c),xg(c,h));return kS(r,w),O.some(w)},kB=t=>(r,c,h)=>AW(t,r,c,h).map(ge),EW=t=>zT(t).map(c=>c.top),AB=(t,r,c,h,b)=>{const S=vB(t),E=h.bind(B=>O.some(xS(B,t))).getOr(0),D=b.bind(B=>O.some(xS(B,t))).getOr(S),P={min:wg(r),max:Aa(r),range:WT(r),value:c,hasMinEdge:KT(r),hasMaxEdge:fB(r),minBound:yS(t),minOffset:0,maxBound:wS(t),maxOffset:S,centerMinEdge:E,centerMaxEdge:D};return pB(P)},sv=(t,r,c,h,b,w)=>{const S=AB(r,w,c,h,b);return yS(r)-yS(t)+S},TW=(t,r,c,h)=>{const b=ch(c),w=sv(t,h.getSpectrum(t),b,h.getTopEdge(t),h.getBottomEdge(t),c),S=ir(r.element)/2;xn(r.element,"top",w-S+"px")},rO=O.none,b1=O.none,EB=kB(-1),TB=kB(1),OB={"top-left":O.none(),top:O.some(oW),"top-right":O.none(),right:O.none(),"bottom-right":O.none(),bottom:O.some(aW),"bottom-left":O.none(),left:O.none()};var OW=Object.freeze({__proto__:null,setValueFrom:CW,setToMin:kW,setToMax:CB,findValueOfOffset:sO,getValueFromEvent:EW,findPositionOfValue:sv,setPositionFromValue:TW,onLeft:rO,onRight:b1,onUp:EB,onDown:TB,edgeActions:OB});const AS=(t,r)=>{Hn(t,m1(),{value:r})},Sg=(t,r)=>({x:t,y:r}),DW=(t,r,c)=>{const h=tO(t,r,c.left),b=sO(t,r,c.top),w=Sg(h,b);return AS(t,w),w},_W=(t,r,c,h,b)=>{const w=t>0?pS:gS,S=r?ch(h).x:w(ch(h).x,vu(h),nf(h),xg(h,b)),E=r?w(ch(h).y,wg(h),Aa(h),xg(h,b)):ch(h).y;return AS(c,Sg(S,E)),O.some(S)},rv=(t,r)=>(c,h,b)=>_W(t,r,c,h,b).map(ge),DB=(t,r)=>{const c=vu(r),h=wg(r);AS(t,Sg(c,h))},iO=(t,r)=>{const c=nf(r),h=Aa(r);AS(t,Sg(c,h))},_B=t=>zT(t),el=(t,r,c,h)=>{const b=ch(c),w=vl(t,h.getSpectrum(t),b.x,h.getLeftEdge(t),h.getRightEdge(t),c),S=sv(t,h.getSpectrum(t),b.y,h.getTopEdge(t),h.getBottomEdge(t),c),E=ee(r.element)/2,D=ir(r.element)/2;xn(r.element,"left",w-E+"px"),xn(r.element,"top",S-D+"px")},MB=rv(-1,!1),MW=rv(1,!1),RW=rv(-1,!0),RB=rv(1,!0),PW={"top-left":O.some(nW),top:O.some(YT),"top-right":O.some(sW),right:O.some(rW),"bottom-right":O.some(iW),bottom:O.some(lW),"bottom-left":O.some(cW),left:O.some(dW)};var NW=Object.freeze({__proto__:null,setValueFrom:DW,setToMin:DB,setToMax:iO,getValueFromEvent:_B,setPositionFromValue:el,onLeft:MB,onRight:MW,onUp:RW,onDown:RB,edgeActions:PW});const BW=[et("stepSize",1),et("speedMultiplier",10),et("onChange",Z),et("onChoose",Z),et("onInit",Z),et("onDragStart",Z),et("onDragEnd",Z),et("snapToGrid",!1),et("rounded",!0),Ds("snapStart"),tc("model",ms("mode",{x:[et("minX",0),et("maxX",100),Qr("value",t=>Zn(t.mode.minX)),Pt("getInitialValue"),qs("manager",SW)],y:[et("minY",0),et("maxY",100),Qr("value",t=>Zn(t.mode.minY)),Pt("getInitialValue"),qs("manager",OW)],xy:[et("minX",0),et("maxX",100),et("minY",0),et("maxY",100),Qr("value",t=>Zn({x:t.mode.minX,y:t.mode.minY})),Pt("getInitialValue"),qs("manager",NW)]})),yi("sliderBehaviours",[Fn,ln]),Qr("mouseIsDown",()=>Zn(!1))],Qi=ka({name:"Slider",configFields:BW,partFields:YU,factory:(t,r,c,h)=>{const b=Et=>Xf(Et,t,"thumb"),w=Et=>Xf(Et,t,"spectrum"),S=Et=>Gs(Et,t,"left-edge"),E=Et=>Gs(Et,t,"right-edge"),D=Et=>Gs(Et,t,"top-edge"),P=Et=>Gs(Et,t,"bottom-edge"),B=t.model,H=B.manager,j=(Et,St)=>{H.setPositionFromValue(Et,St,t,{getLeftEdge:S,getRightEdge:E,getTopEdge:D,getBottomEdge:P,getSpectrum:w})},Y=(Et,St)=>{B.value.set(St);const jt=b(Et);j(Et,jt)},oe=(Et,St)=>{Y(Et,St);const jt=b(Et);return t.onChange(Et,jt,St),O.some(!0)},Ce=Et=>{H.setToMin(Et,t)},Qe=Et=>{H.setToMax(Et,t)},Le=Et=>{const St=()=>{Gs(Et,t,"thumb").each(Jt=>{const Co=B.value.get();t.onChoose(Et,Jt,Co)})},jt=t.mouseIsDown.get();t.mouseIsDown.set(!1),jt&&St()},_e=(Et,St)=>{St.stop(),t.mouseIsDown.set(!0),t.onDragStart(Et,b(Et))},Xe=(Et,St)=>{St.stop(),t.onDragEnd(Et,b(Et)),Le(Et)},Ft=Et=>{Gs(Et,t,"spectrum").map(Fn.focusIn)};return{uid:t.uid,dom:t.dom,components:r,behaviours:Mi(t.sliderBehaviours,[Fn.config({mode:"special",focusIn:Ft}),ln.config({store:{mode:"manual",getValue:Et=>B.value.get(),setValue:Y}}),Pl.config({channels:{[eA()]:{onReceive:Le}}})]),events:ar([_t(m1(),(Et,St)=>{oe(Et,St.event.value)}),nr((Et,St)=>{const jt=B.getInitialValue();B.value.set(jt);const Jt=b(Et);j(Et,Jt);const Co=w(Et);t.onInit(Et,Jt,Co,B.value.get())}),_t(Pf(),_e),_t(Hm(),Xe),_t(bi(),(Et,St)=>{Ft(Et),_e(Et,St)}),_t(H2(),Xe)]),apis:{resetToMin:Ce,resetToMax:Qe,setValue:Y,refresh:j},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,r,c)=>{t.setValue(r,c)},resetToMin:(t,r)=>{t.resetToMin(r)},resetToMax:(t,r)=>{t.resetToMax(r)},refresh:(t,r)=>{t.refresh(r)}}}),iv=pn("rgb-hex-update"),aO=pn("slider-update"),av=pn("palette-update"),lO=(t,r)=>{const c=Qi.parts.spectrum({dom:{tag:"div",classes:[r("hue-slider-spectrum")],attributes:{role:"presentation"}}}),h=Qi.parts.thumb({dom:{tag:"div",classes:[r("hue-slider-thumb")],attributes:{role:"presentation"}}});return Qi.sketch({dom:{tag:"div",classes:[r("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:K(0)},components:[c,h],sliderBehaviours:Kt([Xn.config({})]),onChange:(b,w,S)=>{sn(b.element,"aria-valuenow",Math.floor(360-S*3.6)),Hn(b,aO,{value:S})}})},PB="form",IW=[yi("formBehaviours",[ln])],NB=t=>"<alloy.field."+t+">",LW=t=>{const r=(()=>{const w=[];return{field:(E,D)=>(w.push(E),bA(PB,NB(E),D)),record:K(w)}})(),c=t(r),h=r.record(),b=ce(h,w=>Ca({name:w,pname:NB(w)}));return SA(PB,IW,b,HW,c)},$W=(t,r)=>t.fold(()=>Eo.error(r),Eo.value),HW=(t,r)=>({uid:t.uid,dom:t.dom,components:r,behaviours:Mi(t.formBehaviours,[ln.config({store:{mode:"manual",getValue:c=>{const h=f4(c,t);return pt(h,(b,w)=>b().bind(S=>{const E=Zo.getCurrent(S);return $W(E,new Error(`Cannot find a current component to extract the value from for form part '${w}': `+Zm(S.element)))}).map(ln.getValue))},setValue:(c,h)=>{Ye(h,(b,w)=>{Gs(c,t,w).each(S=>{Zo.getCurrent(S).each(E=>{ln.setValue(E,b)})})})}}})]),apis:{getField:(c,h)=>Gs(c,t,h).bind(Zo.getCurrent)}}),v1={getField:pp((t,r,c)=>t.getField(r,c)),sketch:LW},cO=pn("valid-input"),BB=pn("invalid-input"),ud=pn("validating-input"),y1="colorcustom.rgb.",VW=(t,r,c,h)=>{const b=(j,Y)=>wc.config({invalidClass:r("invalid"),notify:{onValidate:oe=>{Hn(oe,ud,{type:j})},onValid:oe=>{Hn(oe,cO,{type:j,value:ln.getValue(oe)})},onInvalid:oe=>{Hn(oe,BB,{type:j,value:ln.getValue(oe)})}},validator:{validate:oe=>{const Ce=ln.getValue(oe),Qe=Y(Ce)?Eo.value(!0):Eo.error(t("aria.input.invalid"));return da.pure(Qe)},validateOnLoad:!1}}),w=(j,Y,oe,Ce,Qe)=>{const Le=t(y1+"range"),_e=Es.parts.label({dom:{tag:"label",attributes:{"aria-label":Ce}},components:[Lr(oe)]}),Xe=Es.parts.field({data:Qe,factory:gg,inputAttributes:ie({type:"text"},Y==="hex"?{"aria-live":"polite"}:{}),inputClasses:[r("textfield")],inputBehaviours:Kt([b(Y,j),lr.config({})]),onSetValue:jt=>{wc.isInvalid(jt)&&wc.run(jt).get(Z)}}),Ft=[_e,Xe],Et=Y!=="hex"?[Es.parts["aria-descriptor"]({text:Le})]:[],St=Ft.concat(Et);return{dom:{tag:"div",attributes:{role:"presentation"}},components:St}},S=(j,Y)=>{const oe=d1(Y);return v1.getField(j,"hex").each(Ce=>{Xn.isFocused(Ce)||ln.setValue(j,{hex:oe.value})}),oe},E=(j,Y)=>{const oe=Y.red,Ce=Y.green,Qe=Y.blue;ln.setValue(j,{red:oe,green:Ce,blue:Qe})},D=As({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),P=(j,Y)=>{D.getOpt(j).each(oe=>{xn(oe.element,"background-color","#"+Y.value)})};return Fl({factory:()=>{const j={red:Zn(O.some(255)),green:Zn(O.some(255)),blue:Zn(O.some(255)),hex:Zn(O.some("ffffff"))},Y=(Jn,xs)=>{const zn=jb(xs);E(Jn,zn),Le(zn)},oe=Jn=>j[Jn].get(),Ce=(Jn,xs)=>{j[Jn].set(xs)},Qe=()=>oe("red").bind(Jn=>oe("green").bind(xs=>oe("blue").map(zn=>jh(Jn,xs,zn,1)))),Le=Jn=>{const xs=Jn.red,zn=Jn.green,Jo=Jn.blue;Ce("red",O.some(xs)),Ce("green",O.some(zn)),Ce("blue",O.some(Jo))},_e=(Jn,xs)=>{const zn=xs.event;zn.type!=="hex"?Ce(zn.type,O.none()):h(Jn)},Xe=(Jn,xs)=>{c(Jn);const zn=JP(xs);Ce("hex",O.some(zn.value));const Jo=jb(zn);E(Jn,Jo),Le(Jo),Hn(Jn,iv,{hex:zn}),P(Jn,zn)},Ft=(Jn,xs,zn)=>{const Jo=parseInt(zn,10);Ce(xs,O.some(Jo)),Qe().each(Qt=>{const yn=S(Jn,Qt);Hn(Jn,iv,{hex:yn}),P(Jn,yn)})},Et=Jn=>Jn.type==="hex",St=(Jn,xs)=>{const zn=xs.event;Et(zn)?Xe(Jn,zn.value):Ft(Jn,zn.type,zn.value)},jt=Jn=>({label:t(y1+Jn+".label"),description:t(y1+Jn+".description")}),Jt=jt("red"),Co=jt("green"),fn=jt("blue"),ro=jt("hex");return Ls(v1.sketch(Jn=>({dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Jn.field("red",Es.sketch(w(lT,"red",Jt.label,Jt.description,255))),Jn.field("green",Es.sketch(w(lT,"green",Co.label,Co.description,255))),Jn.field("blue",Es.sketch(w(lT,"blue",fn.label,fn.description,255))),Jn.field("hex",Es.sketch(w(tN,"hex",ro.label,ro.description,"ffffff"))),D.asSpec()],formBehaviours:Kt([wc.config({invalidClass:r("form-invalid")}),So("rgb-form-events",[_t(cO,St),_t(BB,_e),_t(ud,_e)])])})),{apis:{updateHex:(Jn,xs)=>{ln.setValue(Jn,{hex:xs.value}),Y(Jn,xs),P(Jn,xs)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(j,Y,oe)=>{j.updateHex(Y,oe)}},extraApis:{}})},zW=(t,r)=>{const c=Qi.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[r("sv-palette-spectrum")]}}),h=Qi.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette-thumb")],innerHtml:`<div class=${r("sv-palette-inner-thumb")} role="presentation"></div>`}}),b=(P,B)=>{const{width:H,height:j}=P,Y=P.getContext("2d");if(Y===null)return;Y.fillStyle=B,Y.fillRect(0,0,H,j);const oe=Y.createLinearGradient(0,0,H,0);oe.addColorStop(0,"rgba(255,255,255,1)"),oe.addColorStop(1,"rgba(255,255,255,0)"),Y.fillStyle=oe,Y.fillRect(0,0,H,j);const Ce=Y.createLinearGradient(0,0,0,j);Ce.addColorStop(0,"rgba(0,0,0,0)"),Ce.addColorStop(1,"rgba(0,0,0,1)"),Y.fillStyle=Ce,Y.fillRect(0,0,H,j)},w=(P,B)=>{const H=P.components()[0].element.dom,j=qb(B,100,100),Y=lN(j);b(H,uT(Y))},S=(P,B)=>{const H=Xx(jb(B));Qi.setValue(P,{x:H.saturation,y:100-H.value}),sn(P.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",H.saturation,H.value]))};return Fl({factory:P=>{const B=K({x:0,y:0}),H=(oe,Ce,Qe)=>{G(Qe)||sn(oe.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(Qe.x),Math.floor(100-Qe.y)])),Hn(oe,av,{value:Qe})},j=(oe,Ce,Qe,Le)=>{b(Qe.element.dom,uT(Fc))},Y=Kt([Zo.config({find:O.some}),Xn.config({})]);return Qi.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[r("sv-palette")]},model:{mode:"xy",getInitialValue:B},rounded:!1,components:[c,h],onChange:H,onInit:j,sliderBehaviours:Y})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(P,B,H)=>{w(B,H)},setThumb:(P,B,H)=>{S(B,H)}},extraApis:{}})},FB=(t,r)=>{const c=b=>{const w=VW(t,r,b.onValidHex,b.onInvalidHex),S=zW(t,r),E=St=>(100-St)/100*360,D=St=>100-St/360*100,P={paletteRgba:Zn(Fc),paletteHue:Zn(0)},B=As(lO(t,r)),H=As(S.sketch({})),j=As(w.sketch({})),Y=(St,jt,Jt)=>{H.getOpt(St).each(Co=>{S.setHue(Co,Jt)})},oe=(St,jt)=>{j.getOpt(St).each(Jt=>{w.updateHex(Jt,jt)})},Ce=(St,jt,Jt)=>{B.getOpt(St).each(Co=>{Qi.setValue(Co,D(Jt))})},Qe=(St,jt)=>{H.getOpt(St).each(Jt=>{S.setThumb(Jt,jt)})},Le=(St,jt)=>{const Jt=jb(St);P.paletteRgba.set(Jt),P.paletteHue.set(jt)},_e=(St,jt,Jt,Co)=>{Le(jt,Jt),Ze(Co,fn=>{fn(St,jt,Jt)})},Xe=()=>{const St=[oe];return(jt,Jt)=>{const Co=Jt.event.value,fn=P.paletteHue.get(),ro=qb(fn,Co.x,100-Co.y),Jn=pN(ro);_e(jt,Jn,fn,St)}},Ft=()=>{const St=[Y,oe];return(jt,Jt)=>{const Co=E(Jt.event.value),fn=P.paletteRgba.get(),ro=Xx(fn),Jn=qb(Co,ro.saturation,ro.value),xs=pN(Jn);_e(jt,xs,Co,St)}},Et=()=>{const St=[Y,Ce,Qe];return(jt,Jt)=>{const Co=Jt.event.hex,fn=Sz(Co);_e(jt,Co,fn.hue,St)}};return{uid:b.uid,dom:b.dom,components:[H.asSpec(),B.asSpec(),j.asSpec()],behaviours:Kt([So("colour-picker-events",[_t(iv,Et()),_t(av,Xe()),_t(aO,Ft())]),Zo.config({find:St=>j.getOpt(St)}),Fn.config({mode:"acyclic"})])}};return Fl({name:"ColourPicker",configFields:[Pt("dom"),et("onValidHex",Z),et("onInvalidHex",Z)],factory:c})},yl={self:()=>Zo.config({find:O.some}),memento:t=>Zo.config({find:t.getOpt}),childAt:t=>Zo.config({find:r=>cl(r.element,t).bind(c=>r.getSystem().getByDom(c).toOptional())})},lv=Ln([et("preprocess",Ie),et("postprocess",Ie)]),LB=(t,r)=>{const c=Ka("RepresentingConfigs.memento processors",lv,r);return ln.config({store:{mode:"manual",getValue:h=>{const b=t.get(h),w=ln.getValue(b);return c.postprocess(w)},setValue:(h,b)=>{const w=c.preprocess(b),S=t.get(h);ln.setValue(S,w)}}})},Jh=(t,r,c)=>ln.config({store:Ot(ie({mode:"manual"},t.map(h=>({initialValue:h})).getOr({})),{getValue:r,setValue:c})}),dO=(t,r,c)=>Jh(t,h=>r(h.element),(h,b)=>c(h.element,b)),$B=t=>dO(t,X2,hp),ES=t=>ln.config({store:{mode:"memory",initialValue:t}}),WW={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},jW=t=>r=>v(r)?t.translate(WW[r]):t.translate(r),ZW=(t,r,c)=>{const h=D=>"tox-"+D,b=FB(jW(r),h),w=D=>{Hn(D,tf,{name:"hex-valid",value:!0})},S=D=>{Hn(D,tf,{name:"hex-valid",value:!1})},E=As(b.sketch({dom:{tag:"div",classes:[h("color-picker-container")],attributes:{role:"presentation"}},onValidHex:w,onInvalidHex:S}));return{dom:{tag:"div"},components:[E.asSpec()],behaviours:Kt([Jh(c,D=>{const P=E.get(D);return Zo.getCurrent(P).bind(j=>ln.getValue(j).hex).map(j=>"#"+tn(j,"#")).getOr("")},(D,P)=>{const B=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,H=O.from(B.exec(P)).bind(oe=>ot(oe,1)),j=E.get(D);Zo.getCurrent(j).fold(()=>{},oe=>{ln.setValue(oe,{hex:H.getOr("")}),v1.getField(oe,"hex").each(Ce=>{ns(Ce,Vm())})})}),yl.self()])}};var qW=tinymce.util.Tools.resolve("tinymce.Resource");const HB=t=>xo(t,"init"),VB=t=>{const r=sr(),c=As({dom:{tag:t.tag}}),h=sr();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Kt([So("custom-editor-events",[nr(b=>{c.getOpt(b).each(w=>{(HB(t)?t.init(w.element.dom):qW.load(t.scriptId,t.scriptUrl).then(S=>S(w.element.dom,t.settings))).then(S=>{h.on(E=>{S.setValue(E)}),h.clear(),r.set(S)})})})]),Jh(O.none(),()=>r.get().fold(()=>h.get().getOr(""),b=>b.getValue()),(b,w)=>{r.get().fold(()=>h.set(w),S=>S.setValue(w))}),yl.self()]),components:[c.asSpec()]}};var uh=tinymce.util.Tools.resolve("tinymce.util.Tools");const zB=(t,r)=>{const c=uh.explode(r.getOption("images_file_types")),h=b=>yt(c,w=>Hr(b.name.toLowerCase(),`.${w.toLowerCase()}`));return cn(On(t),h)},GW=(t,r,c)=>{const h=(j,Y)=>{Y.stop()},b=j=>(Y,oe)=>{Ze(j,Ce=>{Ce(Y,oe)})},w=(j,Y)=>{var oe;if(!qn.isDisabled(j)){const Ce=Y.event.raw;E(j,(oe=Ce.dataTransfer)===null||oe===void 0?void 0:oe.files)}},S=(j,Y)=>{const oe=Y.event.raw.target;E(j,oe.files)},E=(j,Y)=>{Y&&(ln.setValue(j,zB(Y,r)),Hn(j,bl,{name:t.name}))},D=As({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Kt([So("input-file-events",[If(Oh()),If(Ku())])])}),P=j=>({uid:j.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Kt([ES(c.getOr([])),yl.self(),qn.config({}),No.config({toggleClass:"dragenter",toggleOnExecute:!1}),So("dropzone-events",[_t("dragenter",b([h,No.toggle])),_t("dragleave",b([h,No.toggle])),_t("dragover",h),_t("drop",b([h,w])),_t(cp(),S)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Lr(r.translate("Drop an image here"))]},Ri.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Lr(r.translate("Browse for an image")),D.asSpec()],action:Y=>{D.get(Y).element.dom.click()},buttonBehaviours:Kt([lr.config({}),ni.button(r.isDisabled),ii()])})]}]}),B=t.label.map(j=>Lc(j,r)),H=Es.parts.field({factory:{sketch:P}});return Jb(B,H,["tox-form__group--stretched"],[])},UB=(t,r)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:ce(t.items,r.interpreter)}),cv=(t,r)=>{let c=null,h=null;return{cancel:()=>{R(c)||(clearTimeout(c),c=null,h=null)},throttle:(...S)=>{h=S,R(c)&&(c=setTimeout(()=>{const E=h;c=null,h=null,t.apply(null,E)},r))}}},KW=(t,r)=>{let c=null;return{cancel:()=>{R(c)||(clearTimeout(c),c=null)},throttle:(...w)=>{R(c)&&(c=setTimeout(()=>{c=null,t.apply(null,w)},r))}}},TS=(t,r)=>{let c=null;const h=()=>{R(c)||(clearTimeout(c),c=null)};return{cancel:h,throttle:(...w)=>{h(),c=setTimeout(()=>{c=null,t.apply(null,w)},r)}}},fO=pn("alloy-fake-before-tabstop"),hO=pn("alloy-fake-after-tabstop"),WB=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Kt([Xn.config({ignore:!0}),lr.config({})])}),jB=(t,r)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[WB([fO]),r,WB([hO])],behaviours:Kt([yl.childAt(1)])}),mO=(t,r)=>{Hn(t,Gu(),{raw:{which:9,shiftKey:r}})},YW=(t,r)=>{const c=r.element;vi(c,fO)?mO(t,!0):vi(c,hO)&&mO(t,!1)},w1=t=>Yb(t,["."+fO,"."+hO].join(","),ne),x1=pn("update-dialog"),sf=pn("update-title"),OS=pn("update-body"),gO=pn("update-footer"),pO=pn("body-send-message"),S1=pn("dialog-focus-shifted"),DS=eu().browser,Qh=DS.isSafari(),ZB=DS.isFirefox(),bO=Qh||ZB,XW=DS.isChromium(),JW=({scrollTop:t,scrollHeight:r,clientHeight:c})=>Math.ceil(t)+c>=r,qB=(t,r)=>t.scrollTo(0,r==="bottom"?99999999:r),QW=(t,r)=>{const c=t.body;return O.from(!/^<!DOCTYPE (html|HTML)/.test(r)&&(!XW&&!Qh||X(c)&&(c.scrollTop!==0||Math.abs(c.scrollHeight-c.clientHeight)>1))?c:t.documentElement)},GB=(t,r,c)=>{const h=t.dom;O.from(h.contentDocument).fold(c,b=>{let w=0;const S=QW(b,r).map(D=>(w=D.scrollTop,D)).forall(JW),E=()=>{const D=h.contentWindow;X(D)&&(S?qB(D,"bottom"):!S&&bO&&w!==0&&qB(D,w))};Qh&&h.addEventListener("load",E,{once:!0}),b.open(),b.write(r),b.close(),Qh||E()})},KB=Bn(bO,Qh?500:200).map(t=>cv(GB,t)),tj=(t,r)=>{const c=Zn(t.getOr(""));return{getValue:h=>c.get(),setValue:(h,b)=>{if(c.get()!==b){const w=h.element,S=()=>sn(w,"srcdoc",b);r?KB.fold(K(GB),E=>E.throttle)(w,b,S):S()}c.set(b)}}},nj=(t,r,c)=>{const h="tox-dialog__iframe",b=t.transparent?[]:[`${h}--opaque`],w=t.border?["tox-navobj-bordered"]:[],S=ie(ie(ie({},t.label.map(H=>({title:H})).getOr({})),c.map(H=>({srcdoc:H})).getOr({})),t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}),E=tj(c,t.streamContent),D=t.label.map(H=>Lc(H,r)),P=H=>jB(O.from(w),{uid:H.uid,dom:{tag:"iframe",attributes:S,classes:[h,...b]},behaviours:Kt([lr.config({}),Xn.config({}),Jh(c,E.getValue,E.setValue),Pl.config({channels:{[S1]:{onReceive:(j,Y)=>{Y.newFocus.each(oe=>{ga(j.element).each(Ce=>{(bs(j.element,oe)?ti:wr)(Ce,"tox-navobj-bordered-focus")})})}}}})])}),B=Es.parts.field({factory:{sketch:P}});return Jb(D,B,["tox-form__group--stretched"],[])},oj=t=>new Promise((r,c)=>{const h=()=>{w(),r(t)},b=[Ja(t,"load",h),Ja(t,"error",()=>{w(),c("Unable to load data from image: "+t.dom.src)})],w=()=>Ze(b,S=>S.unbind());t.dom.complete&&h()}),_S=(t,r,c,h,b)=>{const w=c*b,S=h*b,E=Math.max(0,t/2-w/2),D=Math.max(0,r/2-S/2);return{left:E.toString()+"px",top:D.toString()+"px",width:w.toString()+"px",height:S.toString()+"px"}},sj=(t,r,c)=>{const h=ee(t),b=ir(t);return Math.min(h/r,b/c,1)},rj=(t,r)=>{const c=Zn(r.getOr({url:""})),h=As({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:r.map(D=>({src:D.url})).getOr({})}}),b=As({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[h.asSpec()]}),w=(D,P)=>{const B={url:P.url};P.zoom.each(j=>B.zoom=j),P.cachedWidth.each(j=>B.cachedWidth=j),P.cachedHeight.each(j=>B.cachedHeight=j),c.set(B);const H=()=>{const{cachedWidth:j,cachedHeight:Y,zoom:oe}=B;if(!$(j)&&!$(Y)){if($(oe)){const Qe=sj(D.element,j,Y);B.zoom=Qe}const Ce=_S(ee(D.element),ir(D.element),j,Y,B.zoom);b.getOpt(D).each(Qe=>{si(Qe.element,Ce)})}};h.getOpt(D).each(j=>{const Y=j.element;P.url!==Vr(Y,"src")&&(sn(Y,"src",P.url),wr(D.element,"tox-imagepreview__loaded")),H(),oj(Y).then(oe=>{D.getSystem().isConnected()&&(ti(D.element,"tox-imagepreview__loaded"),B.cachedWidth=oe.dom.naturalWidth,B.cachedHeight=oe.dom.naturalHeight,H())})})},S={};t.height.each(D=>S.height=D);const E=r.map(D=>({url:D.url,zoom:O.from(D.zoom),cachedWidth:O.from(D.cachedWidth),cachedHeight:O.from(D.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:S,attributes:{role:"presentation"}},components:[b.asSpec()],behaviours:Kt([yl.self(),Jh(E,()=>c.get(),w)])}},YB=(t,r)=>{const c="tox-label",h=t.align==="center"?[`${c}--center`]:[],b=t.align==="end"?[`${c}--end`]:[],w={dom:{tag:"label",classes:[c,...h,...b]},components:[Lr(r.providers.translate(t.label))]},S=ce(t.items,r.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[w,...S],behaviours:Kt([yl.self(),po.config({}),$B(O.none()),Fn.config({mode:"acyclic"})])}},vO=pn("toolbar.button.execute"),ij=t=>$f((r,c)=>{yc(t,r)(h=>{Hn(r,vO,{buttonApi:h}),t.onAction(h)})}),Cg=pn("common-button-display-events"),MS={[ac()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Yu()]:["toolbar-button-events",Cg],[bi()]:["focusing","alloy.base.behaviour",Cg]},yO=t=>xn(t.element,"width",er(t.element,"width")),wO=(t,r,c)=>mu(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:c},r),xO=(t,r)=>wO(t,r,[]),em=(t,r)=>wO(t,r,[po.config({})]),XB=(t,r,c)=>({dom:{tag:"span",classes:[`${r}__select-label`]},components:[Lr(c.translate(t))],behaviours:Kt([po.config({})])}),xc=pn("update-menu-text"),tm=pn("update-menu-icon"),SO=(t,r,c)=>{const h=Zn(Z),b=t.text.map(j=>As(XB(j,r,c.providers))),w=t.icon.map(j=>As(em(j,c.providers.icons))),S=(j,Y)=>{const oe=ln.getValue(j);return Xn.focus(oe),Hn(oe,"keydown",{raw:Y.event.raw}),Ic.close(oe),O.some(!0)},E=t.role.fold(()=>({}),j=>({role:j})),D=t.tooltip.fold(()=>({}),j=>{const Y=c.providers.translate(j);return{title:Y,"aria-label":Y}}),P=mu("chevron-down",{tag:"div",classes:[`${r}__select-chevron`]},c.providers.icons),B=pn("common-button-display-events");return As(Ic.sketch(Ot(ie(ie({},t.uid?{uid:t.uid}:{}),E),{dom:{tag:"button",classes:[r,`${r}--select`].concat(ce(t.classes,j=>`${r}--${j}`)),attributes:ie({},D)},components:l1([w.map(j=>j.asSpec()),b.map(j=>j.asSpec()),O.some(P)]),matchWidth:!0,useMinWidth:!0,onOpen:(j,Y,oe)=>{t.searchable&&cU(oe)},dropdownBehaviours:Kt([...t.dropdownBehaviours,ni.button(()=>t.disabled||c.providers.isDisabled()),ii(),tv.config({}),po.config({}),So("dropdown-events",[Wh(t,h),Jd(t,h)]),So(B,[nr((j,Y)=>yO(j))]),So("menubutton-update-display-text",[_t(xc,(j,Y)=>{b.bind(oe=>oe.getOpt(j)).each(oe=>{po.set(oe,[Lr(c.providers.translate(Y.event.text))])})}),_t(tm,(j,Y)=>{w.bind(oe=>oe.getOpt(j)).each(oe=>{po.set(oe,[em(Y.event.icon,c.providers.icons)])})})])]),eventOrder:Ls(MS,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Yu()]:["toolbar-button-events","dropdown-events",B]}),sandboxBehaviours:Kt([Fn.config({mode:"special",onLeft:S,onRight:S}),So("dropdown-sandbox-events",[_t(fP,(j,Y)=>{sU(j),Y.stop()}),_t(hP,(j,Y)=>{rU(j,Y),Y.stop()})])]),lazySink:c.getSink,toggleClass:`${r}--active`,parts:{menu:Ot(ie({},t1(!1,t.columns,t.presets)),{fakeFocus:t.searchable,onHighlightItem:BT,onCollapseMenu:(j,Y,oe)=>{gs.getHighlighted(oe).each(Ce=>{BT(j,oe,Ce)})},onDehighlightItem:lU})},getAnchorOverrides:()=>({maxHeightFunction:(j,Y)=>{b3()(j,Y-10)}}),fetch:j=>da.nu(Ue(t.fetch,j))}))).asSpec()},aj=t=>v(t),JB=t=>t.type==="separator",lj=t=>xo(t,"getSubmenuItems"),QB={type:"separator"},cj=(t,r)=>{const c=Do(t,(h,b)=>aj(b)?b===""?h:b==="|"?h.length>0&&!JB(h[h.length-1])?h.concat([QB]):h:xo(r,b.toLowerCase())?h.concat([r[b.toLowerCase()]]):h:h.concat([b]),[]);return c.length>0&&JB(c[c.length-1])&&c.pop(),c},eF=(t,r)=>{const c=t.getSubmenuItems(),h=tF(c,r),b=Ls(h.menus,{[t.value]:h.items}),w=Ls(h.expansions,{[t.value]:t.value});return{item:t,menus:b,expansions:w}},uj=t=>{const r=$t(t,"value").getOrThunk(()=>pn("generated-menu-item"));return Ls({value:r},t)},tF=(t,r)=>{const c=cj(v(t)?t.split(" "):t,r);return no(c,(h,b)=>{if(lj(b)){const w=uj(b),S=eF(w,r);return{menus:Ls(h.menus,S.menus),items:[S.item,...h.items],expansions:Ls(h.expansions,S.expansions)}}else return Ot(ie({},h),{items:[b,...h.items]})},{menus:{},expansions:{},items:[]})},dj=t=>t.search.fold(()=>({searchMode:"no-search"}),r=>({searchMode:"search-with-field",placeholder:r.placeholder})),fj=t=>t.search.fold(()=>({searchMode:"no-search"}),r=>({searchMode:"search-with-results"})),C1=(t,r,c,h)=>{const b=pn("primary-menu"),w=tF(t,c.shared.providers.menuItems());if(w.items.length===0)return O.none();const S=dj(h),E=$N(b,w.items,r,c,h.isHorizontalMenu,S),D=fj(h),P=pt(w.menus,(H,j)=>$N(j,H,r,c,!1,D)),B=Ls(P,ic(b,E));return O.from(zh.tieredData(b,B,w.expansions))},CO=t=>!xo(t,"items"),nF="data-value",oF=(t,r,c,h)=>ce(c,b=>CO(b)?{type:"togglemenuitem",text:b.text,value:b.value,active:b.value===h,onAction:()=>{ln.setValue(t,b.value),Hn(t,bl,{name:r}),Xn.focus(t)}}:{type:"nestedmenuitem",text:b.text,getSubmenuItems:()=>oF(t,r,b.items,h)}),kO=(t,r)=>ho(t,c=>CO(c)?Bn(c.value===r,c):kO(c.items,r)),AO=(t,r,c)=>{const h=r.shared.providers,b=c.bind(D=>kO(t.items,D)).orThunk(()=>en(t.items).filter(CO)),w=t.label.map(D=>Lc(D,h)),S=Es.parts.field({dom:{},factory:{sketch:D=>SO({uid:D.uid,text:b.map(P=>P.text),icon:O.none(),tooltip:t.label,role:O.none(),fetch:(P,B)=>{const H=oF(P,t.name,t.items,ln.getValue(P));B(C1(H,ad.CLOSE_ON_EXECUTE,r,{isHorizontalMenu:!1,search:O.none()}))},onSetup:K(Z),getApi:K({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[lr.config({}),Jh(b.map(P=>P.value),P=>Vr(P.element,nF),(P,B)=>{kO(t.items,B).each(H=>{sn(P.element,nF,H.value),Hn(P,xc,{text:H.text})})})]},"tox-listbox",r.shared)}}),E={dom:{tag:"div",classes:["tox-listboxfield"]},components:[S]};return Es.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:tt([w.toArray(),[E]]),fieldBehaviours:Kt([qn.config({disabled:K(!t.enabled),onDisabled:D=>{Es.getField(D).each(qn.disable)},onEnabled:D=>{Es.getField(D).each(qn.enable)}})])})},hj=(t,r)=>({dom:{tag:"div",classes:t.classes},components:ce(t.items,r.shared.interpreter)}),mj=(t,r)=>{const c=ce(t.options,b=>({dom:{tag:"option",value:b.value,innerHtml:b.text}})),h=t.data.map(b=>ic("initialValue",b)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:c,behaviours:Mi(t.selectBehaviours,[Xn.config({}),ln.config({store:ie({mode:"manual",getValue:b=>Id(b.element),setValue:(b,w)=>{const S=en(t.options);Je(t.options,D=>D.value===w).isSome()?yp(b.element,w):b.element.dom.selectedIndex===-1&&w===""&&S.each(D=>yp(b.element,D.value))}},h)})])}},gj=Fl({name:"HtmlSelect",configFields:[Pt("options"),yi("selectBehaviours",[Xn,ln]),et("selectClasses",[]),et("selectAttributes",{}),Ds("data")],factory:mj}),uv=(t,r,c)=>{const h=ce(t.items,D=>({text:r.translate(D.text),value:D.value})),b=t.label.map(D=>Lc(D,r)),w=Es.parts.field(Ot(ie({dom:{}},c.map(D=>({data:D})).getOr({})),{selectAttributes:{size:t.size},options:h,factory:gj,selectBehaviours:Kt([qn.config({disabled:()=>!t.enabled||r.isDisabled()}),lr.config({}),So("selectbox-change",[_t(cp(),(D,P)=>{Hn(D,bl,{name:t.name})})])])})),S=t.size>1?O.none():O.some(mu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},r.icons)),E={dom:{tag:"div",classes:["tox-selectfield"]},components:tt([[w],S.toArray()])};return Es.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:tt([b.toArray(),[E]]),fieldBehaviours:Kt([qn.config({disabled:()=>!t.enabled||r.isDisabled(),onDisabled:D=>{Es.getField(D).each(qn.disable)},onEnabled:D=>{Es.getField(D).each(qn.enable)}}),ii()])})},EO=K([et("field1Name","field1"),et("field2Name","field2"),ed("onLockedChange"),Ph(["lockClass"]),et("locked",!1),cu.field("coupledFieldBehaviours",[Zo,ln])]),pj=(t,r,c)=>Gs(t,r,c).bind(Zo.getCurrent),sF=(t,r)=>Ca({factory:Es,name:t,overrides:c=>({fieldBehaviours:Kt([So("coupled-input-behaviour",[_t(Vm(),h=>{pj(h,c,r).each(b=>{Gs(h,c,"lock").each(w=>{No.isOn(w)&&c.onLockedChange(h,b,w)})})})])])})}),TO=K([sF("field1","field2"),sF("field2","field1"),Ca({factory:Ri,schema:[Pt("dom")],name:"lock",overrides:t=>({buttonBehaviours:Kt([No.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),bj=(t,r,c,h)=>({uid:t.uid,dom:t.dom,components:r,behaviours:cu.augment(t.coupledFieldBehaviours,[Zo.config({find:O.some}),ln.config({store:{mode:"manual",getValue:b=>{const w=ng(b,t,["field1","field2"]);return{[t.field1Name]:ln.getValue(w.field1()),[t.field2Name]:ln.getValue(w.field2())}},setValue:(b,w)=>{const S=ng(b,t,["field1","field2"]);Qs(w,t.field1Name)&&ln.setValue(S.field1(),w[t.field1Name]),Qs(w,t.field2Name)&&ln.setValue(S.field2(),w[t.field2Name])}}})]),apis:{getField1:b=>Gs(b,t,"field1"),getField2:b=>Gs(b,t,"field2"),getLock:b=>Gs(b,t,"lock")}}),wl=ka({name:"FormCoupledInputs",configFields:EO(),partFields:TO(),factory:bj,apis:{getField1:(t,r)=>t.getField1(r),getField2:(t,r)=>t.getField2(r),getLock:(t,r)=>t.getLock(r)}}),rF=t=>{const r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},c=b=>b in r?r[b]:1;let h=t.value.toFixed(c(t.unit));return h.indexOf(".")!==-1&&(h=h.replace(/\.?0*$/,"")),h+t.unit},OO=t=>{const c=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(c!==null){const h=parseFloat(c[1]),b=c[2];return Eo.value({value:h,unit:b})}else return Eo.error(t)},iF=(t,r)=>{const c={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},h=b=>xo(c,b);return t.unit===r?O.some(t.value):h(t.unit)&&h(r)?c[t.unit]===c[r]?O.some(t.value):O.some(t.value/c[t.unit]*c[r]):O.none()},RS=t=>O.none(),aF=(t,r)=>c=>iF(c,r).map(h=>({value:h*t,unit:r})),vj=(t,r)=>{const c=OO(t).toOptional(),h=OO(r).toOptional();return Cr(c,h,(b,w)=>iF(b,w.unit).map(S=>w.value/S).map(S=>aF(S,w.unit)).getOr(RS)).getOr(RS)},lF=(t,r)=>{let c=RS;const h=pn("ratio-event"),b=H=>mu(H,{tag:"span",classes:["tox-icon","tox-lock-icon__"+H]},r.icons),w=wl.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:r.translate(t.label.getOr("Constrain proportions"))}},components:[b("lock"),b("unlock")],buttonBehaviours:Kt([qn.config({disabled:()=>!t.enabled||r.isDisabled()}),ii(),lr.config({})])}),S=H=>({dom:{tag:"div",classes:["tox-form__group"]},components:H}),E=H=>Es.parts.field({factory:gg,inputClasses:["tox-textfield"],inputBehaviours:Kt([qn.config({disabled:()=>!t.enabled||r.isDisabled()}),ii(),lr.config({}),So("size-input-events",[_t(Bf(),(j,Y)=>{Hn(j,h,{isField1:H})}),_t(cp(),(j,Y)=>{Hn(j,bl,{name:t.name})})])]),selectOnFocus:!1}),D=H=>({dom:{tag:"label",classes:["tox-label"]},components:[Lr(r.translate(H))]}),P=wl.parts.field1(S([Es.parts.label(D("Width")),E(!0)])),B=wl.parts.field2(S([Es.parts.label(D("Height")),E(!1)]));return wl.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[P,B,S([D(x7),w])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(H,j,Y)=>{OO(ln.getValue(H)).each(oe=>{c(oe).each(Ce=>{ln.setValue(j,rF(Ce))})})},coupledFieldBehaviours:Kt([qn.config({disabled:()=>!t.enabled||r.isDisabled(),onDisabled:H=>{wl.getField1(H).bind(Es.getField).each(qn.disable),wl.getField2(H).bind(Es.getField).each(qn.disable),wl.getLock(H).each(qn.disable)},onEnabled:H=>{wl.getField1(H).bind(Es.getField).each(qn.enable),wl.getField2(H).bind(Es.getField).each(qn.enable),wl.getLock(H).each(qn.enable)}}),ii(),So("size-input-events2",[_t(h,(H,j)=>{const Y=j.event.isField1,oe=Y?wl.getField1(H):wl.getField2(H),Ce=Y?wl.getField2(H):wl.getField1(H),Qe=oe.map(ln.getValue).getOr(""),Le=Ce.map(ln.getValue).getOr("");c=vj(Qe,Le)})])])})},cF=(t,r,c)=>{const h=Qi.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Lr(r.translate(t.label))]}),b=Qi.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),w=Qi.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Qi.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:K(c.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[h,b,w],sliderBehaviours:Kt([yl.self(),Xn.config({})]),onChoose:(S,E,D)=>{Hn(S,bl,{name:t.name,value:D})}})},yj=(t,r)=>{const c=E=>({dom:{tag:"th",innerHtml:r.translate(E)}}),h=E=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:ce(E,c)}]}),b=E=>({dom:{tag:"td",innerHtml:r.translate(E)}}),w=E=>({dom:{tag:"tr"},components:ce(E,b)}),S=E=>({dom:{tag:"tbody"},components:ce(E,w)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[h(t.header),S(t.cells)],behaviours:Kt([lr.config({}),Xn.config({})])}},DO=(t,r)=>{const c=t.label.map(Y=>Lc(Y,r)),h=[qn.config({disabled:()=>t.disabled||r.isDisabled()}),ii(),Fn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:Y=>(ns(Y,ev),O.some(!0))}),So("textfield-change",[_t(Vm(),(Y,oe)=>{Hn(Y,bl,{name:t.name})}),_t(U2(),(Y,oe)=>{Hn(Y,bl,{name:t.name})})]),lr.config({})],b=t.validation.map(Y=>wc.config({getRoot:oe=>ga(oe.element),invalidClass:"tox-invalid",validator:{validate:oe=>{const Ce=ln.getValue(oe),Qe=Y.validator(Ce);return da.pure(Qe===!0?Eo.value(Ce):Eo.error(Qe))},validateOnLoad:Y.validateOnLoad}})).toArray(),w=t.placeholder.fold(K({}),Y=>({placeholder:r.translate(Y)})),S=t.inputMode.fold(K({}),Y=>({inputmode:Y})),E=ie(ie({},w),S),D=Es.parts.field(Ot(ie({tag:t.multiline===!0?"textarea":"input"},t.data.map(Y=>({data:Y})).getOr({})),{inputAttributes:E,inputClasses:[t.classname],inputBehaviours:Kt(tt([h,b])),selectOnFocus:!1,factory:gg})),P=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[D]}:D,H=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),j=[qn.config({disabled:()=>t.disabled||r.isDisabled(),onDisabled:Y=>{Es.getField(Y).each(qn.disable)},onEnabled:Y=>{Es.getField(Y).each(qn.enable)}}),ii()];return Jb(c,P,H,j)},uF=(t,r,c)=>DO({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:O.none(),maximized:t.maximized,data:c},r),dF=(t,r,c)=>DO({name:t.name,multiline:!0,label:t.label,inputMode:O.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:O.none(),maximized:t.maximized,data:c},r),dv=(t,r)=>r.getAnimationRoot.fold(()=>t.element,c=>c(t)),dh=t=>t.dimension.property,kg=(t,r)=>t.dimension.getDimension(r),fv=(t,r)=>{const c=dv(t,r);ru(c,[r.shrinkingClass,r.growingClass])},_O=(t,r)=>{wr(t.element,r.openClass),ti(t.element,r.closedClass),xn(t.element,dh(r),"0px"),ul(t.element)},PS=(t,r)=>{wr(t.element,r.closedClass),ti(t.element,r.openClass),es(t.element,dh(r))},fF=(t,r,c,h)=>{c.setCollapsed(),xn(t.element,dh(r),kg(r,t.element)),fv(t,r),_O(t,r),r.onStartShrink(t),r.onShrunk(t)},wj=(t,r,c,h)=>{const b=h.getOrThunk(()=>kg(r,t.element));c.setCollapsed(),xn(t.element,dh(r),b),ul(t.element);const w=dv(t,r);wr(w,r.growingClass),ti(w,r.shrinkingClass),_O(t,r),r.onStartShrink(t)},NS=(t,r,c)=>{const h=kg(r,t.element);(h==="0px"?fF:wj)(t,r,c,O.some(h))},hF=(t,r,c)=>{const h=dv(t,r),b=vi(h,r.shrinkingClass),w=kg(r,t.element);PS(t,r);const S=kg(r,t.element);(b?()=>{xn(t.element,dh(r),w),ul(t.element)}:()=>{_O(t,r)})(),wr(h,r.shrinkingClass),ti(h,r.growingClass),PS(t,r),xn(t.element,dh(r),S),c.setExpanded(),r.onStartGrow(t)},xj=(t,r,c)=>{if(c.isExpanded()){es(t.element,dh(r));const h=kg(r,t.element);xn(t.element,dh(r),h)}},Sj=(t,r,c)=>{c.isExpanded()||hF(t,r,c)},mF=(t,r,c)=>{c.isExpanded()&&NS(t,r,c)},Cj=(t,r,c)=>{c.isExpanded()&&fF(t,r,c)},gF=(t,r,c)=>c.isExpanded(),kj=(t,r,c)=>c.isCollapsed(),MO=(t,r,c)=>{const h=dv(t,r);return vi(h,r.growingClass)===!0},pF=(t,r,c)=>{const h=dv(t,r);return vi(h,r.shrinkingClass)===!0};var bF=Object.freeze({__proto__:null,refresh:xj,grow:Sj,shrink:mF,immediateShrink:Cj,hasGrown:gF,hasShrunk:kj,isGrowing:MO,isShrinking:pF,isTransitioning:(t,r,c)=>MO(t,r)||pF(t,r),toggleGrow:(t,r,c)=>{(c.isExpanded()?NS:hF)(t,r,c)},disableTransitions:fv,immediateGrow:(t,r,c)=>{c.isExpanded()||(PS(t,r),xn(t.element,dh(r),kg(r,t.element)),fv(t,r),c.setExpanded(),r.onStartGrow(t),r.onGrown(t))}}),vF=Object.freeze({__proto__:null,exhibit:(t,r,c)=>{const h=r.expanded;return su(h?{classes:[r.openClass],styles:{}}:{classes:[r.closedClass],styles:ic(r.dimension.property,"0px")})},events:(t,r)=>ar([Lf(up(),(c,h)=>{h.event.raw.propertyName===t.dimension.property&&(fv(c,t),r.isExpanded()&&es(c.element,t.dimension.property),(r.isExpanded()?t.onGrown:t.onShrunk)(c))})])}),Aj=[Pt("closedClass"),Pt("openClass"),Pt("shrinkingClass"),Pt("growingClass"),Ds("getAnimationRoot"),os("onShrunk"),os("onStartShrink"),os("onGrown"),os("onStartGrow"),et("expanded",!1),tc("dimension",ms("property",{width:[qs("property","width"),qs("getDimension",t=>ee(t)+"px")],height:[qs("property","height"),qs("getDimension",t=>ir(t)+"px")]}))],Ej=Object.freeze({__proto__:null,init:t=>{const r=Zn(t.expanded),c=()=>"expanded: "+r.get();return lc({isExpanded:()=>r.get()===!0,isCollapsed:()=>r.get()===!1,setCollapsed:Ue(r.set,!1),setExpanded:Ue(r.set,!0),readState:c})}});const xl=Ji({fields:Aj,name:"sliding",active:vF,apis:bF,state:Ej}),yF=t=>({isEnabled:()=>!qn.isDisabled(t),setEnabled:r=>qn.set(t,!r),setActive:r=>{const c=t.element;r?(ti(c,"tox-tbtn--enabled"),sn(c,"aria-pressed",!0)):(wr(c,"tox-tbtn--enabled"),pe(c,"aria-pressed"))},isActive:()=>vi(t.element,"tox-tbtn--enabled"),setText:r=>{Hn(t,xc,{text:r})},setIcon:r=>Hn(t,tm,{icon:r})}),hv=(t,r,c,h,b=!0)=>SO({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:h,fetch:(w,S)=>{const E={pattern:t.search.isSome()?uU(w):""};t.fetch(D=>{S(C1(D,ad.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:t.search}))},E,yF(w))},onSetup:t.onSetup,getApi:yF,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...b?[lr.config({})]:[]]},r,c.shared),Tj=(t,r,c)=>{const h=w=>S=>{const E=!S.isActive();S.setActive(E),w.storage.set(E),c.shared.getSink().each(D=>{r().getOpt(D).each(P=>{dc(P.element),Hn(P,tf,{name:w.name,value:w.storage.get()})})})},b=w=>S=>{S.setActive(w.storage.get())};return w=>{w(ce(t,S=>{const E=S.text.fold(()=>({}),D=>({text:D}));return Ot(ie({type:S.type,active:!1},E),{onAction:h(S),onSetup:b(S)})}))}},RO=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[Lr(t)]}),PO=pn("leaf-label-event-id"),BS=({leaf:t,onLeafAction:r,visible:c,treeId:h,selectedId:b,backstage:w})=>{const S=t.menu.map(D=>hv(D,"tox-mbtn",w,O.none(),c)),E=[RO(t.title)];return S.each(D=>E.push(D)),Ri.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(c?["tox-tree--leaf__label--visible"]:[])},components:E,role:"treeitem",action:D=>{r(t.id),D.getSystem().broadcastOn([`update-active-item-${h}`],{value:t.id})},eventOrder:{[Gu()]:[PO,"keying"]},buttonBehaviours:Kt([...c?[lr.config({})]:[],No.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Pl.config({channels:{[`update-active-item-${h}`]:{onReceive:(D,P)=>{(P.value===t.id?No.on:No.off)(D)}}}}),So(PO,[nr((D,P)=>{b.each(B=>{(B===t.id?No.on:No.off)(D)})}),_t(Gu(),(D,P)=>{const B=P.event.raw.code==="ArrowLeft",H=P.event.raw.code==="ArrowRight";B?(cc(D.element,".tox-tree--directory").each(j=>{D.getSystem().getByDom(j).each(Y=>{dw(j,".tox-tree--directory__label").each(oe=>{Y.getSystem().getByDom(oe).each(Xn.focus)})})}),P.stop()):H&&P.stop()})])])})},FS=(t,r,c)=>mu(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:c},r),Oj=(t,r)=>FS(t,r,[]),wF=pn("directory-label-event-id"),Dj=({directory:t,visible:r,noChildren:c,backstage:h})=>{const b=t.menu.map(E=>hv(E,"tox-mbtn",h,O.none())),w=[{dom:{tag:"div",classes:["tox-chevron"]},components:[Oj("chevron-right",h.shared.providers.icons)]},RO(t.title)];b.each(E=>{w.push(E)});const S=E=>{cc(E.element,".tox-tree--directory").each(D=>{E.getSystem().getByDom(D).each(P=>{const B=!No.isOn(P);No.toggle(P),Hn(E,"expand-tree-node",{expanded:B,node:t.id})})})};return Ri.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(r?["tox-tree--directory__label--visible"]:[])},components:w,action:S,eventOrder:{[Gu()]:[wF,"keying"]},buttonBehaviours:Kt([...r?[lr.config({})]:[],So(wF,[_t(Gu(),(E,D)=>{const P=D.event.raw.code==="ArrowRight",B=D.event.raw.code==="ArrowLeft";P&&c&&D.stop(),(P||B)&&cc(E.element,".tox-tree--directory").each(H=>{E.getSystem().getByDom(H).each(j=>{!No.isOn(j)&&P||No.isOn(j)&&B?(S(E),D.stop()):B&&!No.isOn(j)&&(cc(j.element,".tox-tree--directory").each(Y=>{dw(Y,".tox-tree--directory__label").each(oe=>{j.getSystem().getByDom(oe).each(Xn.focus)})}),D.stop())})})})])])})},_j=({children:t,onLeafAction:r,visible:c,treeId:h,expandedIds:b,selectedId:w,backstage:S})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(E=>E.type==="leaf"?BS({leaf:E,selectedId:w,onLeafAction:r,visible:c,treeId:h,backstage:S}):NO({directory:E,expandedIds:b,selectedId:w,onLeafAction:r,labelTabstopping:c,treeId:h,backstage:S})),behaviours:Kt([xl.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:c}),po.config({})])}),xF=pn("directory-event-id"),NO=({directory:t,onLeafAction:r,labelTabstopping:c,treeId:h,backstage:b,expandedIds:w,selectedId:S})=>{const{children:E}=t,D=Zn(w),P=H=>E.map(j=>j.type==="leaf"?BS({leaf:j,selectedId:S,onLeafAction:r,visible:H,treeId:h,backstage:b}):NO({directory:j,expandedIds:D.get(),selectedId:S,onLeafAction:r,labelTabstopping:H,treeId:h,backstage:b})),B=w.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[Dj({directory:t,visible:c,noChildren:t.children.length===0,backstage:b}),_j({children:E,expandedIds:w,selectedId:S,onLeafAction:r,visible:B,treeId:h,backstage:b})],behaviours:Kt([So(xF,[nr((H,j)=>{No.set(H,B)}),_t("expand-tree-node",(H,j)=>{const{expanded:Y,node:oe}=j.event;D.set(Y?[...D.get(),oe]:D.get().filter(Ce=>Ce!==oe))})]),No.config(Ot(ie({},t.children.length>0?{aria:{mode:"expanded"}}:{}),{toggleClass:"tox-tree--directory--expanded",onToggled:(H,j)=>{const Y=H.components()[1],oe=P(j);j?xl.grow(Y):xl.shrink(Y),po.set(Y,oe)}}))])}},Mj=pn("tree-event-id"),Rj=(t,r)=>{const c=t.onLeafAction.getOr(Z),h=t.onToggleExpand.getOr(Z),b=t.defaultExpandedIds,w=Zn(b),S=Zn(t.defaultSelectedId),E=pn("tree-id"),D=(P,B)=>t.items.map(H=>H.type==="leaf"?BS({leaf:H,selectedId:P,onLeafAction:c,visible:!0,treeId:E,backstage:r}):NO({directory:H,selectedId:P,onLeafAction:c,expandedIds:B,labelTabstopping:!0,treeId:E,backstage:r}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:D(S.get(),w.get()),behaviours:Kt([Fn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),So(Mj,[_t("expand-tree-node",(P,B)=>{const{expanded:H,node:j}=B.event;w.set(H?[...w.get(),j]:w.get().filter(Y=>Y!==j)),h(w.get(),{expanded:H,node:j})})]),Pl.config({channels:{[`update-active-item-${E}`]:{onReceive:(P,B)=>{S.set(O.some(B.value)),po.set(P,D(O.some(B.value),w.get()))}}}}),po.config({})])}};var SF=Object.freeze({__proto__:null,events:(t,r)=>{const h=t.stream.streams.setup(t,r);return ar([_t(t.event,h),Fd(()=>r.cancel())].concat(t.cancelEvent.map(b=>[_t(b,()=>r.cancel())]).getOr([])))}});const CF=t=>{const r=Zn(null);return lc({readState:()=>({timer:r.get()!==null?"set":"unset"}),setTimer:w=>{r.set(w)},cancel:()=>{const w=r.get();w!==null&&w.cancel()}})};var kF=Object.freeze({__proto__:null,throttle:CF,init:t=>t.stream.streams.state(t)});const Nj=(t,r)=>{const c=t.stream,h=TS(t.onStream,c.delay);return r.setTimer(h),(b,w)=>{h.throttle(b,w),c.stopEvent&&w.stop()}};var Bj=[tc("stream",ms("mode",{throttle:[Pt("delay"),et("stopEvent",!0),qs("streams",{setup:Nj,state:CF})]})),et("event","input"),Ds("cancelEvent"),ed("onStream")];const so=Ji({fields:Bj,name:"streaming",active:SF,state:kF}),nm=(t,r,c)=>{const h=ln.getValue(c);ln.setValue(r,h),FO(r)},BO=(t,r)=>{const c=t.element,h=Id(c),b=c.dom;Vr(c,"type")!=="number"&&r(b,h)},FO=t=>{BO(t,(r,c)=>r.setSelectionRange(c.length,c.length))},AF=(t,r)=>{BO(t,(c,h)=>c.setSelectionRange(r,h.length))},EF=(t,r,c)=>{if(t.selectsOver){const h=ln.getValue(r),b=t.getDisplayText(h),w=ln.getValue(c);return t.getDisplayText(w).indexOf(b)===0?O.some(()=>{nm(t,r,c),AF(r,b.length)}):O.none()}else return O.none()},IS=K("alloy.typeahead.itemexecute"),Fj=(t,r,c,h)=>{const b=(H,j,Y)=>{t.previewing.set(!1);const oe=Pr.getCoupled(H,"sandbox");if(ss.isOpen(oe))Zo.getCurrent(oe).each(Ce=>{gs.getHighlighted(Ce).fold(()=>{Y(Ce)},()=>{q2(oe,Ce.element,"keydown",j)})});else{const Ce=Qe=>{Zo.getCurrent(Qe).each(Y)};rS(t,S(H),H,oe,h,Ce,Ha.HighlightMenuAndItem).get(Z)}},w=FE(t),S=H=>j=>j.map(Y=>{const oe=cs(Y.menus),Ce=ue(oe,Le=>cn(Le.items,_e=>_e.type==="item"));return ln.getState(H).update(ce(Ce,Le=>Le.data)),Y}),E=H=>Zo.getCurrent(H),D="typeaheadevents",P=[Xn.config({}),ln.config({onSetValue:t.onSetValue,store:ie({mode:"dataset",getDataKey:H=>Id(H.element),getFallbackEntry:H=>({value:H,meta:{}}),setValue:(H,j)=>{yp(H.element,t.model.getDisplayText(j))}},t.initialData.map(H=>ic("initialValue",H)).getOr({}))}),so.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(H,j)=>{const Y=Pr.getCoupled(H,"sandbox");if(Xn.isFocused(H)&&Id(H.element).length>=t.minChars){const Ce=E(Y).bind(Le=>gs.getHighlighted(Le).map(ln.getValue));t.previewing.set(!0);const Qe=Le=>{E(Y).each(_e=>{Ce.fold(()=>{t.model.selectsOver&&gs.highlightFirst(_e)},Xe=>{gs.highlightBy(_e,Ft=>ln.getValue(Ft).value===Xe.value),gs.getHighlighted(_e).orThunk(()=>(gs.highlightFirst(_e),O.none()))})})};rS(t,S(H),H,Y,h,Qe,Ha.HighlightJustMenu).get(Z)}},cancelEvent:j2()}),Fn.config({mode:"special",onDown:(H,j)=>(b(H,j,gs.highlightFirst),O.some(!0)),onEscape:H=>{const j=Pr.getCoupled(H,"sandbox");return ss.isOpen(j)?(ss.close(j),O.some(!0)):O.none()},onUp:(H,j)=>(b(H,j,gs.highlightLast),O.some(!0)),onEnter:H=>{const j=Pr.getCoupled(H,"sandbox"),Y=ss.isOpen(j);if(Y&&!t.previewing.get())return E(j).bind(oe=>gs.getHighlighted(oe)).map(oe=>(Hn(H,IS(),{item:oe}),!0));{const oe=ln.getValue(H);return ns(H,j2()),t.onExecute(j,H,oe),Y&&ss.close(j),O.some(!0)}}}),No.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Pr.config({others:{sandbox:H=>PT(t,H,{onOpen:()=>No.on(H),onClose:()=>{t.lazyTypeaheadComp.get().each(j=>pe(j.element,"aria-activedescendant")),No.off(H)}})}}),So(D,[nr(H=>{t.lazyTypeaheadComp.set(O.some(H))}),Fd(H=>{t.lazyTypeaheadComp.set(O.none())}),$f(H=>{const j=Z;RT(t,S(H),H,h,j,Ha.HighlightMenuAndItem).get(Z)}),_t(IS(),(H,j)=>{const Y=Pr.getCoupled(H,"sandbox");nm(t.model,H,j.event.item),ns(H,j2()),t.onItemExecute(H,Y,j.event.item,ln.getValue(H)),ss.close(Y),FO(H)})].concat(t.dismissOnBlur?[_t(z2(),H=>{const j=Pr.getCoupled(H,"sandbox");au(j.element).isNone()&&ss.close(j)})]:[]))],B=ie({[Um()]:[ln.name(),so.name(),D]},t.eventOrder);return{uid:t.uid,dom:Rx(Ls(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:ie(ie({},w),Mi(t.typeaheadBehaviours,P)),eventOrder:B}},mv=K([Ds("lazySink"),Pt("fetch"),et("minChars",5),et("responseTime",1e3),os("onOpen"),et("getHotspot",O.some),et("getAnchorOverrides",K({})),et("layouts",O.none()),et("eventOrder",{}),Bd("model",{},[et("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),et("selectsOver",!0),et("populateFromBrowse",!0)]),os("onSetValue"),Rl("onExecute"),os("onItemExecute"),et("inputClasses",[]),et("inputAttributes",{}),et("inputStyles",{}),et("matchWidth",!0),et("useMinWidth",!1),et("dismissOnBlur",!0),Ph(["openClass"]),Ds("initialData"),yi("typeaheadBehaviours",[Xn,ln,so,Fn,No,Pr]),Qr("lazyTypeaheadComp",()=>Zn(O.none)),Qr("previewing",()=>Zn(!0))].concat(Fb()).concat(NT())),Ij=K([uu({schema:[hw()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(r,c,h)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(b=>{EF(t.model,b,h).fold(()=>{t.model.selectsOver?(gs.dehighlight(c,h),t.previewing.set(!0)):t.previewing.set(!1)},w=>{w(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(b=>{t.model.populateFromBrowse&&nm(t.model,b,h),z(h.element,"id").each(w=>sn(b.element,"aria-activedescendant",w))})},onExecute:(r,c)=>t.lazyTypeaheadComp.get().map(h=>(Hn(h,IS(),{item:c}),!0)),onHover:(r,c)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(h=>{t.model.populateFromBrowse&&nm(t.model,h,c)})}})})]),TF=ka({name:"Typeahead",configFields:mv(),partFields:Ij(),factory:Fj}),xu=t=>{const r=()=>xu(t.toCached()),c=D=>xu(t.bind(P=>P.fold(B=>da.pure(Eo.error(B)),B=>D(B)))),h=D=>xu(t.map(P=>P.bind(D))),b=D=>xu(t.map(P=>P.map(D))),w=D=>xu(t.map(P=>P.mapError(D))),S=(D,P)=>t.map(B=>B.fold(D,P)),E=(D,P)=>xu(da.nu(B=>{let H=!1;const j=setTimeout(()=>{H=!0,B(Eo.error(P()))},D);t.get(Y=>{H||(clearTimeout(j),B(Y))})}));return Ot(ie({},t),{toCached:r,bindFuture:c,bindResult:h,mapResult:b,mapError:w,foldResult:S,withTimeout:E})},OF=t=>xu(da.nu(t)),DF=t=>xu(da.pure(Eo.value(t))),Hj={nu:OF,wrap:xu,pure:DF,value:DF,error:t=>xu(da.pure(Eo.error(t))),fromResult:t=>xu(da.pure(t)),fromFuture:t=>xu(t.map(Eo.value)),fromPromise:t=>OF(r=>{t.then(c=>{r(Eo.value(c))},c=>{r(Eo.error(c))})})},LS=(t,r,c=[],h,b,w)=>{const S=r.fold(()=>({}),P=>({action:P})),E=ie({buttonBehaviours:Kt([ni.button(()=>!t.enabled||w.isDisabled()),ii(),lr.config({}),So("button press",[K2("click"),K2("mousedown")])].concat(c)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},S),D=Ls(E,{dom:h});return Ls(D,{components:b})},Vj=(t,r,c,h=[])=>{const b=t.tooltip.map(D=>({"aria-label":c.translate(D),title:c.translate(D)})).getOr({}),w={tag:"button",classes:["tox-tbtn"],attributes:b},S=t.icon.map(D=>xO(D,c.icons)),E=l1([S]);return LS(t,r,h,w,E,c)},IO=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},LO=(t,r,c,h=[],b=[])=>{const w=c.translate(t.text),S=t.icon.map(j=>xO(j,c.icons)),E=[S.getOrThunk(()=>Lr(w))],D=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),H={tag:"button",classes:[...IO(D),...S.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...b],attributes:{title:w}};return LS(t,r,h,H,E,c)},MF=(t,r,c,h=[],b=[])=>{const w=LO(t,O.some(r),c,h,b);return Ri.sketch(w)},RF=(t,r)=>c=>{r==="custom"?Hn(c,tf,{name:t,value:{}}):r==="submit"?ns(c,ev):r==="cancel"&&ns(c,Kh)},zj=(t,r)=>r==="menu",Uj=(t,r)=>r==="custom"||r==="cancel"||r==="submit",Wj=(t,r)=>r==="togglebutton",jj=(t,r)=>{var c,h;const b=t.icon.map(_e=>em(_e,r.icons)).map(As),w=_e=>{Hn(_e,tf,{name:t.name,value:{setIcon:Xe=>{b.map(Ft=>Ft.getOpt(_e).each(Et=>{po.set(Et,[em(Xe,r.icons)])}))}}})},S=t.buttonType.getOr(t.primary?"primary":"secondary"),E=Ot(ie({},t),{name:(c=t.name)!==null&&c!==void 0?c:"",primary:S==="primary",tooltip:O.from(t.tooltip),enabled:(h=t.enabled)!==null&&h!==void 0?h:!1,borderless:!1}),D=E.tooltip.map(_e=>({"aria-label":r.translate(_e),title:r.translate(_e)})).getOr({}),P=IO(S!=null?S:"secondary"),B=t.icon.isSome()&&t.text.isSome(),H={tag:"button",classes:[...P.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...B?["tox-button--icon-and-text"]:[]],attributes:D},j=[],Y=r.translate(t.text.getOr("")),oe=Lr(Y),Qe=[...l1([b.map(_e=>_e.asSpec())]),...t.text.isSome()?[oe]:[]],Le=LS(E,O.some(w),j,H,Qe,r);return Ri.sketch(Le)},$S=(t,r,c)=>{if(zj(t,r)){const h=()=>S,b=t,w=Ot(ie({},t),{type:"menubutton",search:O.none(),onSetup:E=>(E.setEnabled(t.enabled),Z),fetch:Tj(b.items,h,c)}),S=As(hv(w,"tox-tbtn",c,O.none()));return S.asSpec()}else if(Uj(t,r)){const h=RF(t.name,r),b=Ot(ie({},t),{borderless:!1});return MF(b,h,c.shared.providers,[])}else{if(Wj(t,r))return jj(t,c.shared.providers);throw new Error("Unknown footer button type")}},Zj=(t,r)=>{const c=RF(t.name,"custom");return PU(O.none(),Es.parts.field(ie({factory:Ri},LO(t,O.some(c),r,[ES(""),yl.self()]))))},qj={type:"separator"},Gj=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:Z}),$O=(t,r)=>({type:"menuitem",value:r,text:t,meta:{attach:void 0},onAction:Z}),PF=t=>ce(t,Gj),Kj=(t,r)=>cn(r,c=>c.type===t),NF=(t,r)=>PF(Kj(t,r)),Yj=t=>NF("header",t.targets),Xj=t=>NF("anchor",t.targets),Jj=t=>O.from(t.anchorTop).map(r=>$O("<top>",r)).toArray(),Qj=t=>O.from(t.anchorBottom).map(r=>$O("<bottom>",r)).toArray(),BF=t=>ce(t,r=>$O(r,r)),eZ=t=>Do(t,(r,c)=>r.length===0||c.length===0?r.concat(c):r.concat(qj,c),[]),HS=(t,r)=>{const c=t.toLowerCase();return cn(r,h=>{var b;const w=h.meta!==void 0&&h.meta.text!==void 0?h.meta.text:h.text,S=(b=h.value)!==null&&b!==void 0?b:"";return go(w.toLowerCase(),c)||go(S.toLowerCase(),c)})},tZ=(t,r,c)=>{var h,b;const w=ln.getValue(r),S=(b=(h=w==null?void 0:w.meta)===null||h===void 0?void 0:h.text)!==null&&b!==void 0?b:w.value;return c.getLinkInformation().fold(()=>[],D=>{const P=HS(S,BF(c.getHistory(t)));return t==="file"?eZ([P,HS(S,Yj(D)),HS(S,tt([Jj(D),Xj(D),Qj(D)]))]):P})},HO=pn("aria-invalid"),FF=(t,r,c,h)=>{const b=r.shared.providers,w=_e=>{const Xe=ln.getValue(_e);c.addToHistory(Xe.value,t.filetype)},S=Ot(ie({},h.map(_e=>({initialData:_e})).getOr({})),{dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":HO,type:"url"},minChars:0,responseTime:0,fetch:_e=>{const Xe=tZ(t.filetype,_e,c),Ft=C1(Xe,ad.BUBBLE_TO_SANDBOX,r,{isHorizontalMenu:!1,search:O.none()});return da.pure(Ft)},getHotspot:_e=>oe.getOpt(_e),onSetValue:(_e,Xe)=>{_e.hasConfigured(wc)&&wc.run(_e).get(Z)},typeaheadBehaviours:Kt([...c.getValidationHandler().map(_e=>wc.config({getRoot:Xe=>ga(Xe.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Xe,Ft)=>{B.getOpt(Xe).each(Et=>{sn(Et.element,"title",b.translate(Ft))})}},validator:{validate:Xe=>{const Ft=ln.getValue(Xe);return Hj.nu(Et=>{_e({type:t.filetype,url:Ft.value},St=>{if(St.status==="invalid"){const jt=Eo.error(St.message);Et(jt)}else{const jt=Eo.value(St.message);Et(jt)}})})},validateOnLoad:!1}})).toArray(),qn.config({disabled:()=>!t.enabled||b.isDisabled()}),lr.config({}),So("urlinput-events",[_t(Vm(),_e=>{const Xe=Id(_e.element),Ft=Xe.trim();Ft!==Xe&&yp(_e.element,Ft),t.filetype==="file"&&Hn(_e,bl,{name:t.name})}),_t(cp(),_e=>{Hn(_e,bl,{name:t.name}),w(_e)}),_t(U2(),_e=>{Hn(_e,bl,{name:t.name}),w(_e)})])]),eventOrder:{[Vm()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:_e=>_e.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:r.shared.getSink,parts:{menu:t1(!1,1,"normal")},onExecute:(_e,Xe,Ft)=>{Hn(Xe,ev,{})},onItemExecute:(_e,Xe,Ft,Et)=>{w(_e),Hn(_e,bl,{name:t.name})}}),E=Es.parts.field(Ot(ie({},S),{factory:TF})),D=t.label.map(_e=>Lc(_e,b)),B=As(((_e,Xe,Ft=_e,Et=_e)=>mu(Ft,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+_e],attributes:ie({title:b.translate(Et),"aria-live":"polite"},Xe.fold(()=>({}),St=>({id:St})))},b.icons))("invalid",O.some(HO),"warning")),H=As({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[B.asSpec()]}),j=c.getUrlPicker(t.filetype),Y=pn("browser.url.event"),oe=As({dom:{tag:"div",classes:["tox-control-wrap"]},components:[E,H.asSpec()],behaviours:Kt([qn.config({disabled:()=>!t.enabled||b.isDisabled()})])}),Ce=As(MF({name:t.name,icon:O.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:O.none(),borderless:!0},_e=>ns(_e,Y),b,[],["tox-browse-url"])),Qe=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:tt([[oe.asSpec()],j.map(()=>Ce.asSpec()).toArray()])}),Le=_e=>{Zo.getCurrent(_e).each(Xe=>{const Ft=ln.getValue(Xe),Et=ie({fieldname:t.name},Ft);j.each(St=>{St(Et).get(jt=>{ln.setValue(Xe,jt),Hn(_e,bl,{name:t.name})})})})};return Es.sketch({dom:See(),components:D.toArray().concat([Qe()]),fieldBehaviours:Kt([qn.config({disabled:()=>!t.enabled||b.isDisabled(),onDisabled:_e=>{Es.getField(_e).each(qn.disable),Ce.getOpt(_e).each(qn.disable)},onEnabled:_e=>{Es.getField(_e).each(qn.enable),Ce.getOpt(_e).each(qn.enable)}}),ii(),So("url-input-events",[_t(Y,Le)])])})},VO=(t,r)=>{const c=uE(t.icon,r.icons);return ld.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:c},components:t.url?[Ri.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:c,attributes:{title:r.translate(t.iconTooltip)}},action:h=>Hn(h,tf,{name:"alert-banner",value:t.url}),buttonBehaviours:Kt([yx()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:r.translate(t.text)}}]})},nZ=(t,r)=>{t.dom.checked=r},IF=t=>t.dom.checked,LF=(t,r,c)=>{const h=D=>(D.element.dom.click(),O.some(!0)),b=Es.parts.field({factory:{sketch:Ie},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Kt([yl.self(),qn.config({disabled:()=>!t.enabled||r.isDisabled(),onDisabled:D=>{ga(D.element).each(P=>ti(P,"tox-checkbox--disabled"))},onEnabled:D=>{ga(D.element).each(P=>wr(P,"tox-checkbox--disabled"))}}),lr.config({}),Xn.config({}),dO(c,IF,nZ),Fn.config({mode:"special",onEnter:h,onSpace:h,stopSpaceKeyup:!0}),So("checkbox-events",[_t(cp(),(D,P)=>{Hn(D,bl,{name:t.name})})])])}),w=Es.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Lr(r.translate(t.label))],behaviours:Kt([tv.config({})])}),S=D=>mu(D==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+D]},r.icons),E=As({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[S("checked"),S("unchecked")]});return Es.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[b,E.asSpec(),w],fieldBehaviours:Kt([qn.config({disabled:()=>!t.enabled||r.isDisabled()}),ii()])})},oZ=t=>t.presets==="presentation"?ld.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):ld.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Kt([lr.config({}),Xn.config({})])}),ai=t=>(r,c,h,b)=>$t(c,"name").fold(()=>t(c,b,O.none()),w=>r.field(w,t(c,b,$t(h,w)))),sZ=t=>(r,c,h,b)=>{const w=Ls(c,{source:"dynamic"});return ai(t)(r,w,h,b)},rZ={bar:ai((t,r)=>TU(t,r.shared)),collection:ai((t,r,c)=>BU(t,r.shared.providers,c)),alertbanner:ai((t,r)=>VO(t,r.shared.providers)),input:ai((t,r,c)=>uF(t,r.shared.providers,c)),textarea:ai((t,r,c)=>dF(t,r.shared.providers,c)),label:ai((t,r)=>YB(t,r.shared)),iframe:sZ((t,r,c)=>nj(t,r.shared.providers,c)),button:ai((t,r)=>Zj(t,r.shared.providers)),checkbox:ai((t,r,c)=>LF(t,r.shared.providers,c)),colorinput:ai((t,r,c)=>VU(t,r.shared,r.colorinput,c)),colorpicker:ai((t,r,c)=>ZW(t,r.shared.providers,c)),dropzone:ai((t,r,c)=>GW(t,r.shared.providers,c)),grid:ai((t,r)=>UB(t,r.shared)),listbox:ai((t,r,c)=>AO(t,r,c)),selectbox:ai((t,r,c)=>uv(t,r.shared.providers,c)),sizeinput:ai((t,r)=>lF(t,r.shared.providers)),slider:ai((t,r,c)=>cF(t,r.shared.providers,c)),urlinput:ai((t,r,c)=>FF(t,r,r.urlinput,c)),customeditor:ai(VB),htmlpanel:ai(oZ),imagepreview:ai((t,r,c)=>rj(t,c)),table:ai((t,r)=>yj(t,r.shared.providers)),tree:ai((t,r)=>Rj(t,r)),panel:ai((t,r)=>hj(t,r))},dd={field:(t,r)=>r,record:K([])},gv=(t,r,c,h)=>{const b=Ls(h,{shared:{interpreter:w=>k1(t,w,c,b)}});return k1(t,r,c,b)},k1=(t,r,c,h)=>$t(rZ,r.type).fold(()=>r,b=>b(t,r,c,h)),$F=(t,r,c)=>k1(dd,t,r,c),rf="layout-inset",zO=t=>t.x,VS=(t,r)=>t.x+t.width/2-r.width/2,zS=(t,r)=>t.x+t.width-r.width,pv=t=>t.y,UO=(t,r)=>t.y+t.height-r.height,WO=(t,r)=>t.y+t.height/2-r.height/2,bv=(t,r,c)=>Oi(zS(t,r),UO(t,r),c.insetSouthwest(),$d(),"southwest",Or(t,{right:0,bottom:3}),rf),A1=(t,r,c)=>Oi(zO(t),UO(t,r),c.insetSoutheast(),bw(),"southeast",Or(t,{left:1,bottom:3}),rf),vv=(t,r,c)=>Oi(zS(t,r),pv(t),c.insetNorthwest(),gk(),"northwest",Or(t,{right:0,top:2}),rf),yv=(t,r,c)=>Oi(zO(t),pv(t),c.insetNortheast(),pw(),"northeast",Or(t,{left:1,top:2}),rf),$c=(t,r,c)=>Oi(VS(t,r),pv(t),c.insetNorth(),Nh(),"north",Or(t,{top:2}),rf),wv=(t,r,c)=>Oi(VS(t,r),UO(t,r),c.insetSouth(),XM(),"south",Or(t,{bottom:3}),rf),HF=(t,r,c)=>Oi(zS(t,r),WO(t,r),c.insetEast(),W0(),"east",Or(t,{right:0}),rf),jO=(t,r,c)=>Oi(zO(t),WO(t,r),c.insetWest(),bt(),"west",Or(t,{left:1}),rf),VF=t=>{switch(t){case"north":return $c;case"northeast":return yv;case"northwest":return vv;case"south":return wv;case"southeast":return A1;case"southwest":return bv;case"east":return HF;case"west":return jO}},zF=(t,r,c,h,b)=>l3(h).map(VF).getOr($c)(t,r,c,h,b),iZ=t=>{switch(t){case"north":return wv;case"northeast":return A1;case"northwest":return bv;case"south":return $c;case"southeast":return yv;case"southwest":return vv;case"east":return jO;case"west":return HF}},aZ=(t,r,c,h,b)=>l3(h).map(iZ).getOr($c)(t,r,c,h,b),xv={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},UF=(t,r,c)=>{const b={maxHeightFunction:Ep()},w=()=>({type:"node",root:Ut(Ct(t())),node:O.from(t()),bubble:Uf(12,12,xv),layouts:{onRtl:()=>[yv],onLtr:()=>[vv]},overrides:b}),S=()=>({type:"hotspot",hotspot:r(),bubble:Uf(-12,12,xv),layouts:{onRtl:()=>[ca,ua,Di],onLtr:()=>[ua,ca,Di]},overrides:b});return()=>c()?w():S()},fd=(t,r,c,h)=>{const w={maxHeightFunction:Ep()},S=()=>({type:"node",root:Ut(Ct(r())),node:O.from(r()),bubble:Uf(12,12,xv),layouts:{onRtl:()=>[$c],onLtr:()=>[$c]},overrides:w}),E=()=>t?{type:"node",root:Ut(Ct(r())),node:O.from(r()),bubble:Uf(0,-Bu(r()),xv),layouts:{onRtl:()=>[Fa],onLtr:()=>[Fa]},overrides:w}:{type:"hotspot",hotspot:c(),bubble:Uf(0,0,xv),layouts:{onRtl:()=>[Fa],onLtr:()=>[Fa]},overrides:w};return()=>h()?S():E()},ZO=(t,r,c)=>{const h=()=>({type:"node",root:Ut(Ct(t())),node:O.from(t()),layouts:{onRtl:()=>[$c],onLtr:()=>[$c]}}),b=()=>({type:"hotspot",hotspot:r(),layouts:{onRtl:()=>[Di],onLtr:()=>[Di]}});return()=>c()?h():b()},lZ=(t,r)=>()=>({type:"selection",root:r(),getSelection:()=>{const c=t.selection.getRng(),h=t.model.table.getSelectedCells();if(h.length>1){const b=h[0],w=h[h.length-1],S={firstCell:Tt.fromDom(b),lastCell:Tt.fromDom(w)};return O.some(S)}return O.some(Y0.range(Tt.fromDom(c.startContainer),c.startOffset,Tt.fromDom(c.endContainer),c.endOffset))}}),cZ=t=>r=>({type:"node",root:t(),node:r}),uZ=(t,r,c,h)=>{const b=Qp(t),w=()=>Tt.fromDom(t.getBody()),S=()=>Tt.fromDom(t.getContentAreaContainer()),E=()=>b||!h();return{inlineDialog:UF(S,r,E),inlineBottomDialog:fd(t.inline,S,c,E),banner:ZO(S,r,E),cursor:lZ(t,w),node:cZ(w)}},dZ=t=>(r,c)=>{EN(t)(r,c)},fZ=t=>()=>wN(t),WF=t=>r=>eS(t,r),jF=t=>r=>yN(t,r),Pee=t=>({colorPicker:dZ(t),hasCustomColors:fZ(t),getColors:WF(t),getColorCols:jF(t)}),Nee=t=>()=>xE(t),fa=t=>({isDraggableModal:Nee(t)}),qO=t=>{const r=Zn(AE(t)?"bottom":"top");return{isPositionedAtTop:()=>r.get()==="top",getDockingMode:r.get,setDockingMode:r.set}},ZF=t=>Qs(t,"items"),Sv=t=>Qs(t,"format"),qF=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],hZ=t=>xo(t,"items"),mZ=t=>xo(t,"block"),gZ=t=>xo(t,"inline"),pZ=t=>xo(t,"selector"),GF=t=>Do(t,(r,c)=>{if(hZ(c)){const h=GF(c.items);return{customFormats:r.customFormats.concat(h.customFormats),formats:r.formats.concat([{title:c.title,items:h.formats}])}}else if(gZ(c)||mZ(c)||pZ(c)){const b=`custom-${v(c.name)?c.name:c.title.toLowerCase()}`;return{customFormats:r.customFormats.concat([{name:b,format:c}]),formats:r.formats.concat([{title:c.title,format:b,icon:c.icon}])}}else return Ot(ie({},r),{formats:r.formats.concat(c)})},{customFormats:[],formats:[]}),bZ=(t,r)=>{const c=GF(r),h=b=>{Ze(b,w=>{t.formatter.has(w.name)||t.formatter.register(w.name,w.format)})};return t.formatter?h(c.customFormats):t.on("init",()=>{h(c.customFormats)}),c.formats},KF=t=>VR(t).map(r=>{const c=bZ(t,r);return zR(t)?qF.concat(c):c}).getOr(qF),YF=t=>{const r=Kn(t);return r.length===1&&We(r,"title")},Cv=(t,r,c)=>Ot(ie({},t),{type:"formatter",isSelected:r(t.format),getStylePreview:c(t.format)}),XF=(t,r,c,h)=>{const b=D=>Cv(D,c,h),w=D=>{const P=E(D.items);return Ot(ie({},D),{type:"submenu",getStyleItems:K(P)})},S=D=>{const P=v(D.name)?D.name:pn(D.title),B=`custom-${P}`,H=Ot(ie({},D),{type:"formatter",format:B,isSelected:c(B),getStylePreview:h(B)});return t.formatter.register(P,H),H},E=D=>ce(D,P=>ZF(P)?w(P):Sv(P)?b(P):YF(P)?Ot(ie({},P),{type:"separator"}):S(P));return E(r)},JF=t=>{const r=E=>()=>t.formatter.match(E),c=E=>()=>{const D=t.formatter.get(E);return D!==void 0?O.some({tag:D.length>0&&(D[0].inline||D[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(E))}):O.none()},h=Zn([]),b=Zn([]),w=Zn(!1);return t.on("PreInit",E=>{const D=KF(t),P=XF(t,D,r,c);h.set(P)}),t.on("addStyleModifications",E=>{const D=XF(t,E.items,r,c);b.set(D),w.set(E.replace)}),{getData:()=>{const E=w.get()?[]:h.get(),D=b.get();return E.concat(D)}}},vZ=t=>X(t)&&t.nodeType===1,QF=uh.trim,eI=t=>r=>!!(vZ(r)&&(r.contentEditable===t||r.getAttribute("data-mce-contenteditable")===t)),yZ=eI("true"),tI=eI("false"),wZ=(t,r,c,h,b)=>({type:t,title:r,url:c,level:h,attach:b}),Bee=t=>{let r=t;for(;r=r.parentNode;){const c=r.contentEditable;if(c&&c!=="inherit")return yZ(r)}return!1},xZ=(t,r)=>ce(_i(Tt.fromDom(r),t),c=>c.dom),nI=t=>t.innerText||t.textContent,SZ=t=>t.id?t.id:pn("h"),oI=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,GO=t=>oI(t)&&rI(t),sI=t=>t&&/^(H[1-6])$/.test(t.nodeName),rI=t=>Bee(t)&&!tI(t),iI=t=>sI(t)&&rI(t),CZ=t=>sI(t)?parseInt(t.nodeName.substr(1),10):0,kZ=t=>{var r;const c=SZ(t),h=()=>{t.id=c};return wZ("header",(r=nI(t))!==null&&r!==void 0?r:"","#"+c,CZ(t),h)},AZ=t=>{const r=t.id||t.name,c=nI(t);return wZ("anchor",c||"#"+r,"#"+r,0,Z)},EZ=t=>ce(cn(t,iI),kZ),KO=t=>ce(cn(t,GO),AZ),aI=t=>xZ("h1,h2,h3,h4,h5,h6,a:not([href])",t),TZ=t=>QF(t.title).length>0,OZ={find:t=>{const r=aI(t);return cn(EZ(r).concat(KO(r)),TZ)}},lI="tinymce-url-history",YO=5,cI=t=>v(t)&&/^https?/.test(t),US=t=>T(t)&&t.length<=YO&&xe(t,cI),uI=t=>x(t)&&Fo(t,r=>!US(r)).isNone(),kv=()=>{const t=Zh.getItem(lI);if(t===null)return{};let r;try{r=JSON.parse(t)}catch(c){if(c instanceof SyntaxError)return{};throw c}return uI(r)?r:{}},DZ=t=>{if(!uI(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Zh.setItem(lI,JSON.stringify(t))},XO=t=>{const r=kv();return $t(r,t).getOr([])},Av=(t,r)=>{if(!cI(t))return;const c=kv(),h=$t(c,r).getOr([]),b=cn(h,w=>w!==t);c[r]=[t].concat(b).slice(0,YO),DZ(c)},JO=t=>!!t,_Z=t=>pt(uh.makeMap(t,/[, ]/),JO),WS=t=>O.from(qR(t)),dI=t=>{const r=O.from(yE(t)).filter(JO).map(_Z);return WS(t).fold(ne,c=>r.fold(ge,h=>Kn(h).length>0?h:!1))},fI=(t,r)=>{const c=dI(t);return N(c)?c?WS(t):O.none():c[r]?WS(t):O.none()},MZ=(t,r)=>fI(t,r).map(c=>h=>da.nu(b=>{const w=(E,D)=>{if(!v(E))throw new Error("Expected value to be string");if(D!==void 0&&!x(D))throw new Error("Expected meta to be a object");b({value:E,meta:D})},S=ie({filetype:r,fieldname:h.fieldname},O.from(h.meta).getOr({}));c.call(t,w,h.value,S)})),jS=t=>O.from(t).filter(v).getOrUndefined(),ZS=t=>wE(t)?O.some({targets:OZ.find(t.getBody()),anchorTop:jS(kx(t)),anchorBottom:jS(KR(t))}):O.none(),RZ=t=>O.from(vE(t)),PZ=t=>({getHistory:XO,addToHistory:Av,getLinkInformation:()=>ZS(t),getValidationHandler:()=>RZ(t),getUrlPicker:r=>MZ(t,r)}),E1=(t,r,c,h)=>{const b=Zn(!1),w=qO(r),S={icons:()=>r.ui.registry.getAll().icons,menuItems:()=>r.ui.registry.getAll().menuItems,translate:bc.translate,isDisabled:()=>r.mode.isReadOnly()||!r.ui.isEnabled(),getOption:r.options.get},E=PZ(r),D=JF(r),P=Pee(r),B=fa(r),H=()=>b.get(),j=Qe=>b.set(Qe),Y={shared:{providers:S,anchors:uZ(r,c,h,w.isPositionedAtTop),header:w},urlinput:E,styles:D,colorinput:P,dialog:B,isContextMenuOpen:H,setContextMenuState:j},oe=Ot(ie({},Y),{shared:Ot(ie({},Y.shared),{interpreter:Qe=>$F(Qe,{},oe),getSink:t.popup})}),Ce=Ot(ie({},Y),{shared:Ot(ie({},Y.shared),{interpreter:Qe=>$F(Qe,{},Ce),getSink:t.dialog})});return{popup:oe,dialog:Ce}},hI=(t,r,c)=>{const h=(St,jt)=>{Ze([r,...c],Jt=>{Jt.broadcastEvent(St,jt)})},b=(St,jt)=>{Ze([r,...c],Jt=>{Jt.broadcastOn([St],jt)})},w=St=>b(zd(),{target:St.target}),S=Dm(),E=Ja(S,"touchstart",w),D=Ja(S,"touchmove",St=>h(Ky(),St)),P=Ja(S,"touchend",St=>h(J6(),St)),B=Ja(S,"mousedown",w),H=Ja(S,"mouseup",St=>{St.raw.button===0&&b(eA(),{target:St.target})}),j=St=>b(zd(),{target:Tt.fromDom(St.target)}),Y=St=>{St.button===0&&b(eA(),{target:Tt.fromDom(St.target)})},oe=()=>{Ze(t.editorManager.get(),St=>{t!==St&&St.dispatch("DismissPopups",{relatedTarget:t})})},Ce=St=>h(O0(),d3(St)),Qe=St=>{b(tg(),{}),h(D0(),d3(St))},Le=Ct(Tt.fromDom(t.getElement())),_e=Sw(Le,"scroll",St=>{requestAnimationFrame(()=>{const jt=t.getContainer();if(jt!=null){const Co=Gh(t,r.element).map(fn=>[fn.element,...fn.others]).getOr([]);yt(Co,fn=>bs(fn,St.target))&&(t.dispatch("ElementScroll",{target:St.target.dom}),h(OM(),St))}})}),Xe=()=>b(tg(),{}),Ft=St=>{St.state&&b(zd(),{target:Tt.fromDom(t.getContainer())})},Et=St=>{b(zd(),{target:Tt.fromDom(St.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",j),t.on("tap",j),t.on("mouseup",Y),t.on("mousedown",oe),t.on("ScrollWindow",Ce),t.on("ResizeWindow",Qe),t.on("ResizeEditor",Xe),t.on("AfterProgressState",Ft),t.on("DismissPopups",Et)}),t.on("remove",()=>{t.off("click",j),t.off("tap",j),t.off("mouseup",Y),t.off("mousedown",oe),t.off("ScrollWindow",Ce),t.off("ResizeWindow",Qe),t.off("ResizeEditor",Xe),t.off("AfterProgressState",Ft),t.off("DismissPopups",Et),B.unbind(),E.unbind(),D.unbind(),P.unbind(),H.unbind(),_e.unbind()}),t.on("detach",()=>{Ze([r,...c],Np),Ze([r,...c],St=>St.destroy())})},Pi=uH,hd=a4,QO=K([et("shell",!1),Pt("makeItem"),et("setupItem",Z),cu.field("listBehaviours",[po])]),NZ=gc({name:"items",overrides:()=>({behaviours:Kt([po.config({})])})}),BZ=K([NZ]),FZ=K("CustomList"),eD=(t,r,c,h)=>{const b=(E,D)=>{S(E).fold(()=>{throw new Error("Custom List was defined to not be a shell, but no item container was specified in components")},P=>{const B=po.contents(P),H=D.length,j=H-B.length,Y=j>0?Be(j,()=>t.makeItem()):[],oe=B.slice(H);Ze(oe,Qe=>po.remove(P,Qe)),Ze(Y,Qe=>po.append(P,Qe));const Ce=po.contents(P);Ze(Ce,(Qe,Le)=>{t.setupItem(E,Qe,D[Le],Le)})})},w=t.shell?{behaviours:[po.config({})],components:[]}:{behaviours:[],components:r},S=E=>t.shell?O.some(E):Gs(E,t,"items");return{uid:t.uid,dom:t.dom,components:w.components,behaviours:Mi(t.listBehaviours,w.behaviours),apis:{setItems:b}}},gI=ka({name:FZ(),configFields:QO(),partFields:BZ(),factory:eD,apis:{setItems:(t,r,c)=>{t.setItems(r,c)}}}),T1=K([Pt("dom"),et("shell",!0),yi("toolbarBehaviours",[po])]),IZ=K([gc({name:"groups",overrides:()=>({behaviours:Kt([po.config({})])})})]),LZ=(t,r,c,h)=>{const b=(E,D)=>{w(E).fold(()=>{throw new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},P=>{po.set(P,D)})},w=E=>t.shell?O.some(E):Gs(E,t,"groups"),S=t.shell?{behaviours:[po.config({})],components:[]}:{behaviours:[],components:r};return{uid:t.uid,dom:t.dom,components:S.components,behaviours:Mi(t.toolbarBehaviours,S.behaviours),apis:{setGroups:b,refresh:Z},domModification:{attributes:{role:"group"}}}},md=ka({name:"Toolbar",configFields:T1(),partFields:IZ(),factory:LZ,apis:{setGroups:(t,r,c)=>{t.setGroups(r,c)}}}),$Z=Z,pI=ne,bI=K([]);var Ev=Object.freeze({__proto__:null,setup:$Z,isDocked:pI,getBehaviours:bI});const tD=t=>(Sr(js(t,"position"),"fixed")?O.none():pa(t)).orThunk(()=>{const h=Tt.fromTag("span");return mi(t).bind(b=>{Ma(b,h);const w=pa(h);return _c(h),w})}),vI=t=>tD(t).map(Ga).getOrThunk(()=>hr(0,0)),nD=(t,r)=>{const c=t.element;ti(c,r.transitionClass),wr(c,r.fadeOutClass),ti(c,r.fadeInClass),r.onShow(t)},yI=(t,r)=>{const c=t.element;ti(c,r.transitionClass),wr(c,r.fadeInClass),ti(c,r.fadeOutClass),r.onHide(t)},HZ=(t,r)=>t.y<r.bottom&&t.bottom>r.y,wI=(t,r)=>t.y>=r.y,xI=(t,r)=>t.bottom<=r.bottom,oD=(t,r,c)=>({location:"top",leftX:r,topY:c.bounds.y-t.y}),sD=(t,r,c)=>({location:"bottom",leftX:r,bottomY:t.bottom-c.bounds.bottom}),rD=t=>t.box.x-t.win.x,VZ=(t,r,c)=>{const h=r.win,b=r.box,w=rD(r);return ho(t,S=>{switch(S){case"bottom":return xI(b,c.bounds)?O.none():O.some(sD(h,w,c));case"top":return wI(b,c.bounds)?O.none():O.some(oD(h,w,c));default:return O.none()}}).getOr({location:"no-dock"})},zZ=(t,r,c)=>xe(t,h=>{switch(h){case"bottom":return xI(r,c.bounds);case"top":return wI(r,c.bounds)}}),UZ=(t,r)=>{const c=r.optScrollEnv.fold(K(t.bounds.y),h=>h.scrollElmTop+(t.bounds.y-h.currentScrollTop));return hr(t.bounds.x,c)},Lee=(t,r)=>{const c=r.optScrollEnv.fold(K(t.y),h=>t.y+h.currentScrollTop-h.scrollElmTop);return hr(t.x,c)},iD=(t,r,c)=>c.getInitialPos().map(h=>{const b=UZ(h,r);return{box:Xr(b.left,b.top,ee(t),ir(t)),location:h.location}}),aD=(t,r,c,h,b)=>{const w=Lee(r,c),S=Xr(w.left,w.top,r.width,r.height);h.setInitialPos({style:Kr(t),position:er(t,"position")||"static",bounds:S,location:b.location})},SI=(t,r,c,h,b)=>{h.getInitialPos().fold(()=>aD(t,r,c,h,b),()=>Z)},Tv=(t,r,c)=>c.getInitialPos().bind(h=>{var b;switch(c.clearInitialPos(),h.position){case"static":return O.some({morph:"static"});case"absolute":const w=tD(t).getOr(fr()),S=Ar(w),E=(b=w.dom.scrollTop)!==null&&b!==void 0?b:0;return O.some({morph:"absolute",positionCss:fc("absolute",$t(h.style,"left").map(D=>r.x-S.x),$t(h.style,"top").map(D=>r.y-S.y+E),$t(h.style,"right").map(D=>S.right-r.right),$t(h.style,"bottom").map(D=>S.bottom-r.bottom))});default:return O.none()}}),CI=(t,r,c)=>iD(t,r,c).filter(({box:h})=>zZ(c.getModes(),h,r)).bind(({box:h})=>Tv(t,h,c)),lD=t=>{switch(t.location){case"top":return O.some({morph:"fixed",positionCss:fc("fixed",O.some(t.leftX),O.some(t.topY),O.none(),O.none())});case"bottom":return O.some({morph:"fixed",positionCss:fc("fixed",O.some(t.leftX),O.none(),O.none(),O.some(t.bottomY))});default:return O.none()}},WZ=(t,r,c)=>{const h=Ar(t),b=qi(),w=VZ(c.getModes(),{win:b,box:h},r);return w.location==="top"||w.location==="bottom"?(aD(t,h,r,c,w),lD(w)):O.none()},jZ=(t,r,c)=>CI(t,r,c).orThunk(()=>r.optScrollEnv.bind(h=>iD(t,r,c)).bind(({box:h,location:b})=>{const w=qi(),S=rD({win:w,box:h}),E=b==="top"?oD(w,S,r):sD(w,S,r);return lD(E)})),ZZ=(t,r,c)=>{const h=t.element;return Sr(js(h,"position"),"fixed")?jZ(h,r,c):WZ(h,r,c)},qZ=(t,r,c)=>{const h=t.element;return iD(h,r,c).bind(({box:b})=>Tv(h,b,c))},GZ=(t,r,c,h)=>{const b=Ar(t),w=qi(),S=rD({win:w,box:b}),E=h(w,S,r);return E.location==="bottom"||E.location==="top"?(SI(t,b,r,c,E),lD(E)):O.none()},kI=(t,r,c)=>{c.setDocked(!1),Ze(["left","right","top","bottom","position"],h=>es(t.element,h)),r.onUndocked(t)},qS=(t,r,c,h)=>{const b=h.position==="fixed";c.setDocked(b),i3(t.element,h),(b?r.onDocked:r.onUndocked)(t)},cD=(t,r,c,h,b=!1)=>{r.contextual.each(w=>{w.lazyContext(t).each(S=>{const E=HZ(S,h.bounds);E!==c.isVisible()&&(c.setVisible(E),b&&!E?(jr(t.element,[w.fadeOutClass]),w.onHide(t)):(E?nD:yI)(t,w))})})},AI=(t,r,c,h,b)=>{cD(t,r,c,h,!0),qS(t,r,c,b.positionCss)},EI=(t,r,c,h,b)=>{switch(b.morph){case"static":return kI(t,r,c);case"absolute":return qS(t,r,c,b.positionCss);case"fixed":return AI(t,r,c,h,b)}},KZ=(t,r,c)=>{const h=r.lazyViewport(t);cD(t,r,c,h),ZZ(t,h,c).each(b=>{EI(t,r,c,h,b)})},YZ=(t,r,c)=>{const h=t.element;c.setDocked(!1);const b=r.lazyViewport(t);qZ(t,b,c).each(w=>{switch(w.morph){case"static":{kI(t,r,c);break}case"absolute":{qS(t,r,c,w.positionCss);break}}}),c.setVisible(!0),r.contextual.each(w=>{ru(h,[w.fadeInClass,w.fadeOutClass,w.transitionClass]),w.onShow(t)}),GS(t,r,c)},GS=(t,r,c)=>{t.getSystem().isConnected()&&KZ(t,r,c)},om=(t,r,c)=>{c.isDocked()&&YZ(t,r,c)},uD=t=>(r,c,h)=>{const b=c.lazyViewport(r);GZ(r.element,b,h,t).each(S=>{AI(r,c,h,b,S)})},Ov=uD(oD),KS=uD(sD);var $ee=Object.freeze({__proto__:null,refresh:GS,reset:om,isDocked:(t,r,c)=>c.isDocked(),getModes:(t,r,c)=>c.getModes(),setModes:(t,r,c,h)=>c.setModes(h),forceDockToTop:Ov,forceDockToBottom:KS}),eq=Object.freeze({__proto__:null,events:(t,r)=>ar([Lf(up(),(c,h)=>{t.contextual.each(b=>{vi(c.element,b.transitionClass)&&(ru(c.element,[b.transitionClass,b.fadeInClass]),(r.isVisible()?b.onShown:b.onHidden)(c)),h.stop()})}),_t(O0(),(c,h)=>{GS(c,t,r)}),_t(OM(),(c,h)=>{GS(c,t,r)}),_t(D0(),(c,h)=>{om(c,t,r)})])}),tq=[oc("contextual",[ws("fadeInClass"),ws("fadeOutClass"),ws("transitionClass"),ju("lazyContext"),os("onShow"),os("onShown"),os("onHide"),os("onHidden")]),Vi("lazyViewport",()=>({bounds:qi(),optScrollEnv:O.none()})),qu("modes",["top","bottom"],Yi),os("onDocked"),os("onUndocked")],nq=Object.freeze({__proto__:null,init:t=>{const r=Zn(!1),c=Zn(!0),h=sr(),b=Zn(t.modes),w=()=>`docked:  ${r.get()}, visible: ${c.get()}, modes: ${b.get().join(",")}`;return lc({isDocked:r.get,setDocked:r.set,getInitialPos:h.get,setInitialPos:h.set,clearInitialPos:h.clear,isVisible:c.get,setVisible:c.set,getModes:b.get,setModes:b.set,readState:w})}});const mr=Ji({fields:tq,name:"docking",active:eq,apis:$ee,state:nq}),Ag=K(pn("toolbar-height-change")),Su={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},TI="tox-tinymce--toolbar-sticky-on",OI="tox-tinymce--toolbar-sticky-off",dD=(t,r)=>{const c=Zi(r),b=Da(r).dom.innerHeight,w=Ra(c),S=Tt.fromDom(t.elm),E=fl(S),D=ir(S),P=E.y,B=P+D,H=Ga(r),j=ir(r),Y=H.top,oe=Y+j,Ce=Math.abs(Y-w.top)<2,Qe=Math.abs(oe-(w.top+b))<2;if(Ce&&P<oe)Fy(w.left,P-j,c);else if(Qe&&B>Y){const Le=P-b+D+j;Fy(w.left,Le,c)}},YS=(t,r)=>We(mr.getModes(t),r),Eg=t=>{const r=h=>Bu(h)+(parseInt(er(h,"margin-top"),10)||0)+(parseInt(er(h,"margin-bottom"),10)||0),c=t.element;ga(c).each(h=>{const b="padding-"+mr.getModes(t)[0];if(mr.isDocked(t)){const w=ee(h);xn(c,"width",w+"px"),xn(h,b,r(c)+"px")}else es(c,"width"),es(h,b)})},fD=(t,r)=>{r?(wr(t,Su.fadeOutClass),jr(t,[Su.transitionClass,Su.fadeInClass])):(wr(t,Su.fadeInClass),jr(t,[Su.fadeOutClass,Su.transitionClass]))},DI=(t,r)=>{const c=Tt.fromDom(t.getContainer());r?(ti(c,TI),wr(c,OI)):(ti(c,OI),wr(c,TI))},oq=(t,r)=>{const c=Zi(r);Hd(c).filter(h=>!bs(r,h)).filter(h=>bs(h,Tt.fromDom(c.dom.body))||ma(t,h)).each(()=>dc(r))},sq=(t,r)=>au(t).orThunk(()=>r().toOptional().bind(c=>au(c.element))),rq=(t,r,c)=>{t.inline||(r.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{c().each(mr.reset)}),t.on("ResizeWindow ResizeEditor",()=>{c().each(Eg)}),t.on("SkinLoaded",()=>{c().each(h=>{mr.isDocked(h)?mr.reset(h):mr.refresh(h)})}),t.on("FullscreenStateChanged",()=>{c().each(mr.reset)})),t.on("AfterScrollIntoView",h=>{c().each(b=>{mr.refresh(b);const w=b.element;_4(w)&&dD(h,w)})}),t.on("PostRender",()=>{DI(t,!1)})},iq=t=>t().map(mr.isDocked).getOr(!1),aq=()=>[Pl.config({channels:{[Ag()]:{onReceive:Eg}}})],hD=(t,r)=>{const c=sr(),h=r.getSink,b=E=>{h().each(D=>E(D.element))},w=E=>{t.inline||Eg(E),DI(t,mr.isDocked(E)),E.getSystem().broadcastOn([tg()],{}),h().each(D=>D.getSystem().broadcastOn([tg()],{}))},S=t.inline?[]:aq();return[Xn.config({}),mr.config({contextual:ie({lazyContext:E=>{const D=Bu(E.element),P=t.inline?t.getContentAreaContainer():t.getContainer();return O.from(P).map(B=>{const H=Ar(Tt.fromDom(B));return Gh(t,E.element).fold(()=>{const Y=H.height-D,oe=H.y+(YS(E,"top")?0:D);return Xr(H.x,oe,H.width,Y)},Y=>{const oe=m0(H,f1(Y)),Ce=YS(E,"top")?oe.y:oe.y+D;return Xr(oe.x,Ce,oe.width,oe.height-D)})})},onShow:()=>{b(E=>fD(E,!0))},onShown:E=>{b(D=>ru(D,[Su.transitionClass,Su.fadeInClass])),c.get().each(D=>{oq(E.element,D),c.clear()})},onHide:E=>{sq(E.element,h).fold(c.clear,c.set),b(D=>fD(D,!1))},onHidden:()=>{b(E=>ru(E,[Su.transitionClass]))}},Su),lazyViewport:E=>Gh(t,E.element).fold(()=>{const P=qi(),B=Sx(t),H=P.y+(YS(E,"top")?B:0),j=P.height-(YS(E,"bottom")?B:0);return{bounds:Xr(P.x,H,P.width,j),optScrollEnv:O.none()}},P=>({bounds:f1(P),optScrollEnv:O.some({currentScrollTop:P.element.dom.scrollTop,scrollElmTop:Ga(P.element).top})})),modes:[r.header.getDockingMode()],onDocked:w,onUndocked:w}),...S]};var _I=Object.freeze({__proto__:null,setup:rq,isDocked:iq,getBehaviours:hD});const mD=t=>{const r=t.editor,c=t.sticky?hD:bI;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Kt(c(r,t.sharedBackstage))}},lq=Ln([qr,tc("items",wn([Pm([UE,nc("items",Yi)]),Yi]))].concat(i1)),XS=t=>Tr("GroupToolbarButton",lq,t),JS=[Na("text"),Na("tooltip"),Na("icon"),_l("search",!1,wn([Uu,Ln([Na("placeholder")])],t=>N(t)?t?O.some({placeholder:O.none()}):O.none():O.some(t))),ju("fetch"),Vi("onSetup",()=>Z)],gD=Ln([qr,...JS]),MI=t=>Tr("menubutton",gD,t),cq=Ln([qr,Lb,vc,Yd,ZE,wP,Uh,sc("presets","normal",["normal","color","listpreview"]),CP(1),s1,IV]),uq=t=>Tr("SplitButton",cq,t);var Dv=Fl({factory:(t,r)=>{const c=(b,w)=>{const S=ce(w,E=>{const D={type:"menubutton",text:E.text,fetch:B=>{B(E.getItems())}},P=MI(D).mapError(B=>hl(B)).getOrDie();return hv(P,"tox-mbtn",r.backstage,O.some("menuitem"))});po.set(b,S)},h={focus:Fn.focusIn,setMenus:c};return{uid:t.uid,dom:t.dom,components:[],behaviours:Kt([po.config({}),So("menubar-events",[nr(b=>{t.onSetup(b)}),_t(Nf(),(b,w)=>{Zr(b.element,".tox-mbtn--active").each(S=>{Qu(w.event.target,".tox-mbtn").each(E=>{bs(S,E)||b.getSystem().getByDom(S).each(D=>{b.getSystem().getByDom(E).each(P=>{Ic.expand(P),Ic.close(D),Xn.focus(P)})})})})}),_t(Yy(),(b,w)=>{w.event.prevFocus.bind(S=>b.getSystem().getByDom(S).toOptional()).each(S=>{w.event.newFocus.bind(E=>b.getSystem().getByDom(E).toOptional()).each(E=>{Ic.isOpen(S)&&(Ic.expand(E),Ic.close(S))})})})]),Fn.config({mode:"flow",selector:".tox-mbtn",onEscape:b=>(t.onEscape(b),O.some(!0))}),lr.config({})]),apis:h,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Pt("dom"),Pt("uid"),Pt("onEscape"),Pt("backstage"),et("onSetup",Z)],apis:{focus:(t,r)=>{t.focus(r)},setMenus:(t,r,c)=>{t.setMenus(r,c)}}});const pD="⚡️Upgrade",dq="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",bD=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:dq,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:pD}}]}),RI="container",fq=[yi("slotBehaviours",[])],PI=t=>"<alloy.field."+t+">",hq=t=>{const r=(()=>{const w=[];return{slot:(E,D)=>(w.push(E),bA(RI,PI(E),D)),record:K(w)}})(),c=t(r),h=r.record(),b=ce(h,w=>Ca({name:w,pname:PI(w)}));return SA(RI,fq,b,mq,c)},mq=(t,r)=>{const c=Ce=>yA(t),h=(Ce,Qe)=>Gs(Ce,t,Qe),b=(Ce,Qe)=>(Le,_e)=>Gs(Le,t,_e).map(Xe=>Ce(Xe,_e)).getOr(Qe),w=Ce=>(Qe,Le)=>{Ze(Le,_e=>Ce(Qe,_e))},S=(Ce,Qe)=>Vr(Ce.element,"aria-hidden")!=="true",E=(Ce,Qe)=>{if(!S(Ce)){const Le=Ce.element;es(Le,"display"),pe(Le,"aria-hidden"),Hn(Ce,_0(),{name:Qe,visible:!0})}},D=(Ce,Qe)=>{if(S(Ce)){const Le=Ce.element;xn(Le,"display","none"),sn(Le,"aria-hidden","true"),Hn(Ce,_0(),{name:Qe,visible:!1})}},P=b(S,!1),B=b(D),H=w(B),j=Ce=>H(Ce,c()),Y=b(E),oe={getSlotNames:c,getSlot:h,isShowing:P,hideSlot:B,hideAllSlots:j,showSlot:Y};return{uid:t.uid,dom:t.dom,components:r,behaviours:Kf(t.slotBehaviours),apis:oe}},Uee=pt({getSlotNames:(t,r)=>t.getSlotNames(r),getSlot:(t,r,c)=>t.getSlot(r,c),isShowing:(t,r,c)=>t.isShowing(r,c),hideSlot:(t,r,c)=>t.hideSlot(r,c),hideAllSlots:(t,r)=>t.hideAllSlots(r),showSlot:(t,r,c)=>t.showSlot(r,c)},t=>pp(t)),za=Ot(ie({},Uee),{sketch:hq}),NI=Ln([vc,Lb,Vi("onShow",Z),Vi("onHide",Z),Uh]),gq=t=>Tr("sidebar",NI,t),BI=t=>{const{sidebars:r}=t.ui.registry.getAll();Ze(Kn(r),c=>{const h=r[c],b=()=>Sr(O.from(t.queryCommandValue("ToggleSidebar")),c);t.ui.registry.addToggleButton(c,{icon:h.icon,tooltip:h.tooltip,onAction:w=>{t.execCommand("ToggleSidebar",!1,c),w.setActive(b())},onSetup:w=>{w.setActive(b());const S=()=>w.setActive(b());return t.on("ToggleSidebar",S),()=>{t.off("ToggleSidebar",S)}}})})},pq=t=>({element:()=>t.element.dom}),bq=(t,r)=>{const c=ce(Kn(r),h=>{const b=r[h],w=Zs(gq(b));return{name:h,getApi:pq,onSetup:w.onSetup,onShow:w.onShow,onHide:w.onHide}});return ce(c,h=>{const b=Zn(Z);return t.slot(h.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Vb.unnamedEvents([Wh(h,b),Jd(h,b),_t(_0(),(w,S)=>{const E=S.event;Je(c,P=>P.name===E.name).each(P=>{(E.visible?P.onShow:P.onHide)(P.getApi(w))})})])})})},vq=t=>za.sketch(r=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:bq(r,t),slotBehaviours:Vb.unnamedEvents([nr(c=>za.hideAllSlots(c))])})),yq=(t,r,c)=>{Zo.getCurrent(t).each(b=>{po.set(b,[vq(r)]);const w=c==null?void 0:c.toLowerCase();v(w)&&xo(r,w)&&Zo.getCurrent(b).each(S=>{za.showSlot(S,w),xl.immediateGrow(b),es(b.element,"width"),QS(t.element,"region")})})},QS=(t,r)=>{sn(t,"role",r)},FI=(t,r)=>{Zo.getCurrent(t).each(h=>{Zo.getCurrent(h).each(w=>{xl.hasGrown(h)?za.isShowing(w,r)?(xl.shrink(h),QS(t.element,"presentation")):(za.hideAllSlots(w),za.showSlot(w,r),QS(t.element,"region")):(za.hideAllSlots(w),za.showSlot(w,r),xl.grow(h),QS(t.element,"region"))})})},wq=t=>Zo.getCurrent(t).bind(c=>xl.isGrowing(c)||xl.hasGrown(c)?Zo.getCurrent(c).bind(w=>Je(za.getSlotNames(w),S=>za.isShowing(w,S))):O.none()),vD=pn("FixSizeEvent"),yD=pn("AutoSizeEvent"),Wee=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Kt([lr.config({}),Xn.config({}),xl.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:r=>{Zo.getCurrent(r).each(za.hideAllSlots),ns(r,yD)},onGrown:r=>{ns(r,yD)},onStartGrow:r=>{Hn(r,vD,{width:js(r.element,"width").getOr("")})},onStartShrink:r=>{Hn(r,vD,{width:ee(r.element)+"px"})}}),po.config({}),Zo.config({find:r=>{const c=po.contents(r);return en(c)}})])}],behaviours:Kt([yl.childAt(0),So("sidebar-sliding-events",[_t(vD,(r,c)=>{xn(r.element,"width",c.event.width)}),_t(yD,(r,c)=>{es(r.element,"width")})])])});var Cq=Object.freeze({__proto__:null,block:(t,r,c,h)=>{sn(t.element,"aria-busy",!0);const b=r.getRoot(t).getOr(t),w=Kt([Fn.config({mode:"special",onTab:()=>O.some(!0),onShiftTab:()=>O.some(!0)}),Xn.config({})]),S=h(b,w),E=b.getSystem().build(S);po.append(b,Rc(E)),E.hasConfigured(Fn)&&r.focus&&Fn.focusIn(E),c.isBlocked()||r.onBlock(t),c.blockWith(()=>po.remove(b,E))},unblock:(t,r,c)=>{pe(t.element,"aria-busy"),c.isBlocked()&&r.onUnblock(t),c.clear()},isBlocked:(t,r,c)=>c.isBlocked()}),kq=[Vi("getRoot",O.none),Hi("focus",!0),os("onBlock"),os("onUnblock")],Aq=Object.freeze({__proto__:null,init:()=>{const t=Q8(),r=c=>{t.set({destroy:c})};return lc({readState:t.isSet,blockWith:r,clear:t.clear,isBlocked:t.isSet})}});const Cu=Ji({fields:kq,name:"blocking",apis:Cq,state:Aq}),II=t=>(r,c)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:nh('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),LI=t=>Zo.getCurrent(t).each(r=>dc(r.element,!0)),_v=(t,r)=>{const c="tabindex",h=`data-mce-${c}`;O.from(t.iframeElement).map(Tt.fromDom).each(b=>{r?(z(b,c).each(w=>sn(b,h,w)),sn(b,c,-1)):(pe(b,c),z(b,h).each(w=>{sn(b,c,w),pe(b,h)}))})},Eq=(t,r,c,h)=>{const b=r.element;if(_v(t,c),c)Cu.block(r,II(h)),es(b,"display"),pe(b,"aria-hidden"),t.hasFocus()&&LI(r);else{const w=Zo.getCurrent(r).exists(S=>Z0(S.element));Cu.unblock(r),xn(b,"display","none"),sn(b,"aria-hidden","true"),w&&t.focus()}},eC=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Kt([po.config({}),Cu.config({focus:!1}),Zo.config({find:r=>en(r.components())})]),components:[]}),Tq=t=>t.type==="focusin",tC=t=>Tq(t)?(t.composed?en(t.composedPath()):O.from(t.target)).map(Tt.fromDom).filter(Po).exists(c=>vi(c,"mce-pastebin")):!1,Oq=(t,r,c)=>{const h=Zn(!1),b=sr(),w=E=>{h.get()&&!tC(E)&&(E.preventDefault(),LI(r()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",w),t.on("BeforeExecCommand",E=>{E.command.toLowerCase()==="mcefocus"&&E.value!==!0&&w(E)})});const S=E=>{E!==h.get()&&(h.set(E),Eq(t,r(),E,c.providers),dN(t,E))};t.on("ProgressState",E=>{if(b.on(clearTimeout),G(E.time)){const D=ug.setEditorTimeout(t,()=>S(E.state),E.time);b.set(D)}else S(E.state),b.clear()})},Dq=(t,r)=>Do(t,(b,w)=>r(w,b.len).fold(K(b),E=>({len:E.finish,list:b.list.concat([E])})),{len:0,list:[]}).list,Hl=(t,r,c)=>({within:t,extra:r,withinWidth:c}),$I=(t,r,c)=>{const h=Dq(t,(E,D)=>{const P=c(E);return O.some({element:E,start:D,finish:D+P,width:P})}),b=cn(h,E=>E.finish<=r),w=no(b,(E,D)=>E+D.width,0),S=h.slice(b.length);return{within:b,extra:S,withinWidth:w}},Tg=t=>ce(t,r=>r.element),HI=(t,r,c)=>{const h=Tg(t.concat(r));return Hl(h,[],c)},VI=(t,r,c,h)=>{const b=Tg(t).concat([c]);return Hl(b,Tg(r),h)},_q=(t,r,c)=>Hl(Tg(t),[],c),zI=(t,r,c)=>{const h=$I(r,t,c);return h.extra.length===0?O.some(h):O.none()},Mq=(t,r,c,h)=>{const b=zI(t,r,c).getOrThunk(()=>$I(r,t-c(h),c)),w=b.within,S=b.extra,E=b.withinWidth;return S.length===1&&S[0].width<=c(h)?HI(w,S,E):S.length>=1?VI(w,S,h,E):_q(w,S,E)},UI=(t,r)=>{const c=ce(r,h=>Rc(h));md.setGroups(t,c)},Rq=t=>ho(t,r=>au(r.element).bind(c=>r.getSystem().getByDom(c).toOptional())),WI=(t,r,c)=>{const h=r.builtGroups.get();if(h.length===0)return;const b=Xf(t,r,"primary"),w=Pr.getCoupled(t,"overflowGroup");xn(b.element,"visibility","hidden");const S=h.concat([w]),E=Rq(S);c([]),UI(b,S);const D=ee(b.element),P=Mq(D,r.builtGroups.get(),B=>ee(B.element),w);P.extra.length===0?(po.remove(b,w),c([])):(UI(b,P.within),c(P.extra)),es(b.element,"visibility"),ul(b.element),E.each(Xn.focus)},jI=K([yi("splitToolbarBehaviours",[Pr]),Qr("builtGroups",()=>Zn([]))]),Pq=K([Ph(["overflowToggledClass"]),Bm("getOverflowBounds"),Pt("lazySink"),Qr("overflowGroups",()=>Zn([])),os("onOpened"),os("onClosed")].concat(jI())),Nq=K([Ca({factory:md,schema:T1(),name:"primary"}),uu({schema:T1(),name:"overflow"}),uu({name:"overflow-button"}),uu({name:"overflow-group"})]),nC=K((t,r)=>{st(t,Math.floor(r))}),ZI=K([Ph(["toggledClass"]),Pt("lazySink"),ju("fetch"),Bm("getBounds"),oc("fireDismissalEventInstead",[et("event",Wm())]),Bh(),os("onToggled")]),qI=K([uu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Kt([No.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),uu({factory:md,schema:T1(),name:"toolbar",overrides:t=>({toolbarBehaviours:Kt([Fn.config({mode:"cyclic",onEscape:r=>(Gs(r,t,"button").each(Xn.focus),O.none())})])})})]),oC=sr(),Bq=(t,r)=>{oC.set(!0),sC(t,r),oC.clear()},sC=(t,r)=>{const c=Pr.getCoupled(t,"toolbarSandbox");ss.isOpen(c)?ss.close(c):ss.open(c,r.toolbar())},rC=(t,r,c,h)=>{const b=c.getBounds.map(S=>S()),w=c.lazySink(t).getOrDie();Sa.positionWithinBounds(w,r,{anchor:{type:"hotspot",hotspot:t,layouts:h,overrides:{maxWidthFunction:nC()}}},b)},wD=(t,r,c,h,b)=>{md.setGroups(r,b),rC(t,r,c,h),No.on(t)},Fq=(t,r,c)=>{const h=Km(),b=(S,E)=>{const D=oC.get().getOr(!1);c.fetch().get(P=>{wD(t,E,c,r.layouts,P),h.link(t.element),D||Fn.focusIn(E)})},w=()=>{No.off(t),oC.get().getOr(!1)||Xn.focus(t),h.unlink(t.element)};return{dom:{tag:"div",attributes:{id:h.id}},behaviours:Kt([Fn.config({mode:"special",onEscape:S=>(ss.close(S),O.some(!0))}),ss.config({onOpen:b,onClose:w,isPartOf:(S,E,D)=>Rh(E,D)||Rh(t,D),getAttachPoint:()=>c.lazySink(t).getOrDie()}),Pl.config({channels:ie(ie({},tA(ie({isExtraPart:ne},c.fireDismissalEventInstead.map(S=>({fireEventInstead:{event:S.event}})).getOr({})))),nA({doReposition:()=>{ss.getState(Pr.getCoupled(t,"toolbarSandbox")).each(S=>{rC(t,S,c,r.layouts)})}}))})])}},sm=ka({name:"FloatingToolbarButton",factory:(t,r,c,h)=>Ot(ie({},Ri.sketch(Ot(ie({},h.button()),{action:b=>{sC(b,h)},buttonBehaviours:cu.augment({dump:h.button().buttonBehaviours},[Pr.config({others:{toolbarSandbox:b=>Fq(b,c,t)}})])}))),{apis:{setGroups:(b,w)=>{ss.getState(Pr.getCoupled(b,"toolbarSandbox")).each(S=>{wD(b,S,t,c.layouts,w)})},reposition:b=>{ss.getState(Pr.getCoupled(b,"toolbarSandbox")).each(w=>{rC(b,w,t,c.layouts)})},toggle:b=>{sC(b,h)},toggleWithoutFocusing:b=>{Bq(b,h)},getToolbar:b=>ss.getState(Pr.getCoupled(b,"toolbarSandbox")),isOpen:b=>ss.isOpen(Pr.getCoupled(b,"toolbarSandbox"))}}),configFields:ZI(),partFields:qI(),apis:{setGroups:(t,r,c)=>{t.setGroups(r,c)},reposition:(t,r)=>{t.reposition(r)},toggle:(t,r)=>{t.toggle(r)},toggleWithoutFocusing:(t,r)=>{t.toggleWithoutFocusing(r)},getToolbar:(t,r)=>t.getToolbar(r),isOpen:(t,r)=>t.isOpen(r)}}),GI=K([Pt("items"),Ph(["itemSelector"]),yi("tgroupBehaviours",[Fn])]),Iq=K([ub({name:"items",unit:"item"})]),Lq=(t,r,c,h)=>({uid:t.uid,dom:t.dom,components:r,behaviours:Mi(t.tgroupBehaviours,[Fn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),iC=ka({name:"ToolbarGroup",configFields:GI(),partFields:Iq(),factory:Lq}),KI=t=>ce(t,r=>Rc(r)),YI=(t,r,c)=>{WI(t,c,h=>{c.overflowGroups.set(h),r.getOpt(t).each(b=>{sm.setGroups(b,KI(h))})})},$q=(t,r,c,h)=>{const b=As(sm.sketch({fetch:()=>da.nu(w=>{w(KI(t.overflowGroups.get()))}),layouts:{onLtr:()=>[ua,ca],onRtl:()=>[ca,ua],onBottomLtr:()=>[xa,Xa],onBottomRtl:()=>[Xa,xa]},getBounds:c.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:h["overflow-button"](),toolbar:h.overflow()},onToggled:(w,S)=>t[S?"onOpened":"onClosed"](w)}));return{uid:t.uid,dom:t.dom,components:r,behaviours:Mi(t.splitToolbarBehaviours,[Pr.config({others:{overflowGroup:()=>iC.sketch(Ot(ie({},h["overflow-group"]()),{items:[b.asSpec()]}))}})]),apis:{setGroups:(w,S)=>{t.builtGroups.set(ce(S,w.getSystem().build)),YI(w,b,t)},refresh:w=>YI(w,b,t),toggle:w=>{b.getOpt(w).each(S=>{sm.toggle(S)})},toggleWithoutFocusing:w=>{b.getOpt(w).each(sm.toggleWithoutFocusing)},isOpen:w=>b.getOpt(w).map(sm.isOpen).getOr(!1),reposition:w=>{b.getOpt(w).each(S=>{sm.reposition(S)})},getOverflow:w=>b.getOpt(w).bind(sm.getToolbar)},domModification:{attributes:{role:"group"}}}},XI=ka({name:"SplitFloatingToolbar",configFields:Pq(),partFields:Nq(),factory:$q,apis:{setGroups:(t,r,c)=>{t.setGroups(r,c)},refresh:(t,r)=>{t.refresh(r)},reposition:(t,r)=>{t.reposition(r)},toggle:(t,r)=>{t.toggle(r)},toggleWithoutFocusing:(t,r)=>{t.toggle(r)},isOpen:(t,r)=>t.isOpen(r),getOverflow:(t,r)=>t.getOverflow(r)}}),Hq=K([Ph(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),os("onOpened"),os("onClosed")].concat(jI())),Vq=K([Ca({factory:md,schema:T1(),name:"primary"}),Ca({factory:md,schema:T1(),name:"overflow",overrides:t=>({toolbarBehaviours:Kt([xl.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:r=>{Gs(r,t,"overflow-button").each(c=>{No.off(c),Xn.focus(c)}),t.onClosed(r)},onGrown:r=>{Fn.focusIn(r),t.onOpened(r)},onStartGrow:r=>{Gs(r,t,"overflow-button").each(No.on)}}),Fn.config({mode:"acyclic",onEscape:r=>(Gs(r,t,"overflow-button").each(Xn.focus),O.some(!0))})])})}),uu({name:"overflow-button",overrides:t=>({buttonBehaviours:Kt([No.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),uu({name:"overflow-group"})]),zq=(t,r)=>Gs(t,r,"overflow").map(xl.hasGrown).getOr(!1),xD=(t,r)=>{Gs(t,r,"overflow-button").bind(()=>Gs(t,r,"overflow")).each(c=>{SD(t,r),xl.toggleGrow(c)})},SD=(t,r)=>{Gs(t,r,"overflow").each(c=>{WI(t,r,h=>{const b=ce(h,w=>Rc(w));md.setGroups(c,b)}),Gs(t,r,"overflow-button").each(h=>{xl.hasGrown(c)&&No.on(h)}),xl.refresh(c)})},Uq=(t,r,c,h)=>{const b="alloy.toolbar.toggle",w=(S,E)=>{const D=ce(E,S.getSystem().build);t.builtGroups.set(D)};return{uid:t.uid,dom:t.dom,components:r,behaviours:Mi(t.splitToolbarBehaviours,[Pr.config({others:{overflowGroup:S=>iC.sketch(Ot(ie({},h["overflow-group"]()),{items:[Ri.sketch(Ot(ie({},h["overflow-button"]()),{action:E=>{ns(S,b)}}))]}))}}),So("toolbar-toggle-events",[_t(b,S=>{xD(S,t)})])]),apis:{setGroups:(S,E)=>{w(S,E),SD(S,t)},refresh:S=>SD(S,t),toggle:S=>xD(S,t),isOpen:S=>zq(S,t)},domModification:{attributes:{role:"group"}}}},Mv=ka({name:"SplitSlidingToolbar",configFields:Hq(),partFields:Vq(),factory:Uq,apis:{setGroups:(t,r,c)=>{t.setGroups(r,c)},refresh:(t,r)=>{t.refresh(r)},toggle:(t,r)=>{t.toggle(r)},isOpen:(t,r)=>t.isOpen(r)}}),JI=t=>{const r=t.title.fold(()=>({}),c=>({attributes:{title:c}}));return{dom:ie({tag:"div",classes:["tox-toolbar__group"]},r),components:[iC.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Kt([lr.config({}),Xn.config({})])}},Og=t=>iC.sketch(JI(t)),QI=(t,r)=>{const c=nr(h=>{const b=ce(t.initGroups,Og);md.setGroups(h,b)});return Kt([ni.toolbarButton(t.providers.isDisabled),ii(),Fn.config({mode:r,onEscape:t.onEscape,selector:".tox-toolbar__group"}),So("toolbar-events",[c])])},CD=t=>{const r=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":JI({title:O.none(),items:[]}),"overflow-button":Vj({name:"more",icon:O.some("more-drawer"),enabled:!0,tooltip:O.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:O.none(),borderless:!1},O.none(),t.providers)},splitToolbarBehaviours:QI(t,r)}},Wq=t=>{const r=CD(t),c=4,h=XI.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return XI.sketch(Ot(ie({},r),{lazySink:t.getSink,getOverflowBounds:()=>{const b=t.moreDrawerData.lazyHeader().element,w=fl(b),S=oa(b),E=fl(S),D=Math.max(S.dom.scrollHeight,E.height);return Xr(w.x+c,E.y,w.width-c*2,D)},parts:Ot(ie({},r.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[h],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:b=>t.onToggled(b,!0),onClosed:b=>t.onToggled(b,!1)}))},jq=t=>{const r=Mv.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),c=Mv.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),h=CD(t);return Mv.sketch(Ot(ie({},h),{components:[r,c],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:b=>{b.getSystem().broadcastOn([Ag()],{type:"opened"}),t.onToggled(b,!0)},onClosed:b=>{b.getSystem().broadcastOn([Ag()],{type:"closed"}),t.onToggled(b,!1)}}))},kD=t=>{const r=t.cyclicKeying?"cyclic":"acyclic";return md.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===$l.scrolling?["tox-toolbar--scrolling"]:[])},components:[md.parts.groups({})],toolbarBehaviours:QI(t,r)})},eL=[Yd,vc,Na("tooltip"),sc("buttonType","secondary",["primary","secondary"]),Hi("borderless",!1),ju("onAction")],Zq=[...eL,rh,Wu("type",["button"])],AD=[...eL,Hi("active",!1),Wu("type",["togglebutton"])],tL={button:Zq,togglebutton:AD},aC=[Wu("type",["group"]),qu("buttons",[],ms("type",tL))],nL=ms("type",Ot(ie({},tL),{group:aC})),oL=Ln([qu("buttons",[],nL),ju("onShow"),ju("onHide")]),ED=t=>Tr("view",oL,t),qq=(t,r)=>{var c,h;const b=t.type==="togglebutton",w=t.icon.map(Xe=>em(Xe,r.icons)).map(As),E=Xe=>{const Ft=jt=>{w.map(Jt=>Jt.getOpt(Xe).each(Co=>{po.set(Co,[em(jt,r.icons)])}))},Et=jt=>{const Jt=Xe.element;jt?(ti(Jt,"tox-button--enabled"),sn(Jt,"aria-pressed",!0)):(wr(Jt,"tox-button--enabled"),pe(Jt,"aria-pressed"))},St=()=>vi(Xe.element,"tox-button--enabled");if(b)return t.onAction({setIcon:Ft,setActive:Et,isActive:St});if(t.type==="button")return t.onAction({setIcon:Ft})},D=Ot(ie({},t),{name:b?t.text.getOr(t.icon.getOr("")):(c=t.text)!==null&&c!==void 0?c:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:O.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless}),P=IO((h=t.buttonType)!==null&&h!==void 0?h:"secondary"),B=b?t.text.map(r.translate):O.some(r.translate(t.text)),H=B.map(Lr),j=D.tooltip.or(B).map(Xe=>({"aria-label":r.translate(Xe),title:r.translate(Xe)})).getOr({}),Y=w.map(Xe=>Xe.asSpec()),oe=l1([Y,H]),Ce=t.icon.isSome()&&H.isSome(),Qe={tag:"button",classes:P.concat(...t.icon.isSome()&&!Ce?["tox-button--icon"]:[]).concat(...Ce?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:j},Le=[],_e=LS(D,O.some(E),Le,Qe,oe,r);return Ri.sketch(_e)},TD=(t,r)=>qq(t,r),O1=(t,r)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:ce(t.buttons,c=>TD(c,r))}),OD=eu().deviceType,Gq=OD.isPhone(),Kq=OD.isTablet(),Yq=t=>{let r=!1;const c=ce(t.buttons,h=>h.type==="group"?(r=!0,O1(h,t.providers)):TD(h,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[r?"tox-view__toolbar":"tox-view__header",...Gq||Kq?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Kt([Xn.config({}),Fn.config({mode:"flow",selector:"button, .tox-button",focusInside:Lh.OnEnterOrSpaceMode})]),components:r?c:[ld.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),ld.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:c})]}},DD=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),Xq=(t,r,c,h)=>{const b={getPane:w=>Pi.getPart(w,t,"pane"),getOnShow:w=>t.viewConfig.onShow,getOnHide:w=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:r,apis:b}};var D1=ka({name:"silver.View",configFields:[Pt("viewConfig")],partFields:[gc({factory:{sketch:Yq},schema:[Pt("buttons"),Pt("providers")],name:"header"}),gc({factory:{sketch:DD},schema:[],name:"pane"})],factory:Xq,apis:{getPane:(t,r)=>t.getPane(r),getOnShow:(t,r)=>t.getOnShow(r),getOnHide:(t,r)=>t.getOnHide(r)}});const sL=(t,r,c)=>Qo(r,(h,b)=>{const w=Zs(ED(h));return t.slot(b,D1.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:w,components:[...w.buttons.length>0?[D1.parts.header({buttons:w.buttons,providers:c})]:[],D1.parts.pane({})]}))}),rL=(t,r)=>za.sketch(c=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:sL(c,t,r),slotBehaviours:Vb.unnamedEvents([nr(h=>za.hideAllSlots(h))])})),Rv=t=>Je(za.getSlotNames(t),r=>za.isShowing(t,r)),_D=t=>{const r=t.element;xn(r,"display","none"),sn(r,"aria-hidden","true")},Jq=t=>{const r=t.element;es(r,"display"),pe(r,"aria-hidden")},Qq=t=>({getContainer:K(t)}),MD=(t,r,c)=>{za.getSlot(t,r).each(h=>{D1.getPane(h).each(b=>{c(h)(Qq(b.element.dom))})})},eG=(t,r)=>MD(t,r,D1.getOnShow),tG=(t,r)=>MD(t,r,D1.getOnHide);var Pv=Fl({factory:(t,r)=>{const w={setViews:(S,E)=>{po.set(S,[rL(E,r.backstage.shared.providers)])},whichView:S=>Zo.getCurrent(S).bind(Rv),toggleView:(S,E,D,P)=>Zo.getCurrent(S).exists(B=>{const H=Rv(B),j=H.exists(oe=>P===oe),Y=za.getSlot(B,P).isSome();return Y&&(za.hideAllSlots(B),j?(_D(S),E()):(D(),Jq(S),za.showSlot(B,P),eG(B,P)),H.each(oe=>tG(B,oe))),Y})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Kt([po.config({}),Zo.config({find:S=>{const E=po.contents(S);return en(E)}})]),apis:w}},name:"silver.ViewWrapper",configFields:[Pt("backstage")],apis:{setViews:(t,r,c)=>t.setViews(r,c),toggleView:(t,r,c,h,b)=>t.toggleView(r,c,h,b),whichView:(t,r)=>t.whichView(r)}});const nG=(t,r,c)=>{let h=!1;const b={getSocket:w=>Pi.getPart(w,t,"socket"),setSidebar:(w,S,E)=>{Pi.getPart(w,t,"sidebar").each(D=>yq(D,S,E))},toggleSidebar:(w,S)=>{Pi.getPart(w,t,"sidebar").each(E=>FI(E,S))},whichSidebar:w=>Pi.getPart(w,t,"sidebar").bind(wq).getOrNull(),getHeader:w=>Pi.getPart(w,t,"header"),getToolbar:w=>Pi.getPart(w,t,"toolbar"),setToolbar:(w,S)=>{Pi.getPart(w,t,"toolbar").each(E=>{const D=ce(S,Og);E.getApis().setGroups(E,D)})},setToolbars:(w,S)=>{Pi.getPart(w,t,"multiple-toolbar").each(E=>{const D=ce(S,P=>ce(P,Og));gI.setItems(E,D)})},refreshToolbar:w=>{Pi.getPart(w,t,"toolbar").each(E=>E.getApis().refresh(E))},toggleToolbarDrawer:w=>{Pi.getPart(w,t,"toolbar").each(S=>{us(S.getApis().toggle,E=>E(S))})},toggleToolbarDrawerWithoutFocusing:w=>{Pi.getPart(w,t,"toolbar").each(S=>{us(S.getApis().toggleWithoutFocusing,E=>E(S))})},isToolbarDrawerToggled:w=>Pi.getPart(w,t,"toolbar").bind(S=>O.from(S.getApis().isOpen).map(E=>E(S))).getOr(!1),getThrobber:w=>Pi.getPart(w,t,"throbber"),focusToolbar:w=>{Pi.getPart(w,t,"toolbar").orThunk(()=>Pi.getPart(w,t,"multiple-toolbar")).each(E=>{Fn.focusIn(E)})},setMenubar:(w,S)=>{Pi.getPart(w,t,"menubar").each(E=>{Dv.setMenus(E,S)})},focusMenubar:w=>{Pi.getPart(w,t,"menubar").each(S=>{Dv.focus(S)})},setViews:(w,S)=>{Pi.getPart(w,t,"viewWrapper").each(E=>{Pv.setViews(E,S)})},toggleView:(w,S)=>Pi.getPart(w,t,"viewWrapper").exists(E=>Pv.toggleView(E,()=>b.showMainView(w),()=>b.hideMainView(w),S)),whichView:w=>Pi.getPart(w,t,"viewWrapper").bind(Pv.whichView).getOrNull(),hideMainView:w=>{h=b.isToolbarDrawerToggled(w),h&&b.toggleToolbarDrawer(w),Pi.getPart(w,t,"editorContainer").each(S=>{const E=S.element;xn(E,"display","none"),sn(E,"aria-hidden","true")})},showMainView:w=>{h&&b.toggleToolbarDrawer(w),Pi.getPart(w,t,"editorContainer").each(S=>{const E=S.element;es(E,"display"),pe(E,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:r,apis:b,behaviours:t.behaviours}},oG=hd.optional({factory:Dv,name:"menubar",schema:[Pt("backstage")]}),RD=t=>t.type===$l.sliding?jq:t.type===$l.floating?Wq:kD,sG=hd.optional({factory:{sketch:t=>gI.sketch({uid:t.uid,dom:t.dom,listBehaviours:Kt([Fn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>kD({type:t.type,uid:pn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),O.some(!0))}),setupItem:(r,c,h,b)=>{md.setGroups(c,h)},shell:!0})},name:"multiple-toolbar",schema:[Pt("dom"),Pt("onEscape")]}),rG=hd.optional({factory:{sketch:t=>{const r=RD(t),c={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),O.some(!0)),onToggled:(h,b)=>t.onToolbarToggled(b),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return r(c)}},name:"toolbar",schema:[Pt("dom"),Pt("onEscape"),Pt("getSink")]}),iL=hd.optional({factory:{sketch:mD},name:"header",schema:[Pt("dom")]}),iG=hd.optional({factory:{sketch:bD},name:"promotion",schema:[Pt("dom")]}),aL=hd.optional({name:"socket",schema:[Pt("dom")]}),aG=hd.optional({factory:{sketch:Wee},name:"sidebar",schema:[Pt("dom")]}),lL=hd.optional({factory:{sketch:eC},name:"throbber",schema:[Pt("dom")]}),lG=hd.optional({factory:Pv,name:"viewWrapper",schema:[Pt("backstage")]}),cG=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),uG=hd.optional({factory:{sketch:cG},name:"editorContainer",schema:[]});var Hs=ka({name:"OuterContainer",factory:nG,configFields:[Pt("dom"),Pt("behaviours")],partFields:[iL,oG,rG,sG,aL,aG,iG,lL,lG,uG],apis:{getSocket:(t,r)=>t.getSocket(r),setSidebar:(t,r,c,h)=>{t.setSidebar(r,c,h)},toggleSidebar:(t,r,c)=>{t.toggleSidebar(r,c)},whichSidebar:(t,r)=>t.whichSidebar(r),getHeader:(t,r)=>t.getHeader(r),getToolbar:(t,r)=>t.getToolbar(r),setToolbar:(t,r,c)=>{t.setToolbar(r,c)},setToolbars:(t,r,c)=>{t.setToolbars(r,c)},refreshToolbar:(t,r)=>t.refreshToolbar(r),toggleToolbarDrawer:(t,r)=>{t.toggleToolbarDrawer(r)},toggleToolbarDrawerWithoutFocusing:(t,r)=>{t.toggleToolbarDrawerWithoutFocusing(r)},isToolbarDrawerToggled:(t,r)=>t.isToolbarDrawerToggled(r),getThrobber:(t,r)=>t.getThrobber(r),setMenubar:(t,r,c)=>{t.setMenubar(r,c)},focusMenubar:(t,r)=>{t.focusMenubar(r)},focusToolbar:(t,r)=>{t.focusToolbar(r)},setViews:(t,r,c)=>{t.setViews(r,c)},toggleView:(t,r,c)=>t.toggleView(r,c),whichView:(t,r)=>t.whichView(r)}});const dG="file edit view insert format tools table help",cL={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},fG=(t,r,c)=>{const h=pE(c).split(/[ ,]/);return{text:t.title,getItems:()=>ue(t.items,b=>{const w=b.toLowerCase();return w.trim().length===0?[]:yt(h,S=>S===w)?[]:w==="separator"||w==="|"?[{type:"separator"}]:r.menuItems[w]?[r.menuItems[w]]:[]})}},Nv=t=>t.split(" "),lC=(t,r)=>{const c=ie(ie({},cL),r.menus),h=Kn(r.menus).length>0,b=r.menubar===void 0||r.menubar===!0?Nv(dG):Nv(r.menubar===!1?"":r.menubar),w=cn(b,E=>{const D=xo(cL,E);return h?D||$t(r.menus,E).exists(P=>xo(P,"items")):D}),S=ce(w,E=>{const D=c[E];return fG({title:D.title,items:Nv(D.items)},r,t)});return cn(S,E=>{const D=P=>v(P)||P.type!=="separator";return E.getItems().length>0&&yt(E.getItems(),D)})},hG=t=>{const r=()=>{t._skinLoaded=!0,mz(t)};return()=>{t.initialized?r():t.on("init",r)}},mG=(t,r)=>()=>dT(t,{message:r}),uL=(t,r,c)=>(t.on("remove",()=>c.unload(r)),c.load(r)),PD=(t,r,c,h)=>(t.on("remove",()=>h.unloadRawCss(r)),h.loadRawCss(r,c)),gG=(t,r)=>Ko(this,null,function*(){const h="ui/"+Dx(t).getOr("default")+"/skin.css",b=tinymce.Resource.get(h);if(v(b))return Promise.resolve(PD(t,h,b,t.ui.styleSheetLoader));{const w=r+"/skin.min.css";return uL(t,w,t.ui.styleSheetLoader)}}),pG=(t,r)=>Ko(this,null,function*(){if(jn(Tt.fromDom(t.getElement()))){const b="ui/"+Dx(t).getOr("default")+"/skin.shadowdom.css",w=tinymce.Resource.get(b);if(v(w))return PD(t,b,w,hg.DOM.styleSheetLoader),Promise.resolve();{const S=r+"/skin.shadowdom.min.css";return uL(t,S,hg.DOM.styleSheetLoader)}}}),bG=(t,r)=>Ko(this,null,function*(){Dx(r).fold(()=>{const h=Ox(r);h&&r.contentCSS.push(h+(t?"/content.inline":"/content")+".min.css")},h=>{const b="ui/"+h+(t?"/content.inline":"/content")+".css",w=tinymce.Resource.get(b);if(v(w))PD(r,b,w,r.ui.styleSheetLoader);else{const S=Ox(r);S&&r.contentCSS.push(S+(t?"/content.inline":"/content")+".min.css")}});const c=Ox(r);if(!CE(r)&&v(c))return Promise.all([gG(r,c),pG(r,c)]).then()}),dL=(t,r)=>bG(t,r).then(hG(r),mG(r,"Skin could not be loaded")),vG=Ue(dL,!1),fL=Ue(dL,!0),fh=(t,r,c)=>t.translate([r,t.translate(c)]),ND=(t,r)=>{const c=(S,E,D,P)=>{const B=t.shared.providers.translate(S.title);if(S.type==="separator")return O.some({type:"separator",text:B});if(S.type==="submenu"){const H=ue(S.getStyleItems(),j=>h(j,E,P));return E===0&&H.length<=0?O.none():O.some({type:"nestedmenuitem",text:B,enabled:H.length>0,getSubmenuItems:()=>ue(S.getStyleItems(),j=>h(j,E,P))})}else return O.some(ie({type:"togglemenuitem",text:B,icon:S.icon,active:S.isSelected(P),enabled:!D,onAction:r.onAction(S)},S.getStylePreview().fold(()=>({}),H=>({meta:{style:H}}))))},h=(S,E,D)=>{const P=S.type==="formatter"&&r.isInvalid(S);return E===0?P?[]:c(S,E,!1,D).toArray():c(S,E,P,D).toArray()},b=S=>{const E=r.getCurrentValue(),D=r.shouldHide?0:1;return ue(S,P=>h(P,D,E))};return{validateItems:b,getFetch:(S,E)=>(D,P)=>{const B=E(),H=b(B),j=C1(H,ad.CLOSE_ON_EXECUTE,S,{isHorizontalMenu:!1,search:O.none()});P(j)}}},Dg=(t,r,c)=>{const h=c.dataset,b=h.type==="basic"?()=>ce(h.data,w=>Cv(w,c.isSelectedFor,c.getPreviewFor)):h.getData;return{items:ND(r,c),getStyleItems:b}},ku=(t,r,c,h,b)=>{const{items:w,getStyleItems:S}=Dg(t,r,c),E=P=>({getComponent:K(P),setTooltip:B=>{const H=r.shared.providers.translate(B);Pu(P.element,{"aria-label":H,title:H})}}),D=P=>{const B=H=>P.setTooltip(fh(t,h,H.value));return t.on(b,B),Zb(bu(t,"NodeChange",H=>{const j=H.getComponent();c.updateText(j),qn.set(H.getComponent(),!t.selection.isEditable())})(P),()=>t.off(b,B))};return SO({text:c.icon.isSome()?O.none():c.text,icon:c.icon,tooltip:O.from(c.tooltip),role:O.none(),fetch:w.getFetch(r,S),onSetup:D,getApi:E,columns:1,presets:"normal",classes:c.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",r.shared)},hL=t=>ce(t,r=>{let c=r,h=r;const b=r.split("=");return b.length>1&&(c=b[0],h=b[1]),{title:c,format:h}}),yG=t=>({type:"basic",data:t});var _1;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(_1||(_1={}));const wG=(t,r)=>r===_1.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),BD=(t,r,c)=>{const h=t.options.get(r);return{type:"basic",data:hL(wG(h,c))}},xG="Align",mL="Alignment {0}",gL="left",cC=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],pL=t=>{const r=()=>Je(cC,E=>t.formatter.match(E.format)),c=E=>()=>t.formatter.match(E),h=E=>O.none,b=E=>{const P=r().fold(K(gL),B=>B.title.toLowerCase());Hn(E,tm,{icon:`align-${P}`}),vz(t,{value:P})},w=yG(cC),S=E=>()=>Je(cC,D=>D.format===E.format).each(D=>t.execCommand(D.command));return{tooltip:fh(t,mL,gL),text:O.none(),icon:O.some("align-left"),isSelectedFor:c,getCurrentValue:O.none,getPreviewFor:h,onAction:S,updateText:b,dataset:w,shouldHide:!1,isInvalid:E=>!t.formatter.canApply(E.format)}},SG=(t,r)=>ku(t,r,pL(t),mL,"AlignTextUpdate"),FD=(t,r)=>{const c=Dg(t,r,pL(t));t.ui.registry.addNestedMenuItem("align",{text:r.shared.providers.translate(xG),onSetup:Va(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},bL=(t,r)=>{const c=r(),h=ce(c,b=>b.format);return O.from(t.formatter.closest(h)).bind(b=>Je(c,w=>w.format===b)).orThunk(()=>Bn(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},CG="Blocks",vL="Block {0}",ID="Paragraph",yL=t=>{const r=w=>()=>t.formatter.match(w),c=w=>()=>{const S=t.formatter.get(w);return S?O.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(w))}):O.none()},h=w=>{const E=bL(t,()=>b.data).fold(K(ID),D=>D.title);Hn(w,xc,{text:E}),hN(t,{value:E})},b=BD(t,"block_formats",_1.SemiColon);return{tooltip:fh(t,vL,ID),text:O.some(ID),icon:O.none(),isSelectedFor:r,getCurrentValue:O.none,getPreviewFor:c,onAction:gN(t),updateText:h,dataset:b,shouldHide:!1,isInvalid:w=>!t.formatter.canApply(w.format)}},kG=(t,r)=>ku(t,r,yL(t),vL,"BlocksTextUpdate"),wL=(t,r)=>{const c=Dg(t,r,yL(t));t.ui.registry.addNestedMenuItem("blocks",{text:CG,onSetup:Va(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},xL="Fonts",LD="Font {0}",$D="System Font",SL=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],CL=t=>{const r=t.split(/\s*,\s*/);return ce(r,c=>c.replace(/^['"]+|['"]+$/g,""))},kL=(t,r)=>r.length>0&&xe(r,c=>t.indexOf(c.toLowerCase())>-1),AG=(t,r)=>{if(t.indexOf("-apple-system")===0||r.length>0){const c=CL(t.toLowerCase());return kL(c,SL)||kL(c,r)}else return!1},HD=t=>{const r=()=>{const D=oe=>oe?CL(oe)[0]:"",P=t.queryCommandValue("FontName"),B=E.data,H=P?P.toLowerCase():"",j=QR(t);return{matchOpt:Je(B,oe=>{const Ce=oe.format;return Ce.toLowerCase()===H||D(Ce).toLowerCase()===D(H).toLowerCase()}).orThunk(()=>Bn(AG(H,j),{title:$D,format:H})),font:P}},c=D=>P=>P.exists(B=>B.format===D),h=()=>{const{matchOpt:D}=r();return D},b=D=>()=>O.some({tag:"div",styles:D.indexOf("dings")===-1?{"font-family":D}:{}}),w=D=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,D.format)})},S=D=>{const{matchOpt:P,font:B}=r(),H=P.fold(K(B),j=>j.title);Hn(D,xc,{text:H}),mN(t,{value:H})},E=BD(t,"font_family_formats",_1.SemiColon);return{tooltip:fh(t,LD,$D),text:O.some($D),icon:O.none(),isSelectedFor:c,getCurrentValue:h,getPreviewFor:b,onAction:w,updateText:S,dataset:E,shouldHide:!1,isInvalid:ne}},EG=(t,r)=>ku(t,r,HD(t),LD,"FontFamilyTextUpdate"),AL=(t,r)=>{const c=Dg(t,r,HD(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:r.shared.providers.translate(xL),onSetup:Va(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},TG={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},OG=(()=>{const t="[0-9]+",c="[eE]"+("[+-]?"+t),h="\\.",b=E=>`(?:${E})?`,S=`[+-]?(?:${["Infinity",t+h+b(t)+b(c),h+t+b(c),t+b(c)].join("|")})`;return new RegExp(`^(${S})(.*)$`)})(),DG=(t,r)=>yt(r,c=>yt(TG[c],h=>t===h)),uC=(t,r)=>O.from(OG.exec(t)).bind(h=>{const b=Number(h[1]),w=h[2];return DG(w,r)?O.some({value:b,unit:w}):O.none()}),_G=(t,r)=>uC(t,r).map(({value:c,unit:h})=>c+h),EL={tab:K(9),escape:K(27),enter:K(13),backspace:K(8),delete:K(46),left:K(37),up:K(38),right:K(39),down:K(40),space:K(32),home:K(36),end:K(35),pageUp:K(33),pageDown:K(34)},MG=(t,r,c)=>{let h=O.none();const b=_e=>_e.map(Xe=>ln.getValue(Xe)).getOr(""),w=bu(t,"NodeChange SwitchMode",_e=>{const Xe=_e.getComponent();h=O.some(Xe),c.updateInputValue(Xe),qn.set(Xe,!t.selection.isEditable())}),S=_e=>({getComponent:K(_e)}),E=Zn(Z),D=pn("custom-number-input-events"),P=(_e,Xe,Ft)=>{const Et=b(h),St=c.getNewValue(Et,_e),jt=Et.length-`${St}`.length,Jt=h.map(fn=>fn.element.dom.selectionStart-jt),Co=h.map(fn=>fn.element.dom.selectionEnd-jt);c.onAction(St,Ft),h.each(fn=>{ln.setValue(fn,St),Xe&&(Jt.each(ro=>fn.element.dom.selectionStart=ro),Co.each(ro=>fn.element.dom.selectionEnd=ro))})},B=(_e,Xe)=>P((Ft,Et)=>Ft-Et,_e,Xe),H=(_e,Xe)=>P((Ft,Et)=>Ft+Et,_e,Xe),j=_e=>ga(_e.element).fold(O.none,Xe=>(dc(Xe),O.some(!0))),Y=_e=>Z0(_e.element)?(Oc(_e.element).each(Xe=>dc(Xe)),O.some(!0)):O.none(),oe=(_e,Xe,Ft,Et)=>{const St=Zn(Z),jt=r.shared.providers.translate(Ft),Jt=pn("altExecuting"),Co=bu(t,"NodeChange SwitchMode",ro=>{qn.set(ro.getComponent(),!t.selection.isEditable())}),fn=ro=>{qn.isDisabled(ro)||_e(!0)};return Ri.sketch({dom:{tag:"button",attributes:{title:jt,"aria-label":jt},classes:Et.concat(Xe)},components:[xO(Xe,r.shared.providers.icons)],buttonBehaviours:Kt([qn.config({}),So(Jt,[Wh({onSetup:Co,getApi:S},St),Jd({getApi:S},St),_t(Gu(),(ro,Jn)=>{(Jn.event.raw.keyCode===EL.space()||Jn.event.raw.keyCode===EL.enter())&&(qn.isDisabled(ro)||_e(!1))}),_t(Oh(),fn),_t(Hm(),fn)])]),eventOrder:{[Gu()]:[Jt,"keying"],[Oh()]:[Jt,"alloy.base.behaviour"],[Hm()]:[Jt,"alloy.base.behaviour"]}})},Ce=As(oe(_e=>B(!1,_e),"minus","Decrease font size",[])),Qe=As(oe(_e=>H(!1,_e),"plus","Increase font size",[])),Le=As({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[gg.sketch({inputBehaviours:Kt([qn.config({}),So(D,[Wh({onSetup:w,getApi:S},E),Jd({getApi:S},E)]),So("input-update-display-text",[_t(xc,(_e,Xe)=>{ln.setValue(_e,Xe.event.text)}),_t(V2(),_e=>{c.onAction(ln.getValue(_e))}),_t(cp(),_e=>{c.onAction(ln.getValue(_e))})]),Fn.config({mode:"special",onEnter:_e=>(P(Ie,!0,!0),O.some(!0)),onEscape:j,onUp:_e=>(H(!0,!1),O.some(!0)),onDown:_e=>(B(!0,!1),O.some(!0)),onLeft:(_e,Xe)=>(Xe.cut(),O.none()),onRight:(_e,Xe)=>(Xe.cut(),O.none())})])})],behaviours:Kt([Xn.config({}),Fn.config({mode:"special",onEnter:Y,onSpace:Y,onEscape:j}),So("input-wrapper-events",[_t(Nf(),_e=>{Ze([Ce,Qe],Xe=>{const Ft=Tt.fromDom(Xe.get(_e).element.dom);Z0(Ft)&&Tk(Ft)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[Ce.asSpec(),Le.asSpec(),Qe.asSpec()],behaviours:Kt([Xn.config({}),Fn.config({mode:"flow",focusInside:Lh.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:_e=>Z0(_e.element)?O.none():(dc(_e.element),O.some(!0))})])}},TL="Font sizes",OL="Font size {0}",DL="12pt",RG={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},PG={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},NG=(t,r)=>{const c=Math.pow(10,r);return Math.round(t*c)/c},BG=(t,r)=>/[0-9.]+px$/.test(t)?NG(parseInt(t,10)*72/96,r||0)+"pt":$t(PG,t).getOr(t),FG=t=>$t(RG,t).getOr(""),VD=t=>{const r=()=>{let D=O.none();const P=E.data,B=t.queryCommandValue("FontSize");if(B)for(let H=3;D.isNone()&&H>=0;H--){const j=BG(B,H),Y=FG(j);D=Je(P,oe=>oe.format===B||oe.format===j||oe.format===Y)}return{matchOpt:D,size:B}},c=D=>P=>P.exists(B=>B.format===D),h=()=>{const{matchOpt:D}=r();return D},b=K(O.none),w=D=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,D.format)})},S=D=>{const{matchOpt:P,size:B}=r(),H=P.fold(K(B),j=>j.title);Hn(D,xc,{text:H}),yz(t,{value:H})},E=BD(t,"font_size_formats",_1.Space);return{tooltip:fh(t,OL,DL),text:O.some(DL),icon:O.none(),isSelectedFor:c,getPreviewFor:b,getCurrentValue:h,onAction:w,updateText:S,dataset:E,shouldHide:!1,isInvalid:ne}},IG=(t,r)=>ku(t,r,VD(t),OL,"FontSizeTextUpdate"),LG=t=>{var r;const c={step:1};return(r={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&r!==void 0?r:c},_L=16,$G=t=>t>=0,ML=t=>{const r=()=>t.queryCommandValue("FontSize");return{updateInputValue:h=>Hn(h,xc,{text:r()}),onAction:(h,b)=>t.execCommand("FontSize",!1,h,{skip_focus:!b}),getNewValue:(h,b)=>{uC(h,["unsupportedLength","empty"]);const w=r(),S=uC(h,["unsupportedLength","empty"]).or(uC(w,["unsupportedLength","empty"])),E=S.map(j=>j.value).getOr(_L),D=GR(t),P=S.map(j=>j.unit).filter(j=>j!=="").getOr(D),B=b(E,LG(P).step),H=`${$G(B)?B:E}${P}`;return H!==w&&wz(t,{value:H}),H}}},RL=(t,r)=>MG(t,r,ML(t)),HG=(t,r)=>{const c=Dg(t,r,VD(t));t.ui.registry.addNestedMenuItem("fontsize",{text:TL,onSetup:Va(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},VG="Formats",PL="Format {0}",_g=(t,r)=>{const c="Paragraph",h=S=>()=>t.formatter.match(S),b=S=>()=>{const E=t.formatter.get(S);return E!==void 0?O.some({tag:E.length>0&&(E[0].inline||E[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(S))}):O.none()},w=S=>{const E=H=>ZF(H)?ue(H.items,E):Sv(H)?[{title:H.title,format:H.format}]:[],D=ue(KF(t),E),B=bL(t,K(D)).fold(K(c),H=>H.title);Hn(S,xc,{text:B}),bz(t,{value:B})};return{tooltip:fh(t,PL,c),text:O.some(c),icon:O.none(),isSelectedFor:h,getCurrentValue:O.none,getPreviewFor:b,onAction:gN(t),updateText:w,shouldHide:UR(t),isInvalid:S=>!t.formatter.canApply(S.format),dataset:r}},zG=(t,r)=>{const c=ie({type:"advanced"},r.styles);return ku(t,r,_g(t,c),PL,"StylesTextUpdate")},UG=(t,r)=>{const c=ie({type:"advanced"},r.styles),h=Dg(t,r,_g(t,c));t.ui.registry.addNestedMenuItem("styles",{text:VG,onSetup:Va(t),getSubmenuItems:()=>h.items.validateItems(h.getStyleItems())})},WG=K([Pt("toggleClass"),Pt("fetch"),ed("onExecute"),et("getHotspot",O.some),et("getAnchorOverrides",K({})),Bh(),ed("onItemExecute"),Ds("lazySink"),Pt("dom"),os("onOpen"),yi("splitDropdownBehaviours",[Pr,Fn,Xn]),et("matchWidth",!1),et("useMinWidth",!1),et("eventOrder",{}),Ds("role")].concat(NT())),jG=Ca({factory:Ri,schema:[Pt("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Kt([Xn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(t.uid).each(Ff)},buttonBehaviours:Kt([No.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),ZG=Ca({factory:Ri,schema:[Pt("dom")],name:"button",defaults:()=>({buttonBehaviours:Kt([Xn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(t.uid).each(c=>{t.onExecute(c,r)})}})}),qG=K([jG,ZG,gc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Pt("text")],name:"aria-descriptor"}),uu({schema:[hw()],name:"menu",defaults:t=>({onExecute:(r,c)=>{r.getSystem().getByUid(t.uid).each(h=>{t.onItemExecute(h,r,c)})}})}),NN()]),GG=(t,r,c,h)=>{const b=B=>{Zo.getCurrent(B).each(H=>{gs.highlightFirst(H),Fn.focusIn(H)})},w=B=>{RT(t,Ie,B,h,b,Ha.HighlightMenuAndItem).get(Z)},S=B=>(w(B),O.some(!0)),E=B=>{const H=Xf(B,t,"button");return Ff(H),O.some(!0)},D=ie(ie({},ar([nr((B,H)=>{Gs(B,t,"aria-descriptor").each(Y=>{const oe=pn("aria");sn(Y.element,"id",oe),sn(B.element,"aria-describedby",oe)})})])),sd(O.some(w))),P={repositionMenus:B=>{No.isOn(B)&&LN(B)}};return{uid:t.uid,dom:t.dom,components:r,apis:P,eventOrder:Ot(ie({},t.eventOrder),{[ac()]:["disabling","toggling","alloy.base.behaviour"]}),events:D,behaviours:Mi(t.splitDropdownBehaviours,[Pr.config({others:{sandbox:B=>{const H=Xf(B,t,"arrow");return PT(t,B,{onOpen:()=>{No.on(H),No.on(B)},onClose:()=>{No.off(H),No.off(B)}})}}}),Fn.config({mode:"special",onSpace:E,onEnter:E,onDown:S}),Xn.config({}),No.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},dC=ka({name:"SplitDropdown",configFields:WG(),partFields:qG(),factory:GG,apis:{repositionMenus:(t,r)=>t.repositionMenus(r)}}),fC=t=>({isEnabled:()=>!qn.isDisabled(t),setEnabled:r=>qn.set(t,!r),setText:r=>Hn(t,xc,{text:r}),setIcon:r=>Hn(t,tm,{icon:r})}),KG=t=>({setActive:r=>{No.set(t,r)},isActive:()=>No.isOn(t),isEnabled:()=>!qn.isDisabled(t),setEnabled:r=>qn.set(t,!r),setText:r=>Hn(t,xc,{text:r}),setIcon:r=>Hn(t,tm,{icon:r})}),NL=(t,r)=>t.map(c=>({"aria-label":r.translate(c),title:r.translate(c)})).getOr({}),zD=pn("focus-button"),hC=(t,r,c,h,b)=>{const w=r.map(E=>As(XB(E,"tox-tbtn",b))),S=t.map(E=>As(em(E,b.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(r.isSome()?["tox-tbtn--select"]:[]),attributes:NL(c,b)},components:l1([S.map(E=>E.asSpec()),w.map(E=>E.asSpec())]),eventOrder:{[bi()]:["focusing","alloy.base.behaviour",Cg],[Yu()]:[Cg,"toolbar-group-button-events"]},buttonBehaviours:Kt([ni.toolbarButton(b.isDisabled),ii(),So(Cg,[nr((E,D)=>yO(E)),_t(xc,(E,D)=>{w.bind(P=>P.getOpt(E)).each(P=>{po.set(P,[Lr(b.translate(D.event.text))])})}),_t(tm,(E,D)=>{S.bind(P=>P.getOpt(E)).each(P=>{po.set(P,[em(D.event.icon,b.icons)])})}),_t(bi(),(E,D)=>{D.event.prevent(),ns(E,zD)})])].concat(h.getOr([])))}},YG=(t,r,c,h)=>{const b=r.shared,w=Zn(Z),S={toolbarButtonBehaviours:[],getApi:fC,onSetup:t.onSetup},E=[So("toolbar-group-button-events",[Wh(S,w),Jd(S,w)])];return sm.sketch({lazySink:b.getSink,fetch:()=>da.nu(D=>{D(ce(c(t.items),Og))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:hC(t.icon,t.text,t.tooltip,O.some(E),b.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:h}}}})},BL=(t,r,c)=>{var h;const b=Zn(Z),w=hC(t.icon,t.text,t.tooltip,O.none(),c);return Ri.sketch({dom:w.dom,components:w.components,eventOrder:MS,buttonBehaviours:Ot(ie({},Kt([So("toolbar-button-events",[ij({onAction:t.onAction,getApi:r.getApi}),Wh(r,b),Jd(r,b)]),ni.toolbarButton(()=>!t.enabled||c.isDisabled()),ii()].concat(r.toolbarButtonBehaviours))),{[Cg]:(h=w.buttonBehaviours)===null||h===void 0?void 0:h[Cg]})})},XG=(t,r)=>FL(t,r,[]),FL=(t,r,c)=>BL(t,{toolbarButtonBehaviours:c.length>0?[So("toolbarButtonWith",c)]:[],getApi:fC,onSetup:t.onSetup},r),JG=(t,r)=>IL(t,r,[]),IL=(t,r,c)=>BL(t,{toolbarButtonBehaviours:[po.config({}),No.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(c.length>0?[So("toolbarToggleButtonWith",c)]:[]),getApi:KG,onSetup:t.onSetup},r),LL=(t,r,c)=>h=>da.nu(b=>r.fetch(b)).map(b=>O.from(iS(Ls(AT(pn("menu-value"),b,w=>{r.onItemAction(t(h),w)},r.columns,r.presets,ad.CLOSE_ON_EXECUTE,r.select.getOr(ne),c),{movement:nS(r.columns,r.presets),menuBehaviours:Vb.unnamedEvents(r.columns!=="auto"?[]:[nr((w,S)=>{JE(w,4,cP(r.presets)).each(({numRows:E,numColumns:D})=>{Fn.setGridSize(w,E,D)})})])})))),QG=(t,r)=>{const c=w=>({isEnabled:()=>!qn.isDisabled(w),setEnabled:S=>qn.set(w,!S),setIconFill:(S,E)=>{Zr(w.element,`svg path[class="${S}"], rect[class="${S}"]`).each(D=>{sn(D,"fill",E)})},setActive:S=>{sn(w.element,"aria-pressed",S),Zr(w.element,"span").each(E=>{w.getSystem().getByDom(E).each(D=>No.set(D,S))})},isActive:()=>Zr(w.element,"span").exists(S=>w.getSystem().getByDom(S).exists(No.isOn)),setText:S=>Zr(w.element,"span").each(E=>w.getSystem().getByDom(E).each(D=>Hn(D,xc,{text:S}))),setIcon:S=>Zr(w.element,"span").each(E=>w.getSystem().getByDom(E).each(D=>Hn(D,tm,{icon:S}))),setTooltip:S=>{const E=r.providers.translate(S);Pu(w.element,{"aria-label":E,title:E})}}),h=Zn(Z),b={getApi:c,onSetup:t.onSetup};return dC.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:ie({"aria-pressed":!1},NL(t.tooltip,r.providers))},onExecute:w=>{const S=c(w);S.isEnabled()&&t.onAction(S)},onItemExecute:(w,S,E)=>{},splitDropdownBehaviours:Kt([ni.splitButton(r.providers.isDisabled),ii(),So("split-dropdown-events",[nr((w,S)=>yO(w)),_t(zD,Xn.focus),Wh(b,h),Jd(b,h)]),tv.config({})]),eventOrder:{[Yu()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:r.getSink,fetch:LL(c,t,r.providers),parts:{menu:t1(!1,t.columns,t.presets)},components:[dC.parts.button(hC(t.icon,t.text,O.none(),O.some([No.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),r.providers)),dC.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:uE("chevron-down",r.providers.icons)},buttonBehaviours:Kt([ni.splitButton(r.providers.isDisabled),ii(),yx()])}),dC.parts["aria-descriptor"]({text:r.providers.translate("To open the popup, press Shift+Enter")})]})},eK=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Bv=(t,r)=>(c,h,b)=>{const w=t(c).mapError(S=>hl(S)).getOrDie();return r(w,h,b)},tK={button:Bv(KE,(t,r)=>XG(t,r.shared.providers)),togglebutton:Bv(DP,(t,r)=>JG(t,r.shared.providers)),menubutton:Bv(MI,(t,r)=>hv(t,"tox-tbtn",r,O.none(),!1)),splitbutton:Bv(uq,(t,r)=>QG(t,r.shared)),grouptoolbarbutton:Bv(XS,(t,r,c)=>{const h=c.ui.registry.getAll().buttons,b=S=>bC(c,{buttons:h,toolbar:S,allowToolbarGroups:!1},r,O.none()),w={[Ew]:r.shared.header.isPositionedAtTop()?Wf.TopToBottom:Wf.BottomToTop};switch(Yp(c)){case $l.floating:return YG(t,r,b,w);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},mC=(t,r,c)=>$t(tK,t.type).fold(()=>O.none(),h=>O.some(h(t,r,c))),$L={styles:zG,fontsize:IG,fontsizeinput:RL,fontfamily:EG,blocks:kG,align:SG},gC=t=>{const r=ce(eK,c=>{const h=cn(c.items,b=>xo(t,b)||xo($L,b));return{name:c.name,items:h}});return cn(r,c=>c.items.length>0)},pC=t=>{const r=t.split("|");return ce(r,c=>({items:c.trim().split(" ")}))},HL=t=>le(t,r=>xo(r,"name")&&xo(r,"items")),nK=t=>{const r=t.toolbar,c=t.buttons;return r===!1?[]:r===void 0||r===!0?gC(c):v(r)?pC(r):HL(r)?r:[]},oK=(t,r,c,h,b,w)=>$t(r,c.toLowerCase()).orThunk(()=>w.bind(S=>ho(S,E=>$t(r,E+c.toLowerCase())))).fold(()=>$t($L,c.toLowerCase()).map(S=>S(t,b)),S=>S.type==="grouptoolbarbutton"&&!h?O.none():mC(S,b,t)),bC=(t,r,c,h)=>{const b=nK(r),w=ce(b,S=>{const E=ue(S.items,D=>D.trim().length===0?[]:oK(t,r.buttons,D,r.allowToolbarGroups,c,h).toArray());return{title:O.from(t.translate(S.name)),items:E}});return cn(w,S=>S.items.length>0)},VL=(t,r,c,h)=>{const b=r.mainUi.outerContainer,w=c.toolbar,S=c.buttons;if(le(w,v)){const E=w.map(D=>{const P={toolbar:D,buttons:S,allowToolbarGroups:c.allowToolbarGroups};return bC(t,P,h,O.none())});Hs.setToolbars(b,E)}else Hs.setToolbar(b,bC(t,c,h,O.none()))},zL=eu(),vC=zL.os.isiOS()&&zL.os.version.major<=12,UL=(t,r)=>{const{uiMotherships:c}=r,h=t.dom;let b=t.getWin();const w=t.getDoc().documentElement,S=Zn(hr(b.innerWidth,b.innerHeight)),E=Zn(hr(w.offsetWidth,w.offsetHeight)),D=()=>{const j=S.get();(j.left!==b.innerWidth||j.top!==b.innerHeight)&&(S.set(hr(b.innerWidth,b.innerHeight)),Gx(t))},P=()=>{const j=t.getDoc().documentElement,Y=E.get();(Y.left!==j.offsetWidth||Y.top!==j.offsetHeight)&&(E.set(hr(j.offsetWidth,j.offsetHeight)),Gx(t))},B=j=>{gz(t,j)};h.bind(b,"resize",D),h.bind(b,"scroll",B);const H=Sw(Tt.fromDom(t.getBody()),"load",P);t.on("hide",()=>{Ze(c,j=>{xn(j.element,"display","none")})}),t.on("show",()=>{Ze(c,j=>{es(j.element,"display")})}),t.on("NodeChange",P),t.on("remove",()=>{H.unbind(),h.unbind(b,"resize",D),h.unbind(b,"scroll",B),b=null})},WL=(t,r,c)=>{qd(t)&&Gf(c.mainUi.mothership.element,c.popupUi.mothership),Nl(r,c.dialogUi.mothership)};var jL=Object.freeze({__proto__:null,render:(t,r,c,h,b)=>{const{mainUi:w,uiMotherships:S}=r,E=Zn(0),D=w.outerContainer;vG(t);const P=Tt.fromDom(b.targetNode),B=Ut(Ct(P));Gf(P,w.mothership),WL(t,B,r),t.on("SkinLoaded",()=>{Hs.setSidebar(D,c.sidebar,Ex(t)),VL(t,r,c,h),E.set(t.getWin().innerWidth),Hs.setMenubar(D,lC(t,c)),Hs.setViews(D,c.views),UL(t,r)});const H=Hs.getSocket(D).getOrDie("Could not find expected socket element");if(vC){si(H.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Ce=KW(()=>{t.dispatch("ScrollContent")},20),Qe=Ja(H.element,"scroll",Ce.throttle);t.on("remove",Qe.unbind)}ZP(t,r),t.addCommand("ToggleSidebar",(Ce,Qe)=>{Hs.toggleSidebar(D,Qe),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var Ce;return(Ce=Hs.whichSidebar(D))!==null&&Ce!==void 0?Ce:""}),t.addCommand("ToggleView",(Ce,Qe)=>{if(Hs.toggleView(D,Qe)){const Le=D.element;w.mothership.broadcastOn([zd()],{target:Le}),Ze(S,_e=>{_e.broadcastOn([zd()],{target:Le})}),R(Hs.whichView(D))&&(t.focus(),t.nodeChanged(),Hs.refreshToolbar(D))}}),t.addQueryValueHandler("ToggleView",()=>{var Ce;return(Ce=Hs.whichView(D))!==null&&Ce!==void 0?Ce:""});const j=Yp(t),Y=()=>{Hs.refreshToolbar(r.mainUi.outerContainer)};(j===$l.sliding||j===$l.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Ce=t.getWin().innerWidth;Ce!==E.get()&&(Y(),E.set(Ce))});const oe={setEnabled:Ce=>{Wx(r,!Ce)},isEnabled:()=>!qn.isDisabled(D)};return{iframeContainer:H.element.dom,editorContainer:D.element.dom,api:oe}}});const UD=t=>/^[0-9\.]+(|px)$/i.test(""+t)?O.some(parseInt(""+t,10)):O.none(),yC=t=>G(t)?t+"px":t,wC=(t,r,c)=>{const h=r.filter(w=>t<w),b=c.filter(w=>t>w);return h.or(b).getOr(t)},rK=t=>{const r=wx(t),c=Kp(t),h=gE(t);return UD(r).map(b=>wC(b,c,h))},iK=t=>rK(t).getOr(wx(t)),ZL=t=>{const r=Mb(t),c=mE(t),h=xx(t);return UD(r).map(b=>wC(b,c,h))},aK=t=>ZL(t).getOr(Mb(t)),{ToolbarLocation:Mg,ToolbarMode:qL}=SV,lK=40,cK=(t,r,c,h,b)=>{const{mainUi:w,uiMotherships:S}=c,E=hg.DOM,D=Qp(t),P=Nb(t),B=xx(t).or(ZL(t)),H=h.shared.header,j=H.isPositionedAtTop,Y=Yp(t),oe=Y===qL.sliding||Y===qL.floating,Ce=Zn(!1),Qe=()=>Ce.get()&&!t.removed,Le=zn=>oe?zn.fold(K(0),Jo=>Jo.components().length>1?ir(Jo.components()[1].element):0):0,_e=zn=>{switch(Rb(t)){case Mg.auto:const Jo=Hs.getToolbar(w.outerContainer),Qt=Le(Jo),yn=ir(zn.element)-Qt,io=Ar(r);if(io.y>yn)return"top";{const Un=oa(r),bo=Math.max(Un.dom.scrollHeight,ir(Un));return io.bottom<bo-yn||qi().bottom<io.bottom-yn?"bottom":"top"}case Mg.bottom:return"bottom";case Mg.top:default:return"top"}},Xe=zn=>{b.on(Jo=>{mr.setModes(Jo,[zn]),H.setDockingMode(zn);const Qt=j()?Wf.TopToBottom:Wf.BottomToTop;sn(Jo.element,Ew,Qt)})},Ft=()=>{b.on(zn=>{const Jo=B.getOrThunk(()=>{const Qt=UD(er(fr(),"margin-left")).getOr(0);return ee(fr())-Ga(r).left+Qt});xn(zn.element,"max-width",Jo+"px")})},Et=zn=>{b.on(Jo=>{const Qt=Hs.getToolbar(w.outerContainer),yn=Le(Qt),io=Ar(r),{top:uo,left:Un}=St(t,w.outerContainer.element).fold(()=>({top:j()?Math.max(io.y-ir(Jo.element)+yn,0):io.bottom,left:io.x}),is=>{var Ui;const kl=Ar(is),Wc=(Ui=is.dom.scrollTop)!==null&&Ui!==void 0?Ui:0,Ou=bs(is,fr()),hm=Ou?Math.max(io.y-ir(Jo.element)+yn,0):io.y-kl.y+Wc-ir(Jo.element)+yn;return{top:j()?hm:io.bottom,left:Ou?io.x:io.x-kl.x}}),bo={position:"absolute",left:Math.round(Un)+"px",top:Math.round(uo)+"px"},Is=zn.map(is=>{const Ui=Ra(),kl=150,Wc=window.innerWidth-(Un-Ui.left);return{width:Math.max(Math.min(is,Wc),kl)+"px"}}).getOr({});si(w.outerContainer.element,ie(ie({},bo),Is))})},St=(zn,Jo)=>qd(zn)?tD(Jo):O.none(),jt=()=>{Ze(S,zn=>{zn.broadcastOn([tg()],{})})},Jt=()=>{if(D)return O.none();if(Ga(w.outerContainer.element).left+me(w.outerContainer.element)>=window.innerWidth-lK||js(w.outerContainer.element,"width").isSome()){xn(w.outerContainer.element,"position","absolute"),xn(w.outerContainer.element,"left","0px"),es(w.outerContainer.element,"width");const Jo=me(w.outerContainer.element);return O.some(Jo)}else return O.none()},Co=zn=>{if(!Qe())return;D||Ft();const Jo=D?O.none():Jt();oe&&Hs.refreshToolbar(w.outerContainer),D||Et(Jo),P&&b.on(zn),jt()},fn=()=>D||!P||!Qe()?!1:b.get().exists(zn=>{const Jo=H.getDockingMode(),Qt=_e(zn);return Qt!==Jo?(Xe(Qt),!0):!1});return{isVisible:Qe,isPositionedAtTop:j,show:()=>{Ce.set(!0),xn(w.outerContainer.element,"display","flex"),E.addClass(t.getBody(),"mce-edit-focus"),Ze(S,zn=>{es(zn.element,"display")}),fn(),qd(t)?Co(zn=>mr.isDocked(zn)?mr.reset(zn):mr.refresh(zn)):Co(mr.refresh)},hide:()=>{Ce.set(!1),xn(w.outerContainer.element,"display","none"),E.removeClass(t.getBody(),"mce-edit-focus"),Ze(S,zn=>{xn(zn.element,"display","none")})},update:Co,updateMode:()=>{fn()&&Co(mr.reset)},repositionPopups:jt}},WD=(t,r)=>{const c=Ar(t);return{pos:r?c.y:c.bottom,bounds:c}},uK=(t,r,c,h)=>{const b=Zn(WD(r,c.isPositionedAtTop())),w=P=>{const{pos:B,bounds:H}=WD(r,c.isPositionedAtTop()),{pos:j,bounds:Y}=b.get(),oe=H.height!==Y.height||H.width!==Y.width;b.set({pos:B,bounds:H}),oe&&Gx(t,P),c.isVisible()&&(j!==B?c.update(mr.reset):oe&&(c.updateMode(),c.repositionPopups()))};h||(t.on("activate",c.show),t.on("deactivate",c.hide)),t.on("SkinLoaded ResizeWindow",()=>c.update(mr.reset)),t.on("NodeChange keydown",P=>{requestAnimationFrame(()=>w(P))});let S=0;const E=TS(()=>c.update(mr.refresh),33);t.on("ScrollWindow",()=>{const P=Ra().left;P!==S&&(S=P,E.throttle()),c.updateMode()}),qd(t)&&t.on("ElementScroll",P=>{c.update(mr.refresh)});const D=kp();D.set(Sw(Tt.fromDom(t.getBody()),"load",P=>w(P.raw))),t.on("remove",()=>{D.clear()})};var fK=Object.freeze({__proto__:null,render:(t,r,c,h,b)=>{const{mainUi:w}=r,S=sr(),E=Tt.fromDom(b.targetNode),D=cK(t,E,r,h,S),P=ZR(t);fL(t);const B=()=>{if(S.isSet()){D.show();return}S.set(Hs.getHeader(w.outerContainer).getOrDie());const j=EE(t);qd(t)?(Gf(E,w.mothership),Gf(E,r.popupUi.mothership)):Nl(j,w.mothership),Nl(j,r.dialogUi.mothership),VL(t,r,c,h),Hs.setMenubar(w.outerContainer,lC(t,c)),D.show(),uK(t,E,D,P),t.nodeChanged()};t.on("show",B),t.on("hide",D.hide),P||(t.on("focus",B),t.on("blur",D.hide)),t.on("init",()=>{(t.hasFocus()||P)&&B()}),ZP(t,r);const H={show:B,hide:D.hide,setEnabled:j=>{Wx(r,!j)},isEnabled:()=>!qn.isDisabled(w.outerContainer)};return{editorContainer:w.outerContainer.element.dom,api:H}}});const hK=()=>{const t=sr(),r=sr(),c=sr();return{dialogUi:t,popupUi:r,mainUi:c,getUiMotherships:()=>{const w=t.get().map(E=>E.mothership),S=r.get().map(E=>E.mothership);return w.fold(()=>S.toArray(),E=>S.fold(()=>[E],D=>bs(E.element,D.element)?[E]:[E,D]))},lazyGetInOuterOrDie:(w,S)=>()=>c.get().bind(E=>S(E.outerContainer)).getOrDie(`Could not find ${w} element in OuterContainer`)}},mK="contexttoolbar-show",GL="contexttoolbar-hide",gK=t=>({hide:()=>ns(t,T0()),getValue:()=>ln.getValue(t)}),M1=(t,r)=>_t(vO,(c,h)=>{const b=t.get(c),w=gK(b);r.onAction(w,h.event.buttonApi)}),KL=(t,r,c)=>{const S=r.original,{primary:h}=S,b=Jv(S,["primary"]),w=Zs(KE(Ot(ie({},b),{type:"button",onAction:Z})));return FL(w,c,[M1(t,r)])},pK=(t,r,c)=>{const S=r.original,{primary:h}=S,b=Jv(S,["primary"]),w=Zs(DP(Ot(ie({},b),{type:"togglebutton",onAction:Z})));return IL(w,c,[M1(t,r)])},bK=t=>t.type==="contextformtogglebutton",YL=(t,r,c)=>bK(r)?pK(t,r,c):KL(t,r,c),jD=(t,r,c)=>{const h=ce(r,S=>As(YL(t,S,c)));return{asSpecs:()=>ce(h,S=>S.asSpec()),findPrimary:S=>ho(r,(E,D)=>E.primary?O.from(h[D]).bind(P=>P.getOpt(S)).filter(ae(qn.isDisabled)):O.none())}},ZD=(t,r)=>{const c=t.label.fold(()=>({}),w=>({"aria-label":w})),h=As(gg.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:c,selectOnFocus:!0,inputBehaviours:Kt([Fn.config({mode:"special",onEnter:w=>b.findPrimary(w).map(S=>(Ff(S),!0)),onLeft:(w,S)=>(S.cut(),O.none()),onRight:(w,S)=>(S.cut(),O.none())})])})),b=jD(h,t.commands,r);return[{title:O.none(),items:[h.asSpec()]},{title:O.none(),items:b.asSpecs()}]},yK={renderContextForm:(t,r,c)=>kD({type:t,uid:pn("context-toolbar"),initGroups:ZD(r,c),onEscape:O.none,cyclicKeying:!0,providers:c}),buildInitGroups:ZD},Rg=(t,r,c)=>r.bottom-t.y>=c&&t.bottom-r.y>=c,xC=t=>{const r=t.getBoundingClientRect();if(r.height<=0&&r.width<=0){const c=Ad(Tt.fromDom(t.startContainer),t.startOffset).element;return(Ho(c)?mi(c):O.some(c)).filter(Po).map(b=>b.dom.getBoundingClientRect()).getOr(r)}else return r},Fv=t=>{const r=t.selection.getRng(),c=xC(r);if(t.inline){const h=Ra();return Xr(h.left+c.left,h.top+c.top,c.width,c.height)}else{const h=fl(Tt.fromDom(t.getBody()));return Xr(h.x+c.left,h.y+c.top,c.width,c.height)}},XL=(t,r)=>r.filter(c=>jo(c)&&Yl(c)).map(fl).getOrThunk(()=>Fv(t)),JL=(t,r,c)=>{const h=Math.max(t.x+c,r.x),b=Math.min(t.right-c,r.right);return{x:h,width:b-h}},wK=(t,r,c,h,b,w)=>{const S=Tt.fromDom(t.getContainer()),E=Zr(S,".tox-editor-header").getOr(S),D=Ar(E),P=D.y>=r.bottom,B=h&&!P;if(t.inline&&B)return{y:Math.max(D.bottom+w,c.y),bottom:c.bottom};if(t.inline&&!B)return{y:c.y,bottom:Math.min(D.y-w,c.bottom)};const H=b==="line"?Ar(S):r;return B?{y:Math.max(D.bottom+w,c.y),bottom:Math.min(H.bottom-w,c.bottom)}:{y:Math.max(H.y+w,c.y),bottom:Math.min(D.y-w,c.bottom)}},qD=(t,r,c,h=0)=>{const b=op(window),w=Ar(Tt.fromDom(t.getContentAreaContainer())),S=Jp(t)||_x(t)||Pb(t),{x:E,width:D}=JL(w,b,h);if(t.inline&&!S)return Xr(E,b.y,D,b.height);{const P=r.header.isPositionedAtTop(),{y:B,bottom:H}=wK(t,w,b,P,c,h);return Xr(E,B,D,H-B)}},SC=12,QL={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},e5={maxHeightFunction:Ep(),maxWidthFunction:nC()},xK=(t,r)=>{const c=t.selection.getRng(),h=Ad(Tt.fromDom(c.startContainer),c.startOffset);return c.startContainer===c.endContainer&&c.startOffset===c.endOffset-1&&bs(h.element,r)},SK=(t,r,c)=>{const h=js(t,"position");xn(t,"position",r);const b=c(t);return h.each(w=>xn(t,"position",w)),b},GD=t=>t==="node",CC=(t,r,c,h,b)=>{const w=Fv(t),S=h.lastElement().exists(E=>bs(c,E));if(xK(t,c))return S?zF:$c;if(S)return SK(r,h.getMode(),()=>Rg(w,Ar(r),-20)&&!h.isReposition()?aZ:zF);{const E=h.getMode()==="fixed"?b.y+Ra().top:b.y,D=ir(r)+SC;return E+D<=w.y?$c:wv}},t5=(t,r,c,h)=>{const b=D=>(P,B,H,j,Y)=>{const oe=CC(t,j,D,c,Y),Ce=Ot(ie({},P),{y:Y.y,height:Y.height});return Ot(ie({},oe(Ce,B,H,j,Y)),{alwaysFit:!0})},w=D=>GD(h)?[b(D)]:[];return r?{onLtr:D=>[Di,ca,ua,Xa,xa,Fa].concat(w(D)),onRtl:D=>[Di,ua,ca,xa,Xa,Fa].concat(w(D))}:{onLtr:D=>[Fa,Di,Xa,ca,xa,ua].concat(w(D)),onRtl:D=>[Fa,Di,xa,ua,Xa,ca].concat(w(D))}},n5=(t,r,c,h)=>r==="line"?{bubble:Uf(SC,0,QL),layouts:{onLtr:()=>[wk],onRtl:()=>[j0]},overrides:e5}:{bubble:Uf(0,SC,QL,1/SC),layouts:t5(t,c,h,r),overrides:e5},Iv=(t,r)=>{const c=cn(r,w=>w.predicate(t.dom)),{pass:h,fail:b}=kn(c,w=>w.type==="contexttoolbar");return{contextToolbars:h,contextForms:b}},CK=t=>{if(t.length<=1)return t;{const r=w=>yt(t,S=>S.position===w),c=w=>cn(t,S=>S.position===w),h=r("selection"),b=r("node");if(h||b)if(b&&h){const w=c("node"),S=ce(c("selection"),E=>Ot(ie({},E),{position:"node"}));return w.concat(S)}else return c(h?"selection":"node");else return c("line")}},o5=t=>{if(t.length<=1)return t;{const r=h=>Je(t,b=>b.position===h);return r("selection").orThunk(()=>r("node")).orThunk(()=>r("line")).map(h=>h.position).fold(()=>[],h=>cn(t,b=>b.position===h))}},kK=(t,r,c)=>{const h=Iv(t,r);if(h.contextForms.length>0)return O.some({elem:t,toolbars:[h.contextForms[0]]});{const b=Iv(t,c);if(b.contextForms.length>0)return O.some({elem:t,toolbars:[b.contextForms[0]]});if(h.contextToolbars.length>0||b.contextToolbars.length>0){const w=CK(h.contextToolbars.concat(b.contextToolbars));return O.some({elem:t,toolbars:w})}else return O.none()}},AK=(t,r,c)=>t(r)?O.none():CM(r,h=>{if(Po(h)){const{contextToolbars:b,contextForms:w}=Iv(h,c.inNodeScope),S=w.length>0?w:o5(b);return S.length>0?O.some({elem:h,toolbars:S}):O.none()}else return O.none()},t),kC=(t,r)=>{const c=Tt.fromDom(r.getBody()),h=S=>bs(S,c),b=S=>!h(S)&&!ma(c,S),w=Tt.fromDom(r.selection.getNode());return b(w)?O.none():kK(w,t.inNodeScope,t.inEditorScope).orThunk(()=>AK(h,w,t))},s5=(t,r)=>{const c={},h=[],b=[],w={},S={},E=(B,H)=>{const j=Zs(UV(H));c[B]=j,j.launch.map(Y=>{w["form:"+B]=Ot(ie({},H.launch),{type:Y.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{r(j)}})}),j.scope==="editor"?b.push(j):h.push(j),S[B]=j},D=(B,H)=>{jV(H).each(j=>{H.scope==="editor"?b.push(j):h.push(j),S[B]=j})},P=Kn(t);return Ze(P,B=>{const H=t[B];H.type==="contextform"?E(B,H):H.type==="contexttoolbar"&&D(B,H)}),{forms:c,inNodeScope:h,inEditorScope:b,lookupTable:S,formNavigators:w}},r5=pn("forward-slide"),i5=pn("backward-slide"),KD=pn("change-slide-event"),YD="tox-pop--resizing",EK=t=>{const r=Zn([]);return vr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:c=>{r.set([]),vr.getContent(c).each(h=>{es(h.element,"visibility")}),wr(c.element,YD),es(c.element,"width")},inlineBehaviours:Kt([So("context-toolbar-events",[Lf(up(),(c,h)=>{h.event.raw.propertyName==="width"&&(wr(c.element,YD),es(c.element,"width"))}),_t(KD,(c,h)=>{const b=c.element;es(b,"width");const w=ee(b);vr.setContent(c,h.event.contents),ti(b,YD);const S=ee(b);xn(b,"width",w+"px"),vr.getContent(c).each(E=>{h.event.focus.bind(D=>(dc(D),au(b))).orThunk(()=>(Fn.focusIn(E),Hd(Ct(b))))}),setTimeout(()=>{xn(c.element,"width",S+"px")},0)}),_t(r5,(c,h)=>{vr.getContent(c).each(b=>{r.set(r.get().concat([{bar:b,focus:Hd(Ct(c.element))}]))}),Hn(c,KD,{contents:h.event.forwardContents,focus:O.none()})}),_t(i5,(c,h)=>{Wn(r.get()).each(b=>{r.set(r.get().slice(0,r.get().length-1)),Hn(c,KD,{contents:Rc(b.bar),focus:b.focus})})})]),Fn.config({mode:"special",onEscape:c=>Wn(r.get()).fold(()=>t.onEscape(),h=>(ns(c,i5),O.some(!0)))})]),lazySink:()=>Eo.value(t.sink)})},AC="tox-pop--transition",a5=(t,r,c,h)=>{const b=h.backstage,w=b.shared,S=eu().deviceType.isTouch,E=sr(),D=sr(),P=sr(),B=wa(EK({sink:c,onEscape:()=>(t.focus(),O.some(!0))})),H=()=>{const fn=P.get().getOr("node"),ro=GD(fn)?1:0;return qD(t,w,fn,ro)},j=()=>!t.removed&&!(S()&&b.isContextMenuOpen()),Y=fn=>Sr(Cr(fn,E.get(),bs),!0),oe=()=>{if(j()){const fn=H(),ro=Sr(P.get(),"node")?XL(t,E.get()):Fv(t);return fn.height<=0||!Rg(ro,fn,.01)}else return!0},Ce=()=>{E.clear(),D.clear(),P.clear(),vr.hide(B)},Qe=()=>{if(vr.isOpen(B)){const fn=B.element;es(fn,"display"),oe()?xn(fn,"display","none"):(D.set(0),vr.reposition(B))}},Le=fn=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[fn],behaviours:Kt([Fn.config({mode:"acyclic"}),So("pop-dialog-wrap-events",[nr(ro=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Fn.focusIn(ro))}),Fd(ro=>{t.shortcuts.remove("ctrl+F9")})])])}),_e=At(()=>s5(r,fn=>{const ro=Et([fn]);Hn(B,r5,{forwardContents:Le(ro)})})),Xe=(fn,ro)=>bC(t,{buttons:fn,toolbar:ro.items,allowToolbarGroups:!1},h.backstage,O.some(["form:"])),Ft=(fn,ro)=>yK.buildInitGroups(fn,ro),Et=fn=>{const{buttons:ro}=t.ui.registry.getAll(),Jn=_e(),xs=ie(ie({},ro),Jn.formNavigators),zn=Yp(t)===$l.scrolling?$l.scrolling:$l.default,Jo=tt(ce(fn,Qt=>Qt.type==="contexttoolbar"?Xe(xs,Qt):Ft(Qt,w.providers)));return kD({type:zn,uid:pn("context-toolbar"),initGroups:Jo,onEscape:O.none,cyclicKeying:!0,providers:w.providers})},St=(fn,ro)=>{const Jn=fn==="node"?w.anchors.node(ro):w.anchors.cursor(),xs=n5(t,fn,S(),{lastElement:E.get,isReposition:()=>Sr(D.get(),0),getMode:()=>Sa.getMode(c)});return Ls(Jn,xs)},jt=(fn,ro)=>{if(Co.cancel(),!j())return;const Jn=Et(fn),xs=fn[0].position,zn=St(xs,ro);P.set(xs),D.set(1);const Jo=B.element;es(Jo,"display"),Y(ro)||(wr(Jo,AC),Sa.reset(c,B)),vr.showWithinBounds(B,Le(Jn),{anchor:zn,transition:{classes:[AC],mode:"placement"}},()=>O.some(H())),ro.fold(E.clear,E.set),oe()&&xn(Jo,"display","none")};let Jt=!1;const Co=TS(()=>{if(!(!t.hasFocus()||t.removed||Jt))if(vi(B.element,AC))Co.throttle();else{const fn=_e();kC(fn,t).fold(Ce,ro=>{jt(ro.toolbars,O.some(ro.elem))})}},17);t.on("init",()=>{t.on("remove",Ce),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Qe),t.on("click keyup focus SetContent",Co.throttle),t.on(GL,Ce),t.on(mK,fn=>{const ro=_e();$t(ro.lookupTable,fn.toolbarKey).each(Jn=>{jt([Jn],Bn(fn.target!==t,fn.target)),vr.getContent(B).each(Fn.focusIn)})}),t.on("focusout",fn=>{ug.setEditorTimeout(t,()=>{au(c.element).isNone()&&au(B.element).isNone()&&Ce()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&Ce()}),t.on("AfterProgressState",fn=>{fn.state?Ce():t.hasFocus()&&Co.throttle()}),t.on("dragstart",()=>{Jt=!0}),t.on("dragend drop",()=>{Jt=!1}),t.on("NodeChange",fn=>{au(B.element).fold(Co.throttle,Z)})})},TK=t=>{Ze([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],c=>{t.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onAction:pl(t,c.cmd),onSetup:Kx(t,c.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Va(t),onAction:pl(t,"JustifyNone")})},l5=(t,r)=>{const c=()=>{const h=r.getOptions(t),b=r.getCurrent(t).map(r.hash),w=sr();return ce(h,S=>({type:"togglemenuitem",text:r.display(S),onSetup:E=>{const D=B=>{B&&(w.on(H=>H.setActive(!1)),w.set(E)),E.setActive(B)};D(Sr(b,r.hash(S)));const P=r.watcher(t,S,D);return()=>{w.clear(),P()}},onAction:()=>r.setCurrent(t,S)}))};t.ui.registry.addMenuButton(r.name,{tooltip:r.text,icon:r.icon,fetch:h=>h(c()),onSetup:r.onToolbarSetup}),t.ui.registry.addNestedMenuItem(r.name,{type:"nestedmenuitem",text:r.text,getSubmenuItems:c,onSetup:r.onMenuSetup})},c5=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:eP,hash:r=>_G(r,["fixed","relative","empty"]).getOr(r),display:Ie,watcher:(r,c,h)=>r.formatter.formatChanged("lineheight",h,!1,{value:c}).unbind,getCurrent:r=>O.from(r.queryCommandValue("LineHeight")),setCurrent:(r,c)=>r.execCommand("LineHeight",!1,c),onToolbarSetup:Va(t),onMenuSetup:Va(t)}),OK=t=>O.from(WR(t)).map(c=>({name:"language",text:"Language",icon:"language",getOptions:K(c),hash:h=>$(h.customCode)?h.code:`${h.code}/${h.customCode}`,display:h=>h.title,watcher:(h,b,w)=>{var S;return h.formatter.formatChanged("lang",w,!1,{value:b.code,customValue:(S=b.customCode)!==null&&S!==void 0?S:null}).unbind},getCurrent:h=>{const b=Tt.fromDom(h.selection.getNode());return $m(b,w=>O.some(w).filter(Po).bind(S=>z(S,"lang").map(D=>{const P=z(S,"data-mce-lang").getOrUndefined();return{code:D,customCode:P,title:""}})))},setCurrent:(h,b)=>h.execCommand("Lang",!1,b),onToolbarSetup:h=>{const b=kp();return h.setActive(t.formatter.match("lang",{},void 0,!0)),b.set(t.formatter.formatChanged("lang",h.setActive,!0)),Zb(b.clear,Va(t)(h))},onMenuSetup:Va(t)})),DK=t=>{l5(t,c5(t)),OK(t).each(r=>l5(t,r))},_K=(t,r)=>{FD(t,r),AL(t,r),UG(t,r),wL(t,r),HG(t,r)},MK=t=>bu(t,"NodeChange",r=>{r.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),RK=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:MK(t),onAction:pl(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Va(t),onAction:pl(t,"indent")})},XD=t=>{RK(t)},u5=(t,r)=>c=>{c.setActive(r.get());const h=b=>{r.set(b.state),c.setActive(b.state)};return t.on("PastePlainTextToggle",h),Zb(()=>t.off("PastePlainTextToggle",h),Va(t)(c))},PK=t=>{const r=Zn(Ax(t)),c=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:c,onSetup:u5(t,r)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:c,onSetup:u5(t,r)})},Lv=(t,r)=>()=>{t.execCommand("mceToggleFormat",!1,r)},d5=t=>{uh.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(r,c)=>{t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onSetup:Kx(t,r.name),onAction:Lv(t,r.name)})});for(let r=1;r<=6;r++){const c="h"+r;t.ui.registry.addToggleButton(c,{text:c.toUpperCase(),tooltip:"Heading "+r,onSetup:Kx(t,c),onAction:Lv(t,c)})}},f5=t=>{uh.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],r=>{t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onAction:pl(t,r.action)})}),uh.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],r=>{t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onSetup:Va(t),onAction:pl(t,r.action)})})},NK=t=>{uh.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],r=>{t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onAction:pl(t,r.action),onSetup:Kx(t,r.name)})})},BK=t=>{d5(t),f5(t),NK(t)},FK=t=>{uh.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],r=>{t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onAction:pl(t,r.action)})}),uh.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],r=>{t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onSetup:Va(t),onAction:pl(t,r.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Va(t),onAction:Lv(t,"code")})},IK=t=>{BK(t),FK(t)},EC=(t,r)=>bu(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",c=>{c.setEnabled(!t.mode.isReadOnly()&&t.undoManager[r]())}),JD=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:EC(t,"hasUndo"),onAction:pl(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:EC(t,"hasRedo"),onAction:pl(t,"redo")})},LK=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:EC(t,"hasUndo"),onAction:pl(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:EC(t,"hasRedo"),onAction:pl(t,"redo")})},h5=t=>{JD(t),LK(t)},$K=t=>bu(t,"VisualAid",r=>{r.setActive(t.hasVisual)}),HK=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:$K(t),onAction:pl(t,"mceToggleVisualAid")})},QD=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:pl(t,"mceToggleVisualAid")})},VK=t=>{QD(t),HK(t)},m5=(t,r)=>{TK(t),IK(t),_K(t,r),h5(t),TN(t),VK(t),XD(t),DK(t),PK(t)},zK=t=>v(t)?t.split(/[ ,]/):t,g5=t=>r=>r.options.get(t),e_=t=>{const r=t.options.register;r("contextmenu_avoid_overlap",{processor:"string",default:""}),r("contextmenu_never_use_native",{processor:"boolean",default:!1}),r("contextmenu",{processor:c=>c===!1?{value:[],valid:!0}:v(c)||le(c,v)?{value:zK(c),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},p5=g5("contextmenu_never_use_native"),UK=g5("contextmenu_avoid_overlap"),WK=t=>b5(t).length===0,b5=t=>{const r=t.ui.registry.getAll().contextMenus,c=t.options.get("contextmenu");return t.options.isSet("contextmenu")?c:cn(c,h=>xo(r,h))},$v=(t,r)=>({type:"makeshift",x:t,y:r}),v5=(t,r,c)=>$v(t.x+r,t.y+c),y5=t=>t.type==="longpress"||t.type.indexOf("touch")===0,jK=t=>{if(y5(t)){const r=t.touches[0];return $v(r.pageX,r.pageY)}else return $v(t.pageX,t.pageY)},ZK=t=>{if(y5(t)){const r=t.touches[0];return $v(r.clientX,r.clientY)}else return $v(t.clientX,t.clientY)},qK=(t,r)=>{const c=hg.DOM.getPos(t);return v5(r,c.x,c.y)},GK=(t,r)=>r.type==="contextmenu"||r.type==="longpress"?t.inline?jK(r):qK(t.getContentAreaContainer(),ZK(r)):w5(t),w5=t=>({type:"selection",root:Tt.fromDom(t.selection.getNode())}),KK=t=>({type:"node",node:O.some(Tt.fromDom(t.selection.getNode())),root:Tt.fromDom(t.getBody())}),x5=(t,r,c)=>{switch(c){case"node":return KK(t);case"point":return GK(t,r);case"selection":return w5(t)}},S5=(t,r,c,h,b,w)=>{const S=c(),E=x5(t,r,w);C1(S,ad.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:O.none()}).map(D=>{r.preventDefault(),vr.showMenuAt(b,{anchor:E},{menu:{markers:sh("normal")},data:D})})},YK={onLtr:()=>[Di,ca,ua,Xa,xa,Fa,$c,wv,yv,A1,vv,bv],onRtl:()=>[Di,ua,ca,xa,Xa,Fa,$c,wv,vv,bv,yv,A1]},C5=12,XK={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},JK=(t,r)=>{const c=t.selection;if(c.isCollapsed()||r.touches.length<1)return!1;{const h=r.touches[0],b=c.getRng();return B3(t.getWin(),Y0.domRange(b)).exists(S=>S.left<=h.clientX&&S.right>=h.clientX&&S.top<=h.clientY&&S.bottom>=h.clientY)}},QK=t=>{const r=t.selection.getRng(),c=()=>{ug.setEditorTimeout(t,()=>{t.selection.setRng(r)},10),w()};t.once("touchend",c);const h=S=>{S.preventDefault(),S.stopImmediatePropagation()};t.on("mousedown",h,!0);const b=()=>w();t.once("longpresscancel",b);const w=()=>{t.off("touchend",c),t.off("longpresscancel",b),t.off("mousedown",h)}},Pg=(t,r,c)=>{const h=x5(t,r,c);return ie({bubble:Uf(0,c==="point"?C5:0,XK),layouts:YK,overrides:{maxWidthFunction:nC(),maxHeightFunction:Ep()}},h)},k5=(t,r,c,h,b,w,S)=>{const E=Pg(t,r,w);C1(c,ad.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!0,search:O.none()}).map(D=>{r.preventDefault();const P=S?Ha.HighlightMenuAndItem:Ha.HighlightNone;vr.showMenuWithinBounds(b,{anchor:E},{menu:{markers:sh("normal"),highlightOnOpen:P},data:D,type:"horizontal"},()=>O.some(qD(t,h.shared,w==="node"?"node":"selection"))),t.dispatch(GL)})},eY=(t,r,c,h,b,w)=>{const S=eu(),E=S.os.isiOS(),D=S.os.isMacOS(),P=S.os.isAndroid(),B=S.deviceType.isTouch(),H=()=>!(P||E||D&&B),j=()=>{const Y=c();k5(t,r,Y,h,b,w,H())};if((D||E)&&w!=="node"){const Y=()=>{QK(t),j()};JK(t,r)?Y():(t.once("selectionchange",Y),t.once("touchend",()=>t.off("selectionchange",Y)))}else j()},A5=t=>v(t)?t==="|":t.type==="separator",t_={type:"separator"},E5=t=>{const r=c=>({text:c.text,icon:c.icon,enabled:c.enabled,shortcut:c.shortcut});if(v(t))return t;switch(t.type){case"separator":return t_;case"submenu":return Ot(ie({type:"nestedmenuitem"},r(t)),{getSubmenuItems:()=>{const h=t.getSubmenuItems();return v(h)?h:ce(h,E5)}});default:const c=t;return Ot(ie({type:"menuitem"},r(c)),{onAction:be(c.onAction)})}},n_=(t,r)=>{if(r.length===0)return t;const h=Wn(t).filter(b=>!A5(b)).fold(()=>[],b=>[t_]);return t.concat(h).concat(r).concat([t_])},tY=(t,r,c)=>{const h=Do(r,(b,w)=>$t(t,w.toLowerCase()).map(S=>{const E=S.update(c);if(v(E)&&ke(_r(E)))return n_(b,E.split(" "));if(T(E)&&E.length>0){const D=ce(E,E5);return n_(b,D)}else return b}).getOrThunk(()=>b.concat([w])),[]);return h.length>0&&A5(h[h.length-1])&&h.pop(),h},nY=(t,r)=>r.ctrlKey&&!p5(t),oY=t=>t.type==="longpress"||xo(t,"touches"),T5=(t,r)=>!oY(r)&&(r.button!==2||r.target===t.getBody()&&r.pointerType===""),O5=(t,r)=>T5(t,r)?t.selection.getStart(!0):r.target,sY=(t,r)=>{const c=UK(t),h=T5(t,r)?"selection":"point";if(ke(c)){const b=O5(t,r);return Yb(Tt.fromDom(b),c)?"node":h}else return h},rY=(t,r,c)=>{const b=eu().deviceType.isTouch,w=wa(vr.sketch({dom:{tag:"div"},lazySink:r,onEscape:()=>t.focus(),onShow:()=>c.setContextMenuState(!0),onHide:()=>c.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Kt([So("dismissContextMenu",[_t(Wm(),(D,P)=>{ss.close(D),t.focus()})])])})),S=()=>vr.hide(w),E=D=>{if(p5(t)&&D.preventDefault(),nY(t,D)||WK(t))return;const P=sY(t,D),B=()=>{const j=O5(t,D),Y=t.ui.registry.getAll(),oe=b5(t);return tY(Y.contextMenus,oe,j)};(b()?eY:S5)(t,D,B,c,w,P)};t.on("init",()=>{const D="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(b()?"":" ResizeWindow");t.on(D,S),t.on("longpress contextmenu",E)})},o_=Ml.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),TC=t=>r=>r.translate(-t.left,-t.top),OC=t=>r=>r.translate(t.left,t.top),af=t=>(r,c)=>Do(t,(h,b)=>b(h),hr(r,c)),Hv=(t,r,c)=>t.fold(af([OC(c),TC(r)]),af([TC(r)]),af([])),R1=(t,r,c)=>t.fold(af([OC(c)]),af([]),af([OC(r)])),P1=(t,r,c)=>t.fold(af([]),af([TC(c)]),af([OC(r),TC(c)])),iY=(t,r,c,h,b,w)=>{const S=R1(t,b,w),E=R1(r,b,w);return Math.abs(S.left-E.left)<=c&&Math.abs(S.top-E.top)<=h},aY=(t,r,c,h,b,w)=>{const S=R1(t,b,w),E=R1(r,b,w),D=Math.abs(S.left-E.left),P=Math.abs(S.top-E.top);return hr(D,P)},DC=(t,r,c)=>{const h=t.fold((b,w)=>({position:O.some("absolute"),left:O.some(b+"px"),top:O.some(w+"px")}),(b,w)=>({position:O.some("absolute"),left:O.some(b-c.left+"px"),top:O.some(w-c.top+"px")}),(b,w)=>({position:O.some("fixed"),left:O.some(b+"px"),top:O.some(w+"px")}));return ie({right:O.none(),bottom:O.none()},h)},lY=(t,r,c)=>t.fold((h,b)=>_C(h+r,b+c),(h,b)=>rm(h+r,b+c),(h,b)=>Ng(h+r,b+c)),s_=(t,r,c,h)=>{const b=(w,S)=>(E,D)=>{const P=w(r,c,h);return S(E.getOr(P.left),D.getOr(P.top))};return t.fold(b(P1,_C),b(R1,rm),b(Hv,Ng))},_C=o_.offset,rm=o_.absolute,Ng=o_.fixed,D5=(t,r)=>{const c=Vr(t,r);return $(c)?NaN:parseInt(c,10)},cY=(t,r)=>{const c=t.element,h=D5(c,r.leftAttr),b=D5(c,r.topAttr);return isNaN(h)||isNaN(b)?O.none():O.some(hr(h,b))},uY=(t,r,c)=>{const h=t.element;sn(h,r.leftAttr,c.left+"px"),sn(h,r.topAttr,c.top+"px")},dY=(t,r)=>{const c=t.element;pe(c,r.leftAttr),pe(c,r.topAttr)},fY=(t,r,c,h)=>cY(t,r).fold(()=>c,b=>Ng(b.left+h.left,b.top+h.top)),hY=(t,r,c,h,b,w)=>{const S=fY(t,r,c,h),E=r.mustSnap?gY(t,r,S,b,w):pY(t,r,S,b,w),D=Hv(S,b,w);return uY(t,r,D),E.fold(()=>({coord:Ng(D.left,D.top),extra:O.none()}),P=>({coord:P.output,extra:P.extra}))},mY=(t,r)=>{dY(t,r)},_5=(t,r,c,h)=>ho(t,b=>{const w=b.sensor;return iY(r,w,b.range.left,b.range.top,c,h)?O.some({output:s_(b.output,r,c,h),extra:b.extra}):O.none()}),gY=(t,r,c,h,b)=>{const w=r.getSnapPoints(t);return _5(w,c,h,b).orThunk(()=>Do(w,(D,P)=>{const B=P.sensor,H=aY(c,B,P.range.left,P.range.top,h,b);return D.deltas.fold(()=>({deltas:O.some(H),snap:O.some(P)}),j=>{const Y=(H.left+H.top)/2,oe=(j.left+j.top)/2;return Y<=oe?{deltas:O.some(H),snap:O.some(P)}:D})},{deltas:O.none(),snap:O.none()}).snap.map(D=>({output:s_(D.output,c,h,b),extra:D.extra})))},pY=(t,r,c,h,b)=>{const w=r.getSnapPoints(t);return _5(w,c,h,b)},bY=(t,r,c)=>({coord:s_(t.output,t.output,r,c),extra:t.extra});var MC=Object.freeze({__proto__:null,snapTo:(t,r,c,h)=>{const b=r.getTarget(t.element);if(r.repositionTarget){const w=Zi(t.element),S=Ra(w),E=vI(b),D=bY(h,S,E),P=DC(D.coord,S,E);Lt(b,P)}}});const r_="data-initial-z-index",vY=t=>{mi(t.element).filter(Po).each(r=>{z(r,r_).fold(()=>es(r,"z-index"),c=>xn(r,"z-index",c)),pe(r,r_)})},yY=t=>{mi(t.element).filter(Po).each(r=>{js(r,"z-index").each(c=>{sn(r,r_,c)}),xn(r,"z-index",er(t.element,"z-index"))})},M5=(t,r)=>{t.getSystem().addToGui(r),yY(r)},wY=t=>{vY(t),t.getSystem().removeFromGui(t)},R5=(t,r,c)=>t.getSystem().build(ld.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[r]},events:c}));var P5=oc("snaps",[Pt("getSnapPoints"),os("onSensor"),Pt("leftAttr"),Pt("topAttr"),et("lazyViewport",qi),et("mustSnap",!1)]);const i_=[et("useFixed",ne),Pt("blockerClass"),et("getTarget",Ie),et("onDrag",Z),et("repositionTarget",!0),et("onDrop",Z),Vi("getBounds",qi),P5],xY=t=>fi(js(t,"left"),js(t,"top"),js(t,"position"),(r,c,h)=>(h==="fixed"?Ng:_C)(parseInt(r,10),parseInt(c,10))).getOrThunk(()=>{const r=Ga(t);return rm(r.left,r.top)}),SY=(t,r,c,h,b)=>{const w=b.bounds,S=R1(r,c,h),E=uc(S.left,w.x,w.x+w.width-b.width),D=uc(S.top,w.y,w.y+w.height-b.height),P=rm(E,D);return r.fold(()=>{const B=P1(P,c,h);return _C(B.left,B.top)},K(P),()=>{const B=Hv(P,c,h);return Ng(B.left,B.top)})},CY=(t,r,c,h,b,w,S)=>{const E=r.fold(()=>{const D=lY(c,w.left,w.top),P=Hv(D,h,b);return Ng(P.left,P.top)},D=>{const P=hY(t,D,c,w,h,b);return P.extra.each(B=>{D.onSensor(t,B)}),P.coord});return SY(t,E,h,b,S)},kY=(t,r,c,h)=>{const b=r.getTarget(t.element);if(r.repositionTarget){const w=Zi(t.element),S=Ra(w),E=vI(b),D=xY(b),P=CY(t,r.snaps,D,S,E,h,c),B=DC(P,S,E);Lt(b,B)}r.onDrag(t,b,h)},RC=(t,r)=>({bounds:t.getBounds(),height:Bu(r.element),width:me(r.element)}),PC=(t,r,c,h,b)=>{const w=c.update(h,b),S=c.getStartData().getOrThunk(()=>RC(r,t));w.each(E=>{kY(t,r,S,E)})},N5=(t,r,c,h)=>{r.each(wY),c.snaps.each(w=>{mY(t,w)});const b=c.getTarget(t.element);h.reset(),c.onDrop(t,b)},a_=t=>(r,c)=>{const h=b=>{c.setStartData(RC(r,b))};return ar([_t(O0(),b=>{c.getStartData().each(()=>h(b))}),...t(r,c,h)])},AY=t=>ar([_t(bi(),t.forceDrop),_t(H2(),t.drop),_t(Zy(),(r,c)=>{t.move(c.event)}),_t(E0(),t.delayDrop)]);var EY=Object.freeze({__proto__:null,getData:t=>O.from(hr(t.x,t.y)),getDelta:(t,r)=>hr(r.left-t.left,r.top-t.top)});const B5=(t,r,c)=>[_t(bi(),(h,b)=>{if(b.event.raw.button!==0)return;b.stop();const S=()=>N5(h,O.some(P),t,r),E=zN(S,200),D={drop:S,delayDrop:E.schedule,forceDrop:S,move:H=>{E.cancel(),PC(h,t,r,EY,H)}},P=R5(h,t.blockerClass,AY(D));(()=>{c(h),M5(h,P)})()})],TY=[...i_,qs("dragger",{handlers:a_(B5)})],OY=t=>ar([_t(Pf(),t.forceDrop),_t(Hm(),t.drop),_t(EM(),t.drop),_t(lp(),(r,c)=>{t.move(c.event)})]),DY=t=>{const r=t[0];return O.some(hr(r.clientX,r.clientY))};var F5=Object.freeze({__proto__:null,getData:t=>{const c=t.raw.touches;return c.length===1?DY(c):O.none()},getDelta:(t,r)=>hr(r.left-t.left,r.top-t.top)});const I5=(t,r,c)=>{const h=sr(),b=w=>{N5(w,h.get(),t,r),h.clear()};return[_t(Pf(),(w,S)=>{S.stop();const E=()=>b(w),D={drop:E,delayDrop:Z,forceDrop:E,move:H=>{PC(w,t,r,F5,H)}},P=R5(w,t.blockerClass,OY(D));h.set(P),(()=>{c(w),M5(w,P)})()}),_t(lp(),(w,S)=>{S.stop(),PC(w,t,r,F5,S.event)}),_t(Hm(),(w,S)=>{S.stop(),b(w)}),_t(EM(),b)]},_Y=[...i_,qs("dragger",{handlers:a_(I5)})],MY=(t,r,c)=>[...B5(t,r,c),...I5(t,r,c)],RY=[...i_,qs("dragger",{handlers:a_(MY)})];var NY=Object.freeze({__proto__:null,mouse:TY,touch:_Y,mouseOrTouch:RY}),BY=Object.freeze({__proto__:null,init:()=>{let t=O.none(),r=O.none();const c=()=>{t=O.none(),r=O.none()},h=(D,P)=>{const B=t.map(H=>D.getDelta(H,P));return t=O.some(P),B},b=(D,P)=>D.getData(P).bind(B=>h(D,B)),w=D=>{r=O.some(D)},S=()=>r,E=K({});return lc({readState:E,reset:c,update:b,getStartData:S,setStartData:w})}});const Bg=Ek({branchKey:"mode",branches:NY,name:"dragging",active:{events:(t,r)=>t.dragger.handlers(t,r)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:O.from(t.extra)})},state:BY,apis:MC}),l_=40,NC=l_/2,c_=(t,r,c,h,b,w)=>t.fold(()=>Bg.snap({sensor:rm(c-NC,h-NC),range:hr(b,w),output:rm(O.some(c),O.some(h)),extra:{td:r}}),S=>{const E=c-NC,D=h-NC,P=l_,B=l_,H=S.element.dom.getBoundingClientRect();return Bg.snap({sensor:rm(E,D),range:hr(P,B),output:rm(O.some(c-H.width/2),O.some(h-H.height/2)),extra:{td:r}})}),u_=(t,r,c)=>{const h=(b,w)=>b.exists(S=>bs(S,w));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(b,w)=>{const S=w.td;h(r.get(),S)||(r.set(S),c(S))},mustSnap:!0}},im=t=>As(Ri.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Kt([Bg.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),tv.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),FY=(t,r)=>{const c=Zn([]),h=Zn([]),b=Zn(!1),w=sr(),S=sr(),E=jt=>{const Jt=fl(jt);return c_(Y.getOpt(r),jt,Jt.x,Jt.y,Jt.width,Jt.height)},D=()=>ce(c.get(),jt=>E(jt)),P=jt=>{const Jt=fl(jt);return c_(oe.getOpt(r),jt,Jt.right,Jt.bottom,Jt.width,Jt.height)},B=()=>ce(h.get(),jt=>P(jt)),H=u_(D,w,jt=>{S.get().each(Jt=>{t.dispatch("TableSelectorChange",{start:jt,finish:Jt})})}),j=u_(B,S,jt=>{w.get().each(Jt=>{t.dispatch("TableSelectorChange",{start:Jt,finish:jt})})}),Y=im(H),oe=im(j),Ce=wa(Y.asSpec()),Qe=wa(oe.asSpec()),Le=(jt,Jt,Co,fn)=>{const ro=Jt.dom.getBoundingClientRect();es(jt.element,"display");const Jn=Da(Tt.fromDom(t.getBody())).dom.innerHeight,xs=Co(ro),zn=fn(ro,Jn);(xs||zn)&&xn(jt.element,"display","none")},_e=(jt,Jt,Co,fn)=>{const ro=Co(Jt);Bg.snapTo(jt,ro),Le(jt,Jt,zn=>zn[fn]<0,(zn,Jo)=>zn[fn]>Jo)},Xe=jt=>_e(Ce,jt,E,"top"),Ft=()=>w.get().each(Xe),Et=jt=>_e(Qe,jt,P,"bottom"),St=()=>S.get().each(Et);eu().deviceType.isTouch()&&(t.on("TableSelectionChange",jt=>{b.get()||(Ih(r,Ce),Ih(r,Qe),b.set(!0)),w.set(jt.start),S.set(jt.finish),jt.otherCells.each(Jt=>{c.set(Jt.upOrLeftCells),h.set(Jt.downOrRightCells),Xe(jt.start),Et(jt.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Ft(),St()}),t.on("TableSelectionClear",()=>{b.get()&&(qf(Ce),qf(Qe),b.set(!1)),w.clear(),S.clear()}))};var d_=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const BC=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",IY=(t,r,c)=>{var h;const b=(h=r.delimiter)!==null&&h!==void 0?h:"›",w=(P,B,H)=>Ri.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":H,"aria-level":H+1}},components:[Lr(P)],action:j=>{t.focus(),t.selection.select(B),t.nodeChanged()},buttonBehaviours:Kt([ni.button(c.isDisabled),ii()])}),S=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Lr(` ${b} `)]}),E=P=>Do(P,(B,H,j)=>{const Y=w(H.name,H.element,j);return j===0?B.concat([Y]):B.concat([S(),Y])},[]),D=P=>{const B=[];let H=P.length;for(;H-- >0;){const j=P[H];if(j.nodeType===1&&!BC(j)){const Y=fN(t,j);if(Y.isDefaultPrevented()||B.push({name:Y.name,element:j}),Y.isPropagationStopped())break}}return B};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Kt([Fn.config({mode:"flow",selector:"div[role=button]"}),qn.config({disabled:c.isDisabled}),ii(),lr.config({}),po.config({}),So("elementPathEvents",[nr((P,B)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Fn.focusIn(P)),t.on("NodeChange",H=>{const j=D(H.parents),Y=j.length>0?E(j):[];po.set(P,Y)})})])]),components:[]}};var am;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(am||(am={}));const LY=(t,r,c,h,b)=>{const w={height:wC(h+r.top,Kp(t),gE(t))};return c===am.Both&&(w.width=wC(b+r.left,mE(t),xx(t))),w},L5=(t,r,c)=>{const h=Tt.fromDom(t.getContainer()),b=LY(t,r,c,ir(h),ee(h));Ye(b,(w,S)=>{G(w)&&xn(h,S,yC(w))}),uN(t)},$Y=t=>{const r=XR(t);return r===!1?am.None:r==="both"?am.Both:am.Vertical},lf=(t,r,c,h)=>{const w=hr(c*20,h*20);return L5(t,w,r),O.some(!0)},$5=(t,r)=>{const c=$Y(t);if(c===am.None)return O.none();const h=c===am.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return O.some(mu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:r.translate("Resize"),"aria-label":r.translate(h)},behaviours:[Bg.config({mode:"mouse",repositionTarget:!1,onDrag:(b,w,S)=>L5(t,S,c),blockerClass:"tox-blocker"}),Fn.config({mode:"special",onLeft:()=>lf(t,c,-1,0),onRight:()=>lf(t,c,1,0),onUp:()=>lf(t,c,0,-1),onDown:()=>lf(t,c,0,1)}),lr.config({}),Xn.config({})]},r.icons))},HY=(t,r)=>{const c=(h,b,w)=>po.set(h,[Lr(r.translate(["{0} "+w,b[w]]))]);return Ri.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Kt([ni.button(r.isDisabled),ii(),lr.config({}),po.config({}),ln.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),So("wordcount-events",[$f(h=>{const b=ln.getValue(h),w=b.mode==="words"?"characters":"words";ln.setValue(h,{mode:w,count:b.count}),c(h,b.count,w)}),nr(h=>{t.on("wordCountUpdate",b=>{const{mode:w}=ln.getValue(h);ln.setValue(h,{mode:w,count:b.wordCount}),c(h,b.wordCount,w)})})])]),eventOrder:{[ac()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},VY=(t,r)=>{const c=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v6",rel:"noopener",target:"_blank","aria-label":bc.translate(["Powered by {0}","Tiny"])},innerHtml:d_.trim()},behaviours:Kt([Xn.config({})])}]}),h=()=>{const E=jx("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Lr(bc.translate(["Press {0} for help",E]))]}},b=()=>{const E=[];return t.hasPlugin("wordcount")&&E.push(HY(t,r)),SE(t)&&E.push(c()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:E}},w=()=>{const E=[],D=Tx(t),P=Xp(t),B=SE(t)||t.hasPlugin("wordcount"),H=()=>{const j="tox-statusbar__text-container--flex-start",Y="tox-statusbar__text-container--flex-end",oe="tox-statusbar__text-container--space-around";if(D){const Ce="tox-statusbar__text-container-3-cols";return!B&&!P?[Ce,oe]:B&&!P?[Ce,Y]:[Ce,j]}return[B&&!P?Y:j]};return P&&E.push(IY(t,{},r)),D&&E.push(h()),B&&E.push(b()),E.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...H()]},components:E}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const E=w(),D=$5(t,r);return E.concat(D.toArray())})()}},H5=(t,r)=>r.get().getOrDie(`UI for ${t} has not been rendered`),zY=(t,r)=>{const c=t.inline,h=c?fK:jL,b=Nb(t)?_I:Ev,w=hK(),S=sr(),E=sr(),D=sr(),j=eu().deviceType.isTouch()?["tox-platform-touch"]:[],Y=AE(t),oe=Yp(t),Ce=As({dom:{tag:"div",classes:["tox-anchorbar"]}}),Qe=As({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Le=()=>w.mainUi.get().map(Un=>Un.outerContainer).bind(Hs.getHeader),_e=()=>Eo.fromOption(w.dialogUi.get().map(Un=>Un.sink),"UI has not been rendered"),Xe=()=>Eo.fromOption(w.popupUi.get().map(Un=>Un.sink),"(popup) UI has not been rendered"),Ft=w.lazyGetInOuterOrDie("anchor bar",Ce.getOpt),Et=w.lazyGetInOuterOrDie("bottom anchor bar",Qe.getOpt),St=w.lazyGetInOuterOrDie("toolbar",Hs.getToolbar),jt=w.lazyGetInOuterOrDie("throbber",Hs.getThrobber),Jt=E1({popup:Xe,dialog:_e},t,Ft,Et),Co=()=>{const Un={attributes:{[Ew]:Y?Wf.BottomToTop:Wf.TopToBottom}},bo=Hs.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Jt.popup,onEscape:()=>{t.focus()}}),Is=Hs.parts.toolbar(ie({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Jt.popup.shared.getSink,providers:Jt.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Kv=>{pz(t,Kv)},type:oe,lazyToolbar:St,lazyHeader:()=>Le().getOrDie("Could not find header element")},Un)),is=Hs.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Jt.popup.shared.providers,onEscape:()=>{t.focus()},type:oe}),Ui=Pb(t),kl=_x(t),Wc=Jp(t),Ou=JR(t),hm=fn(),Vg=Ui||kl||Wc,bd=()=>Ui?[is]:kl?[Is]:[],mh=Ou?[hm,bo]:[bo];return Hs.parts.header({dom:ie({tag:"div",classes:["tox-editor-header"].concat(Vg?[]:["tox-editor-header--empty"])},Un),components:tt([Wc?mh:[],bd(),Qp(t)?[]:[Ce.asSpec()]]),sticky:Nb(t),editor:t,sharedBackstage:Jt.popup.shared})},fn=()=>Hs.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),ro=()=>{const Un=Hs.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),bo=Hs.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Un,bo]}},Jn=()=>{const Un=EE(t),bo=bs(fr(),Un)&&er(Un,"display")==="grid",Is={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(j),attributes:ie({},bc.isRtl()?{dir:"rtl"}:{})},behaviours:Kt([Sa.config({useFixed:()=>b.isDocked(Le)})])},is={dom:{styles:{width:document.body.clientWidth+"px"}},events:ar([_t(D0(),Wc=>{xn(Wc.element,"width",document.body.clientWidth+"px")})])},Ui=wa(Ls(Is,bo?is:{})),kl=aS(Ui);return E.set(kl),{sink:Ui,mothership:kl}},xs=()=>{const Un={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(j),attributes:ie({},bc.isRtl()?{dir:"rtl"}:{})},behaviours:Kt([Sa.config({useFixed:()=>b.isDocked(Le),getBounds:()=>r.getPopupSinkBounds()})])},bo=wa(Un),Is=aS(bo);return D.set(Is),{sink:bo,mothership:Is}},zn=()=>{const Un=Co(),bo=ro(),Is=Hs.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Jt.popup}),is=Hs.parts.viewWrapper({backstage:Jt.popup}),Ui=YR(t)&&!c?O.some(VY(t,Jt.popup.shared.providers)):O.none(),kl=tt([Y?[]:[Un],c?[]:[bo],Y?[Un]:[]]),Wc=Hs.parts.editorContainer({components:tt([kl,c?[]:[Qe.asSpec(),...Ui.toArray()]])}),Ou=TE(t),hm=ie(ie({role:"application"},bc.isRtl()?{dir:"rtl"}:{}),Ou?{"aria-hidden":"true"}:{}),Vg=wa(Hs.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(c?["tox-tinymce-inline"]:[]).concat(Y?["tox-tinymce--toolbar-bottom"]:[]).concat(j),styles:ie({visibility:"hidden"},Ou?{opacity:"0",border:"0"}:{}),attributes:hm},components:[Wc,...c?[]:[is],Is],behaviours:Kt([ii(),qn.config({disableClass:"tox-tinymce--disabled"}),Fn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),bd=aS(Vg);return S.set(bd),{mothership:bd,outerContainer:Vg}},Jo=Un=>{const bo=yC(iK(t)),Is=yC(aK(t));return t.inline||(Ed("div","width",Is)&&xn(Un.element,"width",Is),Ed("div","height",bo)?xn(Un.element,"height",bo):xn(Un.element,"height","400px")),bo},Qt=Un=>{t.addShortcut("alt+F9","focus menubar",()=>{Hs.focusMenubar(Un)}),t.addShortcut("alt+F10","focus toolbar",()=>{Hs.focusToolbar(Un)}),t.addCommand("ToggleToolbarDrawer",(bo,Is)=>{Is!=null&&Is.skipFocus?Hs.toggleToolbarDrawerWithoutFocusing(Un):Hs.toggleToolbarDrawer(Un)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Hs.isToolbarDrawerToggled(Un))},yn=Un=>{const{mainUi:bo,popupUi:Is,uiMotherships:is}=Un;pt(jR(t),(H1,ZC)=>{t.ui.registry.addGroupToolbarButton(ZC,H1)});const{buttons:Ui,menuItems:kl,contextToolbars:Wc,sidebars:Ou,views:hm}=t.ui.registry.getAll(),Vg=kE(t),bd={menuItems:kl,menus:nP(t),menubar:bE(t),toolbar:Vg.getOrThunk(()=>Cx(t)),allowToolbarGroups:oe===$l.floating,buttons:Ui,sidebar:Ou,views:hm};Qt(bo.outerContainer),hI(t,bo.mothership,is),b.setup(t,Jt.popup.shared,Le),m5(t,Jt.popup),rY(t,Jt.popup.shared.getSink,Jt.popup),BI(t),Oq(t,jt,Jt.popup.shared),a5(t,Wc,Is.sink,{backstage:Jt.popup}),FY(t,Is.sink);const mh=t.getElement(),Kv=Jo(bo.outerContainer),C_={targetNode:mh,height:Kv};return h.render(t,Un,bd,Jt.popup,C_)},io=Un=>(D.set(Un.mothership),Un),uo=()=>{const Un=zn(),bo=Jn(),Is=qd(t)?xs():io(bo);w.dialogUi.set(bo),w.popupUi.set(Is),w.mainUi.set(Un);const is={popupUi:Is,dialogUi:bo,mainUi:Un,uiMotherships:w.getUiMotherships()};return yn(is)};return{popups:{backstage:Jt.popup,getMothership:()=>H5("popups",D)},dialogs:{backstage:Jt.dialog,getMothership:()=>H5("dialogs",E)},renderUI:uo}},UY=(t,r)=>{const c=z(t,"id").fold(()=>{const h=pn("dialog-label");return sn(r,"id",h),h},Ie);sn(t,"aria-labelledby",c)},WY=K([Pt("lazySink"),Ds("dragBlockClass"),Vi("getBounds",qi),et("useTabstopAt",ge),et("firstTabstop",0),et("eventOrder",{}),yi("modalBehaviours",[Fn]),Rl("onExecute"),dk("onEscape")]),f_={sketch:Ie},jY=K([gc({name:"draghandle",overrides:(t,r)=>({behaviours:Kt([Bg.config({mode:"mouse",getTarget:c=>cc(c,'[role="dialog"]').getOr(c),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(r,null,2)).message),getBounds:t.getDragBounds})])})}),Ca({schema:[Pt("dom")],name:"title"}),Ca({factory:f_,schema:[Pt("dom")],name:"close"}),Ca({factory:f_,schema:[Pt("dom")],name:"body"}),gc({factory:f_,schema:[Pt("dom")],name:"footer"}),uu({factory:{sketch:(t,r)=>Ot(ie({},t),{dom:r.dom,components:r.components})},schema:[et("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),et("components",[])],name:"blocker"})]),h_=(t,r,c,h)=>{const b=sr(),w=Y=>{b.set(Y);const oe=t.lazySink(Y).getOrDie(),Ce=h.blocker(),Qe=oe.getSystem().build(Ot(ie({},Ce),{components:Ce.components.concat([Rc(Y)]),behaviours:Kt([Xn.config({}),So("dialog-blocker-events",[Lf(Bf(),()=>{Cu.isBlocked(Y)?Z():Fn.focusIn(Y)})])])}));Ih(oe,Qe),Fn.focusIn(Y)},S=Y=>{b.clear(),mi(Y.element).each(oe=>{Y.getSystem().getByDom(oe).each(Ce=>{qf(Ce)})})},E=Y=>Xf(Y,t,"body"),D=Y=>Gs(Y,t,"footer"),P=(Y,oe)=>{Cu.block(Y,oe)},B=Y=>{Cu.unblock(Y)},H=pn("modal-events"),j=Ot(ie({},t.eventOrder),{[Yu()]:[H].concat(t.eventOrder["alloy.system.attached"]||[])});return{uid:t.uid,dom:t.dom,components:r,apis:{show:w,hide:S,getBody:E,getFooter:D,setIdle:B,setBusy:P},eventOrder:j,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Mi(t.modalBehaviours,[po.config({}),Fn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Cu.config({getRoot:b.get}),So(H,[nr(Y=>{UY(Y.element,Xf(Y,t,"title").element)})])])}},$r=ka({name:"ModalDialog",configFields:WY(),partFields:jY(),factory:h_,apis:{show:(t,r)=>{t.show(r)},hide:(t,r)=>{t.hide(r)},getBody:(t,r)=>t.getBody(r),getFooter:(t,r)=>t.getFooter(r),setBusy:(t,r,c)=>{t.setBusy(r,c)},setIdle:(t,r)=>{t.setIdle(r)}}}),m_=Ln([qr,UE].concat(bg)),FC=Uu,hh=[Vx("button"),vc,sc("align","end",["start","end"]),Xd,Nc,xM("buttonType",["primary","secondary"])],Vv=[...hh,rh],g_=[Wu("type",["submit","cancel","custom"]),...Vv],V5=[Wu("type",["menu"]),Yd,Lb,vc,nc("items",m_),...hh],z5=[...hh,Wu("type",["togglebutton"]),ws("tooltip"),vc,Yd,Hi("active",!1)],U5=ms("type",{submit:g_,cancel:g_,custom:g_,menu:V5,togglebutton:z5}),ZY=[qr,rh,Wu("level",["info","warn","error","success"]),WE,et("url","")],qY=Ln(ZY),GY=t=>[qr,t],tte=[qr,rh,Nc,Vx("button"),vc,SP,xM("buttonType",["primary","secondary","toolbar"]),Xd],W5=Ln(tte),lm=[qr,UE],gd=lm.concat([$x]),KY=lm.concat([Lx,Nc]),YY=Ln(KY),j5=Uu,XY=gd.concat([CP("auto")]),JY=Ln(XY),QY=Pm([o1,rh,WE]),p_=gd.concat([Rf("storageKey","default")]),b_=Ln(p_),eX=Yi,nX=Ln(gd),oX=Yi,Z5=lm.concat([Rf("tag","textarea"),ws("scriptId"),ws("scriptUrl"),z6("settings",void 0)]),sX=lm.concat([Rf("tag","textarea"),ju("init")]),rX=w0(t=>Tr("customeditor.old",tr(sX),t).orThunk(()=>Tr("customeditor.new",tr(Z5),t))),Fg=Yi,aX=Ln(gd),IC=H6(),N1=t=>[qr,C0("columns"),t],LC=[qr,ws("html"),sc("presets","presentation",["presentation","document"])],q5=Ln(LC),$C=gd.concat([Hi("border",!1),Hi("sandboxed",!0),Hi("streamContent",!1),Hi("transparent",!0)]),Sl=Ln($C),HC=Yi,G5=Ln(lm.concat([Na("height")])),K5=Ln([ws("url"),k0("zoom"),k0("cachedWidth"),k0("cachedHeight")]),lX=gd.concat([Na("inputMode"),Na("placeholder"),Hi("maximized",!1),Nc]),cX=Ln(lX),cm=Yi,nte=t=>[qr,Lx,t,sc("align","start",["start","center","end"])],uX=[rh,o1],Y5=[rh,nc("items",S0("items",()=>Ig))],Ig=wn([Ln(uX),Ln(Y5)]),VC=gd.concat([nc("items",Ig),Nc]),X5=Ln(VC),dX=Yi,fX=gd.concat([L2("items",[rh,o1]),Lm("size",1),Nc]),hX=Ln(fX),mX=Yi,B1=gd.concat([Hi("constrain",!0),Nc]),ote=Ln(B1),J5=Ln([ws("width"),ws("height")]),gX=lm.concat([Lx,Lm("min",0),Lm("max",0)]),ste=Ln(gX),pX=y0,bX=[qr,nc("header",Yi),nc("cells",zu(Yi))],zv=Ln(bX),vX=gd.concat([Na("placeholder"),Hi("maximized",!1),Nc]),yX=Ln(vX),Q5=Yi,e$=[Wu("type",["directory","leaf"]),yP,ws("id"),Nd("menu",gD)],e=Ln(e$),n=e$.concat([nc("children",S0("children",()=>Vt("type",{directory:s,leaf:e})))]),s=Ln(n),a=Vt("type",{directory:s,leaf:e}),f=[qr,nc("items",a),Bm("onLeafAction"),Bm("onToggleExpand"),qu("defaultExpandedIds",[],Yi),Na("defaultSelectedId")],g=Ln(f),y=gd.concat([sc("filetype","file",["image","media","file"]),Nc,Na("picker_text")]),C=Ln(y),A=Ln([o1,$b]),M=t=>ia("items","items",ks(),zu(w0(r=>Tr(`Checking item of ${t}`,I,r).fold(c=>Eo.error(hl(c)),c=>Eo.value(c))))),I=ya(()=>Vt("type",{alertbanner:qY,bar:Ln(GY(M("bar"))),button:W5,checkbox:YY,colorinput:b_,colorpicker:nX,dropzone:aX,grid:Ln(N1(M("grid"))),iframe:Sl,input:cX,listbox:X5,selectbox:hX,sizeinput:ote,slider:ste,textarea:yX,urlinput:C,customeditor:rX,htmlpanel:q5,imagepreview:G5,collection:JY,label:Ln(nte(M("label"))),table:zv,tree:g,panel:W})),L=[qr,et("classes",[]),nc("items",I)],W=Ln(L),re=[Vx("tab"),yP,nc("items",I)],de=[qr,L2("tabs",re)],te=Ln(de),fe=Vv,Fe=U5,ze=Ln([ws("title"),tc("body",Vt("type",{panel:W,tabpanel:te})),Rf("size","normal"),qu("buttons",[],Fe),et("initialData",{}),Vi("onAction",Z),Vi("onChange",Z),Vi("onSubmit",Z),Vi("onClose",Z),Vi("onCancel",Z),Vi("onTabChange",Z)]),Ve=t=>Tr("dialog",ze,t),nt=Ln([Wu("type",["cancel","custom"]),...fe]),Nt=Ln([ws("title"),ws("url"),k0("height"),k0("width"),Fm("buttons",nt),Vi("onAction",Z),Vi("onCancel",Z),Vi("onClose",Z),Vi("onMessage",Z)]),Zt=t=>Tr("dialog",Nt,t),on=t=>x(t)?[t].concat(ue(cs(t),on)):T(t)?ue(t,on):[],vt=t=>v(t.type)&&v(t.name),ut={checkbox:j5,colorinput:eX,colorpicker:oX,dropzone:IC,input:cm,iframe:HC,imagepreview:K5,selectbox:mX,sizeinput:J5,slider:pX,listbox:dX,size:J5,textarea:Q5,urlinput:A,customeditor:Fg,collection:QY,togglemenuitem:FC},Mt=t=>O.from(ut[t.type]),mn=t=>cn(on(t),vt),Rn=t=>{const r=mn(t),c=ue(r,h=>Mt(h).fold(()=>[],b=>[tc(h.name,b)]));return Ln(c)},Bo=t=>{var r;const c=Zs(Ve(t)),h=Rn(t),b=(r=t.initialData)!==null&&r!==void 0?r:{};return{internalDialog:c,dataValidator:h,initialData:b}},Mo={open:(t,r)=>{const c=Bo(r);return t(c.internalDialog,c.initialData,c.dataValidator)},openUrl:(t,r)=>{const c=Zs(Zt(r));return t(c)},redial:t=>Bo(t)};var Vs=Object.freeze({__proto__:null,events:(t,r)=>{const c=(h,b)=>{t.updateState.each(w=>{const S=w(h,b);r.set(S)}),t.renderComponents.each(w=>{const S=w(b,r.get());(t.reuseDom?nR:$a)(h,S)})};return ar([_t(zm(),(h,b)=>{const w=b;if(!w.universal){const S=t.channel;We(w.channels,S)&&c(h,w.data)}}),nr((h,b)=>{t.initialData.each(w=>{c(h,w)})})])}}),ea=Object.freeze({__proto__:null,getState:(t,r,c)=>c}),_s=[Pt("channel"),Ds("renderComponents"),Ds("updateState"),Ds("initialData"),Hi("reuseDom",!0)],Cn=Object.freeze({__proto__:null,init:()=>{const t=Zn(O.none()),r=()=>t.set(O.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:r}}});const Ro=Ji({fields:_s,name:"reflecting",active:Vs,apis:ea,state:Cn}),Vo=t=>{const r=[],c={};return Ye(t,(h,b)=>{h.fold(()=>{r.push(b)},w=>{c[b]=w})}),r.length>0?Eo.error(r):Eo.value(c)},vn=(t,r,c)=>{const h=As(v1.sketch(b=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:ce(t.items,w=>gv(b,w,r,c))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[h.asSpec()]}],behaviours:Kt([Fn.config({mode:"acyclic",useTabstopAt:ae(w1)}),yl.memento(h),LB(h,{postprocess:b=>Vo(b).fold(w=>({}),Ie)}),So("dialog-body-panel",[_t(Bf(),(b,w)=>{b.getSystem().broadcastOn([S1],{newFocus:O.some(w.event.target)})})])])}},lo=(t,r)=>({uid:t.uid,dom:t.dom,components:t.components,events:sd(t.action),behaviours:Mi(t.tabButtonBehaviours,[Xn.config({}),Fn.config({mode:"execution",useSpace:!0,useEnter:!0}),ln.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),Gt=Fl({name:"TabButton",configFields:[et("uid",void 0),Pt("value"),ia("dom","dom",sp(()=>({attributes:{role:"tab",id:pn("aria"),"aria-selected":"false"}})),Ki()),Ds("action"),et("domModification",{}),yi("tabButtonBehaviours",[Xn,Fn,ln]),Pt("view")],factory:lo}),co=K([Pt("tabs"),Pt("dom"),et("clickToDismiss",!1),yi("tabbarBehaviours",[gs,Fn]),Ph(["tabClass","selectedClass"])]),Go=ub({factory:Gt,name:"tabs",unit:"tab",overrides:t=>{const r=(h,b)=>{gs.dehighlight(h,b),Hn(h,Xy(),{tabbar:h,button:b})},c=(h,b)=>{gs.highlight(h,b),Hn(h,DM(),{tabbar:h,button:b})};return{action:h=>{const b=h.getSystem().getByUid(t.uid).getOrDie(),w=gs.isHighlighted(b,h);(w&&t.clickToDismiss?r:w?Z:c)(b,h)},domModification:{classes:[t.markers.tabClass]}}}}),Fs=K([Go]),Ns=(t,r,c,h)=>({uid:t.uid,dom:t.dom,components:r,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Mi(t.tabbarBehaviours,[gs.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(b,w)=>{sn(w.element,"aria-selected","true")},onDehighlight:(b,w)=>{sn(w.element,"aria-selected","false")}}),Fn.config({mode:"flow",getInitial:b=>gs.getHighlighted(b).map(w=>w.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),xi=ka({name:"Tabbar",configFields:co(),partFields:Fs(),factory:Ns}),Au=(t,r)=>({uid:t.uid,dom:t.dom,behaviours:Mi(t.tabviewBehaviours,[po.config({})]),domModification:{attributes:{role:"tabpanel"}}}),cf=Fl({name:"Tabview",configFields:[yi("tabviewBehaviours",[po])],factory:Au}),tl=K([et("selectFirst",!0),os("onChangeTab"),os("onDismissTab"),et("tabs",[]),yi("tabSectionBehaviours",[])]),Vc=Ca({factory:xi,schema:[Pt("dom"),Zu("markers",[Pt("tabClass"),Pt("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),mo=Ca({factory:cf,name:"tabview"}),hs=K([Vc,mo]),zs=(t,r,c,h)=>{const b=S=>{const E=ln.getValue(S);Gs(S,t,"tabview").each(D=>{Je(t.tabs,B=>B.value===E).each(B=>{const H=B.view();z(S.element,"id").each(j=>{sn(D.element,"aria-labelledby",j)}),po.set(D,H),t.onChangeTab(D,S,H)})})},w=(S,E)=>{Gs(S,t,"tabbar").each(D=>{E(D).each(Ff)})};return{uid:t.uid,dom:t.dom,components:r,behaviours:Kf(t.tabSectionBehaviours),events:ar(tt([t.selectFirst?[nr((S,E)=>{w(S,gs.getFirst)})]:[],[_t(DM(),(S,E)=>{const D=E.event.button;b(D)}),_t(Xy(),(S,E)=>{const D=E.event.button;t.onDismissTab(S,D)})]])),apis:{getViewItems:S=>Gs(S,t,"tabview").map(E=>po.contents(E)).getOr([]),showTab:(S,E)=>{w(S,P=>{const B=gs.getCandidates(P);return Je(B,j=>ln.getValue(j)===E).filter(j=>!gs.isHighlighted(P,j))})}}}},cr=ka({name:"TabSection",configFields:tl(),partFields:hs(),factory:zs,apis:{getViewItems:(t,r)=>t.getViewItems(r),showTab:(t,r,c)=>{t.showTab(r,c)}}}),yr=(t,r,c)=>ce(t,(h,b)=>{po.set(c,t[b].view());const w=r.dom.getBoundingClientRect();return po.set(c,[]),w.height}),Cl=t=>en(je(t,(r,c)=>r>c?-1:r<c?1:0)),pd=(t,r,c)=>{const h=oa(t).dom,b=cc(t,".tox-dialog-wrap").getOr(t),w=er(b,"position")==="fixed";let S;w?S=Math.max(h.clientHeight,window.innerHeight):S=Math.max(h.offsetHeight,h.scrollHeight);const E=ir(r),P=r.dom.offsetLeft>=c.dom.offsetLeft+ee(c)?Math.max(ir(c),E):E,B=parseInt(er(t,"margin-top"),10)||0,H=parseInt(er(t,"margin-bottom"),10)||0,Y=ir(t)+B+H-P;return S-Y},um=(t,r)=>{en(t).each(c=>cr.showTab(r,c.value))},Uv=(t,r)=>{xn(t,"height",r+"px"),xn(t,"flex-basis",r+"px")},Lg=(t,r,c)=>{cc(t,'[role="dialog"]').each(h=>{Zr(h,'[role="tablist"]').each(b=>{c.get().map(w=>(xn(r,"height","0"),xn(r,"flex-basis","0"),Math.min(w,pd(h,r,b)))).each(w=>{Uv(r,w)})})})},F1=t=>Zr(t,'[role="tabpanel"]'),I1=t=>{const r=sr();return{extraEvents:[nr(b=>{const w=b.element;F1(w).each(S=>{xn(S,"visibility","hidden"),b.getSystem().getByDom(S).toOptional().each(E=>{const D=yr(t,S,E);Cl(D).fold(r.clear,r.set)}),Lg(w,S,r),es(S,"visibility"),um(t,b),requestAnimationFrame(()=>{Lg(w,S,r)})})}),_t(D0(),b=>{const w=b.element;F1(w).each(S=>{Lg(w,S,r)})}),_t(QN,(b,w)=>{const S=b.element;F1(S).each(E=>{const D=Hd(Ct(E));xn(E,"visibility","hidden");const P=js(E,"height").map(j=>parseInt(j,10));es(E,"height"),es(E,"flex-basis");const B=E.dom.getBoundingClientRect().height;P.forall(j=>B>j)?(r.set(B),Lg(S,E,r)):P.each(j=>{Uv(E,j)}),es(E,"visibility"),D.each(dc)})})],selectFirst:!1}},Wv="send-data-to-section",$g="send-data-to-view",Hg=(t,r,c)=>{const h=Zn({}),b=P=>{const B=ln.getValue(P),H=Vo(B).getOr({}),j=h.get(),Y=Ls(j,H);h.set(Y)},w=P=>{const B=h.get();ln.setValue(P,B)},S=Zn(null),E=ce(t.tabs,P=>({value:P.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Lr(c.shared.providers.translate(P.title))],view:()=>[v1.sketch(B=>({dom:{tag:"div",classes:["tox-form"]},components:ce(P.items,H=>gv(B,H,r,c)),formBehaviours:Kt([Fn.config({mode:"acyclic",useTabstopAt:ae(w1)}),So("TabView.form.events",[nr(w),Fd(b)]),Pl.config({channels:Ba([{key:Wv,value:{onReceive:b}},{key:$g,value:{onReceive:w}}])})])}))]})),D=I1(E);return cr.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(P,B,H)=>{const j=ln.getValue(B);Hn(P,JN,{name:j,oldName:S.get()}),S.set(j)},tabs:E,components:[cr.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[xi.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Kt([lr.config({})])}),cr.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:D.selectFirst,tabSectionBehaviours:Kt([So("tabpanel",D.extraEvents),Fn.config({mode:"acyclic"}),Zo.config({find:P=>en(cr.getViewItems(P))}),Jh(O.none(),P=>(P.getSystem().broadcastOn([Wv],{}),h.get()),(P,B)=>{h.set(B),P.getSystem().broadcastOn([$g],{})})])})},Eu=(t,r,c,h,b)=>{const w=D=>{const P=D.body;switch(P.type){case"tabpanel":return[Hg(P,D.initialData,h)];default:return[vn(P,D.initialData,h)]}},S=(D,P)=>O.some({isTabPanel:()=>P.body.type==="tabpanel"}),E={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:ie(ie({},c.map(D=>({id:D})).getOr({})),b?E:{})},components:[],behaviours:Kt([yl.childAt(0),Ro.config({channel:`${OS}-${r}`,updateState:S,renderComponents:w,initialData:t})])}},uf=(t,r,c,h,b)=>Eu(t,r,O.some(c),h,b),jv=(t,r,c)=>{const h=Eu(t,r,O.none(),c,!1);return $r.parts.body(h)},L1=t=>{const r={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[jB(O.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Kt([lr.config({}),Xn.config({})])})]}],behaviours:Kt([Fn.config({mode:"acyclic",useTabstopAt:ae(w1)})])};return $r.parts.body(r)},zC=Gp.deviceType.isTouch(),df=(t,r)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,r]}),UC=(t,r)=>$r.parts.close(Ri.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":r.translate("Close")}},action:t,buttonBehaviours:Kt([lr.config({})])})),Zv=()=>$r.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),ha=(t,r)=>$r.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:nh(`<p>${aE(r.translate(t))}</p>`)}]}]}),dm=t=>$r.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),v_=(t,r)=>[ld.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),ld.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:r})],qv=t=>{const r="tox-dialog",c=r+"-wrap",h=c+"__backdrop",b=r+"__disable-scroll";return $r.sketch({lazySink:t.lazySink,onEscape:w=>(t.onEscape(w),O.some(!0)),useTabstopAt:w=>!w1(w),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[r].concat(t.extraClasses),styles:ie({position:"relative"},t.extraStyles)},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:nh(`<div class="${c}"></div>`),components:[{dom:{tag:"div",classes:zC?[h,h+"--opaque"]:[h]}}]}},dragBlockClass:c,modalBehaviours:Kt([Xn.config({}),So("dialog-events",t.dialogEvents.concat([Lf(Bf(),(w,S)=>{Cu.isBlocked(w)?Z():Fn.focusIn(w)}),_t(Yy(),(w,S)=>{w.getSystem().broadcastOn([S1],{newFocus:S.event.newFocus})})])),So("scroll-lock",[nr(()=>{ti(fr(),b)}),Fd(()=>{wr(fr(),b)})]),...t.extraBehaviours]),eventOrder:ie({[ac()]:["dialog-events"],[Yu()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Um()]:["alloy.base.behaviour","dialog-events","scroll-lock"]},t.eventOrder)})},Gv=t=>Ri.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:Kt([lr.config({})]),components:[mu("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:r=>{ns(r,Kh)}}),ff=(t,r,c,h)=>{const b=w=>[Lr(h.translate(w.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:ie({},c.map(w=>({id:w})).getOr({}))},components:[],behaviours:Kt([Ro.config({channel:`${sf}-${r}`,initialData:t,renderComponents:b})])}},$1=()=>({dom:nh('<div class="tox-dialog__draghandle"></div>')}),rt=(t,r,c,h)=>ld.sketch({dom:nh('<div class="tox-dialog__header"></div>'),components:[ff(t,r,O.some(c),h),$1(),Gv(h)],containerBehaviours:Kt([Bg.config({mode:"mouse",blockerClass:"blocker",getTarget:b=>Qu(b,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),it=(t,r,c)=>{const h=$r.parts.title(ff(t,r,O.none(),c)),b=$r.parts.draghandle($1()),w=$r.parts.close(Gv(c)),S=[h].concat(t.draggable?[b]:[]).concat([w]);return ld.sketch({dom:nh('<div class="tox-dialog__header"></div>'),components:S})},Yt=(t,r,c)=>it({title:c.shared.providers.translate(t),draggable:c.dialog.isDraggableModal()},r,c.shared.providers),zt=(t,r,c,h)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":c.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${h.getOr(0)}px`,position:"absolute"}},behaviours:r,components:[{dom:nh('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),_n=(t,r,c)=>({onClose:()=>c.closeWindow(),onBlock:h=>{const b=Zr(t().element,".tox-dialog__header").map(w=>ir(w));$r.setBusy(t(),(w,S)=>zt(h.message,S,r,b))},onUnblock:()=>{$r.setIdle(t())}}),zo="tox-dialog--fullscreen",gr="tox-dialog--width-lg",nl="tox-dialog--width-md",Ni=t=>{switch(t){case"large":return O.some(gr);case"medium":return O.some(nl);default:return O.none()}},fm=(t,r)=>{const c=Tt.fromDom(r.element.dom);vi(c,zo)||(ru(c,[gr,nl]),Ni(t).each(h=>ti(c,h)))},zc=(t,r)=>{const c=Tt.fromDom(t.element.dom),h=lw(c),b=Je(h,w=>w===gr||w===nl).or(Ni(r));S8(c,[zo,...b.toArray()])},y_=(t,r,c)=>wa(qv(Ot(ie({},t),{firstTabstop:1,lazySink:c.shared.getSink,extraBehaviours:[ES({}),...t.extraBehaviours],onEscape:h=>{ns(h,Kh)},dialogEvents:r,eventOrder:{[zm()]:[Ro.name(),Pl.name()],[Yu()]:["scroll-lock",Ro.name(),"messages","dialog-events","alloy.base.behaviour"],[Um()]:["alloy.base.behaviour","dialog-events","messages",Ro.name(),"scroll-lock"]}}))),WC=(t,r={})=>{const c=h=>{const b=ce(h.items,w=>{const S=$t(r,w.name).getOr(Zn(!1));return Ot(ie({},w),{storage:S})});return Ot(ie({},h),{items:b})};return ce(t,h=>h.type==="menu"?c(h):h)},w_=t=>Do(t,(r,c)=>c.type==="menu"?Do(c.items,(b,w)=>(b[w.name]=w.storage,b),r):r,{}),x_=(t,r)=>[Y2(Bf(),YW),t(h1,(c,h,b,w)=>{Hd(Ct(w.element)).fold(Z,Tk),r.onClose(),h.onClose()}),t(Kh,(c,h,b,w)=>{h.onCancel(c),ns(w,h1)}),_t($T,(c,h)=>r.onUnblock()),_t(LT,(c,h)=>r.onBlock(h.event))],wX=(t,r)=>{const c=(b,w)=>_t(b,(S,E)=>{h(S,(D,P)=>{w(t(),D,E.event,S)})}),h=(b,w)=>{Ro.getState(b).get().each(S=>{w(S,b)})};return[...x_(c,r),c(tf,(b,w,S)=>{w.onAction(b,{name:S.name})})]},$o=(t,r,c)=>{const h=(w,S)=>_t(w,(E,D)=>{b(E,(P,B)=>{S(t(),P,D.event,E)})}),b=(w,S)=>{Ro.getState(w).get().each(E=>{S(E.internalDialog,w)})};return[...x_(h,r),h(ev,(w,S)=>S.onSubmit(w)),h(bl,(w,S,E)=>{S.onChange(w,{name:E.name})}),h(tf,(w,S,E,D)=>{const P=()=>D.getSystem().isConnected()?Fn.focusIn(D):void 0,B=Y=>se(Y,"disabled")||z(Y,"aria-disabled").exists(oe=>oe==="true"),H=Ct(D.element),j=Hd(H);S.onAction(w,{name:E.name,value:E.value}),Hd(H).fold(P,Y=>{B(Y)||j.exists(oe=>ma(Y,oe)&&B(oe))?P():c().toOptional().filter(oe=>!ma(oe.element,Y)).each(P)})}),h(JN,(w,S,E)=>{S.onTabChange(w,{newTabName:E.name,oldTabName:E.oldName})}),Fd(w=>{const S=t();ln.setValue(w,S.getData())})]},ft=(t,r)=>$S(t,t.type,r),Sn=(t,r,c)=>Je(r,h=>h.name===c).bind(h=>h.memento.getOpt(t)),eo=(t,r)=>{const c=r.map(E=>E.footerButtons).getOr([]),h=kn(c,E=>E.align==="start"),b=(E,D)=>ld.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${E}`]},components:ce(D,P=>P.memento.asSpec())}),w=b("start",h.pass),S=b("end",h.fail);return[w,S]},Br=(t,r,c)=>{const h=(b,w)=>{const S=ce(w.buttons,D=>{const P=As(ft(D,c));return{name:D.name,align:D.align,memento:P}}),E=D=>Sn(b,S,D);return O.some({lookupByName:E,footerButtons:S})};return{dom:nh('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Kt([Ro.config({channel:`${gO}-${r}`,initialData:t,updateState:h,renderComponents:eo})])}},Ua=(t,r,c)=>Br(t,r,c),Uc=(t,r,c)=>$r.parts.footer(Br(t,r,c)),Si=(t,r)=>{if(t.getRoot().getSystem().isConnected()){const h=Zo.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return v1.getField(h,r).orThunk(()=>t.getFooter().bind(S=>Ro.getState(S).get()).bind(S=>S.lookupByName(r)))}else return O.none()},Tu=(t,r)=>{const c=t.getRoot();return Ro.getState(c).get().map(h=>Zs(Tr("data",h.dataValidator,r))).getOr(r)},jC=(t,r,c)=>{const h=oe=>{const Ce=t.getRoot();Ce.getSystem().isConnected()&&oe(Ce)},Y={getData:()=>{const oe=t.getRoot(),Ce=oe.getSystem().isConnected()?t.getFormWrapper():oe,Qe=ln.getValue(Ce),Le=pt(c,_e=>_e.get());return ie(ie({},Qe),Le)},setData:oe=>{h(Ce=>{const Qe=Y.getData(),Le=Ls(Qe,oe),_e=Tu(t,Le),Xe=t.getFormWrapper();ln.setValue(Xe,_e),Ye(c,(Ft,Et)=>{xo(Le,Et)&&Ft.set(Le[Et])})})},setEnabled:(oe,Ce)=>{Si(t,oe).each(Ce?qn.enable:qn.disable)},focus:oe=>{Si(t,oe).each(Xn.focus)},block:oe=>{if(!v(oe))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");h(Ce=>{Hn(Ce,LT,{message:oe})})},unblock:()=>{h(oe=>{ns(oe,$T)})},showTab:oe=>{h(Ce=>{const Qe=t.getBody();Ro.getState(Qe).get().exists(_e=>_e.isTabPanel())&&Zo.getCurrent(Qe).each(_e=>{cr.showTab(_e,oe)})})},redial:oe=>{h(Ce=>{const Qe=t.getId(),Le=r(oe),_e=WC(Le.internalDialog.buttons,c);Ce.getSystem().broadcastOn([`${x1}-${Qe}`],Le),Ce.getSystem().broadcastOn([`${sf}-${Qe}`],Le.internalDialog),Ce.getSystem().broadcastOn([`${OS}-${Qe}`],Le.internalDialog),Ce.getSystem().broadcastOn([`${gO}-${Qe}`],Ot(ie({},Le.internalDialog),{buttons:_e})),Y.setData(Le.initialData)})},close:()=>{h(oe=>{ns(oe,h1)})},toggleFullscreen:t.toggleFullscreen};return Y},xX=(t,r,c)=>{const h=pn("dialog"),b=t.internalDialog,w=Yt(b.title,h,c),S=Zn(b.size),E=Ni(S.get()).toArray(),D=(_e,Xe)=>(S.set(Xe.internalDialog.size),fm(Xe.internalDialog.size,_e),O.some(Xe)),P=jv({body:b.body,initialData:b.initialData},h,c),B=WC(b.buttons),H=w_(B),j=Bn(B.length!==0,Uc({buttons:B},h,c)),Y=$o(()=>Le,_n(()=>Ce,c.shared.providers,r),c.shared.getSink),oe={id:h,header:w,body:P,footer:j,extraClasses:E,extraBehaviours:[Ro.config({channel:`${x1}-${h}`,updateState:D,initialData:t})],extraStyles:{}},Ce=y_(oe,Y,c),Qe=(()=>{const _e=()=>{const Ft=$r.getBody(Ce);return Zo.getCurrent(Ft).getOr(Ft)},Xe=()=>{zc(Ce,S.get())};return{getId:K(h),getRoot:K(Ce),getBody:()=>$r.getBody(Ce),getFooter:()=>$r.getFooter(Ce),getFormWrapper:_e,toggleFullscreen:Xe}})(),Le=jC(Qe,r.redial,H);return{dialog:Ce,instanceApi:Le}},S_=(t,r,c,h=!1,b)=>{const w=pn("dialog"),S=pn("dialog-label"),E=pn("dialog-content"),D=t.internalDialog,P=Zn(D.size),B=Ni(P.get()).toArray(),H=(St,jt)=>(P.set(jt.internalDialog.size),fm(jt.internalDialog.size,St),b(),O.some(jt)),j=As(rt({title:D.title,draggable:!0},w,S,c.shared.providers)),Y=As(uf({body:D.body,initialData:D.initialData},w,E,c,h)),oe=WC(D.buttons),Ce=w_(oe),Qe=Bn(oe.length!==0,As(Ua({buttons:oe},w,c))),Le=$o(()=>Et,{onBlock:St=>{Cu.block(Xe,(jt,Jt)=>{const Co=j.getOpt(Xe).map(fn=>ir(fn.element));return zt(St.message,Jt,c.shared.providers,Co)})},onUnblock:()=>{Cu.unblock(Xe)},onClose:()=>r.closeWindow()},c.shared.getSink),Xe=wa({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...B],attributes:{role:"dialog","aria-labelledby":S}},eventOrder:{[zm()]:[Ro.name(),Pl.name()],[ac()]:["execute-on-form"],[Yu()]:["reflecting","execute-on-form"]},behaviours:Kt([Fn.config({mode:"cyclic",onEscape:St=>(ns(St,h1),O.some(!0)),useTabstopAt:St=>!w1(St)&&(Ts(St)!=="button"||Vr(St,"disabled")!=="disabled"),firstTabstop:1}),Ro.config({channel:`${x1}-${w}`,updateState:H,initialData:t}),Xn.config({}),So("execute-on-form",Le.concat([Lf(Bf(),(St,jt)=>{Fn.focusIn(St)}),_t(Yy(),(St,jt)=>{St.getSystem().broadcastOn([S1],{newFocus:jt.event.newFocus})})])),Cu.config({getRoot:()=>O.some(Xe)}),po.config({}),ES({})]),components:[j.asSpec(),Y.asSpec(),...Qe.map(St=>St.asSpec()).toArray()]}),Ft=()=>{zc(Xe,P.get())},Et=jC({getId:K(w),getRoot:K(Xe),getFooter:()=>Qe.map(St=>St.get(Xe)),getBody:()=>Y.get(Xe),getFormWrapper:()=>{const St=Y.get(Xe);return Zo.getCurrent(St).getOr(St)},toggleFullscreen:Ft},r.redial,Ce);return{dialog:Xe,instanceApi:Et}};var t$=tinymce.util.Tools.resolve("tinymce.util.URI");const hae=t=>{const r=S=>{t.getSystem().isConnected()&&S(t)};return{block:S=>{if(!v(S))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");r(E=>{Hn(E,LT,{message:S})})},unblock:()=>{r(S=>{ns(S,$T)})},close:()=>{r(S=>{ns(S,h1)})},sendMessage:S=>{r(E=>{E.getSystem().broadcastOn([pO],S)})}}},mae=["insertContent","setContent","execCommand","close","block","unblock"],rte=t=>x(t)&&mae.indexOf(t.mceAction)!==-1,gae=t=>!rte(t)&&x(t)&&xo(t,"mceAction"),pae=(t,r,c)=>{switch(c.mceAction){case"insertContent":t.insertContent(c.content);break;case"setContent":t.setContent(c.content);break;case"execCommand":const h=N(c.ui)?c.ui:!1;t.execCommand(c.cmd,h,c.value);break;case"close":r.close();break;case"block":r.block(c.message);break;case"unblock":r.unblock();break}},bae=(t,r,c,h)=>{const b=pn("dialog"),w=Yt(t.title,b,h),S=L1(t),E=t.buttons.bind(Xe=>Xe.length===0?O.none():O.some(Uc({buttons:Xe},b,h))),D=wX(()=>_e,_n(()=>Le,h.shared.providers,r)),P=ie(ie({},t.height.fold(()=>({}),Xe=>({height:Xe+"px","max-height":Xe+"px"}))),t.width.fold(()=>({}),Xe=>({width:Xe+"px","max-width":Xe+"px"}))),B=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],H=new t$(t.url,{base_uri:new t$(window.location.href)}),j=`${H.protocol}://${H.host}${H.port?":"+H.port:""}`,Y=kp(),oe=(Xe,Ft)=>O.some(Ft),Ce=[Ro.config({channel:`${x1}-${b}`,updateState:oe,initialData:t}),So("messages",[nr(()=>{const Xe=Ja(Tt.fromDom(window),"message",Ft=>{if(H.isSameOrigin(new t$(Ft.raw.origin))){const Et=Ft.raw.data;rte(Et)?pae(c,_e,Et):gae(Et)&&t.onMessage(_e,Et)}});Y.set(Xe)}),Fd(Y.clear)]),Pl.config({channels:{[pO]:{onReceive:(Xe,Ft)=>{Zr(Xe.element,"iframe").each(Et=>{const St=Et.dom.contentWindow;X(St)&&St.postMessage(Ft,j)})}}}})],Le=y_({id:b,header:w,body:S,footer:E,extraClasses:B,extraBehaviours:Ce,extraStyles:P},D,h),_e=hae(Le);return{dialog:Le,instanceApi:_e}},vae=t=>{const r=t.shared;return{open:(h,b)=>{const w=()=>{$r.hide(P),b()},S=As($S({name:"close-alert",text:"OK",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"cancel",t)),E=Zv(),D=UC(w,r.providers),P=wa(qv({lazySink:()=>r.getSink(),header:df(E,D),body:ha(h,r.providers),footer:O.some(dm(v_([],[S.asSpec()]))),onEscape:w,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[_t(Kh,w)],eventOrder:{}}));$r.show(P);const B=S.get(P);Xn.focus(B)}}},yae=t=>{const r=t.shared;return{open:(h,b)=>{const w=j=>{$r.hide(B),b(j)},S=As($S({name:"yes",text:"Yes",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"submit",t)),E=$S({name:"no",text:"No",primary:!1,buttonType:O.some("secondary"),align:"end",enabled:!0,icon:O.none()},"cancel",t),D=Zv(),P=UC(()=>w(!1),r.providers),B=wa(qv({lazySink:()=>r.getSink(),header:df(D,P),body:ha(h,r.providers),footer:O.some(dm(v_([],[E,S.asSpec()]))),onEscape:()=>w(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[_t(Kh,()=>w(!1)),_t(ev,()=>w(!0))],eventOrder:{}}));$r.show(B);const H=S.get(B);Xn.focus(H)}}},ite=(t,r)=>Zs(Tr("data",r,t)),ate=t=>Yb(t,".tox-alert-dialog")||Yb(t,".tox-confirm-dialog"),wae=(t,r,c)=>r&&c?[]:[mr.config({contextual:{lazyContext:()=>O.some(Ar(Tt.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:h=>Gh(t,h.element).map(w=>({bounds:f1(w),optScrollEnv:O.some({currentScrollTop:w.element.dom.scrollTop,scrollElmTop:Ga(w.element).top})})).getOrThunk(()=>({bounds:qi(),optScrollEnv:O.none()}))})],xae=t=>{const r=t.editor,c=Nb(r),h=vae(t.backstages.dialog),b=yae(t.backstages.dialog),w=(oe,Ce,Qe)=>{if(!$(Ce)){if(Ce.inline==="toolbar")return P(oe,t.backstages.popup.shared.anchors.inlineDialog(),Qe,Ce);if(Ce.inline==="bottom")return B(oe,t.backstages.popup.shared.anchors.inlineBottomDialog(),Qe,Ce);if(Ce.inline==="cursor")return P(oe,t.backstages.popup.shared.anchors.cursor(),Qe,Ce)}return D(oe,Qe)},S=(oe,Ce)=>E(oe,Ce),E=(oe,Ce)=>{const Qe=Le=>{const _e=bae(Le,{closeWindow:()=>{$r.hide(_e.dialog),Ce(_e.instanceApi)}},r,t.backstages.dialog);return $r.show(_e.dialog),_e.instanceApi};return Mo.openUrl(Qe,oe)},D=(oe,Ce)=>{const Qe=(Le,_e,Xe)=>{const Ft=_e,St=xX({dataValidator:Xe,initialData:Ft,internalDialog:Le},{redial:Mo.redial,closeWindow:()=>{$r.hide(St.dialog),Ce(St.instanceApi)}},t.backstages.dialog);return $r.show(St.dialog),St.instanceApi.setData(Ft),St.instanceApi};return Mo.open(Qe,oe)},P=(oe,Ce,Qe,Le)=>{const _e=(Xe,Ft,Et)=>{const St=ite(Ft,Et),jt=sr(),Jt=t.backstages.popup.shared.header.isPositionedAtTop(),Co={dataValidator:Et,initialData:St,internalDialog:Xe},fn=()=>jt.on(zn=>{vr.reposition(zn),(!c||!Jt)&&mr.refresh(zn)}),ro=S_(Co,{redial:Mo.redial,closeWindow:()=>{jt.on(vr.hide),r.off("ResizeEditor",fn),jt.clear(),Qe(ro.instanceApi)}},t.backstages.popup,Le.ariaAttrs,fn),Jn=wa(vr.sketch(Ot(ie({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Le.persistent?{event:"doNotDismissYet"}:{}},Jt?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Kt([So("window-manager-inline-events",[_t(Wm(),(zn,Jo)=>{ns(ro.dialog,Kh)})]),...wae(r,c,Jt)]),isExtraPart:(zn,Jo)=>ate(Jo)})));jt.set(Jn);const xs=()=>{const zn=r.inline?fr():Tt.fromDom(r.getContainer()),Jo=Ar(zn);return O.some(Jo)};return vr.showWithinBounds(Jn,Rc(ro.dialog),{anchor:Ce},xs),(!c||!Jt)&&(mr.refresh(Jn),r.on("ResizeEditor",fn)),ro.instanceApi.setData(St),Fn.focusIn(ro.dialog),ro.instanceApi};return Mo.open(_e,oe)},B=(oe,Ce,Qe,Le)=>{const _e=(Xe,Ft,Et)=>{const St=ite(Ft,Et),jt=sr(),Jt=t.backstages.popup.shared.header.isPositionedAtTop(),Co={dataValidator:Et,initialData:St,internalDialog:Xe},fn=()=>jt.on(zn=>{vr.reposition(zn),mr.refresh(zn)}),ro=S_(Co,{redial:Mo.redial,closeWindow:()=>{jt.on(vr.hide),r.off("ResizeEditor ScrollWindow ElementScroll",fn),jt.clear(),Qe(ro.instanceApi)}},t.backstages.popup,Le.ariaAttrs,fn),Jn=wa(vr.sketch(Ot(ie({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Le.persistent?{event:"doNotDismissYet"}:{}},Jt?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Kt([So("window-manager-inline-events",[_t(Wm(),(zn,Jo)=>{ns(ro.dialog,Kh)})]),mr.config({contextual:{lazyContext:()=>O.some(Ar(Tt.fromDom(r.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:zn=>Gh(r,zn.element).map(Qt=>({bounds:f1(Qt),optScrollEnv:O.some({currentScrollTop:Qt.element.dom.scrollTop,scrollElmTop:Ga(Qt.element).top})})).getOrThunk(()=>({bounds:qi(),optScrollEnv:O.none()}))})]),isExtraPart:(zn,Jo)=>ate(Jo)})));jt.set(Jn);const xs=()=>t.backstages.popup.shared.getSink().toOptional().bind(zn=>{const Jo=Gh(r,zn.element),Qt=15,yn=Jo.map(Un=>f1(Un)).getOr(qi()),io=Ar(Tt.fromDom(r.getContentAreaContainer())),uo=m0(io,yn);return O.some(Xr(uo.x,uo.y,uo.width,uo.height-Qt))});return vr.showWithinBounds(Jn,Rc(ro.dialog),{anchor:Ce},xs),mr.refresh(Jn),r.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",fn),ro.instanceApi.setData(St),Fn.focusIn(ro.dialog),ro.instanceApi};return Mo.open(_e,oe)};return{open:w,openUrl:S,alert:(oe,Ce)=>{h.open(oe,Ce)},close:oe=>{oe.close()},confirm:(oe,Ce)=>{b.open(oe,Ce)}}},Sae=t=>{$R(t),Az(t),e_(t)};var Cae=()=>{Of.add("silver",t=>{Sae(t);let r=()=>qi();const{dialogs:c,popups:h,renderUI:b}=zY(t,{getPopupSinkBounds:()=>r()}),w=()=>{const D=b();return Gh(t,h.getMothership().element).each(B=>{r=()=>f1(B)}),D};gU.register(t,h.backstage.shared);const S=xae({editor:t,backstages:{popup:h.backstage,dialog:c.backstage}}),E=()=>hE(t,{backstage:h.backstage},h.getMothership());return{renderUI:w,getWindowManagerImpl:K(S),getNotificationManagerImpl:E}})};Cae()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(ne,ge,O)=>{const Ke=ge==="UL"?"InsertUnorderedList":"InsertOrderedList";ne.execCommand(Ke,!1,O===!1?null:{"list-style-type":O})},i=ne=>{ne.addCommand("ApplyUnorderedListStyle",(ge,O)=>{o(ne,"UL",O["list-style-type"])}),ne.addCommand("ApplyOrderedListStyle",(ge,O)=>{o(ne,"OL",O["list-style-type"])})},l=ne=>ge=>ge.options.get(ne),d=ne=>{const ge=ne.options.register;ge("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),ge("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},m=l("advlist_number_styles"),p=l("advlist_bullet_styles"),v=ne=>ne==null,x=ne=>!v(ne);var k=tinymce.util.Tools.resolve("tinymce.util.Tools");class T{constructor(ge,O){this.tag=ge,this.value=O}static some(ge){return new T(!0,ge)}static none(){return T.singletonNone}fold(ge,O){return this.tag?O(this.value):ge()}isSome(){return this.tag}isNone(){return!this.tag}map(ge){return this.tag?T.some(ge(this.value)):T.none()}bind(ge){return this.tag?ge(this.value):T.none()}exists(ge){return this.tag&&ge(this.value)}forall(ge){return!this.tag||ge(this.value)}filter(ge){return!this.tag||ge(this.value)?this:T.none()}getOr(ge){return this.tag?this.value:ge}or(ge){return this.tag?this:ge}getOrThunk(ge){return this.tag?this.value:ge()}orThunk(ge){return this.tag?this:ge()}getOrDie(ge){if(this.tag)return this.value;throw new Error(ge!=null?ge:"Called getOrDie on None")}static from(ge){return x(ge)?T.some(ge):T.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ge){this.tag&&ge(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}T.singletonNone=new T(!1);const R=(ne,ge,O)=>{for(let Ke=0,he=ne.length;Ke<he;Ke++){const at=ne[Ke];if(ge(at,Ke))return T.some(at);if(O(at,Ke))break}return T.none()},N=ne=>/\btox\-/.test(ne.className),$=(ne,ge)=>ne.dom.isChildOf(ge,ne.getBody()),U=ne=>ge=>x(ge)&&ne.test(ge.nodeName),X=U(/^(OL|UL|DL)$/),J=U(/^(TH|TD)$/),G=(ne,ge,O)=>R(ge,Ke=>X(Ke)&&!N(Ke),J).exists(Ke=>Ke.nodeName===O&&$(ne,Ke)),le=ne=>{const ge=ne.dom.getParent(ne.selection.getNode(),"ol,ul"),O=ne.dom.getStyle(ge,"listStyleType");return T.from(O)},Z=(ne,ge)=>ge!==null&&!ne.dom.isEditable(ge),be=(ne,ge)=>{const O=ne.dom.getParent(ge,"ol,ul,dl");return Z(ne,O)&&ne.selection.isEditable()},He=(ne,ge)=>{const O=ne.selection.getNode();return ge({parents:ne.dom.getParents(O),element:O}),ne.on("NodeChange",ge),()=>ne.off("NodeChange",ge)},Re=ne=>ne.replace(/\-/g," ").replace(/\b\w/g,ge=>ge.toUpperCase()),K=ne=>v(ne)||ne==="default"?"":ne,Ie=(ne,ge)=>O=>{const Ke=(at,qt)=>{const Pe=at.selection.getStart(!0);O.setActive(G(at,qt,ge)),O.setEnabled(!be(at,Pe)&&at.selection.isEditable())};return He(ne,at=>Ke(ne,at.parents))},$e=(ne,ge,O,Ke,he,at)=>{ne.ui.registry.addSplitButton(ge,{tooltip:O,icon:he==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:qt=>{const Pe=k.map(at,We=>{const yt=he==="OL"?"num":"bull",Be=We==="disc"||We==="decimal"?"default":We,wt=K(We),ce=Re(We);return{type:"choiceitem",value:wt,icon:"list-"+yt+"-"+Be,text:ce}});qt(Pe)},onAction:()=>ne.execCommand(Ke),onItemAction:(qt,Pe)=>{o(ne,he,Pe)},select:qt=>le(ne).map(We=>qt===We).getOr(!1),onSetup:Ie(ne,he)})},Ue=(ne,ge,O,Ke,he,at)=>{ne.ui.registry.addToggleButton(ge,{active:!1,tooltip:O,icon:he==="OL"?"ordered-list":"unordered-list",onSetup:Ie(ne,he),onAction:()=>ne.queryCommandState(Ke)||at===""?ne.execCommand(Ke):o(ne,he,at)})},ae=(ne,ge,O,Ke,he,at)=>{at.length>1?$e(ne,ge,O,Ke,he,at):Ue(ne,ge,O,Ke,he,K(at[0]))},Oe=ne=>{ae(ne,"numlist","Numbered list","InsertOrderedList","OL",m(ne)),ae(ne,"bullist","Bullet list","InsertUnorderedList","UL",p(ne))};var ht=()=>{u.add("advlist",ne=>{ne.hasPlugin("lists")&&(d(ne),Oe(ne),i(ne))})};ht()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),i=tinymce.util.Tools.resolve("tinymce.util.Tools");const l=ne=>ge=>ge.options.get(ne),d=ne=>{const ge=ne.options.register;ge("allow_html_in_named_anchor",{processor:"boolean",default:!1})},m=l("allow_html_in_named_anchor"),p="a:not([href])",v=ne=>!ne,x=ne=>ne.getAttribute("id")||ne.getAttribute("name")||"",k=ne=>ne.nodeName.toLowerCase()==="a",T=ne=>k(ne)&&!ne.getAttribute("href")&&x(ne)!=="",R=ne=>T(ne)&&!ne.firstChild,N=ne=>{const ge=ne.dom;o(ge).walk(ne.selection.getRng(),O=>{i.each(O,Ke=>{R(Ke)&&ge.remove(Ke,!1)})})},$=ne=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(ne),U=ne=>ne.dom.getParent(ne.selection.getStart(),p),X=ne=>{const ge=U(ne);return ge?x(ge):""},J=(ne,ge)=>{ne.undoManager.transact(()=>{m(ne)||ne.selection.collapse(!0),ne.selection.isCollapsed()?ne.insertContent(ne.dom.createHTML("a",{id:ge})):(N(ne),ne.formatter.remove("namedAnchor",void 0,void 0,!0),ne.formatter.apply("namedAnchor",{value:ge}),ne.addVisual())})},G=(ne,ge,O)=>{O.removeAttribute("name"),O.id=ge,ne.addVisual(),ne.undoManager.add()},le=(ne,ge)=>{const O=U(ne);O?G(ne,ge,O):J(ne,ge),ne.focus()},Z=(ne,ge)=>$(ge)?(le(ne,ge),!0):(ne.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),be=ne=>{const ge=X(ne);ne.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:ge},onSubmit:O=>{Z(ne,O.getData().id)&&O.close()}})},He=ne=>{ne.addCommand("mceAnchor",()=>{be(ne)})},Re=ne=>v(ne.attr("href"))&&!v(ne.attr("id")||ne.attr("name")),K=ne=>Re(ne)&&!ne.firstChild,Ie=ne=>ge=>{for(let O=0;O<ge.length;O++){const Ke=ge[O];K(Ke)&&Ke.attr("contenteditable",ne)}},$e=ne=>{ne.on("PreInit",()=>{ne.parser.addNodeFilter("a",Ie("false")),ne.serializer.addNodeFilter("a",Ie(null))})},Ue=ne=>{ne.formatter.register("namedAnchor",{inline:"a",selector:p,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(ge,O,Ke)=>T(ge)})},ae=ne=>ge=>{const O=()=>{ge.setEnabled(ne.selection.isEditable())};return ne.on("NodeChange",O),O(),()=>{ne.off("NodeChange",O)}},Oe=ne=>{const ge=()=>ne.execCommand("mceAnchor");ne.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:ge,onSetup:O=>{const Ke=ne.selection.selectorChangedWithUnbind("a:not([href])",O.setActive).unbind,he=ae(ne)(O);return()=>{Ke(),he()}}}),ne.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:ge,onSetup:ae(ne)})};var ht=()=>{u.add("anchor",ne=>{d(ne),$e(ne),He(ne),Oe(ne),ne.on("PreInit",()=>{Ue(ne)})})};ht()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,i=Be=>wt=>wt.options.get(Be),l=Be=>{const wt=Be.options.register;wt("autolink_pattern",{processor:"regexp",default:new RegExp("^"+o().source+"$","i")}),wt("link_default_target",{processor:"string"}),wt("link_default_protocol",{processor:"string",default:"https"})},d=i("autolink_pattern"),m=i("link_default_target"),p=i("link_default_protocol"),v=i("allow_unsafe_link_target"),x=(Be,wt,ce)=>{var Ze;return ce(Be,wt.prototype)?!0:((Ze=Be.constructor)===null||Ze===void 0?void 0:Ze.name)===wt.name},k=Be=>{const wt=typeof Be;return Be===null?"null":wt==="object"&&Array.isArray(Be)?"array":wt==="object"&&x(Be,String,(ce,Ze)=>Ze.isPrototypeOf(ce))?"string":wt},T=Be=>wt=>k(wt)===Be,R=Be=>wt=>Be===wt,N=T("string"),$=R(void 0),U=Be=>Be==null,X=Be=>!U(Be),J=Be=>wt=>!Be(wt),G=Object.hasOwnProperty,le=(Be,wt)=>G.call(Be,wt),Z=(Be,wt,ce)=>Be.length>=wt.length&&Be.substr(ce,ce+wt.length)===wt,be=(Be,wt,ce=0,Ze)=>{const V=Be.indexOf(wt,ce);return V!==-1?$(Ze)?!0:V+wt.length<=Ze:!1},He=(Be,wt)=>Z(Be,wt,0),Re="\uFEFF",K=Be=>Be===Re,Ie=Be=>Be.replace(/\uFEFF/g,"");var $e=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const Ue=Be=>Be.nodeType===3,ae=Be=>Be.nodeType===1,Oe=Be=>/^[(\[{ \u00a0]$/.test(Be),ht=Be=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(Be),ne=Be=>/[?!,.;:]/.test(Be),ge=(Be,wt,ce)=>{for(let Ze=wt-1;Ze>=0;Ze--){const V=Be.charAt(Ze);if(!K(V)&&ce(V))return Ze}return-1},O=(Be,wt)=>{let ce=Be,Ze=wt;for(;ae(ce)&&ce.childNodes[Ze];)ce=ce.childNodes[Ze],Ze=Ue(ce)?ce.data.length:ce.childNodes.length;return{container:ce,offset:Ze}},Ke=(Be,wt)=>{var ce;const Ze=Be.schema.getVoidElements(),V=d(Be),{dom:kn,selection:cn}=Be;if(kn.getParent(cn.getNode(),"a[href]")!==null)return null;const no=cn.getRng(),Do=$e(kn,ve=>kn.isBlock(ve)||le(Ze,ve.nodeName.toLowerCase())||kn.getContentEditable(ve)==="false"),{container:Cs,offset:Je}=O(no.endContainer,no.endOffset),Bt=(ce=kn.getParent(Cs,kn.isBlock))!==null&&ce!==void 0?ce:kn.getRoot(),tt=Do.backwards(Cs,Je+wt,(ve,je)=>{const ot=ve.data,en=ge(ot,je,J(Oe));return en===-1||ne(ot[en])?en:en+1},Bt);if(!tt)return null;let ue=tt.container;const xe=Do.backwards(tt.container,tt.offset,(ve,je)=>{ue=ve;const ot=ge(ve.data,je,Oe);return ot===-1?ot:ot+1},Bt),Ne=kn.createRng();xe?Ne.setStart(xe.container,xe.offset):Ne.setStart(ue,0),Ne.setEnd(tt.container,tt.offset);const kt=Ie(Ne.toString()).match(V);if(kt){let ve=kt[0];return He(ve,"www.")?ve=p(Be)+"://"+ve:be(ve,"@")&&!ht(ve)&&(ve="mailto:"+ve),{rng:Ne,url:ve}}else return null},he=(Be,wt)=>{const{dom:ce,selection:Ze}=Be,{rng:V,url:kn}=wt,cn=Ze.getBookmark();Ze.setRng(V);const no="createlink",Do={command:no,ui:!1,value:kn};if(!Be.dispatch("BeforeExecCommand",Do).isDefaultPrevented()){Be.getDoc().execCommand(no,!1,kn),Be.dispatch("ExecCommand",Do);const Je=m(Be);if(N(Je)){const Bt=Ze.getNode();ce.setAttrib(Bt,"target",Je),Je==="_blank"&&!v(Be)&&ce.setAttrib(Bt,"rel","noopener")}}Ze.moveToBookmark(cn),Be.nodeChanged()},at=Be=>{const wt=Ke(Be,-1);X(wt)&&he(Be,wt)},qt=at,Pe=Be=>{const wt=Ke(Be,0);X(wt)&&he(Be,wt)},We=Be=>{Be.on("keydown",wt=>{wt.keyCode===13&&!wt.isDefaultPrevented()&&Pe(Be)}),Be.on("keyup",wt=>{wt.keyCode===32?at(Be):(wt.keyCode===48&&wt.shiftKey||wt.keyCode===221)&&qt(Be)})};var yt=()=>{u.add("autolink",Be=>{l(Be),We(Be)})};yt()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(he,at,qt)=>{var Pe;return qt(he,at.prototype)?!0:((Pe=he.constructor)===null||Pe===void 0?void 0:Pe.name)===at.name},i=he=>{const at=typeof he;return he===null?"null":at==="object"&&Array.isArray(he)?"array":at==="object"&&o(he,String,(qt,Pe)=>Pe.isPrototypeOf(qt))?"string":at},l=he=>at=>i(at)===he,d=he=>at=>he===at,m=l("string"),p=d(void 0);var v=tinymce.util.Tools.resolve("tinymce.util.Delay"),x=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),k=tinymce.util.Tools.resolve("tinymce.util.Tools");const T=he=>he.dispatch("RestoreDraft"),R=he=>he.dispatch("StoreDraft"),N=he=>he.dispatch("RemoveDraft"),$=he=>{const at={s:1e3,m:6e4},qt=/^(\d+)([ms]?)$/.exec(he);return(qt&&qt[2]?at[qt[2]]:1)*parseInt(he,10)},U=he=>at=>at.options.get(he),X=he=>{const at=he.options.register,qt=Pe=>{const We=m(Pe);return We?{value:$(Pe),valid:We}:{valid:!1,message:"Must be a string."}};at("autosave_ask_before_unload",{processor:"boolean",default:!0}),at("autosave_prefix",{processor:"string",default:"tinymce-autosave-{path}{query}{hash}-{id}-"}),at("autosave_restore_when_empty",{processor:"boolean",default:!1}),at("autosave_interval",{processor:qt,default:"30s"}),at("autosave_retention",{processor:qt,default:"20m"})},J=U("autosave_ask_before_unload"),G=U("autosave_restore_when_empty"),le=U("autosave_interval"),Z=U("autosave_retention"),be=he=>{const at=document.location;return he.options.get("autosave_prefix").replace(/{path}/g,at.pathname).replace(/{query}/g,at.search).replace(/{hash}/g,at.hash).replace(/{id}/g,he.id)},He=(he,at)=>{if(p(at))return he.dom.isEmpty(he.getBody());{const qt=k.trim(at);if(qt==="")return!0;{const Pe=new DOMParser().parseFromString(qt,"text/html");return he.dom.isEmpty(Pe)}}},Re=he=>{var at;const qt=parseInt((at=x.getItem(be(he)+"time"))!==null&&at!==void 0?at:"0",10)||0;return new Date().getTime()-qt>Z(he)?(K(he,!1),!1):!0},K=(he,at)=>{const qt=be(he);x.removeItem(qt+"draft"),x.removeItem(qt+"time"),at!==!1&&N(he)},Ie=he=>{const at=be(he);!He(he)&&he.isDirty()&&(x.setItem(at+"draft",he.getContent({format:"raw",no_events:!0})),x.setItem(at+"time",new Date().getTime().toString()),R(he))},$e=he=>{var at;const qt=be(he);Re(he)&&(he.setContent((at=x.getItem(qt+"draft"))!==null&&at!==void 0?at:"",{format:"raw"}),T(he))},Ue=he=>{const at=le(he);v.setEditorInterval(he,()=>{Ie(he)},at)},ae=he=>{he.undoManager.transact(()=>{$e(he),K(he)}),he.focus()},Oe=he=>({hasDraft:()=>Re(he),storeDraft:()=>Ie(he),restoreDraft:()=>$e(he),removeDraft:at=>K(he,at),isEmpty:at=>He(he,at)});var ht=tinymce.util.Tools.resolve("tinymce.EditorManager");const ne=he=>{he.editorManager.on("BeforeUnload",at=>{let qt;k.each(ht.get(),Pe=>{Pe.plugins.autosave&&Pe.plugins.autosave.storeDraft(),!qt&&Pe.isDirty()&&J(Pe)&&(qt=Pe.translate("You have unsaved changes are you sure you want to navigate away?"))}),qt&&(at.preventDefault(),at.returnValue=qt)})},ge=he=>at=>{at.setEnabled(Re(he));const qt=()=>at.setEnabled(Re(he));return he.on("StoreDraft RestoreDraft RemoveDraft",qt),()=>he.off("StoreDraft RestoreDraft RemoveDraft",qt)},O=he=>{Ue(he);const at=()=>{ae(he)};he.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:at,onSetup:ge(he)}),he.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:at,onSetup:ge(he)})};var Ke=()=>{u.add("autosave",he=>(X(he),ne(he),O(he),he.on("init",()=>{G(he)&&he.dom.isEmpty(he.getBody())&&$e(he)}),Oe(he)))};Ke()})();(function(){const u=Z=>{let be=Z;return{get:()=>be,set:K=>{be=K}}};var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=Z=>()=>Z;var l=tinymce.util.Tools.resolve("tinymce.Env");const d=Z=>Z.dispatch("ResizeEditor"),m=Z=>be=>be.options.get(Z),p=Z=>{const be=Z.options.register;be("autoresize_overflow_padding",{processor:"number",default:1}),be("autoresize_bottom_margin",{processor:"number",default:50})},v=m("min_height"),x=m("max_height"),k=m("autoresize_overflow_padding"),T=m("autoresize_bottom_margin"),R=Z=>Z.plugins.fullscreen&&Z.plugins.fullscreen.isFullscreen(),N=(Z,be)=>{const He=Z.getBody();He&&(He.style.overflowY=be?"":"hidden",be||(He.scrollTop=0))},$=(Z,be,He,Re)=>{var K;const Ie=parseInt((K=Z.getStyle(be,He,Re))!==null&&K!==void 0?K:"",10);return isNaN(Ie)?0:Ie},U=Z=>{if((Z==null?void 0:Z.type.toLowerCase())==="setcontent"){const be=Z;return be.selection===!0||be.paste===!0}else return!1},X=(Z,be,He,Re)=>{var K;const Ie=Z.dom,$e=Z.getDoc();if(!$e)return;if(R(Z)){N(Z,!0);return}const Ue=$e.documentElement,ae=Re?Re():k(Z),Oe=(K=v(Z))!==null&&K!==void 0?K:Z.getElement().offsetHeight;let ht=Oe;const ne=$(Ie,Ue,"margin-top",!0),ge=$(Ie,Ue,"margin-bottom",!0);let O=Ue.offsetHeight+ne+ge+ae;O<0&&(O=0);const Ke=Z.getContainer().offsetHeight,he=Z.getContentAreaContainer().offsetHeight,at=Ke-he;O+at>Oe&&(ht=O+at);const qt=x(Z);if(qt&&ht>qt?(ht=qt,N(Z,!0)):N(Z,!1),ht!==be.get()){const Pe=ht-be.get();if(Ie.setStyle(Z.getContainer(),"height",ht+"px"),be.set(ht),d(Z),l.browser.isSafari()&&(l.os.isMacOS()||l.os.isiOS())){const We=Z.getWin();We.scrollTo(We.pageXOffset,We.pageYOffset)}Z.hasFocus()&&U(He)&&Z.selection.scrollIntoView(),(l.browser.isSafari()||l.browser.isChromium())&&Pe<0&&X(Z,be,He,Re)}},J=(Z,be)=>{let He=()=>T(Z),Re,K;Z.on("init",Ie=>{Re=0;const $e=k(Z),Ue=Z.dom;Ue.setStyles(Z.getDoc().documentElement,{height:"auto"}),l.browser.isEdge()||l.browser.isIE()?Ue.setStyles(Z.getBody(),{paddingLeft:$e,paddingRight:$e,"min-height":0}):Ue.setStyles(Z.getBody(),{paddingLeft:$e,paddingRight:$e}),X(Z,be,Ie,He),Re+=1}),Z.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",Ie=>{if(Re===1)K=Z.getContainer().offsetHeight,X(Z,be,Ie,He),Re+=1;else if(Re===2){const $e=K<Z.getContainer().offsetHeight;if($e){const Ue=Z.dom,ae=Z.getDoc();Ue.setStyles(ae.documentElement,{"min-height":0}),Ue.setStyles(Z.getBody(),{"min-height":"inherit"})}He=$e?i(0):He,Re+=1}else X(Z,be,Ie,He)})},G=(Z,be)=>{Z.addCommand("mceAutoResize",()=>{X(Z,be)})};var le=()=>{o.add("autoresize",Z=>{if(p(Z),Z.options.isSet("resize")||Z.options.set("resize",!1),!Z.inline){const be=u(0);G(Z,be),J(Z,be)}})};le()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(v,x)=>{v.focus(),v.undoManager.transact(()=>{v.setContent(x)}),v.selection.setCursorLocation(),v.nodeChanged()},i=v=>v.getContent({source_view:!0}),l=v=>{const x=i(v);v.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:x},onSubmit:k=>{o(v,k.getData().code),k.close()}})},d=v=>{v.addCommand("mceCodeEditor",()=>{l(v)})},m=v=>{const x=()=>v.execCommand("mceCodeEditor");v.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:x}),v.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:x})};var p=()=>{u.add("code",v=>(d(v),m(v),{}))};p()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=O=>O==null,i=O=>!o(O),l=()=>{},d=O=>()=>O;class m{constructor(Ke,he){this.tag=Ke,this.value=he}static some(Ke){return new m(!0,Ke)}static none(){return m.singletonNone}fold(Ke,he){return this.tag?he(this.value):Ke()}isSome(){return this.tag}isNone(){return!this.tag}map(Ke){return this.tag?m.some(Ke(this.value)):m.none()}bind(Ke){return this.tag?Ke(this.value):m.none()}exists(Ke){return this.tag&&Ke(this.value)}forall(Ke){return!this.tag||Ke(this.value)}filter(Ke){return!this.tag||Ke(this.value)?this:m.none()}getOr(Ke){return this.tag?this.value:Ke}or(Ke){return this.tag?this:Ke}getOrThunk(Ke){return this.tag?this.value:Ke()}orThunk(Ke){return this.tag?this:Ke()}getOrDie(Ke){if(this.tag)return this.value;throw new Error(Ke!=null?Ke:"Called getOrDie on None")}static from(Ke){return i(Ke)?m.some(Ke):m.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ke){this.tag&&Ke(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}m.singletonNone=new m(!1);const p=(O,Ke)=>Ke>=0&&Ke<O.length?m.some(O[Ke]):m.none(),v=O=>p(O,0);var x=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");const k=typeof window!="undefined"?window:Function("return this;")(),T=function(O,Ke,he){const at=window.Prism;window.Prism={manual:!0};var qt=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{},Pe=function(We){var yt=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,Be=0,wt={},ce={manual:We.Prism&&We.Prism.manual,disableWorkerMessageHandler:We.Prism&&We.Prism.disableWorkerMessageHandler,util:{encode:function ue(xe){return xe instanceof Ze?new Ze(xe.type,ue(xe.content),xe.alias):Array.isArray(xe)?xe.map(ue):xe.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(ue){return Object.prototype.toString.call(ue).slice(8,-1)},objId:function(ue){return ue.__id||Object.defineProperty(ue,"__id",{value:++Be}),ue.__id},clone:function ue(xe,Ne){Ne=Ne||{};var Me,kt;switch(ce.util.type(xe)){case"Object":if(kt=ce.util.objId(xe),Ne[kt])return Ne[kt];Me={},Ne[kt]=Me;for(var ve in xe)xe.hasOwnProperty(ve)&&(Me[ve]=ue(xe[ve],Ne));return Me;case"Array":return kt=ce.util.objId(xe),Ne[kt]?Ne[kt]:(Me=[],Ne[kt]=Me,xe.forEach(function(je,ot){Me[ot]=ue(je,Ne)}),Me);default:return xe}},getLanguage:function(ue){for(;ue;){var xe=yt.exec(ue.className);if(xe)return xe[1].toLowerCase();ue=ue.parentElement}return"none"},setLanguage:function(ue,xe){ue.className=ue.className.replace(RegExp(yt,"gi"),""),ue.classList.add("language-"+xe)},currentScript:function(){if(typeof document=="undefined")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(Me){var ue=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(Me.stack)||[])[1];if(ue){var xe=document.getElementsByTagName("script");for(var Ne in xe)if(xe[Ne].src==ue)return xe[Ne]}return null}},isActive:function(ue,xe,Ne){for(var Me="no-"+xe;ue;){var kt=ue.classList;if(kt.contains(xe))return!0;if(kt.contains(Me))return!1;ue=ue.parentElement}return!!Ne}},languages:{plain:wt,plaintext:wt,text:wt,txt:wt,extend:function(ue,xe){var Ne=ce.util.clone(ce.languages[ue]);for(var Me in xe)Ne[Me]=xe[Me];return Ne},insertBefore:function(ue,xe,Ne,Me){Me=Me||ce.languages;var kt=Me[ue],ve={};for(var je in kt)if(kt.hasOwnProperty(je)){if(je==xe)for(var ot in Ne)Ne.hasOwnProperty(ot)&&(ve[ot]=Ne[ot]);Ne.hasOwnProperty(je)||(ve[je]=kt[je])}var en=Me[ue];return Me[ue]=ve,ce.languages.DFS(ce.languages,function(Wn,On){On===en&&Wn!=ue&&(this[Wn]=ve)}),ve},DFS:function ue(xe,Ne,Me,kt){kt=kt||{};var ve=ce.util.objId;for(var je in xe)if(xe.hasOwnProperty(je)){Ne.call(xe,je,xe[je],Me||je);var ot=xe[je],en=ce.util.type(ot);en==="Object"&&!kt[ve(ot)]?(kt[ve(ot)]=!0,ue(ot,Ne,null,kt)):en==="Array"&&!kt[ve(ot)]&&(kt[ve(ot)]=!0,ue(ot,Ne,je,kt))}}},plugins:{},highlightAll:function(ue,xe){ce.highlightAllUnder(document,ue,xe)},highlightAllUnder:function(ue,xe,Ne){var Me={callback:Ne,container:ue,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};ce.hooks.run("before-highlightall",Me),Me.elements=Array.prototype.slice.apply(Me.container.querySelectorAll(Me.selector)),ce.hooks.run("before-all-elements-highlight",Me);for(var kt=0,ve;ve=Me.elements[kt++];)ce.highlightElement(ve,xe===!0,Me.callback)},highlightElement:function(ue,xe,Ne){var Me=ce.util.getLanguage(ue),kt=ce.languages[Me];ce.util.setLanguage(ue,Me);var ve=ue.parentElement;ve&&ve.nodeName.toLowerCase()==="pre"&&ce.util.setLanguage(ve,Me);var je=ue.textContent,ot={element:ue,language:Me,grammar:kt,code:je};function en(On){ot.highlightedCode=On,ce.hooks.run("before-insert",ot),ot.element.innerHTML=ot.highlightedCode,ce.hooks.run("after-highlight",ot),ce.hooks.run("complete",ot),Ne&&Ne.call(ot.element)}if(ce.hooks.run("before-sanity-check",ot),ve=ot.element.parentElement,ve&&ve.nodeName.toLowerCase()==="pre"&&!ve.hasAttribute("tabindex")&&ve.setAttribute("tabindex","0"),!ot.code){ce.hooks.run("complete",ot),Ne&&Ne.call(ot.element);return}if(ce.hooks.run("before-highlight",ot),!ot.grammar){en(ce.util.encode(ot.code));return}if(xe&&We.Worker){var Wn=new Worker(ce.filename);Wn.onmessage=function(On){en(On.data)},Wn.postMessage(JSON.stringify({language:ot.language,code:ot.code,immediateClose:!0}))}else en(ce.highlight(ot.code,ot.grammar,ot.language))},highlight:function(ue,xe,Ne){var Me={code:ue,grammar:xe,language:Ne};if(ce.hooks.run("before-tokenize",Me),!Me.grammar)throw new Error('The language "'+Me.language+'" has no grammar.');return Me.tokens=ce.tokenize(Me.code,Me.grammar),ce.hooks.run("after-tokenize",Me),Ze.stringify(ce.util.encode(Me.tokens),Me.language)},tokenize:function(ue,xe){var Ne=xe.rest;if(Ne){for(var Me in Ne)xe[Me]=Ne[Me];delete xe.rest}var kt=new cn;return no(kt,kt.head,ue),kn(ue,kt,xe,kt.head,0),Cs(kt)},hooks:{all:{},add:function(ue,xe){var Ne=ce.hooks.all;Ne[ue]=Ne[ue]||[],Ne[ue].push(xe)},run:function(ue,xe){var Ne=ce.hooks.all[ue];if(!(!Ne||!Ne.length))for(var Me=0,kt;kt=Ne[Me++];)kt(xe)}},Token:Ze};We.Prism=ce;function Ze(ue,xe,Ne,Me){this.type=ue,this.content=xe,this.alias=Ne,this.length=(Me||"").length|0}Ze.stringify=function ue(xe,Ne){if(typeof xe=="string")return xe;if(Array.isArray(xe)){var Me="";return xe.forEach(function(en){Me+=ue(en,Ne)}),Me}var kt={type:xe.type,content:ue(xe.content,Ne),tag:"span",classes:["token",xe.type],attributes:{},language:Ne},ve=xe.alias;ve&&(Array.isArray(ve)?Array.prototype.push.apply(kt.classes,ve):kt.classes.push(ve)),ce.hooks.run("wrap",kt);var je="";for(var ot in kt.attributes)je+=" "+ot+'="'+(kt.attributes[ot]||"").replace(/"/g,"&quot;")+'"';return"<"+kt.tag+' class="'+kt.classes.join(" ")+'"'+je+">"+kt.content+"</"+kt.tag+">"};function V(ue,xe,Ne,Me){ue.lastIndex=xe;var kt=ue.exec(Ne);if(kt&&Me&&kt[1]){var ve=kt[1].length;kt.index+=ve,kt[0]=kt[0].slice(ve)}return kt}function kn(ue,xe,Ne,Me,kt,ve){for(var je in Ne)if(!(!Ne.hasOwnProperty(je)||!Ne[je])){var ot=Ne[je];ot=Array.isArray(ot)?ot:[ot];for(var en=0;en<ot.length;++en){if(ve&&ve.cause==je+","+en)return;var Wn=ot[en],On=Wn.inside,ho=!!Wn.lookbehind,Kn=!!Wn.greedy,ls=Wn.alias;if(Kn&&!Wn.pattern.global){var Ye=Wn.pattern.toString().match(/[imsuy]*$/)[0];Wn.pattern=RegExp(Wn.pattern.source,Ye+"g")}for(var pt=Wn.pattern||Wn,Rt=Me.next,Wt=kt;Rt!==xe.tail&&!(ve&&Wt>=ve.reach);Wt+=Rt.value.length,Rt=Rt.next){var bn=Rt.value;if(xe.length>ue.length)return;if(!(bn instanceof Ze)){var oo=1,ao;if(Kn){if(ao=V(pt,Wt,ue,ho),!ao||ao.index>=ue.length)break;var $t=ao.index,Qo=ao.index+ao[0].length,Fo=Wt;for(Fo+=Rt.value.length;$t>=Fo;)Rt=Rt.next,Fo+=Rt.value.length;if(Fo-=Rt.value.length,Wt=Fo,Rt.value instanceof Ze)continue;for(var cs=Rt;cs!==xe.tail&&(Fo<Qo||typeof cs.value=="string");cs=cs.next)oo++,Fo+=cs.value.length;oo--,bn=ue.slice(Wt,Fo),ao.index-=Wt}else if(ao=V(pt,0,bn,ho),!ao)continue;var $t=ao.index,xo=ao[0],Qs=bn.slice(0,$t),Sr=bn.slice($t+xo.length),Gr=Wt+bn.length;ve&&Gr>ve.reach&&(ve.reach=Gr);var pr=Rt.prev;Qs&&(pr=no(xe,pr,Qs),Wt+=Qs.length),Do(xe,pr,oo);var di=new Ze(je,On?ce.tokenize(xo,On):xo,ls,xo);if(Rt=no(xe,pr,di),Sr&&no(xe,Rt,Sr),oo>1){var Cr={cause:je+","+en,reach:Gr};kn(ue,xe,Ne,Rt.prev,Wt,Cr),ve&&Cr.reach>ve.reach&&(ve.reach=Cr.reach)}}}}}}function cn(){var ue={value:null,prev:null,next:null},xe={value:null,prev:ue,next:null};ue.next=xe,this.head=ue,this.tail=xe,this.length=0}function no(ue,xe,Ne){var Me=xe.next,kt={value:Ne,prev:xe,next:Me};return xe.next=kt,Me.prev=kt,ue.length++,kt}function Do(ue,xe,Ne){for(var Me=xe.next,kt=0;kt<Ne&&Me!==ue.tail;kt++)Me=Me.next;xe.next=Me,Me.prev=xe,ue.length-=kt}function Cs(ue){for(var xe=[],Ne=ue.head.next;Ne!==ue.tail;)xe.push(Ne.value),Ne=Ne.next;return xe}if(!We.document)return We.addEventListener&&(ce.disableWorkerMessageHandler||We.addEventListener("message",function(ue){var xe=JSON.parse(ue.data),Ne=xe.language,Me=xe.code,kt=xe.immediateClose;We.postMessage(ce.highlight(Me,ce.languages[Ne],Ne)),kt&&We.close()},!1)),ce;var Je=ce.util.currentScript();Je&&(ce.filename=Je.src,Je.hasAttribute("data-manual")&&(ce.manual=!0));function Bt(){ce.manual||ce.highlightAll()}if(!ce.manual){var tt=document.readyState;tt==="loading"||tt==="interactive"&&Je&&Je.defer?document.addEventListener("DOMContentLoaded",Bt):window.requestAnimationFrame?window.requestAnimationFrame(Bt):window.setTimeout(Bt,16)}return ce}(qt);return Pe.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},function(We){function yt(Be,wt){return"___"+Be.toUpperCase()+wt+"___"}Object.defineProperties(We.languages["markup-templating"]={},{buildPlaceholders:{value:function(Be,wt,ce,Ze){if(Be.language===wt){var V=Be.tokenStack=[];Be.code=Be.code.replace(ce,function(kn){if(typeof Ze=="function"&&!Ze(kn))return kn;for(var cn=V.length,no;Be.code.indexOf(no=yt(wt,cn))!==-1;)++cn;return V[cn]=kn,no}),Be.grammar=We.languages.markup}}},tokenizePlaceholders:{value:function(Be,wt){if(Be.language!==wt||!Be.tokenStack)return;Be.grammar=We.languages[wt];var ce=0,Ze=Object.keys(Be.tokenStack);function V(kn){for(var cn=0;cn<kn.length&&!(ce>=Ze.length);cn++){var no=kn[cn];if(typeof no=="string"||no.content&&typeof no.content=="string"){var Do=Ze[ce],Cs=Be.tokenStack[Do],Je=typeof no=="string"?no:no.content,Bt=yt(wt,Do),tt=Je.indexOf(Bt);if(tt>-1){++ce;var ue=Je.substring(0,tt),xe=new We.Token(wt,We.tokenize(Cs,Be.grammar),"language-"+wt,Cs),Ne=Je.substring(tt+Bt.length),Me=[];ue&&Me.push.apply(Me,V([ue])),Me.push(xe),Ne&&Me.push.apply(Me,V([Ne])),typeof no=="string"?kn.splice.apply(kn,[cn,1].concat(Me)):no.content=Me}}else no.content&&V(no.content)}return kn}V(Be.tokens)}}})}(Pe),Pe.languages.c=Pe.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Pe.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Pe.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Pe.languages.c.string],char:Pe.languages.c.char,comment:Pe.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Pe.languages.c}}}}),Pe.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Pe.languages.c.boolean,function(We){var yt=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,Be=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return yt.source});We.languages.cpp=We.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return yt.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:yt,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),We.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return Be})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),We.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:We.languages.cpp}}}}),We.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),We.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:We.languages.extend("cpp",{})}}),We.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},We.languages.cpp["base-clause"])}(Pe),function(We){function yt(ao,Qo){return ao.replace(/<<(\d+)>>/g,function(Fo,cs){return"(?:"+Qo[+cs]+")"})}function Be(ao,Qo,Fo){return RegExp(yt(ao,Qo),"")}function wt(ao,Qo){for(var Fo=0;Fo<Qo;Fo++)ao=ao.replace(/<<self>>/g,function(){return"(?:"+ao+")"});return ao.replace(/<<self>>/g,"[^\\s\\S]")}var ce={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function Ze(ao){return"\\b(?:"+ao.trim().replace(/ /g,"|")+")\\b"}var V=Ze(ce.typeDeclaration),kn=RegExp(Ze(ce.type+" "+ce.typeDeclaration+" "+ce.contextual+" "+ce.other)),cn=Ze(ce.typeDeclaration+" "+ce.contextual+" "+ce.other),no=Ze(ce.type+" "+ce.typeDeclaration+" "+ce.other),Do=wt(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),Cs=wt(/\((?:[^()]|<<self>>)*\)/.source,2),Je=/@?\b[A-Za-z_]\w*\b/.source,Bt=yt(/<<0>>(?:\s*<<1>>)?/.source,[Je,Do]),tt=yt(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[cn,Bt]),ue=/\[\s*(?:,\s*)*\]/.source,xe=yt(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[tt,ue]),Ne=yt(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[Do,Cs,ue]),Me=yt(/\(<<0>>+(?:,<<0>>+)+\)/.source,[Ne]),kt=yt(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[Me,tt,ue]),ve={keyword:kn,punctuation:/[<>()?,.:[\]]/},je=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,ot=/"(?:\\.|[^\\"\r\n])*"/.source,en=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;We.languages.csharp=We.languages.extend("clike",{string:[{pattern:Be(/(^|[^$\\])<<0>>/.source,[en]),lookbehind:!0,greedy:!0},{pattern:Be(/(^|[^@$\\])<<0>>/.source,[ot]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:Be(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[tt]),lookbehind:!0,inside:ve},{pattern:Be(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[Je,kt]),lookbehind:!0,inside:ve},{pattern:Be(/(\busing\s+)<<0>>(?=\s*=)/.source,[Je]),lookbehind:!0},{pattern:Be(/(\b<<0>>\s+)<<1>>/.source,[V,Bt]),lookbehind:!0,inside:ve},{pattern:Be(/(\bcatch\s*\(\s*)<<0>>/.source,[tt]),lookbehind:!0,inside:ve},{pattern:Be(/(\bwhere\s+)<<0>>/.source,[Je]),lookbehind:!0},{pattern:Be(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[xe]),lookbehind:!0,inside:ve},{pattern:Be(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[kt,no,Je]),inside:ve}],keyword:kn,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),We.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),We.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:Be(/([(,]\s*)<<0>>(?=\s*:)/.source,[Je]),lookbehind:!0,alias:"punctuation"}}),We.languages.insertBefore("csharp","class-name",{namespace:{pattern:Be(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[Je]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:Be(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[Cs]),lookbehind:!0,alias:"class-name",inside:ve},"return-type":{pattern:Be(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[kt,tt]),inside:ve,alias:"class-name"},"constructor-invocation":{pattern:Be(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[kt]),lookbehind:!0,inside:ve,alias:"class-name"},"generic-method":{pattern:Be(/<<0>>\s*<<1>>(?=\s*\()/.source,[Je,Do]),inside:{function:Be(/^<<0>>/.source,[Je]),generic:{pattern:RegExp(Do),alias:"class-name",inside:ve}}},"type-list":{pattern:Be(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[V,Bt,Je,kt,kn.source,Cs,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:Be(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[Bt,Cs]),lookbehind:!0,greedy:!0,inside:We.languages.csharp},keyword:kn,"class-name":{pattern:RegExp(kt),greedy:!0,inside:ve},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var Wn=ot+"|"+je,On=yt(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[Wn]),ho=wt(yt(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[On]),2),Kn=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,ls=yt(/<<0>>(?:\s*\(<<1>>*\))?/.source,[tt,ho]);We.languages.insertBefore("csharp","class-name",{attribute:{pattern:Be(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[Kn,ls]),lookbehind:!0,greedy:!0,inside:{target:{pattern:Be(/^<<0>>(?=\s*:)/.source,[Kn]),alias:"keyword"},"attribute-arguments":{pattern:Be(/\(<<0>>*\)/.source,[ho]),inside:We.languages.csharp},"class-name":{pattern:RegExp(tt),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var Ye=/:[^}\r\n]+/.source,pt=wt(yt(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[On]),2),Rt=yt(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[pt,Ye]),Wt=wt(yt(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[Wn]),2),bn=yt(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[Wt,Ye]);function oo(ao,Qo){return{interpolation:{pattern:Be(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[ao]),lookbehind:!0,inside:{"format-string":{pattern:Be(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[Qo,Ye]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:We.languages.csharp}}},string:/[\s\S]+/}}We.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:Be(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[Rt]),lookbehind:!0,greedy:!0,inside:oo(Rt,pt)},{pattern:Be(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[bn]),lookbehind:!0,greedy:!0,inside:oo(bn,Wt)}],char:{pattern:RegExp(je),greedy:!0}}),We.languages.dotnet=We.languages.cs=We.languages.csharp}(Pe),function(We){var yt=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;We.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+yt.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+yt.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+yt.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+yt.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:yt,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},We.languages.css.atrule.inside.rest=We.languages.css;var Be=We.languages.markup;Be&&(Be.tag.addInlined("style","css"),Be.tag.addAttribute("style","css"))}(Pe),function(We){var yt=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,Be=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,wt={pattern:RegExp(/(^|[^\w.])/.source+Be+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};We.languages.java=We.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[wt,{pattern:RegExp(/(^|[^\w.])/.source+Be+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:wt.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+Be+/[A-Z]\w*\b/.source),lookbehind:!0,inside:wt.inside}],keyword:yt,function:[We.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),We.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),We.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":wt,keyword:yt,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+Be+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:wt.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+Be+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:wt.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return yt.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Pe),Pe.languages.javascript=Pe.languages.extend("clike",{"class-name":[Pe.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Pe.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Pe.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Pe.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Pe.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Pe.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Pe.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Pe.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Pe.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Pe.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Pe.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Pe.languages.markup&&(Pe.languages.markup.tag.addInlined("script","javascript"),Pe.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Pe.languages.js=Pe.languages.javascript,Pe.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Pe.languages.markup.tag.inside["attr-value"].inside.entity=Pe.languages.markup.entity,Pe.languages.markup.doctype.inside["internal-subset"].inside=Pe.languages.markup,Pe.hooks.add("wrap",function(We){We.type==="entity"&&(We.attributes.title=We.content.replace(/&amp;/,"&"))}),Object.defineProperty(Pe.languages.markup.tag,"addInlined",{value:function(yt,Be){var wt={};wt["language-"+Be]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Pe.languages[Be]},wt.cdata=/^<!\[CDATA\[|\]\]>$/i;var ce={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:wt}};ce["language-"+Be]={pattern:/[\s\S]+/,inside:Pe.languages[Be]};var Ze={};Ze[yt]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return yt}),"i"),lookbehind:!0,greedy:!0,inside:ce},Pe.languages.insertBefore("markup","cdata",Ze)}}),Object.defineProperty(Pe.languages.markup.tag,"addAttribute",{value:function(We,yt){Pe.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+We+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[yt,"language-"+yt],inside:Pe.languages[yt]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Pe.languages.html=Pe.languages.markup,Pe.languages.mathml=Pe.languages.markup,Pe.languages.svg=Pe.languages.markup,Pe.languages.xml=Pe.languages.extend("markup",{}),Pe.languages.ssml=Pe.languages.xml,Pe.languages.atom=Pe.languages.xml,Pe.languages.rss=Pe.languages.xml,function(We){var yt=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,Be=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],wt=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,ce=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,Ze=/[{}\[\](),:;]/;We.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:yt,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:Be,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:wt,operator:ce,punctuation:Ze};var V={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:We.languages.php},kn=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:V}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:V}}];We.languages.insertBefore("php","variable",{string:kn,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:yt,string:kn,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:Be,number:wt,operator:ce,punctuation:Ze}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),We.hooks.add("before-tokenize",function(cn){if(/<\?/.test(cn.code)){var no=/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;We.languages["markup-templating"].buildPlaceholders(cn,"php",no)}}),We.hooks.add("after-tokenize",function(cn){We.languages["markup-templating"].tokenizePlaceholders(cn,"php")})}(Pe),Pe.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Pe.languages.python["string-interpolation"].inside.interpolation.inside.rest=Pe.languages.python,Pe.languages.py=Pe.languages.python,function(We){We.languages.ruby=We.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),We.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var yt={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:We.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete We.languages.ruby.function;var Be="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",wt=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;We.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+Be+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:yt,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:yt,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+wt),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+wt+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),We.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+Be),greedy:!0,inside:{interpolation:yt,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:yt,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:yt,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+Be),greedy:!0,inside:{interpolation:yt,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:yt,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete We.languages.ruby.string,We.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),We.languages.rb=We.languages.ruby}(Pe),window.Prism=at,Pe}(),R=O=>Ke=>Ke.options.get(O),N=O=>{const Ke=O.options.register;Ke("codesample_languages",{processor:"object[]"}),Ke("codesample_global_prismjs",{processor:"boolean",default:!1})},$=R("codesample_languages"),U=R("codesample_global_prismjs"),X=O=>k.Prism&&U(O)?k.Prism:T,J=O=>i(O)&&O.nodeName==="PRE"&&O.className.indexOf("language-")!==-1,G=O=>{const Ke=O.selection?O.selection.getNode():null;return J(Ke)?m.some(Ke):m.none()},le=(O,Ke,he)=>{const at=O.dom;O.undoManager.transact(()=>{const qt=G(O);return he=x.DOM.encode(he),qt.fold(()=>{O.insertContent('<pre id="__new" class="language-'+Ke+'">'+he+"</pre>");const Pe=at.select("#__new")[0];at.setAttrib(Pe,"id",null),O.selection.select(Pe)},Pe=>{at.setAttrib(Pe,"class","language-"+Ke),Pe.innerHTML=he,X(O).highlightElement(Pe),O.selection.select(Pe)})})},Z=O=>G(O).bind(he=>m.from(he.textContent)).getOr(""),be=O=>{const Ke=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],he=$(O);return he||Ke},He=(O,Ke)=>G(O).fold(()=>Ke,at=>{const qt=at.className.match(/language-(\w+)/);return qt?qt[1]:Ke}),Re=O=>{const Ke=be(O),he=v(Ke).fold(d(""),Pe=>Pe.value),at=He(O,he),qt=Z(O);O.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"listbox",name:"language",label:"Language",items:Ke},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:at,code:qt},onSubmit:Pe=>{const We=Pe.getData();le(O,We.language,We.code),Pe.close()}})},K=O=>{O.addCommand("codesample",()=>{const Ke=O.selection.getNode();O.selection.isCollapsed()||J(Ke)?Re(O):O.formatter.toggle("code")})},$e=(O=>Ke=>Ke.replace(O,""))(/^\s+|\s+$/g);var Ue=tinymce.util.Tools.resolve("tinymce.util.Tools");const ae=O=>{O.on("PreProcess",Ke=>{const he=O.dom,at=he.select("pre[contenteditable=false]",Ke.node);Ue.each(Ue.grep(at,J),qt=>{const Pe=qt.textContent;he.setAttrib(qt,"class",$e(he.getAttrib(qt,"class"))),he.setAttrib(qt,"contentEditable",null),he.setAttrib(qt,"data-mce-highlighted",null);let We;for(;We=qt.firstChild;)qt.removeChild(We);const yt=he.add(qt,"code");yt.textContent=Pe})}),O.on("SetContent",()=>{const Ke=O.dom,he=Ue.grep(Ke.select("pre"),at=>J(at)&&Ke.getAttrib(at,"data-mce-highlighted")!=="true");he.length&&O.undoManager.transact(()=>{Ue.each(he,at=>{var qt;Ue.each(Ke.select("br",at),Pe=>{Ke.replace(O.getDoc().createTextNode(`
`),Pe)}),at.innerHTML=Ke.encode((qt=at.textContent)!==null&&qt!==void 0?qt:""),X(O).highlightElement(at),Ke.setAttrib(at,"data-mce-highlighted",!0),at.className=$e(at.className)})})}),O.on("PreInit",()=>{O.parser.addNodeFilter("pre",Ke=>{var he;for(let at=0,qt=Ke.length;at<qt;at++){const Pe=Ke[at];((he=Pe.attr("class"))!==null&&he!==void 0?he:"").indexOf("language-")!==-1&&(Pe.attr("contenteditable","false"),Pe.attr("data-mce-highlighted","false"))}})})},Oe=(O,Ke=l)=>he=>{const at=()=>{he.setEnabled(O.selection.isEditable()),Ke(he)};return O.on("NodeChange",at),at(),()=>{O.off("NodeChange",at)}},ht=O=>{const Ke=O.selection.getStart();return O.dom.is(Ke,'pre[class*="language-"]')},ne=O=>{const Ke=()=>O.execCommand("codesample");O.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:Ke,onSetup:Oe(O,he=>{he.setActive(ht(O))})}),O.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:Ke,onSetup:Oe(O)})};var ge=()=>{u.add("codesample",O=>{N(O),ae(O),ne(O),K(O),O.on("dblclick",Ke=>{J(Ke.target)&&Re(O)})})};ge()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(Ye,pt,Rt)=>{var Wt;return Rt(Ye,pt.prototype)?!0:((Wt=Ye.constructor)===null||Wt===void 0?void 0:Wt.name)===pt.name},i=Ye=>{const pt=typeof Ye;return Ye===null?"null":pt==="object"&&Array.isArray(Ye)?"array":pt==="object"&&o(Ye,String,(Rt,Wt)=>Wt.isPrototypeOf(Rt))?"string":pt},l=Ye=>pt=>i(pt)===Ye,d=Ye=>pt=>typeof pt===Ye,m=l("string"),p=d("boolean"),v=Ye=>Ye==null,x=Ye=>!v(Ye),k=d("function"),T=d("number"),R=(Ye,pt)=>Rt=>Ye(pt(Rt)),$=(Ye=>()=>Ye)(!1);class U{constructor(pt,Rt){this.tag=pt,this.value=Rt}static some(pt){return new U(!0,pt)}static none(){return U.singletonNone}fold(pt,Rt){return this.tag?Rt(this.value):pt()}isSome(){return this.tag}isNone(){return!this.tag}map(pt){return this.tag?U.some(pt(this.value)):U.none()}bind(pt){return this.tag?pt(this.value):U.none()}exists(pt){return this.tag&&pt(this.value)}forall(pt){return!this.tag||pt(this.value)}filter(pt){return!this.tag||pt(this.value)?this:U.none()}getOr(pt){return this.tag?this.value:pt}or(pt){return this.tag?this:pt}getOrThunk(pt){return this.tag?this.value:pt()}orThunk(pt){return this.tag?this:pt()}getOrDie(pt){if(this.tag)return this.value;throw new Error(pt!=null?pt:"Called getOrDie on None")}static from(pt){return x(pt)?U.some(pt):U.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(pt){this.tag&&pt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}U.singletonNone=new U(!1);const X=(Ye,pt)=>{const Rt=Ye.length,Wt=new Array(Rt);for(let bn=0;bn<Rt;bn++){const oo=Ye[bn];Wt[bn]=pt(oo,bn)}return Wt},J=(Ye,pt)=>{for(let Rt=0,Wt=Ye.length;Rt<Wt;Rt++){const bn=Ye[Rt];pt(bn,Rt)}},G=(Ye,pt)=>{const Rt=[];for(let Wt=0,bn=Ye.length;Wt<bn;Wt++){const oo=Ye[Wt];pt(oo,Wt)&&Rt.push(oo)}return Rt},le=9,Z=11,be=1,He=3,Re=(Ye,pt)=>{const Wt=(pt||document).createElement("div");if(Wt.innerHTML=Ye,!Wt.hasChildNodes()||Wt.childNodes.length>1){const bn="HTML does not have a single root node";throw new Error(bn)}return $e(Wt.childNodes[0])},K=(Ye,pt)=>{const Wt=(pt||document).createElement(Ye);return $e(Wt)},Ie=(Ye,pt)=>{const Wt=(pt||document).createTextNode(Ye);return $e(Wt)},$e=Ye=>{if(Ye==null)throw new Error("Node cannot be null or undefined");return{dom:Ye}},ae={fromHtml:Re,fromTag:K,fromText:Ie,fromDom:$e,fromPoint:(Ye,pt,Rt)=>U.from(Ye.dom.elementFromPoint(pt,Rt)).map($e)},Oe=(Ye,pt)=>{const Rt=Ye.dom;if(Rt.nodeType!==be)return!1;{const Wt=Rt;if(Wt.matches!==void 0)return Wt.matches(pt);if(Wt.msMatchesSelector!==void 0)return Wt.msMatchesSelector(pt);if(Wt.webkitMatchesSelector!==void 0)return Wt.webkitMatchesSelector(pt);if(Wt.mozMatchesSelector!==void 0)return Wt.mozMatchesSelector(pt);throw new Error("Browser lacks native selectors")}};typeof window!="undefined"||Function("return this;")();const ht=Ye=>Ye.dom.nodeName.toLowerCase(),ne=Ye=>Ye.dom.nodeType,ge=Ye=>pt=>ne(pt)===Ye,O=ge(be),Ke=ge(He),he=ge(le),at=ge(Z),qt=Ye=>pt=>O(pt)&&ht(pt)===Ye,Pe=Ye=>ae.fromDom(Ye.dom.ownerDocument),We=Ye=>he(Ye)?Ye:Pe(Ye),yt=Ye=>U.from(Ye.dom.parentNode).map(ae.fromDom),Be=Ye=>X(Ye.dom.childNodes,ae.fromDom),wt=(Ye,pt,Rt)=>{if(m(Rt)||p(Rt)||T(Rt))Ye.setAttribute(pt,Rt+"");else throw new Error("Attribute value was not simple")},ce=(Ye,pt,Rt)=>{wt(Ye.dom,pt,Rt)},Ze=(Ye,pt)=>{Ye.dom.removeAttribute(pt)},V=Ye=>at(Ye)&&x(Ye.dom.host),cn=k(Element.prototype.attachShadow)&&k(Node.prototype.getRootNode)?Ye=>ae.fromDom(Ye.dom.getRootNode()):We,no=Ye=>{const pt=cn(Ye);return V(pt)?U.some(pt):U.none()},Do=Ye=>ae.fromDom(Ye.dom.host),Cs=Ye=>{const pt=Ke(Ye)?Ye.dom.parentNode:Ye.dom;if(pt==null||pt.ownerDocument===null)return!1;const Rt=pt.ownerDocument;return no(ae.fromDom(pt)).fold(()=>Rt.body.contains(pt),R(Cs,Do))},Je=(Ye,pt,Rt)=>{let Wt=Ye.dom;const bn=k(Rt)?Rt:$;for(;Wt.parentNode;){Wt=Wt.parentNode;const oo=ae.fromDom(Wt);if(pt(oo))return U.some(oo);if(bn(oo))break}return U.none()},Bt=(Ye,pt,Rt)=>Je(Ye,Wt=>Oe(Wt,pt),Rt),tt=Ye=>Ye.style!==void 0&&k(Ye.style.getPropertyValue),ue=(Ye,pt)=>{const Rt=Ye.dom,bn=window.getComputedStyle(Rt).getPropertyValue(pt);return bn===""&&!Cs(Ye)?xe(Rt,pt):bn},xe=(Ye,pt)=>tt(Ye)?Ye.style.getPropertyValue(pt):"",Ne=Ye=>ue(Ye,"direction")==="rtl"?"rtl":"ltr",Me=(Ye,pt)=>G(Be(Ye),pt),kt=(Ye,pt)=>Me(Ye,Rt=>Oe(Rt,pt)),ve=Ye=>yt(Ye).filter(O),je=(Ye,pt)=>(pt?Bt(Ye,"ol,ul"):U.some(Ye)).getOr(Ye),ot=qt("li"),en=(Ye,pt,Rt)=>{J(pt,Wt=>{const bn=ae.fromDom(Wt),oo=ot(bn),ao=je(bn,oo);ve(ao).each(Fo=>{if(Ye.setStyle(ao.dom,"direction",null),Ne(Fo)===Rt?Ze(ao,"dir"):ce(ao,"dir",Rt),Ne(ao)!==Rt&&Ye.setStyle(ao.dom,"direction",Rt),oo){const $t=kt(ao,"li[dir],li[style]");J($t,xo=>{Ze(xo,"dir"),Ye.setStyle(xo.dom,"direction",null)})}})})},Wn=(Ye,pt)=>{Ye.selection.isEditable()&&(en(Ye.dom,Ye.selection.getSelectedBlocks(),pt),Ye.nodeChanged())},On=Ye=>{Ye.addCommand("mceDirectionLTR",()=>{Wn(Ye,"ltr")}),Ye.addCommand("mceDirectionRTL",()=>{Wn(Ye,"rtl")})},ho=(Ye,pt)=>Rt=>{const Wt=bn=>{const oo=ae.fromDom(bn.element);Rt.setActive(Ne(oo)===pt),Rt.setEnabled(Ye.selection.isEditable())};return Ye.on("NodeChange",Wt),Rt.setEnabled(Ye.selection.isEditable()),()=>Ye.off("NodeChange",Wt)},Kn=Ye=>{Ye.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>Ye.execCommand("mceDirectionLTR"),onSetup:ho(Ye,"ltr")}),Ye.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>Ye.execCommand("mceDirectionRTL"),onSetup:ho(Ye,"rtl")})};var ls=()=>{u.add("directionality",Ye=>{On(Ye),Kn(Ye)})};ls()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=xe=>Ne=>xe===Ne,i=o(null),l=o(void 0),d=xe=>xe==null,m=xe=>!d(xe),p=()=>{},x=(xe=>()=>xe)(!1);class k{constructor(Ne,Me){this.tag=Ne,this.value=Me}static some(Ne){return new k(!0,Ne)}static none(){return k.singletonNone}fold(Ne,Me){return this.tag?Me(this.value):Ne()}isSome(){return this.tag}isNone(){return!this.tag}map(Ne){return this.tag?k.some(Ne(this.value)):k.none()}bind(Ne){return this.tag?Ne(this.value):k.none()}exists(Ne){return this.tag&&Ne(this.value)}forall(Ne){return!this.tag||Ne(this.value)}filter(Ne){return!this.tag||Ne(this.value)?this:k.none()}getOr(Ne){return this.tag?this.value:Ne}or(Ne){return this.tag?this:Ne}getOrThunk(Ne){return this.tag?this.value:Ne()}orThunk(Ne){return this.tag?this:Ne()}getOrDie(Ne){if(this.tag)return this.value;throw new Error(Ne!=null?Ne:"Called getOrDie on None")}static from(Ne){return m(Ne)?k.some(Ne):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ne){this.tag&&Ne(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const T=(xe,Ne)=>{for(let Me=0,kt=xe.length;Me<kt;Me++){const ve=xe[Me];if(Ne(ve,Me))return!0}return!1},R=(xe,Ne)=>{const Me=xe.length,kt=new Array(Me);for(let ve=0;ve<Me;ve++){const je=xe[ve];kt[ve]=Ne(je,ve)}return kt},N=(xe,Ne)=>{for(let Me=0,kt=xe.length;Me<kt;Me++){const ve=xe[Me];Ne(ve,Me)}},$=xe=>{let Ne=xe;return{get:()=>Ne,set:ve=>{Ne=ve}}},U=(xe,Ne)=>{let Me=null;const kt=()=>{i(Me)||(clearTimeout(Me),Me=null)};return{cancel:kt,throttle:(...je)=>{kt(),Me=setTimeout(()=>{Me=null,xe.apply(null,je)},Ne)}}},X=(xe,Ne)=>{xe.insertContent(Ne)},J=Object.keys,G=Object.hasOwnProperty,le=(xe,Ne)=>{const Me=J(xe);for(let kt=0,ve=Me.length;kt<ve;kt++){const je=Me[kt],ot=xe[je];Ne(ot,je)}},Z=(xe,Ne)=>be(xe,(Me,kt)=>({k:kt,v:Ne(Me,kt)})),be=(xe,Ne)=>{const Me={};return le(xe,(kt,ve)=>{const je=Ne(kt,ve);Me[je.k]=je.v}),Me},He=(xe,Ne)=>G.call(xe,Ne),Ie=(xe=>(...Ne)=>{if(Ne.length===0)throw new Error("Can't merge zero objects");const Me={};for(let kt=0;kt<Ne.length;kt++){const ve=Ne[kt];for(const je in ve)He(ve,je)&&(Me[je]=xe(Me[je],ve[je]))}return Me})((xe,Ne)=>Ne),$e=xe=>{const Ne=$(k.none()),Me=()=>Ne.get().each(xe);return{clear:()=>{Me(),Ne.set(k.none())},isSet:()=>Ne.get().isSome(),get:()=>Ne.get(),set:en=>{Me(),Ne.set(k.some(en))}}},Ue=()=>{const xe=$e(p),Ne=Me=>xe.get().each(Me);return Ot(ie({},xe),{on:Ne})},ae=(xe,Ne,Me)=>Ne===""||xe.length>=Ne.length&&xe.substr(Me,Me+Ne.length)===Ne,Oe=(xe,Ne,Me=0,kt)=>{const ve=xe.indexOf(Ne,Me);return ve!==-1?l(kt)?!0:ve+Ne.length<=kt:!1},ht=(xe,Ne)=>ae(xe,Ne,0);var ne=tinymce.util.Tools.resolve("tinymce.Resource");const ge="tinymce.plugins.emoticons",O=xe=>Ne=>Ne.options.get(xe),Ke=(xe,Ne)=>{const Me=xe.options.register;Me("emoticons_database",{processor:"string",default:"emojis"}),Me("emoticons_database_url",{processor:"string",default:`${Ne}/js/${he(xe)}${xe.suffix}.js`}),Me("emoticons_database_id",{processor:"string",default:ge}),Me("emoticons_append",{processor:"object",default:{}}),Me("emoticons_images_url",{processor:"string",default:"https://twemoji.maxcdn.com/v/13.0.1/72x72/"})},he=O("emoticons_database"),at=O("emoticons_database_url"),qt=O("emoticons_database_id"),Pe=O("emoticons_append"),We=O("emoticons_images_url"),yt="All",Be={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},wt=(xe,Ne)=>He(xe,Ne)?xe[Ne]:Ne,ce=xe=>{const Ne=Pe(xe);return Z(Ne,Me=>ie({keywords:[],category:"user"},Me))},Ze=(xe,Ne,Me)=>{const kt=Ue(),ve=Ue(),je=We(xe),ot=Ye=>ht(Ye.char,"<img")?Ye.char.replace(/src="([^"]+)"/,(pt,Rt)=>`src="${je}${Rt}"`):Ye.char,en=Ye=>{const pt={},Rt=[];le(Ye,(Wt,bn)=>{const oo={title:bn,keywords:Wt.keywords,char:ot(Wt),category:wt(Be,Wt.category)},ao=pt[oo.category]!==void 0?pt[oo.category]:[];pt[oo.category]=ao.concat([oo]),Rt.push(oo)}),kt.set(pt),ve.set(Rt)};xe.on("init",()=>{ne.load(Me,Ne).then(Ye=>{const pt=ce(xe);en(Ie(Ye,pt))},Ye=>{kt.set({}),ve.set([])})});const Wn=Ye=>Ye===yt?On():kt.get().bind(pt=>k.from(pt[Ye])).getOr([]),On=()=>ve.get().getOr([]),ho=()=>[yt].concat(J(kt.get().getOr({}))),Kn=()=>ls()?Promise.resolve(!0):new Promise((Ye,pt)=>{let Rt=15;const Wt=setInterval(()=>{ls()?(clearInterval(Wt),Ye(!0)):(Rt--,Rt<0&&(clearInterval(Wt),pt(!1)))},100)}),ls=()=>kt.isSet()&&ve.isSet();return{listCategories:ho,hasLoaded:ls,waitForLoad:Kn,listAll:On,listCategory:Wn}},V=(xe,Ne)=>Oe(xe.title.toLowerCase(),Ne)||T(xe.keywords,Me=>Oe(Me.toLowerCase(),Ne)),kn=(xe,Ne,Me)=>{const kt=[],ve=Ne.toLowerCase(),je=Me.fold(()=>x,ot=>en=>en>=ot);for(let ot=0;ot<xe.length&&!((Ne.length===0||V(xe[ot],ve))&&(kt.push({value:xe[ot].char,text:xe[ot].title,icon:xe[ot].char}),je(kt.length)));ot++);return kt},cn="pattern",no=(xe,Ne)=>{const Me={pattern:"",results:kn(Ne.listAll(),"",k.some(300))},kt=$(yt),ve=ho=>{const Kn=ho.getData(),ls=kt.get(),Ye=Ne.listCategory(ls),pt=kn(Ye,Kn[cn],ls===yt?k.some(300):k.none());ho.setData({results:pt})},je=U(ho=>{ve(ho)},200),ot={label:"Search",type:"input",name:cn},en={type:"collection",name:"results"},Wn=()=>({title:"Emojis",size:"normal",body:{type:"tabpanel",tabs:R(Ne.listCategories(),Kn=>({title:Kn,name:Kn,items:[ot,en]}))},initialData:Me,onTabChange:(Kn,ls)=>{kt.set(ls.newTabName),je.throttle(Kn)},onChange:je.throttle,onAction:(Kn,ls)=>{ls.name==="results"&&(X(xe,ls.value),Kn.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}),On=xe.windowManager.open(Wn());On.focus(cn),Ne.hasLoaded()||(On.block("Loading emojis..."),Ne.waitForLoad().then(()=>{On.redial(Wn()),je.throttle(On),On.focus(cn),On.unblock()}).catch(ho=>{On.redial({title:"Emojis",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"Could not load emojis"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),On.focus(cn),On.unblock()}))},Do=(xe,Ne)=>{xe.addCommand("mceEmoticons",()=>no(xe,Ne))},Cs=xe=>{xe.on("PreInit",()=>{xe.parser.addAttributeFilter("data-emoticon",Ne=>{N(Ne,Me=>{Me.attr("data-mce-resize","false"),Me.attr("data-mce-placeholder","1")})})})},Je=(xe,Ne)=>{xe.ui.registry.addAutocompleter("emoticons",{trigger:":",columns:"auto",minChars:2,fetch:(Me,kt)=>Ne.waitForLoad().then(()=>{const ve=Ne.listAll();return kn(ve,Me,k.some(kt))}),onAction:(Me,kt,ve)=>{xe.selection.setRng(kt),xe.insertContent(ve),Me.hide()}})},Bt=xe=>Ne=>{const Me=()=>{Ne.setEnabled(xe.selection.isEditable())};return xe.on("NodeChange",Me),Me(),()=>{xe.off("NodeChange",Me)}},tt=xe=>{const Ne=()=>xe.execCommand("mceEmoticons");xe.ui.registry.addButton("emoticons",{tooltip:"Emojis",icon:"emoji",onAction:Ne,onSetup:Bt(xe)}),xe.ui.registry.addMenuItem("emoticons",{text:"Emojis...",icon:"emoji",onAction:Ne,onSetup:Bt(xe)})};var ue=()=>{u.add("emoticons",(xe,Ne)=>{Ke(xe,Ne);const Me=at(xe),kt=qt(xe),ve=Ze(xe,Me,kt);Do(xe,ve),tt(xe),Je(xe,ve),Cs(xe)})};ue()})();(function(){const u=ee=>{let me=ee;return{get:()=>me,set:gn=>{me=gn}}};var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=ee=>({isFullscreen:()=>ee.get()!==null}),l=(ee,me,st)=>{var At;return st(ee,me.prototype)?!0:((At=ee.constructor)===null||At===void 0?void 0:At.name)===me.name},d=ee=>{const me=typeof ee;return ee===null?"null":me==="object"&&Array.isArray(ee)?"array":me==="object"&&l(ee,String,(st,At)=>At.isPrototypeOf(st))?"string":me},m=ee=>me=>d(me)===ee,p=ee=>me=>typeof me===ee,v=ee=>me=>ee===me,x=m("string"),k=m("object"),T=m("array"),R=v(null),N=p("boolean"),$=v(void 0),U=ee=>ee==null,X=ee=>!U(ee),J=p("function"),G=p("number"),le=()=>{},Z=(ee,me)=>(...st)=>ee(me.apply(null,st)),be=(ee,me)=>st=>ee(me(st)),He=ee=>()=>ee;function Re(ee,...me){return(...st)=>{const At=me.concat(st);return ee.apply(null,At)}}const K=He(!1),Ie=He(!0);class $e{constructor(me,st){this.tag=me,this.value=st}static some(me){return new $e(!0,me)}static none(){return $e.singletonNone}fold(me,st){return this.tag?st(this.value):me()}isSome(){return this.tag}isNone(){return!this.tag}map(me){return this.tag?$e.some(me(this.value)):$e.none()}bind(me){return this.tag?me(this.value):$e.none()}exists(me){return this.tag&&me(this.value)}forall(me){return!this.tag||me(this.value)}filter(me){return!this.tag||me(this.value)?this:$e.none()}getOr(me){return this.tag?this.value:me}or(me){return this.tag?this:me}getOrThunk(me){return this.tag?this.value:me()}orThunk(me){return this.tag?this:me()}getOrDie(me){if(this.tag)return this.value;throw new Error(me!=null?me:"Called getOrDie on None")}static from(me){return X(me)?$e.some(me):$e.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(me){this.tag&&me(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}$e.singletonNone=new $e(!1);const Ue=Array.prototype.push,ae=(ee,me)=>{const st=ee.length,At=new Array(st);for(let gn=0;gn<st;gn++){const Ao=ee[gn];At[gn]=me(Ao,gn)}return At},Oe=(ee,me)=>{for(let st=0,At=ee.length;st<At;st++){const gn=ee[st];me(gn,st)}},ht=(ee,me)=>{const st=[];for(let At=0,gn=ee.length;At<gn;At++){const Ao=ee[At];me(Ao,At)&&st.push(Ao)}return st},ne=(ee,me,st)=>{for(let At=0,gn=ee.length;At<gn;At++){const Ao=ee[At];if(me(Ao,At))return $e.some(Ao);if(st(Ao,At))break}return $e.none()},ge=(ee,me)=>ne(ee,me,K),O=ee=>{const me=[];for(let st=0,At=ee.length;st<At;++st){if(!T(ee[st]))throw new Error("Arr.flatten item "+st+" was not an array, input: "+ee);Ue.apply(me,ee[st])}return me},Ke=(ee,me)=>O(ae(ee,me)),he=(ee,me)=>me>=0&&me<ee.length?$e.some(ee[me]):$e.none(),at=ee=>he(ee,0),qt=(ee,me)=>{for(let st=0;st<ee.length;st++){const At=me(ee[st],st);if(At.isSome())return At}return $e.none()},Pe=(ee,me,st)=>ee.isSome()&&me.isSome()?$e.some(st(ee.getOrDie(),me.getOrDie())):$e.none(),We=ee=>{const me=u($e.none()),st=()=>me.get().each(ee);return{clear:()=>{st(),me.set($e.none())},isSet:()=>me.get().isSome(),get:()=>me.get(),set:va=>{st(),me.set($e.some(va))}}},yt=()=>We(ee=>ee.unbind()),Be=()=>{const ee=We(le),me=st=>ee.get().each(st);return Ot(ie({},ee),{on:me})},wt=(ee,me)=>{let st=null;return{cancel:()=>{R(st)||(clearTimeout(st),st=null)},throttle:(...Ao)=>{R(st)&&(st=setTimeout(()=>{st=null,ee.apply(null,Ao)},me))}}},ce=Object.keys,Ze=(ee,me)=>{const st=ce(ee);for(let At=0,gn=st.length;At<gn;At++){const Ao=st[At],kr=ee[Ao];me(kr,Ao)}},V=typeof window!="undefined"?window:Function("return this;")(),kn=(ee,me)=>{let st=me!=null?me:V;for(let At=0;At<ee.length&&st!==void 0&&st!==null;++At)st=st[ee[At]];return st},cn=(ee,me)=>{const st=ee.split(".");return kn(st,me)},no=(ee,me)=>cn(ee,me),Do=(ee,me)=>{const st=no(ee,me);if(st==null)throw new Error(ee+" not available on this browser");return st},Cs=Object.getPrototypeOf,Je=ee=>Do("HTMLElement",ee),Bt=ee=>{const me=cn("ownerDocument.defaultView",ee);return k(ee)&&(Je(me).prototype.isPrototypeOf(ee)||/^HTML\w*Element$/.test(Cs(ee).constructor.name))},tt=9,ue=11,xe=1,Ne=3,Me=ee=>ee.dom.nodeType,kt=ee=>me=>Me(me)===ee,ve=ee=>je(ee)&&Bt(ee.dom),je=kt(xe),ot=kt(Ne),en=kt(tt),Wn=kt(ue),On=(ee,me,st)=>{if(x(st)||N(st)||G(st))ee.setAttribute(me,st+"");else throw new Error("Attribute value was not simple")},ho=(ee,me,st)=>{On(ee.dom,me,st)},Kn=(ee,me)=>{const st=ee.dom.getAttribute(me);return st===null?void 0:st},ls=(ee,me)=>{ee.dom.removeAttribute(me)},Ye=ee=>ee.dom.classList!==void 0,pt=(ee,me)=>Ye(ee)&&ee.dom.classList.contains(me),Rt=(ee,me,st=0,At)=>{const gn=ee.indexOf(me,st);return gn!==-1?$(At)?!0:gn+me.length<=At:!1},Wt=ee=>ee.style!==void 0&&J(ee.style.getPropertyValue),bn=(ee,me)=>{const At=(me||document).createElement("div");if(At.innerHTML=ee,!At.hasChildNodes()||At.childNodes.length>1){const gn="HTML does not have a single root node";throw new Error(gn)}return Qo(At.childNodes[0])},oo=(ee,me)=>{const At=(me||document).createElement(ee);return Qo(At)},ao=(ee,me)=>{const At=(me||document).createTextNode(ee);return Qo(At)},Qo=ee=>{if(ee==null)throw new Error("Node cannot be null or undefined");return{dom:ee}},cs={fromHtml:bn,fromTag:oo,fromText:ao,fromDom:Qo,fromPoint:(ee,me,st)=>$e.from(ee.dom.elementFromPoint(me,st)).map(Qo)},$t=(ee,me)=>{const st=ee.dom;if(st.nodeType!==xe)return!1;{const At=st;if(At.matches!==void 0)return At.matches(me);if(At.msMatchesSelector!==void 0)return At.msMatchesSelector(me);if(At.webkitMatchesSelector!==void 0)return At.webkitMatchesSelector(me);if(At.mozMatchesSelector!==void 0)return At.mozMatchesSelector(me);throw new Error("Browser lacks native selectors")}},xo=ee=>ee.nodeType!==xe&&ee.nodeType!==tt&&ee.nodeType!==ue||ee.childElementCount===0,Qs=(ee,me)=>{const st=document;return xo(st)?[]:ae(st.querySelectorAll(ee),cs.fromDom)},Sr=(ee,me)=>ee.dom===me.dom,Gr=ee=>cs.fromDom(ee.dom.ownerDocument),pr=ee=>en(ee)?ee:Gr(ee),di=ee=>$e.from(ee.dom.parentNode).map(cs.fromDom),Cr=(ee,me)=>{const st=J(me)?me:K;let At=ee.dom;const gn=[];for(;At.parentNode!==null&&At.parentNode!==void 0;){const Ao=At.parentNode,kr=cs.fromDom(Ao);if(gn.push(kr),st(kr)===!0)break;At=Ao}return gn},fi=ee=>{const me=st=>ht(st,At=>!Sr(ee,At));return di(ee).map(Bn).map(me).getOr([])},us=ee=>$e.from(ee.dom.nextSibling).map(cs.fromDom),Bn=ee=>ae(ee.dom.childNodes,cs.fromDom),hi=ee=>Wn(ee)&&X(ee.dom.host),Ge=J(Element.prototype.attachShadow)&&J(Node.prototype.getRootNode),dt=He(Ge),tn=Ge?ee=>cs.fromDom(ee.dom.getRootNode()):pr,In=ee=>{const me=tn(ee);return hi(me)?$e.some(me):$e.none()},go=ee=>cs.fromDom(ee.dom.host),Ys=ee=>{if(dt()&&X(ee.target)){const me=cs.fromDom(ee.target);if(je(me)&&Hr(me)&&ee.composed&&ee.composedPath){const st=ee.composedPath();if(st)return at(st)}}return $e.from(ee.target)},Hr=ee=>X(ee.dom.shadowRoot),br=ee=>{const me=ot(ee)?ee.dom.parentNode:ee.dom;if(me==null||me.ownerDocument===null)return!1;const st=me.ownerDocument;return In(cs.fromDom(me)).fold(()=>st.body.contains(me),be(br,go))},_r=ee=>{const me=ee.dom.body;if(me==null)throw new Error("Body is not available yet");return cs.fromDom(me)},ke=(ee,me,st)=>{if(!x(st))throw new Error("CSS value must be a string: "+st);Wt(ee)&&ee.style.setProperty(me,st)},Ae=(ee,me,st)=>{const At=ee.dom;ke(At,me,st)},ct=(ee,me)=>{const st=ee.dom;Ze(me,(At,gn)=>{ke(st,gn,At)})},xt=(ee,me)=>{const st=ee.dom,gn=window.getComputedStyle(st).getPropertyValue(me);return gn===""&&!br(ee)?An(st,me):gn},An=(ee,me)=>Wt(ee)?ee.style.getPropertyValue(me):"",Pn=(ee,me,st,At,gn,Ao,kr)=>({target:ee,x:me,y:st,stop:At,prevent:gn,kill:Ao,raw:kr}),_o=ee=>{const me=cs.fromDom(Ys(ee).getOr(ee.target)),st=()=>ee.stopPropagation(),At=()=>ee.preventDefault(),gn=Z(At,st);return Pn(me,ee.clientX,ee.clientY,st,At,gn,ee)},Ws=(ee,me)=>st=>{ee(st)&&me(_o(st))},Tt=(ee,me,st,At,gn)=>{const Ao=Ws(st,At);return ee.dom.addEventListener(me,Ao,gn),{unbind:Re(Se,ee,me,Ao,gn)}},Lo=(ee,me,st,At)=>Tt(ee,me,st,At,!1),Se=(ee,me,st,At)=>{ee.dom.removeEventListener(me,st,At)},Ee=Ie,Dt=(ee,me,st)=>Lo(ee,me,Ee,st),nn=ee=>{let me=!1,st;return(...At)=>(me||(me=!0,st=ee.apply(null,At)),st)},an=(ee,me,st,At)=>{const gn=ee.isiOS()&&/ipad/i.test(st)===!0,Ao=ee.isiOS()&&!gn,kr=ee.isiOS()||ee.isAndroid(),va=kr||At("(pointer:coarse)"),zr=gn||!Ao&&kr&&At("(min-device-width:768px)"),sa=Ao||kr&&!zr,Js=me.isSafari()&&ee.isiOS()&&/safari/i.test(st)===!1,Ur=!sa&&!zr&&!Js;return{isiPad:He(gn),isiPhone:He(Ao),isTablet:He(zr),isPhone:He(sa),isTouch:He(va),isAndroid:ee.isAndroid,isiOS:ee.isiOS,isWebView:He(Js),isDesktop:He(Ur)}},Dn=(ee,me)=>{for(let st=0;st<ee.length;st++){const At=ee[st];if(At.test(me))return At}},Mn=(ee,me)=>{const st=Dn(ee,me);if(!st)return{major:0,minor:0};const At=gn=>Number(me.replace(st,"$"+gn));return Vn(At(1),At(2))},En=(ee,me)=>{const st=String(me).toLowerCase();return ee.length===0?$n():Mn(ee,st)},$n=()=>Vn(0,0),Vn=(ee,me)=>({major:ee,minor:me}),Xo={nu:Vn,detect:En,unknown:$n},Ts=(ee,me)=>qt(me.brands,st=>{const At=st.brand.toLowerCase();return ge(ee,gn=>{var Ao;return At===((Ao=gn.brand)===null||Ao===void 0?void 0:Ao.toLowerCase())}).map(gn=>({current:gn.name,version:Xo.nu(parseInt(st.version,10),0)}))}),Ii=(ee,me)=>{const st=String(me).toLowerCase();return ge(ee,At=>At.search(st))},Oa=(ee,me)=>Ii(ee,me).map(st=>{const At=Xo.detect(st.versionRegexes,me);return{current:st.name,version:At}}),Yl=(ee,me)=>Ii(ee,me).map(st=>{const At=Xo.detect(st.versionRegexes,me);return{current:st.name,version:At}}),Po=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ho=ee=>me=>Rt(me,ee),ds=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:ee=>Rt(ee,"edge/")&&Rt(ee,"chrome")&&Rt(ee,"safari")&&Rt(ee,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Po],search:ee=>Rt(ee,"chrome")&&!Rt(ee,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:ee=>Rt(ee,"msie")||Rt(ee,"trident")},{name:"Opera",versionRegexes:[Po,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ho("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ho("firefox")},{name:"Safari",versionRegexes:[Po,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:ee=>(Rt(ee,"safari")||Rt(ee,"mobile/"))&&Rt(ee,"applewebkit")}],ji=[{name:"Windows",search:Ho("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:ee=>Rt(ee,"iphone")||Rt(ee,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ho("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ho("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ho("linux"),versionRegexes:[]},{name:"Solaris",search:Ho("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ho("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ho("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Li={browsers:He(ds),oses:He(ji)},Mr="Edge",ll="Chromium",Ei="IE",Ec="Opera",bs="Firefox",ma="Safari",Zi=()=>Za({current:void 0,version:Xo.unknown()}),Za=ee=>{const me=ee.current,st=ee.version,At=gn=>()=>me===gn;return{current:me,version:st,isEdge:At(Mr),isChromium:At(ll),isIE:At(Ei),isOpera:At(Ec),isFirefox:At(bs),isSafari:At(ma)}},oa={unknown:Zi,nu:Za,edge:He(Mr),chromium:He(ll),ie:He(Ei),opera:He(Ec),firefox:He(bs),safari:He(ma)},Da="Windows",mi="iOS",Tc="Android",ga="Linux",Jc="macOS",pa="Solaris",Xl="FreeBSD",$i="ChromeOS",cl=()=>Oc({current:void 0,version:Xo.unknown()}),Oc=ee=>{const me=ee.current,st=ee.version,At=gn=>()=>me===gn;return{current:me,version:st,isWindows:At(Da),isiOS:At(mi),isAndroid:At(Tc),isMacOS:At(Jc),isLinux:At(ga),isSolaris:At(pa),isFreeBSD:At(Xl),isChromeOS:At($i)}},Qc={unknown:cl,nu:Oc,windows:He(Da),ios:He(mi),android:He(Tc),linux:He(ga),macos:He(Jc),solaris:He(pa),freebsd:He(Xl),chromeos:He($i)},Q={detect:(ee,me,st)=>{const At=Li.browsers(),gn=Li.oses(),Ao=me.bind(zr=>Ts(At,zr)).orThunk(()=>Oa(At,ee)).fold(oa.unknown,oa.nu),kr=Yl(gn,ee).fold(Qc.unknown,Qc.nu),va=an(kr,Ao,ee,st);return{browser:Ao,os:kr,deviceType:va}}},Te=ee=>window.matchMedia(ee).matches;let qe=nn(()=>Q.detect(navigator.userAgent,$e.from(navigator.userAgentData),Te));const Ct=()=>qe(),Ut=(ee,me)=>({left:ee,top:me,translate:(At,gn)=>Ut(ee+At,me+gn)}),jn=Ut,Os=ee=>{const me=ee!==void 0?ee.dom:document,st=me.body.scrollLeft||me.documentElement.scrollLeft,At=me.body.scrollTop||me.documentElement.scrollTop;return jn(st,At)},Ms=ee=>{const me=ee===void 0?window:ee;return Ct().browser.isFirefox()?$e.none():$e.from(me.visualViewport)},vs=(ee,me,st,At)=>({x:ee,y:me,width:st,height:At,right:ee+st,bottom:me+At}),Xs=ee=>{const me=ee===void 0?window:ee,st=me.document,At=Os(cs.fromDom(st));return Ms(me).fold(()=>{const gn=me.document.documentElement,Ao=gn.clientWidth,kr=gn.clientHeight;return vs(At.left,At.top,Ao,kr)},gn=>vs(Math.max(gn.pageLeft,At.left),Math.max(gn.pageTop,At.top),gn.width,gn.height))},jo=(ee,me,st)=>Ms(st).map(At=>{const gn=Ao=>me(_o(Ao));return At.addEventListener(ee,gn),{unbind:()=>At.removeEventListener(ee,gn)}}).getOrThunk(()=>({unbind:le}));var fr=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ti=tinymce.util.Tools.resolve("tinymce.Env");const Ru=(ee,me)=>{ee.dispatch("FullscreenStateChanged",{state:me}),ee.dispatch("ResizeEditor")},sn=ee=>me=>me.options.get(ee),Pu=ee=>{const me=ee.options.register;me("fullscreen_native",{processor:"boolean",default:!1})},Vr=sn("fullscreen_native"),z=ee=>{const me=cs.fromDom(ee.getElement());return In(me).map(go).getOrThunk(()=>_r(Gr(me)))},se=ee=>ee.fullscreenElement!==void 0?ee.fullscreenElement:ee.msFullscreenElement!==void 0?ee.msFullscreenElement:ee.webkitFullscreenElement!==void 0?ee.webkitFullscreenElement:null,pe=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",lt=ee=>{const me=ee.dom;me.requestFullscreen?me.requestFullscreen():me.msRequestFullscreen?me.msRequestFullscreen():me.webkitRequestFullScreen&&me.webkitRequestFullScreen()},un=ee=>{const me=ee.dom;me.exitFullscreen?me.exitFullscreen():me.msExitFullscreen?me.msExitFullscreen():me.webkitCancelFullScreen&&me.webkitCancelFullScreen()},Uo=ee=>ee.dom===se(Gr(ee).dom),xn=(ee,me,st)=>ht(Cr(ee,st),me),si=(ee,me)=>ht(fi(ee),me),Lt=ee=>Qs(ee),er=(ee,me,st)=>xn(ee,At=>$t(At,me),st),ba=(ee,me)=>si(ee,st=>$t(st,me)),js="data-ephox-mobile-fullscreen-style",Kr="display:none!important;",Ed="position:absolute!important;",es="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",ul="background-color:rgb(255,255,255)!important;",qa=Ti.os.isAndroid(),Nu=ee=>{const me=xt(ee,"background-color");return me!==void 0&&me!==""?"background-color:"+me+"!important":ul},ir=(ee,me,st)=>{const At=sa=>ba(sa,"*:not(.tox-silver-sink)"),gn=sa=>Js=>{const Ur=Kn(Js,"style"),gi=Ur===void 0?"no-styles":Ur.trim();gi!==sa&&(ho(Js,js,gi),ct(Js,ee.parseStyle(sa)))},Ao=er(me,"*"),kr=Ke(Ao,At),va=Nu(st);Oe(kr,gn(Kr)),Oe(Ao,gn(Ed+es+va)),gn((qa===!0?"":Ed)+es+va)(me)},Bu=ee=>{const me=Lt("["+js+"]");Oe(me,st=>{const At=Kn(st,js);At&&At!=="no-styles"?ct(st,ee.parseStyle(At)):ls(st,"style"),ls(st,js)})},Xg=fr.DOM,Jg=()=>Xs(window),hr=ee=>window.scrollTo(ee.x,ee.y),Em=Ms().fold(()=>({bind:le,unbind:le}),ee=>{const me=Be(),st=yt(),At=yt(),gn=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Ao=()=>{window.requestAnimationFrame(()=>{me.on(sa=>ct(sa,{top:ee.offsetTop+"px",left:ee.offsetLeft+"px",height:ee.height+"px",width:ee.width+"px"}))})},kr=wt(()=>{gn(),Ao()},50);return{bind:sa=>{me.set(sa),kr.throttle(),st.set(jo("resize",kr.throttle)),At.set(jo("scroll",kr.throttle))},unbind:()=>{me.on(()=>{st.clear(),At.clear()}),me.clear()}}}),Td=(ee,me)=>{const st=document.body,At=document.documentElement,gn=ee.getContainer(),Ao=cs.fromDom(gn),kr=us(Ao).filter(Yr=>ve(Yr)&&pt(Yr,"tox-silver-sink")),va=z(ee),zr=me.get(),sa=cs.fromDom(ee.getBody()),Js=Ti.deviceType.isTouch(),Ur=gn.style,gi=ee.iframeElement,_a=gi==null?void 0:gi.style,Od=Yr=>{Yr(st,"tox-fullscreen"),Yr(At,"tox-fullscreen"),Yr(gn,"tox-fullscreen"),In(Ao).map(Jl=>go(Jl).dom).each(Jl=>{Yr(Jl,"tox-fullscreen"),Yr(Jl,"tox-shadowhost")})},Ir=()=>{Js&&Bu(ee.dom),Od(Xg.removeClass),Em.unbind(),$e.from(me.get()).each(Yr=>Yr.fullscreenChangeHandler.unbind())};if(zr)zr.fullscreenChangeHandler.unbind(),Vr(ee)&&Uo(va)&&un(Gr(va)),_a.width=zr.iframeWidth,_a.height=zr.iframeHeight,Ur.width=zr.containerWidth,Ur.height=zr.containerHeight,Ur.top=zr.containerTop,Ur.left=zr.containerLeft,Pe(kr,zr.sinkCssPosition,(Yr,Jl)=>{Ae(Yr,"position",Jl)}),Ir(),hr(zr.scrollPos),me.set(null),Ru(ee,!1),ee.off("remove",Ir);else{const Yr=Dt(Gr(va),pe(),Dd=>{Vr(ee)&&!Uo(va)&&me.get()!==null&&Td(ee,me)}),Jl={scrollPos:Jg(),containerWidth:Ur.width,containerHeight:Ur.height,containerTop:Ur.top,containerLeft:Ur.left,iframeWidth:_a.width,iframeHeight:_a.height,fullscreenChangeHandler:Yr,sinkCssPosition:kr.map(Dd=>xt(Dd,"position"))};Js&&ir(ee.dom,Ao,sa),_a.width=_a.height="100%",Ur.width=Ur.height="",Od(Xg.addClass),kr.each(Dd=>{Ae(Dd,"position","fixed")}),Em.bind(Ao),ee.on("remove",Ir),me.set(Jl),Vr(ee)&&lt(va),Ru(ee,!0)}},Ga=(ee,me)=>{ee.addCommand("mceFullScreen",()=>{Td(ee,me)})},dl=(ee,me)=>st=>{st.setActive(me.get()!==null);const At=gn=>st.setActive(gn.state);return ee.on("FullscreenStateChanged",At),()=>ee.off("FullscreenStateChanged",At)},kf=(ee,me)=>{const st=()=>ee.execCommand("mceFullScreen");ee.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:st,onSetup:dl(ee,me)}),ee.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:st,onSetup:dl(ee,me)})};var ts=()=>{o.add("fullscreen",ee=>{const me=u(null);return ee.inline||(Pu(ee),Ga(ee,me),kf(ee,me),ee.addShortcut("Meta+Shift+F","","mceFullScreen")),i(me)})};ts()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=Re=>K=>K.options.get(Re),i=Re=>{const K=Re.options.register;K("insertdatetime_dateformat",{processor:"string",default:Re.translate("%Y-%m-%d")}),K("insertdatetime_timeformat",{processor:"string",default:Re.translate("%H:%M:%S")}),K("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),K("insertdatetime_element",{processor:"boolean",default:!1})},l=o("insertdatetime_dateformat"),d=o("insertdatetime_timeformat"),m=o("insertdatetime_formats"),p=o("insertdatetime_element"),v=Re=>{const K=m(Re);return K.length>0?K[0]:d(Re)},x="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),k="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),T="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),R="January February March April May June July August September October November December".split(" "),N=(Re,K)=>{if(Re=""+Re,Re.length<K)for(let Ie=0;Ie<K-Re.length;Ie++)Re="0"+Re;return Re},$=(Re,K,Ie=new Date)=>(K=K.replace("%D","%m/%d/%Y"),K=K.replace("%r","%I:%M:%S %p"),K=K.replace("%Y",""+Ie.getFullYear()),K=K.replace("%y",""+Ie.getYear()),K=K.replace("%m",N(Ie.getMonth()+1,2)),K=K.replace("%d",N(Ie.getDate(),2)),K=K.replace("%H",""+N(Ie.getHours(),2)),K=K.replace("%M",""+N(Ie.getMinutes(),2)),K=K.replace("%S",""+N(Ie.getSeconds(),2)),K=K.replace("%I",""+((Ie.getHours()+11)%12+1)),K=K.replace("%p",Ie.getHours()<12?"AM":"PM"),K=K.replace("%B",""+Re.translate(R[Ie.getMonth()])),K=K.replace("%b",""+Re.translate(T[Ie.getMonth()])),K=K.replace("%A",""+Re.translate(k[Ie.getDay()])),K=K.replace("%a",""+Re.translate(x[Ie.getDay()])),K=K.replace("%%","%"),K),U=(Re,K,Ie,$e)=>{const Ue=Re.dom.create("time",{datetime:Ie},$e);Re.dom.replace(Ue,K),Re.selection.select(Ue,!0),Re.selection.collapse(!1)},X=(Re,K)=>{if(p(Re)){const Ie=$(Re,K);let $e;/%[HMSIp]/.test(K)?$e=$(Re,"%Y-%m-%dT%H:%M"):$e=$(Re,"%Y-%m-%d");const Ue=Re.dom.getParent(Re.selection.getStart(),"time");Ue?U(Re,Ue,$e,Ie):Re.insertContent('<time datetime="'+$e+'">'+Ie+"</time>")}else Re.insertContent($(Re,K))},J=Re=>{Re.addCommand("mceInsertDate",(K,Ie)=>{X(Re,Ie!=null?Ie:l(Re))}),Re.addCommand("mceInsertTime",(K,Ie)=>{X(Re,Ie!=null?Ie:d(Re))})},G=Re=>{let K=Re;return{get:()=>K,set:Ue=>{K=Ue}}};var le=tinymce.util.Tools.resolve("tinymce.util.Tools");const Z=Re=>K=>{const Ie=()=>{K.setEnabled(Re.selection.isEditable())};return Re.on("NodeChange",Ie),Ie(),()=>{Re.off("NodeChange",Ie)}},be=Re=>{const K=m(Re),Ie=G(v(Re)),$e=ae=>Re.execCommand("mceInsertDate",!1,ae);Re.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:ae=>ae===Ie.get(),fetch:ae=>{ae(le.map(K,Oe=>({type:"choiceitem",text:$(Re,Oe),value:Oe})))},onAction:ae=>{$e(Ie.get())},onItemAction:(ae,Oe)=>{Ie.set(Oe),$e(Oe)},onSetup:Z(Re)});const Ue=ae=>()=>{Ie.set(ae),$e(ae)};Re.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>le.map(K,ae=>({type:"menuitem",text:$(Re,ae),onAction:Ue(ae)})),onSetup:Z(Re)})};var He=()=>{u.add("insertdatetime",Re=>{i(Re),J(Re),be(Re)})};He()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(Q,Te,qe)=>{var Ct;return qe(Q,Te.prototype)?!0:((Ct=Q.constructor)===null||Ct===void 0?void 0:Ct.name)===Te.name},i=Q=>{const Te=typeof Q;return Q===null?"null":Te==="object"&&Array.isArray(Q)?"array":Te==="object"&&o(Q,String,(qe,Ct)=>Ct.isPrototypeOf(qe))?"string":Te},l=Q=>Te=>i(Te)===Q,d=Q=>Te=>typeof Te===Q,m=Q=>Te=>Q===Te,p=l("string"),v=l("object"),x=l("array"),k=m(null),T=d("boolean"),R=Q=>Q==null,N=Q=>!R(Q),$=d("function"),U=(Q,Te)=>{if(x(Q)){for(let qe=0,Ct=Q.length;qe<Ct;++qe)if(!Te(Q[qe]))return!1;return!0}return!1},X=()=>{},J=Q=>()=>Q,G=(Q,Te)=>Q===Te;class le{constructor(Te,qe){this.tag=Te,this.value=qe}static some(Te){return new le(!0,Te)}static none(){return le.singletonNone}fold(Te,qe){return this.tag?qe(this.value):Te()}isSome(){return this.tag}isNone(){return!this.tag}map(Te){return this.tag?le.some(Te(this.value)):le.none()}bind(Te){return this.tag?Te(this.value):le.none()}exists(Te){return this.tag&&Te(this.value)}forall(Te){return!this.tag||Te(this.value)}filter(Te){return!this.tag||Te(this.value)?this:le.none()}getOr(Te){return this.tag?this.value:Te}or(Te){return this.tag?this:Te}getOrThunk(Te){return this.tag?this.value:Te()}orThunk(Te){return this.tag?this:Te()}getOrDie(Te){if(this.tag)return this.value;throw new Error(Te!=null?Te:"Called getOrDie on None")}static from(Te){return N(Te)?le.some(Te):le.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Te){this.tag&&Te(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}le.singletonNone=new le(!1);const Z=Array.prototype.indexOf,be=Array.prototype.push,He=(Q,Te)=>Z.call(Q,Te),Re=(Q,Te)=>He(Q,Te)>-1,K=(Q,Te)=>{const qe=Q.length,Ct=new Array(qe);for(let Ut=0;Ut<qe;Ut++){const jn=Q[Ut];Ct[Ut]=Te(jn,Ut)}return Ct},Ie=(Q,Te)=>{for(let qe=0,Ct=Q.length;qe<Ct;qe++){const Ut=Q[qe];Te(Ut,qe)}},$e=(Q,Te,qe)=>(Ie(Q,(Ct,Ut)=>{qe=Te(qe,Ct,Ut)}),qe),Ue=Q=>{const Te=[];for(let qe=0,Ct=Q.length;qe<Ct;++qe){if(!x(Q[qe]))throw new Error("Arr.flatten item "+qe+" was not an array, input: "+Q);be.apply(Te,Q[qe])}return Te},ae=(Q,Te)=>Ue(K(Q,Te)),Oe=(Q,Te)=>{for(let qe=0;qe<Q.length;qe++){const Ct=Te(Q[qe],qe);if(Ct.isSome())return Ct}return le.none()},ht=(Q,Te,qe=G)=>Q.exists(Ct=>qe(Ct,Te)),ne=Q=>{const Te=[],qe=Ct=>{Te.push(Ct)};for(let Ct=0;Ct<Q.length;Ct++)Q[Ct].each(qe);return Te},ge=(Q,Te)=>Q?le.some(Te):le.none(),O=Q=>Te=>Te.options.get(Q),Ke=Q=>{const Te=Q.options.register;Te("link_assume_external_targets",{processor:qe=>{const Ct=p(qe)||T(qe);return Ct?qe===!0?{value:1,valid:Ct}:qe==="http"||qe==="https"?{value:qe,valid:Ct}:{value:0,valid:Ct}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),Te("link_context_toolbar",{processor:"boolean",default:!1}),Te("link_list",{processor:qe=>p(qe)||$(qe)||U(qe,v)}),Te("link_default_target",{processor:"string"}),Te("link_default_protocol",{processor:"string",default:"https"}),Te("link_target_list",{processor:qe=>T(qe)||U(qe,v),default:!0}),Te("link_rel_list",{processor:"object[]",default:[]}),Te("link_class_list",{processor:"object[]",default:[]}),Te("link_title",{processor:"boolean",default:!0}),Te("allow_unsafe_link_target",{processor:"boolean",default:!1}),Te("link_quicklink",{processor:"boolean",default:!1})},he=O("link_assume_external_targets"),at=O("link_context_toolbar"),qt=O("link_list"),Pe=O("link_default_target"),We=O("link_default_protocol"),yt=O("link_target_list"),Be=O("link_rel_list"),wt=O("link_class_list"),ce=O("link_title"),Ze=O("allow_unsafe_link_target"),V=O("link_quicklink");var kn=tinymce.util.Tools.resolve("tinymce.util.Tools");const cn=Q=>p(Q.value)?Q.value:"",no=Q=>p(Q.text)?Q.text:p(Q.title)?Q.title:"",Do=(Q,Te)=>{const qe=[];return kn.each(Q,Ct=>{const Ut=no(Ct);if(Ct.menu!==void 0){const jn=Do(Ct.menu,Te);qe.push({text:Ut,items:jn})}else{const jn=Te(Ct);qe.push({text:Ut,value:jn})}}),qe},Cs=(Q=cn)=>Te=>le.from(Te).map(qe=>Do(qe,Q)),tt={sanitize:Q=>Cs(cn)(Q),sanitizeWith:Cs,createUi:(Q,Te)=>qe=>({name:Q,type:"listbox",label:Te,items:qe}),getValue:cn},ue=Object.keys,xe=Object.hasOwnProperty,Ne=(Q,Te)=>{const qe=ue(Q);for(let Ct=0,Ut=qe.length;Ct<Ut;Ct++){const jn=qe[Ct],Os=Q[jn];Te(Os,jn)}},Me=Q=>(Te,qe)=>{Q[qe]=Te},kt=(Q,Te,qe,Ct)=>{Ne(Q,(Ut,jn)=>{(Te(Ut,jn)?qe:Ct)(Ut,jn)})},ve=(Q,Te)=>{const qe={};return kt(Q,Te,Me(qe),X),qe},je=(Q,Te)=>xe.call(Q,Te),ot=(Q,Te)=>je(Q,Te)&&Q[Te]!==void 0&&Q[Te]!==null;var en=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Wn=tinymce.util.Tools.resolve("tinymce.util.URI");const On=Q=>N(Q)&&Q.nodeName.toLowerCase()==="a",ho=Q=>On(Q)&&!!Ye(Q),Kn=(Q,Te)=>{if(Q.collapsed)return[];{const qe=Q.cloneContents(),Ct=qe.firstChild,Ut=new en(Ct,qe),jn=[];let Os=Ct;do Te(Os)&&jn.push(Os);while(Os=Ut.next());return jn}},ls=Q=>/^\w+:/i.test(Q),Ye=Q=>{var Te,qe;return(qe=(Te=Q.getAttribute("data-mce-href"))!==null&&Te!==void 0?Te:Q.getAttribute("href"))!==null&&qe!==void 0?qe:""},pt=(Q,Te)=>{const qe=["noopener"],Ct=Q?Q.split(/\s+/):[],Ut=vs=>kn.trim(vs.sort().join(" ")),jn=vs=>(vs=Os(vs),vs.length>0?vs.concat(qe):qe),Os=vs=>vs.filter(Xs=>kn.inArray(qe,Xs)===-1),Ms=Te?jn(Ct):Os(Ct);return Ms.length>0?Ut(Ms):""},Rt=Q=>Q.replace(/\uFEFF/g,""),Wt=(Q,Te)=>(Te=Te||ao(Q.selection.getRng())[0]||Q.selection.getNode(),xo(Te)?le.from(Q.dom.select("a[href]",Te)[0]):le.from(Q.dom.getParent(Te,"a[href]"))),bn=(Q,Te)=>Wt(Q,Te).isSome(),oo=(Q,Te)=>{const qe=Te.fold(()=>Q.getContent({format:"text"}),Ct=>Ct.innerText||Ct.textContent||"");return Rt(qe)},ao=Q=>Kn(Q,ho),Qo=Q=>kn.grep(Q,ho),Fo=Q=>Qo(Q).length>0,cs=Q=>ao(Q).length>0,$t=Q=>{const Te=Q.schema.getTextInlineElements(),qe=jn=>jn.nodeType===1&&!On(jn)&&!je(Te,jn.nodeName.toLowerCase());if(Wt(Q).exists(jn=>jn.hasAttribute("data-mce-block")))return!1;const Ut=Q.selection.getRng();return Ut.collapsed?!0:Kn(Ut,qe).length===0},xo=Q=>N(Q)&&Q.nodeName==="FIGURE"&&/\bimage\b/i.test(Q.className),Qs=Q=>$e(["title","rel","class","target"],(qe,Ct)=>(Q[Ct].each(Ut=>{qe[Ct]=Ut.length>0?Ut:null}),qe),{href:Q.href}),Sr=(Q,Te)=>(Te==="http"||Te==="https")&&!ls(Q)?Te+"://"+Q:Q,Gr=(Q,Te)=>{const qe=ie({},Te);if(Be(Q).length===0&&!Ze(Q)){const Ct=pt(qe.rel,qe.target==="_blank");qe.rel=Ct||null}return le.from(qe.target).isNone()&&yt(Q)===!1&&(qe.target=Pe(Q)),qe.href=Sr(qe.href,he(Q)),qe},pr=(Q,Te,qe,Ct)=>{qe.each(Ut=>{je(Te,"innerText")?Te.innerText=Ut:Te.textContent=Ut}),Q.dom.setAttribs(Te,Ct),Q.selection.select(Te)},di=(Q,Te,qe,Ct)=>{const Ut=Q.dom;xo(Te)?In(Ut,Te,Ct):qe.fold(()=>{Q.execCommand("mceInsertLink",!1,Ct)},jn=>{Q.insertContent(Ut.createHTML("a",Ct,Ut.encode(jn)))})},Cr=(Q,Te,qe)=>{const Ct=Q.selection.getNode(),Ut=Wt(Q,Ct),jn=Gr(Q,Qs(qe));Q.undoManager.transact(()=>{qe.href===Te.href&&Te.attach(),Ut.fold(()=>{di(Q,Ct,qe.text,jn)},Os=>{Q.focus(),pr(Q,Os,qe.text,jn)})})},fi=Q=>{const Te=Q.dom,qe=Q.selection,Ct=qe.getBookmark(),Ut=qe.getRng().cloneRange(),jn=Te.getParent(Ut.startContainer,"a[href]",Q.getBody()),Os=Te.getParent(Ut.endContainer,"a[href]",Q.getBody());jn&&Ut.setStartBefore(jn),Os&&Ut.setEndAfter(Os),qe.setRng(Ut),Q.execCommand("unlink"),qe.moveToBookmark(Ct)},us=Q=>{Q.undoManager.transact(()=>{const Te=Q.selection.getNode();xo(Te)?tn(Q,Te):fi(Q),Q.focus()})},Bn=Q=>{const{class:Te,href:qe,rel:Ct,target:Ut,text:jn,title:Os}=Q;return ve({class:Te.getOrNull(),href:qe,rel:Ct.getOrNull(),target:Ut.getOrNull(),text:jn.getOrNull(),title:Os.getOrNull()},(Ms,vs)=>k(Ms)===!1)},hi=(Q,Te)=>{const qe=Q.options.get,Ct={allow_html_data_urls:qe("allow_html_data_urls"),allow_script_urls:qe("allow_script_urls"),allow_svg_data_urls:qe("allow_svg_data_urls")},Ut=Te.href;return Ot(ie({},Te),{href:Wn.isDomSafe(Ut,"a",Ct)?Ut:""})},Ge=(Q,Te,qe)=>{const Ct=hi(Q,qe);Q.hasPlugin("rtc",!0)?Q.execCommand("createlink",!1,Bn(Ct)):Cr(Q,Te,Ct)},dt=Q=>{Q.hasPlugin("rtc",!0)?Q.execCommand("unlink"):us(Q)},tn=(Q,Te)=>{var qe;const Ct=Q.dom.select("img",Te)[0];if(Ct){const Ut=Q.dom.getParents(Ct,"a[href]",Te)[0];Ut&&((qe=Ut.parentNode)===null||qe===void 0||qe.insertBefore(Ct,Ut),Q.dom.remove(Ut))}},In=(Q,Te,qe)=>{var Ct;const Ut=Q.select("img",Te)[0];if(Ut){const jn=Q.create("a",qe);(Ct=Ut.parentNode)===null||Ct===void 0||Ct.insertBefore(jn,Ut),jn.appendChild(Ut)}},go=Q=>ot(Q,"items"),Ys=(Q,Te)=>Oe(Te,qe=>go(qe)?Ys(Q,qe.items):ge(qe.value===Q,qe)),Hr=(Q,Te,qe,Ct)=>{const Ut=Ct[Te],jn=Q.length>0;return Ut!==void 0?Ys(Ut,qe).map(Os=>({url:{value:Os.value,meta:{text:jn?Q:Os.text,attach:X}},text:jn?Q:Os.text})):le.none()},br=(Q,Te)=>Te==="link"?Q.link:Te==="anchor"?Q.anchor:le.none(),ke={init:(Q,Te)=>{const qe={text:Q.text,title:Q.title},Ct=vs=>{var Xs;return ge(qe.title.length<=0,le.from((Xs=vs.meta)===null||Xs===void 0?void 0:Xs.title).getOr(""))},Ut=vs=>{var Xs;return ge(qe.text.length<=0,le.from((Xs=vs.meta)===null||Xs===void 0?void 0:Xs.text).getOr(vs.value))},jn=vs=>{const Xs=Ut(vs.url),jo=Ct(vs.url);return Xs.isSome()||jo.isSome()?le.some(ie(ie({},Xs.map(fr=>({text:fr})).getOr({})),jo.map(fr=>({title:fr})).getOr({}))):le.none()},Os=(vs,Xs)=>{const jo=br(Te,Xs).getOr([]);return Hr(qe.text,Xs,jo,vs)};return{onChange:(vs,Xs)=>{const jo=Xs.name;return jo==="url"?jn(vs()):Re(["anchor","link"],jo)?Os(vs(),jo):((jo==="text"||jo==="title")&&(qe[jo]=vs()[jo]),le.none())}}},getDelta:Hr};var Ae=tinymce.util.Tools.resolve("tinymce.util.Delay");const ct=(Q,Te,qe)=>{const Ct=Q.selection.getRng();Ae.setEditorTimeout(Q,()=>{Q.windowManager.confirm(Te,Ut=>{Q.selection.setRng(Ct),qe(Ut)})})},xt=Q=>{const Te=Q.href;return Te.indexOf("@")>0&&Te.indexOf("/")===-1&&Te.indexOf("mailto:")===-1?le.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ct=>Ot(ie({},Ct),{href:"mailto:"+Te})}):le.none()},An=(Q,Te)=>qe=>{const Ct=qe.href;return Q===1&&!ls(Ct)||Q===0&&/^\s*www(\.|\d\.)/i.test(Ct)?le.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${Te}:// prefix?`,preprocess:jn=>Ot(ie({},jn),{href:Te+"://"+Ct})}):le.none()},_o={preprocess:(Q,Te)=>Oe([xt,An(he(Q),We(Q))],qe=>qe(Te)).fold(()=>Promise.resolve(Te),qe=>new Promise(Ct=>{ct(Q,qe.message,Ut=>{Ct(Ut?qe.preprocess(Te):Te)})}))},Tt={getAnchors:Q=>{const Te=Q.dom.select("a:not([href])"),qe=ae(Te,Ct=>{const Ut=Ct.name||Ct.id;return Ut?[{text:Ut,value:"#"+Ut}]:[]});return qe.length>0?le.some([{text:"None",value:""}].concat(qe)):le.none()}},Se={getClasses:Q=>{const Te=wt(Q);return Te.length>0?tt.sanitize(Te):le.none()}},Ee=Q=>{try{return le.some(JSON.parse(Q))}catch(Te){return le.none()}},nn={getLinks:Q=>{const Te=Ct=>Q.convertURL(Ct.value||Ct.url||"","href"),qe=qt(Q);return new Promise(Ct=>{p(qe)?fetch(qe).then(Ut=>Ut.ok?Ut.text().then(Ee):Promise.reject()).then(Ct,()=>Ct(le.none())):$(qe)?qe(Ut=>Ct(le.some(Ut))):Ct(le.from(qe))}).then(Ct=>Ct.bind(tt.sanitizeWith(Te)).map(Ut=>Ut.length>0?[{text:"None",value:""}].concat(Ut):Ut))}},Dn={getRels:(Q,Te)=>{const qe=Be(Q);if(qe.length>0){const Ct=ht(Te,"_blank"),Ut=Ze(Q)===!1,jn=Ms=>pt(tt.getValue(Ms),Ct);return(Ut?tt.sanitizeWith(jn):tt.sanitize)(qe)}return le.none()}},Mn=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],$n={getTargets:Q=>{const Te=yt(Q);return x(Te)?tt.sanitize(Te).orThunk(()=>le.some(Mn)):Te===!1?le.none():le.some(Mn)}},Vn=(Q,Te,qe)=>{const Ct=Q.getAttrib(Te,qe);return Ct!==null&&Ct.length>0?le.some(Ct):le.none()},Xo=(Q,Te)=>{const qe=Q.dom,Ut=$t(Q)?le.some(oo(Q.selection,Te)):le.none(),jn=Te.bind(jo=>le.from(qe.getAttrib(jo,"href"))),Os=Te.bind(jo=>le.from(qe.getAttrib(jo,"target"))),Ms=Te.bind(jo=>Vn(qe,jo,"rel")),vs=Te.bind(jo=>Vn(qe,jo,"class")),Xs=Te.bind(jo=>Vn(qe,jo,"title"));return{url:jn,text:Ut,title:Xs,target:Os,rel:Ms,linkClass:vs}},Ii={collect:(Q,Te)=>nn.getLinks(Q).then(qe=>{const Ct=Xo(Q,Te);return{anchor:Ct,catalogs:{targets:$n.getTargets(Q),rels:Dn.getRels(Q,Ct.target),classes:Se.getClasses(Q),anchor:Tt.getAnchors(Q),link:qe},optNode:Te,flags:{titleEnabled:ce(Q)}}})},Oa=(Q,Te)=>qe=>{const Ct=qe.getData();if(!Ct.url.value){dt(Q),qe.close();return}const Ut=Ms=>le.from(Ct[Ms]).filter(vs=>!ht(Te.anchor[Ms],vs)),jn={href:Ct.url.value,text:Ut("text"),target:Ut("target"),rel:Ut("rel"),class:Ut("linkClass"),title:Ut("title")},Os={href:Ct.url.value,attach:Ct.url.meta!==void 0&&Ct.url.meta.attach?Ct.url.meta.attach:X};_o.preprocess(Q,jn).then(Ms=>{Ge(Q,Os,Ms)}),qe.close()},Yl=Q=>{const Te=Wt(Q);return Ii.collect(Q,Te)},Po=(Q,Te)=>{const qe=Q.anchor,Ct=qe.url.getOr("");return{url:{value:Ct,meta:{original:{value:Ct}}},text:qe.text.getOr(""),title:qe.title.getOr(""),anchor:Ct,link:Ct,rel:qe.rel.getOr(""),target:qe.target.or(Te).getOr(""),linkClass:qe.linkClass.getOr("")}},Ho=(Q,Te,qe)=>{const Ct=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Ut=Q.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),jn=Q.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Os=le.from(Pe(qe)),Ms=Po(Q,Os),vs=Q.catalogs,Xs=ke.init(Ms,vs);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Ue([Ct,Ut,jn,ne([vs.anchor.map(tt.createUi("anchor","Anchors")),vs.rels.map(tt.createUi("rel","Rel")),vs.targets.map(tt.createUi("target","Open link in...")),vs.link.map(tt.createUi("link","Link list")),vs.classes.map(tt.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ms,onChange:(fr,{name:Ti})=>{Xs.onChange(fr.getData,{name:Ti}).each(Ru=>{fr.setData(Ru)})},onSubmit:Te}},ds=Q=>{Yl(Q).then(qe=>{const Ct=Oa(Q,qe);return Ho(qe,Ct,Q)}).then(qe=>{Q.windowManager.open(qe)})},ji=Q=>{Q.addCommand("mceLink",(Te,qe)=>{(qe==null?void 0:qe.dialog)===!0||!V(Q)?ds(Q):Q.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var Li=tinymce.util.Tools.resolve("tinymce.util.VK");const Mr=(Q,Te)=>{document.body.appendChild(Q),Q.dispatchEvent(Te),document.body.removeChild(Q)},ll=Q=>{const Te=document.createElement("a");Te.target="_blank",Te.href=Q,Te.rel="noreferrer noopener";const qe=document.createEvent("MouseEvents");qe.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Mr(Te,qe)},Ei=(Q,Te)=>Q.dom.getParent(Te,"a[href]"),Ec=Q=>Ei(Q,Q.selection.getStart()),bs=Q=>Q.altKey===!0&&Q.shiftKey===!1&&Q.ctrlKey===!1&&Q.metaKey===!1,ma=(Q,Te)=>{if(Te){const qe=Ye(Te);if(/^#/.test(qe)){const Ct=Q.dom.select(qe);Ct.length&&Q.selection.scrollIntoView(Ct[0],!0)}else ll(Te.href)}},Zi=Q=>()=>{Q.execCommand("mceLink",!1,{dialog:!0})},Za=Q=>()=>{ma(Q,Ec(Q))},oa=Q=>{Q.on("click",Te=>{const qe=Ei(Q,Te.target);qe&&Li.metaKeyPressed(Te)&&(Te.preventDefault(),ma(Q,qe))}),Q.on("keydown",Te=>{if(!Te.isDefaultPrevented()&&Te.keyCode===13&&bs(Te)){const qe=Ec(Q);qe&&(Te.preventDefault(),ma(Q,qe))}})},Da=(Q,Te)=>(Q.on("NodeChange",Te),()=>Q.off("NodeChange",Te)),mi=Q=>Te=>{const qe=()=>{Te.setActive(!Q.mode.isReadOnly()&&bn(Q,Q.selection.getNode())),Te.setEnabled(Q.selection.isEditable())};return qe(),Da(Q,qe)},Tc=Q=>Te=>{const qe=()=>{Te.setEnabled(Q.selection.isEditable())};return qe(),Da(Q,qe)},ga=Q=>(Q.selection.isCollapsed()?Qo(Q.dom.getParents(Q.selection.getStart())):ao(Q.selection.getRng())).length===1,Jc=Q=>Te=>{const qe=()=>Te.setEnabled(ga(Q));return qe(),Da(Q,qe)},pa=Q=>Te=>{const qe=jn=>Fo(jn)||cs(Q.selection.getRng()),Ct=Q.dom.getParents(Q.selection.getStart()),Ut=jn=>{Te.setEnabled(qe(jn)&&Q.selection.isEditable())};return Ut(Ct),Da(Q,jn=>Ut(jn.parents))},Xl=Q=>{Q.addShortcut("Meta+K","",()=>{Q.execCommand("mceLink")})},$i=Q=>{Q.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Zi(Q),onSetup:mi(Q)}),Q.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Za(Q),onSetup:Jc(Q)}),Q.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>dt(Q),onSetup:pa(Q)})},cl=Q=>{Q.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Za(Q),onSetup:Jc(Q)}),Q.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:Tc(Q),onAction:Zi(Q)}),Q.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>dt(Q),onSetup:pa(Q)})},Oc=Q=>{const Te="link unlink openlink",qe="link";Q.ui.registry.addContextMenu("link",{update:Ct=>Q.dom.isEditable(Ct)?Fo(Q.dom.getParents(Ct,"a"))?Te:qe:""})},Qc=Q=>{const Te=Ut=>{Ut.selection.collapse(!1)},qe=Ut=>{const jn=Q.selection.getNode();return Ut.setEnabled(bn(Q,jn)),X},Ct=Ut=>{const jn=Wt(Q),Os=$t(Q);if(jn.isNone()&&Os){const Ms=oo(Q.selection,jn);return ge(Ms.length===0,Ut)}else return le.none()};Q.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:mi(Q)},label:"Link",predicate:Ut=>at(Q)&&bn(Q,Ut),initValue:()=>Wt(Q).fold(J(""),Ye),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Ut=>{const jn=Q.selection.getNode();return Ut.setActive(bn(Q,jn)),mi(Q)(Ut)},onAction:Ut=>{const jn=Ut.getValue(),Os=Ct(jn);Ge(Q,{href:jn,attach:X},{href:jn,text:Os,title:le.none(),rel:le.none(),target:le.none(),class:le.none()}),Te(Q),Ut.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:qe,onAction:Ut=>{dt(Q),Ut.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:qe,onAction:Ut=>{Za(Q)(),Ut.hide()}}]})};var Ad=()=>{u.add("link",Q=>{Ke(Q),$i(Q),cl(Q),Oc(Q),Qc(Q),oa(Q),ji(Q),Xl(Q)})};Ad()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(_,F,q)=>{var we;return q(_,F.prototype)?!0:((we=_.constructor)===null||we===void 0?void 0:we.name)===F.name},i=_=>{const F=typeof _;return _===null?"null":F==="object"&&Array.isArray(_)?"array":F==="object"&&o(_,String,(q,we)=>we.isPrototypeOf(q))?"string":F},l=_=>F=>i(F)===_,d=_=>F=>typeof F===_,m=l("string"),p=l("object"),v=l("array"),x=d("boolean"),k=_=>_==null,T=_=>!k(_),R=d("function"),N=d("number"),$=()=>{},U=(_,F)=>q=>_(F(q)),X=_=>()=>_,J=(_,F)=>_===F;function G(_,...F){return(...q)=>{const we=F.concat(q);return _.apply(null,we)}}const le=_=>F=>!_(F),Z=X(!1);class be{constructor(F,q){this.tag=F,this.value=q}static some(F){return new be(!0,F)}static none(){return be.singletonNone}fold(F,q){return this.tag?q(this.value):F()}isSome(){return this.tag}isNone(){return!this.tag}map(F){return this.tag?be.some(F(this.value)):be.none()}bind(F){return this.tag?F(this.value):be.none()}exists(F){return this.tag&&F(this.value)}forall(F){return!this.tag||F(this.value)}filter(F){return!this.tag||F(this.value)?this:be.none()}getOr(F){return this.tag?this.value:F}or(F){return this.tag?this:F}getOrThunk(F){return this.tag?this.value:F()}orThunk(F){return this.tag?this:F()}getOrDie(F){if(this.tag)return this.value;throw new Error(F!=null?F:"Called getOrDie on None")}static from(F){return T(F)?be.some(F):be.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(F){this.tag&&F(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}be.singletonNone=new be(!1);const He=Array.prototype.slice,Re=Array.prototype.indexOf,K=Array.prototype.push,Ie=(_,F)=>Re.call(_,F),$e=(_,F)=>Ie(_,F)>-1,Ue=(_,F)=>{for(let q=0,we=_.length;q<we;q++){const De=_[q];if(F(De,q))return!0}return!1},ae=(_,F)=>{const q=_.length,we=new Array(q);for(let De=0;De<q;De++){const Ht=_[De];we[De]=F(Ht,De)}return we},Oe=(_,F)=>{for(let q=0,we=_.length;q<we;q++){const De=_[q];F(De,q)}},ht=(_,F)=>{const q=[];for(let we=0,De=_.length;we<De;we++){const Ht=_[we];F(Ht,we)&&q.push(Ht)}return q},ne=(_,F)=>{if(_.length===0)return[];{let q=F(_[0]);const we=[];let De=[];for(let Ht=0,Nn=_.length;Ht<Nn;Ht++){const vo=_[Ht],yo=F(vo);yo!==q&&(we.push(De),De=[]),q=yo,De.push(vo)}return De.length!==0&&we.push(De),we}},ge=(_,F,q)=>(Oe(_,(we,De)=>{q=F(q,we,De)}),q),O=(_,F,q)=>{for(let we=0,De=_.length;we<De;we++){const Ht=_[we];if(F(Ht,we))return be.some(Ht);if(q(Ht,we))break}return be.none()},Ke=(_,F)=>O(_,F,Z),he=_=>{const F=[];for(let q=0,we=_.length;q<we;++q){if(!v(_[q]))throw new Error("Arr.flatten item "+q+" was not an array, input: "+_);K.apply(F,_[q])}return F},at=(_,F)=>he(ae(_,F)),qt=_=>{const F=He.call(_,0);return F.reverse(),F},Pe=(_,F)=>F>=0&&F<_.length?be.some(_[F]):be.none(),We=_=>Pe(_,0),yt=_=>Pe(_,_.length-1),Be=(_,F)=>{const q=[],we=R(F)?De=>Ue(q,Ht=>F(Ht,De)):De=>$e(q,De);for(let De=0,Ht=_.length;De<Ht;De++){const Nn=_[De];we(Nn)||q.push(Nn)}return q},wt=(_,F,q=J)=>_.exists(we=>q(we,F)),ce=(_,F,q=J)=>Ze(_,F,q).getOr(_.isNone()&&F.isNone()),Ze=(_,F,q)=>_.isSome()&&F.isSome()?be.some(q(_.getOrDie(),F.getOrDie())):be.none(),V=8,kn=9,cn=11,no=1,Do=3,Cs=(_,F)=>{const we=(F||document).createElement("div");if(we.innerHTML=_,!we.hasChildNodes()||we.childNodes.length>1){const De="HTML does not have a single root node";throw new Error(De)}return tt(we.childNodes[0])},Je=(_,F)=>{const we=(F||document).createElement(_);return tt(we)},Bt=(_,F)=>{const we=(F||document).createTextNode(_);return tt(we)},tt=_=>{if(_==null)throw new Error("Node cannot be null or undefined");return{dom:_}},xe={fromHtml:Cs,fromTag:Je,fromText:Bt,fromDom:tt,fromPoint:(_,F,q)=>be.from(_.dom.elementFromPoint(F,q)).map(tt)},Ne=(_,F)=>{const q=_.dom;if(q.nodeType!==no)return!1;{const we=q;if(we.matches!==void 0)return we.matches(F);if(we.msMatchesSelector!==void 0)return we.msMatchesSelector(F);if(we.webkitMatchesSelector!==void 0)return we.webkitMatchesSelector(F);if(we.mozMatchesSelector!==void 0)return we.mozMatchesSelector(F);throw new Error("Browser lacks native selectors")}},Me=(_,F)=>_.dom===F.dom,kt=(_,F)=>{const q=_.dom,we=F.dom;return q===we?!1:q.contains(we)},ve=Ne,je=typeof window!="undefined"?window:Function("return this;")(),ot=(_,F)=>{let q=F!=null?F:je;for(let we=0;we<_.length&&q!==void 0&&q!==null;++we)q=q[_[we]];return q},en=(_,F)=>{const q=_.split(".");return ot(q,F)},Wn=(_,F)=>en(_,F),On=(_,F)=>{const q=Wn(_,F);if(q==null)throw new Error(_+" not available on this browser");return q},ho=Object.getPrototypeOf,Kn=_=>On("HTMLElement",_),ls=_=>{const F=en("ownerDocument.defaultView",_);return p(_)&&(Kn(F).prototype.isPrototypeOf(_)||/^HTML\w*Element$/.test(ho(_).constructor.name))},Ye=_=>_.dom.nodeName.toLowerCase(),pt=_=>_.dom.nodeType,Rt=_=>F=>pt(F)===_,Wt=_=>pt(_)===V||Ye(_)==="#comment",bn=_=>oo(_)&&ls(_.dom),oo=Rt(no),ao=Rt(Do),Qo=Rt(kn),Fo=Rt(cn),cs=_=>F=>oo(F)&&Ye(F)===_,$t=_=>xe.fromDom(_.dom.ownerDocument),xo=_=>Qo(_)?_:$t(_),Qs=_=>be.from(_.dom.parentNode).map(xe.fromDom),Sr=_=>be.from(_.dom.parentElement).map(xe.fromDom),Gr=_=>be.from(_.dom.nextSibling).map(xe.fromDom),pr=_=>ae(_.dom.childNodes,xe.fromDom),di=(_,F)=>{const q=_.dom.childNodes;return be.from(q[F]).map(xe.fromDom)},Cr=_=>di(_,0),fi=_=>di(_,_.dom.childNodes.length-1),us=_=>Fo(_)&&T(_.dom.host),hi=R(Element.prototype.attachShadow)&&R(Node.prototype.getRootNode)?_=>xe.fromDom(_.dom.getRootNode()):xo,Ge=_=>{const F=hi(_);return us(F)?be.some(F):be.none()},dt=_=>xe.fromDom(_.dom.host),tn=_=>{const F=ao(_)?_.dom.parentNode:_.dom;if(F==null||F.ownerDocument===null)return!1;const q=F.ownerDocument;return Ge(xe.fromDom(F)).fold(()=>q.body.contains(F),U(tn,dt))};var In=(_,F,q,we,De)=>_(q,we)?be.some(q):R(De)&&De(q)?be.none():F(q,we,De);const go=(_,F,q)=>{let we=_.dom;const De=R(q)?q:Z;for(;we.parentNode;){we=we.parentNode;const Ht=xe.fromDom(we);if(F(Ht))return be.some(Ht);if(De(Ht))break}return be.none()},Ys=(_,F,q)=>In((De,Ht)=>Ht(De),go,_,F,q),Hr=(_,F,q)=>go(_,we=>Ne(we,F),q),br=(_,F,q)=>In((De,Ht)=>Ne(De,Ht),Hr,_,F,q),_r=_=>br(_,"[contenteditable]"),ke=(_,F=!1)=>tn(_)?_.dom.isContentEditable:_r(_).fold(X(F),q=>Ae(q)==="true"),Ae=_=>_.dom.contentEditable,ct=(_,F)=>{Qs(_).each(we=>{we.dom.insertBefore(F.dom,_.dom)})},xt=(_,F)=>{Gr(_).fold(()=>{Qs(_).each(De=>{Pn(De,F)})},we=>{ct(we,F)})},An=(_,F)=>{Cr(_).fold(()=>{Pn(_,F)},we=>{_.dom.insertBefore(F.dom,we.dom)})},Pn=(_,F)=>{_.dom.appendChild(F.dom)},_o=(_,F)=>{Oe(F,q=>{ct(_,q)})},Ws=(_,F)=>{Oe(F,q=>{Pn(_,q)})},Tt=_=>{_.dom.textContent="",Oe(pr(_),F=>{Lo(F)})},Lo=_=>{const F=_.dom;F.parentNode!==null&&F.parentNode.removeChild(F)};var Se=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Ee=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Dt=tinymce.util.Tools.resolve("tinymce.util.VK");const nn=_=>ae(_,xe.fromDom),an=Object.keys,Dn=(_,F)=>{const q=an(_);for(let we=0,De=q.length;we<De;we++){const Ht=q[we],Nn=_[Ht];F(Nn,Ht)}},Mn=_=>(F,q)=>{_[q]=F},En=(_,F,q,we)=>{Dn(_,(De,Ht)=>{(F(De,Ht)?q:we)(De,Ht)})},$n=(_,F)=>{const q={};return En(_,F,Mn(q),$),q},Vn=(_,F,q)=>{if(m(q)||x(q)||N(q))_.setAttribute(F,q+"");else throw new Error("Attribute value was not simple")},Xo=(_,F)=>{const q=_.dom;Dn(F,(we,De)=>{Vn(q,De,we)})},Ts=_=>ge(_.dom.attributes,(F,q)=>(F[q.name]=q.value,F),{}),Ii=(_,F)=>xe.fromDom(_.dom.cloneNode(F)),Oa=_=>Ii(_,!0),Yl=(_,F)=>{const q=xe.fromTag(F),we=Ts(_);return Xo(q,we),q},Po=(_,F)=>{const q=Yl(_,F);xt(_,q);const we=pr(_);return Ws(q,we),Lo(_),q};var Ho=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ds=tinymce.util.Tools.resolve("tinymce.util.Tools");const ji=_=>F=>T(F)&&F.nodeName.toLowerCase()===_,Li=_=>F=>T(F)&&_.test(F.nodeName),Mr=_=>T(_)&&_.nodeType===3,ll=_=>T(_)&&_.nodeType===1,Ei=Li(/^(OL|UL|DL)$/),Ec=Li(/^(OL|UL)$/),bs=ji("ol"),ma=Li(/^(LI|DT|DD)$/),Zi=Li(/^(DT|DD)$/),Za=Li(/^(TH|TD)$/),oa=ji("br"),Da=_=>{var F;return((F=_.parentNode)===null||F===void 0?void 0:F.firstChild)===_},mi=(_,F)=>T(F)&&F.nodeName in _.schema.getTextBlockElements(),Tc=(_,F)=>T(_)&&_.nodeName in F,ga=(_,F)=>T(F)&&F.nodeName in _.schema.getVoidElements(),Jc=(_,F)=>oa(F)?_.isBlock(F.nextSibling)&&!oa(F.previousSibling):!1,pa=(_,F,q)=>{const we=_.isEmpty(F);return q&&_.select("span[data-mce-type=bookmark]",F).length>0?!1:we},Xl=(_,F)=>_.isChildOf(F,_.getRoot()),$i=_=>F=>F.options.get(_),cl=_=>{const F=_.options.register;F("lists_indent_on_tab",{processor:"boolean",default:!0})},Oc=$i("lists_indent_on_tab"),Qc=$i("forced_root_block"),Ad=$i("forced_root_block_attrs"),Q=(_,F)=>{const q=_.dom,we=_.schema.getBlockElements(),De=q.createFragment(),Ht=Qc(_),Nn=Ad(_);let vo,yo,Qn=!1;for(yo=q.create(Ht,Nn),Tc(F.firstChild,we)||De.appendChild(yo);vo=F.firstChild;){const Er=vo.nodeName;!Qn&&(Er!=="SPAN"||vo.getAttribute("data-mce-type")!=="bookmark")&&(Qn=!0),Tc(vo,we)?(De.appendChild(vo),yo=null):(yo||(yo=q.create(Ht,Nn),De.appendChild(yo)),yo.appendChild(vo))}return!Qn&&yo&&yo.appendChild(q.create("br",{"data-mce-bogus":"1"})),De},Te=Ho.DOM,qe=(_,F,q)=>{const we=Qn=>{const Er=Qn.parentNode;Er&&ds.each(De,Gi=>{Er.insertBefore(Gi,q.parentNode)}),Te.remove(Qn)},De=Te.select('span[data-mce-type="bookmark"]',F),Ht=Q(_,q),Nn=Te.createRng();Nn.setStartAfter(q),Nn.setEndAfter(F);const vo=Nn.extractContents();for(let Qn=vo.firstChild;Qn;Qn=Qn.firstChild)if(Qn.nodeName==="LI"&&_.dom.isEmpty(Qn)){Te.remove(Qn);break}_.dom.isEmpty(vo)||Te.insertAfter(vo,F),Te.insertAfter(Ht,F);const yo=q.parentElement;yo&&pa(_.dom,yo)&&we(yo),Te.remove(q),pa(_.dom,F)&&Te.remove(F)},Ct=cs("dd"),Ut=cs("dt"),jn=(_,F)=>{Ct(F)?Po(F,"dt"):Ut(F)&&Sr(F).each(q=>qe(_,q.dom,F.dom))},Os=_=>{Ut(_)&&Po(_,"dd")},Ms=(_,F,q)=>{F==="Indent"?Oe(q,Os):Oe(q,we=>jn(_,we))},vs=(_,F)=>{if(Mr(_))return{container:_,offset:F};const q=Se.getNode(_,F);return Mr(q)?{container:q,offset:F>=_.childNodes.length?q.data.length:0}:q.previousSibling&&Mr(q.previousSibling)?{container:q.previousSibling,offset:q.previousSibling.data.length}:q.nextSibling&&Mr(q.nextSibling)?{container:q.nextSibling,offset:0}:{container:_,offset:F}},Xs=_=>{const F=_.cloneRange(),q=vs(_.startContainer,_.startOffset);F.setStart(q.container,q.offset);const we=vs(_.endContainer,_.endOffset);return F.setEnd(we.container,we.offset),F},jo=["OL","UL","DL"],fr=jo.join(","),Ti=(_,F)=>{const q=F||_.selection.getStart(!0);return _.dom.getParent(q,fr,un(_,q))},Ru=(_,F)=>T(_)&&F.length===1&&F[0]===_,sn=_=>ht(_.querySelectorAll(fr),Ei),Pu=_=>{const F=Ti(_),q=_.selection.getSelectedBlocks();return Ru(F,q)?sn(F):ht(q,we=>Ei(we)&&F!==we)},Vr=(_,F)=>{const q=ds.map(F,we=>{const De=_.dom.getParent(we,"li,dd,dt",un(_,we));return De||we});return Be(q)},z=_=>{const F=_.selection.getSelectedBlocks();return ht(Vr(_,F),ma)},se=_=>ht(z(_),Zi),pe=(_,F)=>{const q=_.dom.getParents(F,"TD,TH");return q.length>0?q[0]:_.getBody()},lt=(_,F)=>!Ei(F)&&!ma(F)&&Ue(jo,q=>_.isValidChild(F.nodeName,q)),un=(_,F)=>{const q=_.dom.getParents(F,_.dom.isBlock);return Ke(q,De=>lt(_.schema,De)).getOr(_.getBody())},Uo=_=>Qs(_).exists(F=>ma(F.dom)&&Cr(F).exists(q=>!Ei(q.dom))&&fi(F).exists(q=>!Ei(q.dom))),xn=(_,F)=>{const q=_.dom.getParents(F,"ol,ul",un(_,F));return yt(q)},si=_=>{const F=xn(_,_.selection.getStart()),q=ht(_.selection.getSelectedBlocks(),Ec);return F.toArray().concat(q)},Lt=_=>{const F=_.selection.getStart();return _.dom.getParents(F,"ol,ul",un(_,F))},er=_=>{const F=si(_),q=Lt(_);return Ke(q,we=>Uo(xe.fromDom(we))).fold(()=>ba(_,F),we=>[we])},ba=(_,F)=>{const q=ae(F,we=>xn(_,we).getOr(we));return Be(q)},js=_=>/\btox\-/.test(_.className),Kr=(_,F)=>O(_,Ei,Za).exists(q=>q.nodeName===F&&!js(q)),Ed=(_,F)=>F!==null&&!_.dom.isEditable(F),es=_=>{const F=Ti(_);return Ed(_,F)},ul=(_,F)=>{const q=_.dom.getParent(F,"ol,ul,dl");return Ed(_,q)},qa=(_,F)=>{const q=_.selection.getNode();return F({parents:_.dom.getParents(q),element:q}),_.on("NodeChange",F),()=>_.off("NodeChange",F)},Nu=(_,F)=>{const we=document.createDocumentFragment();return Oe(_,De=>{we.appendChild(De.dom)}),xe.fromDom(we)},ir=(_,F,q)=>_.dispatch("ListMutation",{action:F,element:q}),Xg=(_=>F=>F.replace(_,""))(/^\s+|\s+$/g),Jg=_=>_.length>0,hr=_=>!Jg(_),Em=_=>_.style!==void 0&&R(_.style.getPropertyValue),Td=(_,F,q)=>{if(!m(q))throw new Error("CSS value must be a string: "+q);Em(_)&&_.style.setProperty(F,q)},Ga=(_,F,q)=>{const we=_.dom;Td(we,F,q)},dl=_=>ve(_,"OL,UL"),kf=_=>ve(_,"LI"),ts=_=>Cr(_).exists(dl),ee=_=>fi(_).exists(dl),me=_=>"listAttributes"in _,st=_=>"isComment"in _,At=_=>"isFragment"in _,gn=_=>_.depth>0,Ao=_=>_.isSelected,kr=_=>{const F=pr(_),q=ee(_)?F.slice(0,-1):F;return ae(q,Oa)},va=(_,F,q)=>Qs(_).filter(oo).map(we=>({depth:F,dirty:!1,isSelected:q,content:kr(_),itemAttributes:Ts(_),listAttributes:Ts(we),listType:Ye(we),isInPreviousLi:!1})),zr=(_,F)=>{Pn(_.item,F.list)},sa=_=>{for(let F=1;F<_.length;F++)zr(_[F-1],_[F])},Js=(_,F)=>{Ze(yt(_),We(F),zr)},Ur=(_,F)=>{const q={list:xe.fromTag(F,_),item:xe.fromTag("li",_)};return Pn(q.list,q.item),q},gi=(_,F,q)=>{const we=[];for(let De=0;De<q;De++)we.push(Ur(_,me(F)?F.listType:F.parentListType));return we},_a=(_,F)=>{for(let q=0;q<_.length-1;q++)Ga(_[q].item,"list-style-type","none");yt(_).each(q=>{me(F)&&(Xo(q.list,F.listAttributes),Xo(q.item,F.itemAttributes)),Ws(q.item,F.content)})},Od=(_,F)=>{Ye(_.list)!==F.listType&&(_.list=Po(_.list,F.listType)),Xo(_.list,F.listAttributes)},Ir=(_,F,q)=>{const we=xe.fromTag("li",_);return Xo(we,F),Ws(we,q),we},Yr=(_,F)=>{Pn(_.list,F),_.item=F},Jl=(_,F,q)=>{const we=F.slice(0,q.depth);return yt(we).each(De=>{if(me(q)){const Ht=Ir(_,q.itemAttributes,q.content);Yr(De,Ht),Od(De,q)}else if(At(q))Ws(De.item,q.content);else{const Ht=xe.fromHtml(`<!--${q.content}-->`);Pn(De.list,Ht)}}),we},Dd=(_,F,q)=>{const we=gi(_,q,q.depth-F.length);return sa(we),_a(we,q),Js(F,we),F.concat(we)},Ey=(_,F)=>{let q=be.none();const we=ge(F,(De,Ht,Nn)=>st(Ht)?Nn===0?(q=be.some(Ht),De):Jl(_,De,Ht):Ht.depth>De.length?Dd(_,De,Ht):Jl(_,De,Ht),[]);return q.each(De=>{const Ht=xe.fromHtml(`<!--${De.content}-->`);We(we).each(Nn=>{An(Nn.list,Ht)})}),We(we).map(De=>De.list)},Ty=(_,F)=>{switch(_){case"Indent":F.depth++;break;case"Outdent":F.depth--;break;case"Flatten":F.depth=0}F.dirty=!0},yh=(_,F)=>{me(_)&&me(F)&&(_.listType=F.listType,_.listAttributes=ie({},F.listAttributes))},c0=_=>{_.listAttributes=$n(_.listAttributes,(F,q)=>q!=="start")},u0=(_,F)=>{const q=_[F].depth,we=Ht=>Ht.depth===q&&!Ht.dirty,De=Ht=>Ht.depth<q;return O(qt(_.slice(0,F)),we,De).orThunk(()=>O(_.slice(F+1),we,De))},Qg=_=>(Oe(_,(F,q)=>{u0(_,q).fold(()=>{F.dirty&&me(F)&&c0(F)},we=>yh(F,we))}),_),Oy=_=>{let F=_;return{get:()=>F,set:De=>{F=De}}},Af=(_,F,q,we)=>{var De;if(Wt(we))return[{depth:_+1,content:(De=we.dom.nodeValue)!==null&&De!==void 0?De:"",dirty:!1,isSelected:!1,isComment:!0}];F.each(vo=>{Me(vo.start,we)&&q.set(!0)});const Ht=va(we,_,q.get());F.each(vo=>{Me(vo.end,we)&&q.set(!1)});const Nn=fi(we).filter(dl).map(vo=>Fu(_,F,q,vo)).getOr([]);return Ht.toArray().concat(Nn)},d0=(_,F,q,we)=>Cr(we).filter(dl).fold(()=>Af(_,F,q,we),De=>{const Ht=ge(pr(we),(Nn,vo,yo)=>{if(yo===0)return Nn;if(kf(vo))return Nn.concat(Af(_,F,q,vo));{const Qn={isFragment:!0,depth:_,content:[vo],isSelected:!1,dirty:!1,parentListType:Ye(De)};return Nn.concat(Qn)}},[]);return Fu(_,F,q,De).concat(Ht)}),Fu=(_,F,q,we)=>at(pr(we),De=>{const Ht=dl(De)?Fu:d0,Nn=_+1;return Ht(Nn,F,q,De)}),Dy=(_,F)=>{const q=Oy(!1),we=0;return ae(_,De=>({sourceList:De,entries:Fu(we,F,q,De)}))},ep=(_,F)=>{const q=Qg(F);return ae(q,we=>{const De=st(we)?Nu([xe.fromHtml(`<!--${we.content}-->`)]):Nu(we.content);return xe.fromDom(Q(_,De.dom))})},_y=(_,F)=>{const q=Qg(F);return Ey(_.contentDocument,q).toArray()},My=(_,F)=>at(ne(F,gn),q=>We(q).exists(gn)?_y(_,q):ep(_,q)),Ry=(_,F)=>{Oe(ht(_,Ao),q=>Ty(F,q))},wh=_=>{const F=ae(z(_),xe.fromDom);return Ze(Ke(F,le(ts)),Ke(qt(F),le(ts)),(q,we)=>({start:q,end:we}))},A2=(_,F,q)=>{const we=Dy(F,wh(_));Oe(we,De=>{Ry(De.entries,q);const Ht=My(_,De.entries);Oe(Ht,Nn=>{ir(_,q==="Indent"?"IndentList":"OutdentList",Nn.dom)}),_o(De.sourceList,Ht),Lo(De.sourceList)})},ye=(_,F)=>{const q=nn(er(_)),we=nn(se(_));let De=!1;if(q.length||we.length){const Ht=_.selection.getBookmark();A2(_,q,F),Ms(_,F,we),_.selection.moveToBookmark(Ht),_.selection.setRng(Xs(_.selection.getRng())),_.nodeChanged(),De=!0}return De},tp=(_,F)=>!es(_)&&ye(_,F),Ol=_=>tp(_,"Indent"),Tm=_=>tp(_,"Outdent"),f0=_=>tp(_,"Flatten"),E2="\uFEFF",ys=_=>_===E2,Iu=(_,F,q)=>go(_,F,q).isSome(),eu=(_,F)=>Iu(_,G(Me,F));var Lu=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Ef=Ho.DOM,tu=_=>{const F={},q=we=>{let De=_[we?"startContainer":"endContainer"],Ht=_[we?"startOffset":"endOffset"];if(ll(De)){const Nn=Ef.create("span",{"data-mce-type":"bookmark"});De.hasChildNodes()?(Ht=Math.min(Ht,De.childNodes.length-1),we?De.insertBefore(Nn,De.childNodes[Ht]):Ef.insertAfter(Nn,De.childNodes[Ht])):De.appendChild(Nn),De=Nn,Ht=0}F[we?"startContainer":"endContainer"]=De,F[we?"startOffset":"endOffset"]=Ht};return q(!0),_.collapsed||q(),F},ra=_=>{const F=we=>{const De=vo=>{var yo;let Qn=(yo=vo.parentNode)===null||yo===void 0?void 0:yo.firstChild,Er=0;for(;Qn;){if(Qn===vo)return Er;(!ll(Qn)||Qn.getAttribute("data-mce-type")!=="bookmark")&&Er++,Qn=Qn.nextSibling}return-1};let Ht=_[we?"startContainer":"endContainer"],Nn=_[we?"startOffset":"endOffset"];if(Ht){if(ll(Ht)&&Ht.parentNode){const vo=Ht;Nn=De(Ht),Ht=Ht.parentNode,Ef.remove(vo),!Ht.hasChildNodes()&&Ef.isBlock(Ht)&&Ht.appendChild(Ef.create("br"))}_[we?"startContainer":"endContainer"]=Ht,_[we?"startOffset":"endOffset"]=Nn}};F(!0),F();const q=Ef.createRng();return q.setStart(_.startContainer,_.startOffset),_.endContainer&&q.setEnd(_.endContainer,_.endOffset),Xs(q)},$u=_=>{switch(_){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Py=(_,F,q)=>{const we=q["list-style-type"]?q["list-style-type"]:null;_.setStyle(F,"list-style-type",we)},Ny=(_,F)=>{ds.each(F,(q,we)=>{_.setAttribute(we,q)})},Dc=(_,F,q)=>{Ny(F,q["list-attributes"]),ds.each(_.select("li",F),we=>{Ny(we,q["list-item-attributes"])})},nu=(_,F,q)=>{Py(_,F,q),Dc(_,F,q)},By=(_,F,q)=>{ds.each(q,we=>_.setStyle(F,we,""))},Ma=(_,F)=>T(F)&&!Tc(F,_.schema.getBlockElements()),pi=(_,F,q,we)=>{let De=F[q?"startContainer":"endContainer"];const Ht=F[q?"startOffset":"endOffset"];ll(De)&&(De=De.childNodes[Math.min(Ht,De.childNodes.length-1)]||De),!q&&oa(De.nextSibling)&&(De=De.nextSibling);const Nn=yo=>{for(;!_.dom.isBlock(yo)&&yo.parentNode&&we!==yo;)yo=yo.parentNode;return yo},vo=(yo,Qn)=>{var Er;const Gi=new Ee(yo,Nn(yo)),ec=Qn?"next":"prev";let Rd;for(;Rd=Gi[ec]();)if(!(ga(_,Rd)||ys(Rd.textContent)||((Er=Rd.textContent)===null||Er===void 0?void 0:Er.length)===0))return be.some(Rd);return be.none()};if(q&&Mr(De))if(ys(De.textContent))De=vo(De,!1).getOr(De);else for(De.parentNode!==null&&Ma(_,De.parentNode)&&(De=De.parentNode);De.previousSibling!==null&&(Ma(_,De.previousSibling)||Mr(De.previousSibling));)De=De.previousSibling;if(!q&&Mr(De))if(ys(De.textContent))De=vo(De,!0).getOr(De);else for(De.parentNode!==null&&Ma(_,De.parentNode)&&(De=De.parentNode);De.nextSibling!==null&&(Ma(_,De.nextSibling)||Mr(De.nextSibling));)De=De.nextSibling;for(;De.parentNode!==we;){const yo=De.parentNode;if(mi(_,De)||/^(TD|TH)$/.test(yo.nodeName))return De;De=yo}return De},Tf=(_,F,q)=>{const we=[],De=_.dom,Ht=pi(_,F,!0,q),Nn=pi(_,F,!1,q);let vo;const yo=[];for(let Qn=Ht;Qn&&(yo.push(Qn),Qn!==Nn);Qn=Qn.nextSibling);return ds.each(yo,Qn=>{var Er;if(mi(_,Qn)){we.push(Qn),vo=null;return}if(De.isBlock(Qn)||oa(Qn)){oa(Qn)&&De.remove(Qn),vo=null;return}const Gi=Qn.nextSibling;if(Lu.isBookmarkNode(Qn)&&(Ei(Gi)||mi(_,Gi)||!Gi&&Qn.parentNode===q)){vo=null;return}vo||(vo=De.create("p"),(Er=Qn.parentNode)===null||Er===void 0||Er.insertBefore(vo,Qn),we.push(vo)),vo.appendChild(Qn)}),we},Om=(_,F,q)=>{const we=_.getStyle(F,"list-style-type");let De=q?q["list-style-type"]:"";return De=De===null?"":De,we===De},_c=(_,F)=>{const q=_.selection.getStart(!0),we=pi(_,F,!0,_.getBody());return eu(xe.fromDom(we),xe.fromDom(F.commonAncestorContainer))?F.commonAncestorContainer:q},Ra=(_,F,q)=>{const we=_.selection.getRng();let De="LI";const Ht=un(_,_c(_,we)),Nn=_.dom;if(Nn.getContentEditable(_.selection.getNode())==="false")return;F=F.toUpperCase(),F==="DL"&&(De="DT");const vo=tu(we),yo=ht(Tf(_,we,Ht),_.dom.isEditable);ds.each(yo,Qn=>{let Er;const Gi=Qn.previousSibling,ec=Qn.parentNode;ma(ec)||(Gi&&Ei(Gi)&&Gi.nodeName===F&&Om(Nn,Gi,q)?(Er=Gi,Qn=Nn.rename(Qn,De),Gi.appendChild(Qn)):(Er=Nn.create(F),ec.insertBefore(Er,Qn),Er.appendChild(Qn),Qn=Nn.rename(Qn,De)),By(Nn,Qn,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),nu(Nn,Er,q),Dm(_.dom,Er))}),_.selection.setRng(ra(vo))},Fy=(_,F)=>Ei(_)&&_.nodeName===(F==null?void 0:F.nodeName),T2=(_,F,q)=>{const we=_.getStyle(F,"list-style-type",!0),De=_.getStyle(q,"list-style-type",!0);return we===De},np=(_,F)=>_.className===F.className,op=(_,F,q)=>Fy(F,q)&&T2(_,F,q)&&np(F,q),Dm=(_,F)=>{let q,we=F.nextSibling;if(op(_,F,we)){const De=we;for(;q=De.firstChild;)F.appendChild(q);_.remove(De)}if(we=F.previousSibling,op(_,F,we)){const De=we;for(;q=De.lastChild;)F.insertBefore(q,F.firstChild);_.remove(De)}},Hu=(_,F,q,we)=>{if(F.nodeName!==q){const De=_.dom.rename(F,q);nu(_.dom,De,we),ir(_,$u(q),De)}else nu(_.dom,F,we),ir(_,$u(q),F)},h0=(_,F,q,we)=>{if(F.classList.forEach((De,Ht,Nn)=>{De.startsWith("tox-")&&(Nn.remove(De),Nn.length===0&&F.removeAttribute("class"))}),F.nodeName!==q){const De=_.dom.rename(F,q);nu(_.dom,De,we),ir(_,$u(q),De)}else nu(_.dom,F,we),ir(_,$u(q),F)},pM=(_,F,q,we,De)=>{const Ht=Ei(F);if(Ht&&F.nodeName===we&&!O2(De)&&!js(F))f0(_);else{Ra(_,we,De);const Nn=tu(_.selection.getRng()),vo=Ht?[F,...q]:q,yo=Ht&&js(F)?h0:Hu;ds.each(vo,Qn=>{yo(_,Qn,we,De)}),_.selection.setRng(ra(Nn))}},O2=_=>"list-style-type"in _,D2=(_,F,q,we)=>{if(F!==_.getBody())if(F)if(F.nodeName===q&&!O2(we)&&!js(F))f0(_);else{const De=tu(_.selection.getRng());js(F)&&F.classList.forEach((Nn,vo,yo)=>{Nn.startsWith("tox-")&&(yo.remove(Nn),yo.length===0&&F.removeAttribute("class"))}),nu(_.dom,F,we);const Ht=_.dom.rename(F,q);Dm(_.dom,Ht),_.selection.setRng(ra(De)),Ra(_,q,we),ir(_,$u(q),Ht)}else Ra(_,q,we),ir(_,$u(q),F)},xh=(_,F,q)=>{const we=Ti(_);if(ul(_,we))return;const De=Pu(_),Ht=p(q)?q:{};De.length>0?pM(_,we,De,F,Ht):D2(_,we,F,Ht)},Iy=Ho.DOM,Sh=(_,F)=>{const q=F.parentElement;if(q&&q.nodeName==="LI"&&q.firstChild===F){const we=q.previousSibling;we&&we.nodeName==="LI"?(we.appendChild(F),pa(_,q)&&Iy.remove(q)):Iy.setStyle(q,"listStyleType","none")}if(Ei(q)){const we=q.previousSibling;we&&we.nodeName==="LI"&&we.appendChild(F)}},Xr=(_,F)=>{const q=ds.grep(_.select("ol,ul",F));ds.each(q,we=>{Sh(_,we)})},Ar=(_,F,q,we)=>{let De=F.startContainer;const Ht=F.startOffset;if(Mr(De)&&(q?Ht<De.data.length:Ht>0))return De;const Nn=_.schema.getNonEmptyElements();ll(De)&&(De=Se.getNode(De,Ht));const vo=new Ee(De,we);q&&Jc(_.dom,De)&&vo.next();const yo=q?vo.next.bind(vo):vo.prev2.bind(vo);for(;De=yo();)if(De.nodeName==="LI"&&!De.hasChildNodes()||Nn[De.nodeName]||Mr(De)&&De.data.length>0)return De;return null},fl=(_,F)=>{const q=F.childNodes;return q.length===1&&!Ei(q[0])&&_.isBlock(q[0])},m0=_=>be.from(_).map(xe.fromDom).filter(bn).exists(F=>ke(F)&&!$e(["details"],Ye(F))),_2=(_,F)=>{fl(_,F)&&m0(F.firstChild)&&_.remove(F.firstChild,!0)},qi=(_,F,q)=>{let we;const De=fl(_,q)?q.firstChild:q;if(_2(_,F),!pa(_,F,!0))for(;we=F.firstChild;)De.appendChild(we)},Of=(_,F,q)=>{let we;const De=F.parentNode;if(!Xl(_,F)||!Xl(_,q))return;Ei(q.lastChild)&&(we=q.lastChild),De===q.lastChild&&oa(De.previousSibling)&&_.remove(De.previousSibling);const Ht=q.lastChild;Ht&&oa(Ht)&&F.hasChildNodes()&&_.remove(Ht),pa(_,q,!0)&&Tt(xe.fromDom(q)),qi(_,F,q),we&&q.appendChild(we);const vo=kt(xe.fromDom(q),xe.fromDom(F))?_.getParents(F,Ei,q):[];_.remove(F),Oe(vo,yo=>{pa(_,yo)&&yo!==_.getRoot()&&_.remove(yo)})},Ch=(_,F,q)=>{Tt(xe.fromDom(q)),Of(_.dom,F,q),_.selection.setCursorLocation(q,0)},_d=(_,F,q,we)=>{const De=_.dom;if(De.isEmpty(we))Ch(_,q,we);else{const Ht=tu(F);Of(De,q,we),_.selection.setRng(ra(Ht))}},bM=(_,F,q,we)=>{const De=tu(F);Of(_.dom,q,we);const Ht=ra(De);_.selection.setRng(Ht)},Eo=(_,F)=>{const q=_.dom,we=_.selection,De=we.getStart(),Ht=pe(_,De),Nn=q.getParent(we.getStart(),"LI",Ht);if(Nn){const vo=Nn.parentElement;if(vo===_.getBody()&&pa(q,vo))return!0;const yo=Xs(we.getRng()),Qn=q.getParent(Ar(_,yo,F,Ht),"LI",Ht),Er=Qn&&(F?q.isChildOf(Nn,Qn):q.isChildOf(Qn,Nn));if(Qn&&Qn!==Nn&&!Er)return _.undoManager.transact(()=>{F?_d(_,yo,Qn,Nn):Da(Nn)?Tm(_):bM(_,yo,Nn,Qn)}),!0;if(Er&&!F&&Qn!==Nn)return _.undoManager.transact(()=>{if(yo.commonAncestorContainer.parentElement){const Gi=tu(yo),ec=yo.commonAncestorContainer.parentElement;qi(q,yo.commonAncestorContainer.parentElement,Qn),ec.remove();const Rd=ra(Gi);_.selection.setRng(Rd)}}),!0;if(!Qn&&!F&&yo.startOffset===0&&yo.endOffset===0)return _.undoManager.transact(()=>{f0(_)}),!0}return!1},Dl=(_,F,q)=>{const we=_.getParent(F.parentNode,_.isBlock,q);_.remove(F),we&&_.isEmpty(we)&&_.remove(we)},Df=(_,F)=>{const q=_.dom,we=_.selection.getStart(),De=pe(_,we),Ht=q.getParent(we,q.isBlock,De);if(Ht&&q.isEmpty(Ht)){const Nn=Xs(_.selection.getRng()),vo=q.getParent(Ar(_,Nn,F,De),"LI",De);if(vo){const yo=ec=>$e(["td","th","caption"],Ye(ec)),Qn=ec=>ec.dom===De,Er=Ys(xe.fromDom(vo),yo,Qn),Gi=Ys(xe.fromDom(Nn.startContainer),yo,Qn);return ce(Er,Gi,Me)?(_.undoManager.transact(()=>{const ec=vo.parentNode;Dl(q,Ht,De),Dm(q,ec),_.selection.select(vo,!0),_.selection.collapse(F)}),!0):!1}}return!1},Ly=(_,F)=>Eo(_,F)||Df(_,F),$y=_=>{const F=_.selection.getStart(),q=pe(_,F);return _.dom.getParent(F,"LI,DT,DD",q)||z(_).length>0},Hy=_=>$y(_)?(_.undoManager.transact(()=>{_.execCommand("Delete"),Xr(_.dom,_.getBody())}),!0):!1,kh=(_,F)=>{const q=_.selection;return!ul(_,q.getNode())&&(q.isCollapsed()?Ly(_,F):Hy(_))},ou=_=>{_.on("ExecCommand",F=>{const q=F.command.toLowerCase();(q==="delete"||q==="forwarddelete")&&$y(_)&&Xr(_.dom,_.getBody())}),_.on("keydown",F=>{F.keyCode===Dt.BACKSPACE?kh(_,!1)&&F.preventDefault():F.keyCode===Dt.DELETE&&kh(_,!0)&&F.preventDefault()})},g0=_=>({backspaceDelete:F=>{kh(_,F)}}),_m=(_,F)=>{const q=Ti(_);q===null||ul(_,q)||_.undoManager.transact(()=>{p(F.styles)&&_.dom.setStyles(q,F.styles),p(F.attrs)&&Dn(F.attrs,(we,De)=>_.dom.setAttrib(q,De,we))})},p0=_=>{const F=qt(Xg(_).split("")),q=ae(F,(we,De)=>{const Ht=we.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,De)*Ht});return ge(q,(we,De)=>we+De,0)},b0=_=>{if(_--,_<0)return"";{const F=_%26,q=Math.floor(_/26),we=b0(q),De=String.fromCharCode(65+F);return we+De}},Wr=_=>/^[A-Z]+$/.test(_),Pa=_=>/^[a-z]+$/.test(_),Vu=_=>/^[0-9]+$/.test(_),Mm=_=>Vu(_)?2:Wr(_)?0:Pa(_)?1:hr(_)?3:4,Jr=_=>{switch(Mm(_)){case 2:return be.some({listStyleType:be.none(),start:_});case 0:return be.some({listStyleType:be.some("upper-alpha"),start:p0(_).toString()});case 1:return be.some({listStyleType:be.some("lower-alpha"),start:p0(_).toString()});case 3:return be.some({listStyleType:be.none(),start:""});case 4:return be.none()}},Vy=_=>{const F=parseInt(_.start,10);return wt(_.listStyleType,"upper-alpha")?b0(F):wt(_.listStyleType,"lower-alpha")?b0(F).toLowerCase():_.start},zy=_=>{const F=Ti(_);!bs(F)||ul(_,F)||_.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Vy({start:_.dom.getAttrib(F,"start","1"),listStyleType:be.from(_.dom.getStyle(F,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:q=>{const we=q.getData();Jr(we.start).each(De=>{_.execCommand("mceListUpdate",!1,{attrs:{start:De.start==="1"?"":De.start},styles:{"list-style-type":De.listStyleType.getOr("")}})}),q.close()}})},Ls=(_,F)=>()=>{const q=Ti(_);return T(q)&&q.nodeName===F},Md=_=>{_.addCommand("mceListProps",()=>{zy(_)})},ks=_=>{_.on("BeforeExecCommand",F=>{const q=F.command.toLowerCase();q==="indent"?Ol(_):q==="outdent"&&Tm(_)}),_.addCommand("InsertUnorderedList",(F,q)=>{xh(_,"UL",q)}),_.addCommand("InsertOrderedList",(F,q)=>{xh(_,"OL",q)}),_.addCommand("InsertDefinitionList",(F,q)=>{xh(_,"DL",q)}),_.addCommand("RemoveList",()=>{f0(_)}),Md(_),_.addCommand("mceListUpdate",(F,q)=>{p(q)&&_m(_,q)}),_.addQueryStateHandler("InsertUnorderedList",Ls(_,"UL")),_.addQueryStateHandler("InsertOrderedList",Ls(_,"OL")),_.addQueryStateHandler("InsertDefinitionList",Ls(_,"DL"))};var Ql=tinymce.util.Tools.resolve("tinymce.html.Node");const Rm=_=>_.type===3,Ah=_=>_.length===0,sp=_=>{const F=(De,Ht)=>{const Nn=Ql.create("li");Oe(De,vo=>Nn.append(vo)),Ht?_.insert(Nn,Ht,!0):_.append(Nn)},q=(De,Ht)=>Rm(Ht)?[...De,Ht]:!Ah(De)&&!Rm(Ht)?(F(De,Ht),[]):De,we=ge(_.children(),q,[]);Ah(we)||F(we)},rp=_=>{_.on("PreInit",()=>{const{parser:F}=_;F.addNodeFilter("ul,ol",q=>Oe(q,sp))})},M2=_=>{_.on("keydown",F=>{F.keyCode!==Dt.TAB||Dt.metaKeyPressed(F)||_.undoManager.transact(()=>{(F.shiftKey?Tm(_):Ol(_))&&F.preventDefault()})})},Uy=_=>{Oc(_)&&M2(_),ou(_)},R2=(_,F)=>q=>{const we=De=>{q.setActive(Kr(De.parents,F)),q.setEnabled(!ul(_,De.element)&&_.selection.isEditable())};return q.setEnabled(_.selection.isEditable()),qa(_,we)},vM=_=>{const F=q=>()=>_.execCommand(q);_.hasPlugin("advlist")||(_.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:F("InsertOrderedList"),onSetup:R2(_,"OL")}),_.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:F("InsertUnorderedList"),onSetup:R2(_,"UL")}))},Wy=(_,F)=>q=>qa(_,De=>q.setEnabled(Kr(De.parents,F)&&!ul(_,De.element))),v0=_=>{const F={text:"List properties...",icon:"ordered-list",onAction:()=>_.execCommand("mceListProps"),onSetup:Wy(_,"OL")};_.ui.registry.addMenuItem("listprops",F),_.ui.registry.addContextMenu("lists",{update:q=>{const we=Ti(_,q);return bs(we)?["listprops"]:[]}})};var P2=()=>{u.add("lists",_=>(cl(_),rp(_),_.hasPlugin("rtc",!0)?Md(_):(Uy(_),ks(_)),vM(_),v0(_),g0(_)))};P2()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(ke,Ae,ct)=>{var xt;return ct(ke,Ae.prototype)?!0:((xt=ke.constructor)===null||xt===void 0?void 0:xt.name)===Ae.name},i=ke=>{const Ae=typeof ke;return ke===null?"null":Ae==="object"&&Array.isArray(ke)?"array":Ae==="object"&&o(ke,String,(ct,xt)=>xt.isPrototypeOf(ct))?"string":Ae},l=ke=>Ae=>i(Ae)===ke,d=l("string"),m=l("object"),p=l("array"),v=ke=>ke==null,x=ke=>!v(ke);class k{constructor(Ae,ct){this.tag=Ae,this.value=ct}static some(Ae){return new k(!0,Ae)}static none(){return k.singletonNone}fold(Ae,ct){return this.tag?ct(this.value):Ae()}isSome(){return this.tag}isNone(){return!this.tag}map(Ae){return this.tag?k.some(Ae(this.value)):k.none()}bind(Ae){return this.tag?Ae(this.value):k.none()}exists(Ae){return this.tag&&Ae(this.value)}forall(Ae){return!this.tag||Ae(this.value)}filter(Ae){return!this.tag||Ae(this.value)?this:k.none()}getOr(Ae){return this.tag?this.value:Ae}or(Ae){return this.tag?this:Ae}getOrThunk(Ae){return this.tag?this.value:Ae()}orThunk(Ae){return this.tag?this:Ae()}getOrDie(Ae){if(this.tag)return this.value;throw new Error(Ae!=null?Ae:"Called getOrDie on None")}static from(Ae){return x(Ae)?k.some(Ae):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ae){this.tag&&Ae(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const T=Array.prototype.push,R=(ke,Ae)=>{for(let ct=0,xt=ke.length;ct<xt;ct++){const An=ke[ct];Ae(An,ct)}},N=ke=>{const Ae=[];for(let ct=0,xt=ke.length;ct<xt;++ct){if(!p(ke[ct]))throw new Error("Arr.flatten item "+ct+" was not an array, input: "+ke);T.apply(Ae,ke[ct])}return Ae},$=ke=>{let Ae=ke;return{get:()=>Ae,set:An=>{Ae=An}}},U=Object.keys,X=Object.hasOwnProperty,J=(ke,Ae)=>{const ct=U(ke);for(let xt=0,An=ct.length;xt<An;xt++){const Pn=ct[xt],_o=ke[Pn];Ae(_o,Pn)}},G=(ke,Ae)=>le(ke,Ae)?k.from(ke[Ae]):k.none(),le=(ke,Ae)=>X.call(ke,Ae),Z=ke=>Ae=>Ae.options.get(ke),be=ke=>{const Ae=ke.options.register;Ae("audio_template_callback",{processor:"function"}),Ae("video_template_callback",{processor:"function"}),Ae("iframe_template_callback",{processor:"function"}),Ae("media_live_embeds",{processor:"boolean",default:!0}),Ae("media_filter_html",{processor:"boolean",default:!0}),Ae("media_url_resolver",{processor:"function"}),Ae("media_alt_source",{processor:"boolean",default:!0}),Ae("media_poster",{processor:"boolean",default:!0}),Ae("media_dimensions",{processor:"boolean",default:!0})},He=Z("audio_template_callback"),Re=Z("video_template_callback"),K=Z("iframe_template_callback"),Ie=Z("media_live_embeds"),$e=Z("media_filter_html"),Ue=Z("media_url_resolver"),ae=Z("media_alt_source"),Oe=Z("media_poster"),ht=Z("media_dimensions");var ne=tinymce.util.Tools.resolve("tinymce.util.Tools"),ge=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),O=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Ke=ge.DOM,he=ke=>ke.replace(/px$/,""),at=ke=>{const Ae=ke.attr("style"),ct=Ae?Ke.parseStyle(Ae):{};return{type:"ephox-embed-iri",source:ke.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:G(ct,"max-width").map(he).getOr(""),height:G(ct,"max-height").map(he).getOr("")}},qt=(ke,Ae)=>{let ct={};const An=O({validate:!1,forced_root_block:!1},Ae).parse(ke);for(let Pn=An;Pn;Pn=Pn.walk())if(Pn.type===1){const _o=Pn.name;if(Pn.attr("data-ephox-embed-iri")){ct=at(Pn);break}else!ct.source&&_o==="param"&&(ct.source=Pn.attr("movie")),(_o==="iframe"||_o==="object"||_o==="embed"||_o==="video"||_o==="audio")&&(ct.type||(ct.type=_o),ct=ne.extend(Pn.attributes.map,ct)),_o==="source"&&(ct.source?ct.altsource||(ct.altsource=Pn.attr("src")):ct.source=Pn.attr("src")),_o==="img"&&!ct.poster&&(ct.poster=Pn.attr("src"))}return ct.source=ct.source||ct.src||"",ct.altsource=ct.altsource||"",ct.poster=ct.poster||"",ct},Pe=ke=>{var Ae;const ct={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},xt=(Ae=ke.toLowerCase().split(".").pop())!==null&&Ae!==void 0?Ae:"";return G(ct,xt).getOr("")};var We=tinymce.util.Tools.resolve("tinymce.html.Node"),yt=tinymce.util.Tools.resolve("tinymce.html.Serializer");const Be=(ke,Ae={})=>O(ie({forced_root_block:!1,validate:!1,allow_conditional_comments:!0},Ae),ke),wt=ge.DOM,ce=ke=>/^[0-9.]+$/.test(ke)?ke+"px":ke,Ze=(ke,Ae)=>{const ct=Ae.attr("style"),xt=ct?wt.parseStyle(ct):{};x(ke.width)&&(xt["max-width"]=ce(ke.width)),x(ke.height)&&(xt["max-height"]=ce(ke.height)),Ae.attr("style",wt.serializeStyle(xt))},V=["source","altsource"],kn=(ke,Ae,ct,xt)=>{let An=0,Pn=0;const _o=Be(xt);_o.addNodeFilter("source",Tt=>An=Tt.length);const Ws=_o.parse(ke);for(let Tt=Ws;Tt;Tt=Tt.walk())if(Tt.type===1){const Lo=Tt.name;if(Tt.attr("data-ephox-embed-iri")){Ze(Ae,Tt);break}else{switch(Lo){case"video":case"object":case"embed":case"img":case"iframe":Ae.height!==void 0&&Ae.width!==void 0&&(Tt.attr("width",Ae.width),Tt.attr("height",Ae.height));break}if(ct)switch(Lo){case"video":Tt.attr("poster",Ae.poster),Tt.attr("src",null);for(let Ee=An;Ee<2;Ee++)if(Ae[V[Ee]]){const Dt=new We("source",1);Dt.attr("src",Ae[V[Ee]]),Dt.attr("type",Ae[V[Ee]+"mime"]||null),Tt.append(Dt)}break;case"iframe":Tt.attr("src",Ae.source);break;case"object":const Se=Tt.getAll("img").length>0;if(Ae.poster&&!Se){Tt.attr("src",Ae.poster);const Ee=new We("img",1);Ee.attr("src",Ae.poster),Ee.attr("width",Ae.width),Ee.attr("height",Ae.height),Tt.append(Ee)}break;case"source":if(Pn<2&&(Tt.attr("src",Ae[V[Pn]]),Tt.attr("type",Ae[V[Pn]+"mime"]||null),!Ae[V[Pn]])){Tt.remove();continue}Pn++;break;case"img":Ae.poster||Tt.remove();break}}}return yt({},xt).serialize(Ws)},cn=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],no=ke=>{const Ae=ke.match(/^(https?:\/\/|www\.)(.+)$/i);return Ae&&Ae.length>1?Ae[1]==="www."?"https://":Ae[1]:"https://"},Do=(ke,Ae)=>{const ct=no(Ae),xt=ke.regex.exec(Ae);let An=ct+ke.url;if(x(xt))for(let Pn=0;Pn<xt.length;Pn++)An=An.replace("$"+Pn,()=>xt[Pn]?xt[Pn]:"");return An.replace(/\?$/,"")},Cs=ke=>{const Ae=cn.filter(ct=>ct.regex.test(ke));return Ae.length>0?ne.extend({},Ae[0],{url:Do(Ae[0],ke)}):null},Je=(ke,Ae)=>{if(Ae)return Ae(ke);{const ct=ke.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+ke.source+'" width="'+ke.width+'" height="'+ke.height+'"'+ct+"></iframe>"}},Bt=ke=>{let Ae='<object data="'+ke.source+'" width="'+ke.width+'" height="'+ke.height+'" type="application/x-shockwave-flash">';return ke.poster&&(Ae+='<img src="'+ke.poster+'" width="'+ke.width+'" height="'+ke.height+'" />'),Ae+="</object>",Ae},tt=(ke,Ae)=>Ae?Ae(ke):'<audio controls="controls" src="'+ke.source+'">'+(ke.altsource?`
<source src="`+ke.altsource+'"'+(ke.altsourcemime?' type="'+ke.altsourcemime+'"':"")+` />
`:"")+"</audio>",ue=(ke,Ae)=>Ae?Ae(ke):'<video width="'+ke.width+'" height="'+ke.height+'"'+(ke.poster?' poster="'+ke.poster+'"':"")+` controls="controls">
<source src="`+ke.source+'"'+(ke.sourcemime?' type="'+ke.sourcemime+'"':"")+` />
`+(ke.altsource?'<source src="'+ke.altsource+'"'+(ke.altsourcemime?' type="'+ke.altsourcemime+'"':"")+` />
`:"")+"</video>",xe=(ke,Ae)=>{var ct;const xt=ne.extend({},Ae);if(!xt.source&&(ne.extend(xt,qt((ct=xt.embed)!==null&&ct!==void 0?ct:"",ke.schema)),!xt.source))return"";xt.altsource||(xt.altsource=""),xt.poster||(xt.poster=""),xt.source=ke.convertURL(xt.source,"source"),xt.altsource=ke.convertURL(xt.altsource,"source"),xt.sourcemime=Pe(xt.source),xt.altsourcemime=Pe(xt.altsource),xt.poster=ke.convertURL(xt.poster,"poster");const An=Cs(xt.source);if(An&&(xt.source=An.url,xt.type=An.type,xt.allowfullscreen=An.allowFullscreen,xt.width=xt.width||String(An.w),xt.height=xt.height||String(An.h)),xt.embed)return kn(xt.embed,xt,!0,ke.schema);{const Pn=He(ke),_o=Re(ke),Ws=K(ke);return xt.width=xt.width||"300",xt.height=xt.height||"150",ne.each(xt,(Tt,Lo)=>{xt[Lo]=ke.dom.encode(""+Tt)}),xt.type==="iframe"?Je(xt,Ws):xt.sourcemime==="application/x-shockwave-flash"?Bt(xt):xt.sourcemime.indexOf("audio")!==-1?tt(xt,Pn):ue(xt,_o)}},Ne=ke=>ke.hasAttribute("data-mce-object")||ke.hasAttribute("data-ephox-embed-iri"),Me=ke=>{ke.on("click keyup touchend",()=>{const Ae=ke.selection.getNode();Ae&&ke.dom.hasClass(Ae,"mce-preview-object")&&ke.dom.getAttrib(Ae,"data-mce-selected")&&Ae.setAttribute("data-mce-selected","2")}),ke.on("ObjectResized",Ae=>{const ct=Ae.target;if(ct.getAttribute("data-mce-object")){let xt=ct.getAttribute("data-mce-html");xt&&(xt=unescape(xt),ct.setAttribute("data-mce-html",escape(kn(xt,{width:String(Ae.width),height:String(Ae.height)},!1,ke.schema))))}})},kt={},ve=(ke,Ae,ct)=>new Promise((xt,An)=>{const Pn=_o=>(_o.html&&(kt[ke.source]=_o),xt({url:ke.source,html:_o.html?_o.html:Ae(ke)}));kt[ke.source]?Pn(kt[ke.source]):ct({url:ke.source},Pn,An)}),je=(ke,Ae)=>Promise.resolve({html:Ae(ke),url:ke.source}),ot=ke=>Ae=>xe(ke,Ae),en=(ke,Ae)=>{const ct=Ue(ke);return ct?ve(Ae,ot(ke),ct):je(Ae,ot(ke))},Wn=ke=>le(kt,ke),On=(ke,Ae)=>G(Ae,ke).bind(ct=>G(ct,"meta")),ho=(ke,Ae,ct)=>xt=>{const An=()=>G(ke,xt),Pn=()=>G(Ae,xt),_o=Lo=>G(Lo,"value").bind(Se=>Se.length>0?k.some(Se):k.none()),Ws=()=>An().bind(Lo=>m(Lo)?_o(Lo).orThunk(Pn):Pn().orThunk(()=>k.from(Lo))),Tt=()=>Pn().orThunk(()=>An().bind(Lo=>m(Lo)?_o(Lo):k.from(Lo)));return{[xt]:(xt===ct?Ws():Tt()).getOr("")}},Kn=(ke,Ae)=>{const ct={};return G(ke,"dimensions").each(xt=>{R(["width","height"],An=>{G(Ae,An).orThunk(()=>G(xt,An)).each(Pn=>ct[An]=Pn)})}),ct},ls=(ke,Ae)=>{const ct=Ae&&Ae!=="dimensions"?On(Ae,ke).getOr({}):{},xt=ho(ke,ct,Ae);return ie(ie(ie(ie(ie({},xt("source")),xt("altsource")),xt("poster")),xt("embed")),Kn(ke,ct))},Ye=ke=>{const Ae=Ot(ie({},ke),{source:{value:G(ke,"source").getOr("")},altsource:{value:G(ke,"altsource").getOr("")},poster:{value:G(ke,"poster").getOr("")}});return R(["width","height"],ct=>{G(ke,ct).each(xt=>{const An=Ae.dimensions||{};An[ct]=xt,Ae.dimensions=An})}),Ae},pt=ke=>Ae=>{const ct=Ae&&Ae.msg?"Media embed handler error: "+Ae.msg:"Media embed handler threw unknown error.";ke.notificationManager.open({type:"error",text:ct})},Rt=ke=>{const Ae=ke.selection.getNode(),ct=Ne(Ae)?ke.serializer.serialize(Ae,{selection:!0}):"",xt=qt(ct,ke.schema),Pn=(()=>{if(ao(xt.source,xt.type)){const _o=ke.dom.getRect(Ae);return{width:_o.w.toString().replace(/px$/,""),height:_o.h.toString().replace(/px$/,"")}}else return{}})();return ie(ie({embed:ct},xt),Pn)},Wt=(ke,Ae)=>ct=>{if(d(ct.url)&&ct.url.trim().length>0){const xt=ct.html,An=qt(xt,Ae.schema),Pn=Ot(ie({},An),{source:ct.url,embed:xt});ke.setData(Ye(Pn))}},bn=(ke,Ae)=>{const ct=ke.dom.select("*[data-mce-object]");for(let xt=0;xt<Ae.length;xt++)for(let An=ct.length-1;An>=0;An--)Ae[xt]===ct[An]&&ct.splice(An,1);ke.selection.select(ct[0])},oo=(ke,Ae)=>{const ct=ke.dom.select("*[data-mce-object]");ke.insertContent(Ae),bn(ke,ct),ke.nodeChanged()},ao=(ke,Ae)=>x(Ae)&&Ae==="ephox-embed-iri"&&x(Cs(ke)),Qo=(ke,Ae)=>((xt,An)=>xt.width!==An.width||xt.height!==An.height)(ke,Ae)&&ao(Ae.source,ke.type),Fo=(ke,Ae,ct)=>{var xt;Ae.embed=Qo(ke,Ae)&&ht(ct)?xe(ct,Ot(ie({},Ae),{embed:""})):kn((xt=Ae.embed)!==null&&xt!==void 0?xt:"",Ae,!1,ct.schema),Ae.embed&&(ke.source===Ae.source||Wn(Ae.source))?oo(ct,Ae.embed):en(ct,Ae).then(An=>{oo(ct,An.html)}).catch(pt(ct))},cs=ke=>{const Ae=Rt(ke),ct=$(Ae),xt=Ye(Ae),An=(En,$n)=>{const Vn=ls($n.getData(),"source");En.source!==Vn.source&&(Wt(Mn,ke)({url:Vn.source,html:""}),en(ke,Vn).then(Wt(Mn,ke)).catch(pt(ke)))},Pn=En=>{var $n;const Vn=ls(En.getData()),Xo=qt(($n=Vn.embed)!==null&&$n!==void 0?$n:"",ke.schema);En.setData(Ye(Xo))},_o=(En,$n,Vn)=>{const Xo=ls(En.getData(),$n),Ts=Qo(Vn,Xo)&&ht(ke)?Ot(ie({},Xo),{embed:""}):Xo,Ii=xe(ke,Ts);En.setData(Ye(Ot(ie({},Ts),{embed:Ii})))},Ws=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],Tt=ht(ke)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Lo={title:"General",name:"general",items:N([Ws,Tt])},Ee={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},Dt=[];ae(ke)&&Dt.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),Oe(ke)&&Dt.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const nn={title:"Advanced",name:"advanced",items:Dt},an=[Lo,Ee];Dt.length>0&&an.push(nn);const Dn={type:"tabpanel",tabs:an},Mn=ke.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Dn,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:En=>{const $n=ls(En.getData());Fo(ct.get(),$n,ke),En.close()},onChange:(En,$n)=>{switch($n.name){case"source":An(ct.get(),En);break;case"embed":Pn(En);break;case"dimensions":case"altsource":case"poster":_o(En,$n.name,ct.get());break}ct.set(ls(En.getData()))},initialData:xt})},$t=ke=>({showDialog:()=>{cs(ke)}}),xo=ke=>{const Ae=()=>{cs(ke)};ke.addCommand("mceMedia",Ae)},Qs=(ke,Ae,ct)=>ke.length>=Ae.length&&ke.substr(ct,ct+Ae.length)===Ae,Sr=(ke,Ae)=>Qs(ke,Ae,0);var Gr=tinymce.util.Tools.resolve("tinymce.Env");const pr=ke=>{const Ae=ke.name;return Ae==="iframe"||Ae==="video"||Ae==="audio"},di=(ke,Ae,ct,xt=null)=>{const An=ke.attr(ct);return x(An)?An:le(Ae,ct)?null:xt},Cr=(ke,Ae,ct)=>{const xt=Ae.name==="img"||ke.name==="video",An=xt?"300":null,Pn=ke.name==="audio"?"30":"150",_o=xt?Pn:null;Ae.attr({width:di(ke,ct,"width",An),height:di(ke,ct,"height",_o)})},fi=(ke,Ae,ct,xt)=>{const An=Be(ke.schema).parse(xt,{context:Ae});for(;An.firstChild;)ct.append(An.firstChild)},us=(ke,Ae)=>{const ct=Ae.name,xt=new We("img",1);return hi(ke,Ae,xt),Cr(Ae,xt,{}),xt.attr({style:Ae.attr("style"),src:Gr.transparentSrc,"data-mce-object":ct,class:"mce-object mce-object-"+ct}),xt},Bn=(ke,Ae)=>{var ct;const xt=Ae.name,An=new We("span",1);An.attr({contentEditable:"false",style:Ae.attr("style"),"data-mce-object":xt,class:"mce-preview-object mce-object-"+xt}),hi(ke,Ae,An);const Pn=ke.dom.parseStyle((ct=Ae.attr("style"))!==null&&ct!==void 0?ct:""),_o=new We(xt,1);if(Cr(Ae,_o,Pn),_o.attr({src:Ae.attr("src"),style:Ae.attr("style"),class:Ae.attr("class")}),xt==="iframe")_o.attr({allowfullscreen:Ae.attr("allowfullscreen"),frameborder:"0",sandbox:Ae.attr("sandbox")});else{R(["controls","crossorigin","currentTime","loop","muted","poster","preload"],Se=>{_o.attr(Se,Ae.attr(Se))});const Lo=An.attr("data-mce-html");x(Lo)&&fi(ke,xt,_o,unescape(Lo))}const Ws=new We("span",1);return Ws.attr("class","mce-shim"),An.append(_o),An.append(Ws),An},hi=(ke,Ae,ct)=>{var xt;const An=(xt=Ae.attributes)!==null&&xt!==void 0?xt:[];let Pn=An.length;for(;Pn--;){const Lo=An[Pn].name;let Se=An[Pn].value;Lo!=="width"&&Lo!=="height"&&Lo!=="style"&&!Sr(Lo,"data-mce-")&&((Lo==="data"||Lo==="src")&&(Se=ke.convertURL(Se,Lo)),ct.attr("data-mce-p-"+Lo,Se))}const _o=yt({inner:!0},ke.schema),Ws=new We("div",1);R(Ae.children(),Lo=>Ws.append(Lo));const Tt=_o.serialize(Ws);Tt&&(ct.attr("data-mce-html",escape(Tt)),ct.empty())},Ge=ke=>{const Ae=ke.attr("class");return d(Ae)&&/\btiny-pageembed\b/.test(Ae)},dt=ke=>{let Ae=ke;for(;Ae=Ae.parent;)if(Ae.attr("data-ephox-embed-iri")||Ge(Ae))return!0;return!1},tn=ke=>Ae=>{let ct=Ae.length,xt;for(;ct--;)xt=Ae[ct],xt.parent&&(xt.parent.attr("data-mce-object")||(pr(xt)&&Ie(ke)?dt(xt)||xt.replace(Bn(ke,xt)):dt(xt)||xt.replace(us(ke,xt))))},In=(ke,Ae,ct)=>{const xt=ke.options.get,An=xt("xss_sanitization"),Pn=$e(ke);return Be(ke.schema,{sanitize:An,validate:Pn}).parse(ct,{context:Ae})},go=ke=>{ke.on("PreInit",()=>{const{schema:Ae,serializer:ct,parser:xt}=ke,An=Ae.getBoolAttrs();R("webkitallowfullscreen mozallowfullscreen".split(" "),Pn=>{An[Pn]={}}),J({embed:["wmode"]},(Pn,_o)=>{const Ws=Ae.getElementRule(_o);Ws&&R(Pn,Tt=>{Ws.attributes[Tt]={},Ws.attributesOrder.push(Tt)})}),xt.addNodeFilter("iframe,video,audio,object,embed",tn(ke)),ct.addAttributeFilter("data-mce-object",(Pn,_o)=>{var Ws;let Tt=Pn.length;for(;Tt--;){const Lo=Pn[Tt];if(!Lo.parent)continue;const Se=Lo.attr(_o),Ee=new We(Se,1);if(Se!=="audio"){const Dn=Lo.attr("class");Dn&&Dn.indexOf("mce-preview-object")!==-1&&Lo.firstChild?Ee.attr({width:Lo.firstChild.attr("width"),height:Lo.firstChild.attr("height")}):Ee.attr({width:Lo.attr("width"),height:Lo.attr("height")})}Ee.attr({style:Lo.attr("style")});const Dt=(Ws=Lo.attributes)!==null&&Ws!==void 0?Ws:[];let nn=Dt.length;for(;nn--;){const Dn=Dt[nn].name;Dn.indexOf("data-mce-p-")===0&&Ee.attr(Dn.substr(11),Dt[nn].value)}const an=Lo.attr("data-mce-html");if(an){const Dn=In(ke,Se,unescape(an));R(Dn.children(),Mn=>Ee.append(Mn))}Lo.replace(Ee)}})}),ke.on("SetContent",()=>{const Ae=ke.dom;R(Ae.select("span.mce-preview-object"),ct=>{Ae.select("span.mce-shim",ct).length===0&&Ae.add(ct,"span",{class:"mce-shim"})})})},Ys=ke=>{ke.on("ResolveName",Ae=>{let ct;Ae.target.nodeType===1&&(ct=Ae.target.getAttribute("data-mce-object"))&&(Ae.name=ct)})},Hr=ke=>Ae=>{const ct=()=>{Ae.setEnabled(ke.selection.isEditable())};return ke.on("NodeChange",ct),ct(),()=>{ke.off("NodeChange",ct)}},br=ke=>{const Ae=()=>ke.execCommand("mceMedia");ke.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:Ae,onSetup:ct=>{const xt=ke.selection;ct.setActive(Ne(xt.getNode()));const An=xt.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",ct.setActive).unbind,Pn=Hr(ke)(ct);return()=>{An(),Pn()}}}),ke.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:Ae,onSetup:Hr(ke)})};var _r=()=>{u.add("media",ke=>(be(ke),xo(ke),br(ke),Ys(ke),go(ke),Me(ke),$t(ke)))};_r()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=G=>le=>typeof le===G,i=o("boolean"),l=o("number"),d=G=>le=>le.options.get(G),m=G=>{const le=G.options.register;le("nonbreaking_force_tab",{processor:Z=>i(Z)?{value:Z?3:0,valid:!0}:l(Z)?{value:Z,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),le("nonbreaking_wrap",{processor:"boolean",default:!0})},p=d("nonbreaking_force_tab"),v=d("nonbreaking_wrap"),x=(G,le)=>{let Z="";for(let be=0;be<le;be++)Z+=G;return Z},k=G=>G.plugins.visualchars?G.plugins.visualchars.isEnabled():!1,T=(G,le)=>{const Z=()=>k(G)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap",be=()=>`<span class="${Z()}" contenteditable="false">${x("&nbsp;",le)}</span>`,Re=v(G)||G.plugins.visualchars?be():x("&nbsp;",le);G.undoManager.transact(()=>G.insertContent(Re))},R=G=>{G.addCommand("mceNonBreaking",()=>{T(G,1)})};var N=tinymce.util.Tools.resolve("tinymce.util.VK");const $=G=>{const le=p(G);le>0&&G.on("keydown",Z=>{if(Z.keyCode===N.TAB&&!Z.isDefaultPrevented()){if(Z.shiftKey)return;Z.preventDefault(),Z.stopImmediatePropagation(),T(G,le)}})},U=G=>le=>{const Z=()=>{le.setEnabled(G.selection.isEditable())};return G.on("NodeChange",Z),Z(),()=>{G.off("NodeChange",Z)}},X=G=>{const le=()=>G.execCommand("mceNonBreaking");G.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:le,onSetup:U(G)}),G.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:le,onSetup:U(G)})};var J=()=>{u.add("nonbreaking",G=>{m(G),R(G),X(G),$(G)})};J()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.Env");const i=U=>X=>X.options.get(U),l=U=>{const X=U.options.register;X("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),X("pagebreak_split_block",{processor:"boolean",default:!1})},d=i("pagebreak_separator"),m=i("pagebreak_split_block"),p="mce-pagebreak",v=U=>{const X=`<img src="${o.transparentSrc}" class="${p}" data-mce-resize="false" data-mce-placeholder />`;return U?`<p>${X}</p>`:X},x=U=>{const X=d(U),J=()=>m(U),G=new RegExp(X.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,le=>"\\"+le),"gi");U.on("BeforeSetContent",le=>{le.content=le.content.replace(G,v(J()))}),U.on("PreInit",()=>{U.serializer.addNodeFilter("img",le=>{let Z=le.length,be,He;for(;Z--;)if(be=le[Z],He=be.attr("class"),He&&He.indexOf(p)!==-1){const Re=be.parent;if(Re&&U.schema.getBlockElements()[Re.name]&&J()){Re.type=3,Re.value=X,Re.raw=!0,be.remove();continue}be.type=3,be.value=X,be.raw=!0}})})},k=U=>{U.addCommand("mcePageBreak",()=>{U.insertContent(v(m(U)))})},T=U=>{U.on("ResolveName",X=>{X.target.nodeName==="IMG"&&U.dom.hasClass(X.target,p)&&(X.name="pagebreak")})},R=U=>X=>{const J=()=>{X.setEnabled(U.selection.isEditable())};return U.on("NodeChange",J),J(),()=>{U.off("NodeChange",J)}},N=U=>{const X=()=>U.execCommand("mcePageBreak");U.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:X,onSetup:R(U)}),U.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:X,onSetup:R(U)})};var $=()=>{u.add("pagebreak",U=>{l(U),k(U),N(U),x(U),T(U)})};$()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.Env"),i=tinymce.util.Tools.resolve("tinymce.util.Tools");const l=$=>U=>U.options.get($),d=l("content_style"),m=l("content_css_cors"),p=l("body_class"),v=l("body_id"),x=$=>{var U;let X="";const J=$.dom.encode,G=(U=d($))!==null&&U!==void 0?U:"";X+='<base href="'+J($.documentBaseURI.getURI())+'">';const le=m($)?' crossorigin="anonymous"':"";i.each($.contentCSS,Ue=>{X+='<link type="text/css" rel="stylesheet" href="'+J($.documentBaseURI.toAbsolute(Ue))+'"'+le+">"}),G&&(X+='<style type="text/css">'+G+"</style>");const Z=v($),be=p($),Re='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(o.os.isMacOS()||o.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",K=$.getBody().dir,Ie=K?' dir="'+J(K)+'"':"";return"<!DOCTYPE html><html><head>"+X+'</head><body id="'+J(Z)+'" class="mce-content-body '+J(be)+'"'+Ie+">"+$.getContent()+Re+"</body></html>"},k=$=>{const U=x($);$.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:U}}).focus("close")},T=$=>{$.addCommand("mcePreview",()=>{k($)})},R=$=>{const U=()=>$.execCommand("mcePreview");$.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:U}),$.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:U})};var N=()=>{u.add("preview",$=>{T($),R($)})};N()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=(G=>le=>typeof le===G)("function");var l=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),d=tinymce.util.Tools.resolve("tinymce.util.Tools");const m=G=>le=>le.options.get(G),p=G=>{const le=G.options.register;le("save_enablewhendirty",{processor:"boolean",default:!0}),le("save_onsavecallback",{processor:"function"}),le("save_oncancelcallback",{processor:"function"})},v=m("save_enablewhendirty"),x=m("save_onsavecallback"),k=m("save_oncancelcallback"),T=(G,le)=>{G.notificationManager.open({text:le,type:"error"})},R=G=>{const le=l.DOM.getParent(G.id,"form");if(v(G)&&!G.isDirty())return;G.save();const Z=x(G);if(i(Z)){Z.call(G,G),G.nodeChanged();return}le?(G.setDirty(!1),(!le.onsubmit||le.onsubmit())&&(typeof le.submit=="function"?le.submit():T(G,"Error: Form submit field collision.")),G.nodeChanged()):T(G,"Error: No form element found.")},N=G=>{const le=d.trim(G.startContent),Z=k(G);if(i(Z)){Z.call(G,G);return}G.resetContent(le)},$=G=>{G.addCommand("mceSave",()=>{R(G)}),G.addCommand("mceCancel",()=>{N(G)})},U=G=>le=>{const Z=()=>{le.setEnabled(!v(G)||G.isDirty())};return Z(),G.on("NodeChange dirty",Z),()=>G.off("NodeChange dirty",Z)},X=G=>{G.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>G.execCommand("mceSave"),onSetup:U(G)}),G.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>G.execCommand("mceCancel"),onSetup:U(G)}),G.addShortcut("Meta+S","","mceSave")};var J=()=>{u.add("save",G=>{p(G),X(G),$(G)})};J()})();(function(){const u=Se=>{let Ee=Se;return{get:()=>Ee,set:an=>{Ee=an}}};var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=(Se,Ee,Dt)=>{var nn;return Dt(Se,Ee.prototype)?!0:((nn=Se.constructor)===null||nn===void 0?void 0:nn.name)===Ee.name},l=Se=>{const Ee=typeof Se;return Se===null?"null":Ee==="object"&&Array.isArray(Se)?"array":Ee==="object"&&i(Se,String,(Dt,nn)=>nn.isPrototypeOf(Dt))?"string":Ee},d=Se=>Ee=>l(Ee)===Se,m=Se=>Ee=>typeof Ee===Se,p=d("string"),v=d("array"),x=m("boolean"),k=Se=>Se==null,T=Se=>!k(Se),R=m("number"),N=()=>{},$=Se=>()=>Se,U=$(!0),J=$("[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]");class G{constructor(Ee,Dt){this.tag=Ee,this.value=Dt}static some(Ee){return new G(!0,Ee)}static none(){return G.singletonNone}fold(Ee,Dt){return this.tag?Dt(this.value):Ee()}isSome(){return this.tag}isNone(){return!this.tag}map(Ee){return this.tag?G.some(Ee(this.value)):G.none()}bind(Ee){return this.tag?Ee(this.value):G.none()}exists(Ee){return this.tag&&Ee(this.value)}forall(Ee){return!this.tag||Ee(this.value)}filter(Ee){return!this.tag||Ee(this.value)?this:G.none()}getOr(Ee){return this.tag?this.value:Ee}or(Ee){return this.tag?this:Ee}getOrThunk(Ee){return this.tag?this.value:Ee()}orThunk(Ee){return this.tag?this:Ee()}getOrDie(Ee){if(this.tag)return this.value;throw new Error(Ee!=null?Ee:"Called getOrDie on None")}static from(Ee){return T(Ee)?G.some(Ee):G.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ee){this.tag&&Ee(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}G.singletonNone=new G(!1);const le=J;var Z=tinymce.util.Tools.resolve("tinymce.Env"),be=tinymce.util.Tools.resolve("tinymce.util.Tools");const He=Array.prototype.slice,Re=Array.prototype.push,K=(Se,Ee)=>{const Dt=Se.length,nn=new Array(Dt);for(let an=0;an<Dt;an++){const Dn=Se[an];nn[an]=Ee(Dn,an)}return nn},Ie=(Se,Ee)=>{for(let Dt=0,nn=Se.length;Dt<nn;Dt++){const an=Se[Dt];Ee(an,Dt)}},$e=(Se,Ee)=>{for(let Dt=Se.length-1;Dt>=0;Dt--){const nn=Se[Dt];Ee(nn,Dt)}},Ue=(Se,Ee)=>{if(Se.length===0)return[];{let Dt=Ee(Se[0]);const nn=[];let an=[];for(let Dn=0,Mn=Se.length;Dn<Mn;Dn++){const En=Se[Dn],$n=Ee(En);$n!==Dt&&(nn.push(an),an=[]),Dt=$n,an.push(En)}return an.length!==0&&nn.push(an),nn}},ae=(Se,Ee,Dt)=>(Ie(Se,(nn,an)=>{Dt=Ee(Dt,nn,an)}),Dt),Oe=Se=>{const Ee=[];for(let Dt=0,nn=Se.length;Dt<nn;++Dt){if(!v(Se[Dt]))throw new Error("Arr.flatten item "+Dt+" was not an array, input: "+Se);Re.apply(Ee,Se[Dt])}return Ee},ht=(Se,Ee)=>Oe(K(Se,Ee)),ne=(Se,Ee)=>{const Dt=He.call(Se,0);return Dt.sort(Ee),Dt},ge=Object.hasOwnProperty,O=(Se,Ee)=>ge.call(Se,Ee);typeof window!="undefined"||Function("return this;")();const Ke=9,he=11,at=1,qt=3,Pe=Se=>Se.dom.nodeType,yt=(Se=>Ee=>Pe(Ee)===Se)(qt),Be=(Se,Ee,Dt)=>{if(p(Dt)||x(Dt)||R(Dt))Se.setAttribute(Ee,Dt+"");else throw new Error("Attribute value was not simple")},wt=(Se,Ee,Dt)=>{Be(Se.dom,Ee,Dt)},ce=(Se,Ee)=>{const nn=(Ee||document).createElement("div");if(nn.innerHTML=Se,!nn.hasChildNodes()||nn.childNodes.length>1){const an="HTML does not have a single root node";throw new Error(an)}return kn(nn.childNodes[0])},Ze=(Se,Ee)=>{const nn=(Ee||document).createElement(Se);return kn(nn)},V=(Se,Ee)=>{const nn=(Ee||document).createTextNode(Se);return kn(nn)},kn=Se=>{if(Se==null)throw new Error("Node cannot be null or undefined");return{dom:Se}},no={fromHtml:ce,fromTag:Ze,fromText:V,fromDom:kn,fromPoint:(Se,Ee,Dt)=>G.from(Se.dom.elementFromPoint(Ee,Dt)).map(kn)},Do=Se=>Se.nodeType!==at&&Se.nodeType!==Ke&&Se.nodeType!==he||Se.childElementCount===0,Cs=(Se,Ee)=>{const Dt=Ee===void 0?document:Ee.dom;return Do(Dt)?[]:K(Dt.querySelectorAll(Se),no.fromDom)},Je=Se=>G.from(Se.dom.parentNode).map(no.fromDom),Bt=Se=>K(Se.dom.childNodes,no.fromDom),tt=(Se,Ee)=>({element:Se,offset:Ee}),ue=(Se,Ee)=>{const Dt=Bt(Se);return Dt.length>0&&Ee<Dt.length?tt(Dt[Ee],0):tt(Se,Ee)},xe=(Se,Ee)=>{Je(Se).each(nn=>{nn.dom.insertBefore(Ee.dom,Se.dom)})},Ne=(Se,Ee)=>{Se.dom.appendChild(Ee.dom)},Me=(Se,Ee)=>{xe(Se,Ee),Ne(Ee,Se)},ve=((Se,Ee)=>{const Dt=Dn=>{if(!Se(Dn))throw new Error("Can only get "+Ee+" value of a "+Ee+" node");return nn(Dn).getOr("")},nn=Dn=>Se(Dn)?G.from(Dn.dom.nodeValue):G.none();return{get:Dt,getOption:nn,set:(Dn,Mn)=>{if(!Se(Dn))throw new Error("Can only set raw "+Ee+" value of a "+Ee+" node");Dn.dom.nodeValue=Mn}}})(yt,"text"),je=Se=>ve.get(Se),ot=(Se,Ee,Dt)=>(Se.compareDocumentPosition(Ee)&Dt)!==0,en=(Se,Ee)=>ot(Se,Ee,Node.DOCUMENT_POSITION_PRECEDING),Wn=(Se,Ee)=>Cs(Ee,Se);var On=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const ho=(Se,Ee)=>Se.isBlock(Ee)||O(Se.schema.getVoidElements(),Ee.nodeName),Kn=(Se,Ee)=>!Se.isEditable(Ee),ls=(Se,Ee)=>Se.getContentEditable(Ee)==="true"&&Ee.parentNode&&!Se.isEditable(Ee.parentNode),Ye=(Se,Ee)=>!Se.isBlock(Ee)&&O(Se.schema.getWhitespaceElements(),Ee.nodeName),pt=(Se,Ee)=>ho(Se,Ee)||Kn(Se,Ee)||Ye(Se,Ee)||ls(Se,Ee),Rt=Se=>Se.nodeType===3,Wt=()=>({sOffset:0,fOffset:0,elements:[]}),bn=(Se,Ee)=>ue(no.fromDom(Se),Ee),oo=(Se,Ee,Dt,nn,an,Dn=!0)=>{let Mn=Dn?Ee(!1):Dt;for(;Mn;){const En=Kn(Se,Mn);if(En||Ye(Se,Mn)){if(En?nn.cef(Mn):nn.boundary(Mn))break;Mn=Ee(!0);continue}else if(ho(Se,Mn)){if(nn.boundary(Mn))break}else Rt(Mn)&&nn.text(Mn);if(Mn===an)break;Mn=Ee(!1)}},ao=(Se,Ee,Dt,nn,an)=>{var Dn;if(pt(Se,Dt))return;const Mn=(Dn=Se.getParent(nn,Se.isBlock))!==null&&Dn!==void 0?Dn:Se.getRoot(),En=new On(Dt,Mn),$n=an?En.next.bind(En):En.prev.bind(En);oo(Se,$n,Dt,{boundary:U,cef:U,text:Vn=>{an?Ee.fOffset+=Vn.length:Ee.sOffset+=Vn.length,Ee.elements.push(no.fromDom(Vn))}})},Qo=(Se,Ee,Dt,nn,an,Dn=!0)=>{const Mn=new On(Dt,Ee),En=[];let $n=Wt();ao(Se,$n,Dt,Ee,!1);const Vn=()=>($n.elements.length>0&&(En.push($n),$n=Wt()),!1);return oo(Se,Mn.next.bind(Mn),Dt,{boundary:Vn,cef:Xo=>(Vn(),an&&En.push(...an.cef(Xo)),!1),text:Xo=>{$n.elements.push(no.fromDom(Xo)),an&&an.text(Xo,$n)}},nn,Dn),nn&&ao(Se,$n,nn,Ee,!0),Vn(),En},Fo=(Se,Ee)=>{const Dt=bn(Ee.startContainer,Ee.startOffset),nn=Dt.element.dom,an=bn(Ee.endContainer,Ee.endOffset),Dn=an.element.dom;return Qo(Se,Ee.commonAncestorContainer,nn,Dn,{text:(Mn,En)=>{Mn===Dn?En.fOffset+=Mn.length-an.offset:Mn===nn&&(En.sOffset+=Dt.offset)},cef:Mn=>{const En=ht(Wn(no.fromDom(Mn),"*[contenteditable=true]"),$n=>{const Vn=$n.dom;return Qo(Se,Vn,Vn)});return ne(En,($n,Vn)=>en($n.elements[0].dom,Vn.elements[0].dom)?1:-1)}},!1)},cs=(Se,Ee)=>Ee.collapsed?[]:Fo(Se,Ee),$t=(Se,Ee)=>{const Dt=Se.createRng();return Dt.selectNode(Ee),cs(Se,Dt)},xo=(Se,Ee)=>ht(Ee,Dt=>$t(Se,Dt)),Qs=(Se,Ee,Dt=0,nn=Se.length)=>{const an=Ee.regex;an.lastIndex=Dt;const Dn=[];let Mn;for(;Mn=an.exec(Se);){const En=Mn[Ee.matchIndex],$n=Mn.index+Mn[0].indexOf(En),Vn=$n+En.length;if(Vn>nn)break;Dn.push({start:$n,finish:Vn}),an.lastIndex=Vn}return Dn},Sr=(Se,Ee)=>{const Dt=ae(Se,(nn,an)=>{const Dn=je(an),Mn=nn.last,En=Mn+Dn.length,$n=ht(Ee,(Vn,Xo)=>Vn.start<En&&Vn.finish>Mn?[{element:an,start:Math.max(Mn,Vn.start)-Mn,finish:Math.min(En,Vn.finish)-Mn,matchId:Xo}]:[]);return{results:nn.results.concat($n),last:En}},{results:[],last:0}).results;return Ue(Dt,nn=>nn.matchId)},Gr=(Se,Ee)=>ht(Ee,Dt=>{const nn=Dt.elements,an=K(nn,je).join(""),Dn=Qs(an,Se,Dt.sOffset,an.length-Dt.fOffset);return Sr(nn,Dn)}),pr=(Se,Ee)=>{$e(Se,(Dt,nn)=>{$e(Dt,an=>{const Dn=no.fromDom(Ee.cloneNode(!1));wt(Dn,"data-mce-index",nn);const Mn=an.element.dom;if(Mn.length===an.finish&&an.start===0)Me(an.element,Dn);else{Mn.length!==an.finish&&Mn.splitText(an.finish);const En=Mn.splitText(an.start);Me(no.fromDom(En),Dn)}})})},di=(Se,Ee,Dt,nn)=>{const an=$t(Se,Dt),Dn=Gr(Ee,an);return pr(Dn,nn),Dn.length},Cr=(Se,Ee,Dt,nn)=>{const an=Dt.getBookmark(),Dn=Se.select("td[data-mce-selected],th[data-mce-selected]"),Mn=Dn.length>0?xo(Se,Dn):cs(Se,Dt.getRng()),En=Gr(Ee,Mn);return pr(En,nn),Dt.moveToBookmark(an),En.length},fi=Se=>Se.getAttribute("data-mce-index"),us=(Se,Ee,Dt,nn)=>{const an=Se.dom.create("span",{"data-mce-bogus":1});an.className="mce-match-marker";const Dn=Se.getBody();return _r(Se,Ee,!1),nn?Cr(Se.dom,Dt,Se.selection,an):di(Se.dom,Dt,Dn,an)},Bn=Se=>{var Ee;const Dt=Se.parentNode;Se.firstChild&&Dt.insertBefore(Se.firstChild,Se),(Ee=Se.parentNode)===null||Ee===void 0||Ee.removeChild(Se)},hi=(Se,Ee)=>{const Dt=[],nn=be.toArray(Se.getBody().getElementsByTagName("span"));if(nn.length)for(let an=0;an<nn.length;an++){const Dn=fi(nn[an]);Dn===null||!Dn.length||Dn===Ee.toString()&&Dt.push(nn[an])}return Dt},Ge=(Se,Ee,Dt)=>{const nn=Ee.get();let an=nn.index;const Dn=Se.dom;Dt?an+1===nn.count?an=0:an++:an-1===-1?an=nn.count-1:an--,Dn.removeClass(hi(Se,nn.index),"mce-match-marker-selected");const Mn=hi(Se,an);return Mn.length?(Dn.addClass(hi(Se,an),"mce-match-marker-selected"),Se.selection.scrollIntoView(Mn[0]),an):-1},dt=(Se,Ee)=>{const Dt=Ee.parentNode;Se.remove(Ee),Dt&&Se.isEmpty(Dt)&&Se.remove(Dt)},tn=(Se,Ee)=>{const nn="("+Se.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return Ee?`(?:^|\\s|${le()})`+nn+`(?=$|\\s|${le()})`:nn},In=(Se,Ee,Dt,nn,an,Dn)=>{const Mn=Se.selection,En=tn(Dt,an),$n=Mn.isForward(),Vn={regex:new RegExp(En,nn?"g":"gi"),matchIndex:1},Xo=us(Se,Ee,Vn,Dn);if(Z.browser.isSafari()&&Mn.setRng(Mn.getRng(),$n),Xo){const Ts=Ge(Se,Ee,!0);Ee.set({index:Ts,count:Xo,text:Dt,matchCase:nn,wholeWord:an,inSelection:Dn})}return Xo},go=(Se,Ee)=>{const Dt=Ge(Se,Ee,!0);Ee.set(Ot(ie({},Ee.get()),{index:Dt}))},Ys=(Se,Ee)=>{const Dt=Ge(Se,Ee,!1);Ee.set(Ot(ie({},Ee.get()),{index:Dt}))},Hr=Se=>{const Ee=fi(Se);return Ee!==null&&Ee.length>0},br=(Se,Ee,Dt,nn,an)=>{const Dn=Ee.get(),Mn=Dn.index;let En,$n=Mn;nn=nn!==!1;const Vn=Se.getBody(),Xo=be.grep(be.toArray(Vn.getElementsByTagName("span")),Hr);for(let Ts=0;Ts<Xo.length;Ts++){const Ii=fi(Xo[Ts]);let Oa=En=parseInt(Ii,10);if(an||Oa===Dn.index){for(Dt.length?(Xo[Ts].innerText=Dt,Bn(Xo[Ts])):dt(Se.dom,Xo[Ts]);Xo[++Ts];)if(Oa=parseInt(fi(Xo[Ts]),10),Oa===En)dt(Se.dom,Xo[Ts]);else{Ts--;break}nn&&$n--}else En>Mn&&Xo[Ts].setAttribute("data-mce-index",String(En-1))}return Ee.set(Ot(ie({},Dn),{count:an?0:Dn.count-1,index:$n})),nn?go(Se,Ee):Ys(Se,Ee),!an&&Ee.get().count>0},_r=(Se,Ee,Dt)=>{let nn,an;const Dn=Ee.get(),Mn=be.toArray(Se.getBody().getElementsByTagName("span"));for(let En=0;En<Mn.length;En++){const $n=fi(Mn[En]);$n!==null&&$n.length&&($n===Dn.index.toString()&&(nn||(nn=Mn[En].firstChild),an=Mn[En].firstChild),Bn(Mn[En]))}if(Ee.set(Ot(ie({},Dn),{index:-1,count:0,text:""})),nn&&an){const En=Se.dom.createRng();return En.setStart(nn,0),En.setEnd(an,an.data.length),Dt!==!1&&Se.selection.setRng(En),En}else return},ke=(Se,Ee)=>Ee.get().count>1,Ae=(Se,Ee)=>Ee.get().count>1,ct=(Se,Ee)=>({done:En=>_r(Se,Ee,En),find:(En,$n,Vn,Xo=!1)=>In(Se,Ee,En,$n,Vn,Xo),next:()=>go(Se,Ee),prev:()=>Ys(Se,Ee),replace:(En,$n,Vn)=>br(Se,Ee,En,$n,Vn)}),xt=Se=>{const Ee=u(G.none()),Dt=()=>Ee.get().each(Se);return{clear:()=>{Dt(),Ee.set(G.none())},isSet:()=>Ee.get().isSome(),get:()=>Ee.get(),set:En=>{Dt(),Ee.set(G.some(En))}}},An=()=>{const Se=xt(N),Ee=Dt=>Se.get().each(Dt);return Ot(ie({},Se),{on:Ee})},Pn=(Se,Ee)=>{const Dt=An();Se.undoManager.add();const nn=be.trim(Se.selection.getContent({format:"text"})),an=Po=>{Po.setEnabled("next",ke(Se,Ee)),Po.setEnabled("prev",Ae(Se,Ee))},Dn=Po=>{const Ho=Po.getData(),ds=Ee.get();Ee.set(Ot(ie({},ds),{matchCase:Ho.matchcase,wholeWord:Ho.wholewords,inSelection:Ho.inselection}))},Mn=(Po,Ho)=>{Ie(["replace","replaceall","prev","next"],Li=>Po.setEnabled(Li,!Ho))},En=(Po,Ho)=>{Ho.redial(Yl(Po,Ho.getData()))},$n=(Po,Ho)=>{Z.browser.isSafari()&&Z.deviceType.isTouch()&&(Ho==="find"||Ho==="replace"||Ho==="replaceall")&&Po.focus(Ho)},Vn=Po=>{_r(Se,Ee,!1),Mn(Po,!0),an(Po)},Xo=Po=>{const Ho=Po.getData(),ds=Ee.get();if(!Ho.findtext.length){Vn(Po);return}if(ds.text===Ho.findtext&&ds.matchCase===Ho.matchcase&&ds.wholeWord===Ho.wholewords)go(Se,Ee);else{const ji=In(Se,Ee,Ho.findtext,Ho.matchcase,Ho.wholewords,Ho.inselection);ji<=0&&En(!0,Po),Mn(Po,ji===0)}an(Po)},Ts=Ee.get(),Ii={findtext:nn,replacetext:"",wholewords:Ts.wholeWord,matchcase:Ts.matchCase,inselection:Ts.inSelection},Oa=Po=>{const Ho=[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}];return Po&&Ho.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),Ho},Yl=(Po,Ho)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:Oa(Po)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:Ho,onChange:(ds,ji)=>{Po&&En(!1,ds),ji.name==="findtext"&&Ee.get().count>0&&Vn(ds)},onAction:(ds,ji)=>{const Li=ds.getData();switch(ji.name){case"find":Xo(ds);break;case"replace":br(Se,Ee,Li.replacetext)?an(ds):Vn(ds);break;case"replaceall":br(Se,Ee,Li.replacetext,!0,!0),Vn(ds);break;case"prev":Ys(Se,Ee),an(ds);break;case"next":go(Se,Ee),an(ds);break;case"matchcase":case"wholewords":case"inselection":En(!1,ds),Dn(ds),Vn(ds);break}$n(ds,ji.name)},onSubmit:ds=>{Xo(ds),$n(ds,"find")},onClose:()=>{Se.focus(),_r(Se,Ee),Se.undoManager.add()}});Dt.set(Se.windowManager.open(Yl(!1,Ii),{inline:"toolbar"}))},_o=(Se,Ee)=>{Se.addCommand("SearchReplace",()=>{Pn(Se,Ee)})},Ws=(Se,Ee)=>()=>{Pn(Se,Ee)},Tt=(Se,Ee)=>{Se.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:Ws(Se,Ee),icon:"search"}),Se.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:Ws(Se,Ee),icon:"search"}),Se.shortcuts.add("Meta+F","",Ws(Se,Ee))};var Lo=()=>{o.add("searchreplace",Se=>{const Ee=u({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return _o(Se,Ee),Tt(Se,Ee),ct(Se,Ee)})};Lo()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(ve,je,ot)=>{var en;return ot(ve,je.prototype)?!0:((en=ve.constructor)===null||en===void 0?void 0:en.name)===je.name},i=ve=>{const je=typeof ve;return ve===null?"null":je==="object"&&Array.isArray(ve)?"array":je==="object"&&o(ve,String,(ot,en)=>en.isPrototypeOf(ot))?"string":je},l=ve=>je=>i(je)===ve,d=ve=>je=>typeof je===ve,m=l("string"),p=l("object"),v=l("array"),x=ve=>ve==null,k=ve=>!x(ve),T=d("function"),R=(ve,je)=>{if(v(ve)){for(let ot=0,en=ve.length;ot<en;++ot)if(!je(ve[ot]))return!1;return!0}return!1},N=ve=>()=>ve;function $(ve,...je){return(...ot)=>{const en=je.concat(ot);return ve.apply(null,en)}}const U=N(!1),X=ve=>ve.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");var J=tinymce.util.Tools.resolve("tinymce.util.Tools");const G=ve=>je=>je.options.get(ve),le=ve=>{const je=ve.options.register;je("template_cdate_classes",{processor:"string",default:"cdate"}),je("template_mdate_classes",{processor:"string",default:"mdate"}),je("template_selected_content_classes",{processor:"string",default:"selcontent"}),je("template_preview_replace_values",{processor:"object"}),je("template_replace_values",{processor:"object"}),je("templates",{processor:ot=>m(ot)||R(ot,p)||T(ot),default:[]}),je("template_cdate_format",{processor:"string",default:ve.translate("%Y-%m-%d")}),je("template_mdate_format",{processor:"string",default:ve.translate("%Y-%m-%d")})},Z=G("template_cdate_classes"),be=G("template_mdate_classes"),He=G("template_selected_content_classes"),Re=G("template_preview_replace_values"),K=G("template_replace_values"),Ie=G("templates"),$e=G("template_cdate_format"),Ue=G("template_mdate_format"),ae=G("content_style"),Oe=G("content_css_cors"),ht=G("body_class"),ne=(ve,je)=>{if(ve=""+ve,ve.length<je)for(let ot=0;ot<je-ve.length;ot++)ve="0"+ve;return ve},ge=(ve,je,ot=new Date)=>{const en="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),Wn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),On="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ho="January February March April May June July August September October November December".split(" ");return je=je.replace("%D","%m/%d/%Y"),je=je.replace("%r","%I:%M:%S %p"),je=je.replace("%Y",""+ot.getFullYear()),je=je.replace("%y",""+ot.getYear()),je=je.replace("%m",ne(ot.getMonth()+1,2)),je=je.replace("%d",ne(ot.getDate(),2)),je=je.replace("%H",""+ne(ot.getHours(),2)),je=je.replace("%M",""+ne(ot.getMinutes(),2)),je=je.replace("%S",""+ne(ot.getSeconds(),2)),je=je.replace("%I",""+((ot.getHours()+11)%12+1)),je=je.replace("%p",ot.getHours()<12?"AM":"PM"),je=je.replace("%B",""+ve.translate(ho[ot.getMonth()])),je=je.replace("%b",""+ve.translate(On[ot.getMonth()])),je=je.replace("%A",""+ve.translate(Wn[ot.getDay()])),je=je.replace("%a",""+ve.translate(en[ot.getDay()])),je=je.replace("%%","%"),je};class O{constructor(je,ot){this.tag=je,this.value=ot}static some(je){return new O(!0,je)}static none(){return O.singletonNone}fold(je,ot){return this.tag?ot(this.value):je()}isSome(){return this.tag}isNone(){return!this.tag}map(je){return this.tag?O.some(je(this.value)):O.none()}bind(je){return this.tag?je(this.value):O.none()}exists(je){return this.tag&&je(this.value)}forall(je){return!this.tag||je(this.value)}filter(je){return!this.tag||je(this.value)?this:O.none()}getOr(je){return this.tag?this.value:je}or(je){return this.tag?this:je}getOrThunk(je){return this.tag?this.value:je()}orThunk(je){return this.tag?this:je()}getOrDie(je){if(this.tag)return this.value;throw new Error(je!=null?je:"Called getOrDie on None")}static from(je){return k(je)?O.some(je):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(je){this.tag&&je(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}O.singletonNone=new O(!1);const Ke=(ve,je)=>{for(let ot=0,en=ve.length;ot<en;ot++){const Wn=ve[ot];if(je(Wn,ot))return!0}return!1},he=(ve,je)=>{const ot=ve.length,en=new Array(ot);for(let Wn=0;Wn<ot;Wn++){const On=ve[Wn];en[Wn]=je(On,Wn)}return en},at=(ve,je,ot)=>{for(let en=0,Wn=ve.length;en<Wn;en++){const On=ve[en];if(je(On,en))return O.some(On);if(ot(On,en))break}return O.none()},qt=(ve,je)=>at(ve,je,U),Pe=Object.hasOwnProperty,We=(ve,je)=>yt(ve,je)?O.from(ve[je]):O.none(),yt=(ve,je)=>Pe.call(ve,je);var Be=tinymce.util.Tools.resolve("tinymce.html.Serializer");const wt={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},ce=ve=>ve.replace(/["'<>&]/g,je=>We(wt,je).getOr(je)),Ze=(ve,je,ot)=>Ke(ot.split(/\s+/),en=>ve.hasClass(je,en)),V=(ve,je)=>Be({validate:!0},ve.schema).serialize(ve.parser.parse(je,{insert:!0})),kn=(ve,je)=>()=>{const ot=Ie(ve);T(ot)?ot(je):m(ot)?fetch(ot).then(en=>{en.ok&&en.json().then(je)}):je(ot)},cn=(ve,je)=>(J.each(je,(ot,en)=>{T(ot)&&(ot=ot(en)),ve=ve.replace(new RegExp("\\{\\$"+X(en)+"\\}","g"),ot)}),ve),no=(ve,je)=>{const ot=ve.dom,en=K(ve);J.each(ot.select("*",je),Wn=>{J.each(en,(On,ho)=>{ot.hasClass(Wn,ho)&&T(On)&&On(Wn)})})},Do=(ve,je,ot)=>{const en=ve.dom,Wn=ve.selection.getContent();ot=cn(ot,K(ve));let On=en.create("div",{},V(ve,ot));const ho=en.select(".mceTmpl",On);ho&&ho.length>0&&(On=en.create("div"),On.appendChild(ho[0].cloneNode(!0))),J.each(en.select("*",On),Kn=>{Ze(en,Kn,Z(ve))&&(Kn.innerHTML=ge(ve,$e(ve))),Ze(en,Kn,be(ve))&&(Kn.innerHTML=ge(ve,Ue(ve))),Ze(en,Kn,He(ve))&&(Kn.innerHTML=Wn)}),no(ve,On),ve.execCommand("mceInsertContent",!1,On.innerHTML),ve.addVisual()};var Cs=tinymce.util.Tools.resolve("tinymce.Env");const Je=(ve,je)=>{var ot;let en=V(ve,je);if(je.indexOf("<html>")===-1){let Wn="";const On=(ot=ae(ve))!==null&&ot!==void 0?ot:"",ho=Oe(ve)?' crossorigin="anonymous"':"";J.each(ve.contentCSS,bn=>{Wn+='<link type="text/css" rel="stylesheet" href="'+ve.documentBaseURI.toAbsolute(bn)+'"'+ho+">"}),On&&(Wn+='<style type="text/css">'+On+"</style>");const Kn=ht(ve),ls=ve.dom.encode,pt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(Cs.os.isMacOS()||Cs.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",Rt=ve.getBody().dir,Wt=Rt?' dir="'+ls(Rt)+'"':"";en='<!DOCTYPE html><html><head><base href="'+ls(ve.documentBaseURI.getURI())+'">'+Wn+pt+'</head><body class="'+ls(Kn)+'"'+Wt+">"+en+"</body></html>"}return cn(en,Re(ve))},Bt=(ve,je)=>{const ot=()=>{if(!je||je.length===0){const Rt=ve.translate("No templates defined.");return ve.notificationManager.open({text:Rt,type:"info"}),O.none()}return O.from(J.map(je,(Rt,Wt)=>{const bn=oo=>oo.url!==void 0;return{selected:Wt===0,text:Rt.title,value:{url:bn(Rt)?O.from(Rt.url):O.none(),content:bn(Rt)?O.none():O.from(Rt.content),description:Rt.description}}}))},en=Rt=>he(Rt,Wt=>({text:Wt.text,value:Wt.text})),Wn=(Rt,Wt)=>qt(Rt,bn=>bn.text===Wt),On=Rt=>{ve.windowManager.alert("Could not load the specified template.",()=>Rt.focus("template"))},ho=Rt=>Rt.value.url.fold(()=>Promise.resolve(Rt.value.content.getOr("")),Wt=>fetch(Wt).then(bn=>bn.ok?bn.text():Promise.reject())),Kn=(Rt,Wt)=>(bn,oo)=>{if(oo.name==="template"){const ao=bn.getData().template;Wn(Rt,ao).each(Qo=>{bn.block("Loading..."),ho(Qo).then(Fo=>{Wt(bn,Qo,Fo)}).catch(()=>{Wt(bn,Qo,""),bn.setEnabled("save",!1),On(bn)})})}},ls=Rt=>Wt=>{const bn=Wt.getData();Wn(Rt,bn.template).each(oo=>{ho(oo).then(ao=>{ve.execCommand("mceInsertTemplate",!1,ao),Wt.close()}).catch(()=>{Wt.setEnabled("save",!1),On(Wt)})})},Ye=Rt=>{const Wt=en(Rt),bn=(Qo,Fo)=>({title:"Insert Template",size:"large",body:{type:"panel",items:Qo},initialData:Fo,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:ls(Rt),onChange:Kn(Rt,oo)}),oo=(Qo,Fo,cs)=>{const $t=Je(ve,cs),xo=[{type:"listbox",name:"template",label:"Templates",items:Wt},{type:"htmlpanel",html:`<p aria-live="polite">${ce(Fo.value.description)}</p>`},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1,transparent:!1}],Qs={template:Fo.text,preview:$t};Qo.unblock(),Qo.redial(bn(xo,Qs)),Qo.focus("template")},ao=ve.windowManager.open(bn([],{template:"",preview:""}));ao.block("Loading..."),ho(Rt[0]).then(Qo=>{oo(ao,Rt[0],Qo)}).catch(()=>{oo(ao,Rt[0],""),ao.setEnabled("save",!1),On(ao)})};ot().each(Ye)},tt=ve=>je=>{Bt(ve,je)},ue=ve=>{ve.addCommand("mceInsertTemplate",$(Do,ve)),ve.addCommand("mceTemplate",kn(ve,tt(ve)))},xe=ve=>{ve.on("PreProcess",je=>{const ot=ve.dom,en=Ue(ve);J.each(ot.select("div",je.node),Wn=>{ot.hasClass(Wn,"mceTmpl")&&(J.each(ot.select("*",Wn),On=>{Ze(ot,On,be(ve))&&(On.innerHTML=ge(ve,en))}),no(ve,Wn))})})},Ne=ve=>je=>{const ot=()=>{je.setEnabled(ve.selection.isEditable())};return ve.on("NodeChange",ot),ot(),()=>{ve.off("NodeChange",ot)}},Me=ve=>{const je=()=>ve.execCommand("mceTemplate");ve.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onSetup:Ne(ve),onAction:je}),ve.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onSetup:Ne(ve),onAction:je})};var kt=()=>{u.add("template",ve=>{le(ve),Me(ve),ue(ve),xe(ve)})};kt()})();(function(){const u=N=>{let $=N;return{get:()=>$,set:J=>{$=J}}};var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=(N,$)=>{N.dispatch("VisualBlocks",{state:$})},l=(N,$,U)=>{N.dom.toggleClass(N.getBody(),"mce-visualblocks"),U.set(!U.get()),i(N,U.get())},d=(N,$,U)=>{N.addCommand("mceVisualBlocks",()=>{l(N,$,U)})},m=N=>$=>$.options.get(N),p=N=>{const $=N.options.register;$("visualblocks_default_state",{processor:"boolean",default:!1})},v=m("visualblocks_default_state"),x=(N,$,U)=>{N.on("PreviewFormats AfterPreviewFormats",X=>{U.get()&&N.dom.toggleClass(N.getBody(),"mce-visualblocks",X.type==="afterpreviewformats")}),N.on("init",()=>{v(N)&&l(N,$,U)})},k=(N,$)=>U=>{U.setActive($.get());const X=J=>U.setActive(J.state);return N.on("VisualBlocks",X),()=>N.off("VisualBlocks",X)},T=(N,$)=>{const U=()=>N.execCommand("mceVisualBlocks");N.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:U,onSetup:k(N,$)}),N.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:U,onSetup:k(N,$)})};var R=()=>{o.add("visualblocks",(N,$)=>{p(N);const U=u(!1);d(N,$,U),T(N,U),x(N,$,U)})};R()})();(function(){const u=Ge=>{let dt=Ge;return{get:()=>dt,set:go=>{dt=go}}};var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=Ge=>({isEnabled:()=>Ge.get()}),l=(Ge,dt)=>Ge.dispatch("VisualChars",{state:dt}),d=(Ge,dt,tn)=>{var In;return tn(Ge,dt.prototype)?!0:((In=Ge.constructor)===null||In===void 0?void 0:In.name)===dt.name},m=Ge=>{const dt=typeof Ge;return Ge===null?"null":dt==="object"&&Array.isArray(Ge)?"array":dt==="object"&&d(Ge,String,(tn,In)=>In.isPrototypeOf(tn))?"string":dt},p=Ge=>dt=>m(dt)===Ge,v=Ge=>dt=>typeof dt===Ge,x=Ge=>dt=>Ge===dt,k=p("string"),T=p("object"),R=x(null),N=v("boolean"),$=Ge=>Ge==null,U=Ge=>!$(Ge),X=v("number");class J{constructor(dt,tn){this.tag=dt,this.value=tn}static some(dt){return new J(!0,dt)}static none(){return J.singletonNone}fold(dt,tn){return this.tag?tn(this.value):dt()}isSome(){return this.tag}isNone(){return!this.tag}map(dt){return this.tag?J.some(dt(this.value)):J.none()}bind(dt){return this.tag?dt(this.value):J.none()}exists(dt){return this.tag&&dt(this.value)}forall(dt){return!this.tag||dt(this.value)}filter(dt){return!this.tag||dt(this.value)?this:J.none()}getOr(dt){return this.tag?this.value:dt}or(dt){return this.tag?this:dt}getOrThunk(dt){return this.tag?this.value:dt()}orThunk(dt){return this.tag?this:dt()}getOrDie(dt){if(this.tag)return this.value;throw new Error(dt!=null?dt:"Called getOrDie on None")}static from(dt){return U(dt)?J.some(dt):J.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(dt){this.tag&&dt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}J.singletonNone=new J(!1);const G=(Ge,dt)=>{const tn=Ge.length,In=new Array(tn);for(let go=0;go<tn;go++){const Ys=Ge[go];In[go]=dt(Ys,go)}return In},le=(Ge,dt)=>{for(let tn=0,In=Ge.length;tn<In;tn++){const go=Ge[tn];dt(go,tn)}},Z=(Ge,dt)=>{const tn=[];for(let In=0,go=Ge.length;In<go;In++){const Ys=Ge[In];dt(Ys,In)&&tn.push(Ys)}return tn},be=Object.keys,He=(Ge,dt)=>{const tn=be(Ge);for(let In=0,go=tn.length;In<go;In++){const Ys=tn[In],Hr=Ge[Ys];dt(Hr,Ys)}},Re=typeof window!="undefined"?window:Function("return this;")(),K=(Ge,dt)=>{let tn=dt!=null?dt:Re;for(let In=0;In<Ge.length&&tn!==void 0&&tn!==null;++In)tn=tn[Ge[In]];return tn},Ie=(Ge,dt)=>{const tn=Ge.split(".");return K(tn,dt)},$e=(Ge,dt)=>Ie(Ge,dt),Ue=(Ge,dt)=>{const tn=$e(Ge,dt);if(tn==null)throw new Error(Ge+" not available on this browser");return tn},ae=Object.getPrototypeOf,Oe=Ge=>Ue("HTMLElement",Ge),ht=Ge=>{const dt=Ie("ownerDocument.defaultView",Ge);return T(Ge)&&(Oe(dt).prototype.isPrototypeOf(Ge)||/^HTML\w*Element$/.test(ae(Ge).constructor.name))},ne=1,ge=3,O=Ge=>Ge.dom.nodeType,Ke=Ge=>Ge.dom.nodeValue,he=Ge=>dt=>O(dt)===Ge,at=Ge=>qt(Ge)&&ht(Ge.dom),qt=he(ne),Pe=he(ge),We=(Ge,dt,tn)=>{if(k(tn)||N(tn)||X(tn))Ge.setAttribute(dt,tn+"");else throw new Error("Attribute value was not simple")},yt=(Ge,dt,tn)=>{We(Ge.dom,dt,tn)},Be=(Ge,dt)=>{const tn=Ge.dom.getAttribute(dt);return tn===null?void 0:tn},wt=(Ge,dt)=>{Ge.dom.removeAttribute(dt)},ce=(Ge,dt)=>{const tn=Be(Ge,dt);return tn===void 0||tn===""?[]:tn.split(" ")},Ze=(Ge,dt,tn)=>{const go=ce(Ge,dt).concat([tn]);return yt(Ge,dt,go.join(" ")),!0},V=(Ge,dt,tn)=>{const In=Z(ce(Ge,dt),go=>go!==tn);return In.length>0?yt(Ge,dt,In.join(" ")):wt(Ge,dt),!1},kn=Ge=>Ge.dom.classList!==void 0,cn=Ge=>ce(Ge,"class"),no=(Ge,dt)=>Ze(Ge,"class",dt),Do=(Ge,dt)=>V(Ge,"class",dt),Cs=(Ge,dt)=>{kn(Ge)?Ge.dom.classList.add(dt):no(Ge,dt)},Je=Ge=>{(kn(Ge)?Ge.dom.classList:cn(Ge)).length===0&&wt(Ge,"class")},Bt=(Ge,dt)=>{kn(Ge)?Ge.dom.classList.remove(dt):Do(Ge,dt),Je(Ge)},tt=(Ge,dt)=>{const In=(dt||document).createElement("div");if(In.innerHTML=Ge,!In.hasChildNodes()||In.childNodes.length>1){const go="HTML does not have a single root node";throw new Error(go)}return Ne(In.childNodes[0])},ue=(Ge,dt)=>{const In=(dt||document).createElement(Ge);return Ne(In)},xe=(Ge,dt)=>{const In=(dt||document).createTextNode(Ge);return Ne(In)},Ne=Ge=>{if(Ge==null)throw new Error("Node cannot be null or undefined");return{dom:Ge}},kt={fromHtml:tt,fromTag:ue,fromText:xe,fromDom:Ne,fromPoint:(Ge,dt,tn)=>J.from(Ge.dom.elementFromPoint(dt,tn)).map(Ne)},ve={" ":"nbsp","­":"shy"},je=(Ge,dt)=>{let tn="";return He(Ge,(In,go)=>{tn+=go}),new RegExp("["+tn+"]",dt?"g":"")},ot=Ge=>{let dt="";return He(Ge,tn=>{dt&&(dt+=","),dt+="span.mce-"+tn}),dt},en=je(ve),Wn=je(ve,!0),On=ot(ve),ho="mce-nbsp",Kn=Ge=>Ge.dom.contentEditable,ls=Ge=>'<span data-mce-bogus="1" class="mce-'+ve[Ge]+'">'+Ge+"</span>",Ye=Ge=>Ge.nodeName.toLowerCase()==="span"&&Ge.classList.contains("mce-nbsp-wrap"),pt=Ge=>{const dt=Ke(Ge);return Pe(Ge)&&k(dt)&&en.test(dt)},Rt=Ge=>at(Ge)&&Kn(Ge)==="false",Wt=(Ge,dt)=>{if(at(Ge)&&!Ye(Ge.dom)){const tn=Kn(Ge);if(tn==="true")return!0;if(tn==="false")return!1}return dt},bn=(Ge,dt,tn)=>{let In=[];const go=Ge.dom,Ys=G(go.childNodes,kt.fromDom),Hr=br=>Ye(br.dom)||!Rt(br);return le(Ys,br=>{tn&&Hr(br)&&dt(br)&&(In=In.concat([br])),In=In.concat(bn(br,dt,Wt(br,tn)))}),In},oo=(Ge,dt)=>{for(;Ge.parentNode;){if(Ge.parentNode===dt)return dt;Ge=Ge.parentNode}},ao=Ge=>Ge.replace(Wn,ls),Qo=(Ge,dt)=>{const tn=Ge.dom,In=bn(kt.fromDom(dt),pt,Ge.dom.isEditable(dt));le(In,go=>{var Ys;const Hr=go.dom.parentNode;if(Ye(Hr))Cs(kt.fromDom(Hr),ho);else{const br=ao(tn.encode((Ys=Ke(go))!==null&&Ys!==void 0?Ys:"")),_r=tn.create("div",{},br);let ke;for(;ke=_r.lastChild;)tn.insertAfter(ke,go.dom);Ge.dom.remove(go.dom)}})},Fo=(Ge,dt)=>{const tn=Ge.dom.select(On,dt);le(tn,In=>{Ye(In)?Bt(kt.fromDom(In),ho):Ge.dom.remove(In,!0)})},cs=Ge=>{const dt=Ge.getBody(),tn=Ge.selection.getBookmark();let In=oo(Ge.selection.getNode(),dt);In=In!==void 0?In:dt,Fo(Ge,In),Qo(Ge,In),Ge.selection.moveToBookmark(tn)},$t=(Ge,dt)=>{l(Ge,dt.get());const tn=Ge.getBody();dt.get()===!0?Qo(Ge,tn):Fo(Ge,tn)},xo=(Ge,dt)=>{dt.set(!dt.get());const tn=Ge.selection.getBookmark();$t(Ge,dt),Ge.selection.moveToBookmark(tn)},Qs=(Ge,dt)=>{Ge.addCommand("mceVisualChars",()=>{xo(Ge,dt)})},Sr=Ge=>dt=>dt.options.get(Ge),Gr=Ge=>{const dt=Ge.options.register;dt("visualchars_default_state",{processor:"boolean",default:!1})},pr=Sr("visualchars_default_state"),di=(Ge,dt)=>{Ge.on("init",()=>{$t(Ge,dt)})},Cr=(Ge,dt)=>{let tn=null;return{cancel:()=>{R(tn)||(clearTimeout(tn),tn=null)},throttle:(...Ys)=>{R(tn)&&(tn=setTimeout(()=>{tn=null,Ge.apply(null,Ys)},dt))}}},fi=(Ge,dt)=>{const tn=Cr(()=>{cs(Ge)},300);Ge.on("keydown",In=>{dt.get()===!0&&(In.keyCode===13?cs(Ge):tn.throttle())}),Ge.on("remove",tn.cancel)},us=(Ge,dt)=>tn=>{tn.setActive(dt.get());const In=go=>tn.setActive(go.state);return Ge.on("VisualChars",In),()=>Ge.off("VisualChars",In)},Bn=(Ge,dt)=>{const tn=()=>Ge.execCommand("mceVisualChars");Ge.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:tn,onSetup:us(Ge,dt)}),Ge.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:tn,onSetup:us(Ge,dt)})};var hi=()=>{o.add("visualchars",Ge=>{Gr(Ge);const dt=u(pr(Ge));return Qs(Ge,dt),Bn(Ge,dt),fi(Ge,dt),di(Ge,dt),i(dt)})};hi()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=(Je=>Bt=>Je===Bt)(null),l=Je=>Je,d=(Je,Bt)=>{const tt=Je.length,ue=new Array(tt);for(let xe=0;xe<tt;xe++){const Ne=Je[xe];ue[xe]=Bt(Ne,xe)}return ue},p={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},v={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},x=[new RegExp(p.aletter),new RegExp(p.midnumlet),new RegExp(p.midletter),new RegExp(p.midnum),new RegExp(p.numeric),new RegExp(p.cr),new RegExp(p.lf),new RegExp(p.newline),new RegExp(p.extend),new RegExp(p.format),new RegExp(p.katakana),new RegExp(p.extendnumlet),new RegExp("@")],k="",T=new RegExp("^"+p.punctuation+"$"),R=/^\s+$/,N=x,$=v.OTHER,U=Je=>{let Bt=$;const tt=N.length;for(let ue=0;ue<tt;++ue){const xe=N[ue];if(xe&&xe.test(Je)){Bt=ue;break}}return Bt},X=Je=>{const Bt={};return tt=>{if(Bt[tt])return Bt[tt];{const ue=Je(tt);return Bt[tt]=ue,ue}}},J=Je=>{const Bt=X(U);return d(Je,Bt)},G=(Je,Bt)=>{const tt=Je[Bt],ue=Je[Bt+1];if(Bt<0||Bt>Je.length-1&&Bt!==0||tt===v.ALETTER&&ue===v.ALETTER)return!1;const xe=Je[Bt+2];if(tt===v.ALETTER&&(ue===v.MIDLETTER||ue===v.MIDNUMLET||ue===v.AT)&&xe===v.ALETTER)return!1;const Ne=Je[Bt-1];return(tt===v.MIDLETTER||tt===v.MIDNUMLET||ue===v.AT)&&ue===v.ALETTER&&Ne===v.ALETTER||(tt===v.NUMERIC||tt===v.ALETTER)&&(ue===v.NUMERIC||ue===v.ALETTER)||(tt===v.MIDNUM||tt===v.MIDNUMLET)&&ue===v.NUMERIC&&Ne===v.NUMERIC||tt===v.NUMERIC&&(ue===v.MIDNUM||ue===v.MIDNUMLET)&&xe===v.NUMERIC||(tt===v.EXTEND||tt===v.FORMAT)&&(ue===v.ALETTER||ue===v.NUMERIC||ue===v.KATAKANA||ue===v.EXTEND||ue===v.FORMAT)||(ue===v.EXTEND||ue===v.FORMAT&&(xe===v.ALETTER||xe===v.NUMERIC||xe===v.KATAKANA||xe===v.EXTEND||xe===v.FORMAT))&&(tt===v.ALETTER||tt===v.NUMERIC||tt===v.KATAKANA||tt===v.EXTEND||tt===v.FORMAT)||tt===v.CR&&ue===v.LF?!1:tt===v.NEWLINE||tt===v.CR||tt===v.LF||ue===v.NEWLINE||ue===v.CR||ue===v.LF?!0:!(tt===v.KATAKANA&&ue===v.KATAKANA||ue===v.EXTENDNUMLET&&(tt===v.ALETTER||tt===v.NUMERIC||tt===v.KATAKANA||tt===v.EXTENDNUMLET)||tt===v.EXTENDNUMLET&&(ue===v.ALETTER||ue===v.NUMERIC||ue===v.KATAKANA)||tt===v.AT)},le=k,Z=R,be=T,He=Je=>Je==="http"||Je==="https",Re=(Je,Bt)=>{let tt;for(tt=Bt;tt<Je.length&&!Z.test(Je[tt]);tt++);return tt},K=(Je,Bt)=>{const tt=Re(Je,Bt+1);return Je.slice(Bt+1,tt).join(le).substr(0,3)==="://"?tt:Bt},Ie=(Je,Bt,tt,ue)=>{const xe=[],Ne=[];let Me=[];for(let kt=0;kt<tt.length;++kt)if(Me.push(Je[kt]),G(tt,kt)){const ve=Bt[kt];if((ue.includeWhitespace||!Z.test(ve))&&(ue.includePunctuation||!be.test(ve))){const je=kt-Me.length+1,ot=kt+1,en=Bt.slice(je,ot).join(le);if(He(en)){const Wn=K(Bt,kt),On=Je.slice(ot,Wn);Array.prototype.push.apply(Me,On),kt=Wn}xe.push(Me),Ne.push({start:je,end:ot})}Me=[]}return{words:xe,indices:Ne}},$e=()=>({includeWhitespace:!1,includePunctuation:!1}),Ue=(Je,Bt,tt)=>{tt=ie(ie({},$e()),tt);const ue=d(Je,Bt),xe=J(ue);return Ie(Je,ue,xe,tt)},Oe=(Je,Bt,tt)=>Ue(Je,Bt,tt).words,ht=Je=>Je.replace(/\uFEFF/g,"");var ne=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const ge=(Je,Bt)=>{const tt=Bt.getBlockElements(),ue=Bt.getVoidElements(),xe=je=>tt[je.nodeName]||ue[je.nodeName],Ne=[];let Me="";const kt=new ne(Je,Je);let ve;for(;ve=kt.next();)ve.nodeType===3?Me+=ht(ve.data):xe(ve)&&Me.length&&(Ne.push(Me),Me="");return Me.length&&Ne.push(Me),Ne},O=Je=>Je.replace(/\u200B/g,""),Ke=Je=>Je.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,he=(Je,Bt)=>{const tt=O(ge(Je,Bt).join(`
`));return Oe(tt.split(""),l).length},at=(Je,Bt)=>{const tt=ge(Je,Bt).join("");return Ke(tt)},qt=(Je,Bt)=>{const tt=ge(Je,Bt).join("").replace(/\s/g,"");return Ke(tt)},Pe=(Je,Bt)=>()=>Bt(Je.getBody(),Je.schema),We=(Je,Bt)=>()=>Bt(Je.selection.getRng().cloneContents(),Je.schema),yt=Je=>Pe(Je,he),Be=Je=>({body:{getWordCount:yt(Je),getCharacterCount:Pe(Je,at),getCharacterCountWithoutSpaces:Pe(Je,qt)},selection:{getWordCount:We(Je,he),getCharacterCount:We(Je,at),getCharacterCountWithoutSpaces:We(Je,qt)},getCount:yt(Je)}),wt=(Je,Bt)=>{Je.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(Bt.body.getWordCount()),String(Bt.selection.getWordCount())],["Characters (no spaces)",String(Bt.body.getCharacterCountWithoutSpaces()),String(Bt.selection.getCharacterCountWithoutSpaces())],["Characters",String(Bt.body.getCharacterCount()),String(Bt.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},ce=(Je,Bt)=>{Je.addCommand("mceWordCount",()=>wt(Je,Bt))},Ze=(Je,Bt)=>{let tt=null;return{cancel:()=>{i(tt)||(clearTimeout(tt),tt=null)},throttle:(...Ne)=>{i(tt)&&(tt=setTimeout(()=>{tt=null,Je.apply(null,Ne)},Bt))}}};var V=tinymce.util.Tools.resolve("tinymce.util.Delay");const kn=(Je,Bt)=>{Je.dispatch("wordCountUpdate",{wordCount:{words:Bt.body.getWordCount(),characters:Bt.body.getCharacterCount(),charactersWithoutSpaces:Bt.body.getCharacterCountWithoutSpaces()}})},cn=(Je,Bt)=>{kn(Je,Bt)},no=(Je,Bt,tt)=>{const ue=Ze(()=>cn(Je,Bt),tt);Je.on("init",()=>{cn(Je,Bt),V.setEditorTimeout(Je,()=>{Je.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",ue.throttle)},0),Je.on("remove",ue.cancel)})},Do=Je=>{const Bt=()=>Je.execCommand("mceWordCount");Je.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:Bt}),Je.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:Bt})};var Cs=(Je=300)=>{u.add("wordcount",Bt=>{const tt=Be(Bt);return ce(Bt,tt),Do(Bt),no(Bt,tt,Je),tt})};Cs()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=Object.getPrototypeOf,i=(z,se,pe)=>{var lt;return pe(z,se.prototype)?!0:((lt=z.constructor)===null||lt===void 0?void 0:lt.name)===se.name},l=z=>{const se=typeof z;return z===null?"null":se==="object"&&Array.isArray(z)?"array":se==="object"&&i(z,String,(pe,lt)=>lt.isPrototypeOf(pe))?"string":se},d=z=>se=>l(se)===z,m=z=>se=>typeof se===z,p=z=>se=>z===se,v=(z,se)=>k(z)&&i(z,se,(pe,lt)=>o(pe)===lt),x=d("string"),k=d("object"),T=z=>v(z,Object),R=d("array"),N=p(null),$=m("boolean"),U=z=>z==null,X=z=>!U(z),J=m("function"),G=m("number"),le=(z,se)=>{if(R(z)){for(let pe=0,lt=z.length;pe<lt;++pe)if(!se(z[pe]))return!1;return!0}return!1},Z=()=>{};class be{constructor(se,pe){this.tag=se,this.value=pe}static some(se){return new be(!0,se)}static none(){return be.singletonNone}fold(se,pe){return this.tag?pe(this.value):se()}isSome(){return this.tag}isNone(){return!this.tag}map(se){return this.tag?be.some(se(this.value)):be.none()}bind(se){return this.tag?se(this.value):be.none()}exists(se){return this.tag&&se(this.value)}forall(se){return!this.tag||se(this.value)}filter(se){return!this.tag||se(this.value)?this:be.none()}getOr(se){return this.tag?this.value:se}or(se){return this.tag?this:se}getOrThunk(se){return this.tag?this.value:se()}orThunk(se){return this.tag?this:se()}getOrDie(se){if(this.tag)return this.value;throw new Error(se!=null?se:"Called getOrDie on None")}static from(se){return X(se)?be.some(se):be.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(se){this.tag&&se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}be.singletonNone=new be(!1);const He=Object.keys,Re=Object.hasOwnProperty,K=(z,se)=>{const pe=He(z);for(let lt=0,un=pe.length;lt<un;lt++){const Uo=pe[lt],xn=z[Uo];se(xn,Uo)}},Ie=z=>(se,pe)=>{z[pe]=se},$e=(z,se,pe,lt)=>{K(z,(un,Uo)=>{(se(un,Uo)?pe:lt)(un,Uo)})},Ue=(z,se)=>{const pe={};return $e(z,se,Ie(pe),Z),pe},ae=(z,se)=>Re.call(z,se),Oe=(z,se)=>ae(z,se)&&z[se]!==void 0&&z[se]!==null,ht=Array.prototype.push,ne=z=>{const se=[];for(let pe=0,lt=z.length;pe<lt;++pe){if(!R(z[pe]))throw new Error("Arr.flatten item "+pe+" was not an array, input: "+z);ht.apply(se,z[pe])}return se},ge=(z,se)=>se>=0&&se<z.length?be.some(z[se]):be.none(),O=z=>ge(z,0),Ke=(z,se)=>{for(let pe=0;pe<z.length;pe++){const lt=se(z[pe],pe);if(lt.isSome())return lt}return be.none()};typeof window!="undefined"||Function("return this;")();const he=(z,se,pe)=>{if(x(pe)||$(pe)||G(pe))z.setAttribute(se,pe+"");else throw new Error("Attribute value was not simple")},at=(z,se,pe)=>{he(z.dom,se,pe)},qt=(z,se)=>{z.dom.removeAttribute(se)},Pe=(z,se)=>{const lt=(se||document).createElement("div");if(lt.innerHTML=z,!lt.hasChildNodes()||lt.childNodes.length>1){const un="HTML does not have a single root node";throw new Error(un)}return Be(lt.childNodes[0])},We=(z,se)=>{const lt=(se||document).createElement(z);return Be(lt)},yt=(z,se)=>{const lt=(se||document).createTextNode(z);return Be(lt)},Be=z=>{if(z==null)throw new Error("Node cannot be null or undefined");return{dom:z}},ce={fromHtml:Pe,fromTag:We,fromText:yt,fromDom:Be,fromPoint:(z,se,pe)=>be.from(z.dom.elementFromPoint(se,pe)).map(Be)};var Ze=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),V=tinymce.util.Tools.resolve("tinymce.util.URI");const kn=z=>z.length>0,cn=z=>se=>se.options.get(z),no=z=>{const se=z.options.register;se("image_dimensions",{processor:"boolean",default:!0}),se("image_advtab",{processor:"boolean",default:!1}),se("image_uploadtab",{processor:"boolean",default:!0}),se("image_prepend_url",{processor:"string",default:""}),se("image_class_list",{processor:"object[]"}),se("image_description",{processor:"boolean",default:!0}),se("image_title",{processor:"boolean",default:!1}),se("image_caption",{processor:"boolean",default:!1}),se("image_list",{processor:pe=>{const lt=pe===!1||x(pe)||le(pe,k)||J(pe);return lt?{value:pe,valid:lt}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},Do=cn("image_dimensions"),Cs=cn("image_advtab"),Je=cn("image_uploadtab"),Bt=cn("image_prepend_url"),tt=cn("image_class_list"),ue=cn("image_description"),xe=cn("image_title"),Ne=cn("image_caption"),Me=cn("image_list"),kt=cn("a11y_advanced_options"),ve=cn("automatic_uploads"),je=z=>kn(z.options.get("images_upload_url")),ot=z=>X(z.options.get("images_upload_handler")),en=(z,se)=>Math.max(parseInt(z,10),parseInt(se,10)),Wn=z=>new Promise(se=>{const pe=document.createElement("img"),lt=Uo=>{pe.onload=pe.onerror=null,pe.parentNode&&pe.parentNode.removeChild(pe),se(Uo)};pe.onload=()=>{const Uo=en(pe.width,pe.clientWidth),xn=en(pe.height,pe.clientHeight),si={width:Uo,height:xn};lt(Promise.resolve(si))},pe.onerror=()=>{lt(Promise.reject(`Failed to get image dimensions for: ${z}`))};const un=pe.style;un.visibility="hidden",un.position="fixed",un.bottom=un.left="0px",un.width=un.height="auto",document.body.appendChild(pe),pe.src=z}),On=z=>(z&&(z=z.replace(/px$/,"")),z),ho=z=>(z.length>0&&/^[0-9]+$/.test(z)&&(z+="px"),z),Kn=z=>{if(z.margin){const se=String(z.margin).split(" ");switch(se.length){case 1:z["margin-top"]=z["margin-top"]||se[0],z["margin-right"]=z["margin-right"]||se[0],z["margin-bottom"]=z["margin-bottom"]||se[0],z["margin-left"]=z["margin-left"]||se[0];break;case 2:z["margin-top"]=z["margin-top"]||se[0],z["margin-right"]=z["margin-right"]||se[1],z["margin-bottom"]=z["margin-bottom"]||se[0],z["margin-left"]=z["margin-left"]||se[1];break;case 3:z["margin-top"]=z["margin-top"]||se[0],z["margin-right"]=z["margin-right"]||se[1],z["margin-bottom"]=z["margin-bottom"]||se[2],z["margin-left"]=z["margin-left"]||se[1];break;case 4:z["margin-top"]=z["margin-top"]||se[0],z["margin-right"]=z["margin-right"]||se[1],z["margin-bottom"]=z["margin-bottom"]||se[2],z["margin-left"]=z["margin-left"]||se[3]}delete z.margin}return z},ls=(z,se)=>{const pe=Me(z);x(pe)?fetch(pe).then(lt=>{lt.ok&&lt.json().then(se)}):J(pe)?pe(se):se(pe)},Ye=(z,se,pe)=>{const lt=()=>{pe.onload=pe.onerror=null,z.selection&&(z.selection.select(pe),z.nodeChanged())};pe.onload=()=>{!se.width&&!se.height&&Do(z)&&z.dom.setAttribs(pe,{width:String(pe.clientWidth),height:String(pe.clientHeight)}),lt()},pe.onerror=lt},pt=z=>new Promise((se,pe)=>{const lt=new FileReader;lt.onload=()=>{se(lt.result)},lt.onerror=()=>{var un;pe((un=lt.error)===null||un===void 0?void 0:un.message)},lt.readAsDataURL(z)}),Rt=z=>z.nodeName==="IMG"&&(z.hasAttribute("data-mce-object")||z.hasAttribute("data-mce-placeholder")),Wt=(z,se)=>{const pe=z.options.get;return V.isDomSafe(se,"img",{allow_html_data_urls:pe("allow_html_data_urls"),allow_script_urls:pe("allow_script_urls"),allow_svg_data_urls:pe("allow_svg_data_urls")})},bn=Ze.DOM,oo=z=>z.style.marginLeft&&z.style.marginRight&&z.style.marginLeft===z.style.marginRight?On(z.style.marginLeft):"",ao=z=>z.style.marginTop&&z.style.marginBottom&&z.style.marginTop===z.style.marginBottom?On(z.style.marginTop):"",Qo=z=>z.style.borderWidth?On(z.style.borderWidth):"",Fo=(z,se)=>{var pe;return z.hasAttribute(se)&&(pe=z.getAttribute(se))!==null&&pe!==void 0?pe:""},cs=z=>z.parentNode!==null&&z.parentNode.nodeName==="FIGURE",$t=(z,se,pe)=>{pe===""||pe===null?z.removeAttribute(se):z.setAttribute(se,pe)},xo=z=>{const se=bn.create("figure",{class:"image"});bn.insertAfter(se,z),se.appendChild(z),se.appendChild(bn.create("figcaption",{contentEditable:"true"},"Caption")),se.contentEditable="false"},Qs=z=>{const se=z.parentNode;X(se)&&(bn.insertAfter(z,se),bn.remove(se))},Sr=z=>{cs(z)?Qs(z):xo(z)},Gr=(z,se)=>{const pe=z.getAttribute("style"),lt=se(pe!==null?pe:"");lt.length>0?(z.setAttribute("style",lt),z.setAttribute("data-mce-style",lt)):z.removeAttribute("style")},pr=(z,se)=>(pe,lt,un)=>{const Uo=pe.style;Uo[lt]?(Uo[lt]=ho(un),Gr(pe,se)):$t(pe,lt,un)},di=(z,se)=>z.style[se]?On(z.style[se]):Fo(z,se),Cr=(z,se)=>{const pe=ho(se);z.style.marginLeft=pe,z.style.marginRight=pe},fi=(z,se)=>{const pe=ho(se);z.style.marginTop=pe,z.style.marginBottom=pe},us=(z,se)=>{const pe=ho(se);z.style.borderWidth=pe},Bn=(z,se)=>{z.style.borderStyle=se},hi=z=>{var se;return(se=z.style.borderStyle)!==null&&se!==void 0?se:""},Ge=z=>X(z)&&z.nodeName==="FIGURE",dt=z=>z.nodeName==="IMG",tn=z=>bn.getAttrib(z,"alt").length===0&&bn.getAttrib(z,"role")==="presentation",In=z=>tn(z)?"":Fo(z,"alt"),go=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Ys=(z,se)=>{var pe;const lt=document.createElement("img");return $t(lt,"style",se.style),(oo(lt)||se.hspace!=="")&&Cr(lt,se.hspace),(ao(lt)||se.vspace!=="")&&fi(lt,se.vspace),(Qo(lt)||se.border!=="")&&us(lt,se.border),(hi(lt)||se.borderStyle!=="")&&Bn(lt,se.borderStyle),z((pe=lt.getAttribute("style"))!==null&&pe!==void 0?pe:"")},Hr=(z,se)=>{const pe=document.createElement("img");if(xt(z,Ot(ie({},se),{caption:!1}),pe),ke(pe,se.alt,se.isDecorative),se.caption){const lt=bn.create("figure",{class:"image"});return lt.appendChild(pe),lt.appendChild(bn.create("figcaption",{contentEditable:"true"},"Caption")),lt.contentEditable="false",lt}else return pe},br=(z,se)=>({src:Fo(se,"src"),alt:In(se),title:Fo(se,"title"),width:di(se,"width"),height:di(se,"height"),class:Fo(se,"class"),style:z(Fo(se,"style")),caption:cs(se),hspace:oo(se),vspace:ao(se),border:Qo(se),borderStyle:hi(se),isDecorative:tn(se)}),_r=(z,se,pe,lt,un)=>{pe[lt]!==se[lt]&&un(z,lt,String(pe[lt]))},ke=(z,se,pe)=>{if(pe){bn.setAttrib(z,"role","presentation");const lt=ce.fromDom(z);at(lt,"alt","")}else{if(N(se)){const lt=ce.fromDom(z);qt(lt,"alt")}else{const lt=ce.fromDom(z);at(lt,"alt",se)}bn.getAttrib(z,"role")==="presentation"&&bn.setAttrib(z,"role","")}},Ae=(z,se,pe)=>{(pe.alt!==se.alt||pe.isDecorative!==se.isDecorative)&&ke(z,pe.alt,pe.isDecorative)},ct=(z,se)=>(pe,lt,un)=>{z(pe,un),Gr(pe,se)},xt=(z,se,pe)=>{const lt=br(z,pe);_r(pe,lt,se,"caption",(un,Uo,xn)=>Sr(un)),_r(pe,lt,se,"src",$t),_r(pe,lt,se,"title",$t),_r(pe,lt,se,"width",pr("width",z)),_r(pe,lt,se,"height",pr("height",z)),_r(pe,lt,se,"class",$t),_r(pe,lt,se,"style",ct((un,Uo)=>$t(un,"style",Uo),z)),_r(pe,lt,se,"hspace",ct(Cr,z)),_r(pe,lt,se,"vspace",ct(fi,z)),_r(pe,lt,se,"border",ct(us,z)),_r(pe,lt,se,"borderStyle",ct(Bn,z)),Ae(pe,lt,se)},An=(z,se)=>{const pe=z.dom.styles.parse(se),lt=Kn(pe),un=z.dom.styles.parse(z.dom.styles.serialize(lt));return z.dom.styles.serialize(un)},Pn=z=>{const se=z.selection.getNode(),pe=z.dom.getParent(se,"figure.image");return pe?z.dom.select("img",pe)[0]:se&&(se.nodeName!=="IMG"||Rt(se))?null:se},_o=(z,se)=>{var pe;const lt=z.dom,un=Ue(z.schema.getTextBlockElements(),(xn,si)=>!z.schema.isValidChild(si,"figure")),Uo=lt.getParent(se.parentNode,xn=>Oe(un,xn.nodeName),z.getBody());return Uo&&(pe=lt.split(Uo,se))!==null&&pe!==void 0?pe:se},Ws=z=>{const se=Pn(z);return se?br(pe=>An(z,pe),se):go()},Tt=(z,se)=>{const pe=Hr(un=>An(z,un),se);z.dom.setAttrib(pe,"data-mce-id","__mcenew"),z.focus(),z.selection.setContent(pe.outerHTML);const lt=z.dom.select('*[data-mce-id="__mcenew"]')[0];if(z.dom.setAttrib(lt,"data-mce-id",null),Ge(lt)){const un=_o(z,lt);z.selection.select(un)}else z.selection.select(lt)},Lo=(z,se)=>{z.dom.setAttrib(se,"src",se.getAttribute("src"))},Se=(z,se)=>{if(se){const pe=z.dom.is(se.parentNode,"figure.image")?se.parentNode:se;z.dom.remove(pe),z.focus(),z.nodeChanged(),z.dom.isEmpty(z.getBody())&&(z.setContent(""),z.selection.setCursorLocation())}},Ee=(z,se)=>{const pe=Pn(z);if(pe)if(xt(lt=>An(z,lt),se,pe),Lo(z,pe),Ge(pe.parentNode)){const lt=pe.parentNode;_o(z,lt),z.selection.select(pe.parentNode)}else z.selection.select(pe),Ye(z,se,pe)},Dt=(z,se)=>{const pe=se.src;return Ot(ie({},se),{src:Wt(z,pe)?pe:""})},nn=(z,se)=>{const pe=Pn(z);if(pe){const lt=br(xn=>An(z,xn),pe),un=ie(ie({},lt),se),Uo=Dt(z,un);un.src?Ee(z,Uo):Se(z,pe)}else se.src&&Tt(z,ie(ie({},go()),se))},Mn=(z=>(...se)=>{if(se.length===0)throw new Error("Can't merge zero objects");const pe={};for(let lt=0;lt<se.length;lt++){const un=se[lt];for(const Uo in un)ae(un,Uo)&&(pe[Uo]=z(pe[Uo],un[Uo]))}return pe})((z,se)=>T(z)&&T(se)?Mn(z,se):se);var En=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),$n=tinymce.util.Tools.resolve("tinymce.util.Tools");const Vn=z=>x(z.value)?z.value:"",Xo=z=>x(z.text)?z.text:x(z.title)?z.title:"",Ts=(z,se)=>{const pe=[];return $n.each(z,lt=>{const un=Xo(lt);if(lt.menu!==void 0){const Uo=Ts(lt.menu,se);pe.push({text:un,items:Uo})}else{const Uo=se(lt);pe.push({text:un,value:Uo})}}),pe},Ii=(z=Vn)=>se=>se?be.from(se).map(pe=>Ts(pe,z)):be.none(),Oa=z=>Ii(Vn)(z),Yl=z=>ae(z,"items"),Po=(z,se)=>Ke(z,pe=>Yl(pe)?Po(pe.items,se):pe.value===se?be.some(pe):be.none()),ds={sanitizer:Ii,sanitize:Oa,findEntry:(z,se)=>z.bind(pe=>Po(pe,se))},Li={makeTab:z=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Mr=z=>{const se=ds.sanitizer(qa=>z.convertURL(qa.value||qa.url||"","src")),pe=new Promise(qa=>{ls(z,Nu=>{qa(se(Nu).map(ir=>ne([[{text:"None",value:""}],ir])))})}),lt=ds.sanitize(tt(z)),un=Cs(z),Uo=Je(z),xn=je(z),si=ot(z),Lt=Ws(z),er=ue(z),ba=xe(z),js=Do(z),Kr=Ne(z),Ed=kt(z),es=ve(z),ul=be.some(Bt(z)).filter(qa=>x(qa)&&qa.length>0);return pe.then(qa=>({image:Lt,imageList:qa,classList:lt,hasAdvTab:un,hasUploadTab:Uo,hasUploadUrl:xn,hasUploadHandler:si,hasDescription:er,hasImageTitle:ba,hasDimensions:js,hasImageCaption:Kr,prependURL:ul,hasAccessibilityOptions:Ed,automaticUploads:es}))},ll=z=>{const se={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},pe=z.imageList.map(ba=>({name:"images",type:"listbox",label:"Image list",items:ba})),lt={name:"alt",type:"input",label:"Alternative description",enabled:!(z.hasAccessibilityOptions&&z.image.isDecorative)},un={name:"title",type:"input",label:"Image title"},Uo={name:"dimensions",type:"sizeinput"},xn={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},si=z.classList.map(ba=>({name:"classes",type:"listbox",label:"Class",items:ba})),Lt={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},er=ba=>ba?{type:"grid",columns:2}:{type:"panel"};return ne([[se],pe.toArray(),z.hasAccessibilityOptions&&z.hasDescription?[xn]:[],z.hasDescription?[lt]:[],z.hasImageTitle?[un]:[],z.hasDimensions?[Uo]:[],[Ot(ie({},er(z.classList.isSome()&&z.hasImageCaption)),{items:ne([si.toArray(),z.hasImageCaption?[Lt]:[]])})]])},Ec={makeTab:z=>({title:"General",name:"general",items:ll(z)}),makeItems:ll},ma={makeTab:z=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},Zi=z=>({prevImage:ds.findEntry(z.imageList,z.image.src),prevAlt:z.image.alt,open:!0}),Za=z=>({src:{value:z.src,meta:{}},images:z.src,alt:z.alt,title:z.title,dimensions:{width:z.width,height:z.height},classes:z.class,caption:z.caption,style:z.style,vspace:z.vspace,border:z.border,hspace:z.hspace,borderstyle:z.borderStyle,fileinput:[],isDecorative:z.isDecorative}),oa=(z,se)=>({src:z.src.value,alt:(z.alt===null||z.alt.length===0)&&se?null:z.alt,title:z.title,width:z.dimensions.width,height:z.dimensions.height,class:z.classes,style:z.style,caption:z.caption,hspace:z.hspace,vspace:z.vspace,border:z.border,borderStyle:z.borderstyle,isDecorative:z.isDecorative}),Da=(z,se)=>/^(?:[a-zA-Z]+:)?\/\//.test(se)?be.none():z.prependURL.bind(pe=>se.substring(0,pe.length)!==pe?be.some(pe+se):be.none()),mi=(z,se)=>{const pe=se.getData();Da(z,pe.src.value).each(lt=>{se.setData({src:{value:lt,meta:pe.src.meta}})})},Tc=(z,se,pe)=>{z.hasDescription&&x(pe.alt)&&(se.alt=pe.alt),z.hasAccessibilityOptions&&(se.isDecorative=pe.isDecorative||se.isDecorative||!1),z.hasImageTitle&&x(pe.title)&&(se.title=pe.title),z.hasDimensions&&(x(pe.width)&&(se.dimensions.width=pe.width),x(pe.height)&&(se.dimensions.height=pe.height)),x(pe.class)&&ds.findEntry(z.classList,pe.class).each(lt=>{se.classes=lt.value}),z.hasImageCaption&&$(pe.caption)&&(se.caption=pe.caption),z.hasAdvTab&&(x(pe.style)&&(se.style=pe.style),x(pe.vspace)&&(se.vspace=pe.vspace),x(pe.border)&&(se.border=pe.border),x(pe.hspace)&&(se.hspace=pe.hspace),x(pe.borderstyle)&&(se.borderstyle=pe.borderstyle))},ga=(z,se)=>{const pe=se.getData(),lt=pe.src.meta;if(lt!==void 0){const un=Mn({},pe);Tc(z,un,lt),se.setData(un)}},Jc=(z,se,pe,lt)=>{const un=lt.getData(),Uo=un.src.value,xn=un.src.meta||{};!xn.width&&!xn.height&&se.hasDimensions&&(kn(Uo)?z.imageSize(Uo).then(si=>{pe.open&&lt.setData({dimensions:si})}).catch(si=>{}):lt.setData({dimensions:{width:"",height:""}}))},pa=(z,se,pe)=>{const lt=pe.getData(),un=ds.findEntry(z.imageList,lt.src.value);se.prevImage=un,pe.setData({images:un.map(Uo=>Uo.value).getOr("")})},Xl=(z,se,pe,lt)=>{mi(se,lt),ga(se,lt),Jc(z,se,pe,lt),pa(se,pe,lt)},$i=(z,se,pe,lt)=>{const un=lt.getData(),Uo=ds.findEntry(se.imageList,un.images);Uo.each(xn=>{un.alt===""||pe.prevImage.map(Lt=>Lt.text===un.alt).getOr(!1)?xn.value===""?lt.setData({src:xn,alt:pe.prevAlt}):lt.setData({src:xn,alt:xn.text}):lt.setData({src:xn})}),pe.prevImage=Uo,Xl(z,se,pe,lt)},cl=(z,se,pe,lt)=>{const un=lt.getData();lt.block("Uploading image"),O(un.fileinput).fold(()=>{lt.unblock()},Uo=>{const xn=URL.createObjectURL(Uo),si=()=>{lt.unblock(),URL.revokeObjectURL(xn)},Lt=er=>{lt.setData({src:{value:er,meta:{}}}),lt.showTab("general"),Xl(z,se,pe,lt)};pt(Uo).then(er=>{const ba=z.createBlobCache(Uo,xn,er);se.automaticUploads?z.uploadImage(ba).then(js=>{Lt(js.url),si()}).catch(js=>{si(),z.alertErr(js)}):(z.addToBlobCache(ba),Lt(ba.blobUri()),lt.unblock())})})},Oc=(z,se,pe)=>(lt,un)=>{un.name==="src"?Xl(z,se,pe,lt):un.name==="images"?$i(z,se,pe,lt):un.name==="alt"?pe.prevAlt=lt.getData().alt:un.name==="fileinput"?cl(z,se,pe,lt):un.name==="isDecorative"&&lt.setEnabled("alt",!lt.getData().isDecorative)},Qc=z=>()=>{z.open=!1},Ad=z=>z.hasAdvTab||z.hasUploadUrl||z.hasUploadHandler?{type:"tabpanel",tabs:ne([[Ec.makeTab(z)],z.hasAdvTab?[Li.makeTab(z)]:[],z.hasUploadTab&&(z.hasUploadUrl||z.hasUploadHandler)?[ma.makeTab(z)]:[]])}:{type:"panel",items:Ec.makeItems(z)},Q=(z,se,pe)=>lt=>{const un=Mn(Za(se.image),lt.getData()),Uo=Ot(ie({},un),{style:Ys(pe.normalizeCss,oa(un,!1))});z.execCommand("mceUpdateImage",!1,oa(Uo,se.hasAccessibilityOptions)),z.editorUpload.uploadImagesAuto(),lt.close()},Te=z=>se=>Wt(z,se)?Wn(z.documentBaseURI.toAbsolute(se)).then(pe=>({width:String(pe.width),height:String(pe.height)})):Promise.resolve({width:"",height:""}),qe=z=>(se,pe,lt)=>{var un;return z.editorUpload.blobCache.create({blob:se,blobUri:pe,name:(un=se.name)===null||un===void 0?void 0:un.replace(/\.[^\.]+$/,""),filename:se.name,base64:lt.split(",")[1]})},Ct=z=>se=>{z.editorUpload.blobCache.add(se)},Ut=z=>se=>{z.windowManager.alert(se)},jn=z=>se=>An(z,se),Os=z=>se=>z.dom.parseStyle(se),Ms=z=>(se,pe)=>z.dom.serializeStyle(se,pe),vs=z=>se=>En(z).upload([se],!1).then(pe=>{var lt;return pe.length===0?Promise.reject("Failed to upload image"):pe[0].status===!1?Promise.reject((lt=pe[0].error)===null||lt===void 0?void 0:lt.message):pe[0]}),Xs=z=>{const se={imageSize:Te(z),addToBlobCache:Ct(z),createBlobCache:qe(z),alertErr:Ut(z),normalizeCss:jn(z),parseStyle:Os(z),serializeStyle:Ms(z),uploadImage:vs(z)};return{open:()=>{Mr(z).then(lt=>{const un=Zi(lt);return{title:"Insert/Edit Image",size:"normal",body:Ad(lt),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Za(lt.image),onSubmit:Q(z,lt,se),onChange:Oc(se,lt,un),onClose:Qc(un)}}).then(z.windowManager.open)}}},jo=z=>{z.addCommand("mceImage",Xs(z).open),z.addCommand("mceUpdateImage",(se,pe)=>{z.undoManager.transact(()=>nn(z,pe))})},fr=z=>{const se=z.attr("class");return X(se)&&/\bimage\b/.test(se)},Ti=z=>se=>{let pe=se.length;const lt=un=>{un.attr("contenteditable",z?"true":null)};for(;pe--;){const un=se[pe];fr(un)&&(un.attr("contenteditable",z?"false":null),$n.each(un.getAll("figcaption"),lt))}},Ru=z=>{z.on("PreInit",()=>{z.parser.addNodeFilter("figure",Ti(!0)),z.serializer.addNodeFilter("figure",Ti(!1))})},sn=z=>se=>{const pe=()=>{se.setEnabled(z.selection.isEditable())};return z.on("NodeChange",pe),pe(),()=>{z.off("NodeChange",pe)}},Pu=z=>{z.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Xs(z).open,onSetup:se=>{se.setActive(X(Pn(z)));const pe=z.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",se.setActive).unbind,lt=sn(z)(se);return()=>{pe(),lt()}}}),z.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Xs(z).open,onSetup:sn(z)}),z.ui.registry.addContextMenu("image",{update:se=>z.selection.isEditable()&&(Ge(se)||dt(se)&&!Rt(se))?["image"]:[]})};var Vr=()=>{u.add("image",z=>{no(z),Ru(z),Pu(z),jo(z)})};Vr()})();const j1e=Ai({name:"TinymceImageUpload",components:{Upload:q$},props:{fullscreen:{type:Boolean},disabled:{type:Boolean,default:!1}},emits:["uploading","done","error"],setup(u,{emit:o}){let i=!1;const{uploadUrl:l}=Qae(),d=ele(),{t:m}=al(),{prefixCls:p}=iM("tinymce-img-upload"),v=Ss(()=>{const{disabled:T}=u;return{disabled:T}}),x={Authorization:d.getToken};function k(T){var X,J;const R=T.file,N=R==null?void 0:R.status,$=(J=(X=R==null?void 0:R.response)==null?void 0:X.data)==null?void 0:J.url,U=R==null?void 0:R.name;N==="uploading"?i||(o("uploading",U),i=!0):N==="done"?(o("done",U,$),i=!1):N==="error"&&(o("error"),i=!1)}return{prefixCls:p,handleChange:k,uploadUrl:l,headerData:x,t:m,getButtonProps:v}}});function Z1e(u,o,i,l,d,m){const p=Bs("a-button"),v=Bs("Upload");return Io(),ki("div",{class:cy([u.prefixCls,{fullscreen:u.fullscreen}])},[Yn(v,{name:"file",multiple:"",onChange:u.handleChange,action:u.uploadUrl,headers:u.headerData,showUploadList:!1,accept:".jpg,.jpeg,.gif,.png,.webp"},{default:Yo(()=>[Yn(p,na({type:"primary",preIcon:"material-symbols:image-sharp",class:"mt-1",iconSize:14},ie({},u.getButtonProps)),{default:Yo(()=>[Wa(ja(u.t("component.upload.imgUpload")),1)]),_:1},16)]),_:1},8,["onChange","action","headers"])],2)}const q1e=Gl(j1e,[["render",Z1e],["__scopeId","data-v-5bf13606"]]),G1e=["advlist","anchor","autolink","autosave","autoresize","code","codesample","directionality","fullscreen","insertdatetime","link","lists","media","nonbreaking","pagebreak","preview","save","searchreplace","visualblocks","visualchars","wordcount","image"],K1e=["fontsizeselect lineheight searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link  preview anchor pagebreak insertdatetime media image forecolor backcolor fullscreen"],Y1e=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],X1e=u=>Y1e.indexOf(u)!==-1,J1e=(u,o,i)=>{Object.keys(o).filter(X1e).forEach(l=>{const d=o[l];typeof d=="function"&&(l==="onInit"?d(u,i):i.on(l.substring(2),m=>d(m,i)))})},Q1e={options:{type:Object,default:()=>({})},value:{type:String},toolbar:{type:Array,default:K1e},plugins:{type:Array,default:G1e},modelValue:{type:String},height:{type:[Number,String],required:!1,default:400},width:{type:[Number,String],required:!1,default:"auto"},showImageUpload:{type:Boolean,default:!0}},e0e=Ai({name:"Tinymce",components:{ImgUpload:q1e},inheritAttrs:!1,props:Q1e,emits:["change","update:modelValue","inited","init-error"],setup(u,{emit:o,attrs:i}){const l=ko(null),d=ko(!1),m=ko(Rte("tiny-vue")),p=ko(null),{prefixCls:v}=iM("tinymce-container"),x=Poe(),k=Ss(()=>u.modelValue),T=Ss(()=>{const Ie=u.width;return lQ(Ie)?`${Ie}px`:Ie}),R=Ss(()=>x.getDarkMode==="light"?"oxide":"oxide-dark"),N=Ss(()=>x.getDarkMode==="light"?"default":"dark"),$=Ss(()=>{const Ie=tle().getLocale.value;return Ie==="zh_CN"?"zh-Hans":Ie}),U=Ss(()=>{const{height:Ie,options:$e,toolbar:Ue,plugins:ae}=u,Oe="/";return Ot(ie({selector:`#${gt(m)}`,height:Ie,toolbar:Ue,menubar:"file edit insert view format table",plugins:ae,language_url:Oe+"resource/tinymce/langs/"+$.value+".js",language:$.value,branding:!1,default_link_target:"_blank",link_title:!1,object_resizing:!1,auto_focus:!0,skin:R.value,promotion:!1,model_url:Oe+"resource/tinymce/models/dom/model.min.js",skin_url:Oe+"resource/tinymce/skins/ui/"+R.value,content_css:Oe+"resource/tinymce/skins/content/"+N.value+"/content.min.css"},$e),{setup:ht=>{l.value=ht,ht.on("init",ne=>le(ne))}})}),X=Ss(()=>{const{options:Ie}=u,$e=Ie&&Reflect.get(Ie,"readonly"),Ue=gt(l);return Ue&&Ue.mode.set($e?"readonly":"design"),$e!=null?$e:!1});rr(()=>i.disabled,()=>{const Ie=gt(l);Ie&&Ie.mode.set(i.disabled?"readonly":"design")}),Ule(()=>{U.value.inline||(m.value=Rte("tiny-vue")),gy(()=>{setTimeout(()=>{G()},30)})}),Doe(()=>{J()}),Vae(()=>{J()});function J(){var Ie;ey!==null&&((Ie=ey==null?void 0:ey.remove)==null||Ie.call(ey,gt(U).selector))}function G(){const Ie=gt(p);Ie&&(Ie.style.visibility=""),ey.init(gt(U)).then($e=>{o("inited",$e)}).catch($e=>{o("init-error",$e)})}function le(Ie){const $e=gt(l);if(!$e)return;const Ue=u.modelValue||"";$e.setContent(Ue),be($e),J1e(Ie,i,gt(l))}function Z(Ie,$e,Ue){Ie&&typeof $e=="string"&&$e!==Ue&&$e!==Ie.getContent({format:i.outputFormat})&&Ie.setContent($e)}function be(Ie){const $e=i.modelEvents?i.modelEvents:null,Ue=Array.isArray($e)?$e.join(" "):$e;rr(()=>u.modelValue,(ae,Oe)=>{Z(Ie,ae,Oe)}),rr(()=>u.value,(ae,Oe)=>{Z(Ie,ae,Oe)},{immediate:!0}),Ie.on(Ue||"change keyup undo redo",()=>{const ae=Ie.getContent({format:i.outputFormat});o("update:modelValue",ae),o("change",ae)}),Ie.on("FullscreenStateChanged",ae=>{d.value=ae.state})}function He(Ie){var ae;const $e=gt(l);if(!$e)return;$e.execCommand("mceInsertContent",!1,K(Ie));const Ue=(ae=$e==null?void 0:$e.getContent())!=null?ae:"";Z($e,Ue)}function Re(Ie,$e){var ht,ne;const Ue=gt(l);if(!Ue)return;const ae=(ht=Ue==null?void 0:Ue.getContent())!=null?ht:"",Oe=(ne=ae==null?void 0:ae.replace(K(Ie),`<img src="${$e}"/>`))!=null?ne:"";Z(Ue,Oe)}function K(Ie){return`[uploading:${Ie}]`}return{prefixCls:v,containerWidth:T,initOptions:U,tinymceContent:k,elRef:p,tinymceId:m,handleImageUploading:He,handleDone:Re,editorRef:l,fullscreen:d,disabled:X}}}),t0e=["id"];function n0e(u,o,i,l,d,m){const p=Bs("ImgUpload");return Io(),ki("div",{class:cy(u.prefixCls),style:sQ({width:u.containerWidth})},[u.showImageUpload?_oe((Io(),dr(p,{key:0,fullscreen:u.fullscreen,onUploading:u.handleImageUploading,onDone:u.handleDone,disabled:u.disabled},null,8,["fullscreen","onUploading","onDone","disabled"])),[[Moe,u.editorRef]]):sl("",!0),u.initOptions.inline?Gc(u.$slots,"default",{key:2}):(Io(),ki("textarea",{key:1,id:u.tinymceId,ref:"elRef",style:{visibility:"hidden"}},null,8,t0e))],6)}const o0e=Gl(e0e,[["render",n0e]]),s0e=C6(o0e),ps=new Map;ps.set("Input",x2);ps.set("InputGroup",x2.Group);ps.set("InputPassword",x2.Password);ps.set("InputSearch",x2.Search);ps.set("InputTextArea",x2.TextArea);ps.set("InputNumber",kle);ps.set("AutoComplete",Ale);ps.set("ImageUpload",cue);ps.set("Select",k6);ps.set("ApiSelect",tce);ps.set("ApiTree",sce);ps.set("TreeSelect",Boe);ps.set("ApiTreeSelect",ace);ps.set("ApiRadioGroup",Kle);ps.set("Switch",Ele);ps.set("RadioButtonGroup",Jle);ps.set("RadioGroup",s2.Group);ps.set("Checkbox",Voe);ps.set("CheckboxGroup",Voe.Group);ps.set("ApiCascader",lce);ps.set("Cascader",Foe);ps.set("Slider",Tle);ps.set("Rate",Ole);ps.set("Transfer",Ioe);ps.set("ApiTransfer",dce);ps.set("DatePicker",aM);ps.set("MonthPicker",aM.MonthPicker);ps.set("RangePicker",aM.RangePicker);ps.set("WeekPicker",aM.WeekPicker);ps.set("TimePicker",iQ);ps.set("TimeRangePicker",iQ.TimeRangePicker);ps.set("StrengthMeter",zle);ps.set("IconPicker",xue);ps.set("InputCountDown",qae);ps.set("Upload",uue);ps.set("Divider",aQ);ps.set("CropperAvatar",Vle);ps.set("BasicTitle",joe);ps.set("BasicTree",Mle);ps.set("ApiMultipleSelect",wce);ps.set("DictionarySelect",Cce);ps.set("CodeEditor",U1e);ps.set("Tinymce",s0e);ps.set("SimpleTimePicker",mce);ps.set("SimpleRangePicker",bce);const{t:sJ}=al();function Aoe(u){return u.includes("Input")||u.includes("Complete")?sJ("common.inputText"):u.includes("Picker")||u.includes("Select")||u.includes("Cascader")||u.includes("Checkbox")||u.includes("Radio")||u.includes("Switch")?sJ("common.chooseText"):""}const r0e=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function i0e(){return[...r0e,"RangePicker"]}function a0e(u,o,i){Reflect.has(u,"type")||(["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(o)?u.type=i?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(o)?u.type="array":["InputNumber"].includes(o)&&(u.type="number"))}const l0e=["Input","InputPassword","InputNumber","InputSearch","InputTextArea"],lae=i0e(),Eoe=["Upload","ApiTransfer","ApiTree","ApiSelect","ApiMultipleSelect","ApiTreeSelect","ApiRadioGroup","ApiCascader","AutoComplete","RadioButtonGroup","ImageUpload","SimpleTimePicker","SimpleRangePicker"],c0e=["Divider","BasicTitle"];function z_(u){return c0e.includes(u||"")}function u0e(u,o){return Ss(()=>{const i=gt(u),{labelCol:l={},wrapperCol:d={}}=i.itemProps||{},{labelWidth:m,disabledLabelWidth:p}=i,{labelWidth:v,labelCol:x,wrapperCol:k,layout:T}=gt(o);if(!v&&!m&&!x||p)return l.style={textAlign:"left"},{labelCol:l,wrapperCol:d};let R=m||v;const N=ie(ie({},x),l),$=ie(ie({},k),d);return R&&(R=lQ(R)?`${R}px`:R),{labelCol:ie({style:{width:R}},N),wrapperCol:ie({style:{width:T==="vertical"?"100%":`calc(100% - ${R})`}},$)}})}function P$(u){return typeof u=="function"||Object.prototype.toString.call(u)==="[object Object]"&&!zae(u)}const d0e=Ai({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(u,{slots:o}){const{t:i}=al(),{schema:l,formProps:d}=oQ(u);l.value.component==="CropperAvatar"&&typeof d.value.size=="string"&&(d.value.size=void 0);const m=u0e(l,d),p=Ss(()=>{const{allDefaultValues:X,formModel:J,schema:G}=u,{mergeDynamicData:le}=u.formProps;return{field:G.field,model:J,values:ie(ie(ie({},le),X),J),schema:G}}),v=Ss(()=>{var be;const{schema:X,tableAction:J,formModel:G,formActionType:le}=u;let{componentProps:Z={}}=X;return Dr(Z)&&(Z=(be=Z({schema:X,tableAction:J,formModel:G,formActionType:le}))!=null?be:{}),z_(X.component)&&(Z=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},Z)),Z}),x=Ss(()=>{const{disabled:X}=u.formProps,{dynamicDisabled:J}=u.schema,{disabled:G=!1}=gt(v);let le=!!X||G;return ny(J)&&(le=J),Dr(J)&&(le=J(gt(p))),le}),k=Ss(()=>{const{readonly:X}=u.formProps,{dynamicReadonly:J}=u.schema,{readonly:G=!1}=gt(v);let le=X||G;return ny(J)&&(le=J),Dr(J)&&(le=J(gt(p))),le});function T(){const{show:X,ifShow:J}=u.schema,{showAdvancedButton:G}=u.formProps,le=G&&ny(u.isAdvanced)?u.isAdvanced:!0;let Z=!0,be=!0;return ny(X)&&(Z=X),ny(J)&&(be=J),Dr(X)&&(Z=X(gt(p))),Dr(J)&&(be=J(gt(p))),Z=Z&&le,{isShow:Z,isIfShow:be}}function R(){var ne;const{rules:X=[],component:J,rulesMessageJoinLabel:G,label:le,dynamicRules:Z,required:be}=u.schema;if(Dr(Z))return Z(gt(p));let He=fy(X);const{rulesMessageJoinLabel:Re}=u.formProps,Ie=(Reflect.has(u.schema,"rulesMessageJoinLabel")?G:Re)?Dr(le)?"":le:"",$e=J?Aoe(J)+Ie:Ie;function Ue(ge,O){const Ke=ge.message||$e;return O===void 0||j1(O)||j$(O)&&O.length===0||typeof O=="string"&&O.trim()===""||typeof O=="object"&&Reflect.has(O,"checked")&&Reflect.has(O,"halfChecked")&&Array.isArray(O.checked)&&Array.isArray(O.halfChecked)&&O.checked.length===0&&O.halfChecked.length===0?Promise.reject(Ke):Promise.resolve()}const ae=Dr(be)?be(gt(p)):be;if(ae)if(!He||He.length===0){const ge=Eoe.includes(J||"Input")?"blur":"change";He=[{required:ae,validator:Ue,trigger:ge}]}else He.findIndex(O=>Reflect.has(O,"required"))===-1&&He.push({required:ae,validator:Ue});const Oe=He.findIndex(ge=>Reflect.has(ge,"required")&&!Reflect.has(ge,"validator"));if(Oe!==-1){const ge=He[Oe],{isShow:O}=T();if(O||(ge.required=!1),J){ge.message=ge.message||$e,(J.includes("Input")||J.includes("Textarea"))&&(ge.whitespace=!0);const Ke=(ne=gt(v))==null?void 0:ne.valueFormat;a0e(ge,J,Ke)}}const ht=He.findIndex(ge=>ge.max);return ht!==-1&&!He[ht].validator&&(He[ht].message=He[ht].message||i("component.form.maxTip",[He[ht].max])),He}function N(){var ge;if(!Zle(u.schema))return null;const{renderComponentContent:X,component:J,field:G,changeEvent:le="change",valueField:Z}=u.schema,be=J&&["Switch","Checkbox"].includes(J),He=`on${nle(le)}`,Re={[He]:(...O)=>{const[Ke]=O;Ue[He]&&Ue[He](...O);const he=Ke?Ke.target:null,at=he?be?he.checked:he.value:Ke;u.setFormModel(G,at,u.schema)}},K=ps.get(J),{autoSetPlaceHolder:Ie,size:$e}=u.formProps,Ue=Ot(ie({allowClear:!0,size:$e},gt(v)),{disabled:gt(x),readonly:gt(k)});!Ue.disabled&&Ie&&J!=="RangePicker"&&J&&(Ue.placeholder=((ge=gt(v))==null?void 0:ge.placeholder)||Aoe(J)),Ue.codeField=G,Ue.formValues=gt(p);const Oe={[Z||(be?"checked":"value")]:u.formModel[G]},ht=ie(ie(ie({},Ue),Re),Oe);if(!X)return Yn(K,ht,null);const ne=Dr(X)?ie({},X(gt(p),{disabled:gt(x),readonly:gt(k)})):{default:()=>X};return Yn(K,ht,P$(ne)?ne:{default:()=>[ne]})}function $(){const{label:X,helpMessage:J,helpComponentProps:G,subLabel:le}=u.schema,Z=Dr(X)?X(gt(p)):X,be=le?Yn("span",null,[Z,Wa(" "),Yn("span",{class:"text-secondary"},[le])]):Z,He=Dr(J)?J(gt(p)):J;return!He||Array.isArray(He)&&He.length===0?be:Yn("span",null,[be,Yn(Fle,na({placement:"top",class:"mx-1",text:He},G),null)])}function U(){const{itemProps:X,slot:J,render:G,field:le,suffix:Z,component:be,prefix:He}=u.schema,{labelCol:Re,wrapperCol:K}=gt(m),{colon:Ie}=u.formProps,$e={disabled:gt(x),readonly:gt(k)};if(be==="Divider"){let Ue;return Yn(G$,{span:24},{default:()=>[Yn(aQ,gt(v),P$(Ue=$())?Ue:{default:()=>[Ue]})]})}else if(be==="BasicTitle"){let Ue;return Yn(K$.Item,{labelCol:Re,wrapperCol:K,name:le,class:{"suffix-item":!!Z,"prefix-item":!!He}},{default:()=>[Yn(joe,gt(v),P$(Ue=$())?Ue:{default:()=>[Ue]})]})}else{const Ue=()=>J?Dte(o,J,gt(p),$e):G?G(gt(p),$e):N(),ae=!!Z,Oe=Dr(Z)?Z(gt(p)):Z,ht=!!He,ne=Dr(He)?He(gt(p)):He;return be&&Eoe.includes(be)&&u.schema&&(u.schema.itemProps=ie({autoLink:!1},u.schema.itemProps)),Yn(K$.Item,na({name:le,colon:Ie,class:{"suffix-item":ae,"prefix-item":ht}},X,{label:$(),rules:R(),labelCol:Re,wrapperCol:K}),{default:()=>[Yn("div",{style:"display:flex"},[ht&&Yn("span",{class:"prefix"},[ne]),Yn("div",{style:"flex:1;"},[Ue()]),ae&&Yn("span",{class:"suffix"},[Oe])])]})}}return()=>{let X;const{colProps:J={},colSlot:G,renderColContent:le,component:Z,slot:be}=u.schema;if(!(Z&&ps.has(Z)||be))return null;const{baseColProps:He={}}=u.formProps,Re=ie(ie({},He),J),{isIfShow:K,isShow:Ie}=T(),$e=gt(p),Ue={disabled:gt(x),readonly:gt(k)};return K&&_oe(Yn(G$,Re,P$(X=G?Dte(o,G,$e,Ue):le?le($e,Ue):U())?X:{default:()=>[X]}),[[Moe,Ie]])}}}),cae=Symbol();function f0e(u){return ole(u,cae)}function h0e(){return sle(cae)}const m0e=Ai({name:"BasicFormAction",components:{FormItem:K$.Item,Button:rle,BasicArrow:Ile,[G$.name]:G$},props:{showActionButtonGroup:to.bool.def(!0),showResetButton:to.bool.def(!0),showSubmitButton:to.bool.def(!0),showAdvancedButton:to.bool.def(!0),resetButtonOptions:{type:Object,default:()=>({})},submitButtonOptions:{type:Object,default:()=>({})},actionColOptions:{type:Object,default:()=>({})},actionSpan:to.number.def(6),isAdvanced:to.bool,hideAdvanceBtn:to.bool},emits:["toggle-advanced"],setup(u,{emit:o}){const{t:i}=al(),l=Ss(()=>{const{showAdvancedButton:v,actionSpan:x,actionColOptions:k}=u,T=24-x,R=v?{span:T<6?24:T}:{};return ie(ie({style:{textAlign:"right"},span:v?6:4},R),k)}),d=Ss(()=>Object.assign({text:i("common.resetText")},u.resetButtonOptions)),m=Ss(()=>Object.assign({text:i("common.queryText")},u.submitButtonOptions));function p(){o("toggle-advanced")}return ie({t:i,actionColOpt:l,getResetBtnOptions:d,getSubmitBtnOptions:m,toggleAdvanced:p},h0e())}});function g0e(u,o,i,l,d,m){const p=Bs("Button"),v=Bs("BasicArrow"),x=Bs("FormItem"),k=Bs("a-col");return u.showActionButtonGroup?(Io(),dr(k,e0(na({key:0},u.actionColOpt)),{default:Yo(()=>[gh("div",{style:sQ([{width:"100%"},{textAlign:u.actionColOpt.style.textAlign}])},[Yn(x,null,{default:Yo(()=>[Gc(u.$slots,"resetBefore"),u.showResetButton?(Io(),dr(p,na({key:0,type:"default",class:"mr-2"},u.getResetBtnOptions,{onClick:u.resetAction}),{default:Yo(()=>[Wa(ja(u.getResetBtnOptions.text),1)]),_:1},16,["onClick"])):sl("",!0),Gc(u.$slots,"submitBefore"),u.showSubmitButton?(Io(),dr(p,na({key:1,type:"primary",class:"mr-2"},u.getSubmitBtnOptions,{onClick:u.submitAction}),{default:Yo(()=>[Wa(ja(u.getSubmitBtnOptions.text),1)]),_:1},16,["onClick"])):sl("",!0),Gc(u.$slots,"advanceBefore"),u.showAdvancedButton&&!u.hideAdvanceBtn?(Io(),dr(p,{key:2,type:"link",size:"small",onClick:u.toggleAdvanced},{default:Yo(()=>[Wa(ja(u.isAdvanced?u.t("component.form.putAway"):u.t("component.form.unfold"))+" ",1),Yn(v,{class:"ml-1",expand:!u.isAdvanced,up:""},null,8,["expand"])]),_:1},8,["onClick"])):sl("",!0),Gc(u.$slots,"advanceAfter")]),_:3})],4)]),_:3},16)):sl("",!0)}const p0e=Gl(m0e,[["render",g0e]]);function b0e(u,o,i){const l=/^\[(.+)\]$/;if(l.test(u)){const d=u.match(l);if(d&&d[1]){const m=d[1].split(",");return o=Array.isArray(o)?o:[o],m.forEach((p,v)=>{i=X$(i,p.trim(),o[v])}),!0}}}function v0e(u,o,i){const l=/^\{(.+)\}$/;if(l.test(u)){const d=u.match(l);if(d&&d[1]){const m=d[1].split(",");return o=jg(o)?o:{},m.forEach(p=>{i=X$(i,p.trim(),o[p.trim()])}),!0}}}function y0e({defaultValueRef:u,getSchema:o,formModel:i,getProps:l}){function d(x){if(!jg(x))return{};const k={};for(const T of Object.entries(x)){let[,R]=T;const[N]=T;if(!N||j$(R)&&R.length===0||Dr(R))continue;const $=gt(l).transformDateFunc;jg(R)&&(R=$==null?void 0:$(R)),j$(R)&&R.length===2&&xd.isDayjs(R[0])&&xd.isDayjs(R[1])&&(R=R.map(U=>$==null?void 0:$(U))),uy(R)&&(R=R.trim()),!b0e(N,R,k)&&!v0e(N,R,k)&&(k[N]=R)}return m(k)}function m(x){const k=gt(l).fieldMapToTime;if(!k||!Array.isArray(k))return x;for(const[T,[R,N],$="YYYY-MM-DD"]of k){if(!T||!R||!N)continue;if(MX(aJ(x,[T]))){x=py(x,[T]);continue}const[U,X]=aJ(x,[T]).map(le=>le),[J,G]=Array.isArray($)?$:[$,$];!j1(U)&&!MX(U)&&(x=X$(x,R,p(U,J))),!j1(X)&&!MX(X)&&(x=X$(x,N,p(X,G))),x=py(x,[T])}return x}function p(x,k){return k==="timestamp"?W1(x).unix():k==="timestampStartDay"?W1(x).startOf("day").unix():W1(x).format(k)}function v(){const x=gt(o),k={};x.forEach(T=>{const{defaultValue:R,defaultValueObj:N,componentProps:$={}}=T,U=Object.keys(N||{});U.length&&U.forEach(X=>{k[X]=N[X],i[X]===void 0&&(i[X]=N[X])}),j1(R)||(k[T.field]=R,i[T.field]===void 0&&(i[T.field]=R)),j1($==null?void 0:$.defaultValue)||(k[T.field]=$==null?void 0:$.defaultValue,i[T.field]===void 0&&(i[T.field]=$==null?void 0:$.defaultValue))}),u.value=fy(k)}return{handleFormValues:d,initDefault:v}}const ty=24;function w0e({advanceState:u,emit:o,getProps:i,getSchema:l,formModel:d,defaultValueRef:m}){const p=Uae(),{realWidthRef:v,screenEnum:x,screenRef:k}=ile(),T=Ss(()=>{if(!u.isAdvanced)return 0;const J=gt(i).emptySpan||0;if(lQ(J))return J;if(jg(J)){const{span:G=0}=J,le=gt(k);return J[le.toLowerCase()]||G||0}return 0}),R=rQ(U,30);rr([()=>gt(l),()=>u.isAdvanced,()=>gt(v)],()=>{const{showAdvancedButton:J}=gt(i);J&&R()},{immediate:!0});function N(J,G=0,le=!1){const Z=gt(v),be=parseInt(J.md)||parseInt(J.xs)||parseInt(J.sm)||J.span||ty,He=parseInt(J.lg)||be,Re=parseInt(J.xl)||He,K=parseInt(J.xxl)||Re;return Z<=x.LG?G+=be:Z<x.XL?G+=He:Z<x.XXL?G+=Re:G+=K,le?(u.hideAdvanceBtn=!1,G<=ty*2?(u.hideAdvanceBtn=!0,u.isAdvanced=!0):G>ty*2&&G<=ty*(gt(i).autoAdvancedLine||3)?u.hideAdvanceBtn=!1:u.isLoad||(u.isLoad=!0,u.isAdvanced=!u.isAdvanced),{isAdvanced:u.isAdvanced,itemColSum:G}):G>ty*(gt(i).alwaysShowLines||1)?{isAdvanced:u.isAdvanced,itemColSum:G}:{isAdvanced:!0,itemColSum:G}}const $=Wae({});function U(){var Z;let J=0,G=0;const{baseColProps:le={}}=gt(i);for(const be of gt(l)){const{show:He,colProps:Re}=be;let K=!0;if(ny(He)&&(K=He),Dr(He)&&(K=He({schema:be,model:d,field:be.field,values:ie(ie({},gt(m)),d)})),K&&(Re||le)){const{itemColSum:Ie,isAdvanced:$e}=N(ie(ie({},le),Re),J);J=Ie||0,$e&&(G=J),$[be.field]=$e}}(Z=p==null?void 0:p.proxy)==null||Z.$forceUpdate(),u.actionSpan=G%ty+gt(T),N(gt(i).actionColOptions||{span:ty},J,!0),o("advanced-change")}function X(){u.isAdvanced=!u.isAdvanced}return{handleToggleAdvanced:X,fieldsIsAdvancedMap:$}}function x0e(u,o={}){const i=/^\[(.+)\]$/;if(i.test(u)){const l=u.match(i);if(l&&l[1]){const d=l[1].split(",");if(!d.length)return;const m=[];return d.forEach((p,v)=>{m[v]=o[p.trim()]}),m.filter(Boolean).length?m:void 0}}}function S0e({emit:u,getProps:o,formModel:i,getSchema:l,defaultValueRef:d,formElRef:m,schemaRef:p,handleFormValues:v}){function x(){return Ko(this,null,function*(){const{resetFunc:ae,submitOnReset:Oe}=gt(o);ae&&Dr(ae)&&(yield ae()),gt(m)&&(Object.keys(i).forEach(ne=>{const ge=gt(l).find(he=>he.field===ne),O=ge==null?void 0:ge.defaultValueObj,Ke=Object.keys(O||{});Ke.length&&Ke.forEach(he=>{i[he]=O[he]}),i[ne]=C0e(ge,d,ne)}),gy(()=>K()),u("reset",U_(i)),Oe&&$e())})}const k=()=>gt(l).map(ae=>[...ae.fields||[],ae.field]).flat(1).filter(Boolean);function T(ae){return Ko(this,null,function*(){if(Object.keys(ae).length===0)return;const Oe=k(),ht=[];Oe.forEach(ne=>{const ge=gt(l).find(We=>We.field===ne),O=Cd(ae,ne),Ke=ale(ae).includes(ne),{componentProps:he}=ge||{};let at=he;typeof he=="function"&&(at=at({formModel:gt(i),formActionType:Ue}));let qt;const Pe=We=>We?at!=null&&at.valueFormat?We:W1(We):null;if(Z(ge==null?void 0:ge.component)&&(qt=x0e(ne,ae),qt)){const We=qt||O;if(Array.isArray(We)){const yt=[];for(const Be of We)yt.push(Pe(Be));gt(i)[ne]=yt,ht.push(ne)}else gt(i)[ne]=Pe(We),ht.push(ne)}if(Ke){qt=Cd(O,ne);const We=qt||O;gt(i)[ne]=We,at!=null&&at.onChange&&(at==null||at.onChange(We)),ht.push(ne)}}),be(ht).catch(ne=>{})})}function R(ae){if(!Array.isArray(ae)||Array.isArray(ae)&&ae.length===0)return;const Oe=[],ht=Object.keys(gt(i));ht&&(ae.forEach(ne=>{ht.includes(ne)&&(Oe.push(ne),gt(i)[ne]=fy(gt(aJ(d.value,ne))))}),be(Oe).catch(ne=>{}))}function N(ae){return Ko(this,null,function*(){const Oe=fy(gt(l));if(!ae)return;let ht=uy(ae)?[ae]:ae;uy(ae)&&(ht=[ae]);for(const ne of ht)$(ne,Oe);p.value=Oe})}function $(ae,Oe){if(uy(ae)){const ht=Oe.findIndex(ne=>ne.field===ae);ht!==-1&&(delete i[ae],Oe.splice(ht,1))}}function U(ae,Oe,ht=!1){return Ko(this,null,function*(){const ne=fy(gt(l)),ge=Array.isArray(ae)?ae.map(he=>he.field):[ae.field];if(ne.find(he=>ge.includes(he.field))){N$("There are schemas that have already been added");return}const O=ne.findIndex(he=>he.field===Oe),Ke=jg(ae)?[ae]:ae;!Oe||O===-1||ht?ht?ne.unshift(...Ke):ne.push(...Ke):O!==-1&&ne.splice(O+1,0,...Ke),p.value=ne,G(ae)})}function X(ae){return Ko(this,null,function*(){let Oe=[];if(jg(ae)&&Oe.push(ae),dy(ae)&&(Oe=[...ae]),!Oe.every(ne=>z_(ne.component)||Reflect.has(ne,"field")&&ne.field)){N$("All children of the form Schema array that need to be updated must contain the `field` field");return}p.value=Oe})}function J(ae){return Ko(this,null,function*(){let Oe=[];if(jg(ae)&&Oe.push(ae),dy(ae)&&(Oe=[...ae]),!Oe.every(O=>z_(O.component)||Reflect.has(O,"field")&&O.field)){N$("All children of the form Schema array that need to be updated must contain the `field` field");return}const ne=[],ge=[];gt(l).forEach(O=>{const Ke=Oe.find(he=>O.field===he.field);if(Ke){const he=Noe(O,Ke);ge.push(he),ne.push(he)}else ne.push(O)}),G(ge),p.value=$le(ne,O=>{O.field})})}function G(ae){let Oe=[];jg(ae)&&Oe.push(ae),dy(ae)&&(Oe=[...ae]);const ht={},ne=le();Oe.forEach(ge=>{!z_(ge.component)&&Reflect.has(ge,"field")&&ge.field&&!j1(ge.defaultValue)&&(!(ge.field in ne)||j1(ne[ge.field]))&&(ht[ge.field]=ge.defaultValue)}),T(ht)}function le(){return gt(m)?v(U_(gt(i))):{}}function Z(ae){return lae.includes(ae)}function be(ae){return Ko(this,null,function*(){var ht;const Oe=yield(ht=gt(m))==null?void 0:ht.validateFields(ae);return v(Oe)})}function He(ae){return Ko(this,null,function*(){var Oe;yield(Oe=gt(m))==null?void 0:Oe.setProps(ae)})}function Re(ae){return Ko(this,null,function*(){var ne;let Oe;ae===void 0?Oe=k():Oe=ae===Array.isArray(ae)?ae:void 0;const ht=yield(ne=gt(m))==null?void 0:ne.validate(Oe);return v(ht)})}function K(ae){return Ko(this,null,function*(){var Oe;yield(Oe=gt(m))==null?void 0:Oe.clearValidate(ae)})}function Ie(ae,Oe){return Ko(this,null,function*(){var ht;yield(ht=gt(m))==null?void 0:ht.scrollToField(ae,Oe)})}function $e(ae){return Ko(this,null,function*(){ae&&ae.preventDefault();const{submitFunc:Oe}=gt(o);if(Oe&&Dr(Oe)){yield Oe();return}if(gt(m))try{const ne=yield Re();u("submit",ne)}catch(ne){if((ne==null?void 0:ne.outOfDate)===!1&&(ne!=null&&ne.errorFields))return;throw new Error(ne)}})}const Ue={getFieldsValue:le,setFieldsValue:T,resetFields:x,updateSchema:J,resetSchema:X,setProps:He,removeSchemaByField:N,appendSchemaByField:U,clearValidate:K,validateFields:be,validate:Re,submit:$e,scrollToField:Ie};return{handleSubmit:$e,clearValidate:K,validate:Re,validateFields:be,getFieldsValue:le,updateSchema:J,resetSchema:X,appendSchemaByField:U,removeSchemaByField:N,resetFields:x,setFieldsValue:T,scrollToField:Ie,resetDefaultField:R}}function C0e(u,o,i){let l=fy(o.value[i]);return A0e(u)?j1(l)?void 0:l:(!l&&u&&k0e(u)&&(l=[0,0]),!l&&u&&u.component==="ApiTree"&&(l=[]),l)}function k0e(u){if(u.component==="Slider"&&u.componentProps&&"range"in u.componentProps)return!0}function A0e(u){return(u==null?void 0:u.component)&&l0e.includes(u.component)}function E0e(d){return Ko(this,arguments,function*({getSchema:u,getProps:o,formElRef:i,isInitedDefault:l}){rM(()=>Ko(this,null,function*(){if(gt(l)||!gt(o).autoFocusFirstItem)return;yield gy();const m=gt(u),p=gt(i),v=p==null?void 0:p.$el;if(!p||!v||!m||m.length===0)return;const x=m[0];if(!x.component||!x.component.includes("Input"))return;const k=v.querySelector(".ant-row:first-child input");k&&(k==null||k.focus())}))})}const T0e={model:{type:Object,default:()=>({})},labelWidth:{type:[Number,String],default:0},fieldMapToTime:{type:Array,default:()=>[]},compact:to.bool,schemas:{type:Array,default:()=>[]},mergeDynamicData:{type:Object,default:null},baseRowStyle:{type:Object},baseColProps:{type:Object},autoSetPlaceHolder:to.bool.def(!0),autoSubmitOnEnter:to.bool.def(!1),submitOnReset:to.bool,submitOnChange:to.bool,size:to.oneOf(["default","small","large"]).def("default"),disabled:to.bool,emptySpan:{type:[Number,Object],default:0},showAdvancedButton:to.bool,transformDateFunc:{type:Function,default:u=>{var o,i;return(i=(o=u==null?void 0:u.format)==null?void 0:o.call(u,"YYYY-MM-DD HH:mm:ss"))!=null?i:u}},rulesMessageJoinLabel:to.bool.def(!0),autoAdvancedLine:to.number.def(3),alwaysShowLines:to.number.def(1),showActionButtonGroup:to.bool.def(!0),actionColOptions:Object,showResetButton:to.bool.def(!0),autoFocusFirstItem:to.bool,resetButtonOptions:Object,showSubmitButton:to.bool.def(!0),submitButtonOptions:Object,resetFunc:Function,submitFunc:Function,hideRequiredMark:to.bool,labelCol:Object,layout:to.oneOf(["horizontal","vertical","inline"]).def("horizontal"),tableAction:{type:Object},wrapperCol:Object,colon:to.bool,labelAlign:to.string,rowProps:Object},rbe=Ai({name:"BasicForm",__name:"BasicForm",props:T0e,emits:["advanced-change","reset","submit","register","field-value-change"],setup(u,{expose:o,emit:i}){const l=u,d=i,m=Ooe(),p=rJ({}),v=zoe(),x=rJ({isAdvanced:!0,hideAdvanceBtn:!1,isLoad:!1,actionSpan:6}),k=ko({}),T=ko(!1),R=ko(),N=ko(null),$=ko(null),{prefixCls:U}=iM("basic-form"),X=Ss(()=>ie(ie({},l),gt(R))),J=Ss(()=>[U,{[`${U}--compact`]:gt(X).compact}]),G=Ss(()=>{const{baseRowStyle:ce={},rowProps:Ze}=gt(X);return ie({style:ce},Ze)}),le=Ss(()=>ie(ie(ie({},m),l),gt(X))),Z=Ss(()=>{var Ze;const ce=fy(gt(N)||gt(X).schemas);for(const V of ce){const{defaultValue:kn,component:cn,componentProps:no={},isHandleDateDefaultValue:Do=!0}=V;if(Do&&kn&&cn&&lae.includes(cn)){const Cs={schema:V,tableAction:(Ze=l.tableAction)!=null?Ze:{},formModel:p,formActionType:{}},Je=no?typeof no=="function"?no(Cs).valueFormat:no.valueFormat:null;if(!Array.isArray(kn))V.defaultValue=Je?W1(kn).format(Je):W1(kn);else{const Bt=[];kn.forEach(tt=>{Bt.push(Je?W1(tt).format(Je):W1(tt))}),V.defaultValue=Bt}}}return gt(X).showAdvancedButton?ce.filter(V=>!z_(V.component)):ce}),{handleToggleAdvanced:be,fieldsIsAdvancedMap:He}=w0e({advanceState:x,emit:d,getProps:X,getSchema:Z,formModel:p,defaultValueRef:k}),{handleFormValues:Re,initDefault:K}=y0e({getProps:X,defaultValueRef:k,getSchema:Z,formModel:p});E0e({getSchema:Z,getProps:X,isInitedDefault:T,formElRef:$});const{handleSubmit:Ie,setFieldsValue:$e,clearValidate:Ue,validate:ae,validateFields:Oe,getFieldsValue:ht,updateSchema:ne,resetSchema:ge,appendSchemaByField:O,removeSchemaByField:Ke,resetFields:he,scrollToField:at,resetDefaultField:qt}=S0e({emit:d,getProps:X,formModel:p,getSchema:Z,defaultValueRef:k,formElRef:$,schemaRef:N,handleFormValues:Re});f0e({resetAction:he,submitAction:Ie}),rr(()=>gt(X).model,()=>{const{model:ce}=gt(X);ce&&$e(ce)},{immediate:!0}),rr(()=>l.schemas,ce=>{ge(ce!=null?ce:[])}),rr(()=>Z.value,ce=>{gy(()=>{var Ze;(Ze=v==null?void 0:v.redoModalHeight)==null||Ze.call(v)}),!gt(T)&&ce!=null&&ce.length&&(K(),T.value=!0)}),rr(()=>p,rQ(()=>{gt(X).submitOnChange&&Ie()},300),{deep:!0});function Pe(ce){return Ko(this,null,function*(){R.value=Noe(gt(R)||{},ce)})}function We(ce,Ze,V){p[ce]=Ze,d("field-value-change",ce,Ze),V&&V.itemProps&&!V.itemProps.autoLink&&Oe([ce]).catch(kn=>{})}function yt(ce){const{autoSubmitOnEnter:Ze}=gt(X);if(Ze&&ce.key==="Enter"&&ce.target&&ce.target instanceof HTMLElement){const V=ce.target;V&&V.tagName&&V.tagName.toUpperCase()==="INPUT"&&Ie()}}const Be={getFieldsValue:ht,setFieldsValue:$e,resetFields:he,updateSchema:ne,resetSchema:ge,setProps:Pe,removeSchemaByField:Ke,appendSchemaByField:O,clearValidate:Ue,validateFields:Oe,validate:ae,submit:Ie,scrollToField:at,resetDefaultField:qt},wt=Ss(()=>ie(ie({},X.value),x));return o(ie({},Be)),Cy(()=>{K(),d("register",Be)}),(ce,Ze)=>(Io(),dr(gt(K$),na(le.value,{class:J.value,ref_key:"formElRef",ref:$,model:p,onKeypress:jae(yt,["enter"])}),{default:Yo(()=>[Yn(gt(Dle),e0(my(G.value)),{default:Yo(()=>[Gc(ce.$slots,"formHeader"),(Io(!0),ki(pf,null,yf(Z.value,V=>(Io(),dr(d0e,{key:V.field,isAdvanced:gt(He)[V.field],tableAction:ce.tableAction,formActionType:Be,schema:V,formProps:X.value,allDefaultValues:k.value,formModel:p,setFormModel:We},Q1({_:2},[yf(Object.keys(ce.$slots),kn=>({name:kn,fn:Yo(cn=>[Gc(ce.$slots,kn,na({ref_for:!0},cn||{}))])}))]),1032,["isAdvanced","tableAction","schema","formProps","allDefaultValues","formModel"]))),128)),Yn(p0e,na(wt.value,{onToggleAdvanced:gt(be)}),Q1({_:2},[yf(["resetBefore","submitBefore","advanceBefore","advanceAfter"],V=>({name:V,fn:Yo(kn=>[Gc(ce.$slots,V,e0(my(kn||{})))])}))]),1040,["onToggleAdvanced"]),Gc(ce.$slots,"formFooter")]),_:3},16)]),_:3},16,["class","model"]))}});function ibe(u){const o=ko(null),i=ko(!1);function l(){return Ko(this,null,function*(){const p=gt(o);return p||N$("The form instance has not been obtained, please make sure that the form has been rendered when performing the form operation!"),yield gy(),p})}function d(p){Zae(()=>{o.value=null,i.value=null}),!(gt(i)&&lle()&&p===gt(o))&&(o.value=p,i.value=!0,rr(()=>u,()=>{u&&p.setProps(cle(u))},{immediate:!0,deep:!0}))}return[d,{scrollToField:(p,v)=>Ko(this,null,function*(){(yield l()).scrollToField(p,v)}),setProps:p=>Ko(this,null,function*(){(yield l()).setProps(p)}),updateSchema:p=>Ko(this,null,function*(){(yield l()).updateSchema(p)}),resetSchema:p=>Ko(this,null,function*(){(yield l()).resetSchema(p)}),clearValidate:p=>Ko(this,null,function*(){(yield l()).clearValidate(p)}),resetFields:()=>new Promise(p=>{l().then(v=>Ko(this,null,function*(){yield v.resetFields(),p()}))}),removeSchemaByField:p=>Ko(this,null,function*(){var v;(v=gt(o))==null||v.removeSchemaByField(p)}),getFieldsValue:()=>{var p;return(p=gt(o))==null?void 0:p.getFieldsValue()},setFieldsValue:p=>Ko(this,null,function*(){(yield l()).setFieldsValue(p)}),appendSchemaByField:(p,v,x)=>Ko(this,null,function*(){(yield l()).appendSchemaByField(p,v,x)}),submit:()=>Ko(this,null,function*(){return(yield l()).submit()}),validate:p=>Ko(this,null,function*(){return(yield l()).validate(p)}),validateFields:p=>Ko(this,null,function*(){return(yield l()).validateFields(p)}),resetDefaultField:p=>Ko(this,null,function*(){var v;(v=gt(o))==null||v.resetDefaultField(p)})}]}export{tce as A,uue as B,Q0e as D,K0e as F,ebe as I,G0e as P,Jle as R,Yoe as T,rbe as _,ibe as a,q0e as b,ace as c,Kle as d,Oce as e,Fce as f,Z0e as g,Zce as h,X0e as i,J0e as j,Y0e as k,j0e as l,X$ as s,Kce as u};
