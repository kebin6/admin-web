var d=(e,o,a)=>new Promise((m,l)=>{var i=s=>{try{r(a.next(s))}catch(n){l(n)}},c=s=>{try{r(a.throw(s))}catch(n){l(n)}},r=s=>s.done?m(s.value):Promise.resolve(s.value).then(i,c);r((a=a.apply(e,o)).next())});import{a as w,b as B}from"./ExclamationCircleOutlined-BOht0FRf.js";import{b as T,as as v,a as L,aq as S,v as M,ar as _,_ as k}from"./entry/index-DaEB-Y-8-1718870402071.js";import{c as C}from"./components-In6B8x5D.js";import{l as y,d as D,f as h,r as N,k as g,ab as p,_ as b,a7 as I,a8 as u,G as x,a1 as O,aa as R,ac as P}from"./vue-BMCEF3Jf.js";import{B as q,a as $}from"./index-CmerSBcF.js";import{B as V,u as F}from"./useTable-DprHC9Xn.js";import"./useForm-Cq3McrEd.js";import{M as A}from"./antd-BNMfrwLX.js";import"./index-DnIErCUr.js";import"./index-DxzXX1s5.js";import"./useWindowSizeFn-NWtUJjFU.js";import"./isDeepEqual-BYVIA4i9.js";import"./isBoolean-Dou3jA6I.js";import"./isNumber-j3SIk7av.js";import"./index-BQ8_-9UH.js";import"./object-BY_VTB7H.js";import"./onMountedOrActivated-CPthIpwg.js";import"./sortable.esm-DFFrMEeC.js";import"./index-BgDhUzJz.js";import"./copyTextToClipboard-Ke6QqFB6.js";import"./useSortable-nsvvptnY.js";import"./index-BdOZjJKO.js";import"./index-D-g43U_h.js";const{t}=T(),H=[{title:t("mcms.smsLog.phoneNumber"),dataIndex:"phoneNumber",width:50},{title:t("mcms.smsLog.content"),dataIndex:"content",width:50},{title:t("mcms.emailLog.sendStatus"),dataIndex:"sendStatus",width:20,customRender:({record:e})=>{let o="";return e.sendStatus===1?o=t("common.successful"):o=t("common.failed"),y(C.Tag,{color:e.sendStatus===1?"green":"red"},o)}},{title:t("mcms.smsLog.provider"),dataIndex:"provider",width:30},{title:t("common.createTime"),dataIndex:"createdAt",width:40,customRender:({record:e})=>v(e.createdAt)}],j=[{field:"phoneNumber",label:t("mcms.smsLog.phoneNumber"),component:"Input",colProps:{span:8}},{field:"content",label:t("mcms.smsLog.content"),component:"Input",colProps:{span:8}},{field:"provider",label:t("mcms.smsLog.provider"),component:"Input",colProps:{span:8}},{field:"sendStatus",label:t("mcms.emailLog.sendStatus"),component:"Select",colProps:{span:8},defaultValue:0,componentProps:{options:[{label:t("common.all"),value:0},{label:t("common.successful"),value:1},{label:t("common.failed"),value:2}]}}];t("mcms.smsLog.phoneNumber"),t("mcms.smsLog.content"),t("mcms.smsLog.sendStatus"),t("mcms.smsLog.provider");const E=(e,o="notice")=>L.post({url:"/sys-api/sms_log/list",params:e},{errorMessageMode:o}),G=(e,o="notice")=>L.post({url:"/sys-api/sms_log/delete",params:e},{errorMessageMode:o,successMessageMode:o}),W=D({components:{BasicModal:q,BasicTable:V,DeleteOutlined:w,Button:S},setup(){const{t:e}=M.useI18n(),o=h(),a=h(!1),{notification:m}=_(),l=N({}),[i,{reload:c}]=F({title:e("sys.task.taskList"),api:E,columns:H,formConfig:{labelWidth:120,schemas:j},useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,clickToRowSelect:!1,rowKey:"id",rowSelection:{type:"checkbox",onChange:(n,f)=>{o.value=n,a.value=n.length>0}}}),[r]=$(n=>d(this,null,function*(){l.taskId=n.record.id}));function s(){return d(this,null,function*(){A.confirm({title:e("common.deleteConfirm"),icon:g(B),onOk(){return d(this,null,function*(){const f=yield G({ids:o.value});f.code===0&&(a.value=!1,m.success({message:e("common.successful"),description:e(f.msg),duration:3}),yield c())})},onCancel(){}})})}return{t:e,registerTable:i,showDeleteButton:a,handleBatchDelete:s,registerModal:r,searchInfo:l}}});function z(e,o,a,m,l,i){const c=p("DeleteOutlined"),r=p("Button"),s=p("BasicTable"),n=p("BasicModal");return b(),I(n,P(e.$attrs,{title:e.t("mcms.smsLog.smsLogList"),onRegister:e.registerModal,wrapperFooterOffset:50,cancelText:e.t("common.closeText"),showOkBtn:!1}),{default:u(()=>[g(s,{onRegister:e.registerTable,searchInfo:e.searchInfo,class:"tableHeight"},{tableTitle:u(()=>[e.showDeleteButton?(b(),I(r,{key:0,type:"primary",danger:"",onClick:e.handleBatchDelete},{icon:u(()=>[g(c)]),default:u(()=>[x(" "+O(e.t("common.delete")),1)]),_:1},8,["onClick"])):R("",!0)]),_:1},8,["onRegister","searchInfo"])]),_:1},16,["title","onRegister","cancelText"])}const be=k(W,[["render",z]]);export{be as default};
