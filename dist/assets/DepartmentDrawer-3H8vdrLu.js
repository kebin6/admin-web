var F=Object.defineProperty;var f=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var b=(e,s,t)=>s in e?F(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,g=(e,s)=>{for(var t in s||(s={}))S.call(s,t)&&b(e,t,s[t]);if(f)for(var t of f(s))v.call(s,t)&&b(e,t,s[t]);return e};var c=(e,s,t)=>new Promise((o,i)=>{var d=n=>{try{l(t.next(n))}catch(m){i(m)}},p=n=>{try{l(t.throw(n))}catch(m){i(m)}},l=n=>n.done?o(n.value):Promise.resolve(n.value).then(d,p);l((t=t.apply(e,s)).next())});import{_ as x,a as B}from"./useForm-5wnZKxWU.js";import{b as k,as as P,bj as h,v as T,_ as C}from"./entry/index-C41ZFr6n-1718602026943.js";import{u as D,g as R,c as L}from"./department-kTVV3gKI.js";import{l as $,d as A,f as j,c as O,u,ab as w,_ as U,a7 as V,a8 as q,k as E,ac as M}from"./vue-BMCEF3Jf.js";import{Q as N}from"./antd-BPAr-OsJ.js";import{B as z,a as G}from"./index-DDf_l8hU.js";const{t:a}=k(),ne=[{title:a("sys.department.name"),dataIndex:"trans",width:60},{title:a("sys.department.leader"),dataIndex:"leader",width:60},{title:a("common.status"),dataIndex:"status",width:20,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),$(N,{checked:e.status===1,checkedChildren:a("common.on"),unCheckedChildren:a("common.off"),loading:e.pendingStatus,onChange(s,t){e.pendingStatus=!0;const o=s?1:0;D({id:e.id,status:o}).then(()=>{e.status=o}).finally(()=>{e.pendingStatus=!1})}}))},{title:a("common.createTime"),dataIndex:"createdAt",width:50,customRender:({record:e})=>P(e.createdAt)}],re=[{field:"name",label:a("sys.department.name"),component:"Input",colProps:{span:8},rules:[{max:50}]},{field:"leader",label:a("sys.department.leader"),component:"Input",colProps:{span:8},rules:[{max:20}]}],H=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:a("sys.department.name"),component:"Input",required:!0,rules:[{min:1,max:200}]},{field:"parentId",label:a("sys.department.parentId"),component:"ApiTreeSelect",required:!0,componentProps:{api:R,params:{page:1,pageSize:1e3,name:"",leader:""},resultField:"data.data",labelField:"trans",valueField:"id",defaultValue:{id:h.DEFAULT,parentId:-1,label:a("sys.department.firstLevelDepartment"),value:h.DEFAULT}}},{field:"ancestors",label:a("sys.department.ancestors"),component:"Input",rules:[{max:200}],componentProps:{disabled:!0},helpMessage:a("sys.department.ancestorsHelpMessage")},{field:"leader",label:a("sys.department.leader"),component:"Input",rules:[{max:20}]},{field:"phone",label:a("sys.department.phone"),component:"Input",rules:[{max:18}]},{field:"email",label:a("sys.department.email"),component:"Input",rules:[{max:70}]},{field:"sort",label:a("sys.department.sort"),component:"InputNumber",required:!0,rules:[{type:"number",max:1e4}]},{field:"remark",label:a("common.remark"),component:"Input",rules:[{max:200}]},{field:"status",label:a("sys.department.status"),component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:a("common.on"),value:1},{label:a("common.off"),value:0}]}}],Q=A({name:"DepartmentDrawer",components:{BasicDrawer:z,BasicForm:x},emits:["success","register"],setup(e,{emit:s}){const t=j(!0),{t:o}=T.useI18n(),[i,{resetFields:d,setFieldsValue:p,validate:l}]=B({labelWidth:160,baseColProps:{span:24},layout:"vertical",schemas:H,showActionButtonGroup:!1}),[n,{setDrawerProps:m,closeDrawer:y}]=G(r=>c(this,null,function*(){d(),m({confirmLoading:!1}),t.value=!!(r!=null&&r.isUpdate),u(t)&&p(g({},r.record))})),I=O(()=>u(t)?o("sys.department.editDepartment"):o("sys.department.addDepartment"));function _(){return c(this,null,function*(){const r=yield l();m({confirmLoading:!0}),r.id=u(t)?Number(r.id):0,(u(t)?yield D(r):yield L(r)).code===0&&(y(),s("success")),m({confirmLoading:!1})})}return{registerDrawer:n,registerForm:i,getTitle:I,handleSubmit:_}}});function W(e,s,t,o,i,d){const p=w("BasicForm"),l=w("BasicDrawer");return U(),V(l,M(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"500px",onOk:e.handleSubmit}),{default:q(()=>[E(p,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const J=C(Q,[["render",W]]),oe=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{J as D,oe as a,ne as c,re as s};
