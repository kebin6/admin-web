var v=(t,e,n)=>new Promise((s,r)=>{var c=a=>{try{u(n.next(a))}catch(l){r(l)}},o=a=>{try{u(n.throw(a))}catch(l){r(l)}},u=a=>a.done?s(a.value):Promise.resolve(a.value).then(c,o);u((n=n.apply(t,e)).next())});import{an as I,b as _,t as z,_ as C,f as F,am as S}from"./entry/index-C41ZFr6n-1718602026943.js";import{f,u as d,d as g,c as y,h as $,ab as p,_ as w,a7 as b,a8 as m,G as k,a1 as A,ac as B,g as T,r as N,a5 as D,y as O,J as P,ad as R,a9 as j,ae as E,ag as V,ah as q,k as G}from"./vue-BMCEF3Jf.js";import{B as J}from"./antd-BPAr-OsJ.js";import{i as L}from"./isDeepEqual-CCjWtLPA.js";function U(t){const e=f(t),n=f(!1);let s;function r(){s&&window.clearInterval(s)}function c(){n.value=!1,r(),s=null}function o(){d(n)||s||(n.value=!0,s=setInterval(()=>{d(e)===1?(c(),e.value=t):e.value-=1},1e3))}function u(){e.value=t,c()}function a(){u(),o()}return I(()=>{u()}),{start:o,reset:u,restart:a,clear:r,stop:c,currentCount:e,isStart:n}}const H={value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},K=g({name:"CountButton",components:{Button:J},props:H,setup(t){const e=f(!1),{currentCount:n,isStart:s,start:r,reset:c}=U(t.count),{t:o}=_(),u=y(()=>d(s)?o("component.countdown.sendText",[d(n)]):o("component.countdown.normalText"));$(()=>{t.value===void 0&&c()});function a(){return v(this,null,function*(){const{beforeStartFunc:l}=t;if(l&&z(l)){e.value=!0;try{(yield l())&&r()}finally{e.value=!1}}else r()})}return{handleStart:a,currentCount:n,loading:e,getButtonText:u,isStart:s}}});function M(t,e,n,s,r,c){const o=p("Button");return w(),b(o,B(t.$attrs,{disabled:t.isStart,onClick:t.handleStart,loading:t.loading}),{default:m(()=>[k(A(t.getButtonText),1)]),_:1},16,["disabled","onClick","loading"])}const h=C(K,[["render",M]]);function Q(t,e="value",n="change",s){const r=T(),c=r==null?void 0:r.emit,o=N({value:t[e]}),u=D(o),a=i=>{o.value=i};return $(()=>{o.value=t[e]}),[y({get(){return o.value},set(i){L(i,u.value)||(o.value=i,O(()=>{c==null||c(n,i,...P(d(s))||[])}))}}),a,u]}const W={value:{type:String},size:{type:String,validator:t=>["default","large","small"].includes(t)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},X=g({name:"CountDownInput",components:{CountButton:h},inheritAttrs:!1,props:W,setup(t){const{prefixCls:e}=F("countdown-input"),[n]=Q(t);return{prefixCls:e,state:n}}});function Y(t,e,n,s,r,c){const o=p("CountButton"),u=p("a-input");return w(),b(u,B(t.$attrs,{class:t.prefixCls,size:t.size,value:t.state}),R({addonAfter:m(()=>[G(o,{size:t.size,count:t.count,value:t.state,beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])]),_:2},[j(Object.keys(t.$slots).filter(a=>a!=="addonAfter"),a=>({name:a,fn:m(l=>[E(t.$slots,a,V(q(l||{})))])}))]),1040,["class","size","value"])}const Z=C(X,[["render",Y]]),ot=S(Z);S(h);export{ot as C,Q as u};
