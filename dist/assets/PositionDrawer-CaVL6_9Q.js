var y=Object.defineProperty;var f=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var h=(e,s,t)=>s in e?y(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,w=(e,s)=>{for(var t in s||(s={}))k.call(s,t)&&h(e,t,s[t]);if(f)for(var t of f(s))x.call(s,t)&&h(e,t,s[t]);return e};var p=(e,s,t)=>new Promise((r,l)=>{var u=n=>{try{i(t.next(n))}catch(m){l(m)}},c=n=>{try{i(t.throw(n))}catch(m){l(m)}},i=n=>n.done?r(n.value):Promise.resolve(n.value).then(u,c);i((t=t.apply(e,s)).next())});import{_ as D,a as S}from"./useForm-5wnZKxWU.js";import{b as B,as as v,v as F,_ as C}from"./entry/index-C41ZFr6n-1718602026943.js";import{u as b,c as R}from"./position-aNPHDdEm.js";import{l as $,d as T,f as O,c as j,u as d,ab as g,_ as q,a7 as A,a8 as L,k as N,ac as V}from"./vue-BMCEF3Jf.js";import{Q as G}from"./antd-BPAr-OsJ.js";import{B as U,a as z}from"./index-DDf_l8hU.js";const{t:o}=B(),oe=[{title:o("sys.position.name"),dataIndex:"trans",width:80},{title:o("sys.position.code"),dataIndex:"code",width:40},{title:o("common.remark"),dataIndex:"remark",width:80},{title:o("common.sort"),dataIndex:"sort",width:20},{title:o("common.status"),dataIndex:"status",width:50,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),$(G,{checked:e.status===1,checkedChildren:o("common.on"),unCheckedChildren:o("common.off"),loading:e.pendingStatus,onChange(s,t){e.pendingStatus=!0;const r=s?1:2;b({id:e.id,status:r}).then(()=>{e.status=r}).finally(()=>{e.pendingStatus=!1})}}))},{title:o("common.createTime"),dataIndex:"createdAt",width:70,customRender:({record:e})=>v(e.createdAt)}],se=[{field:"name",label:o("sys.position.name"),component:"Input",colProps:{span:8},rules:[{max:50}]},{field:"code",label:o("sys.position.code"),component:"Input",colProps:{span:8},rules:[{max:20}]},{field:"remark",label:o("common.remark"),component:"Input",colProps:{span:8},rules:[{max:200}]}],M=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:o("sys.position.name"),component:"Input",required:!0,rules:[{max:50}]},{field:"code",label:o("sys.position.code"),component:"Input",required:!0,rules:[{max:20}]},{field:"sort",label:o("common.sort"),component:"InputNumber",required:!0,rules:[{type:"number",max:1e4}]},{field:"remark",label:o("common.remark"),component:"Input",rules:[{max:200}]},{field:"status",label:o("common.status"),component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:o("common.on"),value:1},{label:o("common.off"),value:2}]}}],Q=T({name:"PositionDrawer",components:{BasicDrawer:U,BasicForm:D},emits:["success","register"],setup(e,{emit:s}){const t=O(!0),{t:r}=F.useI18n(),[l,{resetFields:u,setFieldsValue:c,validate:i}]=S({labelWidth:160,baseColProps:{span:24},layout:"vertical",schemas:M,showActionButtonGroup:!1}),[n,{setDrawerProps:m,closeDrawer:_}]=z(a=>p(this,null,function*(){u(),m({confirmLoading:!1}),t.value=!!(a!=null&&a.isUpdate),d(t)&&c(w({},a.record))})),I=j(()=>d(t)?r("sys.position.editPosition"):r("sys.position.addPosition"));function P(){return p(this,null,function*(){const a=yield i();m({confirmLoading:!0}),a.id=d(t)?Number(a.id):0,(d(t)?yield b(a):yield R(a)).code===0&&(_(),s("success")),m({confirmLoading:!1})})}return{registerDrawer:n,registerForm:l,getTitle:I,handleSubmit:P}}});function W(e,s,t,r,l,u){const c=g("BasicForm"),i=g("BasicDrawer");return q(),A(i,V(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"500px",onOk:e.handleSubmit}),{default:L(()=>[N(c,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const E=C(Q,[["render",W]]),ne=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"}));export{E as P,ne as a,oe as c,se as s};
