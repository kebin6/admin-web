var T=Object.defineProperty;var p=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var g=(e,a,t)=>a in e?T(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,h=(e,a)=>{for(var t in a||(a={}))D.call(a,t)&&g(e,t,a[t]);if(p)for(var t of p(a))S.call(a,t)&&g(e,t,a[t]);return e};var f=(e,a,t)=>new Promise((r,c)=>{var u=n=>{try{i(t.next(n))}catch(m){c(m)}},l=n=>{try{i(t.throw(n))}catch(m){c(m)}},i=n=>n.done?r(n.value):Promise.resolve(n.value).then(u,l);i((t=t.apply(e,a)).next())});import{_ as B,a as v}from"./useForm-Cq3McrEd.js";import{b as F,as as C,v as R,_ as P}from"./entry/index-DaEB-Y-8-1718870402071.js";import{u as _,c as $}from"./fileTag-Cquk0YPk.js";import{l as y,d as x,f as O,c as j,u as d,ab as w,_ as A,a7 as L,a8 as V,k as G,ac as N}from"./vue-BMCEF3Jf.js";import{Q as U}from"./antd-BNMfrwLX.js";import{B as q,a as z}from"./index-CL7BM-aX.js";const{t:s}=F(),ae=[{title:s("fms.tag.name"),dataIndex:"name",width:100},{title:s("fms.tag.remark"),dataIndex:"remark",width:100},{title:s("common.status"),dataIndex:"status",width:50,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),y(U,{checked:e.status===1,checkedChildren:s("common.on"),unCheckedChildren:s("common.off"),loading:e.pendingStatus,onChange(a,t){e.pendingStatus=!0;const r=a?1:2;_({id:e.id,status:r}).then(()=>{e.status=r}).finally(()=>{e.pendingStatus=!1})}}))},{title:s("common.createTime"),dataIndex:"createdAt",width:70,customRender:({record:e})=>C(e.createdAt)}],se=[{field:"name",label:s("fms.tag.name"),component:"Input",colProps:{span:8}},{field:"remark",label:s("fms.tag.remark"),component:"Input",colProps:{span:8}}],M=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:s("fms.tag.name"),component:"Input",required:!0},{field:"remark",label:s("fms.tag.remark"),component:"Input"},{field:"status",label:s("fms.tag.status"),component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:s("common.on"),value:1},{label:s("common.off"),value:2}]}}],Q=x({name:"TagDrawer",components:{BasicDrawer:q,BasicForm:B},emits:["success","register"],setup(e,{emit:a}){const t=O(!0),{t:r}=R.useI18n(),[c,{resetFields:u,setFieldsValue:l,validate:i}]=v({labelWidth:160,baseColProps:{span:24},layout:"vertical",schemas:M,showActionButtonGroup:!1}),[n,{setDrawerProps:m,closeDrawer:b}]=z(o=>f(this,null,function*(){u(),m({confirmLoading:!1}),t.value=!!(o!=null&&o.isUpdate),d(t)&&l(h({},o.record))})),k=j(()=>d(t)?r("fms.tag.editTag"):r("fms.tag.addTag"));function I(){return f(this,null,function*(){const o=yield i();m({confirmLoading:!0}),o.id=d(t)?Number(o.id):0,(d(t)?yield _(o):yield $(o)).code===0&&(b(),a("success")),m({confirmLoading:!1})})}return{registerDrawer:n,registerForm:c,getTitle:k,handleSubmit:I}}});function W(e,a,t,r,c,u){const l=w("BasicForm"),i=w("BasicDrawer");return A(),L(i,N(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"500px",onOk:e.handleSubmit}),{default:V(()=>[G(l,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const E=P(Q,[["render",W]]),ne=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"}));export{E as T,ne as a,ae as c,se as s};
