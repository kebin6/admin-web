var l=(e,c,o)=>new Promise((d,s)=>{var u=t=>{try{r(o.next(t))}catch(n){s(n)}},a=t=>{try{r(o.throw(t))}catch(n){s(n)}},r=t=>t.done?d(t.value):Promise.resolve(t.value).then(u,a);r((o=o.apply(e,c)).next())});import{i as T}from"./index-DnIErCUr.js";import{B as O,u as S}from"./useTable-DprHC9Xn.js";import{T as v}from"./useForm-Cq3McrEd.js";import{aq as I,v as R,_ as $}from"./entry/index-DaEB-Y-8-1718870402071.js";import{u as F}from"./index-CL7BM-aX.js";import{O as x,g as E,c as M,s as N,d as _}from"./OrderDrawer-BGn4QFPd.js";import{M as V}from"./antd-BNMfrwLX.js";import{d as L,f as b,k as f,ab as p,_ as g,$ as k,a8 as m,a7 as U,G as y,a1 as B,aa as D,F as j}from"./vue-BMCEF3Jf.js";import"./ExclamationCircleOutlined-BOht0FRf.js";import"./index-DxzXX1s5.js";import"./isBoolean-Dou3jA6I.js";import"./index-CmerSBcF.js";import"./useWindowSizeFn-NWtUJjFU.js";import"./isDeepEqual-BYVIA4i9.js";import"./isNumber-j3SIk7av.js";import"./index-BQ8_-9UH.js";import"./object-BY_VTB7H.js";import"./onMountedOrActivated-CPthIpwg.js";import"./sortable.esm-DFFrMEeC.js";import"./index-BgDhUzJz.js";import"./copyTextToClipboard-Ke6QqFB6.js";import"./useSortable-nsvvptnY.js";import"./index-BdOZjJKO.js";import"./index-D-g43U_h.js";const q=L({name:"OrderManagement",components:{BasicTable:O,OrderDrawer:x,TableAction:v,Button:I},setup(){const{t:e}=R.useI18n(),c=b(),o=b(!1),[d,{openDrawer:s}]=F(),[u,{reload:a}]=S({title:e("platform_management.order.orderList"),api:E,columns:M,formConfig:{labelWidth:120,schemas:N},useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,clickToRowSelect:!1,actionColumn:{width:100,title:e("common.action"),dataIndex:"action",fixed:void 0},rowKey:"id",rowSelection:{type:"checkbox",onChange:(i,C)=>{c.value=i,o.value=i.length>0}}});function r(){s(!0,{isUpdate:!1})}function t(i){s(!0,{record:i,isUpdate:!0})}function n(i){return l(this,null,function*(){(yield _({ids:[i.id]})).code===0&&(yield a())})}function h(){return l(this,null,function*(){V.confirm({title:e("common.deleteConfirm"),icon:f(T.ExclamationCircleOutlined),onOk(){return l(this,null,function*(){(yield _({ids:c.value})).code===0&&(o.value=!1,yield a())})},onCancel(){}})})}function w(){return l(this,null,function*(){yield a()})}return{t:e,registerTable:u,registerDrawer:d,handleCreate:r,handleEdit:t,handleDelete:n,handleSuccess:w,handleBatchDelete:h,showDeleteButton:o}}});function A(e,c,o,d,s,u){const a=p("Button"),r=p("a-button"),t=p("BasicTable"),n=p("OrderDrawer");return g(),k("div",null,[f(t,{onRegister:e.registerTable},{tableTitle:m(()=>[e.showDeleteButton?(g(),U(a,{key:0,type:"primary",danger:"",preIcon:"ant-design:delete-outlined",onClick:e.handleBatchDelete},{default:m(()=>[y(B(e.t("common.delete")),1)]),_:1},8,["onClick"])):D("",!0)]),toolbar:m(()=>[f(r,{type:"primary",onClick:e.handleCreate},{default:m(()=>[y(B(e.t("platform_management.order.addOrder")),1)]),_:1},8,["onClick"])]),bodyCell:m(({column:h,record:w})=>[h.key==="action"?(g(),k(j,{key:0},[],64)):D("",!0)]),_:1},8,["onRegister"]),f(n,{onRegister:e.registerDrawer,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}const fe=$(q,[["render",A]]);export{fe as default};
