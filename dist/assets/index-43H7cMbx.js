var c=(e,l,o)=>new Promise((u,s)=>{var p=t=>{try{i(o.next(t))}catch(r){s(r)}},n=t=>{try{i(o.throw(t))}catch(r){s(r)}},i=t=>t.done?u(t.value):Promise.resolve(t.value).then(p,n);i((o=o.apply(e,l)).next())});import{i as D}from"./index-D46PiUjU.js";import{B as S,u as v}from"./useTable-DUDBe34E.js";import{T as I}from"./useForm-DGqLGoed.js";import{aq as R,v as $,_ as E}from"./entry/index-DvPJ5Vzs-1718250502895.js";import{u as A}from"./index-BsqrLki-.js";import{T as M,c as N,s as V}from"./TagDrawer-CYJjWrR_.js";import{g as F,d as w}from"./fileTag-DpOS3SOM.js";import{M as L}from"./antd-BPAr-OsJ.js";import{d as O,f as C,k as f,ab as m,_ as T,$ as U,a8 as d,a7 as k,G as y,a1 as _,aa as B}from"./vue-BMCEF3Jf.js";import"./ExclamationCircleOutlined-s2Xy4hHc.js";import"./index-CU9epjG0.js";import"./isBoolean-Dou3jA6I.js";import"./index-3BhCtvAk.js";import"./useWindowSizeFn-DLNrSaDV.js";import"./isDeepEqual-DDA9_BTC.js";import"./isNumber-j3SIk7av.js";import"./index-Bji4O60f.js";import"./object-BY_VTB7H.js";import"./onMountedOrActivated-CPthIpwg.js";import"./sortable.esm-DFFrMEeC.js";import"./index-CBIPPzDl.js";import"./copyTextToClipboard-sKBLHCHY.js";import"./useSortable-DDWVM7pI.js";import"./index-DQkEJ5Ra.js";import"./index-DsLJPeYo.js";const j=O({name:"TagManagement",components:{BasicTable:S,TagDrawer:M,TableAction:I,Button:R},setup(){const{t:e}=$.useI18n(),l=C(),o=C(!1),[u,{openDrawer:s}]=A(),[p,{reload:n}]=v({title:e("fms.tag.tagList"),api:F,columns:N,formConfig:{labelWidth:120,schemas:V},useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,clickToRowSelect:!1,actionColumn:{width:30,title:e("common.action"),dataIndex:"action",fixed:void 0},rowKey:"id",rowSelection:{type:"checkbox",onChange:(a,b)=>{l.value=a,o.value=a.length>0}}});function i(){s(!0,{isUpdate:!1})}function t(a){s(!0,{record:a,isUpdate:!0})}function r(a){return c(this,null,function*(){(yield w({ids:[a.id]})).code===0&&(yield n())})}function g(){return c(this,null,function*(){L.confirm({title:e("common.deleteConfirm"),icon:f(D.ExclamationCircleOutlined),onOk(){return c(this,null,function*(){(yield w({ids:l.value})).code===0&&(o.value=!1,yield n())})},onCancel(){}})})}function h(){return c(this,null,function*(){yield n()})}return{t:e,registerTable:p,registerDrawer:u,handleCreate:i,handleEdit:t,handleDelete:r,handleSuccess:h,handleBatchDelete:g,showDeleteButton:o}}});function q(e,l,o,u,s,p){const n=m("Button"),i=m("a-button"),t=m("TableAction"),r=m("BasicTable"),g=m("TagDrawer");return T(),U("div",null,[f(r,{onRegister:e.registerTable},{tableTitle:d(()=>[e.showDeleteButton?(T(),k(n,{key:0,type:"primary",danger:"",preIcon:"ant-design:delete-outlined",onClick:e.handleBatchDelete},{default:d(()=>[y(_(e.t("common.delete")),1)]),_:1},8,["onClick"])):B("",!0)]),toolbar:d(()=>[f(i,{type:"primary",onClick:e.handleCreate},{default:d(()=>[y(_(e.t("fms.tag.addTag")),1)]),_:1},8,["onClick"])]),bodyCell:d(({column:h,record:a})=>[h.key==="action"?(T(),k(t,{key:0,actions:[{icon:"clarity:note-edit-line",onClick:e.handleEdit.bind(null,a)},{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:e.t("common.deleteConfirm"),placement:"left",confirm:e.handleDelete.bind(null,a)}}]},null,8,["actions"])):B("",!0)]),_:1},8,["onRegister"]),f(g,{onRegister:e.registerDrawer,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}const fe=E(j,[["render",q]]);export{fe as default};
