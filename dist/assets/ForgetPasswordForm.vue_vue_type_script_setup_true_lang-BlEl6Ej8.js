var h=(b,u,i)=>new Promise((p,o)=>{var c=n=>{try{m(i.next(n))}catch(d){o(d)}},v=n=>{try{m(i.throw(n))}catch(d){o(d)}},m=n=>n.done?p(n.value):Promise.resolve(n.value).then(c,v);m((i=i.apply(b,u)).next())});import{u as F,a as z,L as E,b as U}from"./LoginFormTitle-CmrziGkX.js";import{C as I}from"./index-BgDhUzJz.js";import{b as L,au as N,av as V,ar as A}from"./entry/index-DaEB-Y-8-1718870402071.js";import{a as D,b as G}from"./captcha-D6ckRnn2.js";import{U as k,i as P,B as x,X as M,Y as O}from"./antd-BNMfrwLX.js";import{d as W,f as S,r as X,c as C,u as e,_ as Y,$,k as s,a8 as l,a0 as j,G as g,a1 as w,F as q,aa as H}from"./vue-BMCEF3Jf.js";const J={class:"pt-4 pb-4"},oe=W({__name:"ForgetPasswordForm",setup(b){const u=k.Item,i=M,p=O,{t:o}=L(),{handleBackLogin:c,getLoginState:v}=F(),{getFormRules:m}=z(),{createErrorModal:n}=A(),d=S(),f=S(!1),a=X({msgType:"email",target:"",captcha:"",password:"",confirmPassword:""}),R=C(()=>e(v)===E.RESET_PASSWORD),_=C(()=>a.msgType==="email"?o("sys.login.emailPlaceholder"):o("sys.login.mobilePlaceholder"));function B(){return h(this,null,function*(){return a.msgType=="email"?(yield D({email:a.target})).code==0:(yield G({phoneNumber:a.target})).code==0})}function T(){return h(this,null,function*(){if(e(d)){if(a.password!=a.confirmPassword){n({title:o("sys.login.diffPwd")});return}f.value=!0,a.msgType=="email"?(yield N({email:a.target,captcha:a.captcha,password:a.password})).code==0&&(f.value=!1,c()):(yield V({phoneNumber:a.target,captcha:a.captcha,password:a.password})).code==0&&(f.value=!1,c())}})}return(y,t)=>R.value?(Y(),$(q,{key:0},[s(U,{class:"enter-x"}),s(e(k),{class:"p-4 enter-x",model:a,rules:e(m),ref_key:"formRef",ref:d},{default:l(()=>[j("div",J,[s(e(i),{value:a.msgType,"onUpdate:value":t[0]||(t[0]=r=>a.msgType=r),"button-style":"solid",size:"large"},{default:l(()=>[s(e(p),{class:"bg-transparent",value:"email"},{default:l(()=>[g(w(e(o)("sys.login.email")),1)]),_:1}),s(e(p),{class:"bg-transparent",value:"sms"},{default:l(()=>[g(w(e(o)("sys.login.mobile")),1)]),_:1})]),_:1},8,["value"])]),s(e(u),{name:"target",class:"enter-x"},{default:l(()=>[s(e(P),{size:"large",value:a.target,"onUpdate:value":t[1]||(t[1]=r=>a.target=r),placeholder:_.value,"onUpdate:placeholder":t[2]||(t[2]=r=>_.value=r)},null,8,["value","placeholder"])]),_:1}),s(e(u),{name:"captcha",class:"enter-x"},{default:l(()=>[s(e(I),{size:"large",value:a.captcha,"onUpdate:value":t[3]||(t[3]=r=>a.captcha=r),count:60,placeholder:e(o)("sys.login.captcha"),"send-code-api":B},null,8,["value","placeholder"])]),_:1}),s(e(u),{name:"password",class:"enter-x"},{default:l(()=>[s(e(P),{type:"password",size:"large",value:a.password,"onUpdate:value":t[4]||(t[4]=r=>a.password=r),placeholder:e(o)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),s(e(u),{name:"confirmPassword",class:"enter-x"},{default:l(()=>[s(e(P),{type:"password",size:"large",value:a.confirmPassword,"onUpdate:value":t[5]||(t[5]=r=>a.confirmPassword=r),placeholder:e(o)("sys.login.confirmPassword")},null,8,["value","placeholder"])]),_:1}),s(e(u),{class:"enter-x"},{default:l(()=>[s(e(x),{type:"primary",size:"large",block:"",onClick:T,loading:f.value},{default:l(()=>[g(w(e(o)("common.resetText")),1)]),_:1},8,["loading"]),s(e(x),{size:"large",block:"",class:"mt-4",onClick:e(c)},{default:l(()=>[g(w(e(o)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])],64)):H("",!0)}});export{oe as _};
