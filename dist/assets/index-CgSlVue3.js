var m=(e,s,o)=>new Promise((c,l)=>{var p=t=>{try{a(o.next(t))}catch(n){l(n)}},i=t=>{try{a(o.throw(t))}catch(n){l(n)}},a=t=>t.done?c(t.value):Promise.resolve(t.value).then(p,i);a((o=o.apply(e,s)).next())});import{i as v}from"./index-DFMDnBcl.js";import{B as R,u as N}from"./useTable-CCLOgsii.js";import{T as $}from"./useForm-5wnZKxWU.js";import{aq as E,v as A,_ as M}from"./entry/index-C41ZFr6n-1718602026943.js";import{u as V}from"./index-DDf_l8hU.js";import{D as F,c as L,s as O}from"./DictionaryDetailDrawer-J3p64iTG.js";import{g as U,d as C}from"./copyTextToClipboard-Cxs8Y4LI.js";import{d as j,f as g,S as q,r as G,u as k,k as h,ab as d,_ as b,$ as W,a8 as u,a7 as B,G as I,a1 as T,aa as _}from"./vue-BMCEF3Jf.js";import{M as z}from"./antd-BPAr-OsJ.js";import"./ExclamationCircleOutlined-cpSGxMVL.js";import"./index-oRM4bmDd.js";import"./isBoolean-Dou3jA6I.js";import"./index-G5Wa8967.js";import"./useWindowSizeFn-Cczi9si3.js";import"./isDeepEqual-CCjWtLPA.js";import"./isNumber-j3SIk7av.js";import"./index-CrgunjrK.js";import"./object-BY_VTB7H.js";import"./onMountedOrActivated-CPthIpwg.js";import"./sortable.esm-DFFrMEeC.js";import"./index-D93fFNl6.js";import"./useSortable-B_A9JW_B.js";import"./index-CqgpaEX_.js";import"./index-9koevRY3.js";import"./dictionary-Di0GR5O7.js";const H=j({name:"DictionaryDetailManagement",components:{BasicTable:R,DictionaryDetailDrawer:F,TableAction:$,Button:E},setup(){const{t:e}=A.useI18n(),s=g(),o=g(!1),{currentRoute:c}=q(),l=G({dictionaryId:Number(k(c).params.dictionaryId)}),[p,{openDrawer:i}]=V(),[a,{reload:t}]=N({title:e("sys.dictionary.dictionaryDetailList"),api:U,columns:L,formConfig:{labelWidth:120,schemas:O},useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,clickToRowSelect:!1,actionColumn:{width:30,title:e("common.action"),dataIndex:"action",fixed:void 0},rowKey:"id",rowSelection:{type:"checkbox",onChange:(r,w)=>{s.value=r,o.value=r.length>0}}});function n(){i(!0,{dictionaryId:Number(k(c).params.dictionaryId),isUpdate:!1})}function y(r){i(!0,{record:r,isUpdate:!0})}function D(r){return m(this,null,function*(){(yield C({ids:[r.id]})).code===0&&(yield t())})}function f(){return m(this,null,function*(){z.confirm({title:e("common.deleteConfirm"),icon:h(v.ExclamationCircleOutlined),onOk(){return m(this,null,function*(){(yield C({ids:s.value},"modal")).code===0&&(o.value=!1,yield t())})},onCancel(){}})})}function S(){return m(this,null,function*(){yield t()})}return{t:e,registerTable:a,registerDrawer:p,handleCreate:n,handleEdit:y,handleDelete:D,handleSuccess:S,handleBatchDelete:f,showDeleteButton:o,searchInfo:l}}});function J(e,s,o,c,l,p){const i=d("Button"),a=d("a-button"),t=d("TableAction"),n=d("BasicTable"),y=d("DictionaryDetailDrawer");return b(),W("div",null,[h(n,{onRegister:e.registerTable,searchInfo:e.searchInfo},{tableTitle:u(()=>[e.showDeleteButton?(b(),B(i,{key:0,type:"primary",danger:"",preIcon:"ant-design:delete-outlined",onClick:e.handleBatchDelete},{default:u(()=>[I(T(e.t("common.delete")),1)]),_:1},8,["onClick"])):_("",!0)]),toolbar:u(()=>[h(a,{type:"primary",onClick:e.handleCreate},{default:u(()=>[I(T(e.t("sys.dictionary.addDictionaryDetail")),1)]),_:1},8,["onClick"])]),bodyCell:u(({column:D,record:f})=>[D.key==="action"?(b(),B(t,{key:0,actions:[{icon:"clarity:note-edit-line",onClick:e.handleEdit.bind(null,f)},{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:e.t("common.deleteConfirm"),placement:"left",confirm:e.handleDelete.bind(null,f)}}]},null,8,["actions"])):_("",!0)]),_:1},8,["onRegister","searchInfo"]),h(y,{onRegister:e.registerDrawer,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}const we=M(H,[["render",J]]);export{we as default};
