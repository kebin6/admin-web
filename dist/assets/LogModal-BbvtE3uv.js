var d=(e,o,n)=>new Promise((i,r)=>{var m=a=>{try{l(n.next(a))}catch(s){r(s)}},c=a=>{try{l(n.throw(a))}catch(s){r(s)}},l=a=>a.done?i(a.value):Promise.resolve(a.value).then(m,c);l((n=n.apply(e,o)).next())});import{a as B,b as T}from"./ExclamationCircleOutlined-cpSGxMVL.js";import{b as L,as as M,a as w,aq as _,v,ar as k,_ as S}from"./entry/index-C41ZFr6n-1718602026943.js";import{c as C}from"./components-CdEJmZyS.js";import{l as y,d as x,f as h,r as D,k as g,ab as p,_ as b,a7 as I,a8 as u,G as O,a1 as R,aa as P,ac as j}from"./vue-BMCEF3Jf.js";import{B as $,a as V}from"./index-G5Wa8967.js";import{B as E,u as F}from"./useTable-CCLOgsii.js";import"./useForm-5wnZKxWU.js";import{M as N}from"./antd-BPAr-OsJ.js";import"./index-DFMDnBcl.js";import"./index-oRM4bmDd.js";import"./useWindowSizeFn-Cczi9si3.js";import"./isDeepEqual-CCjWtLPA.js";import"./isBoolean-Dou3jA6I.js";import"./isNumber-j3SIk7av.js";import"./index-CrgunjrK.js";import"./object-BY_VTB7H.js";import"./onMountedOrActivated-CPthIpwg.js";import"./sortable.esm-DFFrMEeC.js";import"./index-D93fFNl6.js";import"./copyTextToClipboard-Cxs8Y4LI.js";import"./useSortable-B_A9JW_B.js";import"./index-CqgpaEX_.js";import"./index-9koevRY3.js";const{t}=L(),A=[{title:t("mcms.emailLog.target"),dataIndex:"target",width:50},{title:t("mcms.emailLog.subject"),dataIndex:"subject",width:30},{title:t("mcms.emailLog.content"),dataIndex:"content",width:100},{title:t("mcms.emailLog.sendStatus"),dataIndex:"sendStatus",width:30,customRender:({record:e})=>{let o="";return e.sendStatus===1?o=t("common.successful"):o=t("common.failed"),y(C.Tag,{color:e.sendStatus===1?"green":"red"},o)}},{title:t("mcms.emailLog.provider"),dataIndex:"provider",width:30},{title:t("common.createTime"),dataIndex:"createdAt",width:40,customRender:({record:e})=>M(e.createdAt)}],H=[{field:"target",label:t("mcms.emailLog.target"),component:"Input",colProps:{span:8}},{field:"subject",label:t("mcms.emailLog.subject"),component:"Input",colProps:{span:8}},{field:"provider",label:t("mcms.emailLog.provider"),component:"Input",colProps:{span:8}},{field:"sendStatus",label:t("mcms.emailLog.sendStatus"),component:"Select",colProps:{span:8},defaultValue:0,componentProps:{options:[{label:t("common.all"),value:0},{label:t("common.successful"),value:1},{label:t("common.failed"),value:2}]}}],q=(e,o="notice")=>w.post({url:"/sys-api/email_log/list",params:e},{errorMessageMode:o}),G=(e,o="notice")=>w.post({url:"/sys-api/email_log/delete",params:e},{errorMessageMode:o,successMessageMode:o}),W=x({components:{BasicModal:$,BasicTable:E,DeleteOutlined:B,Button:_},setup(){const{t:e}=v.useI18n(),o=h(),n=h(!1),{notification:i}=k(),r=D({}),[m,{reload:c}]=F({title:e("sys.task.taskList"),api:q,columns:A,formConfig:{labelWidth:120,schemas:H},useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,clickToRowSelect:!1,rowKey:"id",rowSelection:{type:"checkbox",onChange:(s,f)=>{o.value=s,n.value=s.length>0}}}),[l]=V(s=>d(this,null,function*(){r.taskId=s.record.id}));function a(){return d(this,null,function*(){N.confirm({title:e("common.deleteConfirm"),icon:g(T),onOk(){return d(this,null,function*(){const f=yield G({ids:o.value});f.code===0&&(n.value=!1,i.success({message:e("common.successful"),description:e(f.msg),duration:3}),yield c())})},onCancel(){}})})}return{t:e,registerTable:m,showDeleteButton:n,handleBatchDelete:a,registerModal:l,searchInfo:r}}});function z(e,o,n,i,r,m){const c=p("DeleteOutlined"),l=p("Button"),a=p("BasicTable"),s=p("BasicModal");return b(),I(s,j(e.$attrs,{title:e.t("mcms.emailLog.emailLogList"),onRegister:e.registerModal,wrapperFooterOffset:50,cancelText:e.t("common.closeText"),showOkBtn:!1}),{default:u(()=>[g(a,{onRegister:e.registerTable,searchInfo:e.searchInfo,class:"tableHeight"},{tableTitle:u(()=>[e.showDeleteButton?(b(),I(l,{key:0,type:"primary",danger:"",onClick:e.handleBatchDelete},{icon:u(()=>[g(c)]),default:u(()=>[O(" "+R(e.t("common.delete")),1)]),_:1},8,["onClick"])):P("",!0)]),_:1},8,["onRegister","searchInfo"])]),_:1},16,["title","onRegister","cancelText"])}const be=S(W,[["render",z]]);export{be as default};
