var S=Object.defineProperty;var g=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var h=(o,s,n)=>s in o?S(o,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[s]=n,P=(o,s)=>{for(var n in s||(s={}))R.call(s,n)&&h(o,n,s[n]);if(g)for(var n of g(s))V.call(s,n)&&h(o,n,s[n]);return o};var y=(o,s,n)=>new Promise((t,l)=>{var p=r=>{try{u(n.next(r))}catch(d){l(d)}},i=r=>{try{u(n.throw(r))}catch(d){l(d)}},u=r=>r.done?t(r.value):Promise.resolve(r.value).then(p,i);u((n=n.apply(o,s)).next())});import{_ as D,a as F}from"./useForm-DGqLGoed.js";import{b as A,I as N,as as G,bl as L,bj as w,v as $,bm as q,bn as k,ar as C,_ as H}from"./entry/index-DvPJ5Vzs-1718250502895.js";import{G as I}from"./antd-BPAr-OsJ.js";import{l as b,d as j,f as v,c as O,u as c,ab as T,_ as U,a7 as z,a8 as E,k as K,ac as Z}from"./vue-BMCEF3Jf.js";import{B as W,a as J}from"./index-BsqrLki-.js";const{t:e}=A(),Q=[{title:"ID",dataIndex:"id",width:200,align:"left"},{title:e("sys.menu.paramType"),dataIndex:"dataType",width:200,align:"left"},{title:e("sys.menu.paramKey"),dataIndex:"key",width:200,align:"left"},{title:e("sys.menu.paramValue"),dataIndex:"value",width:200,align:"left"},{title:e("common.action"),dataIndex:"action",width:200,align:"left"}],ue=[{title:e("sys.menu.menuName"),dataIndex:"trans",width:200,align:"left"},{title:e("sys.menu.icon"),width:50,customRender:({record:o})=>b(N,{icon:o.icon})},{title:e("sys.apis.serviceName"),dataIndex:"serviceName",width:100},{title:e("sys.menu.routePath"),dataIndex:"path",width:200},{title:e("sys.menu.order"),dataIndex:"sort",width:80},{title:e("common.status"),dataIndex:"disabled",width:80,customRender:({record:o})=>{const n=~~o.disabled===0,t=n?"green":"red",l=e(n?"common.on":"common.off");return b(I,{color:t},()=>l)}},{title:e("sys.menu.isHidden"),dataIndex:"hideMenu",width:80,customRender:({record:o})=>{const n=~~o.hideMenu===1,t=n?"green":"red",l=e(n?"common.yes":"common.no");return b(I,{color:t},()=>l)}},{title:e("common.createTime"),dataIndex:"createdAt",width:180,customRender:({record:o})=>G(o.createdAt)}],m=o=>o===1,X=[{field:"menuType",label:e("sys.menu.type"),component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:e("sys.menu.directory"),value:0},{label:e("sys.menu.menu"),value:1}]},colProps:{lg:24,md:24,sm:24}},{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:e("sys.menu.menuName"),component:"Input",required:!0,rules:[{max:50}],colProps:{lg:12,md:12,sm:12}},{field:"title",label:e("sys.menu.menuTitle"),component:"Input",required:!0,rules:[{max:50}],colProps:{lg:12,md:12,sm:12}},{field:"parentId",label:e("sys.menu.menuParent"),component:"ApiTreeSelect",required:!0,componentProps:{api:L,resultField:"data.data",labelField:"trans",valueField:"id",defaultValue:{id:w.DEFAULT,parentId:-1,label:e("sys.menu.rootMenu"),value:w.DEFAULT}},colProps:{lg:12,md:12,sm:12}},{field:"icon",label:e("sys.menu.icon"),component:"IconPicker",required:!0,colProps:{lg:12,md:12,sm:12}},{field:"serviceName",label:e("sys.apis.serviceName"),component:"Input",defaultValue:"",rules:[{max:50}],colProps:{lg:24,md:24,sm:24},helpMessage:e("sys.apis.serviceNameHelpMessage")},{field:"path",label:e("sys.menu.routePath"),component:"Input",required:!0,helpMessage:e("sys.menu.pathHelp"),rules:[{pattern:/^(\/(\:)?[0-9A-Za-z_-]+)*$/gm,message:e("common.wrongFormat")}],colProps:{lg:24,md:24,sm:24}},{field:"component",label:e("sys.menu.componentPath"),component:"Input",required:!0,helpMessage:e("sys.menu.componentHelp"),ifShow:({values:o})=>m(o.menuType),rules:[{pattern:/^(\/[0-9A-Za-z_-]+)*$/gm,message:e("common.wrongFormat")}],colProps:{lg:24,md:24,sm:24}},{field:"redirect",label:e("sys.menu.redirectPath"),component:"Input",defaultValue:"",ifShow:({values:o})=>m(o.menuType),rules:[{max:300}],colProps:{lg:24,md:24,sm:24}},{field:"frameSrc",label:e("sys.menu.frameSrc"),component:"Input",defaultValue:"",ifShow:({values:o})=>m(o.menuType),rules:[{max:300}],colProps:{lg:24,md:24,sm:24}},{field:"realPath",label:e("sys.menu.realPath"),component:"Input",defaultValue:"",ifShow:({values:o})=>m(o.menuType),rules:[{max:300}],colProps:{lg:24,md:24,sm:24}},{field:"sort",label:e("sys.menu.order"),component:"InputNumber",required:!0,componentProps:{max:1e4},colProps:{lg:12,md:12,sm:12}},{field:"dynamicLevel",label:e("sys.menu.dynamicLevel"),component:"InputNumber",required:!0,componentProps:{max:20},colProps:{lg:12,md:12,sm:12}},{field:"disabled",label:e("common.status"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.on"),value:!1},{label:e("common.off"),value:!0}]},colProps:{lg:12,md:12,sm:12}},{field:"ignoreKeepAlive",label:e("sys.menu.isKeepAlive"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.yes"),value:!1},{label:e("common.no"),value:!0}]},colProps:{lg:12,md:12,sm:12},ifShow:({values:o})=>m(o.menuType)},{field:"hideMenu",label:e("sys.menu.isHidden"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.yes"),value:!0},{label:e("common.no"),value:!1}]},colProps:{lg:12,md:12,sm:12}},{field:"hideBreadcrumb",label:e("sys.menu.isBreadcrumbShown"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.yes"),value:!1},{label:e("common.no"),value:!0}]},ifShow:({values:o})=>m(o.menuType),colProps:{lg:12,md:12,sm:12}},{field:"hideTab",label:e("sys.menu.hideTab"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.yes"),value:!0},{label:e("common.no"),value:!1}]},ifShow:({values:o})=>m(o.menuType),colProps:{lg:12,md:12,sm:12}},{field:"carryParam",label:e("sys.menu.carryParam"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.yes"),value:!0},{label:e("common.no"),value:!1}]},ifShow:({values:o})=>m(o.menuType),colProps:{lg:12,md:12,sm:12}},{field:"hideChildrenInMenu",label:e("sys.menu.hideChildrenInMenu"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.yes"),value:!0},{label:e("common.no"),value:!1}]},colProps:{lg:12,md:12,sm:12}},{field:"affix",label:e("sys.menu.affix"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.yes"),value:!0},{label:e("common.no"),value:!1}]},ifShow:({values:o})=>m(o.menuType),colProps:{lg:12,md:12,sm:12}}],Y=j({name:"MenuDrawer",components:{BasicDrawer:W,BasicForm:D},emits:["success","register"],setup(o,{emit:s}){const n=v(!0),{t}=$.useI18n(),l=v(0),{createMessage:p}=C(),[i,{resetFields:u,setFieldsValue:r,validate:d}]=F({labelWidth:160,layout:"vertical",schemas:X,showActionButtonGroup:!1}),[x,{setDrawerProps:f,closeDrawer:M}]=J(a=>y(this,null,function*(){u(),f({confirmLoading:!1}),n.value=!!(a!=null&&a.isUpdate),c(n)&&r(P({},a.record)),"record"in a&&(l.value=a.record.id)})),_=O(()=>c(n)?t("sys.menu.editMenu"):t("sys.menu.addMenu"));function B(){return y(this,null,function*(){const a=yield d();if(f({confirmLoading:!0}),a.parentId=a.parentId?Number(a.parentId):0,a.id=c(n)?Number(a.id):0,a.parentId===a.id&&c(n)){p.error(t("common.notAllowSameAsParentId")),f({confirmLoading:!1});return}(c(n)?yield q(a):yield k(a)).code===0&&(M(),s("success")),f({confirmLoading:!1})})}return{t,isUpdate:n,registerDrawer:x,registerForm:i,getTitle:_,handleSubmit:B,extraParamColumns:Q}}});function ee(o,s,n,t,l,p){const i=T("BasicForm"),u=T("BasicDrawer");return U(),z(u,Z(o.$attrs,{onRegister:o.registerDrawer,showFooter:"",title:o.getTitle,width:"50%",onOk:o.handleSubmit}),{default:E(()=>[K(i,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const oe=H(Y,[["render",ee],["__scopeId","data-v-bcc42ee4"]]),ie=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{oe as M,ie as a,ue as c};
