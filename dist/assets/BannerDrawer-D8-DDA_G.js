var S=Object.defineProperty;var g=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var b=(e,t,a)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,_=(e,t)=>{for(var a in t||(t={}))D.call(t,a)&&b(e,a,t[a]);if(g)for(var a of g(t))v.call(t,a)&&b(e,a,t[a]);return e};var f=(e,t,a)=>new Promise((s,m)=>{var u=r=>{try{l(a.next(r))}catch(i){m(i)}},d=r=>{try{l(a.throw(r))}catch(i){m(i)}},l=r=>r.done?s(r.value):Promise.resolve(r.value).then(u,d);l((a=a.apply(e,t)).next())});import{_ as x,a as y}from"./useForm-DGqLGoed.js";import{a as c,b as F,v as q,_ as A}from"./entry/index-DvPJ5Vzs-1718250502895.js";import{l as k,d as C,f as j,c as R,u as p,ab as h,_ as T,a7 as $,a8 as N,k as U,ac as P}from"./vue-BMCEF3Jf.js";import{Q as L}from"./antd-BPAr-OsJ.js";import{B as O,a as V}from"./index-BsqrLki-.js";const te=(e,t="notice")=>c.post({url:"/wl-api/banner/list",params:e},{errorMessageMode:t}),G=(e,t="notice")=>c.post({url:"/wl-api/banner/create",params:e},{errorMessageMode:t,successMessageMode:t}),w=(e,t="notice")=>c.post({url:"/wl-api/banner/update",params:e},{errorMessageMode:t,successMessageMode:t}),ne=(e,t="notice")=>c.post({url:"/wl-api/banner/delete",params:e},{errorMessageMode:t,successMessageMode:t}),{t:n}=F(),ae=[{title:n("platform_management.banner.id"),dataIndex:"id",width:100},{title:n("platform_management.banner.createdAt"),dataIndex:"createdAt",width:100},{title:n("platform_management.banner.updatedAt"),dataIndex:"updatedAt",width:100},{title:n("platform_management.banner.endpoint"),dataIndex:"endpoint",width:100},{title:n("platform_management.banner.module"),dataIndex:"module",width:100},{title:n("platform_management.banner.fileType"),dataIndex:"fileType",width:100},{title:n("platform_management.banner.path"),dataIndex:"path",width:100},{title:n("platform_management.banner.jumpUrl"),dataIndex:"jumpUrl",width:100},{title:n("platform_management.banner.file"),dataIndex:"file",width:100},{title:n("common.status"),dataIndex:"status",width:50,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),k(L,{checked:e.status===1,checkedChildren:n("common.on"),unCheckedChildren:n("common.off"),loading:e.pendingStatus,onChange(t,a){e.pendingStatus=!0;const s=t?1:2;w({id:e.id,status:s}).then(()=>{e.status=s}).finally(()=>{e.pendingStatus=!1})}}))}],re=[],z=[{field:"id",label:"ID",component:"Input",show:!1},{field:"id",label:n("platform_management.banner.id"),component:"InputNumber",required:!0},{field:"createdAt",label:n("platform_management.banner.createdAt"),component:"InputNumber",required:!0},{field:"updatedAt",label:n("platform_management.banner.updatedAt"),component:"InputNumber",required:!0},{field:"endpoint",label:n("platform_management.banner.endpoint"),component:"Input",required:!0},{field:"module",label:n("platform_management.banner.module"),component:"Input",required:!0},{field:"fileType",label:n("platform_management.banner.fileType"),component:"InputNumber",required:!0},{field:"path",label:n("platform_management.banner.path"),component:"Input",required:!0},{field:"jumpUrl",label:n("platform_management.banner.jumpUrl"),component:"Input",required:!0},{field:"file",label:n("platform_management.banner.file"),component:"Input",required:!0},{field:"status",label:n("platform_management.banner.status"),component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:n("common.on"),value:1},{label:n("common.off"),value:2}]}}],H=C({name:"BannerDrawer",components:{BasicDrawer:O,BasicForm:x},emits:["success","register"],setup(e,{emit:t}){const a=j(!0),{t:s}=q.useI18n(),[m,{resetFields:u,setFieldsValue:d,validate:l}]=y({labelWidth:160,baseColProps:{span:24},layout:"vertical",schemas:z,showActionButtonGroup:!1}),[r,{setDrawerProps:i,closeDrawer:I}]=V(o=>f(this,null,function*(){u(),i({confirmLoading:!1}),a.value=!!(o!=null&&o.isUpdate),p(a)&&d(_({},o.record))})),B=R(()=>p(a)?s("platform_management.banner.editBanner"):s("platform_management.banner.addBanner"));function M(){return f(this,null,function*(){const o=yield l();i({confirmLoading:!0}),o.id=p(a)?Number(o.id):0,(p(a)?yield w(o):yield G(o)).code===0&&(I(),t("success")),i({confirmLoading:!1})})}return{registerDrawer:r,registerForm:m,getTitle:B,handleSubmit:M}}});function Q(e,t,a,s,m,u){const d=h("BasicForm"),l=h("BasicDrawer");return T(),$(l,P(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"500px",onOk:e.handleSubmit}),{default:N(()=>[U(d,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const W=A(H,[["render",Q]]),oe=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as B,oe as a,ae as c,ne as d,te as g,re as s};
