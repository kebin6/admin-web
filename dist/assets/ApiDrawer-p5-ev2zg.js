var P=Object.defineProperty;var g=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var h=(s,e,t)=>e in s?P(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,b=(s,e)=>{for(var t in e||(e={}))I.call(e,t)&&h(s,t,e[t]);if(g)for(var t of g(e))M.call(e,t)&&h(s,t,e[t]);return s};var f=(s,e,t)=>new Promise((l,p)=>{var u=o=>{try{i(t.next(o))}catch(n){p(n)}},c=o=>{try{i(t.throw(o))}catch(n){p(n)}},i=o=>o.done?l(o.value):Promise.resolve(o.value).then(u,c);i((t=t.apply(s,e)).next())});import{_,a as A}from"./useForm-Cq3McrEd.js";import{b as D,as as x,a as m,v as E,_ as R}from"./entry/index-DaEB-Y-8-1718870402071.js";import{G as S}from"./antd-BNMfrwLX.js";import{l as q,d as B,f as F,c as N,u as d,ab as y,_ as C,a7 as L,a8 as O,k as G,ac as H}from"./vue-BMCEF3Jf.js";import{B as $,a as U}from"./index-CL7BM-aX.js";const{t:a}=D(),ae=[{title:a("sys.apis.path"),dataIndex:"path",width:50},{title:a("sys.apis.group"),dataIndex:"group",width:20},{title:a("sys.apis.serviceName"),dataIndex:"serviceName",width:20},{title:a("sys.apis.description"),dataIndex:"trans",width:80},{title:a("sys.apis.method"),dataIndex:"method",width:20},{title:a("common.required"),dataIndex:"isRequired",width:10,customRender:({record:s})=>{let e="";return s.isRequired===!0?e=a("common.yes"):e=a("common.no"),q(S,{color:s.isRequired===!0?"green":"red"},()=>e)}},{title:a("common.createTime"),dataIndex:"createdAt",width:30,customRender:({record:s})=>x(s.createdAt)}],te=[{field:"path",label:a("sys.apis.path"),component:"Input",colProps:{span:8},rules:[{max:200}]},{field:"serviceName",label:a("sys.apis.serviceName"),component:"Input",colProps:{span:8},rules:[{max:20}]},{field:"group",label:a("sys.apis.group"),component:"Input",colProps:{span:8},rules:[{max:80}]},{field:"description",label:a("sys.apis.description"),component:"Input",colProps:{span:8},rules:[{max:100}]},{field:"method",label:a("sys.apis.method"),component:"Select",componentProps:{options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"DELETE",value:"DELETE"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"}]},colProps:{span:4}}],k=[{field:"id",label:"ID",component:"Input",show:!1},{field:"path",label:a("sys.apis.path"),required:!0,component:"Input",rules:[{max:200}]},{field:"serviceName",label:a("sys.apis.serviceName"),component:"Input",helpMessage:a("sys.apis.serviceNameHelpMessage"),rules:[{max:20}]},{field:"group",label:a("sys.apis.group"),required:!0,component:"Input",rules:[{max:80}]},{field:"description",label:a("sys.apis.description"),required:!0,component:"Input",rules:[{max:100}]},{field:"method",label:a("sys.apis.method"),required:!0,component:"Select",componentProps:{options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"DELETE",value:"DELETE"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"}]}},{field:"isRequired",label:a("common.required"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:a("common.yes"),value:!0},{label:a("common.no"),value:!1}]},helpMessage:a("sys.apis.isRequiredHelpMessage")}],oe=(s,e="notice")=>m.post({url:"/sys-api/api/list",params:s},{errorMessageMode:e}),j=(s,e="notice")=>m.post({url:"/sys-api/api/create",params:s},{errorMessageMode:e,successMessageMode:e}),V=(s,e="notice")=>m.post({url:"/sys-api/api/update",params:s},{errorMessageMode:e,successMessageMode:e}),re=(s,e="notice")=>m.post({url:"/sys-api/api/delete",params:s},{errorMessageMode:e,successMessageMode:e}),z=B({name:"ApiDrawer",components:{BasicDrawer:$,BasicForm:_},emits:["success","register"],setup(s,{emit:e}){const t=F(!0),{t:l}=E.useI18n(),[p,{resetFields:u,setFieldsValue:c,validate:i}]=A({labelWidth:160,baseColProps:{span:24},layout:"vertical",schemas:k,showActionButtonGroup:!1}),[o,{setDrawerProps:n,closeDrawer:T}]=U(r=>f(this,null,function*(){u(),n({confirmLoading:!1}),t.value=!!(r!=null&&r.isUpdate),d(t)&&c(b({},r.record))})),v=N(()=>d(t)?l("sys.apis.editApi"):l("sys.apis.addApi"));function w(){return f(this,null,function*(){const r=yield i();n({confirmLoading:!0}),r.id=d(t)?Number(r.id):0,(d(t)?yield V(r):yield j(r)).code===0&&(T(),e("success")),n({confirmLoading:!1})})}return{registerDrawer:o,registerForm:p,getTitle:v,handleSubmit:w}}});function W(s,e,t,l,p,u){const c=y("BasicForm"),i=y("BasicDrawer");return C(),L(i,H(s.$attrs,{onRegister:s.registerDrawer,showFooter:"",title:s.getTitle,width:"500px",onOk:s.handleSubmit}),{default:O(()=>[G(c,{onRegister:s.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const J=R(z,[["render",W]]),ie=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{J as A,ie as a,ae as c,re as d,oe as g,te as s};
